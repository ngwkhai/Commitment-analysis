sha,author,author_date,committer,committer_date,message
545f1174879e51cc8116125d87e430cde67210ee,Vercel Release Bot,2024-06-12 17:45:25+00:00,GitHub,2024-06-12 17:45:25+00:00,"Version Packages (#11720)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.2.7

### Patch Changes

- Updated dependencies
\[[`84b744541`](https://github.com/vercel/vercel/commit/84b744541b58524bd91e3b3f0628b675e772660f)]:
    -   @vercel/next@4.2.17

## @vercel/next@4.2.17

### Patch Changes

- Ensure all prerenders have matching .action output
([#11719](https://github.com/vercel/vercel/pull/11719))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
84b744541b58524bd91e3b3f0628b675e772660f,JJ Kasper,2024-06-11 21:21:41+00:00,GitHub,2024-06-11 21:21:41+00:00,"[next] Ensure all prerenders have matching .action output (#11719)

This ensures we create `.action` outputs for all prerendered paths that
point to a streaming serverless function when enabled so that our
routing rules have the expected destination available.

---------

Co-authored-by: Zack Tanner <1939140+ztanner@users.noreply.github.com>"
9d6088e0b55578d776ac95a038a9c00f8eb22030,Vercel Release Bot,2024-06-07 15:40:38+00:00,GitHub,2024-06-07 15:40:38+00:00,"Version Packages (#11693)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.2.2

### Patch Changes

- Change node 16.x EOL for Vercel
([#11704](https://github.com/vercel/vercel/pull/11704))

- Improve error message and refactor
([#11706](https://github.com/vercel/vercel/pull/11706))

- [built-utils] Handle case of not having lockfile when corepack is
enabled ([#11697](https://github.com/vercel/vercel/pull/11697))

## vercel@34.2.6

### Patch Changes

- [built-utils] Handle case of not having lockfile when corepack is
enabled ([#11697](https://github.com/vercel/vercel/pull/11697))

- Updated dependencies
\[[`5c12ed695`](https://github.com/vercel/vercel/commit/5c12ed69500ceff6a9dc544eab0acd7af64c044a),
[`21444a38e`](https://github.com/vercel/vercel/commit/21444a38e50ed680c91b0e3955f15e378eeda64b),
[`fa9789a93`](https://github.com/vercel/vercel/commit/fa9789a93ebe64c4246f441590cb695d296af336),
[`c925dc4a1`](https://github.com/vercel/vercel/commit/c925dc4a1bf3a47b684b5f7fd788ddd24ba1ed1e),
[`06d2d860e`](https://github.com/vercel/vercel/commit/06d2d860e47aed792247bf929805b180ed6e2dab),
[`b735f37fd`](https://github.com/vercel/vercel/commit/b735f37fd92c707040e72084b0fdb4f8fd01dd51)]:
    -   @vercel/build-utils@8.2.2
    -   @vercel/next@4.2.16
    -   @vercel/redwood@2.0.10
    -   @vercel/remix-builder@2.1.7
    -   @vercel/node@3.1.7
    -   @vercel/static-build@2.5.11

## @vercel/client@13.2.9

### Patch Changes

- Updated dependencies
\[[`5c12ed695`](https://github.com/vercel/vercel/commit/5c12ed69500ceff6a9dc544eab0acd7af64c044a),
[`21444a38e`](https://github.com/vercel/vercel/commit/21444a38e50ed680c91b0e3955f15e378eeda64b),
[`06d2d860e`](https://github.com/vercel/vercel/commit/06d2d860e47aed792247bf929805b180ed6e2dab)]:
    -   @vercel/build-utils@8.2.2

## @vercel/gatsby-plugin-vercel-builder@2.0.33

### Patch Changes

- Updated dependencies
\[[`5c12ed695`](https://github.com/vercel/vercel/commit/5c12ed69500ceff6a9dc544eab0acd7af64c044a),
[`21444a38e`](https://github.com/vercel/vercel/commit/21444a38e50ed680c91b0e3955f15e378eeda64b),
[`06d2d860e`](https://github.com/vercel/vercel/commit/06d2d860e47aed792247bf929805b180ed6e2dab)]:
    -   @vercel/build-utils@8.2.2

## @vercel/next@4.2.16

### Patch Changes

- prevent /index from being incorrectly normalized in rewrites
([#11707](https://github.com/vercel/vercel/pull/11707))

- Upgrade to @vercel/nft 0.27.2 with browser remapping support
([#11700](https://github.com/vercel/vercel/pull/11700))

- ensure unmatched rsc rewrites are routed to correct handler
([#11688](https://github.com/vercel/vercel/pull/11688))

## @vercel/node@3.1.7

### Patch Changes

- Upgrade to @vercel/nft 0.27.2 with browser remapping support
([#11700](https://github.com/vercel/vercel/pull/11700))

- Updated dependencies
\[[`5c12ed695`](https://github.com/vercel/vercel/commit/5c12ed69500ceff6a9dc544eab0acd7af64c044a),
[`21444a38e`](https://github.com/vercel/vercel/commit/21444a38e50ed680c91b0e3955f15e378eeda64b),
[`06d2d860e`](https://github.com/vercel/vercel/commit/06d2d860e47aed792247bf929805b180ed6e2dab)]:
    -   @vercel/build-utils@8.2.2

## @vercel/redwood@2.0.10

### Patch Changes

- Upgrade to @vercel/nft 0.27.2 with browser remapping support
([#11700](https://github.com/vercel/vercel/pull/11700))

## @vercel/remix-builder@2.1.7

### Patch Changes

- Upgrade to @vercel/nft 0.27.2 with browser remapping support
([#11700](https://github.com/vercel/vercel/pull/11700))

## @vercel/static-build@2.5.11

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.33

## @vercel-internals/types@1.0.38

### Patch Changes

- Updated dependencies
\[[`5c12ed695`](https://github.com/vercel/vercel/commit/5c12ed69500ceff6a9dc544eab0acd7af64c044a),
[`21444a38e`](https://github.com/vercel/vercel/commit/21444a38e50ed680c91b0e3955f15e378eeda64b),
[`06d2d860e`](https://github.com/vercel/vercel/commit/06d2d860e47aed792247bf929805b180ed6e2dab)]:
    -   @vercel/build-utils@8.2.2

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c925dc4a1bf3a47b684b5f7fd788ddd24ba1ed1e,Dima Voytenko,2024-06-06 23:45:45+00:00,GitHub,2024-06-06 23:45:45+00:00,"Upgrade to @vercel/nft 0.27.2 with browser remapping support (#11700)

See https://github.com/vercel/nft/pull/424 for more details."
21444a38e50ed680c91b0e3955f15e378eeda64b,Austin Merrick,2024-06-06 23:20:23+00:00,GitHub,2024-06-06 23:20:23+00:00,"[build-utils] Improve no lockfile detection logic (#11706)

Two minor improvements missed from the review of https://github.com/vercel/vercel/pull/11697:

- [Include supported package manager names in error message](https://github.com/vercel/vercel/pull/11697#discussion_r1628382867)
- [Avoid `as` to improve type safety](https://github.com/vercel/vercel/pull/11697#discussion_r1628384789)"
fa9789a93ebe64c4246f441590cb695d296af336,Zack Tanner,2024-06-06 23:15:47+00:00,GitHub,2024-06-06 23:15:47+00:00,"[next]: fix issues with rewrite normalization of index routes (#11707)

The Next.js builder currently normalizes user rewrites to ensure the internal `.rsc` / `.action` rewrites are still handled even after following the rewrite.

However we have special rewrites: `/index.rsc` and `/index.action`. When those routes pass through the normalization logic, a request routed to a catch-all route (e.g. `[[...param]]`) will go from `/` -> `/index.rsc` -> `<someRewriteString>?param=index`. This is inconsistent `next start` or other spots where the param should be an empty string.

Similarly, if a user rewrites their entire app to a subdirectory (eg `/:path*` -> `/base/:path*`, a route will go from `/` -> `/index.rsc` -> `/base/index.rsc` which won't exist, causing a 404. 

The solution here is to return the `index.rsc` / `index.action` routes back to `/` so they can be handled by user rewrites, if necessary. 

This also disables the `hasActionOutputSupport` flag if `routesManifest.i18n` is detected as they are not compatible."
5c12ed69500ceff6a9dc544eab0acd7af64c044a,Trek Glowacki,2024-06-06 19:54:22+00:00,GitHub,2024-06-06 19:54:22+00:00,"Change node 16.x EOL for Vercel (#11704)

https://github.com/vercel/vercel/pull/11671 changed the EOL date for
node 16.x to be AWS's final date. We want ours to be ~ a month earlier."
06d2d860e47aed792247bf929805b180ed6e2dab,Austin Merrick,2024-06-05 20:23:39+00:00,GitHub,2024-06-05 20:23:39+00:00,"[build-utils] Handle case of not having lockfile (#11697)

In the scenario where we don't have a lockfile, cliType was detected by build utils as npm regardless of what's set in corepack. This fixes that."
b735f37fd92c707040e72084b0fdb4f8fd01dd51,Zack Tanner,2024-06-04 18:52:44+00:00,GitHub,2024-06-04 18:52:44+00:00,"[next]: ensure unmatched rsc rewrites are routed to correct handler (#11688)

Same reasoning as:

- https://github.com/vercel/vercel/pull/11686

Split this into a separate PR so it can be tested/released separately."
d91f3afcbfb7b9e6f79e97afc87db1db78755eaa,Vercel Release Bot,2024-06-04 18:29:56+00:00,GitHub,2024-06-04 18:29:56+00:00,"Version Packages (#11689)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.2.5

### Patch Changes

- Adds a route for the `.rsc` pathname as well when app has ppr enabled
but not all routes.
([#11681](https://github.com/vercel/vercel/pull/11681))

- Updated dependencies
\[[`7457767a7`](https://github.com/vercel/vercel/commit/7457767a77b03662c103a658273a46cf78359068),
[`4337ea065`](https://github.com/vercel/vercel/commit/4337ea0654c4ee2c91c4464540f879d43da6696f)]:
    -   @vercel/next@4.2.15

## @vercel/fs-detectors@5.2.4

### Patch Changes

- Add support for detecting Turborepo 2
([#11680](https://github.com/vercel/vercel/pull/11680))

## @vercel/next@4.2.15

### Patch Changes

- ensure unmatched action rewrites are routed to correct handler
([#11686](https://github.com/vercel/vercel/pull/11686))

- Adds a route for the `.rsc` pathname as well when app has ppr enabled
but not all routes.
([#11681](https://github.com/vercel/vercel/pull/11681))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
58d9789e6058c389bacf7be400d30dfaf8cdee3b,Lee Robinson,2024-06-04 18:28:11+00:00,GitHub,2024-06-04 18:28:11+00:00,examples: Update Astro template. (#11687)
7457767a77b03662c103a658273a46cf78359068,Zack Tanner,2024-06-04 18:05:11+00:00,GitHub,2024-06-04 18:05:11+00:00,"[next]: ensure unmatched action rewrites are routed to correct handler (#11686)

User defined rewrites are ""normalized"" so that our internal rewrites are still properly handled. Before normalizing these rewrites, the Next.js builder will attempt to match server action requests to a`.action` variant. Then the user-defined rewrites flow through the afterFiles normalization ([this part](https://github.com/vercel/vercel/blob/fix/unmatched-action-rewrites/packages/next/src/server-build.ts#L254-L279)) so that when we add `.action` in the builder, we don't drop the suffix. 

But this normalization can lead to a malformed `dest`. e.g., if I had rewrite like this:

```js
{
  source: '/greedy-rewrite/static/:path*',
  destination: '/static/:path*',
}
```

The builder would go through this flow on an action request to `/greedy-rewrite/static`:

1. It'll attempt to match it to a `.action` output, so `/greedy-rewrite/static` -> `/greedy-rewrite/static.action`
2. The afterFiles normalization will take place, so the original `dest` of `/static/$1` will become `/static/$1$rscsuff`
3. $1 will be an empty string, because it doesn't match the existing capture group. So now `/greedy-rewrite/static.action` -> `/greedy-rewrite/static/.action`
4. `static/.action` is not a valid output, so it'll 404 and the action will break. 

Existing handling exists for `.rsc` outputs for a similar reason, but only on the index route. I added a similar fix for this in #11688."
5dedc7b2ce34f473a14e8866684b4cfd00e239e1,Chris Olszewski,2024-06-04 17:36:35+00:00,GitHub,2024-06-04 17:36:35+00:00,"feat(turbo): add support for turbo 2 configuration (#11680)

With the release of Turborepo 2 we're renaming `pipeline` to `tasks`. 

This PR updates the default settings logic to look in `tasks` for a
`build` task definition in addition to looking at `pipeline`. It also
updates the message to no longer mention Turbo configuration in
`package.json` as this is fully ignored in Turborepo 2.

Added a quick unit test to verify `build` task definitions are found in
the `tasks` section of `turbo.json`.

Please let me know if there are other tests/places I should update."
4337ea0654c4ee2c91c4464540f879d43da6696f,Wyatt Johnson,2024-06-04 00:52:30+00:00,GitHub,2024-06-04 00:52:30+00:00,"[ppr] Add missng `.rsc` route for non-ppr enabled pages (#11681)

When deploying partial prerendering (PPR), there may some pages that are
not enabled for PPR but still appear in the `prerender-manifest.json`.
Due to the branching of the client router, these routes also have to
have a `.rsc` as well as a `.prefetch.rsc` variants in order to prevent
404's. This change adds support for adding the extra route to the
prerender for pages that have PPR disabled."
a26cbd819964f28b3696f6fcf8b928e138186997,Vercel Release Bot,2024-05-30 19:00:25+00:00,GitHub,2024-05-30 19:00:25+00:00,"Version Packages (#11674)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/python@4.3.0

### Minor Changes

- support newer python versions
([#11675](https://github.com/vercel/vercel/pull/11675))

## @vercel/build-utils@8.2.1

### Patch Changes

- [node] update node@16 deprecation day
([#11671](https://github.com/vercel/vercel/pull/11671))

## vercel@34.2.4

### Patch Changes

- Updated dependencies
\[[`3eb9d8c89`](https://github.com/vercel/vercel/commit/3eb9d8c8929592960d88e0395e2a2443f7304d6b),
[`83741a0eb`](https://github.com/vercel/vercel/commit/83741a0eb9e44457b083e8790a11eb89984e6357)]:
    -   @vercel/python@4.3.0
    -   @vercel/build-utils@8.2.1
    -   @vercel/node@3.1.6
    -   @vercel/static-build@2.5.10

## @vercel/client@13.2.8

### Patch Changes

- Updated dependencies
\[[`83741a0eb`](https://github.com/vercel/vercel/commit/83741a0eb9e44457b083e8790a11eb89984e6357)]:
    -   @vercel/build-utils@8.2.1

## @vercel/gatsby-plugin-vercel-builder@2.0.32

### Patch Changes

- Updated dependencies
\[[`83741a0eb`](https://github.com/vercel/vercel/commit/83741a0eb9e44457b083e8790a11eb89984e6357)]:
    -   @vercel/build-utils@8.2.1

## @vercel/node@3.1.6

### Patch Changes

- Updated dependencies
\[[`83741a0eb`](https://github.com/vercel/vercel/commit/83741a0eb9e44457b083e8790a11eb89984e6357)]:
    -   @vercel/build-utils@8.2.1

## @vercel/static-build@2.5.10

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.32

## @vercel-internals/types@1.0.37

### Patch Changes

- Updated dependencies
\[[`83741a0eb`](https://github.com/vercel/vercel/commit/83741a0eb9e44457b083e8790a11eb89984e6357)]:
    -   @vercel/build-utils@8.2.1

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
3eb9d8c8929592960d88e0395e2a2443f7304d6b,Trek Glowacki,2024-05-30 18:46:28+00:00,GitHub,2024-05-30 18:46:28+00:00,"support newer python versions (#11675)

When we added the option of getting `al2023` in addition to `al2`, this required a python version bump for those apps on `al2023`. Python 3.10 had a breaking minor change. https://github.com/vercel/vercel/pull/11541 mostly fixed it, with some comments.

OP hasn't replied to feedback on that PR, so I've take it over from them."
83741a0eb9e44457b083e8790a11eb89984e6357,Trek Glowacki,2024-05-30 15:24:15+00:00,GitHub,2024-05-30 15:24:15+00:00,"[node] update node@16 deprecation day (#11671)

Double check my dates, but I believe this is the new correct date we want. https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html"
9db02989818d5b30957b977c9f21ea2f3720d861,Jeff See,2024-05-28 17:02:45+00:00,GitHub,2024-05-28 17:02:45+00:00,Switch from `jest` to `vitest` for remix builder (#11652)
af29e9be49803be1f40664b57c4ea058bab43bae,Vercel Release Bot,2024-05-24 22:19:28+00:00,GitHub,2024-05-24 22:19:28+00:00,"Version Packages (#11648)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.2.3

### Patch Changes

- Don't create streaming lambdas for pages router routes
([#11660](https://github.com/vercel/vercel/pull/11660))

- Updated dependencies
\[[`c9d53d4e3`](https://github.com/vercel/vercel/commit/c9d53d4e3e4591b9b6bde86100564c9ee4c6d1d4),
[`5f561f8cf`](https://github.com/vercel/vercel/commit/5f561f8cfa4720801a5cf4598f193ab34539abb9)]:
    -   @vercel/next@4.2.14

## @vercel/next@4.2.14

### Patch Changes

- Don't create streaming lambdas for pages router routes
([#11660](https://github.com/vercel/vercel/pull/11660))

- Ensure user rewrites still match to action outputs
([#11628](https://github.com/vercel/vercel/pull/11628))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c9d53d4e3e4591b9b6bde86100564c9ee4c6d1d4,Wyatt Johnson,2024-05-24 22:15:32+00:00,GitHub,2024-05-24 22:15:32+00:00,"[next] Ensure only pages enable streaming (#11660)

This fixes a regression introduced by #11625 that enabled streaming for
routes on the pages router (these routes do not support streaming)."
a26ea7bf122a40e68324e9420a4a4a7623fbfc02,Trek Glowacki,2024-05-23 20:44:34+00:00,GitHub,2024-05-23 20:44:34+00:00,"[tests] bump datadog installed version (#11651)

Unsure if this is related to `vitest` migration or something else but a dependency of the `datadog-ci` version we use is gone and [now errors](https://github.com/vercel/vercel/actions/runs/9213580743/job/25348743824?pr=11650). Bumping it to latest."
866d0c173d6378be5ea9d9806492347624ef413f,Trek Glowacki,2024-05-23 20:25:04+00:00,GitHub,2024-05-23 20:25:04+00:00,"[tests] remove unused `opts.skipTeam` (#11650)

I can't find this being used anywhere."
5f561f8cfa4720801a5cf4598f193ab34539abb9,Zack Tanner,2024-05-23 19:06:25+00:00,GitHub,2024-05-23 19:06:25+00:00,"[next]: ensure user rewrites match to action outputs (#11628)

The builder normalizes user rewrites that target pages that have special outputs (`.rsc`, `.prefetch.rsc`). When we added support for `.action` outputs, we need to perform this same normalization to ensure that user rewrites still match. If the rewrite was a greedy match (eg `/:path*`) it'd be ok, but more specific rewrites would have the issue."
139e8cdb179524f9ba21f9296452997a77f0fe0c,Nathan Rajlich,2024-05-23 18:20:18+00:00,GitHub,2024-05-23 18:20:18+00:00,"[node] Use `vitest` for unit tests (#11631)

Similar to #11302, but for the `@vercel/node` package."
6529a9ab9cad30b443af26e740b18a791588d3aa,Vercel Release Bot,2024-05-23 08:33:01+00:00,GitHub,2024-05-23 08:33:01+00:00,"Version Packages (#11637)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.2.2

### Patch Changes

- Fix related to erroring when a prefetch route is not provided but the
route is PPR enabled
([#11638](https://github.com/vercel/vercel/pull/11638))

- Updated dependencies
\[[`8e44ef5b9`](https://github.com/vercel/vercel/commit/8e44ef5b9d2cdbe743c7f1e3534f182465fed9bf),
[`61e6af374`](https://github.com/vercel/vercel/commit/61e6af3740296c11015d0c3da84ee205020b0ea6)]:
    -   @vercel/next@4.2.13

## @vercel/next@4.2.13

### Patch Changes

- Fix static case for detecting when a page supports PPR
([#11635](https://github.com/vercel/vercel/pull/11635))

- Fix related to erroring when a prefetch route is not provided but the
route is PPR enabled
([#11638](https://github.com/vercel/vercel/pull/11638))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
61e6af3740296c11015d0c3da84ee205020b0ea6,Wyatt Johnson,2024-05-23 08:28:05+00:00,GitHub,2024-05-23 08:28:05+00:00,"[ppr] Fix for error case involving prefetch data routes (#11638)

Only error when the prefetch data route is present but the route also
has PPR enabled."
8e44ef5b9d2cdbe743c7f1e3534f182465fed9bf,Wyatt Johnson,2024-05-23 05:23:26+00:00,GitHub,2024-05-23 05:23:26+00:00,"[ppr] Fix static case (#11635)

When PPR is enabled in incremental mode, the previous code used the page information to determine if there was a failure for generating the flight data. This has been moved to the app PPR setting instead."
fe9e27c459d1ad9b94010f55de6ed87278ff748b,Wyatt Johnson,2024-05-23 05:14:10+00:00,GitHub,2024-05-23 05:14:10+00:00,chore: bump react version (#11636)
8a6dc204fd768b830ad917333965f40e6eb36db2,Vercel Release Bot,2024-05-23 04:14:01+00:00,GitHub,2024-05-23 04:14:01+00:00,"Version Packages (#11634)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.2.1

### Patch Changes

- Support incremental PPR for large applications
([#11625](https://github.com/vercel/vercel/pull/11625))

- Updated dependencies
\[[`73e558913`](https://github.com/vercel/vercel/commit/73e558913ab30ba097d7536a12fa8a7c967479f0)]:
    -   @vercel/next@4.2.12

## @vercel/next@4.2.12

### Patch Changes

- Support incremental PPR for large applications
([#11625](https://github.com/vercel/vercel/pull/11625))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
73e558913ab30ba097d7536a12fa8a7c967479f0,Wyatt Johnson,2024-05-23 04:06:12+00:00,GitHub,2024-05-23 04:06:12+00:00,"[ppr] Fix PPR detection for groups (#11625)

Previously, PPR was either all on, or all off. As we've added support for incremental adoption of PPR, the logic for determining if there's a grouping issue had to be adjusted.

This now only considers a group as supporting PPR if a route in the group supports PPR. As we also use this as a grouping key, this still ensures we won't have conflicts."
464cb26255f537ff07fd3900a2bae2ea141d27a4,Wyatt Johnson,2024-05-23 02:45:03+00:00,GitHub,2024-05-23 02:45:03+00:00,chore: bump react versions (#11632)
80e0bab0ec4020312c5d3c0a3c8107dda6d80cc1,Zack Tanner,2024-05-17 22:24:53+00:00,GitHub,2024-05-17 22:24:53+00:00,"[next] Fix Next.js tests (#11610)

Syncs the experimental React dependency to avoid build errors. 

This was updated in:
- https://github.com/vercel/next.js/pull/65864"
f900ca8daf8ef153262108365f62265191319397,Trek Glowacki,2024-05-17 01:33:36+00:00,GitHub,2024-05-17 01:33:36+00:00,"[framework-fixtures] add missing dependency to dependabot (#11606)

Hydrogen has a peer-dep on remix."
9ee7d31957f09a49ec31546377ae1c7ef14d9f7c,Nathan Rajlich,2024-05-15 20:02:40+00:00,GitHub,2024-05-15 20:02:40+00:00,"[cli] Add test for CLI extensions passing through exit code (#11600)

/cc @codybrouwers"
1eb76a3ae7a653cf342ffb7fabc5fa9528fea187,Vercel Release Bot,2024-05-15 19:26:56+00:00,GitHub,2024-05-15 19:26:56+00:00,"Version Packages (#11598)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.2.0

### Minor Changes

- fix corepack detection for package manager version determination
([#11596](https://github.com/vercel/vercel/pull/11596))

### Patch Changes

- Fix triggering of ignored project settings node version warning
([#11550](https://github.com/vercel/vercel/pull/11550))

## vercel@34.2.0

### Minor Changes

- Stop sending system environment variables in dev
([#11526](https://github.com/vercel/vercel/pull/11526))

### Patch Changes

- Updated dependencies
\[[`d3c1267e2`](https://github.com/vercel/vercel/commit/d3c1267e24082789ea6382cf6af81dd40df288ff),
[`ccd7eb1fb`](https://github.com/vercel/vercel/commit/ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3)]:
    -   @vercel/build-utils@8.2.0
    -   @vercel/node@3.1.5
    -   @vercel/static-build@2.5.9

## @vercel/client@13.2.7

### Patch Changes

- Updated dependencies
\[[`d3c1267e2`](https://github.com/vercel/vercel/commit/d3c1267e24082789ea6382cf6af81dd40df288ff),
[`ccd7eb1fb`](https://github.com/vercel/vercel/commit/ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3)]:
    -   @vercel/build-utils@8.2.0

## @vercel/gatsby-plugin-vercel-builder@2.0.31

### Patch Changes

- Updated dependencies
\[[`d3c1267e2`](https://github.com/vercel/vercel/commit/d3c1267e24082789ea6382cf6af81dd40df288ff),
[`ccd7eb1fb`](https://github.com/vercel/vercel/commit/ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3)]:
    -   @vercel/build-utils@8.2.0

## @vercel/node@3.1.5

### Patch Changes

- Updated dependencies
\[[`d3c1267e2`](https://github.com/vercel/vercel/commit/d3c1267e24082789ea6382cf6af81dd40df288ff),
[`ccd7eb1fb`](https://github.com/vercel/vercel/commit/ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3)]:
    -   @vercel/build-utils@8.2.0

## @vercel/static-build@2.5.9

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.31

## @vercel-internals/types@1.0.36

### Patch Changes

- Updated dependencies
\[[`d3c1267e2`](https://github.com/vercel/vercel/commit/d3c1267e24082789ea6382cf6af81dd40df288ff),
[`ccd7eb1fb`](https://github.com/vercel/vercel/commit/ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3)]:
    -   @vercel/build-utils@8.2.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ccd7eb1fb78f7ac9effdbe1935de3bda82c97fe3,Sean Massa,2024-05-15 19:25:01+00:00,GitHub,2024-05-15 19:25:01+00:00,"fix corepack detection for package manager version determination (#11596)

The previous logic was checking for the env var `ENABLE_EXPERIMENTAL_COREPACK` to determine if corepack was being used by a project. However, this value only means that the build system should consider corepack, not that it's actively being used.

We need to check that flag AND the existence of a `packageManager` property in the project's `package.json`."
41c44d659412c5d7ee70261a9c255aa687e7b37e,Austin Merrick,2024-05-15 17:17:41+00:00,GitHub,2024-05-15 17:17:41+00:00,"[build-utils] Refactor `getNodeVersion` (#11599)

Makes variable names more clear and consistent."
446ac49e2b93c4035d2a850655844b8f8d34a531,Austin Merrick,2024-05-15 12:17:47+00:00,GitHub,2024-05-15 12:17:47+00:00,"[cli] Don't pull system environment vars in dev (#11526)

System environment variables would get set with empty strings in development which breaks some builds. This fixes that by using the v2 of `/env/pull` introduced in https://github.com/vercel/api/pull/27777."
d3c1267e24082789ea6382cf6af81dd40df288ff,Austin Merrick,2024-05-14 23:23:17+00:00,GitHub,2024-05-14 23:23:17+00:00,"[build-utils] Fix warn for ignored project settings node version (#11550)

There were scenarios where the warning ""Node.js Version defined in your Project Settings (""18.x"") will not apply"" would not be triggered. For example:

1. Project Setting is 18.x
2. package.json has ""engines.node"": "">=18.x""
3. semver.intersects('18.x', '>=18.x') // => true (In this [code path](https://github.com/vercel/vercel/blob/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015/packages/build-utils/src/fs/run-user-scripts.ts#L258)) -> No warning message that Node.js Version was changed
4. After the error message we evaluate the latest node Version to use (20.x) in getSupportedNodeVersion()(this [code path](https://github.com/vercel/vercel/blob/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015/packages/build-utils/src/fs/run-user-scripts.ts#L274))
5. User doesn't get notified that we changed the node version to something different than their project setting

This fixes that scenario by getting the supported node version first."
b09d7b6130e24ecc1ea45e1fa4ad2af77bc08f07,Sean Massa,2024-05-14 19:15:31+00:00,GitHub,2024-05-14 19:15:31+00:00,"[tests] allow errors to define retry delay (#11597)

Errors can now define their own retry delay. This is necessary for some
kinds of errors where all retries will run within the same second."
f78b315a509b684fdd6d954d243ca2e24a7ba415,Vercel Release Bot,2024-05-13 22:07:24+00:00,GitHub,2024-05-13 22:07:24+00:00,"Version Packages (#11595)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.1.3

### Patch Changes

- [build-utils] log more around package manager detection
([#11594](https://github.com/vercel/vercel/pull/11594))

## vercel@34.1.14

### Patch Changes

- Updated dependencies
\[[`ad6945435`](https://github.com/vercel/vercel/commit/ad69454352b519b2b0ed326f245c779530554bf2)]:
    -   @vercel/build-utils@8.1.3
    -   @vercel/node@3.1.4
    -   @vercel/static-build@2.5.8

## @vercel/client@13.2.6

### Patch Changes

- Updated dependencies
\[[`ad6945435`](https://github.com/vercel/vercel/commit/ad69454352b519b2b0ed326f245c779530554bf2)]:
    -   @vercel/build-utils@8.1.3

## @vercel/gatsby-plugin-vercel-builder@2.0.30

### Patch Changes

- Updated dependencies
\[[`ad6945435`](https://github.com/vercel/vercel/commit/ad69454352b519b2b0ed326f245c779530554bf2)]:
    -   @vercel/build-utils@8.1.3

## @vercel/node@3.1.4

### Patch Changes

- Updated dependencies
\[[`ad6945435`](https://github.com/vercel/vercel/commit/ad69454352b519b2b0ed326f245c779530554bf2)]:
    -   @vercel/build-utils@8.1.3

## @vercel/static-build@2.5.8

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.30

## @vercel-internals/types@1.0.35

### Patch Changes

- Updated dependencies
\[[`ad6945435`](https://github.com/vercel/vercel/commit/ad69454352b519b2b0ed326f245c779530554bf2)]:
    -   @vercel/build-utils@8.1.3

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ad69454352b519b2b0ed326f245c779530554bf2,Sean Massa,2024-05-13 22:05:25+00:00,GitHub,2024-05-13 22:05:25+00:00,"[build-utils] log more around package manager detection (#11594)

Add more loggign around package manager detection to see why we're not
properly detecting `pnpm` given a pnpm lockfile."
14059906d312a683044acc4cd1ff3b49e2e7c837,Vercel Release Bot,2024-05-13 19:03:47+00:00,GitHub,2024-05-13 19:03:47+00:00,"Version Packages (#11593)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.1.2

### Patch Changes

- add log to package manager version detection
([#11592](https://github.com/vercel/vercel/pull/11592))

## vercel@34.1.13

### Patch Changes

- Updated dependencies
\[[`1682ad43d`](https://github.com/vercel/vercel/commit/1682ad43d0064b22b1248a7e946746b838f00076)]:
    -   @vercel/build-utils@8.1.2
    -   @vercel/node@3.1.3
    -   @vercel/static-build@2.5.7

## @vercel/client@13.2.5

### Patch Changes

- Updated dependencies
\[[`1682ad43d`](https://github.com/vercel/vercel/commit/1682ad43d0064b22b1248a7e946746b838f00076)]:
    -   @vercel/build-utils@8.1.2

## @vercel/gatsby-plugin-vercel-builder@2.0.29

### Patch Changes

- Updated dependencies
\[[`1682ad43d`](https://github.com/vercel/vercel/commit/1682ad43d0064b22b1248a7e946746b838f00076)]:
    -   @vercel/build-utils@8.1.2

## @vercel/node@3.1.3

### Patch Changes

- Updated dependencies
\[[`1682ad43d`](https://github.com/vercel/vercel/commit/1682ad43d0064b22b1248a7e946746b838f00076)]:
    -   @vercel/build-utils@8.1.2

## @vercel/static-build@2.5.7

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.29

## @vercel-internals/types@1.0.34

### Patch Changes

- Updated dependencies
\[[`1682ad43d`](https://github.com/vercel/vercel/commit/1682ad43d0064b22b1248a7e946746b838f00076)]:
    -   @vercel/build-utils@8.1.2

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
1682ad43d0064b22b1248a7e946746b838f00076,Sean Massa,2024-05-13 19:01:58+00:00,GitHub,2024-05-13 19:01:58+00:00,[build-utils] add log to package manager version detection (#11592)
423630a168f547e29ed1437ce2a2484530063cea,Vercel Release Bot,2024-05-13 18:18:24+00:00,GitHub,2024-05-13 18:18:24+00:00,"Version Packages (#11589)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.1.1

### Patch Changes

- [build-utils] pnpm lockfile testing and fixing
([#11591](https://github.com/vercel/vercel/pull/11591))

## vercel@34.1.12

### Patch Changes

- Updated dependencies
\[[`67afc2608`](https://github.com/vercel/vercel/commit/67afc26085e2ebdaa33a8cbce112afec4cb1c4f5),
[`2f7a6ed5f`](https://github.com/vercel/vercel/commit/2f7a6ed5f92d454000f92247d3b6548e2064f4e6)]:
    -   @vercel/next@4.2.11
    -   @vercel/build-utils@8.1.1
    -   @vercel/node@3.1.2
    -   @vercel/static-build@2.5.6

## @vercel/client@13.2.4

### Patch Changes

- Updated dependencies
\[[`2f7a6ed5f`](https://github.com/vercel/vercel/commit/2f7a6ed5f92d454000f92247d3b6548e2064f4e6)]:
    -   @vercel/build-utils@8.1.1

## @vercel/gatsby-plugin-vercel-builder@2.0.28

### Patch Changes

- Updated dependencies
\[[`2f7a6ed5f`](https://github.com/vercel/vercel/commit/2f7a6ed5f92d454000f92247d3b6548e2064f4e6)]:
    -   @vercel/build-utils@8.1.1

## @vercel/next@4.2.11

### Patch Changes

- normalize source file locations for special metadata files
([#11579](https://github.com/vercel/vercel/pull/11579))

## @vercel/node@3.1.2

### Patch Changes

- Updated dependencies
\[[`2f7a6ed5f`](https://github.com/vercel/vercel/commit/2f7a6ed5f92d454000f92247d3b6548e2064f4e6)]:
    -   @vercel/build-utils@8.1.1

## @vercel/static-build@2.5.6

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.28

## @vercel-internals/types@1.0.33

### Patch Changes

- Updated dependencies
\[[`2f7a6ed5f`](https://github.com/vercel/vercel/commit/2f7a6ed5f92d454000f92247d3b6548e2064f4e6)]:
    -   @vercel/build-utils@8.1.1

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
2f7a6ed5f92d454000f92247d3b6548e2064f4e6,Sean Massa,2024-05-13 18:16:24+00:00,GitHub,2024-05-13 18:16:24+00:00,"[build-utils] log pnpm lockfile selection (#11591)

Both `pnpm@6` and `pnpm@7` can parse lockfile versions `5.3` and `5.4`, but if there's a mismatch, `pnpm` will output a warning saying so. In order to prevent confusing warnings from being displayed to the user, this PR aligns the pnpm version with the exact lockfile verison.

It also adds a debug log to show which package manager version was determined based on the lockfile version."
67afc26085e2ebdaa33a8cbce112afec4cb1c4f5,Zack Tanner,2024-05-13 16:04:16+00:00,GitHub,2024-05-13 16:04:16+00:00,"[next]: normalize source path for special app-dir metadata files (#11579)

When specifying a functions configuration in `vercel.json`, we attempt to find source files for all entrypoints.  This attempts to normalize those source paths for some special cases so that we don't show a build warning for completely normal usage.

- `/_not-found` is an entrypoint automatically inserted by Next.js -- if we don't find a source file for it, don't warn, as the user might not have added one
- special metadata files like `favicon.ico` and `opengraph-image.<ext>` will be bundled as `favicon.ico/route.js` but the source file will be the raw extension."
c224fb1d2ea2b2c62716ee485af33608a142c723,Vercel Release Bot,2024-05-11 19:36:18+00:00,GitHub,2024-05-11 19:36:18+00:00,"Version Packages (#11584)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.1.0

### Minor Changes

- Update pnpm version detection logic
([#11445](https://github.com/vercel/vercel/pull/11445))
    Add support for pnpm 9

## vercel@34.1.11

### Patch Changes

- Updated dependencies
\[[`5014b1e82`](https://github.com/vercel/vercel/commit/5014b1e82a46181baeb727ffe6d14000b6a4b1d7),
[`18d1703d5`](https://github.com/vercel/vercel/commit/18d1703d5b4f2adc61fd56011f874c393fa57d0d),
[`e87d4c14d`](https://github.com/vercel/vercel/commit/e87d4c14d0e718281f9ba91c9ec1cc6e142d383d),
[`bc5fd4115`](https://github.com/vercel/vercel/commit/bc5fd41158ec9f36e5db1fe749589adcbaec6950)]:
    -   @vercel/build-utils@8.1.0
    -   @vercel/next@4.2.10
    -   @vercel/redwood@2.0.9
    -   @vercel/remix-builder@2.1.6
    -   @vercel/node@3.1.1
    -   @vercel/static-build@2.5.5

## @vercel/client@13.2.3

### Patch Changes

- Updated dependencies
\[[`5014b1e82`](https://github.com/vercel/vercel/commit/5014b1e82a46181baeb727ffe6d14000b6a4b1d7)]:
    -   @vercel/build-utils@8.1.0

## @vercel/gatsby-plugin-vercel-builder@2.0.27

### Patch Changes

- Updated dependencies
\[[`5014b1e82`](https://github.com/vercel/vercel/commit/5014b1e82a46181baeb727ffe6d14000b6a4b1d7)]:
    -   @vercel/build-utils@8.1.0

## @vercel/next@4.2.10

### Patch Changes

- skip action rewrites for RSC requests
([#11576](https://github.com/vercel/vercel/pull/11576))

- Bump `@vercel/nft@0.27.0`
([#11580](https://github.com/vercel/vercel/pull/11580))

## @vercel/node@3.1.1

### Patch Changes

- Bump `@vercel/nft@0.27.0`
([#11580](https://github.com/vercel/vercel/pull/11580))

- Updated dependencies
\[[`5014b1e82`](https://github.com/vercel/vercel/commit/5014b1e82a46181baeb727ffe6d14000b6a4b1d7)]:
    -   @vercel/build-utils@8.1.0

## @vercel/redwood@2.0.9

### Patch Changes

- Bump `@vercel/nft@0.27.0`
([#11580](https://github.com/vercel/vercel/pull/11580))

## @vercel/remix-builder@2.1.6

### Patch Changes

- Bump `@vercel/nft@0.27.0`
([#11580](https://github.com/vercel/vercel/pull/11580))

- Update `@remix-run/dev` fork to v2.9.2-patch.2
([#11582](https://github.com/vercel/vercel/pull/11582))

## @vercel/static-build@2.5.5

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.27

## @vercel-internals/types@1.0.32

### Patch Changes

- Updated dependencies
\[[`5014b1e82`](https://github.com/vercel/vercel/commit/5014b1e82a46181baeb727ffe6d14000b6a4b1d7)]:
    -   @vercel/build-utils@8.1.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
5014b1e82a46181baeb727ffe6d14000b6a4b1d7,Erika Rowland,2024-05-11 07:09:53+00:00,GitHub,2024-05-11 07:09:53+00:00,"Update pnpm version detection logic (#11445)

The code we use to detect the version of `pnpm` based on lockfiles is hard to follow. It doesn't pick and executable, it instead of *sometimes* overrides the `PATH` for these utilities with a prepended alternate path. 

This means that there is no one single place where we definitively specify which version of `pnpm` that is used, so much as *hope* that the `PATH` has the correct version on it. I don't know that we *can* specify an executable outside of the build container, and it's unclear, since this is a package, whether this utility is used outside of a build container setting.

In this pull request I cleaned up the code and updated the logic to include the `pnpm 7` and `pnpm 8` changes requested, with no changes yet to implement `pnpm 9`.

It's possible that we want to rewrite this detection logic from scratch to avoid this roundabout way of ""finding"" the executable, but I haven't done that here."
6a8a84907bf560a3339c3017d742e2a13629c6be,Steven,2024-05-11 04:25:41+00:00,GitHub,2024-05-11 04:25:41+00:00,"[tests] remove styfle from codeowners (#11585)

Remove `styfle` from codeowners"
722adf0e102db9b9eb3414d04d215f5c438be0c5,Sean Massa,2024-05-10 22:19:10+00:00,GitHub,2024-05-10 22:19:10+00:00,"some errors can specify retries (#11581)

Trying a different approach to retrying errors when logs must contain a value.

Alternative to: https://github.com/vercel/vercel/pull/11577"
bc5fd41158ec9f36e5db1fe749589adcbaec6950,Vercel Release Bot,2024-05-10 21:35:49+00:00,GitHub,2024-05-10 21:35:49+00:00,"[remix] Update `@remix-run/dev` to v2.9.2-patch.2 (#11582)

This auto-generated PR updates `@remix-run/dev` to version 2.9.2-patch.2."
e87d4c14d0e718281f9ba91c9ec1cc6e142d383d,Austin Merrick,2024-05-10 21:25:40+00:00,GitHub,2024-05-10 21:25:40+00:00,"[node][next][redwood][remix] bump `@vercel/nft@0.27.0`  (#11580)

[@vercel/nft@0.27.0](https://github.com/vercel/nft/releases/tag/0.27.0) is necessary for parsing import assertions. Import assertions are causing [this issue](https://github.com/vercel/vercel/issues/11533)."
bc95d764b44b8960ee68e29b227f89e06a8cc363,Kiko Beats,2024-05-10 21:15:37+00:00,GitHub,2024-05-10 21:15:37+00:00,"ci: add Node.js v18 tests (#11575)

Some tests are skipped because CI tests are running against v16.

I added a new GitHub CI job just inlcuding the tests that are skipped for now."
1b5ce5644fa92265af965698ecca986176a06cd8,Nathan Rajlich,2024-05-10 21:11:16+00:00,GitHub,2024-05-10 21:11:16+00:00,"[examples] Fix ""remix"" template (#11583)

`@vercel/remix@2.9.2` is broken, but that's the version that tries to
get installed from the `^` caret. For now, explicitly use the
`2.9.2-patch.2` release which works correctly."
18d1703d5b4f2adc61fd56011f874c393fa57d0d,Zack Tanner,2024-05-10 21:09:56+00:00,GitHub,2024-05-10 21:09:56+00:00,"[next]: skip action rewrite if RSC header is present (#11576)

When rewriting requests that contain a `next-action` header to a `.action` output, we should do so only in the case where the RSC header isn't present. When a Next.js server action triggers a `redirect`, an intra-app RSC request will be made to that requested URL, with the `next-action` header still present. This means the intra-app request will be incorrectly rewritten, when we only intended to handle the actual action request.

This was patched in Next.js in the following PR:
- https://github.com/vercel/next.js/pull/65615

But it seems like a good idea to be resilient to this here as well."
5c6f9c0b665e2c5647ec98cc7e3ef2827df9e8b1,Zack Tanner,2024-05-10 18:39:49+00:00,GitHub,2024-05-10 18:39:49+00:00,"[tests] fix maxDuration integration test (#11578)

Since maxDuration was updated for this tier ([x-ref](https://vercel.com/changelog/vercel-functions-for-hobby-can-now-run-up-to-60-seconds))"
809740b385c4b9f43871350f19973807d612fc2b,Vercel Release Bot,2024-05-10 01:12:02+00:00,GitHub,2024-05-10 01:12:02+00:00,"Version Packages (#11570)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/functions@1.0.2

### Patch Changes

- Convert package to CommonJS
([#11569](https://github.com/vercel/vercel/pull/11569))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
bf9acd023dd2d4d5a04001cbe447111433d8b394,Nathan Rajlich,2024-05-10 01:10:39+00:00,GitHub,2024-05-10 01:10:39+00:00,"[functions] Convert to CommonJS (#11569)

The package was not working because it is using ESM syntax, but the
`package.json` did not have `""type"": ""module""`.

Anyways, for broader compatibility, let's use CommonJS."
f4ba9cdcf828252626294fca3d444766d46636c8,Vercel Release Bot,2024-05-09 17:03:52+00:00,GitHub,2024-05-09 17:03:52+00:00,"Version Packages (#11564)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.10

### Patch Changes

- Updated dependencies
\[[`119f80e96`](https://github.com/vercel/vercel/commit/119f80e9611a7a5a755aa689502dcdab323194aa),
[`11584b0e9`](https://github.com/vercel/vercel/commit/11584b0e9b55f312f34d0d6467ab498e472ac9df),
[`3023122d4`](https://github.com/vercel/vercel/commit/3023122d4e0dd292340d9e9e61ef232baf6e610d),
[`0e774b6be`](https://github.com/vercel/vercel/commit/0e774b6be0c832213a64124e1f4fc6d150e87d9f)]:
    -   @vercel/next@4.2.9
    -   @vercel/static-build@2.5.4

## @vercel/next@4.2.9

### Patch Changes

- Support incremental partial prerendering
([#11560](https://github.com/vercel/vercel/pull/11560))

- ensure `.action` outputs are created for edge functions
([#11568](https://github.com/vercel/vercel/pull/11568))

-   ([#11566](https://github.com/vercel/vercel/pull/11566))

## @vercel/static-build@2.5.4

### Patch Changes

- Fix `Cannot read properties of null` error
([#11559](https://github.com/vercel/vercel/pull/11559))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
11584b0e9b55f312f34d0d6467ab498e472ac9df,Zack Tanner,2024-05-09 01:39:08+00:00,GitHub,2024-05-09 01:39:08+00:00,"[next] ensure action outputs are created for edge functions (#11568)

Since we're rewriting `next-action` requests to `.action` outputs, we need to ensure that we also duplicate the edge function handler for it. 

This runs all of the existing Node runtime tests in the Edge runtime as well. However, there's a discrepancy in how `x-vercel-cache` is returned, so for now we instead validate that its responding with `x-edge-runtime`."
3023122d4e0dd292340d9e9e61ef232baf6e610d,JJ Kasper,2024-05-08 23:33:24+00:00,GitHub,2024-05-08 23:33:24+00:00,"[next] Update react version in next fixtures (#11566)

We are locking the peerDependency to react v19 beta on canary so we need to update these fixtures to tolerate that. 

x-ref: [slack thread](https://vercel.slack.com/archives/C048KLPEEH1/p1715191372631389)
x-ref: https://github.com/vercel/next.js/pull/65058"
0e774b6be0c832213a64124e1f4fc6d150e87d9f,Nathan Rajlich,2024-05-08 18:44:49+00:00,GitHub,2024-05-08 18:44:49+00:00,"[static-build] Fix `Cannot read properties of null` error (#11559)

A bug was introduced in #11529 that causes the build to fail if `ruby`
is not installed. The fix here accounts for that scenario.

Closes #11547."
119f80e9611a7a5a755aa689502dcdab323194aa,Wyatt Johnson,2024-05-08 14:13:39+00:00,GitHub,2024-05-08 14:13:39+00:00,"[next] Support Incremental Partial Prerendering (#11560)

This fixes the logic that detects if partial prerendering (PPR) has been
enabled for a project. The new incremental adoption pathway allows
setting the `experimental.ppr = 'incremental'` which the previous code
did not support."
9fe92d7de0bdd8fffb809a6a179382a1d4145328,Vercel Release Bot,2024-05-07 15:13:10+00:00,GitHub,2024-05-07 15:13:10+00:00,"Version Packages (#11558)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/functions@1.0.1

### Patch Changes

- Don't throw error if context is missing
([`0817527f9`](https://github.com/vercel/vercel/commit/0817527f9e9d0d5fceb73f21e695089349a96d3e))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0817527f9e9d0d5fceb73f21e695089349a96d3e,Kiko Beats,2024-05-07 15:02:23+00:00,GitHub,2024-05-07 15:02:23+00:00,"[@vercel/functions]: don't throw error if context is missing (#11557)

making `waituntil` a noop"
6476f4f786edae12e969690617af36d4d026d097,Vercel Release Bot,2024-05-07 13:40:37+00:00,GitHub,2024-05-07 13:40:37+00:00,"Version Packages (#11551)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/functions@1.0.0

### Major Changes

- Initial release
([#11553](https://github.com/vercel/vercel/pull/11553))

## @vercel/node@3.1.0

### Minor Changes

- Make waitUntil consistent for Node.js & Edge
([#11553](https://github.com/vercel/vercel/pull/11553))

## vercel@34.1.9

### Patch Changes

- Updated dependencies
\[[`5a532a5b9`](https://github.com/vercel/vercel/commit/5a532a5b948994ba04783ac560357eed9f94a3f3),
[`50fc27ba5`](https://github.com/vercel/vercel/commit/50fc27ba5773870956300bbbaffbe387d549bc12),
[`c1d852295`](https://github.com/vercel/vercel/commit/c1d85229509dd319a1f11beb940a759113564d33),
[`a5ea04154`](https://github.com/vercel/vercel/commit/a5ea04154ba26ee4e635d8953aa4f0d9d82d3a96)]:
    -   @vercel/next@4.2.8
    -   @vercel/node@3.1.0

## @vercel/next@4.2.8

### Patch Changes

- Fix missing initial RSC headers
([#11552](https://github.com/vercel/vercel/pull/11552))

- Remove .prefetch.rsc rewrites for non-PPR
([#11540](https://github.com/vercel/vercel/pull/11540))

- [next] rename middleware manifest env
([#11549](https://github.com/vercel/vercel/pull/11549))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
a5ea04154ba26ee4e635d8953aa4f0d9d82d3a96,Kiko Beats,2024-05-07 13:36:43+00:00,GitHub,2024-05-07 13:36:43+00:00,"Make waitUntil consistent for Node.js & Edge (#11553)

This PR makes `waitUntil` consistent when interacting with it via `vc
dev`. That includes:

**be possible to call `waitUntil` from the context second argument in
web handlers functions (Node.js & Edge)**:

```js
export function GET(request, { waitUntil }) {
  waitUntil(fetch('https://vercel.com'));
  return new Response('OK');
}
```

**be possible to call `waitUntil` imported from `@vercel/functions`**
(Node.js & Edge):

```js
import { waitUntil } from '@vercel/functions';

export function GET(request) {
  waitUntil(fetch('https://vercel.com'));
  return new Response('OK');
}
```

Additionally, `@vercel/functions` can be adopted for other framework to
take advantage of this pattern at Vercel.

---------

Co-authored-by: Javi Velasco <javier.velasco86@gmail.com>"
5a532a5b948994ba04783ac560357eed9f94a3f3,JJ Kasper,2024-05-07 07:43:00+00:00,GitHub,2024-05-07 07:43:00+00:00,"[next] Fix missing initial RSC headers (#11552)

While investigating https://github.com/vercel/next.js/issues/59883 we noticed the RSC Prerender did not have all the expected headers like the HTML Prerender which caused unexpected revalidation behavior specifically on client-transition as some of these headers are used to detect if a revalidated tag is associated with specific outputs. 

x-ref: https://github.com/vercel/next.js/issues/59883"
c1d85229509dd319a1f11beb940a759113564d33,Jiachi Liu,2024-05-06 19:32:07+00:00,GitHub,2024-05-06 19:32:07+00:00,"[next] rename middleware manifest env (#11549)

Rename `environment` property to `env` from middleware manifest added in
#11390.
Align with https://github.com/vercel/next.js/pull/64521

The `environments` property wasn't working properly before due to
unfinished next.js changes, it should work now after testing with next
build from https://github.com/vercel/next.js/pull/64521. We change it to
a better naming word `env`."
50fc27ba5773870956300bbbaffbe387d549bc12,JJ Kasper,2024-05-06 18:17:22+00:00,GitHub,2024-05-06 18:17:22+00:00,"[next] Remove .prefetch.rsc rewrites for non-PPR (#11540)

Removes .prefetch.rsc rewrites rules for non-PPR, as Next.js doesn't emit any static prefetches otherwise"
3101d2497f79fd39e927dd9527d0bee800445d28,Joel Henningsen,2024-05-05 00:28:21+00:00,GitHub,2024-05-05 00:28:21+00:00,"Fix broken link to Code of Conduct in README (#11544)

### Purpose of the Pull Request

This PR addresses a broken link in the README.md file that is supposed
to direct readers to the Code of Conduct. Previously, the link pointed
to `CODE_OF_CONDUCT.md`, which does not exist in the repository's main
directory. The corrected link points to the actual location of the file
in the `.github` directory.

### Changes Made

- Updated the link to the Code of Conduct from `[Code of
Conduct](CODE_OF_CONDUCT.md)` to `[Code of
Conduct](./.github/CODE_OF_CONDUCT.md)` to reflect the correct path.

### Additional Information

I previously opened discussion #11498 regarding this issue with the goal
of following the [Contribuing
Guidelines](https://github.com/vercel/vercel?tab=readme-ov-file#contributing),
but did not receive any feedback over the past week. Given the nature of
the change (a simple documentation fix), I proceeded with this pull
request to ensure the documentation remains useful and accurate for all
users.

### Impact

This change will help ensure that new contributors and users can easily
access the Code of Conduct, fostering better community interactions and
adherence to project standards.

Thank you for considering this pull request. I am open to any further
suggestions or requirements needed to merge this change."
4b0716b5564d3408165748370cfbe609d8a4fc01,Vercel Release Bot,2024-05-03 17:01:03+00:00,GitHub,2024-05-03 17:01:03+00:00,"Version Packages (#11524)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.8

### Patch Changes

- Updated dependencies
\[[`52e435aa5`](https://github.com/vercel/vercel/commit/52e435aa5d7b4014d19477969ad5cbfbe94aa76f),
[`124846a3e`](https://github.com/vercel/vercel/commit/124846a3e65a3bf1ae82327fd4ba2b132674fb39),
[`dc974b679`](https://github.com/vercel/vercel/commit/dc974b6797de0b6e90373c92e1f2bbdafcfc6687),
[`58c6755e0`](https://github.com/vercel/vercel/commit/58c6755e0c12cae2ce55978b7bf8722133151196)]:
    -   @vercel/next@4.2.7
    -   @vercel/static-build@2.5.3

## @vercel/next@4.2.7

### Patch Changes

- Fix missing .rsc outputs for pages prerenders
([#11503](https://github.com/vercel/vercel/pull/11503))

- Fix base path app index RSC handling
([#11528](https://github.com/vercel/vercel/pull/11528))

- Fix interception routes PPR route handling
([#11527](https://github.com/vercel/vercel/pull/11527))

## @vercel/static-build@2.5.3

### Patch Changes

- Support Ruby and Python static site generators in AL2023 build image
([#11529](https://github.com/vercel/vercel/pull/11529))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
124846a3e65a3bf1ae82327fd4ba2b132674fb39,JJ Kasper,2024-05-02 21:07:58+00:00,GitHub,2024-05-02 21:07:58+00:00,"[next] Fix base path app index RSC handling (#11528)

This ensures we properly name the outputs when a basePath is present for the `index` output as previously we weren't properly routing to the RSC output due to nested `index` naming/route conflict. This only was a noticeable issue with prerender/static index outputs with base path and app router since if the index route was dynamic it would still catch the RSC request and just handle it without the correct naming. 

Fixes: https://github.com/vercel/next.js/issues/64903"
30cd0ec8984c28b086bea90aef39841fceb1fac2,dependabot[bot],2024-05-02 15:23:12+00:00,GitHub,2024-05-02 15:23:12+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/ionic-angular-v8 with 2 updates (#11530)

Bumps the core group in /packages/static-build/test/fixtures/ionic-angular-v8 with 2 updates: [@ionic/angular](https://github.com/ionic-team/ionic-framework) and [@ionic/core](https://github.com/ionic-team/ionic-framework).

Updates `@ionic/angular` from 8.0.1 to 8.1.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/angular</code>'s releases</a>.</em></p>
<blockquote>
<h2>v8.1.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.2...v8.1.0"">8.1.0</a> (2024-05-01)</h1>
<h3>Features</h3>
<ul>
<li>add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba"">5b686ef</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23650"">#23650</a></li>
<li><strong>content:</strong> add fixedSlotPlacement prop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29233"">#29233</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/90a7e70a1c827835c18fd5f39d53ab17d286b4a7"">90a7e70</a>)</li>
<li><strong>datetime:</strong> pass roles to overlay when dismissing (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29221"">#29221</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/6945adc3cccabf59a2e640462ab4fd09ade59f6f"">6945adc</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28298"">#28298</a></li>
<li><strong>input:</strong> add clearInputIcon property (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29246"">#29246</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0f5d1c02d20483d47b6907fec696633cc7634554"">0f5d1c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26974"">#26974</a></li>
<li><strong>modal, popover:</strong> add ability to temporarily disable focus trapping (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29379"">#29379</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7c00351680a955130fa10d25d4439d3cc18db805"">7c00351</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24646"">#24646</a></li>
<li><strong>picker:</strong> picker column is easier to select with assistive technology (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29371"">#29371</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/e38e2e4d35076fa42241158568fb0ed50094fcbf"">e38e2e4</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/25221"">#25221</a></li>
</ul>
<h2>v8.0.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.0.2"">8.0.2</a> (2024-05-01)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33"">4d09890</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29198"">#29198</a></li>
<li><strong>ios:</strong> large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7"">bd8d065</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28751"">#28751</a></li>
<li><strong>md:</strong> item border has improved contrast in dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29398"">#29398</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fa85f030cfdb3ef8482ef29faff0144b27c9aa45"">fa85f03</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29386"">#29386</a></li>
<li><strong>select:</strong> options are visible with fit-content width and fill outline (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29408"">#29408</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f15b62a9ca9a817d2252753d31025d431ac9f8e2"">f15b62a</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29321"">#29321</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/angular</code>'s changelog</a>.</em></p>
<blockquote>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.2...v8.1.0"">8.1.0</a> (2024-05-01)</h1>
<h3>Features</h3>
<ul>
<li>add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba"">5b686ef</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23650"">#23650</a></li>
<li><strong>content:</strong> add fixedSlotPlacement prop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29233"">#29233</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/90a7e70a1c827835c18fd5f39d53ab17d286b4a7"">90a7e70</a>)</li>
<li><strong>datetime:</strong> pass roles to overlay when dismissing (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29221"">#29221</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/6945adc3cccabf59a2e640462ab4fd09ade59f6f"">6945adc</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28298"">#28298</a></li>
<li><strong>input:</strong> add clearInputIcon property (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29246"">#29246</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0f5d1c02d20483d47b6907fec696633cc7634554"">0f5d1c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26974"">#26974</a></li>
<li><strong>modal, popover:</strong> add ability to temporarily disable focus trapping (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29379"">#29379</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7c00351680a955130fa10d25d4439d3cc18db805"">7c00351</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24646"">#24646</a></li>
<li><strong>picker:</strong> picker column is easier to select with assistive technology (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29371"">#29371</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/e38e2e4d35076fa42241158568fb0ed50094fcbf"">e38e2e4</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/25221"">#25221</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.0.2"">8.0.2</a> (2024-05-01)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33"">4d09890</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29198"">#29198</a></li>
<li><strong>ios:</strong> large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7"">bd8d065</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28751"">#28751</a></li>
<li><strong>md:</strong> item border has improved contrast in dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29398"">#29398</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fa85f030cfdb3ef8482ef29faff0144b27c9aa45"">fa85f03</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29386"">#29386</a></li>
<li><strong>select:</strong> options are visible with fit-content width and fill outline (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29408"">#29408</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f15b62a9ca9a817d2252753d31025d431ac9f8e2"">f15b62a</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29321"">#29321</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/78d30767031ed0185ec36693ea276d27da1bcfc7""><code>78d3076</code></a> v8.1.0</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4ef5036c7b1d3f6474c8a0bbd0e219c3673a2dfb""><code>4ef5036</code></a> chore: sync with main (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29433"">#29433</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/72711bba2e631ea7f12ad5934310c617cd989592""><code>72711bb</code></a> chore: sync with main</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/d81c88403e1d47a51def955a077af99e5daf0910""><code>d81c884</code></a> merge release-8.0.2 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29431"">#29431</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba""><code>5b686ef</code></a> feat: add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/665d67778fd89aa72fe4769349ab515b8fff33e4""><code>665d677</code></a> chore(): update package lock files</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/101b50e14c91ef6eb276cb2376e2e7873102133e""><code>101b50e</code></a> v8.0.2</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/a01c3d49bb57e7ba672631a37bf0e82d88063ef0""><code>a01c3d4</code></a> docs(testing, components): clarify testing and focusable usage (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29424"">#29424</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7""><code>bd8d065</code></a> fix(ios): large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33""><code>4d09890</code></a> fix(datetime): navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.1.0"">compare view</a></li>
</ul>
</details>
<br />

Updates `@ionic/core` from 8.0.1 to 8.1.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/core</code>'s releases</a>.</em></p>
<blockquote>
<h2>v8.1.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.2...v8.1.0"">8.1.0</a> (2024-05-01)</h1>
<h3>Features</h3>
<ul>
<li>add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba"">5b686ef</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23650"">#23650</a></li>
<li><strong>content:</strong> add fixedSlotPlacement prop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29233"">#29233</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/90a7e70a1c827835c18fd5f39d53ab17d286b4a7"">90a7e70</a>)</li>
<li><strong>datetime:</strong> pass roles to overlay when dismissing (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29221"">#29221</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/6945adc3cccabf59a2e640462ab4fd09ade59f6f"">6945adc</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28298"">#28298</a></li>
<li><strong>input:</strong> add clearInputIcon property (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29246"">#29246</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0f5d1c02d20483d47b6907fec696633cc7634554"">0f5d1c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26974"">#26974</a></li>
<li><strong>modal, popover:</strong> add ability to temporarily disable focus trapping (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29379"">#29379</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7c00351680a955130fa10d25d4439d3cc18db805"">7c00351</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24646"">#24646</a></li>
<li><strong>picker:</strong> picker column is easier to select with assistive technology (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29371"">#29371</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/e38e2e4d35076fa42241158568fb0ed50094fcbf"">e38e2e4</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/25221"">#25221</a></li>
</ul>
<h2>v8.0.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.0.2"">8.0.2</a> (2024-05-01)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33"">4d09890</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29198"">#29198</a></li>
<li><strong>ios:</strong> large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7"">bd8d065</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28751"">#28751</a></li>
<li><strong>md:</strong> item border has improved contrast in dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29398"">#29398</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fa85f030cfdb3ef8482ef29faff0144b27c9aa45"">fa85f03</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29386"">#29386</a></li>
<li><strong>select:</strong> options are visible with fit-content width and fill outline (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29408"">#29408</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f15b62a9ca9a817d2252753d31025d431ac9f8e2"">f15b62a</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29321"">#29321</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/core</code>'s changelog</a>.</em></p>
<blockquote>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.2...v8.1.0"">8.1.0</a> (2024-05-01)</h1>
<h3>Features</h3>
<ul>
<li>add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba"">5b686ef</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23650"">#23650</a></li>
<li><strong>content:</strong> add fixedSlotPlacement prop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29233"">#29233</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/90a7e70a1c827835c18fd5f39d53ab17d286b4a7"">90a7e70</a>)</li>
<li><strong>datetime:</strong> pass roles to overlay when dismissing (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29221"">#29221</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/6945adc3cccabf59a2e640462ab4fd09ade59f6f"">6945adc</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28298"">#28298</a></li>
<li><strong>input:</strong> add clearInputIcon property (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29246"">#29246</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0f5d1c02d20483d47b6907fec696633cc7634554"">0f5d1c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26974"">#26974</a></li>
<li><strong>modal, popover:</strong> add ability to temporarily disable focus trapping (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29379"">#29379</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7c00351680a955130fa10d25d4439d3cc18db805"">7c00351</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24646"">#24646</a></li>
<li><strong>picker:</strong> picker column is easier to select with assistive technology (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29371"">#29371</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/e38e2e4d35076fa42241158568fb0ed50094fcbf"">e38e2e4</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/25221"">#25221</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.0.2"">8.0.2</a> (2024-05-01)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33"">4d09890</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29198"">#29198</a></li>
<li><strong>ios:</strong> large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7"">bd8d065</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28751"">#28751</a></li>
<li><strong>md:</strong> item border has improved contrast in dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29398"">#29398</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fa85f030cfdb3ef8482ef29faff0144b27c9aa45"">fa85f03</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29386"">#29386</a></li>
<li><strong>select:</strong> options are visible with fit-content width and fill outline (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29408"">#29408</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f15b62a9ca9a817d2252753d31025d431ac9f8e2"">f15b62a</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29321"">#29321</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/78d30767031ed0185ec36693ea276d27da1bcfc7""><code>78d3076</code></a> v8.1.0</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4ef5036c7b1d3f6474c8a0bbd0e219c3673a2dfb""><code>4ef5036</code></a> chore: sync with main (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29433"">#29433</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/72711bba2e631ea7f12ad5934310c617cd989592""><code>72711bb</code></a> chore: sync with main</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/d81c88403e1d47a51def955a077af99e5daf0910""><code>d81c884</code></a> merge release-8.0.2 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29431"">#29431</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/5b686efc1025cd4088c89ef29154311a3d7504ba""><code>5b686ef</code></a> feat: add experimental transition focus manager (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29400"">#29400</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/665d67778fd89aa72fe4769349ab515b8fff33e4""><code>665d677</code></a> chore(): update package lock files</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/101b50e14c91ef6eb276cb2376e2e7873102133e""><code>101b50e</code></a> v8.0.2</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/a01c3d49bb57e7ba672631a37bf0e82d88063ef0""><code>a01c3d4</code></a> docs(testing, components): clarify testing and focusable usage (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29424"">#29424</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/bd8d065e1af038fe24fbe9a6acd9e0f2004bc0b7""><code>bd8d065</code></a> fix(ios): large title transition accounts for back button with no text  (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29327"">#29327</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4d09890d69590f0c8c32b387769a6e1e14a03c33""><code>4d09890</code></a> fix(datetime): navigating months in RTL works correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29421"">#29421</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v8.0.1...v8.1.0"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
dc974b6797de0b6e90373c92e1f2bbdafcfc6687,Nathan Rajlich,2024-05-02 07:57:59+00:00,GitHub,2024-05-02 07:57:59+00:00,"[static-build] Support Ruby static site generators in AL2023 build image (#11529)

* Set `GEM_HOME` env var based on the Ruby version in `$PATH` (i.e.
`3.2.0` for the AL2 build image, `3.3.0` for the AL2023 build image)
* Copy previous `jekyll-v4` test fixture to `jekyll-v4-al2` (uses AL2
build image)
* Update `jekyll-v4` test fixture to use Jekyll 4.3.3 (required for Ruby
3.3.0), and remove `package.json` so that it uses AL2023 build image
* Copy previous `middleman-v4` test fixture to `middleman-v4-al2` (uses
AL2 build image)
* Removed `package.json` from `middleman-v4` fixture, so that it uses
AL2023 build image"
58c6755e0c12cae2ce55978b7bf8722133151196,JJ Kasper,2024-05-01 22:40:04+00:00,GitHub,2024-05-01 22:40:04+00:00,"[next] Fix interception routes PPR route handling (#11527)

This ensures we properly create `.prefetch.rsc` output aliases for non-prerender outputs when PPR is enabled so that we can properly route which handles the interception route case as that is always dynamic so was missing it's `.prefetch.rsc` output causing the prefetch request to 404 unexpectedly. 

x-ref: [slack thread](https://vercel.slack.com/archives/C070ZMMKVU7/p1714511126337289)"
f18575fcd08b863f2d07a601b45975b96fb45689,dependabot[bot],2024-04-30 21:37:27+00:00,GitHub,2024-04-30 21:37:27+00:00,"[framework-fixtures]: Bump preact from 10.20.1 to 10.21.0 in /packages/static-build/test/fixtures/preact-v10 in the core group (#11517)

Bumps the core group in /packages/static-build/test/fixtures/preact-v10 with 1 update: [preact](https://github.com/preactjs/preact).

Updates `preact` from 10.20.1 to 10.21.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/preactjs/preact/releases"">preact's releases</a>.</em></p>
<blockquote>
<h2>10.21.0</h2>
<h2>Features</h2>
<ul>
<li>Debug throw on too many rerenders (<a href=""https://redirect.github.com/preactjs/preact/issues/4349"">#4349</a>, thanks <a href=""https://github.com/rschristian""><code>@rschristian</code></a>)</li>
<li>Add compat/client types (<a href=""https://redirect.github.com/preactjs/preact/issues/4345"">#4345</a>, thanks <a href=""https://github.com/rschristian""><code>@rschristian</code></a>)</li>
</ul>
<h2>Fixes</h2>
<ul>
<li>Expose hooks through compat's <code>ReactCurrentDispatcher</code> (<a href=""https://redirect.github.com/preactjs/preact/issues/4342"">#4342</a>, thanks <a href=""https://github.com/rschristian""><code>@rschristian</code></a>)</li>
<li>Respect default value (<a href=""https://redirect.github.com/preactjs/preact/issues/4341"">#4341</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Incorrect &quot;missing transform-jsx-source&quot; warning (<a href=""https://redirect.github.com/preactjs/preact/issues/4350"">#4350</a>, thanks <a href=""https://github.com/rschristian""><code>@rschristian</code></a>)</li>
</ul>
<h2>Types</h2>
<ul>
<li>Support ComponentChild(ren) in compat render/hydrate/createPortal (<a href=""https://redirect.github.com/preactjs/preact/issues/4346"">#4346</a>, thanks <a href=""https://github.com/rschristian""><code>@rschristian</code></a>)</li>
<li>Import and re-export PreactElement (<a href=""https://redirect.github.com/preactjs/preact/issues/3228"">#3228</a>, thanks <a href=""https://github.com/henryqdineen""><code>@henryqdineen</code></a>)</li>
</ul>
<h2>Maintenance</h2>
<ul>
<li>Add zustand and redux-toolkit to the demo. (<a href=""https://redirect.github.com/preactjs/preact/issues/3523"">#3523</a>, thanks <a href=""https://github.com/MortezaMirjavadi""><code>@MortezaMirjavadi</code></a>)</li>
<li>Optimise jsx runtime (<a href=""https://redirect.github.com/preactjs/preact/issues/4337"">#4337</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>10.20.2</h2>
<h2>Fixes</h2>
<ul>
<li>Check whether <code>oldDom</code> is present in the DOM (<a href=""https://redirect.github.com/preactjs/preact/issues/4318"">#4318</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Simplify the logic introduced in <a href=""https://redirect.github.com/preactjs/preact/issues/4322"">#4322</a> &amp; use eventClock for capture events too (<a href=""https://redirect.github.com/preactjs/preact/issues/4324"">#4324</a>, thanks <a href=""https://github.com/jviide""><code>@jviide</code></a>)</li>
<li>Use a virtual clock instead of Date.now() for event dispatch times (<a href=""https://redirect.github.com/preactjs/preact/issues/4322"">#4322</a>, thanks <a href=""https://github.com/jviide""><code>@jviide</code></a>)</li>
</ul>
<h2>Types</h2>
<ul>
<li>Add template tag JSX type (<a href=""https://redirect.github.com/preactjs/preact/issues/4334"">#4334</a>, thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>)</li>
</ul>
<h2>Maintenance</h2>
<ul>
<li>Integrate the new benchmarks repo and update  (<a href=""https://redirect.github.com/preactjs/preact/issues/4310"">#4310</a>, thanks <a href=""https://github.com/andrewiggins""><code>@andrewiggins</code></a>)</li>
<li>Some byte improvements (<a href=""https://redirect.github.com/preactjs/preact/issues/4321"">#4321</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/preactjs/preact/commit/a832512a4e749bac9e618bc1cdbff3b5e1f41853""><code>a832512</code></a> 10.21.0 (<a href=""https://redirect.github.com/preactjs/preact/issues/4360"">#4360</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/dbc4d6109ca844ba5c42b5cb1c0c1800be6ce3ca""><code>dbc4d61</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact/issues/4350"">#4350</a> from preactjs/fix/jsx-source-debug-warning</li>
<li><a href=""https://github.com/preactjs/preact/commit/50c3f3ebe8d8a488adc6f3c9999e0aae36ff732e""><code>50c3f3e</code></a> Merge branch 'main' into fix/jsx-source-debug-warning</li>
<li><a href=""https://github.com/preactjs/preact/commit/613cacc0e3e9bb8b7547f26fea4061d54797e690""><code>613cacc</code></a> feat: debug throw on too many rerenders (<a href=""https://redirect.github.com/preactjs/preact/issues/4349"">#4349</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/2e2f5ab3a7b7e6a8cce2957136a138584726931e""><code>2e2f5ab</code></a> fix: Appease ESLint</li>
<li><a href=""https://github.com/preactjs/preact/commit/d4ff12e97cc14a347efa07ca12a82381ff025978""><code>d4ff12e</code></a> test: Add test for fixed jsx-source warning</li>
<li><a href=""https://github.com/preactjs/preact/commit/61ce7a4f26ea9c431fa47247f7562d1acc5d3c02""><code>61ce7a4</code></a> refactor: Slight rename</li>
<li><a href=""https://github.com/preactjs/preact/commit/784af469d139c95070909cb41e9d518313183193""><code>784af46</code></a> fix: Incorrect &quot;missing <code>transform-jsx-source</code>&quot; warning</li>
<li><a href=""https://github.com/preactjs/preact/commit/aa95aa924dd5fe28798f2712acdabdc2e9fa38c9""><code>aa95aa9</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact/issues/4346"">#4346</a> from preactjs/types/fix-hydrate-render-createPortal</li>
<li><a href=""https://github.com/preactjs/preact/commit/1fc799dc6f40a5f556b935a4aad773678e1497e0""><code>1fc799d</code></a> refactor: Support ComponentChild(ren) in compat render/hydrate/createPortal</li>
<li>Additional commits viewable in <a href=""https://github.com/preactjs/preact/compare/10.20.1...10.21.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=preact&package-manager=npm_and_yarn&previous-version=10.20.1&new-version=10.21.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
d6412be6bc9cf9fb816b1d778ffb21168b98346e,Erika Rowland,2024-04-30 21:23:41+00:00,GitHub,2024-04-30 21:23:41+00:00,"Migrate build argument parsing (#11492)

Migrate `vc build` to use updated argument parsing helpers.

Adds `try/catch` and `handleError` logic that was previously missing."
52e435aa5d7b4014d19477969ad5cbfbe94aa76f,JJ Kasper,2024-04-30 20:34:41+00:00,GitHub,2024-04-30 20:34:41+00:00,"Fix missing .rsc outputs for pages prerenders (#11503)

When generating the outputs for pages when app router is also present we weren't creating the placeholder `.rsc` outputs for all prerender outputs so when a `fallback: false` route was configured in the pages router that could fall through to an app route it causes issues with client-navigation behaving differently than a direct visit. 

This ensures we add the placeholder `.rsc` outputs for all prerenders so that `fallback: false` pages don't have this unexpected behavior."
303256343a94259817523451bff7e0f9f7ed502d,Vercel Release Bot,2024-04-30 20:09:58+00:00,GitHub,2024-04-30 20:09:58+00:00,"Version Packages (#11523)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.7

### Patch Changes

- Updated dependencies
\[[`3420ba015`](https://github.com/vercel/vercel/commit/3420ba0153dcabffef7114ba2361fb0f3c43a7b3)]:
    -   @vercel/next@4.2.6

## @vercel/next@4.2.6

### Patch Changes

- [next] Update test fixture version
([#11514](https://github.com/vercel/vercel/pull/11514))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
88f3a816d916bc005c1fe0ab0b7b87016042e1a2,Vercel Release Bot,2024-04-30 20:04:00+00:00,GitHub,2024-04-30 20:04:00+00:00,"Version Packages (#11520)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.6

### Patch Changes

- Updated dependencies
\[[`b1adaf76e`](https://github.com/vercel/vercel/commit/b1adaf76ec17d1bbfe30a2bf65405bd886fa9bcf),
[`3fb97d1d2`](https://github.com/vercel/vercel/commit/3fb97d1d270e835ce34a687bd234ea53dfe446a2)]:
    -   @vercel/next@4.2.5
    -   @vercel/static-build@2.5.2

## @vercel/next@4.2.5

### Patch Changes

- Only rewrite next-action requests to `.action` handlers
([#11504](https://github.com/vercel/vercel/pull/11504))

## @vercel/static-build@2.5.2

### Patch Changes

- Revert `SUPPORTED_RUBY_VERSION` change to fix Ruby site generators on
AL2 build image ([#11522](https://github.com/vercel/vercel/pull/11522))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
3420ba0153dcabffef7114ba2361fb0f3c43a7b3,JJ Kasper,2024-04-30 20:03:36+00:00,GitHub,2024-04-30 20:03:36+00:00,"[next] Update test fixture version (#11514)

Noticed in https://github.com/vercel/vercel/pull/11503 that this test
fixture is incorrectly locked to a specific version when we don't want
it to be."
3fb97d1d270e835ce34a687bd234ea53dfe446a2,Nathan Rajlich,2024-04-30 20:01:59+00:00,GitHub,2024-04-30 20:01:59+00:00,"[static-build] Add changeset for `SUPPORTED_RUBY_VERSION` revert (#11522)

A changeset should have been included for
https://github.com/vercel/vercel/pull/11518. Adding that here."
f11c7024c47bc524016879e47a1b16ffd51fd782,Nathan Rajlich,2024-04-30 19:57:25+00:00,GitHub,2024-04-30 19:57:25+00:00,"[static-build] Fix running of e2e tests (#11518)

We accidentally committed a change which prevented the static-build e2e
tests, so fixing that.

Also reverting a change from https://github.com/vercel/vercel/pull/11497
which was causing issues with Ruby-based static site generators when
using the AL2 build image."
5eb4cc6f5d5bc41991f6b3cb2aa912ad56f36414,Sean Massa,2024-04-30 19:35:07+00:00,GitHub,2024-04-30 19:35:07+00:00,"Revert ""[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/hydrogen-v2023 with 6 updates"" (#11521)

Reverts vercel/vercel#11480

This was merged in when we weren't running the tests.
([Fix](https://github.com/vercel/vercel/pull/11518))."
b1adaf76ec17d1bbfe30a2bf65405bd886fa9bcf,Zack Tanner,2024-04-30 18:32:54+00:00,GitHub,2024-04-30 18:32:54+00:00,"[next] Only rewrite next-action requests to `.action` handlers (#11504)

This only rewrites requests that contain a `next-action` header (explicitly indicating it's a server action). A side effect is that POST requests to a server action on a static route, without a next-action header, won't be marked as streaming (but will still execute normally). This is fine as only the handled action needs to stream. 

This relands .action handling behind a feature flag."
1bf04ba4210c7f9fea5db2bb31f08e0559b89d17,Vercel Release Bot,2024-04-30 14:26:54+00:00,GitHub,2024-04-30 14:26:54+00:00,"Version Packages (#11512)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@8.0.0

### Major Changes

- Remove legacy `avoidTopLevelInstall` logic
([#11513](https://github.com/vercel/vercel/pull/11513))

### Patch Changes

- [build-utils] Add `VERCEL_PROJECT_PRODUCTION_URL` framework env var
prefix ([#11506](https://github.com/vercel/vercel/pull/11506))

## @vercel/ruby@2.1.0

### Minor Changes

- Add support for Ruby 3.3
([#11497](https://github.com/vercel/vercel/pull/11497))

- Remove legacy `avoidTopLevelInstall` logic
([#11513](https://github.com/vercel/vercel/pull/11513))

## vercel@34.1.5

### Patch Changes

- Updated dependencies
\[[`763a6d107`](https://github.com/vercel/vercel/commit/763a6d10709ca40405634d41863c2e524917ebe1),
[`15475c8a2`](https://github.com/vercel/vercel/commit/15475c8a2c303a1dd189ba24044fac750280dd2e),
[`21f5e7375`](https://github.com/vercel/vercel/commit/21f5e7375e4cb4ceed98ab56486d09a85fa3894d)]:
    -   @vercel/ruby@2.1.0
    -   @vercel/build-utils@8.0.0
    -   @vercel/node@3.0.28
    -   @vercel/static-build@2.5.1

## @vercel/client@13.2.2

### Patch Changes

- Updated dependencies
\[[`15475c8a2`](https://github.com/vercel/vercel/commit/15475c8a2c303a1dd189ba24044fac750280dd2e),
[`21f5e7375`](https://github.com/vercel/vercel/commit/21f5e7375e4cb4ceed98ab56486d09a85fa3894d)]:
    -   @vercel/build-utils@8.0.0

## @vercel/gatsby-plugin-vercel-builder@2.0.26

### Patch Changes

- Updated dependencies
\[[`15475c8a2`](https://github.com/vercel/vercel/commit/15475c8a2c303a1dd189ba24044fac750280dd2e),
[`21f5e7375`](https://github.com/vercel/vercel/commit/21f5e7375e4cb4ceed98ab56486d09a85fa3894d)]:
    -   @vercel/build-utils@8.0.0

## @vercel/node@3.0.28

### Patch Changes

- Updated dependencies
\[[`15475c8a2`](https://github.com/vercel/vercel/commit/15475c8a2c303a1dd189ba24044fac750280dd2e),
[`21f5e7375`](https://github.com/vercel/vercel/commit/21f5e7375e4cb4ceed98ab56486d09a85fa3894d)]:
    -   @vercel/build-utils@8.0.0

## @vercel/static-build@2.5.1

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.26

## @vercel-internals/types@1.0.31

### Patch Changes

- Updated dependencies
\[[`15475c8a2`](https://github.com/vercel/vercel/commit/15475c8a2c303a1dd189ba24044fac750280dd2e),
[`21f5e7375`](https://github.com/vercel/vercel/commit/21f5e7375e4cb4ceed98ab56486d09a85fa3894d)]:
    -   @vercel/build-utils@8.0.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
15475c8a2c303a1dd189ba24044fac750280dd2e,Nathan Rajlich,2024-04-30 08:37:43+00:00,GitHub,2024-04-30 08:37:43+00:00,"[build-utils][ruby] Remove legacy `avoidTopLevelInstall` logic (#11513)

This logic was left over from a previous iteration of the `vc build`
command which was never shipped. Thus, this logic is no longer
necessary."
1c8f0a4c33b0bb7b65a7df6ebb979bd9f9fe68cc,dependabot[bot],2024-04-30 08:24:28+00:00,GitHub,2024-04-30 08:24:28+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/hydrogen-v2023 with 6 updates (#11480)

Bumps the core group in /packages/static-build/test/fixtures/hydrogen-v2023 with 6 updates:

| Package | From | To |
| --- | --- | --- |
| [@shopify/cli](https://github.com/Shopify/cli) | `3.49.2` | `3.59.1` |
| [@shopify/cli-hydrogen](https://github.com/Shopify/cli) | `5.4.1` | `5.5.2` |
| [@shopify/hydrogen](https://github.com/Shopify/hydrogen-v1/tree/HEAD/packages/hydrogen) | `2023.7.9` | `2023.10.6` |
| @shopify/remix-oxygen | `1.1.5` | `1.1.8` |
| [@shopify/hydrogen-react](https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react) | `2023.7.4` | `2023.10.1` |
| [@shopify/mini-oxygen](https://github.com/Shopify/hydrogen) | `2.2.2` | `2.2.5` |

Updates `@shopify/cli` from 3.49.2 to 3.59.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/Shopify/cli/releases""><code>@shopify/cli</code>'s releases</a>.</em></p>
<blockquote>
<h2>3.59.1</h2>
<h2>Themes</h2>
<ul>
<li>Fix <code>shopify theme dev</code> and <code>shopify theme console</code> proxies following session changes and bring back the legacy <code>shopify theme push</code> implementation in CI/CD workflows: <a href=""https://redirect.github.com/Shopify/cli/pull/3769"">Shopify/cli#3769</a></li>
<li>Fix <code>shopify theme dev</code> proxy to use development theme: <a href=""https://redirect.github.com/Shopify/cli/pull/3771"">Shopify/cli#3771</a></li>
</ul>
<h2>3.59.0</h2>
<h2>Shopify CLI</h2>
<p>Shopify CLI now defaults to be a global CLI and all commands have been unified under a single npm package: <code>@shopify/cli</code>.</p>
<p>Check out the <a href=""https://shopify.dev/docs/api/shopify-cli"">new CLI documentation</a>.</p>
<h2>Apps</h2>
<ul>
<li>Use a random port for GraphiQL when the default one is not available: <a href=""https://redirect.github.com/Shopify/cli/pull/3579"">Shopify/cli#3579</a></li>
<li>Filter env vars to always be valid for ESBuild: <a href=""https://redirect.github.com/Shopify/cli/pull/3656"">Shopify/cli#3656</a></li>
<li>Sanitize &quot;api_key&quot; from verbose log: <a href=""https://redirect.github.com/Shopify/cli/pull/3558"">Shopify/cli#3558</a></li>
<li>Fix issue when you deploy an empty array of redirect_urls: <a href=""https://redirect.github.com/Shopify/cli/pull/3667"">Shopify/cli#3667</a></li>
<li>Do not show api-key flag deprecation warning when using SHOPIFY_API_KEY: <a href=""https://redirect.github.com/Shopify/cli/pull/3671"">Shopify/cli#3671</a></li>
<li>Updated header regex: <a href=""https://redirect.github.com/Shopify/cli/pull/3658"">Shopify/cli#3658</a></li>
</ul>
<h2>Themes</h2>
<ul>
<li>Fix Theme Push Execution when password flag is provided: <a href=""https://redirect.github.com/Shopify/cli/pull/3645"">Shopify/cli#3645</a></li>
<li>Remove requirement to provide <code>name</code> flag in <code>theme rename</code> command: <a href=""https://redirect.github.com/Shopify/cli/pull/3644"">Shopify/cli#3644</a></li>
<li>Update theme push theme selection text: <a href=""https://redirect.github.com/Shopify/cli/pull/3670"">Shopify/cli#3670</a></li>
<li>Improve Glob Pattern subdirectory mismatch error handling: <a href=""https://redirect.github.com/Shopify/cli/pull/3669"">Shopify/cli#3669</a></li>
<li>Introduce support to Theme Access app in the new <code>shopify theme push</code> implementation: <a href=""https://redirect.github.com/Shopify/cli/pull/3675"">Shopify/cli#3675</a></li>
<li>Introduce support to the <code>blocks/</code> directory in <code>shopify theme push</code>: <a href=""https://redirect.github.com/Shopify/cli/pull/3676"">Shopify/cli#3676</a></li>
<li>Fix <code>shopify theme dev</code> issue to avoid previewing the live theme instead of the development: <a href=""https://redirect.github.com/Shopify/cli/pull/3706"">Shopify/cli#3706</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/Shopify/cli/compare/3.58.2...3.59.0"">https://github.com/Shopify/cli/compare/3.58.2...3.59.0</a></p>
<h2>3.58.2</h2>
<h2>What's Changed</h2>
<ul>
<li><a href=""https://redirect.github.com/Shopify/cli/pull/3651"">Fix <code>shopify theme push</code> issue when password flag is provided</a></li>
</ul>
<h2>3.58.1</h2>
<h2>What's Changed</h2>
<ul>
<li><a href=""https://redirect.github.com/Shopify/cli/pull/3640"">Fix selection of apps beyond the first 25 in the list</a></li>
<li><a href=""https://redirect.github.com/Shopify/cli/pull/3648"">Implement fallback for apps not yet opted-in to versioned config</a></li>
</ul>
<h2>3.58.0</h2>
<h2><code>@shopify/app</code><a href=""https://github.com/3""><code>@3</code></a>.58.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>960cdc0a2: Add a new &quot;app init&quot; command</li>
</ul>
<h3>Patch Changes</h3>
<ul>
<li>94da7f678: Move webhook commands under app</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/Shopify/cli/commit/d82d4a46b0a211e5a141826f0a4a137da13e6d51""><code>d82d4a4</code></a> add changeset</li>
<li><a href=""https://github.com/Shopify/cli/commit/4975bb99a38b23e1988d7d536b3570fbaeffb864""><code>4975bb9</code></a> Add clean and build steps to stable shipit config</li>
<li><a href=""https://github.com/Shopify/cli/commit/a5c2d79f4d811c83dd0af2f97cc14e9cdca2561c""><code>a5c2d79</code></a> [3.59] Fix <code>shopify theme dev</code> proxy to use development theme (<a href=""https://redirect.github.com/Shopify/cli/issues/3771"">#3771</a>)</li>
<li><a href=""https://github.com/Shopify/cli/commit/8a26af93e8528cceb3740815ee71cd3c301d10b4""><code>8a26af9</code></a> Merge pull request <a href=""https://redirect.github.com/Shopify/cli/issues/3770"">#3770</a> from Shopify/changeset-release/stable/3.59</li>
<li><a href=""https://github.com/Shopify/cli/commit/a9e9b696411c29097bb3d703e0c5ee9d7571adbd""><code>a9e9b69</code></a> Version Packages</li>
<li><a href=""https://github.com/Shopify/cli/commit/c181ebea4c18e8177e24c3b1e19e9dcb3665a1f8""><code>c181ebe</code></a> [3.59] Fix <code>shopify theme dev</code> and <code>shopify theme console</code> proxies following ...</li>
<li><a href=""https://github.com/Shopify/cli/commit/a70ec32b0ef8a5f04aa7e2764f94f1c3486fed86""><code>a70ec32</code></a> Add stable/3.59 shipit configuration</li>
<li><a href=""https://github.com/Shopify/cli/commit/2b5c29657dfcd3c0f14456c54784b4687e6e0057""><code>2b5c296</code></a> Merge pull request <a href=""https://redirect.github.com/Shopify/cli/issues/3726"">#3726</a> from Shopify/release-notes-3.59</li>
<li><a href=""https://github.com/Shopify/cli/commit/083a2a21d50520f411e15cbaff80ce7596eab32a""><code>083a2a2</code></a> Add release notes for 3.59.0</li>
<li><a href=""https://github.com/Shopify/cli/commit/03c64195bf044d875278a2c1029cd0e295019e9b""><code>03c6419</code></a> Merge pull request <a href=""https://redirect.github.com/Shopify/cli/issues/3724"">#3724</a> from Shopify/fix-pnpm-version-on-shipit-scripts</li>
<li>Additional commits viewable in <a href=""https://github.com/Shopify/cli/compare/3.49.2...3.59.1"">compare view</a></li>
</ul>
</details>
<br />

Updates `@shopify/cli-hydrogen` from 5.4.1 to 5.5.2
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/Shopify/cli/commits"">compare view</a></li>
</ul>
</details>
<br />

Updates `@shopify/hydrogen` from 2023.7.9 to 2023.10.6
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/Shopify/hydrogen-v1/commits/HEAD/packages/hydrogen"">compare view</a></li>
</ul>
</details>
<br />

Updates `@shopify/remix-oxygen` from 1.1.5 to 1.1.8

Updates `@shopify/hydrogen-react` from 2023.7.4 to 2023.10.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/shopify/hydrogen/releases""><code>@shopify/hydrogen-react</code>'s releases</a>.</em></p>
<blockquote>
<h2><code>@shopify/hydrogen-react</code><a href=""https://github.com/2023""><code>@2023</code></a>.10.1</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Update all Node.js dependencies to version 18. (Not a breaking change, since Node.js 18 is already required by Remix v2.) (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1543"">#1543</a>) by <a href=""https://github.com/michenly""><code>@michenly</code></a></p>
</li>
<li>
<p>Skip private access token warning when using mock.shop. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1538"">#1538</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></p>
</li>
<li>
<p>Add an optional <code>channel</code> prop to the <code>ShopPayButton</code> component, which adds order attribution support for either the Headless or Hydrogen sales channel. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1447"">#1447</a>) by <a href=""https://github.com/QuintonC""><code>@QuintonC</code></a></p>
</li>
</ul>
<h2><code>@shopify/hydrogen-react</code><a href=""https://github.com/2023""><code>@2023</code></a>.10.0</h2>
<h3>Major Changes</h3>
<ul>
<li>
<p>The Storefront API types included are now generated using <code>@graphql-codegen/typescript@4</code> (<a href=""https://github.com/dotansimha/graphql-code-generator/blob/master/packages/plugins/typescript/typescript/CHANGELOG.md#400"">changelog</a>). This results in a breaking change if you were importing <code>Scalars</code> directly from <code>@shopify/hydrogen-react</code> or <code>@shopify/hydrogen</code>: (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1108"">#1108</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></p>
<pre lang=""diff""><code> import type {Scalars} from '@shopify/hydrogen/storefront-api-types';
<p>type Props = {</p>
<ul>
<li>id: Scalars['ID']; // This was a string</li>
</ul>
<ul>
<li>id: Scalars['ID']['input']; // Need to access 'input' or 'output' to get the string
};
</code></pre></li>
</ul>
</li>
</ul>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Remove deprecated parameters and props (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1455"">#1455</a> and <a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1435"">#1435</a>): (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1435"">#1435</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></p>
<ul>
<li><code>createStorefrontClient</code> parameters <code>buyerIp</code> and <code>requestGroupId</code></li>
<li><code>&lt;Image&gt;</code> props <code>loaderOptions</code> and <code>widths</code></li>
</ul>
</li>
</ul>
<h2><code>@shopify/hydrogen-react</code><a href=""https://github.com/2023""><code>@2023</code></a>.7.6</h2>
<h3>Patch Changes</h3>
<ul>
<li>Fix template dist package due to CI error (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1451"">#1451</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></li>
</ul>
<h2><code>@shopify/hydrogen-react</code><a href=""https://github.com/2023""><code>@2023</code></a>.7.5</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Add Language to CartProvider (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1408"">#1408</a>) by <a href=""https://github.com/Qubica""><code>@Qubica</code></a></p>
</li>
<li>
<p>Add attributes option to useLoadScript (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1442"">#1442</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></p>
</li>
<li>
<p>Unlock <code>hydrogen-react</code> package.json exports to make it easier to use with NextJS and other frameworks. <strong>Note</strong>: Using Hydrogen internals is not officially supported, and those internal APIs could change at anytime outside our usual calendar versioning. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/994"">#994</a>) by <a href=""https://github.com/blittle""><code>@blittle</code></a></p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/Shopify/hydrogen/blob/main/packages/hydrogen-react/CHANGELOG.md""><code>@shopify/hydrogen-react</code>'s changelog</a>.</em></p>
<blockquote>
<h2>2023.10.1</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Update all Node.js dependencies to version 18. (Not a breaking change, since Node.js 18 is already required by Remix v2.) (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1543"">#1543</a>) by <a href=""https://github.com/michenly""><code>@michenly</code></a></p>
</li>
<li>
<p>Skip private access token warning when using mock.shop. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1538"">#1538</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></p>
</li>
<li>
<p>Add an optional <code>channel</code> prop to the <code>ShopPayButton</code> component, which adds order attribution support for either the Headless or Hydrogen sales channel. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1447"">#1447</a>) by <a href=""https://github.com/QuintonC""><code>@QuintonC</code></a></p>
</li>
</ul>
<h2>2023.10.0</h2>
<h3>Major Changes</h3>
<ul>
<li>
<p>The Storefront API types included are now generated using <code>@graphql-codegen/typescript@4</code> (<a href=""https://github.com/dotansimha/graphql-code-generator/blob/master/packages/plugins/typescript/typescript/CHANGELOG.md#400"">changelog</a>). This results in a breaking change if you were importing <code>Scalars</code> directly from <code>@shopify/hydrogen-react</code> or <code>@shopify/hydrogen</code>: (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1108"">#1108</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></p>
<pre lang=""diff""><code> import type {Scalars} from '@shopify/hydrogen/storefront-api-types';
<p>type Props = {</p>
<ul>
<li>id: Scalars['ID']; // This was a string</li>
</ul>
<ul>
<li>id: Scalars['ID']['input']; // Need to access 'input' or 'output' to get the string
};
</code></pre></li>
</ul>
</li>
</ul>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Remove deprecated parameters and props (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1455"">#1455</a> and <a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1435"">#1435</a>): (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1435"">#1435</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></p>
<ul>
<li><code>createStorefrontClient</code> parameters <code>buyerIp</code> and <code>requestGroupId</code></li>
<li><code>&lt;Image&gt;</code> props <code>loaderOptions</code> and <code>widths</code></li>
</ul>
</li>
</ul>
<h2>2023.7.6</h2>
<h3>Patch Changes</h3>
<ul>
<li>Fix template dist package due to CI error (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1451"">#1451</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></li>
</ul>
<h2>2023.7.5</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Add Language to CartProvider (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1408"">#1408</a>) by <a href=""https://github.com/Qubica""><code>@Qubica</code></a></p>
</li>
<li>
<p>Add attributes option to useLoadScript (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1442"">#1442</a>) by <a href=""https://github.com/wizardlyhel""><code>@wizardlyhel</code></a></p>
</li>
<li>
<p>Unlock <code>hydrogen-react</code> package.json exports to make it easier to use with NextJS and other frameworks. <strong>Note</strong>: Using Hydrogen internals is not officially supported, and those internal APIs could change at anytime outside our usual calendar versioning. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/994"">#994</a>) by <a href=""https://github.com/blittle""><code>@blittle</code></a></p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/Shopify/hydrogen/commit/727baacf60090a29fc58c91e75cf3efa7a0bdf7d""><code>727baac</code></a> [ci] release 2023-10 (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1491"">#1491</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/62f67873359982ffa08f617085787a1fc174c3fa""><code>62f6787</code></a> Hide token warning in mock.shop (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1538"">#1538</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/f352f16ec4d1846871b4625afc7387db2fb3474a""><code>f352f16</code></a> Add docs commands to turbo (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1472"">#1472</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/848c6260a2db3a9cb0c86351f0f7128f61e028f0""><code>848c626</code></a>  Update dependency to require node v18 (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1543"">#1543</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/e8cc49feff18f5ee72d5f6965ff2094addc23466""><code>e8cc49f</code></a> Adds optional channel prop to ShopPayButton (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1447"">#1447</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/300fe1b68164df5942caaaeeedadd1844c355f95""><code>300fe1b</code></a> [ci] release 2023-10 (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1453"">#1453</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/2ff057d493ce67a498739d173ae50505d4f5b2d5""><code>2ff057d</code></a> Fix 2023-10 links (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1471"">#1471</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/ad45656c5f663cc1a60eab5daab4da1dfd0e6cc3""><code>ad45656</code></a> Update Codegen dependencies and make it stable (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1108"">#1108</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/0ae7cbe280d8351126e11dc13f35d7277d9b2d86""><code>0ae7cbe</code></a> Remove deprecated props (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1435"">#1435</a>)</li>
<li><a href=""https://github.com/Shopify/hydrogen/commit/7fc088e21bea47840788cb7c60f873ce1f253128""><code>7fc088e</code></a> Sfapi 2023-10 update (<a href=""https://github.com/shopify/hydrogen/tree/HEAD/packages/hydrogen-react/issues/1431"">#1431</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/shopify/hydrogen/commits/@shopify/hydrogen-react@2023.10.1/packages/hydrogen-react"">compare view</a></li>
</ul>
</details>
<br />

Updates `@shopify/mini-oxygen` from 2.2.2 to 2.2.5
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/Shopify/hydrogen/releases""><code>@shopify/mini-oxygen</code>'s releases</a>.</em></p>
<blockquote>
<h2><code>@shopify/mini-oxygen</code><a href=""https://github.com/2""><code>@2</code></a>.2.4</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p>Update all Node.js dependencies to version 18. (Not a breaking change, since Node.js 18 is already required by Remix v2.) (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1543"">#1543</a>) by <a href=""https://github.com/michenly""><code>@michenly</code></a></p>
</li>
<li>
<p>Fix how peer dependencies are resolved. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1489"">#1489</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></p>
</li>
</ul>
<h2><code>@shopify/mini-oxygen</code><a href=""https://github.com/2""><code>@2</code></a>.2.3</h2>
<h3>Patch Changes</h3>
<ul>
<li>Increase the request body size limit to 100mb when running locally. (<a href=""https://redirect.github.com/Shopify/hydrogen/pull/1421"">#1421</a>) by <a href=""https://github.com/frandiox""><code>@frandiox</code></a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/Shopify/hydrogen/commits"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
ba65da97e141fb5e54baa47182362600afbc7389,dependabot[bot],2024-04-30 06:22:58+00:00,GitHub,2024-04-30 06:22:58+00:00,"[framework-fixtures]: Bump parcel from 2.11.0 to 2.12.0 in /packages/static-build/test/fixtures/parcel-v2 in the core group (#11515)

Bumps the core group in /packages/static-build/test/fixtures/parcel-v2 with 1 update: [parcel](https://github.com/parcel-bundler/parcel).

Updates `parcel` from 2.11.0 to 2.12.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/parcel-bundler/parcel/releases"">parcel's releases</a>.</em></p>
<blockquote>
<h2>v2.12.0</h2>
<p>Blog post: <a href=""https://parceljs.org/blog/v2-12-0/"">https://parceljs.org/blog/v2-12-0/</a></p>
<h3>Added</h3>
<ul>
<li>
<p>Core</p>
<ul>
<li>Add REPL playground for Parcel to the website  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9365"">Details</a></li>
<li>Improve package manager detection for auto install  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9505"">Details</a></li>
</ul>
</li>
<li>
<p>JavaScript</p>
<ul>
<li>Add support for JS macros  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9299"">Details</a></li>
<li>Statically evaluate constants referenced by macros  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9487"">Details</a></li>
<li>Upgrade to ESLint 8  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/8580"">Details</a></li>
<li>Bump swc  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9498"">Details</a></li>
</ul>
</li>
<li>
<p>CSS</p>
<ul>
<li>Use lightningcss to implement CSS packager  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/8492"">Details</a></li>
</ul>
</li>
<li>
<p>Bundler</p>
<ul>
<li>Rename &quot;parentAsset&quot; to &quot;root&quot; for Manual Shared Bundle config and remove unstable prefix  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9486"">Details</a></li>
</ul>
</li>
<li>
<p>Web Extensions</p>
<ul>
<li>Add content script world property to manifest schema validation  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9510"">Details</a></li>
</ul>
</li>
<li>
<p>Performance</p>
<ul>
<li>Adjacency list optimizations  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9444"">Details</a></li>
<li>Break up request graph cache serialisation and run after build completion  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9384"">Details</a></li>
</ul>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>
<p>Core</p>
<ul>
<li>Drop per-pipeline transformation cache  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9459"">Details</a></li>
<li>Clippy and use napi's Either3  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9047"">Details</a></li>
<li>Add lazy/eager cache key to avoid invalid change when switching modes  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9518"">Details</a></li>
</ul>
</li>
<li>
<p>JavaScript</p>
<ul>
<li>Remove decl_collector pass and use SWC's unresolved_mark instead  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9520"">Details</a></li>
</ul>
</li>
<li>
<p>Bundler</p>
<ul>
<li>Fix multiple css bundles in entry bundle groups issue  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9023"">Details</a></li>
<li>Allow parallel type change bundles to be reused by async siblings  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9504"">Details</a></li>
<li>Skip on missing parent asset for manual shared bundles  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9538"">Details</a></li>
</ul>
</li>
</ul>
<h3>Unstable</h3>
<ul>
<li>Add source map support to the inline-require optimizer  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9511"">Details</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/parcel-bundler/parcel/blob/v2/CHANGELOG.md"">parcel's changelog</a>.</em></p>
<blockquote>
<h2>[2.12.0] - 2024-02-28</h2>
<h3>Added</h3>
<ul>
<li>
<p>Core</p>
<ul>
<li>Add REPL playground for Parcel to the website  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9365"">Details</a></li>
<li>Improve package manager detection for auto install  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9505"">Details</a></li>
</ul>
</li>
<li>
<p>JavaScript</p>
<ul>
<li>Add support for JS macros  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9299"">Details</a></li>
<li>Statically evaluate constants referenced by macros  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9487"">Details</a></li>
<li>Upgrade to ESLint 8  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/8580"">Details</a></li>
<li>Bump swc  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9498"">Details</a></li>
</ul>
</li>
<li>
<p>CSS</p>
<ul>
<li>Use lightningcss to implement CSS packager  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/8492"">Details</a></li>
</ul>
</li>
<li>
<p>Bundler</p>
<ul>
<li>Rename &quot;parentAsset&quot; to &quot;root&quot; for Manual Shared Bundle config and remove unstable prefix  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9486"">Details</a></li>
</ul>
</li>
<li>
<p>Web Extensions</p>
<ul>
<li>Add content script world property to manifest schema validation  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9510"">Details</a></li>
</ul>
</li>
<li>
<p>Performance</p>
<ul>
<li>Adjacency list optimizations  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9444"">Details</a></li>
<li>Break up request graph cache serialisation and run after build completion  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9384"">Details</a></li>
</ul>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>
<p>Core</p>
<ul>
<li>Drop per-pipeline transformation cache  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9459"">Details</a></li>
<li>Clippy and use napi's Either3  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9047"">Details</a></li>
<li>Add lazy/eager cache key to avoid invalid change when switching modes  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9518"">Details</a></li>
</ul>
</li>
<li>
<p>JavaScript</p>
<ul>
<li>Remove decl_collector pass and use SWC's unresolved_mark instead  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9520"">Details</a></li>
</ul>
</li>
<li>
<p>Bundler</p>
<ul>
<li>Fix multiple css bundles in entry bundle groups issue  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9023"">Details</a></li>
<li>Allow parallel type change bundles to be reused by async siblings  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9504"">Details</a></li>
<li>Skip on missing parent asset for manual shared bundles  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9538"">Details</a></li>
</ul>
</li>
</ul>
<h3>Unstable</h3>
<ul>
<li>Add source map support to the inline-require optimizer  <a href=""https://redirect.github.com/parcel-bundler/parcel/pull/9511"">Details</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/face1c2879234665f6dc7ba6e3842e4b3abfdde6""><code>face1c2</code></a> v2.12.0</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/3398e6e2a4c12b5783dc2f7d3be0cf7b5aa43b50""><code>3398e6e</code></a> changelog for v2.12.0</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/475a0af48e70bebe25098a055bf7a3998ce958fa""><code>475a0af</code></a> Add repl deploy to release workflow (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9548"">#9548</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/78fe2ce24f2447cef5560047e9750b2cc3f38f66""><code>78fe2ce</code></a> Add <code>@parcel/macros</code> package with macro context TS definitions (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9544"">#9544</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/ac43c39e23f0e8a01da6268d3477b996f11c60c5""><code>ac43c39</code></a> Skip on missing parent asset for manual shared bundles (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9538"">#9538</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/05604990d7531e5bd348abbc435b3dc5d49ad7fd""><code>0560499</code></a> Break up request graph cache serialisation and run after build completion (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9"">#9</a>...</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/2215d360dc531ec46c112223763404650b0a8be1""><code>2215d36</code></a> Adjacency list optimizations (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9444"">#9444</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/e14784dedd0072b82e9c137736312e5c2f8ca0fb""><code>e14784d</code></a> Support default interop for CommonJS macros (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9525"">#9525</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/a93af6a3d4f3de9d51f0f9644cfbb3d5d4431f7c""><code>a93af6a</code></a> Allow parallel type change bundles to be reused by async siblings (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9504"">#9504</a>)</li>
<li><a href=""https://github.com/parcel-bundler/parcel/commit/e0b99c2a42e9109a9ecbd6f537844a1b33e7faf5""><code>e0b99c2</code></a> Remove decl_collector pass and use SWC's unresolved_mark instead (<a href=""https://redirect.github.com/parcel-bundler/parcel/issues/9520"">#9520</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/parcel-bundler/parcel/compare/v2.11.0...v2.12.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=parcel&package-manager=npm_and_yarn&previous-version=2.11.0&new-version=2.12.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
28b6b810be581d1b3ff18d2d6cf6f6191a70e062,dependabot[bot],2024-04-30 03:48:56+00:00,GitHub,2024-04-30 03:48:56+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/ionic-react-v7 with 4 updates (#11499)

Bumps the core group in /packages/static-build/test/fixtures/ionic-react-v7 with 4 updates: [react](https://github.com/facebook/react/tree/HEAD/packages/react), [@types/react](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/react), [react-dom](https://github.com/facebook/react/tree/HEAD/packages/react-dom) and [@types/react-dom](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/HEAD/types/react-dom).

Updates `react` from 18.2.0 to 18.3.0
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/facebook/react/commits/HEAD/packages/react"">compare view</a></li>
</ul>
</details>
<details>
<summary>Maintainer changes</summary>
<p>This version was pushed to npm by <a href=""https://www.npmjs.com/~react-bot"">react-bot</a>, a new releaser for react since your current version.</p>
</details>
<br />

Updates `@types/react` from 18.2.45 to 18.3.0
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/DefinitelyTyped/DefinitelyTyped/commits/HEAD/types/react"">compare view</a></li>
</ul>
</details>
<br />

Updates `react-dom` from 18.2.0 to 18.3.0
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/facebook/react/commits/HEAD/packages/react-dom"">compare view</a></li>
</ul>
</details>
<details>
<summary>Maintainer changes</summary>
<p>This version was pushed to npm by <a href=""https://www.npmjs.com/~react-bot"">react-bot</a>, a new releaser for react-dom since your current version.</p>
</details>
<br />

Updates `@types/react-dom` from 18.2.17 to 18.3.0
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/DefinitelyTyped/DefinitelyTyped/commits/HEAD/types/react-dom"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
9fc9a10c82a5c63979ade8e7c0eed75286dc8a6d,Trek Glowacki,2024-04-30 03:27:19+00:00,GitHub,2024-04-30 03:27:19+00:00,"[static-build] Add ParcelJS to dependabot (#11501)

Add ParcelJS to dependabot "
aef56edc35fe67dfe7f852424abd9160f452fa66,dependabot[bot],2024-04-30 03:23:28+00:00,GitHub,2024-04-30 03:23:28+00:00,"[framework-fixtures]: Bump astro from 4.6.2 to 4.7.0 in /packages/static-build/test/fixtures/astro-v4 in the core group (#11500)

Bumps the core group in /packages/static-build/test/fixtures/astro-v4 with 1 update: [astro](https://github.com/withastro/astro/tree/HEAD/packages/astro).

Updates `astro` from 4.6.2 to 4.7.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/releases"">astro's releases</a>.</em></p>
<blockquote>
<h2>astro@4.7.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10665"">#10665</a> <a href=""https://github.com/withastro/astro/commit/7b4f2840203fe220758934f1366485f788727f0d""><code>7b4f284</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Adds new utilities to ease the creation of toolbar apps including <code>defineToolbarApp</code> to make it easier to define your toolbar app and <code>app</code> and <code>server</code> helpers for easier communication between the toolbar and the server. These new utilities abstract away some of the boilerplate code that is common in toolbar apps, and lower the barrier of entry for app authors.</p>
<p>For example, instead of creating an event listener for the <code>app-toggled</code> event and manually typing the value in the callback, you can now use the <code>onAppToggled</code> method. Additionally, communicating with the server does not require knowing any of the Vite APIs anymore, as a new <code>server</code> object is passed to the <code>init</code> function that contains easy to use methods for communicating with the server.</p>
<pre lang=""diff""><code>import { defineToolbarApp } from &quot;astro/toolbar&quot;;
<p>export default defineToolbarApp({
init(canvas, app, server) {</p>
<ul>
<li>app.addEventListener(&quot;app-toggled&quot;, (e) =&gt; {</li>
<li>
<pre><code> console.log(`App is now ${state ? &amp;quot;enabled&amp;quot; : &amp;quot;disabled&amp;quot;}`);.
</code></pre>
</li>
<li>});</li>
</ul>
<ul>
<li>app.onToggled(({ state }) =&gt; {</li>
<li>
<pre><code>   console.log(`App is now ${state ? &amp;quot;enabled&amp;quot; : &amp;quot;disabled&amp;quot;}`);
</code></pre>
</li>
<li>});</li>
</ul>
<ul>
<li>if (import.meta.hot) {</li>
<li>
<pre><code> import.meta.hot.send(&amp;quot;my-app:my-client-event&amp;quot;, { message: &amp;quot;world&amp;quot; });
</code></pre>
</li>
<li>}</li>
</ul>
<ul>
<li>server.send(&quot;my-app:my-client-event&quot;, { message: &quot;world&quot; })</li>
</ul>
<ul>
<li>if (import.meta.hot) {</li>
<li>
<pre><code> import.meta.hot.on(&amp;quot;my-server-event&amp;quot;, (data: {message: string}) =&amp;gt; {
</code></pre>
</li>
<li>
<pre><code>   console.log(data.message);
</code></pre>
</li>
<li>
<pre><code> });
</code></pre>
</li>
<li>}</li>
</ul>
<ul>
<li>server.on&lt;{ message: string }&gt;(&quot;my-server-event&quot;, (data) =&gt; {</li>
<li>
<pre><code> console.log(data.message); // data is typed using the type parameter
</code></pre>
</li>
<li>});
},
})
</code></pre></li>
</ul>
<p>Server helpers are also available on the server side, for use in your integrations, through the new <code>toolbar</code> object:</p>
<pre lang=""ts""><code>&quot;astro:server:setup&quot;: ({ toolbar }) =&gt; {
  toolbar.on&lt;{ message: string }&gt;(&quot;my-app:my-client-event&quot;, (data) =&gt; {
    console.log(data.message);
    toolbar.send(&quot;my-server-event&quot;, { message: &quot;hello&quot; });
  });
}
</code></pre>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md"">astro's changelog</a>.</em></p>
<blockquote>
<h2>4.7.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10665"">#10665</a> <a href=""https://github.com/withastro/astro/commit/7b4f2840203fe220758934f1366485f788727f0d""><code>7b4f284</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Adds new utilities to ease the creation of toolbar apps including <code>defineToolbarApp</code> to make it easier to define your toolbar app and <code>app</code> and <code>server</code> helpers for easier communication between the toolbar and the server. These new utilities abstract away some of the boilerplate code that is common in toolbar apps, and lower the barrier of entry for app authors.</p>
<p>For example, instead of creating an event listener for the <code>app-toggled</code> event and manually typing the value in the callback, you can now use the <code>onAppToggled</code> method. Additionally, communicating with the server does not require knowing any of the Vite APIs anymore, as a new <code>server</code> object is passed to the <code>init</code> function that contains easy to use methods for communicating with the server.</p>
<pre lang=""diff""><code>import { defineToolbarApp } from &quot;astro/toolbar&quot;;
<p>export default defineToolbarApp({
init(canvas, app, server) {</p>
<ul>
<li>app.addEventListener(&quot;app-toggled&quot;, (e) =&gt; {</li>
<li>
<pre><code> console.log(`App is now ${state ? &amp;quot;enabled&amp;quot; : &amp;quot;disabled&amp;quot;}`);.
</code></pre>
</li>
<li>});</li>
</ul>
<ul>
<li>app.onToggled(({ state }) =&gt; {</li>
<li>
<pre><code>   console.log(`App is now ${state ? &amp;quot;enabled&amp;quot; : &amp;quot;disabled&amp;quot;}`);
</code></pre>
</li>
<li>});</li>
</ul>
<ul>
<li>if (import.meta.hot) {</li>
<li>
<pre><code> import.meta.hot.send(&amp;quot;my-app:my-client-event&amp;quot;, { message: &amp;quot;world&amp;quot; });
</code></pre>
</li>
<li>}</li>
</ul>
<ul>
<li>server.send(&quot;my-app:my-client-event&quot;, { message: &quot;world&quot; })</li>
</ul>
<ul>
<li>if (import.meta.hot) {</li>
<li>
<pre><code> import.meta.hot.on(&amp;quot;my-server-event&amp;quot;, (data: {message: string}) =&amp;gt; {
</code></pre>
</li>
<li>
<pre><code>   console.log(data.message);
</code></pre>
</li>
<li>
<pre><code> });
</code></pre>
</li>
<li>}</li>
</ul>
<ul>
<li>server.on&lt;{ message: string }&gt;(&quot;my-server-event&quot;, (data) =&gt; {</li>
<li>
<pre><code> console.log(data.message); // data is typed using the type parameter
</code></pre>
</li>
<li>});
},
})
</code></pre></li>
</ul>
<p>Server helpers are also available on the server side, for use in your integrations, through the new <code>toolbar</code> object:</p>
<pre lang=""ts""><code>&quot;astro:server:setup&quot;: ({ toolbar }) =&gt; {
  toolbar.on&lt;{ message: string }&gt;(&quot;my-app:my-client-event&quot;, (data) =&gt; {
    console.log(data.message);
    toolbar.send(&quot;my-server-event&quot;, { message: &quot;hello&quot; });
  });
}
</code></pre>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/withastro/astro/commit/9876163406941e92fa5d10275090deec5ddb1a70""><code>9876163</code></a> [ci] release (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10865"">#10865</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/fc097e81a85795701c21eaab8a53582e7de0fb45""><code>fc097e8</code></a> [ci] format</li>
<li><a href=""https://github.com/withastro/astro/commit/7b4f2840203fe220758934f1366485f788727f0d""><code>7b4f284</code></a> feat(toolbar): Toolbar API improvements (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10665"">#10665</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/6fc4c0e420da7629b4cfc28ee7efce1d614447be""><code>6fc4c0e</code></a> feat: add a new message telling the user that a new version of Astro is avail...</li>
<li><a href=""https://github.com/withastro/astro/commit/43ead8fbd5112823118060175c7a4a22522cc325""><code>43ead8f</code></a> Enable <code>allowJs</code> for <code>strictest.json</code> (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10762"">#10762</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/8b59d5d078ff40576b8cbee432279c6ad044a1a9""><code>8b59d5d</code></a> Update sharp to 0.33 to fix issue with Alpine Linux (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10684"">#10684</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/b673bc850593d5af25793d0358c00797477fa373""><code>b673bc8</code></a> Fix an issue where <code>astro build</code> writes type declaration files to <code>outDir</code> (#...</li>
<li><a href=""https://github.com/withastro/astro/commit/a94046588cce2d34ce4bd0c935f580d0616ab5b2""><code>a940465</code></a> [ci] release (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10842"">#10842</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/9326531333016f15e7d8338b2888cb734ef85d60""><code>9326531</code></a> [ci] format</li>
<li><a href=""https://github.com/withastro/astro/commit/30cf82ac3e970a6a3c0f07db1340dd7152d1c35d""><code>30cf82a</code></a> Prevents inputs from changing ViewTransitions' form method or action (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10856"">#10856</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/withastro/astro/commits/astro@4.7.0/packages/astro"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=astro&package-manager=npm_and_yarn&previous-version=4.6.2&new-version=4.7.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
e6a3497fb1d22e11c63d7c02bd90f49c8edd3333,Vercel Release Bot,2024-04-30 03:10:10+00:00,GitHub,2024-04-30 03:10:10+00:00,"[tests] Upgrade Turbo to version 1.13.3 (#11505)

This auto-generated PR updates Turbo to version 1.13.3"
763a6d10709ca40405634d41863c2e524917ebe1,Jeff See,2024-04-30 02:43:28+00:00,GitHub,2024-04-30 02:43:28+00:00,"Add support for ruby 3.3 (#11497)

Add support for ruby3.3 when using AL2023 (Node v20). No support for
ruby3.3 on Node <20 planned.

Ruby integration tests will now running on AL2023

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
21f5e7375e4cb4ceed98ab56486d09a85fa3894d,Steven,2024-04-29 18:20:01+00:00,GitHub,2024-04-29 18:20:01+00:00,"[build-utils] Fix `getPrefixedEnvVars()` to handle `VERCEL_PROJECT_PRODUCTION_URL` (#11506)

This will ensure the framework env var prefix is applied to
`VERCEL_PROJECT_PRODUCTION_URL` as well.


https://vercel.com/docs/projects/environment-variables/system-environment-variables#framework-environment-variables"
256d0fd4632f6fff1c5437eaca3660ee5e314b93,Vercel Release Bot,2024-04-29 15:29:48+00:00,GitHub,2024-04-29 15:29:48+00:00,"Version Packages (#11511)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.4

### Patch Changes

- Updated dependencies
\[[`5b7960337`](https://github.com/vercel/vercel/commit/5b79603378a50fd04d5be1c3a3e5cd605b61478f)]:
    -   @vercel/next@4.2.4

## @vercel/next@4.2.4

### Patch Changes

- [next]&#x3A; Revert .action handling for dynamic routes
([#11509](https://github.com/vercel/vercel/pull/11509))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
5b79603378a50fd04d5be1c3a3e5cd605b61478f,Zack Tanner,2024-04-29 15:26:15+00:00,GitHub,2024-04-29 15:26:15+00:00,"Revert ""[next] Reland add .action handling for dynamic routes"" (#11509)

Reverts vercel/vercel#11487.

This feature will be relanded behind a feature flag."
863199aa0a0f070dc8e7cc2563b480e4c35d9085,Erika Rowland,2024-04-29 15:18:29+00:00,GitHub,2024-04-29 15:18:29+00:00,"Migrate bisect argument parsing (#11491)

Migrate `vc bisect` to updated argument parsing.

I added a `try` block with `handleError`, this seems to be in line with how we do this in other `vc` commands. It might be worth thinking about how we might abstract this logic to centralize it."
97e02ae50660aa34531b2b6e0e80ef404205da62,Erika Rowland,2024-04-29 09:10:27+00:00,GitHub,2024-04-29 09:10:27+00:00,"Erikarowland/zero 1891 update ionic angular package in fixtures (#11485)

We follow this guide: https://ionicframework.com/docs/updating/8-0. There were no major breaking changes."
bd9236f228434f98ab5284aab6bcebec075f0cc6,dependabot[bot],2024-04-29 08:57:05+00:00,GitHub,2024-04-29 08:57:05+00:00,"[framework-fixtures]: Bump @stencil/core from 4.16.0 to 4.17.0 in /packages/static-build/test/fixtures/stencil-v4 in the core group (#11476)

Bumps the core group in /packages/static-build/test/fixtures/stencil-v4 with 1 update: [@stencil/core](https://github.com/ionic-team/stencil).

Updates `@stencil/core` from 4.16.0 to 4.17.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/releases""><code>@stencil/core</code>'s releases</a>.</em></p>
<blockquote>
<h2> 4.17.0 (2024-04-22)</h2>
<h3>Internal</h3>
<ul>
<li><strong>Rollup to Esbuild Migration</strong>
The Stencil team has been working on a migration from Rollup to Esbuild. This release (v4.17.0) is the first release we make in which the published Stencil code is compiled by Esbuild. We have done our due diligence to ensure that this will have no impact on Stencil users nor the output of your compiled components. If you experience any problems though, please <a href=""https://github.com/ionic-team/stencil/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.yml&amp;title=bug%3A+"">raise an issue</a> and we will address it accordingly.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li><strong>docs:</strong> merge together style docs from multiple CSS files (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5653"">#5653</a>) (<a href=""https://github.com/ionic-team/stencil/commit/84e1a14048bc34e64a866659d39376af605f8f9a"">84e1a14</a>)</li>
<li><strong>docs:</strong> respect custom README content when writing to a custom path (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5648"">#5648</a>) (<a href=""https://github.com/ionic-team/stencil/commit/6bfba1dda502f4ad67263b31b2945fa38a04b338"">6bfba1d</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5400"">#5400</a></li>
<li><strong>slot-fallback:</strong> fix hiding fallback slot content issue when the slotted element is a text node (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5496"">#5496</a>) (<a href=""https://github.com/ionic-team/stencil/commit/29c69c48a281f6bc02e8ab001c4ea98688b00d24"">29c69c4</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>testing:</strong> perform string -&gt; boolean type casting for Jest config (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5672"">#5672</a>) (<a href=""https://github.com/ionic-team/stencil/commit/20f74fce81597576f341f3a3dc663b6a204243bc"">20f74fc</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5640"">#5640</a></li>
</ul>
<h1>Thanks</h1>
<p> Thanks <a href=""https://github.com/yigityuce""><code>@yigityuce</code></a> &amp; <a href=""https://github.com/PebblerWon""><code>@PebblerWon</code></a> for their contributions! </p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/blob/main/CHANGELOG.md""><code>@stencil/core</code>'s changelog</a>.</em></p>
<blockquote>
<h1> <a href=""https://github.com/ionic-team/stencil/compare/v4.16.0...v4.17.0"">4.17.0</a> (2024-04-22)</h1>
<h3>Internal</h3>
<ul>
<li><strong>Rollup to Esbuild Migration</strong>
The Stencil team has been working on a migration from Rollup to Esbuild. This release (v4.17.0) is the first release we make in which the published Stencil code is compiled by Esbuild. We have done our due diligence to ensure that this will have no impact on Stencil users nor the output of your compiled components. If you experience any problems though, please <a href=""https://github.com/ionic-team/stencil/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.yml&amp;title=bug%3A+"">raise an issue</a> and we will address it accordingly.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li><strong>docs:</strong> merge together style docs from multiple CSS files (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5653"">#5653</a>) (<a href=""https://github.com/ionic-team/stencil/commit/84e1a14048bc34e64a866659d39376af605f8f9a"">84e1a14</a>)</li>
<li><strong>docs:</strong> respect custom README content when writing to a custom path (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5648"">#5648</a>) (<a href=""https://github.com/ionic-team/stencil/commit/6bfba1dda502f4ad67263b31b2945fa38a04b338"">6bfba1d</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5400"">#5400</a></li>
<li><strong>slot-fallback:</strong> fix hiding fallback slot content issue when the slotted element is a text node (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5496"">#5496</a>) (<a href=""https://github.com/ionic-team/stencil/commit/29c69c48a281f6bc02e8ab001c4ea98688b00d24"">29c69c4</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>testing:</strong> perform string -&gt; boolean type casting for Jest config (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5672"">#5672</a>) (<a href=""https://github.com/ionic-team/stencil/commit/20f74fce81597576f341f3a3dc663b6a204243bc"">20f74fc</a>), fixes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5640"">#5640</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/stencil/commit/9a28fa5a2c81211fbe11d4d33cabc3d9d4b77d46""><code>9a28fa5</code></a> Release v4.17.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5690"">#5690</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/9bd552707427b302a978e5fc0aa9368ab92b2665""><code>9bd5527</code></a> chore(deps): update dependency dts-bundle-generator to ~9.5.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5687"">#5687</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/29c69c48a281f6bc02e8ab001c4ea98688b00d24""><code>29c69c4</code></a> fix(slot-fallback): fix hiding fallback slot content issue when the slotted e...</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/20f74fce81597576f341f3a3dc663b6a204243bc""><code>20f74fc</code></a> fix(testing): perform string -&gt; boolean type casting for Jest config (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5672"">#5672</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/dcbaaf30e2de61e85687bd40f899da7703406a69""><code>dcbaaf3</code></a> chore(deps): update dependency <code>@types/eslint</code> to v8.56.10 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5683"">#5683</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/bb9647c955287d6d2ecdf16abaf00ae98cf9414f""><code>bb9647c</code></a> chore(deps): update download + upload artifacts (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5685"">#5685</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/913b621979ea9364d57176eb2cd4c24d1598a376""><code>913b621</code></a> chore(validation): remove unneeded path arg (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5628"">#5628</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/1a64abb38c15af3ace769eb0bf137c72f08d484d""><code>1a64abb</code></a> chore(deps): update dependency magic-string to v0.30.10 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5684"">#5684</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/d0b3a798a00516501f32850665aeef604310017c""><code>d0b3a79</code></a> chore(deps): update peter-evans/create-pull-request action to v6.0.4 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5686"">#5686</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/840d3fd0614d3ae730bcf8cac8870cc3c7c41f15""><code>840d3fd</code></a> chore(deps): update typescript-eslint to v7.7.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5688"">#5688</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/stencil/compare/v4.16.0...v4.17.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=@stencil/core&package-manager=npm_and_yarn&previous-version=4.16.0&new-version=4.17.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
26bc51e0d641ea45d304b601848b8123feeade48,Vercel Release Bot,2024-04-25 23:07:35+00:00,GitHub,2024-04-25 23:07:35+00:00,"[examples][tests] Upgrade Next.js to version 14.2.3 (#11490)

This auto-generated PR updates 8 packages to Next.js version 14.2.3

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
21b87d2ee603e9e8abc50eca0d7f320ff397e683,Vercel Release Bot,2024-04-25 17:32:46+00:00,GitHub,2024-04-25 17:32:46+00:00,"Version Packages (#11489)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.3

### Patch Changes

- Updated dependencies
\[[`5758838d0`](https://github.com/vercel/vercel/commit/5758838d090b9789ca6821e1122781352021109f)]:
    -   @vercel/next@4.2.3

## @vercel/next@4.2.3

### Patch Changes

- [next] Reland add .action handling for dynamic routes
([#11487](https://github.com/vercel/vercel/pull/11487))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
f765c2468951f726d3249810227f642b624d0434,dependabot[bot],2024-04-25 16:46:52+00:00,GitHub,2024-04-25 16:46:52+00:00,"[framework-fixtures]: Bump vite from 4.4.11 to 4.5.3 in /packages/static-build/test/fixtures/vite-v5 in the core group (#11479)

Bumps the core group in /packages/static-build/test/fixtures/vite-v5 with 1 update: [vite](https://github.com/vitejs/vite/tree/HEAD/packages/vite).

Updates `vite` from 4.4.11 to 4.5.3
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/vitejs/vite/blob/v4.5.3/packages/vite/CHANGELOG.md"">vite's changelog</a>.</em></p>
<blockquote>
<h2><!-- raw HTML omitted -->4.5.3 (2024-03-24)<!-- raw HTML omitted --></h2>
<ul>
<li>fix: <code>fs.deny</code> with globs with directories (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/16250"">#16250</a>) (<a href=""https://github.com/vitejs/vite/commit/96a7f3a"">96a7f3a</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/16250"">#16250</a></li>
</ul>
<h2><!-- raw HTML omitted -->4.5.2 (2024-01-19)<!-- raw HTML omitted --></h2>
<ul>
<li>fix: fs deny for case insensitive systems (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15653"">#15653</a>) (<a href=""https://github.com/vitejs/vite/commit/eeec23b"">eeec23b</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/15653"">#15653</a></li>
</ul>
<h2><!-- raw HTML omitted -->4.5.1 (2023-12-04)<!-- raw HTML omitted --></h2>
<ul>
<li>fix: backport <a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15223"">#15223</a>, proxy html path should be encoded (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15226"">#15226</a>) (<a href=""https://github.com/vitejs/vite/commit/41bb354"">41bb354</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/15223"">#15223</a> <a href=""https://redirect.github.com/vitejs/vite/issues/15226"">#15226</a></li>
</ul>
<h2>4.5.0 (2023-10-18)</h2>
<ul>
<li>feat: backport mdx as known js source (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14560"">#14560</a>) (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14670"">#14670</a>) (<a href=""https://github.com/vitejs/vite/commit/45595ef"">45595ef</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/14560"">#14560</a> <a href=""https://redirect.github.com/vitejs/vite/issues/14670"">#14670</a></li>
<li>feat: scan .marko files (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14669"">#14669</a>) (<a href=""https://github.com/vitejs/vite/commit/ed7bdc5"">ed7bdc5</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/14669"">#14669</a></li>
<li>feat(ssr): backport ssr.resolve.conditions and ssr.resolve.externalConditions (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14498"">#14498</a>) (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14668"">#14668</a>) (<a href=""https://github.com/vitejs/vite/commit/520139c"">520139c</a>), closes <a href=""https://redirect.github.com/vitejs/vite/issues/14498"">#14498</a> <a href=""https://redirect.github.com/vitejs/vite/issues/14668"">#14668</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/vitejs/vite/commit/aac695e9f8f29da43c2f7c50c549fa3d3dfeeadc""><code>aac695e</code></a> release: v4.5.3</li>
<li><a href=""https://github.com/vitejs/vite/commit/96a7f3a41ef2f9351c46f3ab12489bb4efa03cc9""><code>96a7f3a</code></a> fix: <code>fs.deny</code> with globs with directories (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/16250"">#16250</a>)</li>
<li><a href=""https://github.com/vitejs/vite/commit/d0360c12476ccc61e9e78c500ed1bd74ed65a2cf""><code>d0360c1</code></a> release: v4.5.2</li>
<li><a href=""https://github.com/vitejs/vite/commit/eeec23bbc9d476c54a3a6d36e78455867185a7cb""><code>eeec23b</code></a> fix: fs deny for case insensitive systems (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15653"">#15653</a>)</li>
<li><a href=""https://github.com/vitejs/vite/commit/c0751156f0c015f6dbd5c7a58afd8cff2fde1a2f""><code>c075115</code></a> release: v4.5.1</li>
<li><a href=""https://github.com/vitejs/vite/commit/41bb3546a839ed2c822367b3933770c0693a0fb0""><code>41bb354</code></a> fix: backport <a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15223"">#15223</a>, proxy html path should be encoded (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/15226"">#15226</a>)</li>
<li><a href=""https://github.com/vitejs/vite/commit/055d2b86b0543a7c1a2a4d5bc7298af62bc51fa7""><code>055d2b8</code></a> release: v4.5.0</li>
<li><a href=""https://github.com/vitejs/vite/commit/ed7bdc520679577509466ce808a1794ba8377204""><code>ed7bdc5</code></a> feat: scan .marko files (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14669"">#14669</a>)</li>
<li><a href=""https://github.com/vitejs/vite/commit/45595ef82f786d6b321ce002f2cd4951659114ac""><code>45595ef</code></a> feat: backport mdx as known js source (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14560"">#14560</a>) (<a href=""https://github.com/vitejs/vite/tree/HEAD/packages/vite/issues/14670"">#14670</a>)</li>
<li><a href=""https://github.com/vitejs/vite/commit/520139cdff88ae3a0bf89692133cce3e453cb29a""><code>520139c</code></a> feat(ssr): backport ssr.resolve.conditions and ssr.resolve.externalConditions...</li>
<li>See full diff in <a href=""https://github.com/vitejs/vite/commits/v4.5.3/packages/vite"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=vite&package-manager=npm_and_yarn&previous-version=4.4.11&new-version=4.5.3)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
0f12005a689adf8cac56d86bf3ece84b59c71dfd,Erika Rowland,2024-04-24 19:48:04+00:00,GitHub,2024-04-24 19:48:04+00:00,"[cli] Migrate alias command to use parseArguments and getFlagsSpecification (#11467)

Migrating `vc alias` to use new argument parsing utilities.

Note that our snapshot tests show that our help text was out of sync with what we were actually parsing from the user. 

In particular, we were showing `-n` as the shorthand for both `next` and `limit` and neither of these had this shortflag. `next` was parsing `-N` (capital), so I've updated it to that.

`--json` was parsed, but wasn't mentioned in the help text. I've kept it this way, but it may be worth adding a description. We may want to have a separate discussion about the nature and role of `json` output from our CLI as a whole."
5758838d090b9789ca6821e1122781352021109f,JJ Kasper,2024-04-24 19:33:16+00:00,GitHub,2024-04-24 19:33:16+00:00,"[next] Reland add .action handling for dynamic routes (#11487)

This relands https://github.com/vercel/vercel/pull/11461 fixing the
routes increase by combining with the existing route so we don't hit the
routes limit like we did previously.

---------

Co-authored-by: Zack Tanner <1939140+ztanner@users.noreply.github.com>"
9dab15dc88e985402eeff0182fc37a417970f3ac,Zack Tanner,2024-04-24 18:10:51+00:00,GitHub,2024-04-24 18:10:51+00:00,"[next] add tests for server actions (#11482)

There aren't currently any tests for server actions which have special handling in the builder. This adds tests to help avoid regressions in future Next.js builder work."
3980c60a3e65077bea5bd44f6aab4f0886feb0ef,Vercel Release Bot,2024-04-24 15:54:30+00:00,GitHub,2024-04-24 15:54:30+00:00,"Version Packages (#11471)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/python@4.2.0

### Minor Changes

- Add support for Python 3.12
([#11478](https://github.com/vercel/vercel/pull/11478))

## vercel@34.1.2

### Patch Changes

- Updated dependencies
\[[`64bd6dd05`](https://github.com/vercel/vercel/commit/64bd6dd0578d82f210b942b88baaa0673218d8b0),
[`532885148`](https://github.com/vercel/vercel/commit/532885148b583700df5a120350c620af6ad34cd7),
[`adcfc365a`](https://github.com/vercel/vercel/commit/adcfc365a7d375d7a70d434669e4472031693489)]:
    -   @vercel/next@4.2.2
    -   @vercel/python@4.2.0

## @vercel/next@4.2.2

### Patch Changes

- [next] revert .action rewrites
([#11470](https://github.com/vercel/vercel/pull/11470))

- Next.js builds: support sectioned source maps
([#11453](https://github.com/vercel/vercel/pull/11453))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ea774628d50d5f0075aa33040f3668459c40d671,Nathan Rajlich,2024-04-23 23:05:27+00:00,GitHub,2024-04-23 23:05:27+00:00,"[remix] Don't build the ""example"" template in legacy e2e tests (#11481)

This template is being done in the ""vite"" integration suite, so no need to do it in the legacy suite as well."
adcfc365a7d375d7a70d434669e4472031693489,Nathan Rajlich,2024-04-23 20:56:44+00:00,GitHub,2024-04-23 20:56:44+00:00,"[python] Add `python3.12` (#11478)

Allows for `python3.12` to be used when the build is being run in the AL2023 build container (Node v20 project setting). This version is not usable in the AL2 image because `python3.12` is not installed there.

The e2e tests now default to running in AL2023, except for a few fixtures which require an older version of Python."
4c018d4b7828df102a37a27d4f09d24261d0e2e9,Jeff See,2024-04-23 17:58:53+00:00,GitHub,2024-04-23 17:58:53+00:00,"Add retry logic for when a probe finds the Vercel preview page (#11473)

We sometimes fail a probe check because we're still seeing this page:

<img width=""1086"" alt=""Screenshot 2024-04-19 at 3 11 17PM"" src=""https://github.com/vercel/vercel/assets/5414297/8bc92b2d-d720-4970-8f72-7804bb4e91ce"">

This just adds some retry logic before proceeding. If we still see the page after 10 tries it errors"
7dc4a4223c66989b92e210fe79355cd4d47febc5,Trek Glowacki,2024-04-23 17:39:37+00:00,GitHub,2024-04-23 17:39:37+00:00,"[tests] Add Vite@5 fixture to dependabot (#11170)

Add Vite@5 fixture to dependabot

---------

Co-authored-by: Jeff See <jeffsee.55@gmail.com>"
7df8ae9c457816b4f85b30895fc9a7aa4c617ccb,Jeff See,2024-04-22 18:44:49+00:00,GitHub,2024-04-22 18:44:49+00:00,"Add vitepress fixtures (#11466)

- [x] Add fixture for static-build integration tests
- [x] update dependabot to manage the dependencies of these fixtures
- [ ] ~~Update example:~~ (no changes)
      https://github.com/vercel/vercel/tree/main/examples/vitepress
- [ ] ~~If anything changed that should be updated in the default settings, update:~~ (no changes)
      [frameworks.ts](https://github.com/vercel/vercel/blob/main/packages/frameworks/src/frameworks.ts)"
532885148b583700df5a120350c620af6ad34cd7,Will Binns-Smith,2024-04-19 21:43:01+00:00,GitHub,2024-04-19 21:43:01+00:00,"[next] support sectioned source maps (#11453)

Turbopack outputs sectioned source maps, but webpacks `webpack-sources`
packages doesnt support these. For performance reasons, it should, but
as an interim solution, flatten these sections maps for compatibility.

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
f057c94c592573d981502e5def0fde46b1e2466a,dependabot[bot],2024-04-19 18:46:42+00:00,GitHub,2024-04-19 18:46:42+00:00,"[framework-fixtures]: Bump @stencil/core from 4.14.0 to 4.16.0 in /packages/static-build/test/fixtures/stencil-v4 in the core group (#11440)

Bumps the core group in /packages/static-build/test/fixtures/stencil-v4 with 1 update: [@stencil/core](https://github.com/ionic-team/stencil).

Updates `@stencil/core` from 4.14.0 to 4.16.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/releases""><code>@stencil/core</code>'s releases</a>.</em></p>
<blockquote>
<h2> 4.16.0 (2024-04-15)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>cli:</strong> fix a bug in CLI argument parsing (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5646"">#5646</a>) (<a href=""https://github.com/ionic-team/stencil/commit/1fdea63acfa5a9c1081111d7d79e826a127ef3eb"">1fdea63</a>), refs <a href=""https://redirect.github.com/ionic-team/stencil/issues/5640"">#5640</a></li>
<li><strong>testing:</strong> prevent <code>find</code> from throwing error when query has no match (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5641"">#5641</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b3886aa928c1025e636aee1466f26f15fc4dd3eb"">b3886aa</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5639"">#5639</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>dev-server:</strong> dark mode support (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5642"">#5642</a>) (<a href=""https://github.com/ionic-team/stencil/commit/89a5e40adfcd7dbad54928cad6525239778ab9cd"">89a5e40</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.5 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5663"">#5663</a>) (<a href=""https://github.com/ionic-team/stencil/commit/25965364c3f513b845e44f1db029fab14fdfb68f"">2596536</a>)</li>
</ul>
<h2> 4.15.0 (2024-04-08)</h2>
<h3>Features</h3>
<ul>
<li><strong>compiler:</strong> perform automatic key insertion in more situations (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5594"">#5594</a>) (<a href=""https://github.com/ionic-team/stencil/commit/8ee071bf3aae4b2240b50f7af433035c8bf8aa49"">8ee071b</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.4 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5636"">#5636</a>) (<a href=""https://github.com/ionic-team/stencil/commit/a46387123082d1af9fc17b5909530597dc5b5c68"">a463871</a>)</li>
</ul>
<h2> 4.14.1 (2024-04-04)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>compiler:</strong> don't mistake aliased paths for collections imports (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5620"">#5620</a>) (<a href=""https://github.com/ionic-team/stencil/commit/af22bb858d64b60a97ce93c86f5585ef36b31c3f"">af22bb8</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/2319"">#2319</a></li>
<li><strong>runtime:</strong> nested multiple default slot relocation (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5403"">#5403</a>) (<a href=""https://github.com/ionic-team/stencil/commit/363c07b4723941954dc748189a744eec01d5b74c"">363c07b</a>), partially closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>runtime:</strong> prevent ref callbacks from being called too early (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5614"">#5614</a>) (<a href=""https://github.com/ionic-team/stencil/commit/81fa37587eb853d42bc7f92102318a3446cdea7b"">81fa375</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/4074"">#4074</a></li>
</ul>
<h2>Thanks</h2>
<p> Thanks <a href=""https://github.com/yigityuce""><code>@yigityuce</code></a> for their contributions! </p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/blob/main/CHANGELOG.md""><code>@stencil/core</code>'s changelog</a>.</em></p>
<blockquote>
<h1> <a href=""https://github.com/ionic-team/stencil/compare/v4.15.0...v4.16.0"">4.16.0</a> (2024-04-15)</h1>
<h3>Bug Fixes</h3>
<ul>
<li><strong>cli:</strong> fix a bug in CLI argument parsing (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5646"">#5646</a>) (<a href=""https://github.com/ionic-team/stencil/commit/1fdea63acfa5a9c1081111d7d79e826a127ef3eb"">1fdea63</a>), refs <a href=""https://redirect.github.com/ionic-team/stencil/issues/5640"">#5640</a></li>
<li><strong>testing:</strong> prevent <code>find</code> from throwing error when query has no match (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5641"">#5641</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b3886aa928c1025e636aee1466f26f15fc4dd3eb"">b3886aa</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5639"">#5639</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>dev-server:</strong> dark mode support (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5642"">#5642</a>) (<a href=""https://github.com/ionic-team/stencil/commit/89a5e40adfcd7dbad54928cad6525239778ab9cd"">89a5e40</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.5 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5663"">#5663</a>) (<a href=""https://github.com/ionic-team/stencil/commit/25965364c3f513b845e44f1db029fab14fdfb68f"">2596536</a>)</li>
</ul>
<h1> <a href=""https://github.com/ionic-team/stencil/compare/v4.14.1...v4.15.0"">4.15.0</a> (2024-04-08)</h1>
<h3>Features</h3>
<ul>
<li><strong>compiler:</strong> perform automatic key insertion in more situations (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5594"">#5594</a>) (<a href=""https://github.com/ionic-team/stencil/commit/8ee071bf3aae4b2240b50f7af433035c8bf8aa49"">8ee071b</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.4 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5636"">#5636</a>) (<a href=""https://github.com/ionic-team/stencil/commit/a46387123082d1af9fc17b5909530597dc5b5c68"">a463871</a>)</li>
</ul>
<h2> <a href=""https://github.com/ionic-team/stencil/compare/v4.14.0...v4.14.1"">4.14.1</a> (2024-04-04)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>compiler:</strong> don't mistake aliased paths for collections imports (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5620"">#5620</a>) (<a href=""https://github.com/ionic-team/stencil/commit/af22bb858d64b60a97ce93c86f5585ef36b31c3f"">af22bb8</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/2319"">#2319</a></li>
<li><strong>runtime:</strong> nested multiple default slot relocation (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5403"">#5403</a>) (<a href=""https://github.com/ionic-team/stencil/commit/363c07b4723941954dc748189a744eec01d5b74c"">363c07b</a>), partially closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>runtime:</strong> prevent ref callbacks from being called too early (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5614"">#5614</a>) (<a href=""https://github.com/ionic-team/stencil/commit/81fa37587eb853d42bc7f92102318a3446cdea7b"">81fa375</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/4074"">#4074</a></li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/stencil/commit/ba3892f7849a0e03794ada7070a34f8e9a72b1e1""><code>ba3892f</code></a> Release v4.16.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5671"">#5671</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/3b239ff27e644386e5b2739adff1cf3700eca210""><code>3b239ff</code></a> chore(deps): update dependency <code>@types/eslint</code> to v8.56.9 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5667"">#5667</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/f1538dead5185d4890000cccd5de43eb64181941""><code>f1538de</code></a> chore(deps): update peter-evans/create-pull-request action to v6.0.3 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5668"">#5668</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/616c75f480043b3b55377b9468f682ce28a5aec9""><code>616c75f</code></a> chore(deps): update dependency npm to v10.5.2 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5661"">#5661</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/7d19d6976a48790a276aed324f44e6204c6aa8db""><code>7d19d69</code></a> chore(deps): update typescript-eslint to v7.6.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5665"">#5665</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/dee3bce3af16b0162319d4faae79978ffe81b57d""><code>dee3bce</code></a> chore(deps): update dependency <code>@types/eslint</code> to v8.56.8 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5659"">#5659</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/e8429780cbd98b50bc3c94f91a4a4ab39d3816f6""><code>e842978</code></a> chore(deps): update dependency <code>@types/node</code> to v20.12.7 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5660"">#5660</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/8c206b6f3fe4f61e30e8ee90a00a6a31e42be849""><code>8c206b6</code></a> chore(deps): update node.js to v20.12.2 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5662"">#5662</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/25965364c3f513b845e44f1db029fab14fdfb68f""><code>2596536</code></a> feat(typescript): Update dependency typescript to v5.4.5 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5663"">#5663</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/d0df607ec9c76e7a309839bce3d52096130bf4cf""><code>d0df607</code></a> chore(deps): update dependency cspell to v8.7.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5664"">#5664</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/stencil/compare/v4.14.0...v4.16.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=@stencil/core&package-manager=npm_and_yarn&previous-version=4.14.0&new-version=4.16.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
64bd6dd0578d82f210b942b88baaa0673218d8b0,Zack Tanner,2024-04-19 18:26:01+00:00,GitHub,2024-04-19 18:26:01+00:00,"Revert ""[next] add .action handling for dynamic routes"" (#11470)

Reverts vercel/vercel#11461 and #11454  while we revisit the approach to produce fewer rewrites."
02454d4c02b25b892e49a1c2f544ce93bffd7386,Vercel Release Bot,2024-04-18 20:36:40+00:00,GitHub,2024-04-18 20:36:40+00:00,"Version Packages (#11462)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.12.0

### Minor Changes

- Trigger release
([#11465](https://github.com/vercel/vercel/pull/11465))

## @vercel/static-build@2.5.0

### Minor Changes

- Don't rely on `hugo` binary existing in build-container
([#11455](https://github.com/vercel/vercel/pull/11455))

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.25

## vercel@34.1.1

### Patch Changes

- Updated dependencies
\[[`f4c181a2c`](https://github.com/vercel/vercel/commit/f4c181a2c26b11afadf78e68baf1246a27240755),
[`2826563ff`](https://github.com/vercel/vercel/commit/2826563ffab7ab01d3c85def2cad8c4041cd88b1)]:
    -   @vercel/static-build@2.5.0
    -   @vercel/build-utils@7.12.0
    -   @vercel/node@3.0.27

## @vercel/client@13.2.1

### Patch Changes

- Updated dependencies
\[[`2826563ff`](https://github.com/vercel/vercel/commit/2826563ffab7ab01d3c85def2cad8c4041cd88b1)]:
    -   @vercel/build-utils@7.12.0

## @vercel/gatsby-plugin-vercel-builder@2.0.25

### Patch Changes

- Updated dependencies
\[[`2826563ff`](https://github.com/vercel/vercel/commit/2826563ffab7ab01d3c85def2cad8c4041cd88b1)]:
    -   @vercel/build-utils@7.12.0

## @vercel/node@3.0.27

### Patch Changes

- Updated dependencies
\[[`2826563ff`](https://github.com/vercel/vercel/commit/2826563ffab7ab01d3c85def2cad8c4041cd88b1)]:
    -   @vercel/build-utils@7.12.0

## @vercel-internals/types@1.0.30

### Patch Changes

- Updated dependencies
\[[`2826563ff`](https://github.com/vercel/vercel/commit/2826563ffab7ab01d3c85def2cad8c4041cd88b1)]:
    -   @vercel/build-utils@7.12.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
2826563ffab7ab01d3c85def2cad8c4041cd88b1,Nathan Rajlich,2024-04-18 20:33:12+00:00,GitHub,2024-04-18 20:33:12+00:00,"[build-utils] Trigger release of `@vercel/build-utils` (#11465)

PR #11305 didn't include this package as part of its changeset, so there
was no new release even though it is exporting a new function. Adding
this changeset so that the package is properly published.

Closes #11464."
f4c181a2c26b11afadf78e68baf1246a27240755,Nathan Rajlich,2024-04-18 19:56:16+00:00,GitHub,2024-04-18 19:56:16+00:00,"[static-build] Don't rely on `hugo` binary existing in build-container (#11455)

* Makes `hugo` framework preset work when Node.js v20.x is selected in
Project Settings.
* Stores the downloaded `hugo` binary in the `.vercel/cache` directory,
so that it does not need to be re-downloaded upon every deployment.
* Makes `vc build` work when run locally for Hugo projects - tested on
macOS arm64."
fc7a8bc8aeb24e23f282dc03fed80f040aaf9cba,Vercel Release Bot,2024-04-18 19:47:00+00:00,GitHub,2024-04-18 19:47:00+00:00,"Version Packages (#11421)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.1.0

### Minor Changes

- Don't propagate legacy env VERCEL_ANALYTICS_ID if
@vercel/speed-insights package is detected
([#11305](https://github.com/vercel/vercel/pull/11305))

### Patch Changes

- Replace console.log that communicates to user with client.output
methods ([#11353](https://github.com/vercel/vercel/pull/11353))

- [cli] Do not pipe git stderr to user during successful `vc dev` run
([#11450](https://github.com/vercel/vercel/pull/11450))

- fix: Sort default team to the top of the selection list
([#11451](https://github.com/vercel/vercel/pull/11451))

- Updated dependencies
\[[`993a60ef7`](https://github.com/vercel/vercel/commit/993a60ef71d137955052255066bfc096e53630a1),
[`949d84ad1`](https://github.com/vercel/vercel/commit/949d84ad1cdcd4f9ea44f8a165a193a488cb1a31),
[`5bb96ea07`](https://github.com/vercel/vercel/commit/5bb96ea07289e7db66d28d08b372cf949f3d7e88),
[`fd8031874`](https://github.com/vercel/vercel/commit/fd8031874300552b877329ec3f0798ec6706b630)]:
    -   @vercel/next@4.2.1

## @vercel/frameworks@3.0.2

### Patch Changes

- Update framework detection to support SolidStart v1
([#11308](https://github.com/vercel/vercel/pull/11308))

## @vercel/fs-detectors@5.2.3

### Patch Changes

- Updated dependencies
\[[`5f72dc436`](https://github.com/vercel/vercel/commit/5f72dc4360f6ec090a4d2ac3837f9a80d7b396e9)]:
    -   @vercel/frameworks@3.0.2

## @vercel/next@4.2.1

### Patch Changes

- [next] add streaming prerender group for actions
([#11454](https://github.com/vercel/vercel/pull/11454))

- [next] Ensure \_not-found is included properly in app router functions
([#11441](https://github.com/vercel/vercel/pull/11441))

- [next] add .action handling for dynamic routes
([#11461](https://github.com/vercel/vercel/pull/11461))

- [next] Remove un-necessary compressed function size calc/constraint
([#11442](https://github.com/vercel/vercel/pull/11442))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
5bb96ea07289e7db66d28d08b372cf949f3d7e88,Zack Tanner,2024-04-18 19:04:30+00:00,GitHub,2024-04-18 19:04:30+00:00,"[next] add .action handling for dynamic routes (#11461)

Follow-up to:
- https://github.com/vercel/vercel/pull/11454

Adds similar handling for dynamic routes"
596b68ce56608fa464ae2987df0604e0a3a745c1,Jeff See,2024-04-18 17:54:05+00:00,GitHub,2024-04-18 17:54:05+00:00,"Add eslint rule for no-console within the cli package (#11452)

This PR adds a rule to disallow the use of console.log/console.error/etc
from within the CLI package. The aim is to centralize our use of stdio
within the CLI so that everything moves through our client's output
module. It also disables the rule for all of the current console usage,
with the hopes that we will clean things up soon

Also want to note that the rule only applies to usage from within the
CLI, so dependencies that the CLI pulls in (both external and even
within this monorepo) are unaffected.

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
a891f0e1efda9c902ee70cbd9ad3e6ef1fb754c7,dependabot[bot],2024-04-18 16:10:15+00:00,GitHub,2024-04-18 16:10:15+00:00,"[framework-fixtures]: Bump astro from 4.5.10 to 4.6.2 in /packages/static-build/test/fixtures/astro-v4 in the core group (#11448)

Bumps the core group in /packages/static-build/test/fixtures/astro-v4 with 1 update: [astro](https://github.com/withastro/astro/tree/HEAD/packages/astro).

Updates `astro` from 4.5.10 to 4.6.2
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/releases"">astro's releases</a>.</em></p>
<blockquote>
<h2>astro@4.6.2</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10732"">#10732</a> <a href=""https://github.com/withastro/astro/commit/a92e263beb6e0166f1f13c97803d1861793e2a99""><code>a92e263beb6e0166f1f13c97803d1861793e2a99</code></a> Thanks <a href=""https://github.com/rishi-raj-jain""><code>@rishi-raj-jain</code></a>! - Correctly sets <code>build.assets</code> directory during <code>vite</code> config setup</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10776"">#10776</a> <a href=""https://github.com/withastro/astro/commit/1607face67051b16d4648555f1001b2a9308e377""><code>1607face67051b16d4648555f1001b2a9308e377</code></a> Thanks <a href=""https://github.com/fshafiee""><code>@fshafiee</code></a>! - Fixes cookies type inference</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10796"">#10796</a> <a href=""https://github.com/withastro/astro/commit/90669472df3a05b33f0de46fd2d039e3eba7f7dd""><code>90669472df3a05b33f0de46fd2d039e3eba7f7dd</code></a> Thanks <a href=""https://github.com/bluwy""><code>@bluwy</code></a>! - Disables streaming when rendering site with <code>output: &quot;static&quot;</code></p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10782"">#10782</a> <a href=""https://github.com/withastro/astro/commit/b0589d05538fcc77dd3c38198bf93f3548362cd8""><code>b0589d05538fcc77dd3c38198bf93f3548362cd8</code></a> Thanks <a href=""https://github.com/nektro""><code>@nektro</code></a>! - Handles possible null value when calling <code>which-pm</code> during dynamic package installation</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10774"">#10774</a> <a href=""https://github.com/withastro/astro/commit/308b5d8c122f44e7724bb2f3ad3aa5c43a83e584""><code>308b5d8c122f44e7724bb2f3ad3aa5c43a83e584</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Fixes <code>astro add</code> sometimes modifying <code>baseUrl</code> unintentionally</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10783"">#10783</a> <a href=""https://github.com/withastro/astro/commit/4dbd545304d1a8af903c8c97f237eb55c988c40b""><code>4dbd545304d1a8af903c8c97f237eb55c988c40b</code></a> Thanks <a href=""https://github.com/jurajkapsz""><code>@jurajkapsz</code></a>! - Fixes Picture component specialFormatsFallback fallback check</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10775"">#10775</a> <a href=""https://github.com/withastro/astro/commit/06843121450899ecf0390ca4efaff6c9a6fe0f75""><code>06843121450899ecf0390ca4efaff6c9a6fe0f75</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Fixes assets endpoint in serverless returning 404 in certain situations where the website might be under a protected route</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10787"">#10787</a> <a href=""https://github.com/withastro/astro/commit/699f4559a279b374bddb3e5e48c72afe2709e8e7""><code>699f4559a279b374bddb3e5e48c72afe2709e8e7</code></a> Thanks <a href=""https://github.com/martrapp""><code>@martrapp</code></a>! - Fixes a timing issue in the view transition simulation.</p>
</li>
</ul>
<h2>astro@4.6.1</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10708"">#10708</a> <a href=""https://github.com/withastro/astro/commit/742866c5669a2be4f8b5a4c861cadb933c381415""><code>742866c5669a2be4f8b5a4c861cadb933c381415</code></a> Thanks <a href=""https://github.com/horo-fox""><code>@horo-fox</code></a>! - Limits parallel imports within <code>getCollection()</code> to prevent EMFILE errors when accessing files</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10755"">#10755</a> <a href=""https://github.com/withastro/astro/commit/c6d59b6fb7db20af957a8706c8159c50619235ef""><code>c6d59b6fb7db20af957a8706c8159c50619235ef</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Fixes a case where the i18n fallback failed to correctly redirect to the index page with SSR enabled</p>
</li>
</ul>
<h2>astro@4.6.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10591"">#10591</a> <a href=""https://github.com/withastro/astro/commit/39988ef8e2c4c4888543c973e06d9b9939e4ac95""><code>39988ef8e2c4c4888543c973e06d9b9939e4ac95</code></a> Thanks <a href=""https://github.com/mingjunlu""><code>@mingjunlu</code></a>! - Adds a new dev toolbar settings option to change the horizontal placement of the dev toolbar on your screen: bottom left, bottom center, or bottom right.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10689"">#10689</a> <a href=""https://github.com/withastro/astro/commit/683d51a5eecafbbfbfed3910a3f1fbf0b3531b99""><code>683d51a5eecafbbfbfed3910a3f1fbf0b3531b99</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Deprecate support for versions of Node.js older than <code>v18.17.1</code> for Node.js 18, older than <code>v20.0.3</code> for Node.js 20, and the complete Node.js v19 release line.</p>
<p>This change is in line with Astro's <a href=""https://docs.astro.build/en/upgrade-astro/#support"">Node.js support policy</a>.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10678"">#10678</a> <a href=""https://github.com/withastro/astro/commit/2e53b5fff6d292b7acdf8c30a6ecf5e5696846a1""><code>2e53b5fff6d292b7acdf8c30a6ecf5e5696846a1</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Adds a new experimental security option to prevent <a href=""https://owasp.org/www-community/attacks/csrf"">Cross-Site Request Forgery (CSRF) attacks</a>. This feature is available only for pages rendered on demand:</p>
<pre lang=""js""><code>import { defineConfig } from 'astro/config';
export default defineConfig({
  experimental: {
    security: {
      csrfProtection: {
        origin: true,
      },
    },
  },
});
</code></pre>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md"">astro's changelog</a>.</em></p>
<blockquote>
<h2>4.6.2</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10732"">#10732</a> <a href=""https://github.com/withastro/astro/commit/a92e263beb6e0166f1f13c97803d1861793e2a99""><code>a92e263beb6e0166f1f13c97803d1861793e2a99</code></a> Thanks <a href=""https://github.com/rishi-raj-jain""><code>@rishi-raj-jain</code></a>! - Correctly sets <code>build.assets</code> directory during <code>vite</code> config setup</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10776"">#10776</a> <a href=""https://github.com/withastro/astro/commit/1607face67051b16d4648555f1001b2a9308e377""><code>1607face67051b16d4648555f1001b2a9308e377</code></a> Thanks <a href=""https://github.com/fshafiee""><code>@fshafiee</code></a>! - Fixes cookies type inference</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10796"">#10796</a> <a href=""https://github.com/withastro/astro/commit/90669472df3a05b33f0de46fd2d039e3eba7f7dd""><code>90669472df3a05b33f0de46fd2d039e3eba7f7dd</code></a> Thanks <a href=""https://github.com/bluwy""><code>@bluwy</code></a>! - Disables streaming when rendering site with <code>output: &quot;static&quot;</code></p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10782"">#10782</a> <a href=""https://github.com/withastro/astro/commit/b0589d05538fcc77dd3c38198bf93f3548362cd8""><code>b0589d05538fcc77dd3c38198bf93f3548362cd8</code></a> Thanks <a href=""https://github.com/nektro""><code>@nektro</code></a>! - Handles possible null value when calling <code>which-pm</code> during dynamic package installation</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10774"">#10774</a> <a href=""https://github.com/withastro/astro/commit/308b5d8c122f44e7724bb2f3ad3aa5c43a83e584""><code>308b5d8c122f44e7724bb2f3ad3aa5c43a83e584</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Fixes <code>astro add</code> sometimes modifying <code>baseUrl</code> unintentionally</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10783"">#10783</a> <a href=""https://github.com/withastro/astro/commit/4dbd545304d1a8af903c8c97f237eb55c988c40b""><code>4dbd545304d1a8af903c8c97f237eb55c988c40b</code></a> Thanks <a href=""https://github.com/jurajkapsz""><code>@jurajkapsz</code></a>! - Fixes Picture component specialFormatsFallback fallback check</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10775"">#10775</a> <a href=""https://github.com/withastro/astro/commit/06843121450899ecf0390ca4efaff6c9a6fe0f75""><code>06843121450899ecf0390ca4efaff6c9a6fe0f75</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Fixes assets endpoint in serverless returning 404 in certain situations where the website might be under a protected route</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10787"">#10787</a> <a href=""https://github.com/withastro/astro/commit/699f4559a279b374bddb3e5e48c72afe2709e8e7""><code>699f4559a279b374bddb3e5e48c72afe2709e8e7</code></a> Thanks <a href=""https://github.com/martrapp""><code>@martrapp</code></a>! - Fixes a timing issue in the view transition simulation.</p>
</li>
</ul>
<h2>4.6.1</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10708"">#10708</a> <a href=""https://github.com/withastro/astro/commit/742866c5669a2be4f8b5a4c861cadb933c381415""><code>742866c5669a2be4f8b5a4c861cadb933c381415</code></a> Thanks <a href=""https://github.com/horo-fox""><code>@horo-fox</code></a>! - Limits parallel imports within <code>getCollection()</code> to prevent EMFILE errors when accessing files</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10755"">#10755</a> <a href=""https://github.com/withastro/astro/commit/c6d59b6fb7db20af957a8706c8159c50619235ef""><code>c6d59b6fb7db20af957a8706c8159c50619235ef</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Fixes a case where the i18n fallback failed to correctly redirect to the index page with SSR enabled</p>
</li>
</ul>
<h2>4.6.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10591"">#10591</a> <a href=""https://github.com/withastro/astro/commit/39988ef8e2c4c4888543c973e06d9b9939e4ac95""><code>39988ef8e2c4c4888543c973e06d9b9939e4ac95</code></a> Thanks <a href=""https://github.com/mingjunlu""><code>@mingjunlu</code></a>! - Adds a new dev toolbar settings option to change the horizontal placement of the dev toolbar on your screen: bottom left, bottom center, or bottom right.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10689"">#10689</a> <a href=""https://github.com/withastro/astro/commit/683d51a5eecafbbfbfed3910a3f1fbf0b3531b99""><code>683d51a5eecafbbfbfed3910a3f1fbf0b3531b99</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Deprecate support for versions of Node.js older than <code>v18.17.1</code> for Node.js 18, older than <code>v20.0.3</code> for Node.js 20, and the complete Node.js v19 release line.</p>
<p>This change is in line with Astro's <a href=""https://docs.astro.build/en/upgrade-astro/#support"">Node.js support policy</a>.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10678"">#10678</a> <a href=""https://github.com/withastro/astro/commit/2e53b5fff6d292b7acdf8c30a6ecf5e5696846a1""><code>2e53b5fff6d292b7acdf8c30a6ecf5e5696846a1</code></a> Thanks <a href=""https://github.com/ematipico""><code>@ematipico</code></a>! - Adds a new experimental security option to prevent <a href=""https://owasp.org/www-community/attacks/csrf"">Cross-Site Request Forgery (CSRF) attacks</a>. This feature is available only for pages rendered on demand:</p>
<pre lang=""js""><code>import { defineConfig } from 'astro/config';
export default defineConfig({
  experimental: {
    security: {
      csrfProtection: {
        origin: true,
      },
    },
  },
</code></pre>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/withastro/astro/commit/668d97319c1b4ae60b64c9e8e14b3878f4d4cae2""><code>668d973</code></a> [ci] release (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10777"">#10777</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/a92e263beb6e0166f1f13c97803d1861793e2a99""><code>a92e263</code></a> fix: use assetsDir in creating vite config (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10732"">#10732</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/90669472df3a05b33f0de46fd2d039e3eba7f7dd""><code>9066947</code></a> Disable streaming for SSG (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10796"">#10796</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/b0589d05538fcc77dd3c38198bf93f3548362cd8""><code>b0589d0</code></a> astro/cli/install-package.ts: whichPm may return null if ran in an empty dire...</li>
<li><a href=""https://github.com/withastro/astro/commit/af1af9faeec967ff79009721b6bbe09350bc085b""><code>af1af9f</code></a> [ci] format</li>
<li><a href=""https://github.com/withastro/astro/commit/06843121450899ecf0390ca4efaff6c9a6fe0f75""><code>0684312</code></a> fix(assets): Forward headers from the original request to the internal reques...</li>
<li><a href=""https://github.com/withastro/astro/commit/01cb41763e74d504c835d3f628ba51bce2b33756""><code>01cb417</code></a> [ci] format</li>
<li><a href=""https://github.com/withastro/astro/commit/699f4559a279b374bddb3e5e48c72afe2709e8e7""><code>699f455</code></a> Make viewTransition.finished wait for animations triggered by viewTransition....</li>
<li><a href=""https://github.com/withastro/astro/commit/1607face67051b16d4648555f1001b2a9308e377""><code>1607fac</code></a> Fix <code>@types/cookie</code> dependency (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10776"">#10776</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/4dbd545304d1a8af903c8c97f237eb55c988c40b""><code>4dbd545</code></a> fix: picture fallback check (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10783"">#10783</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/withastro/astro/commits/astro@4.6.2/packages/astro"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=astro&package-manager=npm_and_yarn&previous-version=4.5.10&new-version=4.6.2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
993a60ef71d137955052255066bfc096e53630a1,Zack Tanner,2024-04-18 15:47:24+00:00,GitHub,2024-04-18 15:47:24+00:00,"[next] add streaming prerender group for actions (#11454)

Invoking an action that's a Prerender will currently bypass the static cache (via `experimentalBypassFor`), but the prerender group doesn't support streaming.

This clones the prerender group and adds corresponding rewrites for those requests. Separately, we'll deprecate `experimentalBypassFor`.

Depends on:
- https://github.com/vercel/next.js/pull/64592"
55190873a180dfd61ce5ccbde105f4d7062c8749,Vercel Release Bot,2024-04-18 15:25:49+00:00,GitHub,2024-04-18 15:25:49+00:00,"[examples][tests] Upgrade Next.js to version 14.2.2 (#11456)

This auto-generated PR updates 8 packages to Next.js version 14.2.2"
1e6323e2b1550e30d64d61e731d2a92fe34fd848,Chris,2024-04-18 15:08:32+00:00,GitHub,2024-04-18 15:08:32+00:00,"[cli] Ignore VERCEL_ANALYTICS_ID if @vercel/speed-insights is present on the project (#11305)

In the past, we used the `VERCEL_ANALYTICS_ID` environment variable with the previous Speed Insights feature on Vercel to activate specific logic in Next.js, Nuxt and Gatsby for collecting and sending web vitals data.

With the new Speed Insights, that's not required anymore.

We no longer want to set the environment variable when detecting the new `@vercel/speed-insights` package. 
This PR confirms that the variable is not set if the new package is detected."
0b059816731e93abdd4f673d590a8e9016776bf0,careworry,2024-04-18 14:41:03+00:00,GitHub,2024-04-18 14:41:03+00:00,"chore: fix some typos in comments (#11459)

Signed-off-by: careworry <worrycare@outlook.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
8fd2c0671ec93c6a02881d9fa15f418ce9647517,S. Elliott Johnson,2024-04-18 13:46:22+00:00,GitHub,2024-04-18 13:46:22+00:00,"[cli] Sort default team to the top of the team selector (#11451)

The user's default team should be sorted to the top of the selector. This is a nice and simple way to do this, though I'm not sure how to test my changes -- would appreciate guidance!"
1447bc011c4c77bc73dbb86c74962b91138b899f,Austin Merrick,2024-04-18 13:32:20+00:00,GitHub,2024-04-18 13:32:20+00:00,"[cli] Don't log error when running vc dev in a directory without a .git directory (#11450)

`vc dev` in a dir without a `.git` dir would display an error the user should not see:

```
Vercel CLI 34.0.0
fatal: not a git repository (or any of the parent directories): .git
> Ready! Available at [http://localhost:3000](http://localhost:3000)
```

This fixes that by ignoring the stderr from `git rev-parse`."
027150134f6fdac5f43f0b0233f832b9d3eb0e1d,Erika Rowland,2024-04-17 20:51:54+00:00,GitHub,2024-04-17 20:51:54+00:00,"Add snapshot tests for help (#11439)

Adds snapshot tests for the output from help as output by various commands. I expect to be changing some of the `Command` structs to continue the work started in [ [cli] Improve type signature of CommandOption #11394 ](https://github.com/vercel/vercel/pull/11394) especially as I build on work in [ Get flags specification #11433 ](https://github.com/vercel/vercel/pull/11433), and I want to be sure that the associated changes to help output are what we expect."
949d84ad1cdcd4f9ea44f8a165a193a488cb1a31,JJ Kasper,2024-04-17 20:37:39+00:00,GitHub,2024-04-17 20:37:39+00:00,"[next] Ensure _not-found is included properly in app router functions (#11441)

This ensures we properly include `_not-found` assets when present for
app router specific functions as otherwise when attempting to render
`notFound()` case we can hit `MODULE_NOT_FOUND` errors. A test case for
this behavior has been added under `00-app-router-not-found`.

Closes: [NEXT-3084](https://linear.app/vercel/issue/NEXT-3084)"
fd8031874300552b877329ec3f0798ec6706b630,JJ Kasper,2024-04-17 19:50:54+00:00,GitHub,2024-04-17 19:50:54+00:00,"[next] Remove un-necessary compressed function size calc/constraint (#11442)

Historically, we used to have a compressed function size limit of `50MB` but this is a very old limit and was removed long ago. Considering this limit is removed and it requires additional overhead to calculate, this removes the compressed size limit handling while leaving the uncompressed size limit detection/handling."
10883f2c2223aea5a16df9995df1e9abe52853a8,Austin Merrick,2024-04-17 19:02:25+00:00,GitHub,2024-04-17 19:02:25+00:00,"Update packages causing vulnerability messages (#11415)

A customer was worried about security vulnerabilities that `pnpm audit` listed for `@babel/traverse`, `http-cache-semantics`, and `json5`. This updates those deps, removing those vulnerability messages."
af515c9dfc0c6305f3f2e736fd7713bcece8fbd1,Austin Merrick,2024-04-17 18:14:11+00:00,GitHub,2024-04-17 18:14:11+00:00,"[redwood] Remove Redwood e2e tests (#11444)

These tests are failing on prod now. This builder is 4 years out of
date, and we're likely not going to make it work again."
a1dfd90eec03e51af7989cdd310a119075b997cf,Erika Rowland,2024-04-16 17:07:55+00:00,GitHub,2024-04-16 17:07:55+00:00,"Get flags specification (#11433)

Extracting logic for turning a list of `CommandOption`s into a flagsSpecification for `parseArguments`. Builds on the work from #11396 and #11394."
838f4f4894ac286cf8de9d024f80e70e6405d336,Jeff See,2024-04-15 14:28:04+00:00,GitHub,2024-04-15 14:28:04+00:00,Bump Github Actions to Node 20 (#11432)
7922a79300af93ea6c173cbd9c28a059880a7747,Vercel Release Bot,2024-04-15 14:05:16+00:00,GitHub,2024-04-15 14:05:16+00:00,"[examples][tests] Upgrade Next.js to version 14.2.1 (#11434)

This auto-generated PR updates 7 packages to Next.js version 14.2.1

Co-authored-by: Steven <steven@ceriously.com>"
d5f0777c9c28ef676491b1012c15219d918fb79f,Austin Merrick,2024-04-14 08:26:51+00:00,GitHub,2024-04-14 08:26:51+00:00,"[tests] Remove old changelog tests (#11420)

These tests are remnants for code deleted in https://github.com/vercel/vercel/pull/9914."
0dfb60df83dce10781a57d82d985615c1e15f208,Erika Rowland,2024-04-14 08:22:55+00:00,GitHub,2024-04-14 08:22:55+00:00,"[cli] Create argument parsing utility with clearer semantics (#11396)

The way that we currently parse arguments throughout the vercel command line is through the `getArgs` function. This function takes three arguments: `argv`, `argOptions`, and `argsOptions`. (Those last two arguments are swapped in order from the real function). This is semantically muddy and likely to create mistakes. We have instances in our code base, such as `deploy/index.ts` which at the time of this pull request creates a variable named `argOptions` and passes it to the `argsOptions` argument of `getArgs`.

Further, the return type of `arg` the library we currently use to parse arguments is unclear as well. It puts positional arguments under an `_` key, instead of a meaningful name.

In this pull request, I create a function called `parseArguments` that takes the same three arguments as `getArgs` with improved names: `args`, `flags`, and `parserOptions`. It also changes the return type to be an object with two keys: `{args, flags}` allowing for clearer access patterns where the argument parser is used."
04b3f22d9147264fcb97cd13da4e39e208276363,Vercel Release Bot,2024-04-14 02:42:34+00:00,GitHub,2024-04-14 02:42:34+00:00,"[tests] Update Gatsby fixture versions (#11435)

Automatically generated PR to update Gatsby fixture versions in
`@vercel/static-build`"
e2370a3d5f94dad7ecb37bd19082149c95dcbba3,Austin Merrick,2024-04-12 18:24:02+00:00,GitHub,2024-04-12 18:24:02+00:00,"[cli] Fix type error (#11430)

The changes between https://github.com/vercel/vercel/pull/11348 and
https://github.com/vercel/vercel/pull/11394 were incompatible, causing
this type error."
21bbbb648df3a2617d1baee8164d591994aa6097,Erika Rowland,2024-04-12 06:56:48+00:00,GitHub,2024-04-12 06:56:48+00:00,"[cli] Improve type signature of CommandOption (#11394)

The previous type signature of `CommandOption` did not cover all of the actual uses of option types throughout the codebase. This one may not cover all possible types, but comes much closer and allows us to literally state the type constructor used by `arg` to parse options.

This will allow for direct use of `command.ts` data structures so that Help output matches the actually parsed options used by every subcommand.

`deploy/index.ts` already shows an example of this, and a future pull request can build on that example by extracting that logic into a utility function."
5f72dc4360f6ec090a4d2ac3837f9a80d7b396e9,Ryan Carniato,2024-04-12 06:41:52+00:00,GitHub,2024-04-12 06:41:52+00:00,"[examples] Update to latest SolidStart (#11308)

We've done a pretty significant update over the past few months on
SolidStart and 1.0 is looming. Thought I'd update the official templates
to get in line before we do the release.

I wasn't sure what to do with the `output` fields as we use Vercel's
build output V3 here. But otherwise I think everything should be good.

---------

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Jeff See <jeffsee.55@gmail.com>"
da0ddb83b0df8d9be93e747f89c330db6efe165d,Erika Rowland,2024-04-11 23:40:25+00:00,GitHub,2024-04-11 23:40:25+00:00,"[cli] replace console.log that communicates to user with output.log (#11353)

We have several instances of `console.log` being used with colors or other indicators that they're trying to communicate to the user, and not in a way that makes sense for standard output. These should be migrated to use the `client.output` methods where possible."
009f40246745e58a9ea63073c0ed31c0bf2fc2e4,Vercel Release Bot,2024-04-11 23:36:38+00:00,GitHub,2024-04-11 23:36:38+00:00,"[examples][tests] Upgrade Next.js to version 14.2.0 (#11419)

This auto-generated PR updates 7 packages to Next.js version 14.2.0"
a6f1c561a26e7ad493ca6c8d67829436f12c8f1e,Jeff See,2024-04-11 19:51:34+00:00,GitHub,2024-04-11 19:51:34+00:00,"Introduce snapshot testing utilities (#11375)

This introduces some additional capabilities on the `MockClient` and `MockStream` classes used in our unit tests. 

The bulk of this code is copied over from https://github.com/SBoudrias/Inquirer.js/tree/master/packages/testing, but uses our existing stdin/stdout mocks instead of what's used there. 

You can now use `client.getScreen()` to see the ""last"" screen pushed to stdin, which is super handy for snapshot tests. I've added a few as part of this PR, but many more can be written for our client output as well in the near future.

---

The `client.getScreen()` is also a handy debug tool, use it with `raw: true` to see a pretty printed output during tests:


https://github.com/vercel/vercel/assets/5414297/d0be6078-4901-4eb2-a6c9-1b51b576c1ba

---

This also adds an `events` object on the `MockClient` which allows us to write `client.events.keypress(""down"")` instead of the less readable `client.stdin.write('\x1B[B')` throughout our testing. This could also be moved to so that it's `client.stdin.keypress(...` or something similar. Note that I've only tested that this works in a login test, included in this PR. If we're happy to make this change I will make update the rest of the unit tests to use this syntax for the inputs."
d3e83ad8b8dffe6627cd49f6a968c8c10ad3dcbb,Steven,2024-04-11 16:04:24+00:00,GitHub,2024-04-11 16:04:24+00:00,"[ci] Speed up CI with `macos-14` (#11133)

- Before: [5m 38s](https://github.com/vercel/vercel/actions/runs/7831733256/job/21368857518?pr=11131)
- After: [1m 23s](https://github.com/vercel/vercel/actions/runs/7836156637/job/21383185433?pr=11133)


Learn more: https://github.blog/changelog/2024-01-30-github-actions-macos-14-sonoma-is-now-available/"
f39513118a95ed49b2419b11386efb4f471e4aa3,Vercel Release Bot,2024-04-11 13:59:24+00:00,GitHub,2024-04-11 13:59:24+00:00,"Version Packages (#11413)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@34.0.0

### Major Changes

- Disables promotion of preview deployments
([#11411](https://github.com/vercel/vercel/pull/11411))

### Patch Changes

- Always set `projectSettings.nodeVersion` in `vc deploy`
([#11351](https://github.com/vercel/vercel/pull/11351))

- [cli] optional override of existing environment variables with --force
([#11348](https://github.com/vercel/vercel/pull/11348))

## @vercel/client@13.2.0

### Minor Changes

- Always use v13 of create deployment API endpoint
([#11351](https://github.com/vercel/vercel/pull/11351))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
fd188a396b3e6153a1cfaa95fbc5c05660061e74,Nathan Rajlich,2024-04-11 01:49:13+00:00,GitHub,2024-04-11 01:49:13+00:00,"[tests] Use `vercel-deno` for ""custom-runtime"" dev fixture (#11405)

This is related #11133. This `custom-runtime` tests is failing on that branch since the ""macos-14"" test runner uses arm64 processor, and the `static-binaries` ""import"" package that the ""vercel-bash"" runtime is using does not have binaries for arm64. Switch this test fixture to use ""vercel-deno"" instead, which won't have this problem."
cdfc879f691e4b366cb9237c0db6914e59f2a285,Jeff See,2024-04-11 00:26:58+00:00,GitHub,2024-04-11 00:26:58+00:00,"Specify npm script to run during Find Changes step (#11409)

Add a new vitest-unit test type and specify which npm script to run for a given chunks tests. Currently the CLI unit tests are actually running as part of the Find Changes action, because vitest ignores the `--listTests` flag and just runs the tests immediately."
b58dcc5733f32087c203d69d1ab02aa6d4f7d8f1,Nathan Rajlich,2024-04-10 23:53:49+00:00,GitHub,2024-04-10 23:53:49+00:00,"[remix] Add custom `entry.server` for Vite test (#11408)

Adds an e2e test fixture which tests that a custom `app/entry.server` file is supported.

Related to:

* https://github.com/vercel/remix/pull/85
* https://github.com/vercel/remix/pull/89"
cddf3fa00c10d692e8c638fa7d86acd342e3c01f,Sean Massa,2024-04-10 22:15:33+00:00,GitHub,2024-04-10 22:15:33+00:00,"Revert ""[cli] Revert ""Disallow promoting preview deployments to production (#11363)"""" (#11411)

Reverts vercel/vercel#11410 to reinstate #11363"
627b79fb140c8fa570eb1ddc6a8452b4589dd047,Nathan Rajlich,2024-04-10 20:55:28+00:00,GitHub,2024-04-10 20:55:28+00:00,"[client] Always use v13 of create deployment API endpoint (#11351)

Updates `@vercel/client` to always use the v13 create-deployment endpoint, even when `builds` is present. This allows for `projectSettings.nodeVersion` to be passed when `builds` is present."
7259a324c2b0c4be714e6fdfa7f96b16ce5b86fd,Mountain/\Ash,2024-04-10 20:13:53+00:00,GitHub,2024-04-10 20:13:53+00:00,"[cli] optional override of existing environment variables (#11348)

## Why

Closes #11130

## Changelog

Added `--force` argument to upsert existing environment variables (#11130)

## References

- Vercel API `/v10/projects/{idOrName}/env` https://vercel.com/docs/rest-api/endpoints/projects#create-one-or-more-environment-variables"
1aab5996523b77e2aadbed11f94fcfff2d0e8a5b,Nathan Rajlich,2024-04-10 19:43:42+00:00,Nathan Rajlich,2024-04-10 19:43:42+00:00,"Version Packages (#11395)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.

- Add support for edge function environment variables
([#11390](https://github.com/vercel/vercel/pull/11390))

- fix flickering during interactive UI rerendering
([#11392](https://github.com/vercel/vercel/pull/11392))

- fix `vc ls` message to be `vc projects ls`
([#11400](https://github.com/vercel/vercel/pull/11400))

- Updated dependencies
\[[`2461b571a`](https://github.com/vercel/vercel/commit/2461b571af037fbfdf92299a272010a5a8f4898b)]:
    -   @vercel/next@4.2.0"
2461b571af037fbfdf92299a272010a5a8f4898b,Florentin / ,2024-04-10 08:27:53+00:00,GitHub,2024-04-10 08:27:53+00:00,"[next] use middleware manifest worker environments (#11390)

This PR adds changes to the Next.js builder to pass the per-worker environment emitted from the Next.js middleware manifest to the created `EdgeFunction` resource."
1088bf2dea25103e611a2d4081ee417a87e38d57,Nathan Rajlich,2024-04-10 07:03:12+00:00,GitHub,2024-04-10 07:03:12+00:00,"[cli] Revert ""Disallow promoting preview deployments to production (#11363)"" (#11410)

This reverts commit 4e416d7d7b53c9d423b063ff71ffabec1aa917aa.

It was erroneously merged by Kodiak with failing unit tests."
c5bd242a79ae43911d5cb0ea982607ce6f664225,Austin Merrick,2024-04-09 22:15:54+00:00,GitHub,2024-04-09 22:15:54+00:00,"[cli] Fix command recommendation (#11400)

`vc rm <project-name-that-doesn't-exist>` gives the message:
<img width=""749"" alt=""Screenshot 2024-04-08 at 2 38 03PM"" src=""https://github.com/vercel/vercel/assets/8485687/e041d47e-ce66-434b-838b-3693eb6cc4a7"">

`vc ls` is not correct. `vc projects ls` is the correct command."
764ba979670143aa30810399d2865e9599e6410a,Vercel Release Bot,2024-04-09 22:12:37+00:00,GitHub,2024-04-09 22:12:37+00:00,"[tests] Upgrade Turbo to version 1.13.2 (#11398)

This auto-generated PR updates Turbo to version 1.13.2"
4e416d7d7b53c9d423b063ff71ffabec1aa917aa,Trek Glowacki,2024-04-09 22:02:29+00:00,GitHub,2024-04-09 22:02:29+00:00,"[cli] Disallow promoting preview deployments to production (#11363)

Blocks preview deployments from being directly promoted. This relies on a new API version bump.

Copied the warning text from the UI:
![CleanShot 2024-04-01 at 11 04 00@2x](https://github.com/vercel/vercel/assets/9736/4e93ffdd-32f2-40bc-97e7-6fe98208cd76)

This is a breaking change and will require a major version bump. Please don't merge until we're ready."
8775ff3fcf39a1635c742134e784468267648a92,findseat,2024-04-09 20:51:35+00:00,GitHub,2024-04-09 20:51:35+00:00,chore: fix some typos (#11397)
bd100baa1615a57e694f7a1e0c9ac738513825d7,Nathan Rajlich,2024-04-09 19:56:47+00:00,GitHub,2024-04-09 19:56:47+00:00,"[tests] Fix tarball URL from deleted project (#11403)

I did some pruning of old projects on my personal account last night, and accidentally broke CI. I've created a new tarball on the `curated-tests` team so that it doesn't happen again."
2e6aab01cbb5454773a399e60c187d71d1158f9c,Austin Merrick,2024-04-09 07:33:04+00:00,GitHub,2024-04-09 07:33:04+00:00,"[cli] Unify table formatting output (#11387)

This removes 'text-table' as a dependency in favor of using 'cli-table3', and simplifies table formatting logic."
3e57c4a2de7c05e42b53ff2ab27f347dd802851a,Nathan Rajlich,2024-04-06 07:47:56+00:00,GitHub,2024-04-06 07:47:56+00:00,"[tests] Remove `disableSSO()` function (#11380)

The SSO Protection feature is now turned off by default for testing accounts. So this manual logic for disabling the feature on each project test fixture is no longer necessary."
0c3d136414e708c9bd724c500812e75e4e6ce697,Austin Merrick,2024-04-05 22:13:37+00:00,GitHub,2024-04-05 22:13:37+00:00,"[cli] Fix flickering during UI re-rendering  (#11392)

Various UI components would flicker upon re-rendering in unoptimized terminals as OSX's stock terminal app. This change bumps these components to include [this fix](https://github.com/SBoudrias/Inquirer.js/pull/1379).

## Before
https://github.com/vercel/vercel/assets/8485687/352ce43e-9a01-4290-a4c8-8826aebf859a

## After
https://github.com/vercel/vercel/assets/8485687/9e2eb071-0f7c-4d5a-adf6-735b30bcc294"
238d6db17a7aa9e2d1da5dd69f33da097d7a5cc2,Jeff See,2024-04-05 21:50:27+00:00,GitHub,2024-04-05 21:50:27+00:00,"Fix name for integration test (#11393)

I think this was a copy/paste typo from https://github.com/vercel/vercel/pull/11243"
bb7bfd027ff99194c41d8de61a1d29234e850b03,Vercel Release Bot,2024-04-05 13:58:55+00:00,GitHub,2024-04-05 13:58:55+00:00,"Version Packages (#11382)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@33.7.0

### Minor Changes

- improve UX for text input validation
([#11388](https://github.com/vercel/vercel/pull/11388))

- Replace the implementation of the yes/no prompt in several areas to be
consistent with the rest of the CLI.
([#11279](https://github.com/vercel/vercel/pull/11279))

### Patch Changes

- [cli] Fix how we determine the GIT_CONFIG_PATH to support git
worktrees and git submodules
([#11283](https://github.com/vercel/vercel/pull/11283))

- avoid printing errors when user does ctrl+c
([#11377](https://github.com/vercel/vercel/pull/11377))

- Warn that promoting preview deploys is deprecated
([#11376](https://github.com/vercel/vercel/pull/11376))

- Updated dependencies
\[[`a3fb7e6ab`](https://github.com/vercel/vercel/commit/a3fb7e6abe9bb619a653850decd739728b1af225)]:
    -   @vercel/go@3.1.1

## @vercel/go@3.1.1

### Patch Changes

- Add support for `1.22` and update Go minor versions `1.19`, `1.20` and
`1.21` ([#11156](https://github.com/vercel/vercel/pull/11156))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
a56ab4ded97afa97e3d488b95f18b77bca3f6bb8,Austin Merrick,2024-04-04 22:20:38+00:00,GitHub,2024-04-04 22:20:38+00:00,"[cli] Improve UX for text input validation (#11388)

Originally, I was focused on fixing this visual bug:
<img width=""565"" alt=""Screenshot 2024-04-04 at 9 50 56AM"" src=""https://github.com/vercel/vercel/assets/8485687/eb526fae-69d4-4636-ac8b-4cf6a3475c58"">

When digging into this issue, I realized there was an opportunity to improve text input validation UX and remove hand-rolled validation code.

## Before:

https://github.com/vercel/vercel/assets/8485687/5e264696-8b60-4863-8dc2-1a797f508074

https://github.com/vercel/vercel/assets/8485687/2104603a-331e-4679-9ec2-a4235fad252e

## After:

https://github.com/vercel/vercel/assets/8485687/72c51831-2b94-4cbe-b1f6-a5822bf9f1a8

https://github.com/vercel/vercel/assets/8485687/a371c7be-f7f5-4d3a-9451-58e7f572d25b

## Additional considerations

[input-root-directory](https://github.com/vercel/vercel/blob/main/packages/cli/src/util/input/input-root-directory.ts#L17) remains an instance of hand-rolled validation since it's trickier to force into inquirer's validation pattern. Also, we have a [hand-rolled text input function](https://github.com/vercel/vercel/blob/main/packages/cli/src/util/input/text.ts#L43) that will get similar benefits when replaced with `client.input.text`."
5660dab2ae9e16e0060ef125fce983108278b33c,Nathan Rajlich,2024-04-04 19:59:06+00:00,GitHub,2024-04-04 19:59:06+00:00,"[tests] Revert ""fetch vercel.com cert before builds and after tests"" (#11381)

This reverts commit a8eab6beb799a3ecde70cd310b6a3ae5e1a6de97 (#9803).

These CI steps were for an incident from close to a year ago, which has since been resolved."
1202cf8792ed039ba67c3ccede40a17a11442e6f,Austin Merrick,2024-04-04 19:43:44+00:00,GitHub,2024-04-04 19:43:44+00:00,"[cli] Avoid printing error when user does ctrl+c (#11377)

https://github.com/vercel/vercel/pull/11321 introduced a problem where ctrl+c during certain prompts would cause an error to be printed:

![Screenshot 2024-04-02 at 18 14 13](https://github.com/vercel/vercel/assets/8485687/6b37373d-ae83-4f75-a647-6d95536d6703)

The problem was that `@inquirer/prompts` throws errors on ctrl+c that get caught and printed in `handleError`. This fix skips printing those errors."
80b8c3d02256ef8e7ceaeeb31bf43e64a98d5c03,Trek Glowacki,2024-04-04 18:01:53+00:00,GitHub,2024-04-04 18:01:53+00:00,"[cli] Deprecate promoting preview deployments to production (#11376)

Warn about imminent removal of promoting preview deployments directly to
production.

---------

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
68e5edb9a24059560e3cf33884f098c0a95a839a,dependabot[bot],2024-04-04 16:10:26+00:00,GitHub,2024-04-04 16:10:26+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/ionic-react-v7 with 2 updates (#11383)

Bumps the core group in /packages/static-build/test/fixtures/ionic-react-v7 with 2 updates: [@ionic/react](https://github.com/ionic-team/ionic-framework) and [@ionic/core](https://github.com/ionic-team/ionic-framework).

Updates `@ionic/react` from 7.6.1 to 7.8.3
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/react</code>'s releases</a>.</em></p>
<blockquote>
<h2>v7.8.3</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.2...v7.8.3"">7.8.3</a> (2024-04-03)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>button:</strong> activated outline button in toolbar no longer blends into background on MD dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29216"">#29216</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e"">ee5da7a</a>)</li>
<li><strong>popover:</strong> viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262"">f08759c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29211"">#29211</a></li>
</ul>
<h2>v7.8.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.1...v7.8.2"">7.8.2</a> (2024-03-27)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>searchbar:</strong> autocapitalize is initialized correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29197"">#29197</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/8ad66c03d777edcab19c97cba696b171acc2d2e8"">8ad66c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29193"">#29193</a></li>
</ul>
<h2>v7.8.1</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.0...v7.8.1"">7.8.1</a> (2024-03-20)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> wheel picker shows consistently in overlays (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29147"">#29147</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/19c1bc16cbc6725463890382365203824b7fd353"">19c1bc1</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26234"">#26234</a></li>
<li><strong>header:</strong> iOS headers in MD app are not hidden (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29164"">#29164</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fdfecd32c33c41cf202d3b30c073bfb1b077e2d6"">fdfecd3</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28867"">#28867</a></li>
<li><strong>react:</strong> avoid definitely typed errors with <code>@types/react</code><a href=""https://github.com/18""><code>@18</code></a> (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29182"">#29182</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/58d217d0cf6b716da855c71c169fb1870d4067d3"">58d217d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29178"">#29178</a></li>
</ul>
<h3>Performance Improvements</h3>
<ul>
<li><strong>datetime:</strong> calendar body shows immediately in modal on ios (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29163"">#29163</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f75977699dae5aeea3d97d4318377633e935afb9"">f759776</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24542"">#24542</a></li>
</ul>
<h2>v7.8.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2>v7.7.5</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/react</code>'s changelog</a>.</em></p>
<blockquote>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.2...v7.8.3"">7.8.3</a> (2024-04-03)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>button:</strong> activated outline button in toolbar no longer blends into background on MD dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29216"">#29216</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e"">ee5da7a</a>)</li>
<li><strong>popover:</strong> viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262"">f08759c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29211"">#29211</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.1...v7.8.2"">7.8.2</a> (2024-03-27)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>searchbar:</strong> autocapitalize is initialized correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29197"">#29197</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/8ad66c03d777edcab19c97cba696b171acc2d2e8"">8ad66c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29193"">#29193</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.0...v7.8.1"">7.8.1</a> (2024-03-20)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> wheel picker shows consistently in overlays (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29147"">#29147</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/19c1bc16cbc6725463890382365203824b7fd353"">19c1bc1</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26234"">#26234</a></li>
<li><strong>header:</strong> iOS headers in MD app are not hidden (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29164"">#29164</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fdfecd32c33c41cf202d3b30c073bfb1b077e2d6"">fdfecd3</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28867"">#28867</a></li>
<li><strong>react:</strong> avoid definitely typed errors with <code>@types/react</code><a href=""https://github.com/18""><code>@18</code></a> (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29182"">#29182</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/58d217d0cf6b716da855c71c169fb1870d4067d3"">58d217d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29178"">#29178</a></li>
</ul>
<h3>Performance Improvements</h3>
<ul>
<li><strong>datetime:</strong> calendar body shows immediately in modal on ios (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29163"">#29163</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f75977699dae5aeea3d97d4318377633e935afb9"">f759776</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24542"">#24542</a></li>
</ul>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/de35fa8b94b839befa6961aa210659ea9b911caf""><code>de35fa8</code></a> v7.8.3</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c766528a177842994a172053f013f13dba7b598c""><code>c766528</code></a> chore: run build (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29262"">#29262</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/9b3cf9fbc2c5189871b2255d2d765e78509f5027""><code>9b3cf9f</code></a> chore(docs): move docs to the packages directory (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29256"">#29256</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e""><code>ee5da7a</code></a> fix(button): activated outline button in toolbar no longer blends into backgr...</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c4bfc783e0d475276efc36ae61afdfecbaf5af99""><code>c4bfc78</code></a> chore: remove Amanda from codeowners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29252"">#29252</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/0137e732ce551526a3fab22e0ae9b23823438405""><code>0137e73</code></a> chore: remove myself from code owners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29251"">#29251</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/88ecb29e39e9a109b201ffd7754123b407e7f953""><code>88ecb29</code></a> chore: remove self from codeowners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29250"">#29250</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/f726c358682768412aab4d5e1ba23f17c8a52711""><code>f726c35</code></a> chore(deps): update dependency <code>@stencil/vue-output-target</code> to v0.8.8 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29243"">#29243</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4a9d84ecbdc24df6a0be4aae57299f845d129c5a""><code>4a9d84e</code></a> chore: remove mapsandapps from issue auto assignment (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29248"">#29248</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262""><code>f08759c</code></a> fix(popover): viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v7.6.1...v7.8.3"">compare view</a></li>
</ul>
</details>
<br />

Updates `@ionic/core` from 7.6.1 to 7.8.3
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/core</code>'s releases</a>.</em></p>
<blockquote>
<h2>v7.8.3</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.2...v7.8.3"">7.8.3</a> (2024-04-03)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>button:</strong> activated outline button in toolbar no longer blends into background on MD dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29216"">#29216</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e"">ee5da7a</a>)</li>
<li><strong>popover:</strong> viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262"">f08759c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29211"">#29211</a></li>
</ul>
<h2>v7.8.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.1...v7.8.2"">7.8.2</a> (2024-03-27)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>searchbar:</strong> autocapitalize is initialized correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29197"">#29197</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/8ad66c03d777edcab19c97cba696b171acc2d2e8"">8ad66c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29193"">#29193</a></li>
</ul>
<h2>v7.8.1</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.0...v7.8.1"">7.8.1</a> (2024-03-20)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> wheel picker shows consistently in overlays (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29147"">#29147</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/19c1bc16cbc6725463890382365203824b7fd353"">19c1bc1</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26234"">#26234</a></li>
<li><strong>header:</strong> iOS headers in MD app are not hidden (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29164"">#29164</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fdfecd32c33c41cf202d3b30c073bfb1b077e2d6"">fdfecd3</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28867"">#28867</a></li>
<li><strong>react:</strong> avoid definitely typed errors with <code>@types/react</code><a href=""https://github.com/18""><code>@18</code></a> (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29182"">#29182</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/58d217d0cf6b716da855c71c169fb1870d4067d3"">58d217d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29178"">#29178</a></li>
</ul>
<h3>Performance Improvements</h3>
<ul>
<li><strong>datetime:</strong> calendar body shows immediately in modal on ios (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29163"">#29163</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f75977699dae5aeea3d97d4318377633e935afb9"">f759776</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24542"">#24542</a></li>
</ul>
<h2>v7.8.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2>v7.7.5</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/core</code>'s changelog</a>.</em></p>
<blockquote>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.2...v7.8.3"">7.8.3</a> (2024-04-03)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>button:</strong> activated outline button in toolbar no longer blends into background on MD dark mode (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29216"">#29216</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e"">ee5da7a</a>)</li>
<li><strong>popover:</strong> viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262"">f08759c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29211"">#29211</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.1...v7.8.2"">7.8.2</a> (2024-03-27)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>searchbar:</strong> autocapitalize is initialized correctly (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29197"">#29197</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/8ad66c03d777edcab19c97cba696b171acc2d2e8"">8ad66c0</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29193"">#29193</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.8.0...v7.8.1"">7.8.1</a> (2024-03-20)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>datetime:</strong> wheel picker shows consistently in overlays (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29147"">#29147</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/19c1bc16cbc6725463890382365203824b7fd353"">19c1bc1</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/26234"">#26234</a></li>
<li><strong>header:</strong> iOS headers in MD app are not hidden (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29164"">#29164</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/fdfecd32c33c41cf202d3b30c073bfb1b077e2d6"">fdfecd3</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28867"">#28867</a></li>
<li><strong>react:</strong> avoid definitely typed errors with <code>@types/react</code><a href=""https://github.com/18""><code>@18</code></a> (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29182"">#29182</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/58d217d0cf6b716da855c71c169fb1870d4067d3"">58d217d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29178"">#29178</a></li>
</ul>
<h3>Performance Improvements</h3>
<ul>
<li><strong>datetime:</strong> calendar body shows immediately in modal on ios (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29163"">#29163</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/f75977699dae5aeea3d97d4318377633e935afb9"">f759776</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/24542"">#24542</a></li>
</ul>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/de35fa8b94b839befa6961aa210659ea9b911caf""><code>de35fa8</code></a> v7.8.3</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c766528a177842994a172053f013f13dba7b598c""><code>c766528</code></a> chore: run build (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29262"">#29262</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/9b3cf9fbc2c5189871b2255d2d765e78509f5027""><code>9b3cf9f</code></a> chore(docs): move docs to the packages directory (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29256"">#29256</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ee5da7a747c0a0b420c5e371a9fe9ec4938d179e""><code>ee5da7a</code></a> fix(button): activated outline button in toolbar no longer blends into backgr...</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c4bfc783e0d475276efc36ae61afdfecbaf5af99""><code>c4bfc78</code></a> chore: remove Amanda from codeowners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29252"">#29252</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/0137e732ce551526a3fab22e0ae9b23823438405""><code>0137e73</code></a> chore: remove myself from code owners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29251"">#29251</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/88ecb29e39e9a109b201ffd7754123b407e7f953""><code>88ecb29</code></a> chore: remove self from codeowners (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29250"">#29250</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/f726c358682768412aab4d5e1ba23f17c8a52711""><code>f726c35</code></a> chore(deps): update dependency <code>@stencil/vue-output-target</code> to v0.8.8 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29243"">#29243</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/4a9d84ecbdc24df6a0be4aae57299f845d129c5a""><code>4a9d84e</code></a> chore: remove mapsandapps from issue auto assignment (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29248"">#29248</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/f08759c2b8256ff66f8d1901bd8e0be4617db262""><code>f08759c</code></a> fix(popover): viewport can be scrolled if no content present (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29215"">#29215</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v7.6.1...v7.8.3"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
1545e31a315dd04a8e27d7069d3f276caf3216b5,dependabot[bot],2024-04-04 15:46:18+00:00,GitHub,2024-04-04 15:46:18+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/nuxt-v3 with 3 updates (#11297)

Bumps the core group in /packages/static-build/test/fixtures/nuxt-v3 with 3 updates: [nuxt](https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt), [vue](https://github.com/vuejs/core) and [vue-router](https://github.com/vuejs/router).

Updates `nuxt` from 3.7.4 to 3.11.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/nuxt/nuxt/releases"">nuxt's releases</a>.</em></p>
<blockquote>
<h2>v3.11.1</h2>
<blockquote>
<p>3.11.1 is a patch release addressing regressions in v3.11.0.</p>
</blockquote>
<h2> Upgrading</h2>
<p>As usual, our recommendation for upgrading is to run:</p>
<pre lang=""sh""><code>nuxi upgrade --force
</code></pre>
<p>This will refresh your lockfile as well, and ensures that you pull in updates from other dependencies that Nuxt relies on, particularly in the unjs ecosystem.</p>
<h2> Changelog</h2>
<p><a href=""https://github.com/nuxt/nuxt/compare/v3.11.0...v3.11.1"">compare changes</a></p>
<h3> Fixes</h3>
<ul>
<li><strong>nuxt:</strong> Ignore console.logs called outside event context (<a href=""https://github.com/nuxt/nuxt/commit/b3ced3d69"">b3ced3d69</a>)</li>
<li><strong>schema:</strong> Include <code>ofetch</code> in <code>typescript.hoist</code> defaults (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26316"">#26316</a>)</li>
<li><strong>nuxt:</strong> Conditionally use <code>tsx</code> parser (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26314"">#26314</a>)</li>
<li><strong>nuxt:</strong> Correct <code>finish</code> types and add to docs (<a href=""https://github.com/nuxt/nuxt/commit/0d9c63b82"">0d9c63b82</a>)</li>
<li><strong>nuxt:</strong> Ignore failures to access asyncContext in environments without it (<a href=""https://github.com/nuxt/nuxt/commit/523db1a19"">523db1a19</a>)</li>
<li><strong>nuxt:</strong> Handle failure creating BroadcastChannel (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26340"">#26340</a>)</li>
<li><strong>nuxt:</strong> Don't warn when injecting client-only components (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26341"">#26341</a>)</li>
<li><strong>nuxt:</strong> Prevent losing pages routes on prerender (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26354"">#26354</a>)</li>
<li><strong>nuxt:</strong> Pass <code>undefined</code> name when resolving trailing slash (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26358"">#26358</a>)</li>
<li><strong>vite:</strong> Use ssr result if it exists (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26356"">#26356</a>)</li>
</ul>
<h3> Documentation</h3>
<ul>
<li>Fix code block formatting for <code>usePreviewMode</code> (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26303"">#26303</a>)</li>
<li>Fix confusing wording (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26301"">#26301</a>)</li>
<li>Add note that <code>useId</code> must be used with single root element (<a href=""https://github.com/nuxt/nuxt/commit/401370b3a"">401370b3a</a>)</li>
<li>Mention <code>&lt;DevOnly&gt;</code> component in api section (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26029"">#26029</a>)</li>
<li>Note that <code>@nuxt/schema</code> should be used by module authors (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26190"">#26190</a>)</li>
<li>Add <code>routeNameSplitter</code> example in migration docs (<a href=""https://redirect.github.com/nuxt/nuxt/pull/25838"">#25838</a>)</li>
</ul>
<h3> Chore</h3>
<ul>
<li><strong>nuxt:</strong> Remove unused code (<a href=""https://redirect.github.com/nuxt/nuxt/pull/26319"">#26319</a>)</li>
<li>Revert update github/codeql-action action (<a href=""https://github.com/nuxt/nuxt/commit/c72951b06"">c72951b06</a>)</li>
</ul>
<h3> CI</h3>
<ul>
<li>Configure npm registry in release workflow (<a href=""https://github.com/nuxt/nuxt/commit/68f7d4df8"">68f7d4df8</a>)</li>
</ul>
<h3> Contributors</h3>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/nuxt/nuxt/commit/a80d1a0d6349bf1003666fc79a513c0d7370c931""><code>a80d1a0</code></a> v3.11.1</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/c49d2066473c1b5fbd6efaa7bdbc104ae56e9657""><code>c49d206</code></a> fix(nuxt): pass <code>undefined</code> name when resolving trailing slash (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26358"">#26358</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/7284e70de9d92b1cd320b6e922504d2db47302c6""><code>7284e70</code></a> fix(nuxt): prevent losing pages routes on prerender (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26354"">#26354</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/0bc49eb0ca573c8ed53211a5150a246eccfdb910""><code>0bc49eb</code></a> chore(deps): update dependency nuxi to v3.11.0 (main) (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26353"">#26353</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/90591e3a3c928cfb95e7e9a78bf51031874ef3c1""><code>90591e3</code></a> fix(nuxt): don't warn when injecting client-only components (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26341"">#26341</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/2c0fc3a15e241fc53b97632b96f5466e87092345""><code>2c0fc3a</code></a> fix(nuxt): handle failure creating BroadcastChannel (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26340"">#26340</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/9b9558bcf94e337198310c578e124379e0fcd239""><code>9b9558b</code></a> chore(deps): update dependency ufo to v1.5.2 (main) (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26339"">#26339</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/03f7b0941e3b2096b4f87f9cba890cda3b854c76""><code>03f7b09</code></a> chore(nuxt): remove unused code (<a href=""https://github.com/nuxt/nuxt/tree/HEAD/packages/nuxt/issues/26319"">#26319</a>)</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/523db1a1972d13dee05bfcf6c14523cb55b6e5b7""><code>523db1a</code></a> fix(nuxt): ignore failures to access asyncContext in environments without it</li>
<li><a href=""https://github.com/nuxt/nuxt/commit/0d9c63b828f471664a7624558e287eb9df87f8e5""><code>0d9c63b</code></a> fix(nuxt): correct <code>finish</code> types and add to docs</li>
<li>Additional commits viewable in <a href=""https://github.com/nuxt/nuxt/commits/v3.11.1/packages/nuxt"">compare view</a></li>
</ul>
</details>
<br />

Updates `vue` from 3.3.4 to 3.4.21
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/vuejs/core/releases"">vue's releases</a>.</em></p>
<blockquote>
<h2>v3.4.21</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.20</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.19</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.18</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.17</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.16</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.15</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.14</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.13</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.12</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.11</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.10</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.9</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.8</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.7</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.6</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<h2>v3.4.5</h2>
<p>Please refer to <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/vuejs/core/blob/main/CHANGELOG.md"">vue's changelog</a>.</em></p>
<blockquote>
<h2><a href=""https://github.com/vuejs/core/compare/v3.4.20...v3.4.21"">3.4.21</a> (2024-02-28)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>runtime-dom:</strong> avoid unset option's value (<a href=""https://redirect.github.com/vuejs/core/issues/10416"">#10416</a>) (<a href=""https://github.com/vuejs/core/commit/b3f8b5a4e700d4c47a146b6040882287d180f6cb"">b3f8b5a</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10412"">#10412</a> <a href=""https://redirect.github.com/vuejs/core/issues/10396"">#10396</a></li>
<li><strong>suspense:</strong> ensure nested suspense patching if in fallback state (<a href=""https://redirect.github.com/vuejs/core/issues/10417"">#10417</a>) (<a href=""https://github.com/vuejs/core/commit/7c97778aec1e3513035e5df265e1b8a7801f6106"">7c97778</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10415"">#10415</a></li>
<li><strong>warning:</strong> stringify args in warn handler (<a href=""https://redirect.github.com/vuejs/core/issues/10414"">#10414</a>) (<a href=""https://github.com/vuejs/core/commit/bc37258caa2f6f67f4554ab8587aca3798d92124"">bc37258</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10409"">#10409</a></li>
</ul>
<h2><a href=""https://github.com/vuejs/core/compare/v3.4.19...v3.4.20"">3.4.20</a> (2024-02-26)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>parser:</strong> should not treat uppercase components as special tags (<a href=""https://github.com/vuejs/core/commit/e0e02535cdea1aeb1cfaff0d61d4b2555e555c36"">e0e0253</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10395"">#10395</a></li>
<li><strong>runtime-dom:</strong> avoid always resetting nullish option value (<a href=""https://github.com/vuejs/core/commit/ff130c470204086edaa093fb8fdc1247c69cba69"">ff130c4</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10396"">#10396</a></li>
<li><strong>runtime-dom:</strong> fix nested v-show priority regression (<a href=""https://github.com/vuejs/core/commit/364f8902c8657faec7c3a4d70a5b2c856567e92d"">364f890</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10338"">#10338</a></li>
<li><strong>runtime-dom:</strong> v-bind style should clear previous css string value (<a href=""https://redirect.github.com/vuejs/core/issues/10373"">#10373</a>) (<a href=""https://github.com/vuejs/core/commit/e2d323538e71d404e729148fd19a08bbc2e3da9b"">e2d3235</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10352"">#10352</a></li>
<li><strong>suspense:</strong> handle suspense switching with nested suspense  (<a href=""https://redirect.github.com/vuejs/core/issues/10184"">#10184</a>) (<a href=""https://github.com/vuejs/core/commit/0f3da05ea201761529bb95594df1e2cee20b7107"">0f3da05</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10098"">#10098</a></li>
<li><strong>types:</strong> better typing for direct setup signature of defineComponent (<a href=""https://redirect.github.com/vuejs/core/issues/10357"">#10357</a>) (<a href=""https://github.com/vuejs/core/commit/eadce5b75356656fd2209ebdb406d34823c961b7"">eadce5b</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/8604"">#8604</a> <a href=""https://redirect.github.com/vuejs/core/issues/8855"">#8855</a></li>
</ul>
<h2><a href=""https://github.com/vuejs/core/compare/v3.4.18...v3.4.19"">3.4.19</a> (2024-02-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>deps:</strong> pin lru-cache to avoid hashing error (<a href=""https://github.com/vuejs/core/commit/b8be99018ceae92d1732dfb414df12b36b90b31f"">b8be990</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10300"">#10300</a></li>
<li><strong>hydration:</strong> fix css vars hydration mismatch false positive on non-root nodes (<a href=""https://github.com/vuejs/core/commit/995d2fdcca485c24849c99f498c1edc163722e04"">995d2fd</a>), closes <a href=""https://redirect.github.com/vuejs/core/issues/10317"">#10317</a> <a href=""https://redirect.github.com/vuejs/core/issues/10325"">#10325</a></li>
<li><strong>runtime-dom:</strong> should not trigger transition when v-show value is falsy (<a href=""https://redirect.github.com/vuejs/core/issues/10311"">#10311</a>) (<a href=""https://github.com/vuejs/core/commit/e50963903d93a7f24003b6e2c03647fdf7454b1e"">e509639</a>)</li>
</ul>
<h3>Features</h3>
<blockquote>
<p>Note: this warning is categorized as a feature but released in a patch because it does not affect public APIs.</p>
</blockquote>
<ul>
<li><strong>dx:</strong> warn users when computed is self-triggering (<a href=""https://redirect.github.com/vuejs/core/issues/10299"">#10299</a>) (<a href=""https://github.com/vuejs/core/commit/f7ba97f9754a9882c1f6b1c07ca1a4040479dd13"">f7ba97f</a>)</li>
</ul>
<h3>Performance Improvements</h3>
<ul>
<li><strong>runtime:</strong> improve <code>getType()</code> GC and speed (<a href=""https://redirect.github.com/vuejs/core/issues/10327"">#10327</a>) (<a href=""https://github.com/vuejs/core/commit/603a1e1f5ad587c077f0d974c1bbe856be22ebe9"">603a1e1</a>)</li>
</ul>
<h2><a href=""https://github.com/vuejs/core/compare/v3.4.17...v3.4.18"">3.4.18</a> (2024-02-09)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/vuejs/core/commit/f66a75ea75c8aece065b61e2126b4c5b2338aa6e""><code>f66a75e</code></a> release: v3.4.21</li>
<li><a href=""https://github.com/vuejs/core/commit/b3f8b5a4e700d4c47a146b6040882287d180f6cb""><code>b3f8b5a</code></a> fix(runtime-dom): avoid unset option's value (<a href=""https://redirect.github.com/vuejs/core/issues/10416"">#10416</a>)</li>
<li><a href=""https://github.com/vuejs/core/commit/bc37258caa2f6f67f4554ab8587aca3798d92124""><code>bc37258</code></a> fix(warning): stringify args in warn handler (<a href=""https://redirect.github.com/vuejs/core/issues/10414"">#10414</a>)</li>
<li><a href=""https://github.com/vuejs/core/commit/7c97778aec1e3513035e5df265e1b8a7801f6106""><code>7c97778</code></a> fix(suspense): ensure nested suspense patching if in fallback state (<a href=""https://redirect.github.com/vuejs/core/issues/10417"">#10417</a>)</li>
<li><a href=""https://github.com/vuejs/core/commit/1f6a1102aa09960f76a9af2872ef01e7da8538e3""><code>1f6a110</code></a> test: clean snapshot</li>
<li><a href=""https://github.com/vuejs/core/commit/89de26cdcdddef8096417ea494de113399629d5b""><code>89de26c</code></a> release: v3.4.20</li>
<li><a href=""https://github.com/vuejs/core/commit/b97ad0ee9a76207062779a5feb23136d900fd740""><code>b97ad0e</code></a> chore: update e2eUtils puppeteer options</li>
<li><a href=""https://github.com/vuejs/core/commit/b3bd3a210aec72d5253c50b27c621d608d2b7a07""><code>b3bd3a2</code></a> build: disable reexportProtoFromExternal in rollup config</li>
<li><a href=""https://github.com/vuejs/core/commit/a24809fbd24a0d538dfddb6ee9d085efb206249b""><code>a24809f</code></a> chore: limit typescript lib to es2016 (<a href=""https://redirect.github.com/vuejs/core/issues/10164"">#10164</a>)</li>
<li><a href=""https://github.com/vuejs/core/commit/822cb72e01192c9eb04a642a360ef47ed0ec9fda""><code>822cb72</code></a> chore(deps): update test to ^1.3.1 (<a href=""https://redirect.github.com/vuejs/core/issues/10355"">#10355</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/vuejs/core/compare/v3.3.4...v3.4.21"">compare view</a></li>
</ul>
</details>
<br />

Updates `vue-router` from 4.2.5 to 4.3.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/vuejs/router/releases"">vue-router's releases</a>.</em></p>
<blockquote>
<h2>v4.3.0</h2>
<p>Please refer to <a href=""https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md"">CHANGELOG.md</a> for details.</p>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/vuejs/router/commit/13303bd025c1643685cb6f24776edeaebbbe7277""><code>13303bd</code></a> release: vue-router@4.3.0</li>
<li><a href=""https://github.com/vuejs/router/commit/16f83dbb59d1c4d29c9f7543fd42baa29e6a4da9""><code>16f83db</code></a> chore: up packages</li>
<li><a href=""https://github.com/vuejs/router/commit/04b6225de8d3b319868d911945c8f11f2c23d68a""><code>04b6225</code></a> chore: require up to date node</li>
<li><a href=""https://github.com/vuejs/router/commit/17d47ed32fdbe6331d0ba03f9aa50f3d51cb67ab""><code>17d47ed</code></a> chore: comment</li>
<li><a href=""https://github.com/vuejs/router/commit/c9f3e0c7710adfd176ae6c49c2868284af56e4c1""><code>c9f3e0c</code></a> docs: api updates</li>
<li><a href=""https://github.com/vuejs/router/commit/9a8520ffade95733ee2860c412e2f35c4fb532a2""><code>9a8520f</code></a> chore: up vue</li>
<li><a href=""https://github.com/vuejs/router/commit/f934fcf634f3f501d6f84b40419ebac41e7a01e9""><code>f934fcf</code></a> chore: update chromedriver to 121.0.2 to fix binary CDN URL issue (<a href=""https://redirect.github.com/vuejs/router/issues/2144"">#2144</a>)</li>
<li><a href=""https://github.com/vuejs/router/commit/d14503fc3824cd57d9e80c151937b81175ed9dee""><code>d14503f</code></a> docs(zh): translate the last paragraph of named_routes to Chinese (<a href=""https://redirect.github.com/vuejs/router/issues/2141"">#2141</a>)</li>
<li><a href=""https://github.com/vuejs/router/commit/04b50e5a2cf82f896f5200497386d8a2acdae738""><code>04b50e5</code></a> fix: keep optional params coming from a parent record (<a href=""https://redirect.github.com/vuejs/router/issues/2031"">#2031</a>)</li>
<li><a href=""https://github.com/vuejs/router/commit/2e1ad5d51ae221af8e0bd95d5787fa46e1fff546""><code>2e1ad5d</code></a> docs: fix index.md to avoid horizontal scrolling in code (<a href=""https://redirect.github.com/vuejs/router/issues/2129"">#2129</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/vuejs/router/compare/v4.2.5...v4.3.0"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
76ea6ea2a7bfe98749b7363ec6ffaefe3a7fe851,Jeff See,2024-04-04 09:45:02+00:00,GitHub,2024-04-04 09:45:02+00:00,"[cli] Replace `promptBool` with `confirm` prompts (#11279)

The only changes are from some slightly different punctuation and that typing 'y' or 'n' doesn't process the prompt, it now waits for ""Enter"". Easiest command to see this is an action is the `init`, if you provided an invalid example to initialize `vercel init astroz` and follow the prompts."
5b8b87739e205850ad438b2e1d7de1e9ecdd53e6,Dillon Mulroy,2024-04-04 08:54:15+00:00,GitHub,2024-04-04 08:54:15+00:00,"[cli] Fix how we determine the GIT_CONFIG_PATH to support git worktrees and git submodules (#11283)

## Fix how we determine the GIT_CONFIG_PATH to support git worktrees and git submodules

We were previously checking for the root of the directory by looking for `.git/config` if the project was not already linked.

This was causing `ENOTDIR` error when checking `.git` in git worktree or git submodule repositories. This is due to `.git` being a file in those repo types with a pointer to the ""parent"" or ""super"" repo rather than a directory.

Resolves #10104"
6ff7b34a4470edbd967b2a3625e706bc33eeae13,dependabot[bot],2024-04-04 08:30:19+00:00,GitHub,2024-04-04 08:30:19+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/preact-v10 with 2 updates (#11361)

Bumps the core group in /packages/static-build/test/fixtures/preact-v10 with 2 updates: [preact](https://github.com/preactjs/preact) and [preact-render-to-string](https://github.com/preactjs/preact-render-to-string).

Updates `preact` from 10.18.1 to 10.20.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/preactjs/preact/releases"">preact's releases</a>.</em></p>
<blockquote>
<h2>10.20.1</h2>
<h2>Fixes</h2>
<ul>
<li>Add special case for focusIn and focusOut (<a href=""https://redirect.github.com/preactjs/preact/issues/4316"">#4316</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>10.20.0</h2>
<h2>Features</h2>
<ul>
<li>Add isMemo to compact to allow compatibility with react-is dependant libraries (<a href=""https://redirect.github.com/preactjs/preact/issues/4302"">#4302</a>, thanks <a href=""https://github.com/ziongh""><code>@ziongh</code></a>)</li>
</ul>
<h2>Fixes</h2>
<ul>
<li>Fix case where shrinking a list would cause an exception (<a href=""https://redirect.github.com/preactjs/preact/issues/4312"">#4312</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>10.19.7</h2>
<h2>Types</h2>
<ul>
<li>Bring consistency to our focus-event types (<a href=""https://redirect.github.com/preactjs/preact/issues/4307"">#4307</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Add onScrollend listener type (<a href=""https://redirect.github.com/preactjs/preact/issues/4305"">#4305</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Align state updater type with Raeect (<a href=""https://redirect.github.com/preactjs/preact/issues/4306"">#4306</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>Fixes</h2>
<ul>
<li>Revert batch commit callbacks from all components in the render queue (<a href=""https://redirect.github.com/preactjs/preact/issues/4297"">#4297</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>10.19.6</h2>
<p><strong>tl;dr:</strong> This release contains bug fixes for incorrect ordering of unkeyed children.</p>
<h2>Fixes</h2>
<ul>
<li>Match <code>null</code> placeholders using skewed index (<a href=""https://redirect.github.com/preactjs/preact/issues/4290"">#4290</a>, thanks <a href=""https://github.com/andrewiggins""><code>@andrewiggins</code></a>)</li>
<li>Fix increment skew when we aren't removing the first pointer (<a href=""https://redirect.github.com/preactjs/preact/issues/4284"">#4284</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Fix invalid vnode internal id for text nodes (<a href=""https://redirect.github.com/preactjs/preact/issues/4291"">#4291</a>, thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>)</li>
<li>Fix unkeyed reconciliation order in certain scenarios (<a href=""https://redirect.github.com/preactjs/preact/issues/4287"">#4287</a>, thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/preactjs/preact/compare/10.19.5...10.19.6"">https://github.com/preactjs/preact/compare/10.19.5...10.19.6</a></p>
<h2>10.19.5</h2>
<h2>Fixes</h2>
<ul>
<li>Address scenario where we would crash when replacing a matched vnode with null (<a href=""https://redirect.github.com/preactjs/preact/issues/4281"">#4281</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Correctly restore _original (<a href=""https://redirect.github.com/preactjs/preact/issues/4280"">#4280</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Protect against nullish render (<a href=""https://redirect.github.com/preactjs/preact/issues/4278"">#4278</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
<li>Support setting translate through direct access (<a href=""https://redirect.github.com/preactjs/preact/issues/3800"">#3800</a>, thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>)</li>
</ul>
<h2>Types</h2>
<ul>
<li>Add dpub aria 1.0 role JSX types (<a href=""https://redirect.github.com/preactjs/preact/issues/4276"">#4276</a>, thanks <a href=""https://github.com/novari""><code>@novari</code></a>)</li>
</ul>
<h2>10.19.4</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/preactjs/preact/commit/bc7c5515599634a427334eb03236ddf19e13e618""><code>bc7c551</code></a> 10.20.1 (<a href=""https://redirect.github.com/preactjs/preact/issues/4319"">#4319</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/a59a78ce14879bb57ff8269522f9151ccee09db7""><code>a59a78c</code></a> fix focus in and out (<a href=""https://redirect.github.com/preactjs/preact/issues/4316"">#4316</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/b820d8b73eade8bc5b3fbf7e5fe0dd5150de80e2""><code>b820d8b</code></a> 10.20.0 (<a href=""https://redirect.github.com/preactjs/preact/issues/4313"">#4313</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/342b50e8624ef6566abc844b725a09ef4aa4b390""><code>342b50e</code></a> fix: case where shrinking a list would cause an exception (<a href=""https://redirect.github.com/preactjs/preact/issues/4312"">#4312</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/a784a62b69caa89f167993db5ac41b9b2fc698c4""><code>a784a62</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact/issues/4302"">#4302</a> from ziongh/main</li>
<li><a href=""https://github.com/preactjs/preact/commit/94bfe9d779e59a9cd7e09c08125b00e7edbbf168""><code>94bfe9d</code></a> Merge branch 'main' into main</li>
<li><a href=""https://github.com/preactjs/preact/commit/e1747136e829f3cdd249a731e0143eedef1f1cd6""><code>e174713</code></a> 10.19.7 (<a href=""https://redirect.github.com/preactjs/preact/issues/4308"">#4308</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/b2ff0560e9270b7786e6be385818d9c84d8e113a""><code>b2ff056</code></a> try to fix benchmarks (<a href=""https://redirect.github.com/preactjs/preact/issues/4304"">#4304</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/a2c12f5a46a70b2b58517f5e14e731a77d6d64a3""><code>a2c12f5</code></a> bring consistency to our focus events (<a href=""https://redirect.github.com/preactjs/preact/issues/4307"">#4307</a>)</li>
<li><a href=""https://github.com/preactjs/preact/commit/cfba5eef8e4072f6d01594386b34b8902d3c6ada""><code>cfba5ee</code></a> add onscrollend listener type (<a href=""https://redirect.github.com/preactjs/preact/issues/4305"">#4305</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/preactjs/preact/compare/10.18.1...10.20.1"">compare view</a></li>
</ul>
</details>
<br />

Updates `preact-render-to-string` from 6.2.2 to 6.4.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/preactjs/preact-render-to-string/releases"">preact-render-to-string's releases</a>.</em></p>
<blockquote>
<h2>v6.4.1</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/344"">#344</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/27a8b0e0654663e31df01e03f5bf34c74ec76e67""><code>27a8b0e</code></a> Thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>! - Ensure commonjs also has the async export</p>
</li>
<li>
<p><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/336"">#336</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/c46fb593eaf0c0be699acba6b9953dd01da0ea81""><code>c46fb59</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Fix error thrown after suspending not being rethrown.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/339"">#339</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/44628228dec6b10c59023c21e17a140f205ed0c9""><code>4462822</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Fix invalid parent pointer empty value when rendering a suspended vnode</p>
</li>
</ul>
<h2>6.4.0</h2>
<h3>Minor Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/333"">#333</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/6acc97aee994bd8291564032307f301745c1ed18""><code>6acc97a</code></a> Thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a> and <a href=""https://github.com/dios-david""><code>@dios-david</code></a>! - Allow prepass like behavior where a Promise
will be awaited and then continued, this is done with the new <code>renderToStringAsync</code> export</li>
</ul>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/326"">#326</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/87d8c21e61c8fb9c1ec9d8d69a826bfb3e5db9af""><code>87d8c21</code></a> Thanks <a href=""https://github.com/Geo25rey""><code>@Geo25rey</code></a>! - fix external type definitions of <code>renderToString</code></li>
</ul>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/329"">#329</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/0a0d0ceba22d89fa82a177305c7e44aa22202398""><code>0a0d0ce</code></a> Thanks <a href=""https://github.com/acelaya""><code>@acelaya</code></a>! - Remove incorrect second default export from jsx.d.ts</li>
</ul>
<h2>6.3.1</h2>
<h2>What's Changed</h2>
<ul>
<li>fix: mapped precompile children by <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a> in <a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/324"">preactjs/preact-render-to-string#324</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/preactjs/preact-render-to-string/compare/v6.3.0...v6.3.1"">https://github.com/preactjs/preact-render-to-string/compare/v6.3.0...v6.3.1</a></p>
<h2>6.3.0</h2>
<h2>Features</h2>
<ul>
<li>feat: add support for precompiled JSX by <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a> in <a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/322"">preactjs/preact-render-to-string#322</a></li>
</ul>
<h2>Maintenance</h2>
<ul>
<li>chore: update test dependencies by <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a> in <a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/321"">preactjs/preact-render-to-string#321</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href=""https://github.com/preactjs/preact-render-to-string/compare/6.2.2...v6.3.0"">https://github.com/preactjs/preact-render-to-string/compare/6.2.2...v6.3.0</a></p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/preactjs/preact-render-to-string/blob/main/CHANGELOG.md"">preact-render-to-string's changelog</a>.</em></p>
<blockquote>
<h2>6.4.1</h2>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/344"">#344</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/27a8b0e0654663e31df01e03f5bf34c74ec76e67""><code>27a8b0e</code></a> Thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>! - Ensure commonjs also has the async export</li>
</ul>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/336"">#336</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/c46fb593eaf0c0be699acba6b9953dd01da0ea81""><code>c46fb59</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Fix error thrown after suspending not being rethrown.</li>
</ul>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/339"">#339</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/44628228dec6b10c59023c21e17a140f205ed0c9""><code>4462822</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Fix invalid parent pointer empty value when rendering a suspended vnode</li>
</ul>
<h2>6.4.0</h2>
<h3>Minor Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/333"">#333</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/6acc97aee994bd8291564032307f301745c1ed18""><code>6acc97a</code></a> Thanks <a href=""https://github.com/JoviDeCroock""><code>@JoviDeCroock</code></a>! - Allow prepass like behavior where a Promise
will be awaited and then continued, this is done with
the new <code>renderToStringAsync</code> export</li>
</ul>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/326"">#326</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/87d8c21e61c8fb9c1ec9d8d69a826bfb3e5db9af""><code>87d8c21</code></a> Thanks <a href=""https://github.com/Geo25rey""><code>@Geo25rey</code></a>! - fix external type definitions of <code>renderToString</code></li>
</ul>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/329"">#329</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/0a0d0ceba22d89fa82a177305c7e44aa22202398""><code>0a0d0ce</code></a> Thanks <a href=""https://github.com/acelaya""><code>@acelaya</code></a>! - Remove incorrect second default export from jsx.d.ts</li>
</ul>
<h2>6.3.1</h2>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/preactjs/preact-render-to-string/pull/324"">#324</a> <a href=""https://github.com/preactjs/preact-render-to-string/commit/6bf321d31d97d679910f892d4310ae79b3a70e84""><code>6bf321d</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Fix mapped children not working with Deno's new precompile JSX transform.</li>
</ul>
<h2>6.3.0</h2>
<h3>Minor Changes</h3>
<ul>
<li>
<p><a href=""https://github.com/preactjs/preact-render-to-string/commit/926827c0745889545a97774535e778da3c808dd0""><code>926827c</code></a> Thanks <a href=""https://github.com/marvinhagemeister""><code>@marvinhagemeister</code></a>! - Add support for precompiled JSX transform, see <a href=""https://deno.com/blog/v1.38#fastest-jsx-transform"">https://deno.com/blog/v1.38#fastest-jsx-transform</a>. Compared to traditional JSX transforms, the precompiled JSX transform tries to pre-serialize as much of the JSX as possible. That way less objects need to be created and serialized which relieves a lot of GC pressure.</p>
<pre lang=""jsx""><code>// input
&lt;div class=&quot;foo&quot;&gt;hello&lt;/div&gt;;
<p>// output
const tpl = [<code>&amp;lt;div class=&amp;quot;foo&amp;quot;&amp;gt;hello&amp;lt;/div&amp;gt;</code>];
jsxTemplate(tpl);
</code></pre></p>
</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/663dbb838f313853fc871a9f7f2f942ae7b4031b""><code>663dbb8</code></a> chore: add repo info to package.json</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/56e116a766af06d7967b537ef0dd49fc6f8cfeb0""><code>56e116a</code></a> chore: fix changeset action command</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/8dbc8e96715c140fb272029a0f1fa6d9ab489164""><code>8dbc8e9</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact-render-to-string/issues/337"">#337</a> from preactjs/changeset-release/main</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/5ad317e4f201316845f43b7f3a78f8f014b9d017""><code>5ad317e</code></a> Version Packages</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/f84f951a9c5e68380eecb1ef48cf09475836a849""><code>f84f951</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact-render-to-string/issues/344"">#344</a> from preactjs/ensure-cjs-export</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/27a8b0e0654663e31df01e03f5bf34c74ec76e67""><code>27a8b0e</code></a> ensure the cjs export has our async func</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/e3326e2ec92e52032d8380fdc6ca5aed70fbcc48""><code>e3326e2</code></a> Merge pull request <a href=""https://redirect.github.com/preactjs/preact-render-to-string/issues/342"">#342</a> from jviide/up</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/225563804e1a905a818896897f322e0e136d287a""><code>2255638</code></a> build(actions): update actions, use actions/setup-node's builtin caching</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/4521894ae9fc07df6b0367f17ce852acbb36b727""><code>4521894</code></a> correct my usual mistake (<a href=""https://redirect.github.com/preactjs/preact-render-to-string/issues/341"">#341</a>)</li>
<li><a href=""https://github.com/preactjs/preact-render-to-string/commit/7819c3eb6d7ca75e4ce420e30f7e39bc780216dd""><code>7819c3e</code></a> automate publishing with provenance (<a href=""https://redirect.github.com/preactjs/preact-render-to-string/issues/340"">#340</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/preactjs/preact-render-to-string/compare/6.2.2...v6.4.1"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
97d9e83232e71b3c762d3f4986224f182994bf15,dependabot[bot],2024-04-04 08:05:58+00:00,GitHub,2024-04-04 08:05:58+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/stencil-v4 with 1 update (#11360)

Bumps the core group in /packages/static-build/test/fixtures/stencil-v4 with 1 update: [@stencil/core](https://github.com/ionic-team/stencil).

Updates `@stencil/core` from 4.10.0 to 4.14.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/releases""><code>@stencil/core</code>'s releases</a>.</em></p>
<blockquote>
<h2> 4.14.0 (2024-04-01)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>mock-doc:</strong> provide a local name (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5480"">#5480</a>) (<a href=""https://github.com/ionic-team/stencil/commit/2f67b3526c7160a0c9ac71727c401a438d282474"">2f67b35</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5342"">#5342</a></li>
<li><strong>mock-doc:</strong> resolve type issue for localName (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5595"">#5595</a>) (<a href=""https://github.com/ionic-team/stencil/commit/d91af87d4e309a2da3cb145165cf7fe3c79ac1e7"">d91af87</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5342"">#5342</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>testing:</strong> allow to set screenshot timeout option in Jest v28+ (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5537"">#5537</a>) (<a href=""https://github.com/ionic-team/stencil/commit/6df12b2a445ffe431f8412758f298a6e1c8fe3ac"">6df12b2</a>)</li>
<li><strong>testing:</strong> support deep piercing with Puppeteer (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5481"">#5481</a>) (<a href=""https://github.com/ionic-team/stencil/commit/13d5d4188ac0d3d8d002ce93c4ec7abdde5c8086"">13d5d41</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.3 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5588"">#5588</a>) (<a href=""https://github.com/ionic-team/stencil/commit/9d489e42a60391d2eb88cb0f7827a9368de18140"">9d489e4</a>)</li>
</ul>
<h2> v4.13.0 (2024-03-18)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>compiler:</strong> allow to set custom root directory (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5446"">#5446</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b6b96175c5e6a7d3477ed5fc2d4ddfc17827dd63"">b6b9617</a>)</li>
<li><strong>compiler:</strong> don't validate references for <code>@Prop</code>, <code>@Method</code> and <code>@Event</code> decorator (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5475"">#5475</a>) (<a href=""https://github.com/ionic-team/stencil/commit/3e45a823534a2e36ac51cbc701ecff074c7c842d"">3e45a82</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/1352"">#1352</a></li>
<li><strong>renderer:</strong> fix conditional rendering issue (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5365"">#5365</a>) (<a href=""https://github.com/ionic-team/stencil/commit/5aa886eb52efb7f361d53672698e947390c4f6f0"">5aa886e</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>renderer:</strong> fix missing slot ref callback handling (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5337"">#5337</a>) (<a href=""https://github.com/ionic-team/stencil/commit/41f877ec48200dee0483691b4e5e519073d392dd"">41f877e</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>runtime:</strong> remove <code>forceUpdate</code> in <code>appendChild</code> patch (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5437"">#5437</a>) (<a href=""https://github.com/ionic-team/stencil/commit/e03795b38e93dfc024425c11d08792a6f4b02bcb"">e03795b</a>)</li>
<li><strong>sys:</strong> fix expected types for <code>createNodeLogger</code> and <code>createNodeSys</code> (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5375"">#5375</a>) (<a href=""https://github.com/ionic-team/stencil/commit/7a70281bb41697c2fe9f992af571d5b7af242a79"">7a70281</a>)</li>
<li><strong>testing:</strong> use viewport for Puppeteer screenshot clip dimensions (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5359"">#5359</a>) (<a href=""https://github.com/ionic-team/stencil/commit/c8798002aba05af0a4554351b6232ce714d9995b"">c879800</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5353"">#5353</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>dev-server:</strong> add &quot;ping&quot; route (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5414"">#5414</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b279858e2fc242d5990817f5a3fa4181e2d49604"">b279858</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to ~5.4.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5464"">#5464</a>) (<a href=""https://github.com/ionic-team/stencil/commit/0833dc4929d9048edce435b8c205917775faad52"">0833dc4</a>)</li>
</ul>
<h2>Thanks</h2>
<p> Thanks <a href=""https://github.com/yigityuce""><code>@yigityuce</code></a> for their contributions! </p>
<h2> v4.12.6 (2024-03-11)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>cli:</strong> move version logging earlier in CLI to allow <code>-v</code>, <code>--version</code> (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5425"">#5425</a>) (<a href=""https://github.com/ionic-team/stencil/commit/194b0fc0d9741d45efbe17f90572fbe09fc5ec62"">194b0fc</a>)</li>
<li><strong>compiler:</strong> fix generated import statement (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5419"">#5419</a>) (<a href=""https://github.com/ionic-team/stencil/commit/502da1bc3d1503bd82fbf0cccc312825a82772cf"">502da1b</a>)</li>
<li><strong>test:</strong> ensure screenshot dir is cleaned up (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5421"">#5421</a>) (<a href=""https://github.com/ionic-team/stencil/commit/15e7a4960bc845212563141b00798fdee07cbfbd"">15e7a49</a>)</li>
</ul>
<h2> v4.12.5 (2024-03-04)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>custom-elements:</strong> hydrate on client side (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5317"">#5317</a>) (<a href=""https://github.com/ionic-team/stencil/commit/d809658635280e115d67f1403dba946cce1bb01b"">d809658</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/3319"">#3319</a></li>
</ul>
<h2>Thanks</h2>
<p> andrew9994 for your contribution!</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/stencil/blob/main/CHANGELOG.md""><code>@stencil/core</code>'s changelog</a>.</em></p>
<blockquote>
<h1> <a href=""https://github.com/ionic-team/stencil/compare/v4.13.0...v4.14.0"">4.14.0</a> (2024-04-01)</h1>
<h3>Bug Fixes</h3>
<ul>
<li><strong>mock-doc:</strong> provide a local name (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5480"">#5480</a>) (<a href=""https://github.com/ionic-team/stencil/commit/2f67b3526c7160a0c9ac71727c401a438d282474"">2f67b35</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5342"">#5342</a></li>
<li><strong>mock-doc:</strong> resolve type issue for localName (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5595"">#5595</a>) (<a href=""https://github.com/ionic-team/stencil/commit/d91af87d4e309a2da3cb145165cf7fe3c79ac1e7"">d91af87</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5342"">#5342</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>testing:</strong> allow to set screenshot timeout option in Jest v28+ (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5537"">#5537</a>) (<a href=""https://github.com/ionic-team/stencil/commit/6df12b2a445ffe431f8412758f298a6e1c8fe3ac"">6df12b2</a>)</li>
<li><strong>testing:</strong> support deep piercing with Puppeteer (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5481"">#5481</a>) (<a href=""https://github.com/ionic-team/stencil/commit/13d5d4188ac0d3d8d002ce93c4ec7abdde5c8086"">13d5d41</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to v5.4.3 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5588"">#5588</a>) (<a href=""https://github.com/ionic-team/stencil/commit/9d489e42a60391d2eb88cb0f7827a9368de18140"">9d489e4</a>)</li>
</ul>
<h1> <a href=""https://github.com/ionic-team/stencil/compare/v4.12.6...v4.13.0"">4.13.0</a> (2024-03-18)</h1>
<h3>Bug Fixes</h3>
<ul>
<li><strong>compiler:</strong> allow to set custom root directory (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5446"">#5446</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b6b96175c5e6a7d3477ed5fc2d4ddfc17827dd63"">b6b9617</a>)</li>
<li><strong>compiler:</strong> don't validate references for <a href=""https://github.com/Prop""><code>@Prop</code></a>, <a href=""https://github.com/Method""><code>@Method</code></a> and <a href=""https://github.com/Event""><code>@Event</code></a> decorator (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5475"">#5475</a>) (<a href=""https://github.com/ionic-team/stencil/commit/3e45a823534a2e36ac51cbc701ecff074c7c842d"">3e45a82</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/1352"">#1352</a></li>
<li><strong>renderer:</strong> fix conditional rendering issue (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5365"">#5365</a>) (<a href=""https://github.com/ionic-team/stencil/commit/5aa886eb52efb7f361d53672698e947390c4f6f0"">5aa886e</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>renderer:</strong> fix missing slot ref callback handling (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5337"">#5337</a>) (<a href=""https://github.com/ionic-team/stencil/commit/41f877ec48200dee0483691b4e5e519073d392dd"">41f877e</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5335"">#5335</a></li>
<li><strong>runtime:</strong> remove <code>forceUpdate</code> in <code>appendChild</code> patch (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5437"">#5437</a>) (<a href=""https://github.com/ionic-team/stencil/commit/e03795b38e93dfc024425c11d08792a6f4b02bcb"">e03795b</a>)</li>
<li><strong>sys:</strong> fix expected types for <code>createNodeLogger</code> and <code>createNodeSys</code> (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5375"">#5375</a>) (<a href=""https://github.com/ionic-team/stencil/commit/7a70281bb41697c2fe9f992af571d5b7af242a79"">7a70281</a>)</li>
<li><strong>testing:</strong> use viewport for Puppeteer screenshot clip dimensions (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5359"">#5359</a>) (<a href=""https://github.com/ionic-team/stencil/commit/c8798002aba05af0a4554351b6232ce714d9995b"">c879800</a>), closes <a href=""https://redirect.github.com/ionic-team/stencil/issues/5353"">#5353</a></li>
</ul>
<h3>Features</h3>
<ul>
<li><strong>dev-server:</strong> add &quot;ping&quot; route (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5414"">#5414</a>) (<a href=""https://github.com/ionic-team/stencil/commit/b279858e2fc242d5990817f5a3fa4181e2d49604"">b279858</a>)</li>
<li><strong>typescript:</strong> Update dependency typescript to ~5.4.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5464"">#5464</a>) (<a href=""https://github.com/ionic-team/stencil/commit/0833dc4929d9048edce435b8c205917775faad52"">0833dc4</a>)</li>
</ul>
<h2> <a href=""https://github.com/ionic-team/stencil/compare/v4.12.5...v4.12.6"">4.12.6</a> (2024-03-11)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>cli:</strong> move version logging earlier in CLI to allow <code>-v</code>, <code>--version</code> (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5425"">#5425</a>) (<a href=""https://github.com/ionic-team/stencil/commit/194b0fc0d9741d45efbe17f90572fbe09fc5ec62"">194b0fc</a>)</li>
<li><strong>compiler:</strong> fix generated import statement (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5419"">#5419</a>) (<a href=""https://github.com/ionic-team/stencil/commit/502da1bc3d1503bd82fbf0cccc312825a82772cf"">502da1b</a>)</li>
<li><strong>test:</strong> ensure screenshot dir is cleaned up (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5421"">#5421</a>) (<a href=""https://github.com/ionic-team/stencil/commit/15e7a4960bc845212563141b00798fdee07cbfbd"">15e7a49</a>)</li>
</ul>
<h2> <a href=""https://github.com/ionic-team/stencil/compare/v4.12.4...v4.12.5"">4.12.5</a> (2024-03-04)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/stencil/commit/fd144e3149299c5b9ec8d90e2fa9b5cd37c38b3d""><code>fd144e3</code></a> Release v4.14.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5612"">#5612</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/d2ff0ea1969359777fda5b186382e9e03ab81fb0""><code>d2ff0ea</code></a> chore(deps): update dependency eslint-plugin-jsdoc to v48.2.2 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5606"">#5606</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/c2ecfabb8a797b87cb0163421dc427010bd1932f""><code>c2ecfab</code></a> chore(deps): update dependency glob to v10.3.12 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5607"">#5607</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/b7901fade54e639551bee3a7ecb4f930b6f3ac5b""><code>b7901fa</code></a> chore(deps): update dependency minimatch to v9.0.4 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5608"">#5608</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/211208cee1a0e800c223b633c0a95fa56a7d2446""><code>211208c</code></a> chore(deps): update dependency terser to v5.30.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5609"">#5609</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/227d26546d7413494403306321b8a877bf86ec1f""><code>227d265</code></a> chore(deps): update node.js to v20.12.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5610"">#5610</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/b1722d0b9c889dfe8c97ac453e8acbbbfe10b74a""><code>b1722d0</code></a> chore(deps): update typescript-eslint to v7.4.0 (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5611"">#5611</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/871f1ba9a5e9dea8e5b09f8f638fbbae7ff6de97""><code>871f1ba</code></a> test(wdio): make svg-attr test more robust (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5605"">#5605</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/f33c7bd2bbdf8decae696cc410886dc7ee869b0e""><code>f33c7bd</code></a> chore(wdio): expand wdio-related readme content (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5603"">#5603</a>)</li>
<li><a href=""https://github.com/ionic-team/stencil/commit/b62c28dbc275c8a9692b2427f9503d2eccff3adc""><code>b62c28d</code></a> chore(spelling): add better markdown spellcheck (<a href=""https://redirect.github.com/ionic-team/stencil/issues/5604"">#5604</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/stencil/compare/v4.10.0...v4.14.0"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=@stencil/core&package-manager=npm_and_yarn&previous-version=4.10.0&new-version=4.14.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
a3fb7e6abe9bb619a653850decd739728b1af225,Stefan M,2024-04-04 07:47:57+00:00,GitHub,2024-04-04 07:47:57+00:00,"[go] Added support for `1.22` and updated Go minor versions of `1.19`, `1.20` and `1.21` (#11156)

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Vedant <83997633+vedantmgoyal9@users.noreply.github.com>"
b9f6d765c0c8bbbad35f56cff00170b60abd1fd0,Jeff See,2024-04-04 05:50:04+00:00,GitHub,2024-04-04 05:50:04+00:00,"Move CONTRIBUTING into README and improve docs on running integration tests locally (#11373)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
c24d85f57465724bc358656dfc791e6bcc04fff5,Sean Massa,2024-04-04 05:09:36+00:00,GitHub,2024-04-04 05:09:36+00:00,disable eslint for a few files (#11378)
3c426499168ff5e6828f9e480691d249e918e38b,Vercel Release Bot,2024-04-03 16:35:02+00:00,GitHub,2024-04-03 16:35:02+00:00,"Version Packages (#11352)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.11.0

### Minor Changes

- Add `getOsRelease()` and `getProvidedRuntime()` functions
([#11370](https://github.com/vercel/vercel/pull/11370))

## @vercel/go@3.1.0

### Minor Changes

- Use `provided.al2023` runtime when using AL2023 build image
([#11370](https://github.com/vercel/vercel/pull/11370))

## vercel@33.6.3

### Patch Changes

- Handle `--repo` linked in `vc deploy --prebuilt`
([#11309](https://github.com/vercel/vercel/pull/11309))

- Revert ""[cli] extract `isZeroConfigBuild` into utility function
(#11316)"" ([#11350](https://github.com/vercel/vercel/pull/11350))

- Replace `inquirer` with `@inquirer/prompts`
([#11321](https://github.com/vercel/vercel/pull/11321))

- Updated dependencies
\[[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401),
[`346e665bb`](https://github.com/vercel/vercel/commit/346e665bb021e6034bc70c82ef336485622595fe),
[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401),
[`548afd371`](https://github.com/vercel/vercel/commit/548afd371aa7a9dd3a7f4c60f7f94a7084d8023e)]:
    -   @vercel/go@3.1.0
    -   @vercel/node@3.0.26
    -   @vercel/build-utils@7.11.0
    -   @vercel/static-build@2.4.6

## @vercel/client@13.1.9

### Patch Changes

- Handle `--repo` linked in `vc deploy --prebuilt`
([#11309](https://github.com/vercel/vercel/pull/11309))

- Updated dependencies
\[[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401)]:
    -   @vercel/build-utils@7.11.0

## @vercel/gatsby-plugin-vercel-builder@2.0.24

### Patch Changes

- Updated dependencies
\[[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401)]:
    -   @vercel/build-utils@7.11.0

## @vercel/node@3.0.26

### Patch Changes

- Fix issue with serverless function on docker
([#11226](https://github.com/vercel/vercel/pull/11226))

- Add import and require ts-node files for TypeScript in `vc dev`
([#11371](https://github.com/vercel/vercel/pull/11371))

- Updated dependencies
\[[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401)]:
    -   @vercel/build-utils@7.11.0

## @vercel/static-build@2.4.6

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.24

## @vercel-internals/types@1.0.29

### Patch Changes

- Updated dependencies
\[[`73b112b1f`](https://github.com/vercel/vercel/commit/73b112b1f74480e1bb941e1b754105fc7dace401)]:
    -   @vercel/build-utils@7.11.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c1891f64f4303c6d173bbed2fd8313e41962966a,Trek Glowacki,2024-04-03 14:59:24+00:00,GitHub,2024-04-03 14:59:24+00:00,"[tests] add ionic React fixture to dependabot (#11172)

add ionic React fixture to dependabot"
2fc46c0d47f990461364e623f65e8c648a43aa2c,Erika Rowland,2024-04-03 04:39:47+00:00,GitHub,2024-04-03 04:39:47+00:00,"[cli] Change condition to be clearer positive framing (#11317)

`status` here is guaranteed to either be `'linked'` or `'not_linked'` by this point in the code, switching the double negative to a positive condition makes it clearer."
73b112b1f74480e1bb941e1b754105fc7dace401,Nathan Rajlich,2024-04-03 03:30:06+00:00,GitHub,2024-04-03 03:30:06+00:00,"[build-utils] Add `getOsRelease()` and `getProvidedRuntime()` functions (#11370)

Adds two new helper functions that custom runtimes can utilize in order
to determine whether they should use `provided.al2` or `provided.al2023`
Lambda ""runtime"" value, based on the build environment.

The new `getProvidedRuntime()` helper function is being used in
`@vercel/go`, so that Go endpoints may be used when the `20.x` Node
Version project setting is used."
548afd371aa7a9dd3a7f4c60f7f94a7084d8023e,Nathan Rajlich,2024-04-03 02:14:15+00:00,GitHub,2024-04-03 02:14:15+00:00,"[node] Add import and require ts-node files for TypeScript in `vc dev` (#11371)

Fixes the case in `vc dev` where importing a `.ts` file from another `.ts` file was failing in `vc dev` when `type: ""module""` is not set in `package.json`.

Supersedes https://github.com/vercel/vercel/pull/11364."
d0877c1023631e3ae694ed592de717b190101392,Austin Merrick,2024-04-02 07:40:32+00:00,GitHub,2024-04-02 07:40:32+00:00,"[cli] Replace `inquirer` with `@inquirer/prompts` (#11321)

# Overview

Changing to `@inquirer/prompts` meant updating all existing usage of `inquirer.prompt`. This removed a lot of code since the `inquirer.prompt` function was extra verbose.

The user experience shouldn't have changed much besides different styling. `patch-inquirer` is incompatible with `@inquirer/prompts`. ~~We probably don't want to merge this until we have a new solution for styling.~~ The new default styling is preferred over our old styling.

There are lots of changes over many files, so I went back and organized the commit history. It will probably be easier to review this PR by commit.

## Tests

~~I had to change tests in ways that aren't great. Tests had a hard time recognizing output with escape codes in them, so I had to make the expected output more generic.~~ Using `strip-ansi` worked nicely to ignore styling changes in unit and integration tests.

I removed the unit test ""should list projects running on an soon-to-be-deprecated Node.js version"" because that test doing `jest.useFakeTimers().setSystemTime(new Date('2023-12-08'));` would make the ""should remove a project"" test fail. Really strange stuff! Couldn't think of a better solution than removing this, so looking for suggestions here."
326fe0f0e647a80ef504ca4035c6bc3c206f43d6,Trek Glowacki,2024-04-01 14:31:22+00:00,GitHub,2024-04-01 14:31:22+00:00,"[tests] Add Preact@10 to static build fixtures dependabot (#11306)

Add Preact@10 to static build fixtures dependabot"
346e665bb021e6034bc70c82ef336485622595fe,Devin345458,2024-03-30 04:01:25+00:00,GitHub,2024-03-30 04:01:25+00:00,"Fix issue with serverless function on docker (#11226)

Currently the server was binding to the IPV6 [::] catchall on a random
port. The undici request is then unable to reach it.

I only have a mac so I was only able to test this change on Docker for
mac. Would love if someone on windows/linux could validate the change
works for them as well

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
9a27ccbe6d98347a28bca87a751b529d59870e1f,Nathan Rajlich,2024-03-30 00:23:24+00:00,GitHub,2024-03-30 00:23:24+00:00,"[cli][client] Handle `--repo` linked in `vc deploy --prebuilt` (#11309)

`vc deploy --prebuilt` has not properly worked for projects linked with
`vc link --repo` ever since
https://github.com/vercel/vercel/issues/11077.

To fix, don't mutate `cwd` to be the project subdir (so that `cwd` is
always the monorepo root), and instead pass in a new property to
`@vercel/client` that represents the `.vercel/output` file path. A lot
of the code is just passing this new variable through the multiple
layers of indirection in CLI before it finally reaches `@vercel/client.

Fixes https://github.com/vercel/vercel/issues/11097."
3b6d96891bd50e24851b8db8958b67aaaa253c47,Erika Rowland,2024-03-29 20:57:47+00:00,GitHub,2024-03-29 20:57:47+00:00,Update CODEOWNERS (#11343)
07d8d11989157f8c22537f01c0f5dc643cef67a9,Nathan Rajlich,2024-03-29 20:53:51+00:00,GitHub,2024-03-29 20:53:51+00:00,"Revert ""[cli] extract `isZeroConfigBuild` into utility function (#11316)"" (#11350)

This reverts commit 78e2c012f94b626a1e09f1ec2af62720bc192c0a.

This commit causes a failing test which contains the `zeroConfig: true`
field. It should have not been merged in the first place due to the
failing test, but Kodiak erroneously merged it before the tests were
passing.

When there are `builds` configuration, the v10 create-deployment
endpoint is used instead of the latest v13 endpoint. `projectSettings`
is not allowed in the v10 endpoint, therefore we can not send the
`nodeVersion` when `builds` project exists. Instead, we should look into
moving away from the v10 endpoint so that we can be using the latest
version of the endpoint for all deployments."
8a16e8eb6531d354a4708a778345f3fb0262fc0e,Erika Rowland,2024-03-28 18:32:46+00:00,GitHub,2024-03-28 18:32:46+00:00,[cli] Add explicit vitest import to unit test for isZeroConfigBuild utility (#11341)
63e9de89323bd29b575938fbe18fde990e7365b8,dependabot[bot],2024-03-28 15:52:02+00:00,GitHub,2024-03-28 15:52:02+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/ionic-angular-v7 with 2 updates (#11289)

Bumps the core group in /packages/static-build/test/fixtures/ionic-angular-v7 with 2 updates: [@ionic/angular](https://github.com/ionic-team/ionic-framework) and [@ionic/core](https://github.com/ionic-team/ionic-framework).

Updates `@ionic/angular` from 7.6.2 to 7.8.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/angular</code>'s releases</a>.</em></p>
<blockquote>
<h2>v7.8.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2>v7.7.5</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<h2>v7.7.4</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.3...v7.7.4"">7.7.4</a> (2024-03-06)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>modal:</strong> ariaLabel and role are inherited when set via htmlAttributes (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29099"">#29099</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/de13633a182d963876434db773aa346833f956fd"">de13633</a>)</li>
</ul>
<h2>v7.7.3</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.2...v7.7.3"">7.7.3</a> (2024-02-21)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>label:</strong> do not grow when in end slot (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29036"">#29036</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/1fc4b76f5940b38fd89e19561d6b4738dfb8ae5d"">1fc4b76</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29033"">#29033</a></li>
<li><strong>overlays:</strong> focus is returned to last focus element when focusing toast (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28950"">#28950</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/2ed0ada9237b3f4dbf5959746ce2d1744936eebe"">2ed0ada</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28261"">#28261</a></li>
</ul>
<h2>v7.7.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.1...v7.7.2"">7.7.2</a> (2024-02-14)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>overlays:</strong> do not return focus if application has already moved focus manually (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28850"">#28850</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a016670a8a46e101d23235b17bc8a2081fb992eb"">a016670</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28849"">#28849</a></li>
<li><strong>overlays:</strong> ensure that only topmost overlay is announced by screen readers (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28997"">#28997</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ba4ba6161c1a6c67f7804b07f49c64ac9ad2b14c"">ba4ba61</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23472"">#23472</a></li>
<li><strong>popover:</strong> render arrow above backdrop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28986"">#28986</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0a8964d30c76218fe62f7f4aed4f81df7bb80cd0"">0a8964d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28985"">#28985</a></li>
</ul>
<h2>v7.7.1</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.0...v7.7.1"">7.7.1</a> (2024-02-07)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/angular</code>'s changelog</a>.</em></p>
<blockquote>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.3...v7.7.4"">7.7.4</a> (2024-03-06)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>modal:</strong> ariaLabel and role are inherited when set via htmlAttributes (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29099"">#29099</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/de13633a182d963876434db773aa346833f956fd"">de13633</a>)</li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.2...v7.7.3"">7.7.3</a> (2024-02-21)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>label:</strong> do not grow when in end slot (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29036"">#29036</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/1fc4b76f5940b38fd89e19561d6b4738dfb8ae5d"">1fc4b76</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29033"">#29033</a></li>
<li><strong>overlays:</strong> focus is returned to last focus element when focusing toast (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28950"">#28950</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/2ed0ada9237b3f4dbf5959746ce2d1744936eebe"">2ed0ada</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28261"">#28261</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.1...v7.7.2"">7.7.2</a> (2024-02-14)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/400013d6cbd05b1e84bef4352612a9da369971b7""><code>400013d</code></a> v7.8.0</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/6dfdc2c95f2ba54e545a13d2ca58451835f99ff7""><code>6dfdc2c</code></a> merge feature-7.8 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29152"">#29152</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/01ae835ad52ff49e9457cb5fc8dea5fea2e76f16""><code>01ae835</code></a> chore: sync with main</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/636531f5c2c259244aaa7b198e7aee0e948b492f""><code>636531f</code></a> merge release-7.7.5 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29151"">#29151</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ddcda78ac9f345baddc77ac1860a73a20e510a96""><code>ddcda78</code></a> chore(): update package lock files</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/82e90f28b4c05ee8434e45fb860d073c8215bfa0""><code>82e90f2</code></a> v7.7.5</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/487ffca11e01100517e030b401367f46b0d8cda4""><code>487ffca</code></a> chore: fix typo with close watcher const (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29146"">#29146</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba""><code>c0f5e5e</code></a> fix(overlay): do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ac0142322a6ff6363608e49b027676ba838bdbdf""><code>ac01423</code></a> chore: sync with main (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29142"">#29142</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/8f0ea0dd5893ae0ed964d5dcda9f263c6303f105""><code>8f0ea0d</code></a> chore: sync with main</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v7.6.2...v7.8.0"">compare view</a></li>
</ul>
</details>
<br />

Updates `@ionic/core` from 7.6.2 to 7.8.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/releases""><code>@ionic/core</code>'s releases</a>.</em></p>
<blockquote>
<h2>v7.8.0</h2>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2>v7.7.5</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<h2>v7.7.4</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.3...v7.7.4"">7.7.4</a> (2024-03-06)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>modal:</strong> ariaLabel and role are inherited when set via htmlAttributes (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29099"">#29099</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/de13633a182d963876434db773aa346833f956fd"">de13633</a>)</li>
</ul>
<h2>v7.7.3</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.2...v7.7.3"">7.7.3</a> (2024-02-21)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>label:</strong> do not grow when in end slot (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29036"">#29036</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/1fc4b76f5940b38fd89e19561d6b4738dfb8ae5d"">1fc4b76</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29033"">#29033</a></li>
<li><strong>overlays:</strong> focus is returned to last focus element when focusing toast (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28950"">#28950</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/2ed0ada9237b3f4dbf5959746ce2d1744936eebe"">2ed0ada</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28261"">#28261</a></li>
</ul>
<h2>v7.7.2</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.1...v7.7.2"">7.7.2</a> (2024-02-14)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>overlays:</strong> do not return focus if application has already moved focus manually (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28850"">#28850</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a016670a8a46e101d23235b17bc8a2081fb992eb"">a016670</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28849"">#28849</a></li>
<li><strong>overlays:</strong> ensure that only topmost overlay is announced by screen readers (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28997"">#28997</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/ba4ba6161c1a6c67f7804b07f49c64ac9ad2b14c"">ba4ba61</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/23472"">#23472</a></li>
<li><strong>popover:</strong> render arrow above backdrop (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28986"">#28986</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/0a8964d30c76218fe62f7f4aed4f81df7bb80cd0"">0a8964d</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28985"">#28985</a></li>
</ul>
<h2>v7.7.1</h2>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.0...v7.7.1"">7.7.1</a> (2024-02-07)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/ionic-team/ionic-framework/blob/main/CHANGELOG.md""><code>@ionic/core</code>'s changelog</a>.</em></p>
<blockquote>
<h1><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.5...v7.8.0"">7.8.0</a> (2024-03-13)</h1>
<h3>Features</h3>
<ul>
<li><strong>datetime:</strong> formatOptions property for Datetime (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29065"">#29065</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/7cdbc1b5ad004e17a7c51363653e0e67f50e6860"">7cdbc1b</a>)</li>
<li><strong>searchbar:</strong> autocapitalize, dir, lang, maxlength, and minlength are inherited to native input (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29098"">#29098</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/a0a77f799df0732d9f7182f15866035a3ce5a1eb"">a0a77f7</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/27606"">#27606</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.4...v7.7.5"">7.7.5</a> (2024-03-13)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>angular:</strong> add ionNavWillChange and ionNavDidChange types for nav (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29122"">#29122</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/85b9d5c35f626ffc273d220549b0126ddc1f7e4b"">85b9d5c</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29114"">#29114</a></li>
<li><strong>checkbox:</strong> set aria-checked of indeterminate checkbox to 'mixed' (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29115"">#29115</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/b2d636f14dcd33313f6604cfd4a64b542c831b34"">b2d636f</a>)</li>
<li><strong>overlay:</strong> do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba"">c0f5e5e</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29139"">#29139</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.3...v7.7.4"">7.7.4</a> (2024-03-06)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>modal:</strong> ariaLabel and role are inherited when set via htmlAttributes (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29099"">#29099</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/de13633a182d963876434db773aa346833f956fd"">de13633</a>)</li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.2...v7.7.3"">7.7.3</a> (2024-02-21)</h2>
<h3>Bug Fixes</h3>
<ul>
<li><strong>label:</strong> do not grow when in end slot (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29036"">#29036</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/1fc4b76f5940b38fd89e19561d6b4738dfb8ae5d"">1fc4b76</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29033"">#29033</a></li>
<li><strong>overlays:</strong> focus is returned to last focus element when focusing toast (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28950"">#28950</a>) (<a href=""https://github.com/ionic-team/ionic-framework/commit/2ed0ada9237b3f4dbf5959746ce2d1744936eebe"">2ed0ada</a>), closes <a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/28261"">#28261</a></li>
</ul>
<h2><a href=""https://github.com/ionic-team/ionic-framework/compare/v7.7.1...v7.7.2"">7.7.2</a> (2024-02-14)</h2>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/400013d6cbd05b1e84bef4352612a9da369971b7""><code>400013d</code></a> v7.8.0</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/6dfdc2c95f2ba54e545a13d2ca58451835f99ff7""><code>6dfdc2c</code></a> merge feature-7.8 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29152"">#29152</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/01ae835ad52ff49e9457cb5fc8dea5fea2e76f16""><code>01ae835</code></a> chore: sync with main</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/636531f5c2c259244aaa7b198e7aee0e948b492f""><code>636531f</code></a> merge release-7.7.5 (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29151"">#29151</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ddcda78ac9f345baddc77ac1860a73a20e510a96""><code>ddcda78</code></a> chore(): update package lock files</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/82e90f28b4c05ee8434e45fb860d073c8215bfa0""><code>82e90f2</code></a> v7.7.5</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/487ffca11e01100517e030b401367f46b0d8cda4""><code>487ffca</code></a> chore: fix typo with close watcher const (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29146"">#29146</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/c0f5e5ebc0c9d45d71e10e09903b00b3ba8e6bba""><code>c0f5e5e</code></a> fix(overlay): do not hide overlay if toast is presented (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29140"">#29140</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/ac0142322a6ff6363608e49b027676ba838bdbdf""><code>ac01423</code></a> chore: sync with main (<a href=""https://redirect.github.com/ionic-team/ionic-framework/issues/29142"">#29142</a>)</li>
<li><a href=""https://github.com/ionic-team/ionic-framework/commit/8f0ea0dd5893ae0ed964d5dcda9f263c6303f105""><code>8f0ea0d</code></a> chore: sync with main</li>
<li>Additional commits viewable in <a href=""https://github.com/ionic-team/ionic-framework/compare/v7.6.2...v7.8.0"">compare view</a></li>
</ul>
</details>
<br />


Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
c6d588201b29612e1a8c5a36a3741a9ff63be28b,Vercel Release Bot,2024-03-28 13:43:15+00:00,GitHub,2024-03-28 13:43:15+00:00,"Version Packages (#11322)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.10.0

### Minor Changes

- Allow environment variables to be specified for `EdgeFunction`
([#11029](https://github.com/vercel/vercel/pull/11029))

## vercel@33.6.2

### Patch Changes

- Added sunset warning to secrets command.
([#11333](https://github.com/vercel/vercel/pull/11333))

- Swap jest for vitest in CLI unit tests
([#11302](https://github.com/vercel/vercel/pull/11302))

- Updated dependencies
\[[`988f7b75a`](https://github.com/vercel/vercel/commit/988f7b75a27387e84fce541b844f984d2c151980),
[`1825b58df`](https://github.com/vercel/vercel/commit/1825b58df8d783e79f0addf262618f422246f4b3)]:
    -   @vercel/remix-builder@2.1.5
    -   @vercel/build-utils@7.10.0
    -   @vercel/node@3.0.25
    -   @vercel/static-build@2.4.5

## @vercel/client@13.1.8

### Patch Changes

- Updated dependencies
\[[`1825b58df`](https://github.com/vercel/vercel/commit/1825b58df8d783e79f0addf262618f422246f4b3)]:
    -   @vercel/build-utils@7.10.0

## @vercel/frameworks@3.0.1

### Patch Changes

- Swap jest for vitest in CLI unit tests
([#11302](https://github.com/vercel/vercel/pull/11302))

## @vercel/fs-detectors@5.2.2

### Patch Changes

- Updated dependencies
\[[`9ed967034`](https://github.com/vercel/vercel/commit/9ed967034d61b6a5b1e4bb32449c9193c50615c0)]:
    -   @vercel/frameworks@3.0.1

## @vercel/gatsby-plugin-vercel-builder@2.0.23

### Patch Changes

- Updated dependencies
\[[`1825b58df`](https://github.com/vercel/vercel/commit/1825b58df8d783e79f0addf262618f422246f4b3)]:
    -   @vercel/build-utils@7.10.0

## @vercel/node@3.0.25

### Patch Changes

- Updated dependencies
\[[`1825b58df`](https://github.com/vercel/vercel/commit/1825b58df8d783e79f0addf262618f422246f4b3)]:
    -   @vercel/build-utils@7.10.0

## @vercel/remix-builder@2.1.5

### Patch Changes

- Add `mjs` and `mts` extensions to vite detection
([#11307](https://github.com/vercel/vercel/pull/11307))

## @vercel/static-build@2.4.5

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.23

## @vercel-internals/types@1.0.28

### Patch Changes

- Updated dependencies
\[[`1825b58df`](https://github.com/vercel/vercel/commit/1825b58df8d783e79f0addf262618f422246f4b3)]:
    -   @vercel/build-utils@7.10.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0b1ff4bf6253da78b34b0aaeb12137b5f8a120ec,Ethan Arrowood,2024-03-28 08:20:18+00:00,GitHub,2024-03-28 08:20:18+00:00,"[next] add x-forwarded-port test (#11254)

This test reproduces the issue described in https://github.com/vercel/next.js/issues/61133 . Unfortunately, I can only reproduce this issue when deploying to Vercel. Any local server / test results in the header being defined. 

Related: https://github.com/vercel/next.js/issues/61133"
14102ddf564f601410f5db82e421475688c1e9fe,dependabot[bot],2024-03-28 08:17:04+00:00,GitHub,2024-03-28 08:17:04+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/astro-v4 with 1 update (#11335)

Bumps the core group in /packages/static-build/test/fixtures/astro-v4 with 1 update: [astro](https://github.com/withastro/astro/tree/HEAD/packages/astro).

Updates `astro` from 4.2.0 to 4.5.10
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/releases"">astro's releases</a>.</em></p>
<blockquote>
<h2>astro@4.5.10</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10549"">#10549</a> <a href=""https://github.com/withastro/astro/commit/54c2f9707f5d038630143f769e3075c698474654""><code>54c2f9707f5d038630143f769e3075c698474654</code></a> Thanks <a href=""https://github.com/admirsaheta""><code>@admirsaheta</code></a>! - Updates the <code>HTMLAttributes</code> type exported from <code>astro</code> to allow data attributes</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10562"">#10562</a> <a href=""https://github.com/withastro/astro/commit/348c1ca1323d0516c2dcf8e963343cd12cb5407f""><code>348c1ca1323d0516c2dcf8e963343cd12cb5407f</code></a> Thanks <a href=""https://github.com/apetta""><code>@apetta</code></a>! - Fixes minor type issues inside the built-in components of Astro</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10550"">#10550</a> <a href=""https://github.com/withastro/astro/commit/34fa8e131b85531e6629390307108ffc4adb7ed1""><code>34fa8e131b85531e6629390307108ffc4adb7ed1</code></a> Thanks <a href=""https://github.com/Skn0tt""><code>@Skn0tt</code></a>! - Fixes bug where server builds would include unneeded assets in SSR Function, potentially leading to upload errors on Vercel, Netlify because of size limits</p>
</li>
<li>
<p>Updated dependencies [<a href=""https://github.com/withastro/astro/commit/c585528f446ccca3d4c643f4af5d550b93c18902""><code>c585528f446ccca3d4c643f4af5d550b93c18902</code></a>]:</p>
<ul>
<li><code>@astrojs/markdown-remark</code><a href=""https://github.com/4""><code>@4</code></a>.3.2</li>
</ul>
</li>
</ul>
<h2>astro@4.5.9</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10532"">#10532</a> <a href=""https://github.com/withastro/astro/commit/8306ce1ff7b71a2a0d7908336c9be462a54d395a""><code>8306ce1ff7b71a2a0d7908336c9be462a54d395a</code></a> Thanks <a href=""https://github.com/martrapp""><code>@martrapp</code></a>! - Fixes a style issue of <code>client:only</code> components in DEV mode during view transitions.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10473"">#10473</a> <a href=""https://github.com/withastro/astro/commit/627e47d67af4846cea2acf26a96b4124001b26fc""><code>627e47d67af4846cea2acf26a96b4124001b26fc</code></a> Thanks <a href=""https://github.com/bluwy""><code>@bluwy</code></a>! - Fixes and improves performance when rendering Astro JSX</p>
</li>
</ul>
<h2>astro@4.5.8</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10504"">#10504</a> <a href=""https://github.com/withastro/astro/commit/8e4e554cc211e59c329c0a5d110c839c886ff120""><code>8e4e554cc211e59c329c0a5d110c839c886ff120</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Update Babel version to fix regression in Babel's <code>7.24.2</code>.</p>
</li>
<li>
<p>Updated dependencies [<a href=""https://github.com/withastro/astro/commit/19e42c368184013fc30d1e46753b9e9383bb2bdf""><code>19e42c368184013fc30d1e46753b9e9383bb2bdf</code></a>]:</p>
<ul>
<li><code>@astrojs/markdown-remark</code><a href=""https://github.com/4""><code>@4</code></a>.3.1</li>
</ul>
</li>
</ul>
<h2>astro@4.5.7</h2>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/withastro/astro/pull/10493"">#10493</a> <a href=""https://github.com/withastro/astro/commit/e4a6462751725878bfe47632eeafa6854cad5bf2""><code>e4a6462751725878bfe47632eeafa6854cad5bf2</code></a> Thanks <a href=""https://github.com/firefoxic""><code>@firefoxic</code></a>! - <code>&lt;link&gt;</code> tags created by astro for optimized stylesheets now do not include the closing forward slash. This slash is optional for void elements such as link, but made some html validation fail.</li>
</ul>
<h2>astro@4.5.6</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10455"">#10455</a> <a href=""https://github.com/withastro/astro/commit/c12666166db724915e42e37a048483c99f88e6d9""><code>c12666166db724915e42e37a048483c99f88e6d9</code></a> Thanks <a href=""https://github.com/lilnasy""><code>@lilnasy</code></a>! - Adds a helpful error message that will be shown when an endpoint does not return a <code>Response</code>.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10426"">#10426</a> <a href=""https://github.com/withastro/astro/commit/6a9a35ee15069541c3144012385366a3c689240a""><code>6a9a35ee15069541c3144012385366a3c689240a</code></a> Thanks <a href=""https://github.com/markgaze""><code>@markgaze</code></a>! - Fixes an issue with generating JSON schemas when the schema is a function</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10448"">#10448</a> <a href=""https://github.com/withastro/astro/commit/fcece3658697248ab58f77b3d4a8b14d362f3c47""><code>fcece3658697248ab58f77b3d4a8b14d362f3c47</code></a> Thanks <a href=""https://github.com/lilnasy""><code>@lilnasy</code></a>! - Fixes an issue where multiple rendering errors resulted in a crash of the SSR app server.</p>
</li>
</ul>
<h2>astro@4.5.5</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10379"">#10379</a> <a href=""https://github.com/withastro/astro/commit/3776ecf0aa9e08a992d3ae76e90682fd04093721""><code>3776ecf0aa9e08a992d3ae76e90682fd04093721</code></a> Thanks <a href=""https://github.com/1574242600""><code>@1574242600</code></a>! - Fixes a routing issue with partially truncated dynamic segments.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10442"">#10442</a> <a href=""https://github.com/withastro/astro/commit/f8e0ad3c52a37b8a2175fe2f5ff2bd0cd738f499""><code>f8e0ad3c52a37b8a2175fe2f5ff2bd0cd738f499</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Fixes small rendering issues with the dev toolbar in certain contexts</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10438"">#10438</a> <a href=""https://github.com/withastro/astro/commit/5b48cc0fc8383b0659a595afd3a6ee28b28779c3""><code>5b48cc0fc8383b0659a595afd3a6ee28b28779c3</code></a> Thanks <a href=""https://github.com/bholmesdev""><code>@bholmesdev</code></a>! - Generate Astro DB types when running <code>astro sync</code>.</p>
</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md"">astro's changelog</a>.</em></p>
<blockquote>
<h2>4.5.10</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10549"">#10549</a> <a href=""https://github.com/withastro/astro/commit/54c2f9707f5d038630143f769e3075c698474654""><code>54c2f9707f5d038630143f769e3075c698474654</code></a> Thanks <a href=""https://github.com/admirsaheta""><code>@admirsaheta</code></a>! - Updates the <code>HTMLAttributes</code> type exported from <code>astro</code> to allow data attributes</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10562"">#10562</a> <a href=""https://github.com/withastro/astro/commit/348c1ca1323d0516c2dcf8e963343cd12cb5407f""><code>348c1ca1323d0516c2dcf8e963343cd12cb5407f</code></a> Thanks <a href=""https://github.com/apetta""><code>@apetta</code></a>! - Fixes minor type issues inside the built-in components of Astro</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10550"">#10550</a> <a href=""https://github.com/withastro/astro/commit/34fa8e131b85531e6629390307108ffc4adb7ed1""><code>34fa8e131b85531e6629390307108ffc4adb7ed1</code></a> Thanks <a href=""https://github.com/Skn0tt""><code>@Skn0tt</code></a>! - Fixes bug where server builds would include unneeded assets in SSR Function, potentially leading to upload errors on Vercel, Netlify because of size limits</p>
</li>
<li>
<p>Updated dependencies [<a href=""https://github.com/withastro/astro/commit/c585528f446ccca3d4c643f4af5d550b93c18902""><code>c585528f446ccca3d4c643f4af5d550b93c18902</code></a>]:</p>
<ul>
<li><code>@astrojs/markdown-remark</code><a href=""https://github.com/4""><code>@4</code></a>.3.2</li>
</ul>
</li>
</ul>
<h2>4.5.9</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10532"">#10532</a> <a href=""https://github.com/withastro/astro/commit/8306ce1ff7b71a2a0d7908336c9be462a54d395a""><code>8306ce1ff7b71a2a0d7908336c9be462a54d395a</code></a> Thanks <a href=""https://github.com/martrapp""><code>@martrapp</code></a>! - Fixes a style issue of <code>client:only</code> components in DEV mode during view transitions.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10473"">#10473</a> <a href=""https://github.com/withastro/astro/commit/627e47d67af4846cea2acf26a96b4124001b26fc""><code>627e47d67af4846cea2acf26a96b4124001b26fc</code></a> Thanks <a href=""https://github.com/bluwy""><code>@bluwy</code></a>! - Fixes and improves performance when rendering Astro JSX</p>
</li>
</ul>
<h2>4.5.8</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10504"">#10504</a> <a href=""https://github.com/withastro/astro/commit/8e4e554cc211e59c329c0a5d110c839c886ff120""><code>8e4e554cc211e59c329c0a5d110c839c886ff120</code></a> Thanks <a href=""https://github.com/Princesseuh""><code>@Princesseuh</code></a>! - Update Babel version to fix regression in Babel's <code>7.24.2</code>.</p>
</li>
<li>
<p>Updated dependencies [<a href=""https://github.com/withastro/astro/commit/19e42c368184013fc30d1e46753b9e9383bb2bdf""><code>19e42c368184013fc30d1e46753b9e9383bb2bdf</code></a>]:</p>
<ul>
<li><code>@astrojs/markdown-remark</code><a href=""https://github.com/4""><code>@4</code></a>.3.1</li>
</ul>
</li>
</ul>
<h2>4.5.7</h2>
<h3>Patch Changes</h3>
<ul>
<li><a href=""https://redirect.github.com/withastro/astro/pull/10493"">#10493</a> <a href=""https://github.com/withastro/astro/commit/e4a6462751725878bfe47632eeafa6854cad5bf2""><code>e4a6462751725878bfe47632eeafa6854cad5bf2</code></a> Thanks <a href=""https://github.com/firefoxic""><code>@firefoxic</code></a>! - <code>&lt;link&gt;</code> tags created by astro for optimized stylesheets now do not include the closing forward slash. This slash is optional for void elements such as link, but made some html validation fail.</li>
</ul>
<h2>4.5.6</h2>
<h3>Patch Changes</h3>
<ul>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10455"">#10455</a> <a href=""https://github.com/withastro/astro/commit/c12666166db724915e42e37a048483c99f88e6d9""><code>c12666166db724915e42e37a048483c99f88e6d9</code></a> Thanks <a href=""https://github.com/lilnasy""><code>@lilnasy</code></a>! - Adds a helpful error message that will be shown when an endpoint does not return a <code>Response</code>.</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10426"">#10426</a> <a href=""https://github.com/withastro/astro/commit/6a9a35ee15069541c3144012385366a3c689240a""><code>6a9a35ee15069541c3144012385366a3c689240a</code></a> Thanks <a href=""https://github.com/markgaze""><code>@markgaze</code></a>! - Fixes an issue with generating JSON schemas when the schema is a function</p>
</li>
<li>
<p><a href=""https://redirect.github.com/withastro/astro/pull/10448"">#10448</a> <a href=""https://github.com/withastro/astro/commit/fcece3658697248ab58f77b3d4a8b14d362f3c47""><code>fcece3658697248ab58f77b3d4a8b14d362f3c47</code></a> Thanks <a href=""https://github.com/lilnasy""><code>@lilnasy</code></a>! - Fixes an issue where multiple rendering errors resulted in a crash of the SSR app server.</p>
</li>
</ul>
<h2>4.5.5</h2>
<h3>Patch Changes</h3>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/withastro/astro/commit/bb7707e1715fc3f496e4c3f07834221c8da62ff6""><code>bb7707e</code></a> [ci] release (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10556"">#10556</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/348c1ca1323d0516c2dcf8e963343cd12cb5407f""><code>348c1ca</code></a> Patch for Astro VS Code Plugin type errors (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10562"">#10562</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/51a4ea5f723688b4c4745b3e9643d370a48d972d""><code>51a4ea5</code></a> fix(types): Fixes HTMLAttribute extend to allow everything (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10561"">#10561</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/34fa8e131b85531e6629390307108ffc4adb7ed1""><code>34fa8e1</code></a> fix: ensure outDir doesn't lead to bundlers bloating Lambda size (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10550"">#10550</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/54c2f9707f5d038630143f769e3075c698474654""><code>54c2f97</code></a> Fix: Type error on <code>\&lt;Image /&gt;</code> component when strict TypeScript rules are use...</li>
<li><a href=""https://github.com/withastro/astro/commit/1cd2a740221ee14267f2889c4eb200bbcecb08aa""><code>1cd2a74</code></a> [ci] release (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10522"">#10522</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/8306ce1ff7b71a2a0d7908336c9be462a54d395a""><code>8306ce1</code></a> Fixes a style issue of <code>client:only</code> components in DEV mode during view trans...</li>
<li><a href=""https://github.com/withastro/astro/commit/8cac744746a62903dbaa345a6e3cb0e13c6ff4d7""><code>8cac744</code></a> Avoid generators in render head API (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10528"">#10528</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/ca5455af3d6991d3402518a1744dc583c8a983af""><code>ca5455a</code></a> Avoid generators when crawling module graph (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10529"">#10529</a>)</li>
<li><a href=""https://github.com/withastro/astro/commit/627e47d67af4846cea2acf26a96b4124001b26fc""><code>627e47d</code></a> Improve Astro JSX rendering (<a href=""https://github.com/withastro/astro/tree/HEAD/packages/astro/issues/10473"">#10473</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/withastro/astro/commits/astro@4.5.10/packages/astro"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=astro&package-manager=npm_and_yarn&previous-version=4.2.0&new-version=4.5.10)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency
- `@dependabot ignore <dependency name> major version` will close this group update PR and stop Dependabot creating any more for the specific dependency's major version (unless you unignore this specific dependency's major version or upgrade to it yourself)
- `@dependabot ignore <dependency name> minor version` will close this group update PR and stop Dependabot creating any more for the specific dependency's minor version (unless you unignore this specific dependency's minor version or upgrade to it yourself)
- `@dependabot ignore <dependency name>` will close this group update PR and stop Dependabot creating any more for the specific dependency (unless you unignore this specific dependency or upgrade to it yourself)
- `@dependabot unignore <dependency name>` will remove all of the ignore conditions of the specified dependency
- `@dependabot unignore <dependency name> <ignore condition>` will remove the ignore condition of the specified dependency and ignore conditions


</details>"
49f88975b91317517e62f9ca344a766f14409bc9,Marc Greenstock,2024-03-28 08:13:50+00:00,GitHub,2024-03-28 08:13:50+00:00,"IAM 1720 Added sunset warning to the secrets command (#11333)

This PR adds a warning to the secrets command that the command will be sunset on 1st May."
13f3db06a80c90fb9396fe1b883c24adcd3c95bc,Vercel Release Bot,2024-03-28 08:10:25+00:00,GitHub,2024-03-28 08:10:25+00:00,"[tests] Upgrade Turbo to version 1.13.0 (#11325)

This auto-generated PR updates Turbo to version 1.13.0"
78e2c012f94b626a1e09f1ec2af62720bc192c0a,Erika Rowland,2024-03-28 08:06:10+00:00,GitHub,2024-03-28 08:06:10+00:00,"[cli] extract `isZeroConfigBuild` into utility function (#11316)

An additional check was added to make sure that `projectSettings.nodeVersion` is sent when builds property is defined in `vercel.json`"
f707f13821e2e359ffaf52d6d890484f4ceb6c60,kaifulee,2024-03-28 08:03:01+00:00,GitHub,2024-03-28 08:03:01+00:00,chore: remove repetitive words (#11284)
9ed967034d61b6a5b1e4bb32449c9193c50615c0,Jeff See,2024-03-28 00:33:27+00:00,GitHub,2024-03-28 00:33:27+00:00,[cli] Switch unit tests from `jest` to `vitest` (#11302)
1825b58df8d783e79f0addf262618f422246f4b3,Nathan Rajlich,2024-03-27 21:36:29+00:00,GitHub,2024-03-27 21:36:29+00:00,[build-utils] Allow environment variables to be specified for `EdgeFunction` (#11029)
c82a55c4609a2645a57c228db464f958245f3c70,Nathan Rajlich,2024-03-27 19:19:30+00:00,GitHub,2024-03-27 19:19:30+00:00,"[tests] Use AL2 build container for relevant e2e tests (#11329)

* Forces the AL2 build container image for fixtures that depend on it,
via `engines.node` in package.json for most cases.
* The `testDeployment()` function was updated to send
`projectSettings.nodeVersion` in the POST body, to mimic the behavior in
CLI.
* For Go, Ruby, and Python tests, the `projectSettings.nodeVersion`
property is set ""globally"" in the Jest setup file, so that individual
fixtures didn't need to be adjusted."
6487d091df55a1e184de6c63a6a89dbdc18946b8,Trek Glowacki,2024-03-25 20:57:38+00:00,GitHub,2024-03-25 20:57:38+00:00,"[tests] add stencil@4 fixtures to dependabot (#11167)

add stencil@4 fixtures to dependabot"
705453202e4f371867e8c5bf3949767fe2fe220b,Felix Haus,2024-03-25 10:15:35+00:00,GitHub,2024-03-25 10:15:35+00:00,"[examples] Enforce node18 on Python and Ruby examples (#11319)

We have to enforce the node version on some examples to make sure they
are not auto upgraded in the future before we support their runtime.

See https://vercel.com/docs/deployments/build-image"
988f7b75a27387e84fce541b844f984d2c151980,Fatih Altinok,2024-03-22 21:07:13+00:00,GitHub,2024-03-22 21:07:13+00:00,"[remix] Add `mjs` and `mts` extensions to vite detection (#11307)

My project was being incorrectly detected as not vite, thus it was failing in runtime. My vite config is `vite.config.mts` so this PR fixes detection logic to include `mjs` and `mts` extensions.

The fix can be generalized if needed."
7a28972897c031dcc247d3b7fae88ed1f1deaaaf,Vercel Release Bot,2024-03-20 17:59:44+00:00,GitHub,2024-03-20 17:59:44+00:00,"[examples][tests] Upgrade Next.js to version 14.1.4 (#11304)

This auto-generated PR updates 7 packages to Next.js version 14.1.4"
3a05469454b7b4da19875fd6282c2b6dcd2d89f6,Jeff See,2024-03-19 22:07:29+00:00,GitHub,2024-03-19 22:07:29+00:00,Update CODEOWNERS (#11295)
f1c67d05e343d29dce0a23661627039abcb4a46f,Trek Glowacki,2024-03-18 17:28:59+00:00,GitHub,2024-03-18 17:28:59+00:00,"[tests] Add dependabot for Nuxt (#11291)

Add dependabot for Nuxt"
6f46b1fc7019333c35261d0515a975ddff7596aa,Austin Merrick,2024-03-16 00:31:26+00:00,GitHub,2024-03-16 00:31:26+00:00,"[cli][tests] Fix `getUpdateCommand` for local dev (#11276)

This unit test fails on my machine:
```
Expected: ""pnpm i vercel@latest""
Received: ""pnpm i -g vercel@latest""
```

This change allows the test to succeed on machines that need the `-g` flag."
34e961e1c6b756aedbf46cb8949edb70aea67abe,Trek Glowacki,2024-03-15 23:54:05+00:00,GitHub,2024-03-15 23:54:05+00:00,"[tests] Add ionic-angular@7 fixtures to dependabot (#11171)

Add ionic-angular@7 fixtures to dependabot"
75346d45cc7b9e27511efadd44f761831e945a4d,Nathan Rajlich,2024-03-15 23:47:17+00:00,GitHub,2024-03-15 23:47:17+00:00,"[remix] Add SPA mode e2e tests (#11257)

Adds a couple e2e tests for [Remix SPA](https://remix.run/docs/en/main/future/spa-mode) mode (both with and without using the Vercel Preset)."
f9b4fae51b4da13e6f0501f6b2209ca83d9796da,Karl Pablo,2024-03-15 19:05:54+00:00,GitHub,2024-03-15 19:05:54+00:00,"Updated port number of localhost in README.md (#11287)

With Remix's migration to Vite as its bundler, the default localhost port has changed from 3000 to 5173."
8619992defd42cbc49519633f3f285d3d61fe59c,Vercel Release Bot,2024-03-15 15:21:07+00:00,GitHub,2024-03-15 15:21:07+00:00,"Version Packages (#11275)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.9.1

### Patch Changes

- Export `getSupportedNodeVersion`
([#11277](https://github.com/vercel/vercel/pull/11277))

## vercel@33.6.1

### Patch Changes

- Don't send `projectSettings.nodeVersion` for unsupported versions
([#11277](https://github.com/vercel/vercel/pull/11277))

- Updated dependencies
\[[`4bca0c6d0`](https://github.com/vercel/vercel/commit/4bca0c6d0bc25052b95bd02b12a0b891c86c4b49),
[`a67ad4b5a`](https://github.com/vercel/vercel/commit/a67ad4b5a130bf0e56e18111b3f9ddad69cec0e1),
[`11218a179`](https://github.com/vercel/vercel/commit/11218a179870a5420c5a6ff720cd4aec4f7e1c5e),
[`64b97bf4b`](https://github.com/vercel/vercel/commit/64b97bf4b5203ecf9a95f63ce26a5c3360208966)]:
    -   @vercel/next@4.1.6
    -   @vercel/remix-builder@2.1.4
    -   @vercel/build-utils@7.9.1
    -   @vercel/static-build@2.4.4
    -   @vercel/node@3.0.24

## @vercel/client@13.1.7

### Patch Changes

- Updated dependencies
\[[`11218a179`](https://github.com/vercel/vercel/commit/11218a179870a5420c5a6ff720cd4aec4f7e1c5e)]:
    -   @vercel/build-utils@7.9.1

## @vercel/gatsby-plugin-vercel-builder@2.0.22

### Patch Changes

- Updated dependencies
\[[`11218a179`](https://github.com/vercel/vercel/commit/11218a179870a5420c5a6ff720cd4aec4f7e1c5e)]:
    -   @vercel/build-utils@7.9.1

## @vercel/next@4.1.6

### Patch Changes

- Ensure that static PPR pages have static streaming lambda paths.
([#11259](https://github.com/vercel/vercel/pull/11259))

## @vercel/node@3.0.24

### Patch Changes

- Updated dependencies
\[[`11218a179`](https://github.com/vercel/vercel/commit/11218a179870a5420c5a6ff720cd4aec4f7e1c5e)]:
    -   @vercel/build-utils@7.9.1

## @vercel/remix-builder@2.1.4

### Patch Changes

- Disable `prepareCache()` npm install for Remix + Vite
([#11281](https://github.com/vercel/vercel/pull/11281))

## @vercel/static-build@2.4.4

### Patch Changes

- [framework-fixtures]&#x3A; Bump the core group in
/packages/static-build/test/fixtures/angular-v17 with 15 updates
([#11274](https://github.com/vercel/vercel/pull/11274))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.22

## @vercel-internals/types@1.0.27

### Patch Changes

- Updated dependencies
\[[`11218a179`](https://github.com/vercel/vercel/commit/11218a179870a5420c5a6ff720cd4aec4f7e1c5e)]:
    -   @vercel/build-utils@7.9.1

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
a67ad4b5a130bf0e56e18111b3f9ddad69cec0e1,Nathan Rajlich,2024-03-15 03:08:16+00:00,GitHub,2024-03-15 03:08:16+00:00,"[remix] Disable `prepareCache()` npm install for Remix + Vite (#11281)

In legacy Remix apps, we were running `npm install` once again before globbing the `node_modules` dir due to the injecting of the forked Remix compiler which would cause a cache miss without that happening.

For Vite, we are no longer mucking about `node_modules` at build-time, so there is no need to run `npm install` in the `prepareCache()` function.

There is also no ""cacheDirectory"" setting so the globbing of the legacy cache directory is also moved into the legacy-only logic.

**tl;dr** For Remix + Vite apps, the only thing that needs to be cached is `node_modules`."
11218a179870a5420c5a6ff720cd4aec4f7e1c5e,Erika Rowland,2024-03-14 21:34:51+00:00,GitHub,2024-03-14 21:34:51+00:00,"[cli] Don't send `projectSettings.nodeVersion` for unsupported versions (#11277)

Previously, we used `semver` which correctly identified the nodeVersion used in `package.json`, but failed in two cases:

1. If the specified `engines` range started too low, it wouldn't correctly identify a later version compatible with Vercel. (`"">10""` was detecting as Node `""10.x""` not `""20.x""`)
2. If the specified `engines` version was fixed too low to be compatible with Vercel, we sent it, and then Vercel predictably errored. (`""10""` was detecting as Node `""10.x""` which would lead to an error in the build process)

Now, case 1 should properly use the latest node version. And case 2 will not send a node version override to the API and will print a warning to the user on the CLI, but the deployment will still proceed with the version specified for the project in the web interface.

We chose to keep the error message shown to the user consistent with what shows in the logs for the build container, that is:
> WARN! Node.js Version ""10.x"" is discontinued and must be upgraded. Please set ""engines"": { ""node"": ""20.x"" } in your `package.json` file to use Node.js 20."
64b97bf4b5203ecf9a95f63ce26a5c3360208966,dependabot[bot],2024-03-14 21:05:24+00:00,GitHub,2024-03-14 21:05:24+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/angular-v17 with 15 updates (#11274)

Bumps the core group in /packages/static-build/test/fixtures/angular-v17 with 15 updates:

| Package | From | To |
| --- | --- | --- |
| [@angular/animations](https://github.com/angular/angular/tree/HEAD/packages/animations) | `17.2.1` | `17.3.0` |
| [@angular/common](https://github.com/angular/angular/tree/HEAD/packages/common) | `17.2.1` | `17.3.0` |
| [@angular/compiler](https://github.com/angular/angular/tree/HEAD/packages/compiler) | `17.2.1` | `17.3.0` |
| [@angular/core](https://github.com/angular/angular/tree/HEAD/packages/core) | `17.2.1` | `17.3.0` |
| [@angular/forms](https://github.com/angular/angular/tree/HEAD/packages/forms) | `17.2.1` | `17.3.0` |
| [@angular/platform-browser](https://github.com/angular/angular/tree/HEAD/packages/platform-browser) | `17.2.1` | `17.3.0` |
| [@angular/platform-browser-dynamic](https://github.com/angular/angular/tree/HEAD/packages/platform-browser-dynamic) | `17.2.1` | `17.3.0` |
| [@angular/router](https://github.com/angular/angular/tree/HEAD/packages/router) | `17.2.1` | `17.3.0` |
| [@angular-devkit/build-angular](https://github.com/angular/angular-cli) | `17.2.0` | `17.3.0` |
| [@angular/cli](https://github.com/angular/angular-cli) | `17.2.0` | `17.3.0` |
| [@angular/compiler-cli](https://github.com/angular/angular/tree/HEAD/packages/compiler-cli) | `17.2.1` | `17.3.0` |
| [@angular-devkit/architect](https://github.com/angular/angular-cli) | `0.1702.0` | `0.1703.0` |
| [@angular-devkit/build-webpack](https://github.com/angular/angular-cli) | `0.1702.0` | `0.1703.0` |
| [@angular-devkit/core](https://github.com/angular/angular-cli) | `17.2.0` | `17.3.0` |
| [@angular-devkit/schematics](https://github.com/angular/angular-cli) | `17.2.0` | `17.3.0` |

Updates `@angular/animations` from 17.2.1 to 17.3.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/animations</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.3.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906""><img src=""https://img.shields.io/badge/1a6beae8a2-feat-blue"" alt=""feat - 1a6beae8a2"" /></a></td>
<td>Enable template pipeline by default. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569""><img src=""https://img.shields.io/badge/f386a04c9d-fix-green"" alt=""fix - f386a04c9d"" /></a></td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68""><img src=""https://img.shields.io/badge/1f129f114e-fix-green"" alt=""fix - 1f129f114e"" /></a></td>
<td>not catching for loop empty tracking expressions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6""><img src=""https://img.shields.io/badge/12dc4d074e-fix-green"" alt=""fix - 12dc4d074e"" /></a></td>
<td>account for as expression in docs extraction (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2""><img src=""https://img.shields.io/badge/da7fbb40f0-fix-green"" alt=""fix - da7fbb40f0"" /></a></td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1""><img src=""https://img.shields.io/badge/492e03f699-fix-green"" alt=""fix - 492e03f699"" /></a></td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5""><img src=""https://img.shields.io/badge/331b16efd2-feat-blue"" alt=""feat - 331b16efd2"" /></a></td>
<td>add API to inject attributes on the host node (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d""><img src=""https://img.shields.io/badge/fb540e169a-feat-blue"" alt=""feat - fb540e169a"" /></a></td>
<td>add migration for invalid two-way bindings (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36""><img src=""https://img.shields.io/badge/c687b8f453-feat-blue"" alt=""feat - c687b8f453"" /></a></td>
<td>expose new <code>output()</code> API (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5""><img src=""https://img.shields.io/badge/c809069f21-feat-blue"" alt=""feat - c809069f21"" /></a></td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4""><img src=""https://img.shields.io/badge/aff65fd1f4-feat-blue"" alt=""feat - aff65fd1f4"" /></a></td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665""><img src=""https://img.shields.io/badge/974958913c-feat-blue"" alt=""feat - 974958913c"" /></a></td>
<td>support TypeScript 5.4 (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a""><img src=""https://img.shields.io/badge/39a50f9a8d-fix-green"" alt=""fix - 39a50f9a8d"" /></a></td>
<td>ensure all initializer functions run in an injection context (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7""><img src=""https://img.shields.io/badge/243ccce624-fix-green"" alt=""fix - 243ccce624"" /></a></td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16""><img src=""https://img.shields.io/badge/2909e9817d-fix-green"" alt=""fix - 2909e9817d"" /></a></td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0""><img src=""https://img.shields.io/badge/7243c704cf-fix-green"" alt=""fix - 7243c704cf"" /></a></td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3""><img src=""https://img.shields.io/badge/bb35414a38-perf-orange"" alt=""perf - bb35414a38"" /></a></td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b""><img src=""https://img.shields.io/badge/8d37ed035c-fix-green"" alt=""fix - 8d37ed035c"" /></a></td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264""><img src=""https://img.shields.io/badge/c1c7384e02-feat-blue"" alt=""feat - c1c7384e02"" /></a></td>
<td>Add reusable types for router guards (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615""><img src=""https://img.shields.io/badge/7225485311-fix-green"" alt=""fix - 7225485311"" /></a></td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.3.0-rc.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0-rc.0 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/ae7dbe42de5779e578fb636938699b8ba85b33f6""><img src=""https://img.shields.io/badge/ae7dbe42de-fix-green"" alt=""fix - ae7dbe42de"" /></a></td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<p>| Commit | Description |</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/animations</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906"">1a6beae8a2</a></td>
<td>feat</td>
<td>Enable template pipeline by default. (<a href=""https://redirect.github.com/angular/angular/pull/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569"">f386a04c9d</a></td>
<td>fix</td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68"">1f129f114e</a></td>
<td>fix</td>
<td>not catching for loop empty tracking expressions (<a href=""https://redirect.github.com/angular/angular/pull/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6"">12dc4d074e</a></td>
<td>fix</td>
<td>account for as expression in docs extraction (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2"">da7fbb40f0</a></td>
<td>fix</td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://redirect.github.com/angular/angular/pull/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1"">492e03f699</a></td>
<td>fix</td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955"">5afa4f0ec1</a></td>
<td>fix</td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5"">331b16efd2</a></td>
<td>feat</td>
<td>add API to inject attributes on the host node (<a href=""https://redirect.github.com/angular/angular/pull/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d"">fb540e169a</a></td>
<td>feat</td>
<td>add migration for invalid two-way bindings (<a href=""https://redirect.github.com/angular/angular/pull/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36"">c687b8f453</a></td>
<td>feat</td>
<td>expose new <code>output()</code> API (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5"">c809069f21</a></td>
<td>feat</td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4"">aff65fd1f4</a></td>
<td>feat</td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665"">974958913c</a></td>
<td>feat</td>
<td>support TypeScript 5.4 (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a"">39a50f9a8d</a></td>
<td>fix</td>
<td>ensure all initializer functions run in an injection context (<a href=""https://redirect.github.com/angular/angular/pull/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7"">243ccce624</a></td>
<td>fix</td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://redirect.github.com/angular/angular/pull/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16"">2909e9817d</a></td>
<td>fix</td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://redirect.github.com/angular/angular/pull/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0"">7243c704cf</a></td>
<td>fix</td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://redirect.github.com/angular/angular/pull/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3"">bb35414a38</a></td>
<td>perf</td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://redirect.github.com/angular/angular/pull/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b"">8d37ed035c</a></td>
<td>fix</td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://redirect.github.com/angular/angular/pull/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264"">c1c7384e02</a></td>
<td>feat</td>
<td>Add reusable types for router guards (<a href=""https://redirect.github.com/angular/angular/pull/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615"">7225485311</a></td>
<td>fix</td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://redirect.github.com/angular/angular/pull/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.4 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/917b9bdd2eec9cd6395adb0cbde979490bcc3a88"">917b9bdd2e</a></td>
<td>fix</td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://redirect.github.com/angular/angular/pull/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/586cc24a102d51e7c42ecc839124353afe459073"">586cc24a10</a></td>
<td>fix</td>
<td>apply TestBed provider overrides to <code>@defer</code> dependencies (<a href=""https://redirect.github.com/angular/angular/pull/54667"">#54667</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li>See full diff in <a href=""https://github.com/angular/angular/commits/17.3.0/packages/animations"">compare view</a></li>
</ul>
</details>
<br />

Updates `@angular/common` from 17.2.1 to 17.3.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/common</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.3.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906""><img src=""https://img.shields.io/badge/1a6beae8a2-feat-blue"" alt=""feat - 1a6beae8a2"" /></a></td>
<td>Enable template pipeline by default. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569""><img src=""https://img.shields.io/badge/f386a04c9d-fix-green"" alt=""fix - f386a04c9d"" /></a></td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68""><img src=""https://img.shields.io/badge/1f129f114e-fix-green"" alt=""fix - 1f129f114e"" /></a></td>
<td>not catching for loop empty tracking expressions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6""><img src=""https://img.shields.io/badge/12dc4d074e-fix-green"" alt=""fix - 12dc4d074e"" /></a></td>
<td>account for as expression in docs extraction (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2""><img src=""https://img.shields.io/badge/da7fbb40f0-fix-green"" alt=""fix - da7fbb40f0"" /></a></td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1""><img src=""https://img.shields.io/badge/492e03f699-fix-green"" alt=""fix - 492e03f699"" /></a></td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5""><img src=""https://img.shields.io/badge/331b16efd2-feat-blue"" alt=""feat - 331b16efd2"" /></a></td>
<td>add API to inject attributes on the host node (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d""><img src=""https://img.shields.io/badge/fb540e169a-feat-blue"" alt=""feat - fb540e169a"" /></a></td>
<td>add migration for invalid two-way bindings (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36""><img src=""https://img.shields.io/badge/c687b8f453-feat-blue"" alt=""feat - c687b8f453"" /></a></td>
<td>expose new <code>output()</code> API (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5""><img src=""https://img.shields.io/badge/c809069f21-feat-blue"" alt=""feat - c809069f21"" /></a></td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4""><img src=""https://img.shields.io/badge/aff65fd1f4-feat-blue"" alt=""feat - aff65fd1f4"" /></a></td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665""><img src=""https://img.shields.io/badge/974958913c-feat-blue"" alt=""feat - 974958913c"" /></a></td>
<td>support TypeScript 5.4 (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a""><img src=""https://img.shields.io/badge/39a50f9a8d-fix-green"" alt=""fix - 39a50f9a8d"" /></a></td>
<td>ensure all initializer functions run in an injection context (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7""><img src=""https://img.shields.io/badge/243ccce624-fix-green"" alt=""fix - 243ccce624"" /></a></td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16""><img src=""https://img.shields.io/badge/2909e9817d-fix-green"" alt=""fix - 2909e9817d"" /></a></td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0""><img src=""https://img.shields.io/badge/7243c704cf-fix-green"" alt=""fix - 7243c704cf"" /></a></td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3""><img src=""https://img.shields.io/badge/bb35414a38-perf-orange"" alt=""perf - bb35414a38"" /></a></td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b""><img src=""https://img.shields.io/badge/8d37ed035c-fix-green"" alt=""fix - 8d37ed035c"" /></a></td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264""><img src=""https://img.shields.io/badge/c1c7384e02-feat-blue"" alt=""feat - c1c7384e02"" /></a></td>
<td>Add reusable types for router guards (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615""><img src=""https://img.shields.io/badge/7225485311-fix-green"" alt=""fix - 7225485311"" /></a></td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.3.0-rc.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0-rc.0 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/ae7dbe42de5779e578fb636938699b8ba85b33f6""><img src=""https://img.shields.io/badge/ae7dbe42de-fix-green"" alt=""fix - ae7dbe42de"" /></a></td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<p>| Commit | Description |</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/common</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906"">1a6beae8a2</a></td>
<td>feat</td>
<td>Enable template pipeline by default. (<a href=""https://redirect.github.com/angular/angular/pull/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569"">f386a04c9d</a></td>
<td>fix</td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68"">1f129f114e</a></td>
<td>fix</td>
<td>not catching for loop empty tracking expressions (<a href=""https://redirect.github.com/angular/angular/pull/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6"">12dc4d074e</a></td>
<td>fix</td>
<td>account for as expression in docs extraction (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2"">da7fbb40f0</a></td>
<td>fix</td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://redirect.github.com/angular/angular/pull/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1"">492e03f699</a></td>
<td>fix</td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955"">5afa4f0ec1</a></td>
<td>fix</td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5"">331b16efd2</a></td>
<td>feat</td>
<td>add API to inject attributes on the host node (<a href=""https://redirect.github.com/angular/angular/pull/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d"">fb540e169a</a></td>
<td>feat</td>
<td>add migration for invalid two-way bindings (<a href=""https://redirect.github.com/angular/angular/pull/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36"">c687b8f453</a></td>
<td>feat</td>
<td>expose new <code>output()</code> API (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5"">c809069f21</a></td>
<td>feat</td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4"">aff65fd1f4</a></td>
<td>feat</td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665"">974958913c</a></td>
<td>feat</td>
<td>support TypeScript 5.4 (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a"">39a50f9a8d</a></td>
<td>fix</td>
<td>ensure all initializer functions run in an injection context (<a href=""https://redirect.github.com/angular/angular/pull/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7"">243ccce624</a></td>
<td>fix</td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://redirect.github.com/angular/angular/pull/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16"">2909e9817d</a></td>
<td>fix</td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://redirect.github.com/angular/angular/pull/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0"">7243c704cf</a></td>
<td>fix</td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://redirect.github.com/angular/angular/pull/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3"">bb35414a38</a></td>
<td>perf</td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://redirect.github.com/angular/angular/pull/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b"">8d37ed035c</a></td>
<td>fix</td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://redirect.github.com/angular/angular/pull/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264"">c1c7384e02</a></td>
<td>feat</td>
<td>Add reusable types for router guards (<a href=""https://redirect.github.com/angular/angular/pull/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615"">7225485311</a></td>
<td>fix</td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://redirect.github.com/angular/angular/pull/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.4 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/917b9bdd2eec9cd6395adb0cbde979490bcc3a88"">917b9bdd2e</a></td>
<td>fix</td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://redirect.github.com/angular/angular/pull/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/586cc24a102d51e7c42ecc839124353afe459073"">586cc24a10</a></td>
<td>fix</td>
<td>apply TestBed provider overrides to <code>@defer</code> dependencies (<a href=""https://redirect.github.com/angular/angular/pull/54667"">#54667</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b""><code>8d37ed0</code></a> fix(http): exclude caching for authenticated HTTP requests (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54746"">#54746</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665""><code>9749589</code></a> feat(core): support TypeScript 5.4 (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54414"">#54414</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/707bfc9b326f321f302dccfdfebef7380c914eb5""><code>707bfc9</code></a> perf(common): <code>AsyncPipe</code> should not call <code>markForCheck</code> on subscription (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54"">#54</a>...</li>
<li><a href=""https://github.com/angular/angular/commit/55fd7b3c85253554d579a3fc807349f32e60a89a""><code>55fd7b3</code></a> docs(docs-infra): Add missing api entries (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54517"">#54517</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/219445cda497901f75f927e9ea4abdbc9207f337""><code>219445c</code></a> fix(common): image placeholder not removed in OnPush component (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54515"">#54515</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/74b5a51226f1261260d17e48b1ae2477dcefb76d""><code>74b5a51</code></a> fix(http): Use string body to generate transfer cache key. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54379"">#54379</a>)</li>
<li>See full diff in <a href=""https://github.com/angular/angular/commits/17.3.0/packages/common"">compare view</a></li>
</ul>
</details>
<br />

Updates `@angular/compiler` from 17.2.1 to 17.3.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/compiler</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.3.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906""><img src=""https://img.shields.io/badge/1a6beae8a2-feat-blue"" alt=""feat - 1a6beae8a2"" /></a></td>
<td>Enable template pipeline by default. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569""><img src=""https://img.shields.io/badge/f386a04c9d-fix-green"" alt=""fix - f386a04c9d"" /></a></td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68""><img src=""https://img.shields.io/badge/1f129f114e-fix-green"" alt=""fix - 1f129f114e"" /></a></td>
<td>not catching for loop empty tracking expressions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6""><img src=""https://img.shields.io/badge/12dc4d074e-fix-green"" alt=""fix - 12dc4d074e"" /></a></td>
<td>account for as expression in docs extraction (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2""><img src=""https://img.shields.io/badge/da7fbb40f0-fix-green"" alt=""fix - da7fbb40f0"" /></a></td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1""><img src=""https://img.shields.io/badge/492e03f699-fix-green"" alt=""fix - 492e03f699"" /></a></td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5""><img src=""https://img.shields.io/badge/331b16efd2-feat-blue"" alt=""feat - 331b16efd2"" /></a></td>
<td>add API to inject attributes on the host node (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d""><img src=""https://img.shields.io/badge/fb540e169a-feat-blue"" alt=""feat - fb540e169a"" /></a></td>
<td>add migration for invalid two-way bindings (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36""><img src=""https://img.shields.io/badge/c687b8f453-feat-blue"" alt=""feat - c687b8f453"" /></a></td>
<td>expose new <code>output()</code> API (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5""><img src=""https://img.shields.io/badge/c809069f21-feat-blue"" alt=""feat - c809069f21"" /></a></td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4""><img src=""https://img.shields.io/badge/aff65fd1f4-feat-blue"" alt=""feat - aff65fd1f4"" /></a></td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665""><img src=""https://img.shields.io/badge/974958913c-feat-blue"" alt=""feat - 974958913c"" /></a></td>
<td>support TypeScript 5.4 (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a""><img src=""https://img.shields.io/badge/39a50f9a8d-fix-green"" alt=""fix - 39a50f9a8d"" /></a></td>
<td>ensure all initializer functions run in an injection context (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7""><img src=""https://img.shields.io/badge/243ccce624-fix-green"" alt=""fix - 243ccce624"" /></a></td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16""><img src=""https://img.shields.io/badge/2909e9817d-fix-green"" alt=""fix - 2909e9817d"" /></a></td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0""><img src=""https://img.shields.io/badge/7243c704cf-fix-green"" alt=""fix - 7243c704cf"" /></a></td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3""><img src=""https://img.shields.io/badge/bb35414a38-perf-orange"" alt=""perf - bb35414a38"" /></a></td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b""><img src=""https://img.shields.io/badge/8d37ed035c-fix-green"" alt=""fix - 8d37ed035c"" /></a></td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264""><img src=""https://img.shields.io/badge/c1c7384e02-feat-blue"" alt=""feat - c1c7384e02"" /></a></td>
<td>Add reusable types for router guards (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615""><img src=""https://img.shields.io/badge/7225485311-fix-green"" alt=""fix - 7225485311"" /></a></td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.3.0-rc.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0-rc.0 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/ae7dbe42de5779e578fb636938699b8ba85b33f6""><img src=""https://img.shields.io/badge/ae7dbe42de-fix-green"" alt=""fix - ae7dbe42de"" /></a></td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<p>| Commit | Description |</p>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/compiler</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906"">1a6beae8a2</a></td>
<td>feat</td>
<td>Enable template pipeline by default. (<a href=""https://redirect.github.com/angular/angular/pull/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569"">f386a04c9d</a></td>
<td>fix</td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68"">1f129f114e</a></td>
<td>fix</td>
<td>not catching for loop empty tracking expressions (<a href=""https://redirect.github.com/angular/angular/pull/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6"">12dc4d074e</a></td>
<td>fix</td>
<td>account for as expression in docs extraction (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2"">da7fbb40f0</a></td>
<td>fix</td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://redirect.github.com/angular/angular/pull/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1"">492e03f699</a></td>
<td>fix</td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://redirect.github.com/angular/angular/pull/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955"">5afa4f0ec1</a></td>
<td>fix</td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5"">331b16efd2</a></td>
<td>feat</td>
<td>add API to inject attributes on the host node (<a href=""https://redirect.github.com/angular/angular/pull/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d"">fb540e169a</a></td>
<td>feat</td>
<td>add migration for invalid two-way bindings (<a href=""https://redirect.github.com/angular/angular/pull/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36"">c687b8f453</a></td>
<td>feat</td>
<td>expose new <code>output()</code> API (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5"">c809069f21</a></td>
<td>feat</td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4"">aff65fd1f4</a></td>
<td>feat</td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://redirect.github.com/angular/angular/pull/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665"">974958913c</a></td>
<td>feat</td>
<td>support TypeScript 5.4 (<a href=""https://redirect.github.com/angular/angular/pull/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a"">39a50f9a8d</a></td>
<td>fix</td>
<td>ensure all initializer functions run in an injection context (<a href=""https://redirect.github.com/angular/angular/pull/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7"">243ccce624</a></td>
<td>fix</td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://redirect.github.com/angular/angular/pull/54800"">#54800</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/2909e9817daf69b6478d7d09229491a9a48cff16"">2909e9817d</a></td>
<td>fix</td>
<td>prevent infinite loops in clobbered elements check (<a href=""https://redirect.github.com/angular/angular/pull/54425"">#54425</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7243c704cf8a4986fae419793027458e142658f0"">7243c704cf</a></td>
<td>fix</td>
<td>return a readonly signal on <code>asReadonly</code>. (<a href=""https://redirect.github.com/angular/angular/pull/54706"">#54706</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/bb35414a38f8a8447d03c66dc5bf60b84409f9e3"">bb35414a38</a></td>
<td>perf</td>
<td>speed up retrieval of <code>DestroyRef</code> in <code>EventEmitter</code> (<a href=""https://redirect.github.com/angular/angular/pull/54748"">#54748</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/8d37ed035c9e9796ba9a7b1f055404ea220dbb3b"">8d37ed035c</a></td>
<td>fix</td>
<td>exclude caching for authenticated HTTP requests (<a href=""https://redirect.github.com/angular/angular/pull/54746"">#54746</a>)</td>
</tr>
</tbody>
</table>
<h3>router</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c1c7384e02becc623c6a42985f7178ca98137264"">c1c7384e02</a></td>
<td>feat</td>
<td>Add reusable types for router guards (<a href=""https://redirect.github.com/angular/angular/pull/54580"">#54580</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/722548531108e247660ebe6966b99b57d510b615"">7225485311</a></td>
<td>fix</td>
<td>Navigations triggered by cancellation events should cancel previous navigation (<a href=""https://redirect.github.com/angular/angular/pull/54710"">#54710</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.4 (2024-03-06)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/917b9bdd2eec9cd6395adb0cbde979490bcc3a88"">917b9bdd2e</a></td>
<td>fix</td>
<td>unwrap expressions with type parameters in query read property (<a href=""https://redirect.github.com/angular/angular/pull/54647"">#54647</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/586cc24a102d51e7c42ecc839124353afe459073"">586cc24a10</a></td>
<td>fix</td>
<td>apply TestBed provider overrides to <code>@defer</code> dependencies (<a href=""https://redirect.github.com/angular/angular/pull/54667"">#54667</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569""><code>f386a04</code></a> fix(compiler): handle two-way bindings to signal-based template variables in ...</li>
<li><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68""><code>1f129f1</code></a> fix(compiler): not catching for loop empty tracking expressions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54772"">#54772</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/b40f1e5b86bb9fb7413be504e9c6a6f80f60460f""><code>b40f1e5</code></a> refactor(compiler): Remove deep imports in the language service (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54695"">#54695</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/5e32a775d9515e05072b7ee8399e0bcf1a15de52""><code>5e32a77</code></a> refactor(compiler): cleanup unused code in template builder pipeline (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54654"">#54654</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906""><code>1a6beae</code></a> feat(compiler): Enable template pipeline by default. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54571"">#54571</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/badda0c389a392b4c6ec5858614de9ec34c5ad80""><code>badda0c</code></a> fix(compiler-cli): correctly detect deferred dependencies across scoped nodes...</li>
<li><a href=""https://github.com/angular/angular/commit/dba3e0b5aa73d49a6caad4ad474e0212486fe98a""><code>dba3e0b</code></a> fix(compiler): adding the inert property to the &quot;SCHEMA&quot; array (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53148"">#53148</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/6c2d4b650b32cf2bebabed97e5dc681c62b52f83""><code>6c2d4b6</code></a> refactor(compiler): Enable Template Pipeline globally in 1P. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54435"">#54435</a>)</li>
<li>See full diff in <a href=""https://github.com/angular/angular/commits/17.3.0/packages/compiler"">compare view</a></li>
</ul>
</details>
<br />

Updates `@angular/core` from 17.2.1 to 17.3.0
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/core</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.3.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.3.0 (2024-03-13)</h1>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1a6beae8a2bdcff27d4c1e402f98246a52247906""><img src=""https://img.shields.io/badge/1a6beae8a2-feat-blue"" alt=""feat - 1a6beae8a2"" /></a></td>
<td>Enable template pipeline by default. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54571"">#54571</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f386a04c9ddc2951c8105d5cafcce7b4bedea569""><img src=""https://img.shields.io/badge/f386a04c9d-fix-green"" alt=""fix - f386a04c9d"" /></a></td>
<td>handle two-way bindings to signal-based template variables in instruction generation (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/1f129f114edb21137d74471dd6b652848d2ffb68""><img src=""https://img.shields.io/badge/1f129f114e-fix-green"" alt=""fix - 1f129f114e"" /></a></td>
<td>not catching for loop empty tracking expressions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54772"">#54772</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/12dc4d074e63edaff626003ad6136a8d122b2ba6""><img src=""https://img.shields.io/badge/12dc4d074e-fix-green"" alt=""fix - 12dc4d074e"" /></a></td>
<td>account for as expression in docs extraction (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/da7fbb40f06e6e37504f69e7b335f8219f424de2""><img src=""https://img.shields.io/badge/da7fbb40f0-fix-green"" alt=""fix - da7fbb40f0"" /></a></td>
<td>detect when the linker is working in unpublished angular and widen supported versions (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54439"">#54439</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/492e03f699ca95df4cf854885253f63a5a1fb5c1""><img src=""https://img.shields.io/badge/492e03f699-fix-green"" alt=""fix - 492e03f699"" /></a></td>
<td>flag two-way bindings to non-signal values in templates (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54714"">#54714</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5afa4f0ec1b64b88ef875d48bd143e0f36e0a955""><img src=""https://img.shields.io/badge/5afa4f0ec1-fix-green"" alt=""fix - 5afa4f0ec1"" /></a></td>
<td>support <code>ModuleWithProviders</code> literal detection with <code>typeof</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54650"">#54650</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/331b16efd2f5af876e6dc0ad2474ee7a87b00de5""><img src=""https://img.shields.io/badge/331b16efd2-feat-blue"" alt=""feat - 331b16efd2"" /></a></td>
<td>add API to inject attributes on the host node (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54604"">#54604</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/fb540e169a78a61f38d611f538eea8fdb0971f1d""><img src=""https://img.shields.io/badge/fb540e169a-feat-blue"" alt=""feat - fb540e169a"" /></a></td>
<td>add migration for invalid two-way bindings (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54630"">#54630</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c687b8f4531252cd1c3dfbb9a7bd42bdbe666a36""><img src=""https://img.shields.io/badge/c687b8f453-feat-blue"" alt=""feat - c687b8f453"" /></a></td>
<td>expose new <code>output()</code> API (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/c809069f213244afd0e2d803a6a43510b218e6f5""><img src=""https://img.shields.io/badge/c809069f21-feat-blue"" alt=""feat - c809069f21"" /></a></td>
<td>introduce <code>outputFromObservable()</code> interop function (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/aff65fd1f4a61ed76a6f9b623852f197eb3500e4""><img src=""https://img.shields.io/badge/aff65fd1f4-feat-blue"" alt=""feat - aff65fd1f4"" /></a></td>
<td>introduce <code>outputToObservable</code> interop helper (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54650"">#54650</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/974958913ca632971f878a045537472f2c99c665""><img src=""https://img.shields.io/badge/974958913c-feat-blue"" alt=""feat - 974958913c"" /></a></td>
<td>support TypeScript 5.4 (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54414"">#54414</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39a50f9a8df5afc4968d18924f3d9d7d6b649d3a""><img src=""https://img.shields.io/badge/39a50f9a8d-fix-green"" alt=""fix - 39a50f9a8d"" /></a></td>
<td>ensure all initializer functions run in an injection context (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54761"">#54761</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/243ccce62475ae03a2e727d2b3cb2d51a595c4a7""><img src=""https://img.shields.io/badge/243ccce624-fix-green"" alt=""fix - 243ccce624"" /></a></td>
<td>exclude class attribute intended for projection matching from directive matching (<a href=""https://github.com/angular/angular/tree/HEAD/packages/core/issues/54800"">#54800</a>)</td>
</"
5c3d2e741114695db91074dab6d10bc99497d42f,Trek Glowacki,2024-03-14 20:45:40+00:00,GitHub,2024-03-14 20:45:40+00:00,"[tests] Shuffle proprety order in dependabot.yml (#11240)

Property order isn't meaningful here. I figured directory name first
makes the order a bit nicer and alphabetical."
4bca0c6d0bc25052b95bd02b12a0b891c86c4b49,Wyatt Johnson,2024-03-14 18:37:48+00:00,GitHub,2024-03-14 18:37:48+00:00,"[next] Ensure all static routes have static streaming lambda path (#11259)

When there's a match for a prerender, the dynamic query parameters will
not be provided via the `x-now-route-matches`. This ensures that when
generating any static route that the static streaming lambda path is
used if it's provided, ensuring that when a page is generated via
`generateStaticParams`:

```tsx
// app/blog/[slug]/page.tsx

type Props = {
  params: {
    slug: string
  }
}

export function generateStaticParams() {
  return [{ slug: ""one"" }, { slug: ""two"" }, { slug: ""three"" }]
}

export default function BlogPage({ slug }: Props) {
  // ...
}
```

That we use the specific routes (`/blog/one`, `/blog/two`, and
`/blog/three`) for the partial prerendering streaming path instead of
the paramatarized pathname (`/blog/[slug]`) as the rewrites won't be
matched once a match for a prerender has been found.

This additionally updates the tests to ensure that the correct pathname
is observed (this was previously silently failing)."
fab5fca93900aa448f559e0ee8c6dca1e1edc454,Vercel Release Bot,2024-03-14 15:37:36+00:00,GitHub,2024-03-14 15:37:36+00:00,"Version Packages (#11262)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.9.0

### Minor Changes

- Add `base` parameter to `scanParentDirs()`
([#11261](https://github.com/vercel/vercel/pull/11261))

## vercel@33.6.0

### Minor Changes

- Set `projectSettings.nodeVersion` in `vc deploy` based on
""engines.node"" field
([#11261](https://github.com/vercel/vercel/pull/11261))

### Patch Changes

- Stops warning about legacy Speed Insights for Next.js apps
([#11268](https://github.com/vercel/vercel/pull/11268))

- Fix framework version detection in monorepos
([#11212](https://github.com/vercel/vercel/pull/11212))

- Updated dependencies
\[[`8ea93839c`](https://github.com/vercel/vercel/commit/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015),
[`58ef91bfe`](https://github.com/vercel/vercel/commit/58ef91bfe8c2e7176e8783cc4eb91ee8580c70dc)]:
    -   @vercel/build-utils@7.9.0
    -   @vercel/remix-builder@2.1.3
    -   @vercel/node@3.0.23
    -   @vercel/static-build@2.4.3

## @vercel/client@13.1.6

### Patch Changes

- Updated dependencies
\[[`8ea93839c`](https://github.com/vercel/vercel/commit/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015)]:
    -   @vercel/build-utils@7.9.0

## @vercel/gatsby-plugin-vercel-builder@2.0.21

### Patch Changes

- Updated dependencies
\[[`8ea93839c`](https://github.com/vercel/vercel/commit/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015)]:
    -   @vercel/build-utils@7.9.0

## @vercel/node@3.0.23

### Patch Changes

- Updated dependencies
\[[`8ea93839c`](https://github.com/vercel/vercel/commit/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015)]:
    -   @vercel/build-utils@7.9.0

## @vercel/remix-builder@2.1.3

### Patch Changes

- Improve hueristics for detecting Remix + Vite
([#11256](https://github.com/vercel/vercel/pull/11256))

## @vercel/static-build@2.4.3

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.21

## @vercel-internals/types@1.0.26

### Patch Changes

- Updated dependencies
\[[`8ea93839c`](https://github.com/vercel/vercel/commit/8ea93839ccc70816f3ece9d7cfdb857aa7a4b015)]:
    -   @vercel/build-utils@7.9.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
2ad44999dd3920d10b63006c34ac1a345c0717fe,Damien Simonin Feugas,2024-03-14 15:00:43+00:00,GitHub,2024-03-14 15:00:43+00:00,"[cli] stops warning Next.js users about legacy Speed Insights (#11268)

###  What's in there?

Vercel's Speed Insights legacy injection is deprecated in favor of `@vercel/speed-insights` package.
CLI has a couple places where it warns users running `vc build` locally (or on their CI).

Some users complained about seeing the warning while they are already using the package.

This PR removes the message

###  Note to reviewers

@tobiaslins, @timolins and I had a long discussion on the approach here.

This warning is issued because during `vc pull`, the project API on Vercel returns a legacy analytics.id field, [which is stored](https://github.com/vercel/vercel/blame/main/packages/cli/src/util/projects/project-settings.ts#L35) in `.vercel/project.json`.
While it is legit for users who never used `@vercel/speed-insights` package, it also appear for users who migrated from legacy.

Besides setting the warning, `VERCEL_ANALYTICS_ID` is set, which triggers auto-injection in Next.js, and is useful during self-hosting.

We first considered removing the legacy id from `project.json`, but it would break self-hosting.
We also considered printing the warning only if the application never used the package (which the project API on Vercel knows). 
In the end, we realized that vercel.com Speed Insights dashboard has plenty of disclaimer and incentives to use the new package. Having it in the CLI doesn't worth the annoyance."
eee57262f037531c6101bbdbf16bacf14bac4480,Austin Merrick,2024-03-14 09:07:15+00:00,GitHub,2024-03-14 09:07:15+00:00,"Fix README links (#11270)

These links went to the overview page. Pointing to the CLI docs is more helpful."
fd762d88004fba62f3d9def156603722d84e3f95,Sean Massa,2024-03-14 08:55:35+00:00,GitHub,2024-03-14 08:55:35+00:00,"Update CODEOWNERS to ensure Zero Config can always approve (#11272)

I tagged everyone for review that might be impacted. I removed no one, but added Zero Config to each section.

This allows Zero Config to make uncontroversial tweaks as needed. For any significant changes to these areas, we'd of course still wait for other teams' reviews."
8ea93839ccc70816f3ece9d7cfdb857aa7a4b015,Nathan Rajlich,2024-03-13 22:39:51+00:00,GitHub,2024-03-13 22:39:51+00:00,"[cli] Set `projectSettings.nodeVersion` in `vc deploy` based on ""engines.node"" field (#11261)

Read the package.json and use the `engines.node` value to set the
`projectSettings.nodeVersion` property on the create deployment API call
POST body. This allows for the Node 20 build container image to be
properly specified before the deployment is created on the server side."
b9f3438c2d71443ede5b16e40a1d32a87ee094f4,Nathan Rajlich,2024-03-12 22:54:53+00:00,GitHub,2024-03-12 22:54:53+00:00,"[cli] Fix framework version detection in monorepos (#11212)

I noticed that the framework version was not being printed on deployments in a monorepo. Turns out the framework detection logic was happening at the root of the monorepo, instead of the project directory."
bf587f77b75295f35717e6a15ee87519f2845952,Vercel Release Bot,2024-03-12 22:32:59+00:00,GitHub,2024-03-12 22:32:59+00:00,"[tests] Upgrade Turbo to version 1.12.5 (#11249)

This auto-generated PR updates Turbo to version 1.12.5"
58ef91bfe8c2e7176e8783cc4eb91ee8580c70dc,Nathan Rajlich,2024-03-12 22:05:32+00:00,GitHub,2024-03-12 22:05:32+00:00,"[remix] Improve hueristics for detecting Remix + Vite (#11256)

In particular, when both `remix.config` and `vite.config` files exist,
run some additional checks to try to detect if the project is using the
Vite plugin or not."
4111fbaa89348d0b803059de9b647c3ed3788bc4,Nathan Rajlich,2024-03-11 21:39:08+00:00,GitHub,2024-03-11 21:39:08+00:00,"[tests] Specify testing tsconfig path for Jest (#11253)

This fixes the stack traces on failed Jest tests."
c3251e3775aae80e468ae8c5b05cd712fa2f82d1,Vercel Release Bot,2024-03-08 21:42:44+00:00,GitHub,2024-03-08 21:42:44+00:00,"Version Packages (#11248)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.8.0

### Minor Changes

- Remove `VERCEL_ENABLE_NPM_DEFAULT` env var check
([#11242](https://github.com/vercel/vercel/pull/11242))

### Patch Changes

- Rename variants to flags and remove legacy flags
([#11121](https://github.com/vercel/vercel/pull/11121))

## vercel@33.5.5

### Patch Changes

- Rename variants to flags and remove legacy flags
([#11121](https://github.com/vercel/vercel/pull/11121))

- fix vc with root dir issues
([#11243](https://github.com/vercel/vercel/pull/11243))

- Updated dependencies
\[[`908e7837d`](https://github.com/vercel/vercel/commit/908e7837d55bc02e708f402c700e00208415e954),
[`5e3656ec1`](https://github.com/vercel/vercel/commit/5e3656ec1b3f0561091636582715ba09ddd8cb2d),
[`a53d1b0d3`](https://github.com/vercel/vercel/commit/a53d1b0d38efa9637f8b8f81a70898add87530e3)]:
    -   @vercel/build-utils@7.8.0
    -   @vercel/next@4.1.5
    -   @vercel/remix-builder@2.1.2
    -   @vercel/node@3.0.22
    -   @vercel/static-build@2.4.2

## @vercel/client@13.1.5

### Patch Changes

- Updated dependencies
\[[`908e7837d`](https://github.com/vercel/vercel/commit/908e7837d55bc02e708f402c700e00208415e954),
[`5e3656ec1`](https://github.com/vercel/vercel/commit/5e3656ec1b3f0561091636582715ba09ddd8cb2d)]:
    -   @vercel/build-utils@7.8.0

## @vercel/gatsby-plugin-vercel-builder@2.0.20

### Patch Changes

- Updated dependencies
\[[`908e7837d`](https://github.com/vercel/vercel/commit/908e7837d55bc02e708f402c700e00208415e954),
[`5e3656ec1`](https://github.com/vercel/vercel/commit/5e3656ec1b3f0561091636582715ba09ddd8cb2d)]:
    -   @vercel/build-utils@7.8.0

## @vercel/next@4.1.5

### Patch Changes

- Rename variants to flags and remove legacy flags
([#11121](https://github.com/vercel/vercel/pull/11121))

## @vercel/node@3.0.22

### Patch Changes

- Updated dependencies
\[[`908e7837d`](https://github.com/vercel/vercel/commit/908e7837d55bc02e708f402c700e00208415e954),
[`5e3656ec1`](https://github.com/vercel/vercel/commit/5e3656ec1b3f0561091636582715ba09ddd8cb2d)]:
    -   @vercel/build-utils@7.8.0

## @vercel/remix-builder@2.1.2

### Patch Changes

- Update `@remix-run/dev` fork to v2.8.1
([#11241](https://github.com/vercel/vercel/pull/11241))

## @vercel/static-build@2.4.2

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.20

## @vercel-internals/types@1.0.25

### Patch Changes

- Updated dependencies
\[[`908e7837d`](https://github.com/vercel/vercel/commit/908e7837d55bc02e708f402c700e00208415e954),
[`5e3656ec1`](https://github.com/vercel/vercel/commit/5e3656ec1b3f0561091636582715ba09ddd8cb2d)]:
    -   @vercel/build-utils@7.8.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
33202dec1ff1356cedd8df62fe2bab59c6bc6ab3,Sean Massa,2024-03-08 21:21:18+00:00,GitHub,2024-03-08 21:21:18+00:00,"fix vc with root dir issues (#11243)

There's an issue with `vc link` and `vc deploy` when using a project
root directory. Framework detection fails because it's looking in the
wrong directory.

---

Manually tested and this fixes the issue. A project with a rootDirectory
was previously not detecting a framework, but now it says:

```
Auto-detected Project Settings (Remix):
```

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
a53d1b0d38efa9637f8b8f81a70898add87530e3,Vercel Release Bot,2024-03-08 20:38:02+00:00,GitHub,2024-03-08 20:38:02+00:00,"[remix] Update `@remix-run/dev` to v2.8.1 (#11241)

This auto-generated PR updates `@remix-run/dev` to version 2.8.1."
5e3656ec1b3f0561091636582715ba09ddd8cb2d,Nathan Rajlich,2024-03-08 20:13:30+00:00,GitHub,2024-03-08 20:13:30+00:00,"[build-utils] Remove `VERCEL_ENABLE_NPM_DEFAULT` env var check (#11242)

Flag has been rolled out for long enough at this point.

npm will now always be used as the package manager when no lockfile is present."
908e7837d55bc02e708f402c700e00208415e954,Andy,2024-03-08 16:06:23+00:00,GitHub,2024-03-08 16:06:23+00:00,"[cli][build-utils] Rename variants to flags (#11121)

 - Removes all the legacy `flags`
 - Renames the new `variants` to `flags`

Neither the legacy flags, nor the new variants were exposed to anyone, except for the type in build-utils, so there shouldn't be any issues removing/renaming them."
dfa2f07c45f9efebe0be8fc1c1136b2d8ccd5ac9,Vercel Release Bot,2024-03-08 15:51:02+00:00,GitHub,2024-03-08 15:51:02+00:00,"[examples][tests] Upgrade Next.js to version 14.1.3 (#11237)

This auto-generated PR updates 7 packages to Next.js version 14.1.3

Co-authored-by: Steven <steven@ceriously.com>"
33181274bb87dfdb451149a09761a81b40199a16,Nathan Rajlich,2024-03-08 15:28:30+00:00,GitHub,2024-03-08 15:28:30+00:00,"[static-build] Remove Build Output API v1 tests (#11247)

Remove these old tests for the legacy BOA version. Specifically,
`66-build-output-directory-with-functions` has become problematic
because the ""go1.x"" Lambda runtime no longer deploys. I figured we take
the opportunity to remove the others as well though. Will make running
the tests slightly faster."
96117d3f17f3ccd27c0ed5a08863ae26627eea32,Vercel Release Bot,2024-03-06 16:19:42+00:00,GitHub,2024-03-06 16:19:42+00:00,"Version Packages (#11210)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.7.1

### Patch Changes

- [build-utils] increase max memory limit
([#11209](https://github.com/vercel/vercel/pull/11209))

## vercel@33.5.4

### Patch Changes

- [build-utils] increase max memory limit
([#11209](https://github.com/vercel/vercel/pull/11209))

- Updated dependencies
\[[`b1d8b83ab`](https://github.com/vercel/vercel/commit/b1d8b83abbf23a3485aedb490992d0a3bf44573f),
[`37b193c84`](https://github.com/vercel/vercel/commit/37b193c845d8b63d93bb0017fbc1a6a35306ef1f),
[`20237d4f7`](https://github.com/vercel/vercel/commit/20237d4f7b55b0697b57db15636c11204cb0dc39),
[`f8fab639b`](https://github.com/vercel/vercel/commit/f8fab639bf49a60389b8d0b7b265a737c17b4ae1),
[`6ed0fe6fb`](https://github.com/vercel/vercel/commit/6ed0fe6fb1e487545a790ff5b9fc691cf625f005)]:
    -   @vercel/next@4.1.4
    -   @vercel/build-utils@7.7.1
    -   @vercel/remix-builder@2.1.1
    -   @vercel/static-build@2.4.1
    -   @vercel/node@3.0.21

## @vercel/client@13.1.4

### Patch Changes

- Updated dependencies
\[[`37b193c84`](https://github.com/vercel/vercel/commit/37b193c845d8b63d93bb0017fbc1a6a35306ef1f)]:
    -   @vercel/build-utils@7.7.1

## @vercel/fs-detectors@5.2.1

### Patch Changes

- [build-utils] increase max memory limit
([#11209](https://github.com/vercel/vercel/pull/11209))

## @vercel/gatsby-plugin-vercel-builder@2.0.19

### Patch Changes

- Updated dependencies
\[[`37b193c84`](https://github.com/vercel/vercel/commit/37b193c845d8b63d93bb0017fbc1a6a35306ef1f)]:
    -   @vercel/build-utils@7.7.1

## @vercel/next@4.1.4

### Patch Changes

- Enable partial prerendering support for pre-generated pages
([#11183](https://github.com/vercel/vercel/pull/11183))

## @vercel/node@3.0.21

### Patch Changes

- Updated dependencies
\[[`37b193c84`](https://github.com/vercel/vercel/commit/37b193c845d8b63d93bb0017fbc1a6a35306ef1f)]:
    -   @vercel/build-utils@7.7.1

## @vercel/remix-builder@2.1.1

### Patch Changes

- [build-utils] increase max memory limit
([#11209](https://github.com/vercel/vercel/pull/11209))

- Remove usage of `ensureResolvable()` in Vite builds
([#11213](https://github.com/vercel/vercel/pull/11213))

- Update `@remix-run/dev` fork to v2.8.0
([#11206](https://github.com/vercel/vercel/pull/11206))

- Ensure the symlink directory exists in `ensureSymlink()`
([#11205](https://github.com/vercel/vercel/pull/11205))

## @vercel/static-build@2.4.1

### Patch Changes

- [build-utils] increase max memory limit
([#11209](https://github.com/vercel/vercel/pull/11209))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.19

## @vercel-internals/types@1.0.24

### Patch Changes

- Updated dependencies
\[[`37b193c84`](https://github.com/vercel/vercel/commit/37b193c845d8b63d93bb0017fbc1a6a35306ef1f)]:
    -   @vercel/build-utils@7.7.1

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
20237d4f7b55b0697b57db15636c11204cb0dc39,Nathan Rajlich,2024-03-06 02:10:22+00:00,GitHub,2024-03-06 02:10:22+00:00,"[remix] Remove usage of `ensureResolvable()` in Vite builds (#11213)

This function can lead to unexpected results (for example, in a monorepo setup where there were different versions of Remix being used, I encountered the wrong version of Remix being symlinked causing issues at runtime).

Instead, throw an error at build time at the NFT step if `@remix-run/node` is missing for routes using Node.js, or when `@remix-run/server-runtime` is missing for routes using Edge.

Less magical is better. Explicit is better than implicit."
293770a2f6d069e4374446935d20910d2f13ab73,Nathan Rajlich,2024-03-06 01:52:19+00:00,GitHub,2024-03-06 01:52:19+00:00,[cli] Fix failing test due to npm default change (#11230)
c9c0a203cc49f1e7a449d71351046c0a7f46d239,Nathan Rajlich,2024-03-06 00:22:46+00:00,GitHub,2024-03-06 00:22:46+00:00,"[examples] Update Remix template to use Vite (#11229)

Updates the Remix example template to use Vite and latest version of
dependencies."
5064dd404d273bdbe89338d041063b4c95af4954,Nathan Rajlich,2024-03-05 22:45:00+00:00,GitHub,2024-03-05 22:45:00+00:00,"Revert ""[examples] Update Remix template to use Vite (#11217)"" (#11227)

This reverts commit 1a45731c921bdf13c5be08df2e9693b15c8d1ac4. This
should not have been merged yet. There is still an issue with framework
detection selecting Vite instead of Remix preset."
1a45731c921bdf13c5be08df2e9693b15c8d1ac4,Nathan Rajlich,2024-03-05 20:10:19+00:00,GitHub,2024-03-05 20:10:19+00:00,"[examples] Update Remix template to use Vite (#11217)

Updates the Remix example template to use Vite and latest version of dependencies."
168f9578cf844748b2dc9483bc3ecf2a5b6fdffd,Trek Glowacki,2024-03-05 19:49:38+00:00,GitHub,2024-03-05 19:49:38+00:00,"[tests] Update dependabot.yml to ignore major/patch (#11223)

Update dependebot to skip patch and major version updates. Patch is too noisy, major requires a new fixture."
c2728ef9c0564607ca728d3a6ff8b3f403004cad,Vercel Release Bot,2024-03-05 15:15:27+00:00,GitHub,2024-03-05 15:15:27+00:00,"[examples][tests] Upgrade Next.js to version 14.1.2 (#11224)

This auto-generated PR updates 7 packages to Next.js version 14.1.2"
c5fe7c2bea1dc1023579920e8432162cf4a53cbc,Trek Glowacki,2024-03-04 16:19:42+00:00,GitHub,2024-03-04 16:19:42+00:00,"[examples] Bump Middleman and Jekyll dependencies to support ruby 3.x (#11203)

Some dependency updates are required to support Ruby 3.x+"
b1d8b83abbf23a3485aedb490992d0a3bf44573f,Wyatt Johnson,2024-03-02 01:29:31+00:00,GitHub,2024-03-02 01:29:31+00:00,[next] Support pre-generated pages without fallbacks with Partial Prerendering (#11183)
24ec5c5aca3c215d90b970599e9696dba9c8a900,Vercel Release Bot,2024-03-01 18:35:53+00:00,GitHub,2024-03-01 18:35:53+00:00,"[examples][tests] Upgrade Next.js to version 14.1.1 (#11215)

This auto-generated PR updates 7 packages to Next.js version 14.1.1"
37b193c845d8b63d93bb0017fbc1a6a35306ef1f,Shohei Maeda,2024-02-29 23:23:11+00:00,GitHub,2024-02-29 23:23:11+00:00,"[build-utils] increase max memory limit (#11209)

internal ref. https://github.com/vercel/api/pull/25997

increasing max limit from 3008 -> 3009 MB

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
f8fab639bf49a60389b8d0b7b265a737c17b4ae1,Vercel Release Bot,2024-02-29 19:21:11+00:00,GitHub,2024-02-29 19:21:11+00:00,"[remix] Update `@remix-run/dev` to v2.8.0 (#11206)

This auto-generated PR updates `@remix-run/dev` to version 2.8.0."
6ed0fe6fb1e487545a790ff5b9fc691cf625f005,Nathan Rajlich,2024-02-29 18:44:18+00:00,GitHub,2024-02-29 18:44:18+00:00,"[remix] Ensure the symlink directory exists in `ensureSymlink()` (#11205)

Customer reported an edge case where (in a monorepo) their project's
`package.json` did not list any dependencies (instead they are listed at
the root-level `package.json`) and this caused the `node_modules`
directory to not exist in the app subdirectory, causing
`ensureSymlink()` to fail."
de2738ba061c8bd80496297cd1ce92c300594ee5,Vercel Release Bot,2024-02-28 17:34:25+00:00,GitHub,2024-02-28 17:34:25+00:00,"Version Packages (#11193)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/frameworks@3.0.0

### Major Changes

- Make ""remix"" framework preset supersede ""vite""
([#11031](https://github.com/vercel/vercel/pull/11031))

## @vercel/fs-detectors@5.2.0

### Minor Changes

- Make ""remix"" framework preset supersede ""vite""
([#11031](https://github.com/vercel/vercel/pull/11031))

### Patch Changes

- Updated dependencies
\[[`1333071a3`](https://github.com/vercel/vercel/commit/1333071a3a2d324679327bfdd4e872f8fd3521c6)]:
    -   @vercel/frameworks@3.0.0

## @vercel/remix-builder@2.1.0

### Minor Changes

- Remix Vite plugin support
([#11031](https://github.com/vercel/vercel/pull/11031))

## vercel@33.5.3

### Patch Changes

- Updated dependencies
\[[`c2d99855e`](https://github.com/vercel/vercel/commit/c2d99855ea6132380434ed29643120680f95fad7),
[`1333071a3`](https://github.com/vercel/vercel/commit/1333071a3a2d324679327bfdd4e872f8fd3521c6)]:
    -   @vercel/next@4.1.3
    -   @vercel/remix-builder@2.1.0

## @vercel/next@4.1.3

### Patch Changes

- Fix manifest with experimental flag
([#11192](https://github.com/vercel/vercel/pull/11192))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
1333071a3a2d324679327bfdd4e872f8fd3521c6,Nathan Rajlich,2024-02-28 17:22:05+00:00,GitHub,2024-02-28 17:22:05+00:00,"Remix Vite plugin support (#11031)

Adds support for Remix apps which use the new Remix Vite plugin.

* The vanilla Remix + Vite template deploys correctly out-of-the-box,
however only a single Node.js function will be used, and a warning will
be printed saying to configure the `vercelPreset()` Preset.
* When used in conjunction with the `vercelPreset()` Preset
(https://github.com/vercel/remix/pull/81), allows for the application to
utilize Vercel-specific features, like per-route `export const config`
configuration, including multi-runtime (Node.js / Edge runtimes) within
the same app.

## To test this today

1. Generate a Remix + Vite project from the template:
    ```
    npx create-remix@latest --template remix-run/remix/templates/vite
    ```
1. Install `@vercel/remix`:
    ```
    npm i --save-dev @vercel/remix
    ```
1. **(Before Remix v2.8.0 is released)** - Update the `@remix-run/dev`
dependency to use the ""pre"" tag which contains [a bug
fix](https://github.com/remix-run/remix/pull/8864):
    ```
    npm i --save--dev @remix-run/dev@pre @remix-run/serve@pre
    ```
1. Configure the `vercelPreset()` in the `vite.config.ts` file:
    ```diff
    --- a/vite.config.ts
    +++ b/vite.config.ts
    @@ -1,10 +1,11 @@
     import { vitePlugin as remix } from ""@remix-run/dev"";
     import { installGlobals } from ""@remix-run/node"";
     import { defineConfig } from ""vite"";
    +import { vercelPreset } from ""@vercel/remix/vite"";
     import tsconfigPaths from ""vite-tsconfig-paths"";
    
     installGlobals();
    
     export default defineConfig({
    -  plugins: [remix(), tsconfigPaths()],
    +  plugins: [remix({ presets: [vercelPreset()] }), tsconfigPaths()],
     });
    ```
1. Create a new Vercel Project in the dashboard, and ensure the Vercel
preset is set to ""Remix"" in the Project Settings. The autodetection will
work correctly once this PR is merged, but for now it gets incorrectly
detected as ""Vite"" preset.
* **Hint**: You can create a new empty Project by running the `vercel
link` command.
<img width=""545"" alt=""Screenshot 2024-02-27 at 10 37 11""
src=""https://github.com/vercel/vercel/assets/71256/f46baf57-5d97-4bde-9529-c9165632cb30"">
1. Deploy to Vercel, setting the `VERCEL_CLI_VERSION` environment
variable to use the changes in this PR:
    ```
vercel deploy -b
VERCEL_CLI_VERSION=https://vercel-git-tootallnate-zero-1217-research-remix-v-next-vite.vercel.sh/tarballs/vercel.tgz
    ```"
c2d99855ea6132380434ed29643120680f95fad7,JJ Kasper,2024-02-23 09:02:17+00:00,GitHub,2024-02-23 09:02:17+00:00,"Fix manifest with experimental flag (#11192)

This ensures we don't attempt the manifests filtering behavior with this
experimental flag enabled as it is incompatible with it as we don't know
what to filter by at this point."
0d112c848aac8fae50a6a71f6efa94b06d078b54,Vercel Release Bot,2024-02-22 16:08:24+00:00,GitHub,2024-02-22 16:08:24+00:00,"Version Packages (#11154)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@33.5.2

### Patch Changes

- Updated dependencies
\[[`e109e3325`](https://github.com/vercel/vercel/commit/e109e3325ab5299da0903034175fabe72d486a4e),
[`d17abf463`](https://github.com/vercel/vercel/commit/d17abf463acabf9e1e43b91200f18efd34e91f62),
[`644721a90`](https://github.com/vercel/vercel/commit/644721a90da8cf98414d272be9da0a821a2ce217),
[`ea0e9aeae`](https://github.com/vercel/vercel/commit/ea0e9aeaec8ddddb5a726be0d252df9cdbd84808),
[`e318a0eea`](https://github.com/vercel/vercel/commit/e318a0eea55c9b8536b0874f66cfd03aca6f0adf),
[`1fee87e76`](https://github.com/vercel/vercel/commit/1fee87e76f18d2f5e5524247cfce615fa1832e49),
[`bfc01fd98`](https://github.com/vercel/vercel/commit/bfc01fd98f760a008d0d2e6c52b5216503b44b75),
[`7910f2f30`](https://github.com/vercel/vercel/commit/7910f2f3070ff69742e845e795d4db77d598c181),
[`440ef3ba9`](https://github.com/vercel/vercel/commit/440ef3ba98af8f05e7714c86c67c36dbda11e85c)]:
    -   @vercel/remix-builder@2.0.20
    -   @vercel/next@4.1.2
    -   @vercel/node@3.0.20
    -   @vercel/redwood@2.0.8

## @vercel/next@4.1.2

### Patch Changes

- Update experimental bundle flag
([#11187](https://github.com/vercel/vercel/pull/11187))

- [next] Add flag for experimental grouping
([#11177](https://github.com/vercel/vercel/pull/11177))

- bump `@vercel/nft@0.26.4`
([#11155](https://github.com/vercel/vercel/pull/11155))

- fix: missing experimental field
([#11184](https://github.com/vercel/vercel/pull/11184))

## @vercel/node@3.0.20

### Patch Changes

- bump `@vercel/nft@0.26.4`
([#11155](https://github.com/vercel/vercel/pull/11155))

## @vercel/redwood@2.0.8

### Patch Changes

- bump `@vercel/nft@0.26.4`
([#11155](https://github.com/vercel/vercel/pull/11155))

## @vercel/remix-builder@2.0.20

### Patch Changes

- Don't install Remix fork when not using split configuration
([#11152](https://github.com/vercel/vercel/pull/11152))

- Add `serverBundles` post-build sanity check and fallback
([#11153](https://github.com/vercel/vercel/pull/11153))

- bump `@vercel/nft@0.26.4`
([#11155](https://github.com/vercel/vercel/pull/11155))

- Update `@remix-run/dev` fork to v2.6.0
([#11162](https://github.com/vercel/vercel/pull/11162))

- Update `@remix-run/dev` fork to v2.7.0
([#11180](https://github.com/vercel/vercel/pull/11180))

- Update `@remix-run/dev` fork to v2.7.2
([#11186](https://github.com/vercel/vercel/pull/11186))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
d17abf463acabf9e1e43b91200f18efd34e91f62,JJ Kasper,2024-02-22 04:53:16+00:00,GitHub,2024-02-22 04:53:16+00:00,"Update experimental bundle flag (#11187)

Makes bailing from grouping logic more explicit"
440ef3ba98af8f05e7714c86c67c36dbda11e85c,Vercel Release Bot,2024-02-22 00:27:49+00:00,GitHub,2024-02-22 00:27:49+00:00,[remix] Update `@remix-run/dev` to v2.7.2 (#11186)
38c5e93625297515b40be04b63e91fafc9365dfc,Wyatt Johnson,2024-02-21 17:50:56+00:00,GitHub,2024-02-21 17:50:56+00:00,"Add immutability modifiers to types (#11182)

This doesn't change any functionality, and only replaces some mutable types (like `Map`, `Set`, and `Array`) with their immutable versions (like `ReadonlyMap`, `ReadonlySet`, and `ReadonlyArray`). This can help keep functions as pure as possible and improves the readability of some of the involved functions."
4d51d777fe69dce1ef475c118dae9c1792387c3d,Vercel Release Bot,2024-02-21 15:56:50+00:00,GitHub,2024-02-21 15:56:50+00:00,"[tests] Upgrade Turbo to version 1.12.4 (#11173)

This auto-generated PR updates Turbo to version 1.12.4"
1fee87e76f18d2f5e5524247cfce615fa1832e49,JJ Kasper,2024-02-21 07:11:38+00:00,GitHub,2024-02-21 07:11:38+00:00,"fix: missing experimental field (#11184)

Ensures we pass this through properly when the flag is enabled"
ea0e9aeaec8ddddb5a726be0d252df9cdbd84808,JJ Kasper,2024-02-21 02:03:03+00:00,GitHub,2024-02-21 02:03:03+00:00,"[next] Add flag for experimental grouping (#11177)

Just adds a flag for experimenting"
7910f2f3070ff69742e845e795d4db77d598c181,Vercel Release Bot,2024-02-21 01:34:45+00:00,GitHub,2024-02-21 01:34:45+00:00,"[remix] Update `@remix-run/dev` to v2.7.0 (#11180)

This auto-generated PR updates `@remix-run/dev` to version 2.7.0."
670441620fe8fe60ead4d6be9ae7fa8e9300f5ec,Trek Glowacki,2024-02-15 20:59:00+00:00,GitHub,2024-02-15 20:59:00+00:00,"[tests] Add hydrogen-2023 to static-build test fixtures (#11163)

Add hydrogen-2023 to static-build test fixtures"
bfc01fd98f760a008d0d2e6c52b5216503b44b75,Vercel Release Bot,2024-02-15 19:32:15+00:00,GitHub,2024-02-15 19:32:15+00:00,"[remix] Update `@remix-run/dev` to v2.6.0 (#11162)

This auto-generated PR updates `@remix-run/dev` to version 2.6.0."
6d74b9b61ade06b4ff30e0a9ca53396f52fd9d62,Trek Glowacki,2024-02-15 18:41:02+00:00,GitHub,2024-02-15 18:41:02+00:00,"[tests] Add astro to dependabot (#11161)

Add astro to dependabot"
9483d49f72e5f9a01e2362001701c9063dfad07f,dependabot[bot],2024-02-15 17:25:58+00:00,GitHub,2024-02-15 17:25:58+00:00,"[framework-fixtures]: Bump the core group in /packages/static-build/test/fixtures/angular-v17 with 15 updates (#11160)

Bumps the core group in /packages/static-build/test/fixtures/angular-v17 with 15 updates:

| Package | From | To |
| --- | --- | --- |
| [@angular/animations](https://github.com/angular/angular/tree/HEAD/packages/animations) | `17.0.7` | `17.2.1` |
| [@angular/common](https://github.com/angular/angular/tree/HEAD/packages/common) | `17.0.7` | `17.2.1` |
| [@angular/compiler](https://github.com/angular/angular/tree/HEAD/packages/compiler) | `17.0.7` | `17.2.1` |
| [@angular/core](https://github.com/angular/angular/tree/HEAD/packages/core) | `17.0.7` | `17.2.1` |
| [@angular/forms](https://github.com/angular/angular/tree/HEAD/packages/forms) | `17.0.7` | `17.2.1` |
| [@angular/platform-browser](https://github.com/angular/angular/tree/HEAD/packages/platform-browser) | `17.0.7` | `17.2.1` |
| [@angular/platform-browser-dynamic](https://github.com/angular/angular/tree/HEAD/packages/platform-browser-dynamic) | `17.0.7` | `17.2.1` |
| [@angular/router](https://github.com/angular/angular/tree/HEAD/packages/router) | `17.0.7` | `17.2.1` |
| [@angular-devkit/build-angular](https://github.com/angular/angular-cli) | `17.0.7` | `17.2.0` |
| [@angular/cli](https://github.com/angular/angular-cli) | `17.0.7` | `17.2.0` |
| [@angular/compiler-cli](https://github.com/angular/angular/tree/HEAD/packages/compiler-cli) | `17.0.7` | `17.2.1` |
| [@angular-devkit/architect](https://github.com/angular/angular-cli) | `0.1700.7` | `0.1702.0` |
| [@angular-devkit/build-webpack](https://github.com/angular/angular-cli) | `0.1700.7` | `0.1702.0` |
| [@angular-devkit/core](https://github.com/angular/angular-cli) | `17.0.7` | `17.2.0` |
| [@angular-devkit/schematics](https://github.com/angular/angular-cli) | `17.0.7` | `17.2.0` |

Updates `@angular/animations` from 17.0.7 to 17.2.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/animations</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.2.1</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e""><img src=""https://img.shields.io/badge/7234824228-fix-green"" alt=""fix - 7234824228"" /></a></td>
<td>fix broken version detection condition (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.2.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d""><img src=""https://img.shields.io/badge/03c3b3eb79-feat-blue"" alt=""feat - 03c3b3eb79"" /></a></td>
<td>add Netlify image loader (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747""><img src=""https://img.shields.io/badge/f5c520b836-feat-blue"" alt=""feat - f5c520b836"" /></a></td>
<td>add placeholder to NgOptimizedImage (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617""><img src=""https://img.shields.io/badge/47e6e84101-feat-blue"" alt=""feat - 47e6e84101"" /></a></td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2""><img src=""https://img.shields.io/badge/66e940aebf-feat-blue"" alt=""feat - 66e940aebf"" /></a></td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78""><img src=""https://img.shields.io/badge/7b4d275f49-fix-green"" alt=""fix - 7b4d275f49"" /></a></td>
<td>Fix the template pipeline option (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0""><img src=""https://img.shields.io/badge/7e861c640e-feat-blue"" alt=""feat - 7e861c640e"" /></a></td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60""><img src=""https://img.shields.io/badge/3263df23f2-feat-blue"" alt=""feat - 3263df23f2"" /></a></td>
<td>generate global imports in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/b774e22d8e384f43e9cd8f5c55475d06e7f66988""><img src=""https://img.shields.io/badge/b774e22d8e-feat-blue"" alt=""feat - b774e22d8e"" /></a></td>
<td>make it configurable to generate alias reexports (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53937"">#53937</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3e1384048eb76c92532ae19aa2883318121c00e8""><img src=""https://img.shields.io/badge/3e1384048e-feat-blue"" alt=""feat - 3e1384048e"" /></a></td>
<td>support host directives for local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53877"">#53877</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/a592904c691844d2c1aed00bd914edabef49f9b1""><img src=""https://img.shields.io/badge/a592904c69-fix-green"" alt=""fix - a592904c69"" /></a></td>
<td>allow custom/duplicate decorators for <code>@Injectable</code> classes in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b1d948b36285ec6d80dbe93e0b92133f9d4be94""><img src=""https://img.shields.io/badge/4b1d948b36-fix-green"" alt=""fix - 4b1d948b36"" /></a></td>
<td>consider the case of duplicate Angular decorators in local compilation diagnostics (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/96bcf4fb1208d1f073784a2cde4a03553e905807""><img src=""https://img.shields.io/badge/96bcf4fb12-fix-green"" alt=""fix - 96bcf4fb12"" /></a></td>
<td>forbid custom/duplicate decorator when option <code>forbidOrphanComponents</code> is set (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/64fa5715c696101fba0b4f8623eaec0eadc5b159""><img src=""https://img.shields.io/badge/64fa5715c6-fix-green"" alt=""fix - 64fa5715c6"" /></a></td>
<td>generating extra imports in local compilation mode when cycle is introduced (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6c8b09468a05a80cba3960861f0ab8d3bae80415""><img src=""https://img.shields.io/badge/6c8b09468a-fix-green"" alt=""fix - 6c8b09468a"" /></a></td>
<td>highlight the unresolved element in the <a href=""https://github.com/Component""><code>@Component</code></a>.styles array for the error LOCAL_COMPILATION_UNRESOLVED_CONST (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/0970129e20f77dc309f2b4f76f961b310124778c""><img src=""https://img.shields.io/badge/0970129e20-fix-green"" alt=""fix - 0970129e20"" /></a></td>
<td>show proper error for custom decorators in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53983"">#53983</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f39cb064183d984254bdf4e41b61d3dc9379738a""><img src=""https://img.shields.io/badge/f39cb06418-fix-green"" alt=""fix - f39cb06418"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/Directive""><code>@Directive</code></a>.exportAs in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f3851b59459a1d9c214ace3db5a716d51c1f93c7""><img src=""https://img.shields.io/badge/f3851b5945-fix-green"" alt=""fix - f3851b5945"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostBinding""><code>@HostBinding</code></a>'s argument in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39ddd884e826cc0be63fd0f7d7de20d642877ef9""><img src=""https://img.shields.io/badge/39ddd884e8-fix-green"" alt=""fix - 39ddd884e8"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostListener""><code>@HostListener</code></a>'s event name in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5d633240fd5927c4318a9240e60c3a30b2333cee""><img src=""https://img.shields.io/badge/5d633240fd-fix-green"" alt=""fix - 5d633240fd"" /></a></td>
<td>show the correct message for the error LOCAL_COMPILATION_UNRESOLVED_CONST when an unresolved symbol used for <a href=""https://github.com/Component""><code>@Component</code></a>.styles (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/58b8a232d64f5fe3207c90c8145cab36e7e192c2""><img src=""https://img.shields.io/badge/58b8a232d6-fix-green"" alt=""fix - 58b8a232d6"" /></a></td>
<td>support jumping to definitions of signal-based inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54053"">#54053</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/702ab28b4c07a903c403a20af2ca287348b6afd0""><img src=""https://img.shields.io/badge/702ab28b4c-feat-blue"" alt=""feat - 702ab28b4c"" /></a></td>
<td>add support for model inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54252"">#54252</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/e95ef2cbc6f850d8fe96218b74cff76cea947674""><img src=""https://img.shields.io/badge/e95ef2cbc6-feat-blue"" alt=""feat - e95ef2cbc6"" /></a></td>
<td>expose queries as signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54283"">#54283</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/656bc282e345c5e37a9189a0a4daa631e02c31bf""><img src=""https://img.shields.io/badge/656bc282e3-fix-green"" alt=""fix - 656bc282e3"" /></a></td>
<td>add toString implementation to signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54002"">#54002</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/62b87b4551d77815f58af152d1921de3733621ba""><img src=""https://img.shields.io/badge/62b87b4551-fix-green"" alt=""fix - 62b87b4551"" /></a></td>
<td>do not crash for signal query that does not have any matches (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54353"">#54353</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b96f370eea08d2531cc54f65a651f94b504692d""><img src=""https://img.shields.io/badge/4b96f370ee-fix-green"" alt=""fix - 4b96f370ee"" /></a></td>
<td>expose model signal subcribe for type checking purposes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54357"">#54357</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/744cb1e561d9b0cbffd20ad612d5ea9e2cf6b2e7""><img src=""https://img.shields.io/badge/744cb1e561-fix-green"" alt=""fix - 744cb1e561"" /></a></td>
<td>return the same children query results if there are no changes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54392"">#54392</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6d00115bf45731b80178e11921df6ec1dc89efaf""><img src=""https://img.shields.io/badge/6d00115bf4-fix-green"" alt=""fix - 6d00115bf4"" /></a></td>
<td>show placeholder block on the server with immediate trigger (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/54394"">#54394</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/animations</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e"">7234824228</a></td>
<td>fix</td>
<td>fix broken version detection condition (<a href=""https://redirect.github.com/angular/angular/pull/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d"">03c3b3eb79</a></td>
<td>feat</td>
<td>add Netlify image loader (<a href=""https://redirect.github.com/angular/angular/pull/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747"">f5c520b836</a></td>
<td>feat</td>
<td>add placeholder to NgOptimizedImage (<a href=""https://redirect.github.com/angular/angular/pull/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617"">47e6e84101</a></td>
<td>feat</td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://redirect.github.com/angular/angular/pull/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2"">66e940aebf</a></td>
<td>feat</td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://redirect.github.com/angular/angular/pull/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78"">7b4d275f49</a></td>
<td>fix</td>
<td>Fix the template pipeline option (<a href=""https://redirect.github.com/angular/angular/pull/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0"">7e861c640e</a></td>
<td>feat</td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60"">3263df23f2</a></td>
<td>feat</td>
<td>generate global imports in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/b774e22d8e384f43e9cd8f5c55475d06e7f66988"">b774e22d8e</a></td>
<td>feat</td>
<td>make it configurable to generate alias reexports (<a href=""https://redirect.github.com/angular/angular/pull/53937"">#53937</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3e1384048eb76c92532ae19aa2883318121c00e8"">3e1384048e</a></td>
<td>feat</td>
<td>support host directives for local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53877"">#53877</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/a592904c691844d2c1aed00bd914edabef49f9b1"">a592904c69</a></td>
<td>fix</td>
<td>allow custom/duplicate decorators for <code>@Injectable</code> classes in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b1d948b36285ec6d80dbe93e0b92133f9d4be94"">4b1d948b36</a></td>
<td>fix</td>
<td>consider the case of duplicate Angular decorators in local compilation diagnostics (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/96bcf4fb1208d1f073784a2cde4a03553e905807"">96bcf4fb12</a></td>
<td>fix</td>
<td>forbid custom/duplicate decorator when option <code>forbidOrphanComponents</code> is set (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/64fa5715c696101fba0b4f8623eaec0eadc5b159"">64fa5715c6</a></td>
<td>fix</td>
<td>generating extra imports in local compilation mode when cycle is introduced (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6c8b09468a05a80cba3960861f0ab8d3bae80415"">6c8b09468a</a></td>
<td>fix</td>
<td>highlight the unresolved element in the <a href=""https://github.com/Component""><code>@Component</code></a>.styles array for the error LOCAL_COMPILATION_UNRESOLVED_CONST (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/0970129e20f77dc309f2b4f76f961b310124778c"">0970129e20</a></td>
<td>fix</td>
<td>show proper error for custom decorators in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53983"">#53983</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f39cb064183d984254bdf4e41b61d3dc9379738a"">f39cb06418</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/Directive""><code>@Directive</code></a>.exportAs in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f3851b59459a1d9c214ace3db5a716d51c1f93c7"">f3851b5945</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/HostBinding""><code>@HostBinding</code></a>'s argument in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39ddd884e826cc0be63fd0f7d7de20d642877ef9"">39ddd884e8</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/HostListener""><code>@HostListener</code></a>'s event name in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5d633240fd5927c4318a9240e60c3a30b2333cee"">5d633240fd</a></td>
<td>fix</td>
<td>show the correct message for the error LOCAL_COMPILATION_UNRESOLVED_CONST when an unresolved symbol used for <a href=""https://github.com/Component""><code>@Component</code></a>.styles (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/58b8a232d64f5fe3207c90c8145cab36e7e192c2"">58b8a232d6</a></td>
<td>fix</td>
<td>support jumping to definitions of signal-based inputs (<a href=""https://redirect.github.com/angular/angular/pull/54053"">#54053</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/702ab28b4c07a903c403a20af2ca287348b6afd0"">702ab28b4c</a></td>
<td>feat</td>
<td>add support for model inputs (<a href=""https://redirect.github.com/angular/angular/pull/54252"">#54252</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/e95ef2cbc6f850d8fe96218b74cff76cea947674"">e95ef2cbc6</a></td>
<td>feat</td>
<td>expose queries as signals (<a href=""https://redirect.github.com/angular/angular/pull/54283"">#54283</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/656bc282e345c5e37a9189a0a4daa631e02c31bf"">656bc282e3</a></td>
<td>fix</td>
<td>add toString implementation to signals (<a href=""https://redirect.github.com/angular/angular/pull/54002"">#54002</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/62b87b4551d77815f58af152d1921de3733621ba"">62b87b4551</a></td>
<td>fix</td>
<td>do not crash for signal query that does not have any matches (<a href=""https://redirect.github.com/angular/angular/pull/54353"">#54353</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b96f370eea08d2531cc54f65a651f94b504692d"">4b96f370ee</a></td>
<td>fix</td>
<td>expose model signal subcribe for type checking purposes (<a href=""https://redirect.github.com/angular/angular/pull/54357"">#54357</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/744cb1e561d9b0cbffd20ad612d5ea9e2cf6b2e7"">744cb1e561</a></td>
<td>fix</td>
<td>return the same children query results if there are no changes (<a href=""https://redirect.github.com/angular/angular/pull/54392"">#54392</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6d00115bf45731b80178e11921df6ec1dc89efaf"">6d00115bf4</a></td>
<td>fix</td>
<td>show placeholder block on the server with immediate trigger (<a href=""https://redirect.github.com/angular/angular/pull/54394"">#54394</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/angular/angular/commit/bbbe477f479f20722f0fea7ccc46095aad5d4253""><code>bbbe477</code></a> refactor: migrate animations to prettier formatting (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/53977"">#53977</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/5ae85e4849b32404d1a29985311fa5134f2c1406""><code>5ae85e4</code></a> refactor(core): node removal notifies scheduler only when animations are enab...</li>
<li><a href=""https://github.com/angular/angular/commit/91f250dab7dcd6aacab04cb4cfff321aa7b6001f""><code>91f250d</code></a> build: configure cross-pkg resolution for api extraction (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/52499"">#52499</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/c4de4e1f894001d8f80b70297c5e576f2d11ec6f""><code>c4de4e1</code></a> refactor(docs-infra): build adev application using local generated assets (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/5"">#5</a>...</li>
<li><a href=""https://github.com/angular/angular/commit/d7e7409e8115210614ff69f6bc6ddae1a5076986""><code>d7e7409</code></a> refactor(animations): drop <code>convertToMap</code> &amp; <code>copyStyles</code> and use native funct...</li>
<li><a href=""https://github.com/angular/angular/commit/d28ce0a4cffb16cbfcb93c4c1f6b389dd603e1a1""><code>d28ce0a</code></a> refactor(animations): use a spread operator instead of custom <code>copyObj</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/52441"">#52441</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/6a347d36eb5d26935497590cb879c678ad40f834""><code>6a347d3</code></a> refactor(animations): use a spread operator to convert an iterable to an arra...</li>
<li><a href=""https://github.com/angular/angular/commit/635c3b4fa8a3f241654406e98da08efd2f00e478""><code>635c3b4</code></a> refactor(animations): use existing helper methods. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/52441"">#52441</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/5ee11a74ec5a301aae81b14fe36ba1432a68bf19""><code>5ee11a7</code></a> fix(animations): prevent the AsyncAnimationRenderer from calling the delegate...</li>
<li><a href=""https://github.com/angular/angular/commit/a02a745a4ada46a084235f94b68d5defd224ddcf""><code>a02a745</code></a> fix(animations): remove <code>finish</code> listener once player is destroyed (<a href=""https://github.com/angular/angular/tree/HEAD/packages/animations/issues/51136"">#51136</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/angular/angular/commits/17.2.1/packages/animations"">compare view</a></li>
</ul>
</details>
<br />

Updates `@angular/common` from 17.0.7 to 17.2.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/common</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.2.1</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e""><img src=""https://img.shields.io/badge/7234824228-fix-green"" alt=""fix - 7234824228"" /></a></td>
<td>fix broken version detection condition (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.2.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d""><img src=""https://img.shields.io/badge/03c3b3eb79-feat-blue"" alt=""feat - 03c3b3eb79"" /></a></td>
<td>add Netlify image loader (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747""><img src=""https://img.shields.io/badge/f5c520b836-feat-blue"" alt=""feat - f5c520b836"" /></a></td>
<td>add placeholder to NgOptimizedImage (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617""><img src=""https://img.shields.io/badge/47e6e84101-feat-blue"" alt=""feat - 47e6e84101"" /></a></td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2""><img src=""https://img.shields.io/badge/66e940aebf-feat-blue"" alt=""feat - 66e940aebf"" /></a></td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78""><img src=""https://img.shields.io/badge/7b4d275f49-fix-green"" alt=""fix - 7b4d275f49"" /></a></td>
<td>Fix the template pipeline option (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0""><img src=""https://img.shields.io/badge/7e861c640e-feat-blue"" alt=""feat - 7e861c640e"" /></a></td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60""><img src=""https://img.shields.io/badge/3263df23f2-feat-blue"" alt=""feat - 3263df23f2"" /></a></td>
<td>generate global imports in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/b774e22d8e384f43e9cd8f5c55475d06e7f66988""><img src=""https://img.shields.io/badge/b774e22d8e-feat-blue"" alt=""feat - b774e22d8e"" /></a></td>
<td>make it configurable to generate alias reexports (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53937"">#53937</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3e1384048eb76c92532ae19aa2883318121c00e8""><img src=""https://img.shields.io/badge/3e1384048e-feat-blue"" alt=""feat - 3e1384048e"" /></a></td>
<td>support host directives for local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53877"">#53877</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/a592904c691844d2c1aed00bd914edabef49f9b1""><img src=""https://img.shields.io/badge/a592904c69-fix-green"" alt=""fix - a592904c69"" /></a></td>
<td>allow custom/duplicate decorators for <code>@Injectable</code> classes in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b1d948b36285ec6d80dbe93e0b92133f9d4be94""><img src=""https://img.shields.io/badge/4b1d948b36-fix-green"" alt=""fix - 4b1d948b36"" /></a></td>
<td>consider the case of duplicate Angular decorators in local compilation diagnostics (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/96bcf4fb1208d1f073784a2cde4a03553e905807""><img src=""https://img.shields.io/badge/96bcf4fb12-fix-green"" alt=""fix - 96bcf4fb12"" /></a></td>
<td>forbid custom/duplicate decorator when option <code>forbidOrphanComponents</code> is set (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/64fa5715c696101fba0b4f8623eaec0eadc5b159""><img src=""https://img.shields.io/badge/64fa5715c6-fix-green"" alt=""fix - 64fa5715c6"" /></a></td>
<td>generating extra imports in local compilation mode when cycle is introduced (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6c8b09468a05a80cba3960861f0ab8d3bae80415""><img src=""https://img.shields.io/badge/6c8b09468a-fix-green"" alt=""fix - 6c8b09468a"" /></a></td>
<td>highlight the unresolved element in the <a href=""https://github.com/Component""><code>@Component</code></a>.styles array for the error LOCAL_COMPILATION_UNRESOLVED_CONST (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/0970129e20f77dc309f2b4f76f961b310124778c""><img src=""https://img.shields.io/badge/0970129e20-fix-green"" alt=""fix - 0970129e20"" /></a></td>
<td>show proper error for custom decorators in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53983"">#53983</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f39cb064183d984254bdf4e41b61d3dc9379738a""><img src=""https://img.shields.io/badge/f39cb06418-fix-green"" alt=""fix - f39cb06418"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/Directive""><code>@Directive</code></a>.exportAs in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f3851b59459a1d9c214ace3db5a716d51c1f93c7""><img src=""https://img.shields.io/badge/f3851b5945-fix-green"" alt=""fix - f3851b5945"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostBinding""><code>@HostBinding</code></a>'s argument in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39ddd884e826cc0be63fd0f7d7de20d642877ef9""><img src=""https://img.shields.io/badge/39ddd884e8-fix-green"" alt=""fix - 39ddd884e8"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostListener""><code>@HostListener</code></a>'s event name in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5d633240fd5927c4318a9240e60c3a30b2333cee""><img src=""https://img.shields.io/badge/5d633240fd-fix-green"" alt=""fix - 5d633240fd"" /></a></td>
<td>show the correct message for the error LOCAL_COMPILATION_UNRESOLVED_CONST when an unresolved symbol used for <a href=""https://github.com/Component""><code>@Component</code></a>.styles (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/58b8a232d64f5fe3207c90c8145cab36e7e192c2""><img src=""https://img.shields.io/badge/58b8a232d6-fix-green"" alt=""fix - 58b8a232d6"" /></a></td>
<td>support jumping to definitions of signal-based inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54053"">#54053</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/702ab28b4c07a903c403a20af2ca287348b6afd0""><img src=""https://img.shields.io/badge/702ab28b4c-feat-blue"" alt=""feat - 702ab28b4c"" /></a></td>
<td>add support for model inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54252"">#54252</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/e95ef2cbc6f850d8fe96218b74cff76cea947674""><img src=""https://img.shields.io/badge/e95ef2cbc6-feat-blue"" alt=""feat - e95ef2cbc6"" /></a></td>
<td>expose queries as signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54283"">#54283</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/656bc282e345c5e37a9189a0a4daa631e02c31bf""><img src=""https://img.shields.io/badge/656bc282e3-fix-green"" alt=""fix - 656bc282e3"" /></a></td>
<td>add toString implementation to signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54002"">#54002</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/62b87b4551d77815f58af152d1921de3733621ba""><img src=""https://img.shields.io/badge/62b87b4551-fix-green"" alt=""fix - 62b87b4551"" /></a></td>
<td>do not crash for signal query that does not have any matches (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54353"">#54353</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b96f370eea08d2531cc54f65a651f94b504692d""><img src=""https://img.shields.io/badge/4b96f370ee-fix-green"" alt=""fix - 4b96f370ee"" /></a></td>
<td>expose model signal subcribe for type checking purposes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54357"">#54357</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/744cb1e561d9b0cbffd20ad612d5ea9e2cf6b2e7""><img src=""https://img.shields.io/badge/744cb1e561-fix-green"" alt=""fix - 744cb1e561"" /></a></td>
<td>return the same children query results if there are no changes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54392"">#54392</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6d00115bf45731b80178e11921df6ec1dc89efaf""><img src=""https://img.shields.io/badge/6d00115bf4-fix-green"" alt=""fix - 6d00115bf4"" /></a></td>
<td>show placeholder block on the server with immediate trigger (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54394"">#54394</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/common</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e"">7234824228</a></td>
<td>fix</td>
<td>fix broken version detection condition (<a href=""https://redirect.github.com/angular/angular/pull/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d"">03c3b3eb79</a></td>
<td>feat</td>
<td>add Netlify image loader (<a href=""https://redirect.github.com/angular/angular/pull/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747"">f5c520b836</a></td>
<td>feat</td>
<td>add placeholder to NgOptimizedImage (<a href=""https://redirect.github.com/angular/angular/pull/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617"">47e6e84101</a></td>
<td>feat</td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://redirect.github.com/angular/angular/pull/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2"">66e940aebf</a></td>
<td>feat</td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://redirect.github.com/angular/angular/pull/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78"">7b4d275f49</a></td>
<td>fix</td>
<td>Fix the template pipeline option (<a href=""https://redirect.github.com/angular/angular/pull/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0"">7e861c640e</a></td>
<td>feat</td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60"">3263df23f2</a></td>
<td>feat</td>
<td>generate global imports in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/b774e22d8e384f43e9cd8f5c55475d06e7f66988"">b774e22d8e</a></td>
<td>feat</td>
<td>make it configurable to generate alias reexports (<a href=""https://redirect.github.com/angular/angular/pull/53937"">#53937</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3e1384048eb76c92532ae19aa2883318121c00e8"">3e1384048e</a></td>
<td>feat</td>
<td>support host directives for local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53877"">#53877</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/a592904c691844d2c1aed00bd914edabef49f9b1"">a592904c69</a></td>
<td>fix</td>
<td>allow custom/duplicate decorators for <code>@Injectable</code> classes in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b1d948b36285ec6d80dbe93e0b92133f9d4be94"">4b1d948b36</a></td>
<td>fix</td>
<td>consider the case of duplicate Angular decorators in local compilation diagnostics (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/96bcf4fb1208d1f073784a2cde4a03553e905807"">96bcf4fb12</a></td>
<td>fix</td>
<td>forbid custom/duplicate decorator when option <code>forbidOrphanComponents</code> is set (<a href=""https://redirect.github.com/angular/angular/pull/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/64fa5715c696101fba0b4f8623eaec0eadc5b159"">64fa5715c6</a></td>
<td>fix</td>
<td>generating extra imports in local compilation mode when cycle is introduced (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6c8b09468a05a80cba3960861f0ab8d3bae80415"">6c8b09468a</a></td>
<td>fix</td>
<td>highlight the unresolved element in the <a href=""https://github.com/Component""><code>@Component</code></a>.styles array for the error LOCAL_COMPILATION_UNRESOLVED_CONST (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/0970129e20f77dc309f2b4f76f961b310124778c"">0970129e20</a></td>
<td>fix</td>
<td>show proper error for custom decorators in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53983"">#53983</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f39cb064183d984254bdf4e41b61d3dc9379738a"">f39cb06418</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/Directive""><code>@Directive</code></a>.exportAs in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f3851b59459a1d9c214ace3db5a716d51c1f93c7"">f3851b5945</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/HostBinding""><code>@HostBinding</code></a>'s argument in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39ddd884e826cc0be63fd0f7d7de20d642877ef9"">39ddd884e8</a></td>
<td>fix</td>
<td>show specific error for unresolved <a href=""https://github.com/HostListener""><code>@HostListener</code></a>'s event name in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5d633240fd5927c4318a9240e60c3a30b2333cee"">5d633240fd</a></td>
<td>fix</td>
<td>show the correct message for the error LOCAL_COMPILATION_UNRESOLVED_CONST when an unresolved symbol used for <a href=""https://github.com/Component""><code>@Component</code></a>.styles (<a href=""https://redirect.github.com/angular/angular/pull/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/58b8a232d64f5fe3207c90c8145cab36e7e192c2"">58b8a232d6</a></td>
<td>fix</td>
<td>support jumping to definitions of signal-based inputs (<a href=""https://redirect.github.com/angular/angular/pull/54053"">#54053</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/702ab28b4c07a903c403a20af2ca287348b6afd0"">702ab28b4c</a></td>
<td>feat</td>
<td>add support for model inputs (<a href=""https://redirect.github.com/angular/angular/pull/54252"">#54252</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/e95ef2cbc6f850d8fe96218b74cff76cea947674"">e95ef2cbc6</a></td>
<td>feat</td>
<td>expose queries as signals (<a href=""https://redirect.github.com/angular/angular/pull/54283"">#54283</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/656bc282e345c5e37a9189a0a4daa631e02c31bf"">656bc282e3</a></td>
<td>fix</td>
<td>add toString implementation to signals (<a href=""https://redirect.github.com/angular/angular/pull/54002"">#54002</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/62b87b4551d77815f58af152d1921de3733621ba"">62b87b4551</a></td>
<td>fix</td>
<td>do not crash for signal query that does not have any matches (<a href=""https://redirect.github.com/angular/angular/pull/54353"">#54353</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b96f370eea08d2531cc54f65a651f94b504692d"">4b96f370ee</a></td>
<td>fix</td>
<td>expose model signal subcribe for type checking purposes (<a href=""https://redirect.github.com/angular/angular/pull/54357"">#54357</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/744cb1e561d9b0cbffd20ad612d5ea9e2cf6b2e7"">744cb1e561</a></td>
<td>fix</td>
<td>return the same children query results if there are no changes (<a href=""https://redirect.github.com/angular/angular/pull/54392"">#54392</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6d00115bf45731b80178e11921df6ec1dc89efaf"">6d00115bf4</a></td>
<td>fix</td>
<td>show placeholder block on the server with immediate trigger (<a href=""https://redirect.github.com/angular/angular/pull/54394"">#54394</a>)</td>
</tr>
</tbody>
</table>
<h3>http</h3>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/angular/angular/commit/1c536250b6112c67a68159de50c4afe0dbc440f8""><code>1c53625</code></a> fix(http): Use string body to generate transfer cache key. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54379"">#54379</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d""><code>03c3b3e</code></a> feat(common): add Netlify image loader (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54311"">#54311</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/122213d37d3e73fc0dcfd5a10a2c388dc573b6cf""><code>122213d</code></a> fix(common): The date pipe should return ISO format for week and week-year as...</li>
<li><a href=""https://github.com/angular/angular/commit/4a44f7328894a7457ab7ef93d7c000e643ee8f9e""><code>4a44f73</code></a> docs: Update docs about equality. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54158"">#54158</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/0460a9dfafe3a7ebbff1b87e52048fb7416bba43""><code>0460a9d</code></a> refactor: migrate common to prettier formatting (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/54150"">#54150</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/f3567bbc26644281461aa819d0986b1db0282b69""><code>f3567bb</code></a> refactor(common): simplify i18n plural and select pipe metadata (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53939"">#53939</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/3c881acc5d349afb7c09ae463813580f4f9242f1""><code>3c881ac</code></a> refactor(common): simplify date pipe metadata (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53939"">#53939</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/15c48113c23d95a622bcb798f62e33e751509cb9""><code>15c4811</code></a> refactor(router): Update integration tests to cover navigation and history AP...</li>
<li><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747""><code>f5c520b</code></a> feat(common): add placeholder to NgOptimizedImage (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/53783"">#53783</a>)</li>
<li><a href=""https://github.com/angular/angular/commit/7800a3c9f50858e0f60eba3ed05e756e5a6e1c0b""><code>7800a3c</code></a> refactor(core): remove <code>InjectionToken</code> descriptions in optimized builds. (<a href=""https://github.com/angular/angular/tree/HEAD/packages/common/issues/5"">#5</a>...</li>
<li>Additional commits viewable in <a href=""https://github.com/angular/angular/commits/17.2.1/packages/common"">compare view</a></li>
</ul>
</details>
<br />

Updates `@angular/compiler` from 17.0.7 to 17.2.1
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/releases""><code>@angular/compiler</code>'s releases</a>.</em></p>
<blockquote>
<h2>v17.2.1</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e""><img src=""https://img.shields.io/badge/7234824228-fix-green"" alt=""fix - 7234824228"" /></a></td>
<td>fix broken version detection condition (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<h2>v17.2.0</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d""><img src=""https://img.shields.io/badge/03c3b3eb79-feat-blue"" alt=""feat - 03c3b3eb79"" /></a></td>
<td>add Netlify image loader (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747""><img src=""https://img.shields.io/badge/f5c520b836-feat-blue"" alt=""feat - f5c520b836"" /></a></td>
<td>add placeholder to NgOptimizedImage (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617""><img src=""https://img.shields.io/badge/47e6e84101-feat-blue"" alt=""feat - 47e6e84101"" /></a></td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2""><img src=""https://img.shields.io/badge/66e940aebf-feat-blue"" alt=""feat - 66e940aebf"" /></a></td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78""><img src=""https://img.shields.io/badge/7b4d275f49-fix-green"" alt=""fix - 7b4d275f49"" /></a></td>
<td>Fix the template pipeline option (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0""><img src=""https://img.shields.io/badge/7e861c640e-feat-blue"" alt=""feat - 7e861c640e"" /></a></td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60""><img src=""https://img.shields.io/badge/3263df23f2-feat-blue"" alt=""feat - 3263df23f2"" /></a></td>
<td>generate global imports in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/b774e22d8e384f43e9cd8f5c55475d06e7f66988""><img src=""https://img.shields.io/badge/b774e22d8e-feat-blue"" alt=""feat - b774e22d8e"" /></a></td>
<td>make it configurable to generate alias reexports (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53937"">#53937</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3e1384048eb76c92532ae19aa2883318121c00e8""><img src=""https://img.shields.io/badge/3e1384048e-feat-blue"" alt=""feat - 3e1384048e"" /></a></td>
<td>support host directives for local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53877"">#53877</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/a592904c691844d2c1aed00bd914edabef49f9b1""><img src=""https://img.shields.io/badge/a592904c69-fix-green"" alt=""fix - a592904c69"" /></a></td>
<td>allow custom/duplicate decorators for <code>@Injectable</code> classes in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b1d948b36285ec6d80dbe93e0b92133f9d4be94""><img src=""https://img.shields.io/badge/4b1d948b36-fix-green"" alt=""fix - 4b1d948b36"" /></a></td>
<td>consider the case of duplicate Angular decorators in local compilation diagnostics (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/96bcf4fb1208d1f073784a2cde4a03553e905807""><img src=""https://img.shields.io/badge/96bcf4fb12-fix-green"" alt=""fix - 96bcf4fb12"" /></a></td>
<td>forbid custom/duplicate decorator when option <code>forbidOrphanComponents</code> is set (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54139"">#54139</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/64fa5715c696101fba0b4f8623eaec0eadc5b159""><img src=""https://img.shields.io/badge/64fa5715c6-fix-green"" alt=""fix - 64fa5715c6"" /></a></td>
<td>generating extra imports in local compilation mode when cycle is introduced (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6c8b09468a05a80cba3960861f0ab8d3bae80415""><img src=""https://img.shields.io/badge/6c8b09468a-fix-green"" alt=""fix - 6c8b09468a"" /></a></td>
<td>highlight the unresolved element in the <a href=""https://github.com/Component""><code>@Component</code></a>.styles array for the error LOCAL_COMPILATION_UNRESOLVED_CONST (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/0970129e20f77dc309f2b4f76f961b310124778c""><img src=""https://img.shields.io/badge/0970129e20-fix-green"" alt=""fix - 0970129e20"" /></a></td>
<td>show proper error for custom decorators in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/53983"">#53983</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f39cb064183d984254bdf4e41b61d3dc9379738a""><img src=""https://img.shields.io/badge/f39cb06418-fix-green"" alt=""fix - f39cb06418"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/Directive""><code>@Directive</code></a>.exportAs in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f3851b59459a1d9c214ace3db5a716d51c1f93c7""><img src=""https://img.shields.io/badge/f3851b5945-fix-green"" alt=""fix - f3851b5945"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostBinding""><code>@HostBinding</code></a>'s argument in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/39ddd884e826cc0be63fd0f7d7de20d642877ef9""><img src=""https://img.shields.io/badge/39ddd884e8-fix-green"" alt=""fix - 39ddd884e8"" /></a></td>
<td>show specific error for unresolved <a href=""https://github.com/HostListener""><code>@HostListener</code></a>'s event name in local compilation mode (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/5d633240fd5927c4318a9240e60c3a30b2333cee""><img src=""https://img.shields.io/badge/5d633240fd-fix-green"" alt=""fix - 5d633240fd"" /></a></td>
<td>show the correct message for the error LOCAL_COMPILATION_UNRESOLVED_CONST when an unresolved symbol used for <a href=""https://github.com/Component""><code>@Component</code></a>.styles (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54230"">#54230</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/58b8a232d64f5fe3207c90c8145cab36e7e192c2""><img src=""https://img.shields.io/badge/58b8a232d6-fix-green"" alt=""fix - 58b8a232d6"" /></a></td>
<td>support jumping to definitions of signal-based inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54053"">#54053</a>)</td>
</tr>
</tbody>
</table>
<h3>core</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/702ab28b4c07a903c403a20af2ca287348b6afd0""><img src=""https://img.shields.io/badge/702ab28b4c-feat-blue"" alt=""feat - 702ab28b4c"" /></a></td>
<td>add support for model inputs (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54252"">#54252</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/e95ef2cbc6f850d8fe96218b74cff76cea947674""><img src=""https://img.shields.io/badge/e95ef2cbc6-feat-blue"" alt=""feat - e95ef2cbc6"" /></a></td>
<td>expose queries as signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54283"">#54283</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/656bc282e345c5e37a9189a0a4daa631e02c31bf""><img src=""https://img.shields.io/badge/656bc282e3-fix-green"" alt=""fix - 656bc282e3"" /></a></td>
<td>add toString implementation to signals (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54002"">#54002</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/62b87b4551d77815f58af152d1921de3733621ba""><img src=""https://img.shields.io/badge/62b87b4551-fix-green"" alt=""fix - 62b87b4551"" /></a></td>
<td>do not crash for signal query that does not have any matches (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54353"">#54353</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/4b96f370eea08d2531cc54f65a651f94b504692d""><img src=""https://img.shields.io/badge/4b96f370ee-fix-green"" alt=""fix - 4b96f370ee"" /></a></td>
<td>expose model signal subcribe for type checking purposes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54357"">#54357</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/744cb1e561d9b0cbffd20ad612d5ea9e2cf6b2e7""><img src=""https://img.shields.io/badge/744cb1e561-fix-green"" alt=""fix - 744cb1e561"" /></a></td>
<td>return the same children query results if there are no changes (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54392"">#54392</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/6d00115bf45731b80178e11921df6ec1dc89efaf""><img src=""https://img.shields.io/badge/6d00115bf4-fix-green"" alt=""fix - 6d00115bf4"" /></a></td>
<td>show placeholder block on the server with immediate trigger (<a href=""https://github.com/angular/angular/tree/HEAD/packages/compiler/issues/54394"">#54394</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/angular/angular/blob/main/CHANGELOG.md""><code>@angular/compiler</code>'s changelog</a>.</em></p>
<blockquote>
<h1>17.2.1 (2024-02-14)</h1>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7234824228df11249a5ebe01a6dee381be74e02e"">7234824228</a></td>
<td>fix</td>
<td>fix broken version detection condition (<a href=""https://redirect.github.com/angular/angular/pull/54443"">#54443</a>)</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1>17.2.0 (2024-02-14)</h1>
<h3>common</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/03c3b3eb79ec061b0031d6ad7ba386d185c87d8d"">03c3b3eb79</a></td>
<td>feat</td>
<td>add Netlify image loader (<a href=""https://redirect.github.com/angular/angular/pull/54311"">#54311</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/f5c520b836c4545c7043649f28b3a0369c168747"">f5c520b836</a></td>
<td>feat</td>
<td>add placeholder to NgOptimizedImage (<a href=""https://redirect.github.com/angular/angular/pull/53783"">#53783</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/47e6e841016abfca0c1aa84051d82a04b3027617"">47e6e84101</a></td>
<td>feat</td>
<td>Add a TSConfig option <code>useTemplatePipeline</code> (<a href=""https://redirect.github.com/angular/angular/pull/54057"">#54057</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/66e940aebfd5a93944860a4e0dbd14e1072f80f2"">66e940aebf</a></td>
<td>feat</td>
<td>scope selectors in <a href=""https://github.com/starting-style""><code>@starting-style</code></a> (<a href=""https://redirect.github.com/angular/angular/pull/53943"">#53943</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7b4d275f494a64c38b61cea7045ba8b6e8447b78"">7b4d275f49</a></td>
<td>fix</td>
<td>Fix the template pipeline option (<a href=""https://redirect.github.com/angular/angular/pull/54148"">#54148</a>)</td>
</tr>
</tbody>
</table>
<h3>compiler-cli</h3>
<table>
<thead>
<tr>
<th>Commit</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=""https://github.com/angular/angular/commit/7e861c640edf90c5f8d4f7e091861d3d98cd49c0"">7e861c640e</a></td>
<td>feat</td>
<td>generate extra imports for component local dependencies in local mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<tr>
<td><a href=""https://github.com/angular/angular/commit/3263df23f2f4da722ef2c1a1dacfb0866498dd60"">3263df23f2</a></td>
<td>feat</td>
<td>generate global imports in local compilation mode (<a href=""https://redirect.github.com/angular/angular/pull/53543"">#53543</a>)</td>
</tr>
<"
6740f9b1559296d856e34e27a3c58974e3f29e0b,Trek Glowacki,2024-02-15 16:53:13+00:00,GitHub,2024-02-15 16:53:13+00:00,"[tests] Add dependabot for fixture updates (#11159)

Gradually adding dependabot updaters to avoid the problem of getting
hundreds of individual updates:

* Using the new `groups` key (new as of [~September
2023](https://github.blog/changelog/2023-08-24-grouped-version-updates-for-dependabot-are-generally-available/)).
* Focused only to ""core"" dependencies of the framework.
* Tested on [separate
repo](https://github.com/trek/test-dependabot/pull/5) to avoid PR spam."
b663f813e190c3989fe117460a7f04f1a6a25372,Trek Glowacki,2024-02-14 19:18:58+00:00,GitHub,2024-02-14 19:18:58+00:00,"Restore ruby fixtures post deploy (#11151)

These fixtures were disabled to allow us to do a deploy of some newer
ruby stuff. Restoring them now that the changes are out."
e318a0eea55c9b8536b0874f66cfd03aca6f0adf,Steven,2024-02-13 23:12:48+00:00,GitHub,2024-02-13 23:12:48+00:00,"[node][next][redwood][remix] bump `@vercel/nft@0.26.4` (#11155)

- Release https://github.com/vercel/nft/releases/tag/0.26.4"
644721a90da8cf98414d272be9da0a821a2ce217,Nathan Rajlich,2024-02-13 22:04:40+00:00,GitHub,2024-02-13 22:04:40+00:00,"[remix] Add `serverBundles` post-build sanity check and fallback (#11153)

Adds a check to ensure the `serverBuildPath` for the server bundles was created. If it was not, then that means the Vercel forked Remix compiler was not used, and we must fall back to a singular server bundle."
e109e3325ab5299da0903034175fabe72d486a4e,Nathan Rajlich,2024-02-13 21:26:31+00:00,GitHub,2024-02-13 21:26:31+00:00,"[remix] Don't install Remix fork when not using split configuration (#11152)

The fork of the Remix compiler is only necessary when the project is utilizing split configurations in their routes (i.e. mixing Node.js and Edge functions).

However, the injecting of the forked compiler has proven to be brittle and has many edge cases which cause the fork to not be present. Considering that the more common case is to _not_ use split configuration, skip the fork entirely when that is the case.

This is somewhat of a band-aid / hold over for the ""old"" Remix. With the Remix + Vite configuration, the fork will be entirely unnecessary."
92b2fbe37298f3748157d08fee8a6b6d82058b2b,Vercel Release Bot,2024-02-13 18:18:03+00:00,GitHub,2024-02-13 18:18:03+00:00,"[tests] Upgrade Turbo to version 1.12.3 (#11139)

This auto-generated PR updates Turbo to version 1.12.3"
e50fe2b37c8903e9fe8309a2b5080e971b0d0136,Vercel Release Bot,2024-02-13 17:52:52+00:00,GitHub,2024-02-13 17:52:52+00:00,"Version Packages (#11149)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.7.0

### Minor Changes

- Revert ""Revert ""Default ruby to only currently supported version
(3.2.0)"""" ([#11137](https://github.com/vercel/vercel/pull/11137))

## @vercel/static-build@2.4.0

### Minor Changes

- Revert ""Revert ""Default ruby to only currently supported version
(3.2.0)"""" ([#11137](https://github.com/vercel/vercel/pull/11137))

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.18

## vercel@33.5.1

### Patch Changes

- build: upgrade edge-runtime
([#11148](https://github.com/vercel/vercel/pull/11148))

- Updated dependencies
\[[`24c3dd282`](https://github.com/vercel/vercel/commit/24c3dd282d7714cd63d2b94fb94745c45fdc79ab),
[`10e200e0b`](https://github.com/vercel/vercel/commit/10e200e0bf8f692b6740e098e0572b4e7de83850),
[`678ebbe52`](https://github.com/vercel/vercel/commit/678ebbe5255766656bf2dddc574e86b2999f11c8)]:
    -   @vercel/build-utils@7.7.0
    -   @vercel/static-build@2.4.0
    -   @vercel/node@3.0.19

## @vercel/client@13.1.3

### Patch Changes

- Updated dependencies
\[[`24c3dd282`](https://github.com/vercel/vercel/commit/24c3dd282d7714cd63d2b94fb94745c45fdc79ab)]:
    -   @vercel/build-utils@7.7.0

## @vercel/gatsby-plugin-vercel-builder@2.0.18

### Patch Changes

- Updated dependencies
\[[`24c3dd282`](https://github.com/vercel/vercel/commit/24c3dd282d7714cd63d2b94fb94745c45fdc79ab)]:
    -   @vercel/build-utils@7.7.0

## @vercel/node@3.0.19

### Patch Changes

- build: upgrade edge-runtime
([#11148](https://github.com/vercel/vercel/pull/11148))

- refactor: simplify content-length check
([#11150](https://github.com/vercel/vercel/pull/11150))

- Updated dependencies
\[[`24c3dd282`](https://github.com/vercel/vercel/commit/24c3dd282d7714cd63d2b94fb94745c45fdc79ab)]:
    -   @vercel/build-utils@7.7.0

## @vercel-internals/types@1.0.23

### Patch Changes

- Updated dependencies
\[[`24c3dd282`](https://github.com/vercel/vercel/commit/24c3dd282d7714cd63d2b94fb94745c45fdc79ab)]:
    -   @vercel/build-utils@7.7.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
678ebbe5255766656bf2dddc574e86b2999f11c8,Kiko Beats,2024-02-13 17:45:29+00:00,GitHub,2024-02-13 17:45:29+00:00,"refactor: simplify content-length check (#11150)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
10e200e0bf8f692b6740e098e0572b4e7de83850,Kiko Beats,2024-02-13 17:20:11+00:00,GitHub,2024-02-13 17:20:11+00:00,"build: upgrade edge-runtime (#11148)

Upgrade Edge Runtime and related dependencies 

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
24c3dd282d7714cd63d2b94fb94745c45fdc79ab,Trek Glowacki,2024-02-13 14:52:46+00:00,GitHub,2024-02-13 14:52:46+00:00,"Revert ""Revert ""Default ruby to only currently supported version (3.2.0)"""" (#11137)

 Uno Reverse! "
142a397d8eb9575d6ae17ec36b0d1a021a2dfc5a,Sean Massa,2024-02-13 14:27:46+00:00,GitHub,2024-02-13 14:27:46+00:00,"[tests] fix next.js tests (#11145)

The Next.js change in https://github.com/vercel/next.js/pull/61794 means
that the `Vary` header will contain `Next-Url` less often. We need to
update the assertions on our end to accommodate."
0dd9a27859ef373b8679597be0478c93697d54c3,Vercel Release Bot,2024-02-09 16:26:27+00:00,GitHub,2024-02-09 16:26:27+00:00,"Version Packages (#11108)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.6.0

### Minor Changes

- Revert ""Default ruby to only currently supported version (3.2.0)""
([#11135](https://github.com/vercel/vercel/pull/11135))

- Mark `flags` as deprecated and replace them with `variants`
([#11098](https://github.com/vercel/vercel/pull/11098))

- [build-utils] change default package manager when no lockfile detected
from `yarn` to `npm` (gated behind feature flag)
([#11131](https://github.com/vercel/vercel/pull/11131))

### Patch Changes

- Update internal type for variants
([#11111](https://github.com/vercel/vercel/pull/11111))

## vercel@33.5.0

### Minor Changes

- Mark `flags` as deprecated and replace them with `variants`
([#11098](https://github.com/vercel/vercel/pull/11098))

### Patch Changes

- Updated dependencies
\[[`c32a909af`](https://github.com/vercel/vercel/commit/c32a909afcedf0ee55777d5dcaecc0c8383dd8c8),
[`b6ed28b9b`](https://github.com/vercel/vercel/commit/b6ed28b9b1712f882c93fe053b70d3eb1df21819),
[`d21bb9f87`](https://github.com/vercel/vercel/commit/d21bb9f87e1d837666fe8104d4e199b2590725d6),
[`4027a1833`](https://github.com/vercel/vercel/commit/4027a1833718a92be74b2b3c5a4df23745d19a36),
[`8ba0ce932`](https://github.com/vercel/vercel/commit/8ba0ce932434c6295fedb5307bee59a804b7e6a8),
[`0d034b682`](https://github.com/vercel/vercel/commit/0d034b6820c0f3252949c0ffc483048c5aac7f04),
[`abaa700ce`](https://github.com/vercel/vercel/commit/abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c),
[`3bad73401`](https://github.com/vercel/vercel/commit/3bad73401b4ec1f61e515965732cde8dcc052b17)]:
    -   @vercel/next@4.1.1
    -   @vercel/node@3.0.18
    -   @vercel/redwood@2.0.7
    -   @vercel/remix-builder@2.0.19
    -   @vercel/build-utils@7.6.0
    -   @vercel/static-build@2.3.0

## @vercel/static-build@2.3.0

### Minor Changes

- Revert ""Default ruby to only currently supported version (3.2.0)""
([#11135](https://github.com/vercel/vercel/pull/11135))

### Patch Changes

- Updated dependencies
\[[`ab2444466`](https://github.com/vercel/vercel/commit/ab24444660339eaeacdaad7ff74594171a142b1e)]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.17

## @vercel/client@13.1.2

### Patch Changes

- Updated dependencies
\[[`b6ed28b9b`](https://github.com/vercel/vercel/commit/b6ed28b9b1712f882c93fe053b70d3eb1df21819),
[`8ba0ce932`](https://github.com/vercel/vercel/commit/8ba0ce932434c6295fedb5307bee59a804b7e6a8),
[`0d034b682`](https://github.com/vercel/vercel/commit/0d034b6820c0f3252949c0ffc483048c5aac7f04),
[`abaa700ce`](https://github.com/vercel/vercel/commit/abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c)]:
    -   @vercel/build-utils@7.6.0

## @vercel/gatsby-plugin-vercel-builder@2.0.17

### Patch Changes

- [gatsby-plugin-vercel-builder] use --keep-names esbuild flag
([#11117](https://github.com/vercel/vercel/pull/11117))

- Updated dependencies
\[[`b6ed28b9b`](https://github.com/vercel/vercel/commit/b6ed28b9b1712f882c93fe053b70d3eb1df21819),
[`8ba0ce932`](https://github.com/vercel/vercel/commit/8ba0ce932434c6295fedb5307bee59a804b7e6a8),
[`0d034b682`](https://github.com/vercel/vercel/commit/0d034b6820c0f3252949c0ffc483048c5aac7f04),
[`abaa700ce`](https://github.com/vercel/vercel/commit/abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c)]:
    -   @vercel/build-utils@7.6.0

## @vercel/next@4.1.1

### Patch Changes

- [node][next][redwood][remix] bump `@vercel/nft@0.26.3`
([#11115](https://github.com/vercel/vercel/pull/11115))

- Load common chunks on module initialization
([#11126](https://github.com/vercel/vercel/pull/11126))

- Fix index normalizing for app outputs
([#11099](https://github.com/vercel/vercel/pull/11099))

- Mark `flags` as deprecated and replace them with `variants`
([#11098](https://github.com/vercel/vercel/pull/11098))

- Fix rewrite RSC handling with trailingSlash
([#11107](https://github.com/vercel/vercel/pull/11107))

## @vercel/node@3.0.18

### Patch Changes

- [node][next][redwood][remix] bump `@vercel/nft@0.26.3`
([#11115](https://github.com/vercel/vercel/pull/11115))

- Updated dependencies
\[[`b6ed28b9b`](https://github.com/vercel/vercel/commit/b6ed28b9b1712f882c93fe053b70d3eb1df21819),
[`8ba0ce932`](https://github.com/vercel/vercel/commit/8ba0ce932434c6295fedb5307bee59a804b7e6a8),
[`0d034b682`](https://github.com/vercel/vercel/commit/0d034b6820c0f3252949c0ffc483048c5aac7f04),
[`abaa700ce`](https://github.com/vercel/vercel/commit/abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c)]:
    -   @vercel/build-utils@7.6.0

## @vercel/redwood@2.0.7

### Patch Changes

- [node][next][redwood][remix] bump `@vercel/nft@0.26.3`
([#11115](https://github.com/vercel/vercel/pull/11115))

## @vercel/remix-builder@2.0.19

### Patch Changes

- [node][next][redwood][remix] bump `@vercel/nft@0.26.3`
([#11115](https://github.com/vercel/vercel/pull/11115))

## @vercel-internals/types@1.0.22

### Patch Changes

- Updated dependencies
\[[`b6ed28b9b`](https://github.com/vercel/vercel/commit/b6ed28b9b1712f882c93fe053b70d3eb1df21819),
[`8ba0ce932`](https://github.com/vercel/vercel/commit/8ba0ce932434c6295fedb5307bee59a804b7e6a8),
[`0d034b682`](https://github.com/vercel/vercel/commit/0d034b6820c0f3252949c0ffc483048c5aac7f04),
[`abaa700ce`](https://github.com/vercel/vercel/commit/abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c)]:
    -   @vercel/build-utils@7.6.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
b6ed28b9b1712f882c93fe053b70d3eb1df21819,Trek Glowacki,2024-02-09 16:10:18+00:00,GitHub,2024-02-09 16:10:18+00:00,"Revert ""Default ruby to only currently supported version (3.2.0)"" (#11135)

This reverts commit de63e356223467447cda539ddc435a892303afc7 / #11104.
We had no great way to test this without release but we have other
things we'd like to deploy today. Will revert the revert when we're
closer to fixing just this issue."
0d034b6820c0f3252949c0ffc483048c5aac7f04,Steven,2024-02-08 21:26:01+00:00,GitHub,2024-02-08 21:26:01+00:00,"[build-utils] change default package manager when no lockfile detected from `yarn` to `npm` (gated behind feature flag) (#11131)

This PR changes the default package manager from `yarn` to `npm` in the case that no lockfile is present.

Many years ago when `yarn` was first released, it was much faster than `npm` so we used it by default. That is no longer the case today and `yarn@1` is no longer receiving new features.

For example, `sharp` and `esbuild` no longer works with `yarn@1`:


### Related

- https://github.com/lovell/sharp/issues/3750
- https://github.com/evanw/esbuild/issues/2949

Note that this change will not impact most projects because most used a lockfile."
05c8be1a6dba9e4dbdf8073d030b2702977c0c62,Trek Glowacki,2024-02-08 17:27:47+00:00,GitHub,2024-02-08 17:27:47+00:00,"[static-build] Add a new Astro@4 fixture (#11090)

Add a new Astro@4 fixture. We were missing this one entirely."
d21bb9f87e1d837666fe8104d4e199b2590725d6,Javi Velasco,2024-02-06 19:51:38+00:00,GitHub,2024-02-06 19:51:38+00:00,"[next] Preload common chunks (#11126)

This PR adds requiring the modules that _we know_ will be required in
the Next.js Lambda in the module scope in a attempt to make a better use
of resources.

---------

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
ab24444660339eaeacdaad7ff74594171a142b1e,Shohei Maeda,2024-02-05 21:15:50+00:00,GitHub,2024-02-05 21:15:50+00:00,"[gatsby-plugin-vercel-builder] use --keep-names esbuild flag (#11117)

Some packages are very sensitive to minification.
For example: https://github.com/node-fetch/node-fetch/issues/784 which ends up in runtime error, and is hard to notice as they don't reproduce on local dev.

Setting `--keep-names` should prevent those edge cases: https://esbuild.github.io/api/#keep-names"
20080d4ae7697578f5c9c894304456f48d86ca6f,Vercel Release Bot,2024-02-05 15:34:48+00:00,GitHub,2024-02-05 15:34:48+00:00,"[tests] Upgrade Turbo to version 1.12.2 (#11122)

This auto-generated PR updates Turbo to version 1.12.2"
c32a909afcedf0ee55777d5dcaecc0c8383dd8c8,Steven,2024-02-01 21:56:27+00:00,GitHub,2024-02-01 21:56:27+00:00,"[node][next][redwood][remix] bump `@vercel/nft@0.26.3` (#11115)

https://github.com/vercel/nft/releases/tag/0.26.3"
abaa700cea44c723cfc851baa2dfe9e1ae2e8a5c,Andy,2024-02-01 14:44:38+00:00,GitHub,2024-02-01 14:44:38+00:00,"[build-utils] Update variants type (#11111)

Follow up to https://github.com/vercel/vercel/pull/11098 to address the type changes."
8ba0ce932434c6295fedb5307bee59a804b7e6a8,Andy,2024-02-01 09:28:12+00:00,GitHub,2024-02-01 09:28:12+00:00,"[cli] Add Variants to Build Output API (#11098)

Makes adjustments to replace `flags` with `variants`.

Also marks the current `flags` implementation as deprecated, as it
should get removed soon. Which I'll do in a follow up PR."
4027a1833718a92be74b2b3c5a4df23745d19a36,JJ Kasper,2024-01-31 22:13:23+00:00,GitHub,2024-01-31 22:13:23+00:00,"Fix index normalizing for app outputs (#11099)

This ensures we don't apply the index output normalizing for app paths which was previously already gated for prerenders but not all routes."
3bad73401b4ec1f61e515965732cde8dcc052b17,JJ Kasper,2024-01-30 22:34:17+00:00,GitHub,2024-01-30 22:34:17+00:00,"Fix rewrite RSC handling with trailingSlash (#11107)

This ensures our rewrite patching to handle RSC requests handles a trailing slash being present with added regression tests."
50e135ea474751aa4839cfb1d8eb1f7407c4f4b3,Vercel Release Bot,2024-01-30 22:07:17+00:00,GitHub,2024-01-30 22:07:17+00:00,"Version Packages (#11106)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/static-build@2.2.0

### Minor Changes

- Default ruby to only currently supported version (3.2.0)
([#11104](https://github.com/vercel/vercel/pull/11104))

### Patch Changes

- [tests] Update Gatsby fixture versions
([#11101](https://github.com/vercel/vercel/pull/11101))

## vercel@33.4.1

### Patch Changes

- Updated dependencies
\[[`d05e41eea`](https://github.com/vercel/vercel/commit/d05e41eeaf97a024157d2bd843782c95c39389be),
[`de63e3562`](https://github.com/vercel/vercel/commit/de63e356223467447cda539ddc435a892303afc7)]:
    -   @vercel/static-build@2.2.0

## @vercel/client@13.1.1

### Patch Changes

- More helpful error message when `vc deploy --prebuilt` has missing
files ([#11105](https://github.com/vercel/vercel/pull/11105))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
d05e41eeaf97a024157d2bd843782c95c39389be,Vercel Release Bot,2024-01-30 21:35:14+00:00,GitHub,2024-01-30 21:35:14+00:00,"[tests] Update Gatsby fixture versions (#11101)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
de63e356223467447cda539ddc435a892303afc7,Trek Glowacki,2024-01-30 21:10:17+00:00,GitHub,2024-01-30 21:10:17+00:00,"Default ruby to only currently supported version (3.2.0) (#11104)

We're currently using the directory name at `./vendor/bundle/ruby/`[0]
to determine ruby version. This directory is created as part of running
`bundle install` during the build process. However, when multiple ruby
versions are available, you can end up with multiple directories and the
0th entry at `./vendor/bundle/ruby/` isn't guaranteed to be the Ruby
version specified in the project.

Other companies in this space seem to do some order of 
 - check for value in `.ruby-version` file
 - check for value passed into `ruby` directive in the Gemfile
- check the value in the `*.gemspec` file if the Gemfile has a `gemspec`
directive.

We'll do that work in a future PR but for _now_ our only supported Ruby
version is Ruby 3.2.x [as of
2023-11-22](https://vercel.com/changelog/upgrading-ruby-v2-7-to-v3-2).
So this can be hard-coded for the moment.

Skipping ruby tests now since these target _current_ prod where Ruby
3.2.x is not in `PATH` until we redeploy after this gets deployed."
4d1ab422d39bb1d2894b0018a4c69dd6646db873,Nathan Rajlich,2024-01-30 05:09:33+00:00,GitHub,2024-01-30 05:09:33+00:00,"[client] More helpful error message when `vc deploy --prebuilt` has missing files (#11105)

Print a more helpful error message for the scenario the user encountered here: https://github.com/orgs/vercel/discussions/5612

What was happening in they were running `vc build` in one GH Action job, and then `vc deploy --prebuilt` in a different job. The later job was does not have `node_modules` populated, causing the deploy command to fail:

<img width=""1374"" alt=""Screenshot 2024-01-29 at 6 31 19PM"" src=""https://github.com/vercel/vercel/assets/71256/0402c2fb-35bb-435c-bf4c-10368a27f3ee"">

The updated error message hints to the user that the `node_modules` should be installed for the command to succeed:

<img width=""813"" alt=""Screenshot 2024-01-29 at 6 30 54PM"" src=""https://github.com/vercel/vercel/assets/71256/2c095e61-9b8a-4dac-9eb7-56363a8b89b8"">"
a03cfa1040c03f4b82629adfd1640dae9a08d752,Vercel Release Bot,2024-01-29 17:19:25+00:00,GitHub,2024-01-29 17:19:25+00:00,"Version Packages (#11103)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@33.4.0

### Minor Changes

- Added a new option to add a sensitive environment variable
([#11033](https://github.com/vercel/vercel/pull/11033))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
eaae86d7764de38d4ae4ce0641c484c09085445f,Trek Glowacki,2024-01-29 16:08:28+00:00,GitHub,2024-01-29 16:08:28+00:00,[static-build] update umijs@4 fixture to latest (#11089)
77bc00f92e97a36f4979a8d64f6a769a7de5e00e,Ana Trajkovska,2024-01-29 15:48:07+00:00,GitHub,2024-01-29 15:48:07+00:00,"[cli] Add support for sensitive env var (#11033)

This PR updates the `vercel env add` command to support a new option
called `--sensitive` that allows an env var to be created of type
`sensitive`."
19a373288f967648ad1bb85394289f9a43e6902c,Vercel Release Bot,2024-01-25 20:29:57+00:00,GitHub,2024-01-25 20:29:57+00:00,"Version Packages (#11079)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@33.3.0

### Minor Changes

- Emit ""filePathMap"" in `vc-config.json` for `FileFsRef` instances
([#11060](https://github.com/vercel/vercel/pull/11060))

### Patch Changes

- Update `vc dev` to support `Lambda` instances without `zipBuffer`
([#11080](https://github.com/vercel/vercel/pull/11080))

- Updated dependencies
\[[`322c88536`](https://github.com/vercel/vercel/commit/322c88536dfa0ba3892eb580858ee54f6b04ed3f),
[`62ca2efa7`](https://github.com/vercel/vercel/commit/62ca2efa731c4df46d586b94078b2dcb1c0bb934)]:
    -   @vercel/ruby@2.0.5
    -   @vercel/python@4.1.1

## @vercel/client@13.1.0

### Minor Changes

- Upload files referenced by ""filePathMap"" during `vc deploy --prebuilt`
([#11077](https://github.com/vercel/vercel/pull/11077))

## @vercel/python@4.1.1

### Patch Changes

- Remove deprecated `createLambda()` usage
([#11080](https://github.com/vercel/vercel/pull/11080))

## @vercel/ruby@2.0.5

### Patch Changes

- add ruby3 to path during build
([#11094](https://github.com/vercel/vercel/pull/11094))

- Remove deprecated `createLambda()` usage
([#11080](https://github.com/vercel/vercel/pull/11080))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
322c88536dfa0ba3892eb580858ee54f6b04ed3f,Sean Massa,2024-01-25 20:16:53+00:00,GitHub,2024-01-25 20:16:53+00:00,"add ruby3 to path during build (#11094)

Add ruby to the path plus some debug code. I'll remove the debug code
after we verify this works."
1f259d5eb996c82bc276fd4ab46d8fa812a47270,Trek Glowacki,2024-01-24 21:51:10+00:00,GitHub,2024-01-24 21:51:10+00:00,[static-build] Update parcel@2 fixture to latest minor (#11087)
3759da57ab5875b99e3c82960f7ffa5aa3808aa3,Trek Glowacki,2024-01-24 16:15:16+00:00,GitHub,2024-01-24 16:15:16+00:00,"[static-build] update blitzjs@2 fixture to latest minor (#11086)

update blitzjs@2 fixture to latest minor"
30ba68edf92488c8fa561d8e8af952a13bb8184f,Nathan Rajlich,2024-01-23 20:54:34+00:00,GitHub,2024-01-23 20:54:34+00:00,"[cli] Emit ""filePathMap"" in `vc-config.json` for `FileFsRef` instances (#11060)

This is a performance / bandwidth / storage space optimization for the **Build Output API**.

When a Builder returns function which contains a file that is a `FileFsRef` instance, it _won't_ be copied into the corresponding `.func` directory, but instead will be added to a `""files""` mapping in the `.vc-config.json` file. This mapping represents keys which are destination file paths within the function filesystem, and values which are relative paths from the root of the project codebase. This allows for common files (i.e. `node_modules`) to be referenced (instead of physically copied on the disk).

This introduces an additional complexity to `vc deploy --prebuilt`, in such that now it needs to build up the list of `""files""` referenced from the `.vc-config.json` files, and _also_ upload those file paths along with the `.vercel/output` directory.

Depends on:

* https://github.com/vercel/vercel/pull/11077
* https://github.com/vercel/vercel/pull/11080"
62ca2efa731c4df46d586b94078b2dcb1c0bb934,Nathan Rajlich,2024-01-23 19:53:36+00:00,GitHub,2024-01-23 19:53:36+00:00,"[python][ruby][cli] Remove deprecated `createLambda()` usage (#11080)

* Use `Lambda` constructor instead of `createLambda()`
* Return `FileBlob` instance for the entrypoint files, so that they do not get written to cwd
* In `vc dev`, support `Lambda` instances which do not have `zipBuffer` property"
2b71ee6b427996dc26547a8601cf8b65c74a2ccd,Nathan Rajlich,2024-01-22 22:48:12+00:00,GitHub,2024-01-22 22:48:12+00:00,"[client] Upload files referenced by ""filePathMap"" during `vc deploy --prebuilt` (#11077)

Ensure that files referenced by the `filePathMap` property in the `.vc-config.json` files for functions in the Build Output API `.vercel/output` directory are uploaded during the prebuilt deployment process.

Related to / precursor for https://github.com/vercel/vercel/pull/11060."
acb2acf953b2dfe921b7c27e9cb6479f3245921c,Vercel Release Bot,2024-01-19 22:07:42+00:00,GitHub,2024-01-19 22:07:42+00:00,"Version Packages (#11034)

This PR was opened by the [Changesets release](https://github.com/changesets/action) GitHub action. When you're ready to do a release, you can merge this and the packages will be published to npm automatically. If you're not ready to do a release yet, that's fine, whenever you add more changesets to main, this PR will be updated.


# Releases
## vercel@33.2.0

### Minor Changes

-   chore: deprecate next/nuxt/gastby Speed Insights injection in favor of @vercel/speed-insights ([#11048](https://github.com/vercel/vercel/pull/11048))

### Patch Changes

-   fix error when @vercel/analytics is a transitive dependency of the deployed application ([#10892](https://github.com/vercel/vercel/pull/10892))

-   [cli] Add documentation string for `skip-domain` option ([#11051](https://github.com/vercel/vercel/pull/11051))

-   Updated dependencies \[[`260125784`](https://github.com/vercel/vercel/commit/2601257846fa201fc9efde021a906c706f6191aa), [`cdddb33ad`](https://github.com/vercel/vercel/commit/cdddb33ad49f6080c49f4fff3767e6111acd0bbe), [`72d8604c9`](https://github.com/vercel/vercel/commit/72d8604c9dba108ccca41d6288b765a7ba727295), [`90d0455e1`](https://github.com/vercel/vercel/commit/90d0455e1ff7b5892ff4960226535f57f704ef6f), [`0716130e5`](https://github.com/vercel/vercel/commit/0716130e580a920d92d249d029ed37f92f2ca847), [`b6b151f39`](https://github.com/vercel/vercel/commit/b6b151f3917c5cb47226951446b9dbb96c7d872b), [`b185a7e20`](https://github.com/vercel/vercel/commit/b185a7e207b153c378bd3db2618eece3a3b6a93e)]:
    -   @vercel/static-build@2.1.0
    -   @vercel/build-utils@7.5.1
    -   @vercel/next@4.1.0
    -   @vercel/remix-builder@2.0.18
    -   @vercel/node@3.0.17

## @vercel/next@4.1.0

### Minor Changes

-   fix error when @vercel/analytics is a transitive dependency of the deployed application ([#10892](https://github.com/vercel/vercel/pull/10892))

### Patch Changes

-   Use `worker.name` instead of edge function name to fix type error in `@vercel/next` ([#11050](https://github.com/vercel/vercel/pull/11050))

## @vercel/static-build@2.1.0

### Minor Changes

-   chore: deprecate next/nuxt/gastby Speed Insights injection in favor of @vercel/speed-insights ([#11048](https://github.com/vercel/vercel/pull/11048))

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.16

## @vercel/build-utils@7.5.1

### Patch Changes

-   Add experimental field to Lambda and size to FileFsRef output ([#11059](https://github.com/vercel/vercel/pull/11059))

## @vercel/client@13.0.14

### Patch Changes

-   Updated dependencies \[[`cdddb33ad`](https://github.com/vercel/vercel/commit/cdddb33ad49f6080c49f4fff3767e6111acd0bbe)]:
    -   @vercel/build-utils@7.5.1

## @vercel/gatsby-plugin-vercel-builder@2.0.16

### Patch Changes

-   Updated dependencies \[[`cdddb33ad`](https://github.com/vercel/vercel/commit/cdddb33ad49f6080c49f4fff3767e6111acd0bbe)]:
    -   @vercel/build-utils@7.5.1

## @vercel/node@3.0.17

### Patch Changes

-   Updated dependencies \[[`cdddb33ad`](https://github.com/vercel/vercel/commit/cdddb33ad49f6080c49f4fff3767e6111acd0bbe)]:
    -   @vercel/build-utils@7.5.1

## @vercel/remix-builder@2.0.18

### Patch Changes

-   Fix functions without a output path edge case ([#11038](https://github.com/vercel/vercel/pull/11038))

-   Update `@remix-run/dev` fork to v2.5.0 ([#11054](https://github.com/vercel/vercel/pull/11054))

-   Update `@remix-run/dev` fork to v2.5.1 ([#11065](https://github.com/vercel/vercel/pull/11065))

## @vercel-internals/types@1.0.21

### Patch Changes

-   Updated dependencies \[[`cdddb33ad`](https://github.com/vercel/vercel/commit/cdddb33ad49f6080c49f4fff3767e6111acd0bbe)]:
    -   @vercel/build-utils@7.5.1"
2601257846fa201fc9efde021a906c706f6191aa,Damien Simonin Feugas,2024-01-19 19:10:31+00:00,GitHub,2024-01-19 19:10:31+00:00,"[cli, static-builds] deprecation notice for speed insights injection (#11048)

###  What's in there?

With the recent release of [`@vercel/speed-insights`](https://vercel.com/docs/speed-insights/package) own package (like [`@vercel/analytics`](https://vercel.com/docs/analytics/package)), it's time to encourage users to migrate.

With the availability of `@vercel/speed-insights`, users will have to opt-in explicitly by installing the package. Their benefit is a better and fine-grained control of the reporting (in particular, per-application sample rate).

###  Note to reviewers

I used `console.warn` and hope it will stands out in the build logs. I'm happy to use anything else if you have better suggestions.

There's also a deprecation warning in Next.js, which covers a related but slightly different case, when users explicitly pass analyticsId in their configuration. https://github.com/vercel/next.js/pull/60677"
30b0925218c3cee05d5f70996dc9059073e3c555,jane,2024-01-19 16:55:43+00:00,GitHub,2024-01-19 16:55:43+00:00,fix support link (#11067)
eddd432e066812721dc8d9cee0279a62365c081c,Vercel Release Bot,2024-01-19 16:08:14+00:00,GitHub,2024-01-19 16:08:14+00:00,"[examples][tests] Upgrade Next.js to version 14.1.0 (#11066)

This auto-generated PR updates 7 packages to Next.js version 14.1.0

Co-authored-by: Steven <steven@ceriously.com>"
b185a7e207b153c378bd3db2618eece3a3b6a93e,Vercel Release Bot,2024-01-19 00:29:36+00:00,GitHub,2024-01-19 00:29:36+00:00,"[remix] Update `@remix-run/dev` to v2.5.1 (#11065)

This auto-generated PR updates `@remix-run/dev` to version 2.5.1."
5c910bf93724ab9003a7f56a968b05a1f09fc85b,Trek Glowacki,2024-01-18 23:15:45+00:00,GitHub,2024-01-18 23:15:45+00:00,"[static-build] bump stencil test fixture to latest (#11058)

Bump stencil test fixture to latest"
cdddb33ad49f6080c49f4fff3767e6111acd0bbe,JJ Kasper,2024-01-18 22:51:54+00:00,GitHub,2024-01-18 22:51:54+00:00,"Add experimental field to Lambda and size to FileFsRef output (#11059)

This adds a new experimental field for new bundling behavior. This also
adds an optional `size` field to the FileFsRef output since we already
stat to avoid having to re-stat to get this value."
0da7ea7b78416d352c3c3bc4e19b82f471f4f791,JJ Kasper,2024-01-18 21:17:49+00:00,GitHub,2024-01-18 21:17:49+00:00,"Add retry handling when hitting SSO (#11061)

This aims to reduce flakiness when SSO disabling for a test project is
still disabling/propagating.

x-ref:
https://github.com/vercel/vercel/actions/runs/7563953104/job/20597320056?pr=11059
x-ref:
https://github.com/vercel/vercel/actions/runs/7563953104/job/20597322078?pr=11059

---------

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
7de754398eeb4e3cfe77961a4e066125708eb522,Trek Glowacki,2024-01-18 18:10:22+00:00,GitHub,2024-01-18 18:10:22+00:00,"[cli] Add documentation string for `skip-domain` option (#11051)

Text taken directly from https://vercel.com/docs/cli/deploy#skip-domain"
d4cc520814e23cb496c8ecac5331bc3c95a19317,Trek Glowacki,2024-01-17 19:57:44+00:00,GitHub,2024-01-17 19:57:44+00:00,"[tests] update FastAPI fixture to latest (#11053)

Bumping this test fixture for python to keep up with releases."
03d07dd163ec3abf6e2198db6b4638d03f6d6516,Sean Massa,2024-01-17 17:22:47+00:00,GitHub,2024-01-17 17:22:47+00:00,"update codeowners (#11057)

Update codeowners for shifting responsibilities."
b6b151f3917c5cb47226951446b9dbb96c7d872b,Vercel Release Bot,2024-01-17 05:07:26+00:00,GitHub,2024-01-17 05:07:26+00:00,"[remix] Update `@remix-run/dev` to v2.5.0 (#11054)

This auto-generated PR updates `@remix-run/dev` to version 2.5.0."
8c4b732d415b5220877d526be9c3c8f15b406666,Vercel Release Bot,2024-01-17 00:07:06+00:00,GitHub,2024-01-17 00:07:06+00:00,"[tests] Upgrade Turbo to version 1.11.3 (#11021)

This auto-generated PR updates Turbo to version 1.11.3"
d4335f0b5600c753a61983e3c2fb3cc78fcaa43b,Nathan Rajlich,2024-01-16 23:43:30+00:00,GitHub,2024-01-16 23:43:30+00:00,"Remove `@cb1kenobi` from CODEOWNERS (#11039)

:salute:"
90d0455e1ff7b5892ff4960226535f57f704ef6f,Nathan Rajlich,2024-01-16 22:37:05+00:00,GitHub,2024-01-16 22:37:05+00:00,"[remix] Fix functions without a output path edge case (#11038)

Fixes an edge case where a route without a path was causing the build to
fail. Reproducible with this `remix.config.js` file:

```js
export default {
    ignoredRouteFiles: [""**/.*""],
    routes(defineRoutes) {
        return defineRoutes((route) => {
            route(""/"", ""foo.tsx"", { index: true });
        });
    },
};
```"
0716130e580a920d92d249d029ed37f92f2ca847,Ethan Arrowood,2024-01-16 20:56:28+00:00,GitHub,2024-01-16 20:56:28+00:00,"Use `worker.name` instead of edge function name to fix type error in `@vercel/next` (#11050)

Uses another `name` property instead of the now deprecated one."
8b7479fb6e6c0560cfe317c223d2514930979041,Ethan Arrowood,2024-01-16 16:53:55+00:00,GitHub,2024-01-16 16:53:55+00:00,"[python] update fastapi to 0.105.0 (#10958)

Updates python fixture `fastapi` to version `0.105.1`"
72d8604c9dba108ccca41d6288b765a7ba727295,Damien Simonin Feugas,2024-01-11 14:48:20+00:00,GitHub,2024-01-11 14:48:20+00:00,[cli] fix error when @vercel/analytics is a transitive dependency of the deployed application (#10892)
5fe7b57b8d07a2566dd2d04bd772d0ea74edc96b,Vercel Release Bot,2024-01-10 21:51:08+00:00,GitHub,2024-01-10 21:51:08+00:00,"Version Packages (#11015)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.5.0

### Minor Changes

- Deprecate `EdgeFunction#name` property
([#11010](https://github.com/vercel/vercel/pull/11010))

## vercel@33.1.0

### Minor Changes

- Serialize duplicate `EdgeFunction` references as symlinks in `vc
build` ([#11027](https://github.com/vercel/vercel/pull/11027))

### Patch Changes

- Handle rate limit response when fetching /teams
([#11013](https://github.com/vercel/vercel/pull/11013))

- Display actual deployment's 'target'
([#11025](https://github.com/vercel/vercel/pull/11025))

- Updated dependencies
\[[`98040ec24`](https://github.com/vercel/vercel/commit/98040ec24e1ee585865d11eb216b6525d39d209e)]:
    -   @vercel/build-utils@7.5.0
    -   @vercel/static-build@2.0.17
    -   @vercel/hydrogen@1.0.2
    -   @vercel/remix-builder@2.0.17
    -   @vercel/node@3.0.16

## @vercel/client@13.0.13

### Patch Changes

- Updated dependencies
\[[`98040ec24`](https://github.com/vercel/vercel/commit/98040ec24e1ee585865d11eb216b6525d39d209e)]:
    -   @vercel/build-utils@7.5.0

## @vercel/gatsby-plugin-vercel-builder@2.0.15

### Patch Changes

- Updated dependencies
\[[`98040ec24`](https://github.com/vercel/vercel/commit/98040ec24e1ee585865d11eb216b6525d39d209e)]:
    -   @vercel/build-utils@7.5.0

## @vercel/hydrogen@1.0.2

### Patch Changes

- Deprecate `EdgeFunction#name` property
([#11010](https://github.com/vercel/vercel/pull/11010))

## @vercel/node@3.0.16

### Patch Changes

- Deprecate `EdgeFunction#name` property
([#11010](https://github.com/vercel/vercel/pull/11010))

- Updated dependencies
\[[`98040ec24`](https://github.com/vercel/vercel/commit/98040ec24e1ee585865d11eb216b6525d39d209e)]:
    -   @vercel/build-utils@7.5.0

## @vercel/remix-builder@2.0.17

### Patch Changes

- Deprecate `EdgeFunction#name` property
([#11010](https://github.com/vercel/vercel/pull/11010))

## @vercel/static-build@2.0.17

### Patch Changes

- Deprecate `EdgeFunction#name` property
([#11010](https://github.com/vercel/vercel/pull/11010))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.15

## @vercel-internals/types@1.0.20

### Patch Changes

- Updated dependencies
\[[`98040ec24`](https://github.com/vercel/vercel/commit/98040ec24e1ee585865d11eb216b6525d39d209e)]:
    -   @vercel/build-utils@7.5.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ab826eb83d72747789abd95d47c7c3f7f92113c9,Nathan Rajlich,2024-01-10 21:17:59+00:00,GitHub,2024-01-10 21:17:59+00:00,"[cli] Serialize duplicate `EdgeFunction` references as symlinks in `vc build` (#11027)

Enables the symlink optimization that currently exists for `Lambda`
instances, but now for `EdgeFunction` instances as well. This will be
particularly beneficial for Remix applications which use edge functions
for many routes, since they will now all be represented by the same
underling function in production.

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
98040ec24e1ee585865d11eb216b6525d39d209e,Nathan Rajlich,2024-01-10 20:32:38+00:00,GitHub,2024-01-10 20:32:38+00:00,"[build-utils] Deprecate `EdgeFunction#name` property (#11010)

The `name` property of the `EdgeFunction` class is no longer necessary
on the infra side. Instead, its value is inferred based on the URL path
that the function is representing. So deprecate the property on the
class, and remove its usage throughout the codebase."
21c700aa93916fbb97c3d2778839b4b67f042b91,Chris Barber,2024-01-10 14:05:52+00:00,GitHub,2024-01-10 14:05:52+00:00,"[cli] Display actual deployment's 'target' (#11025)

The CLI renders the deploy URL with the ""Preview"" label on first deploy because the CLI treats deploys as previews unless `--prod` is set. However the first deploy for a new project is always production, so the CLI needs to render the deploy URL based on the actual deployment's `target`."
50ed13b6edc14cabc5e4efe138258ac25f05477c,Juan Pinilla,2024-01-09 03:26:57+00:00,GitHub,2024-01-09 03:26:57+00:00,"[docs] fix edge IP_HEADER_NAME header typedoc typo (#11028)

Fix small typo in the `IP_HEADER_NAME` description.

<img width=""362"" alt=""Screenshot 2024-01-08 at 7 25 34PM""
src=""https://github.com/vercel/vercel/assets/762112/db4d684a-5a12-45d0-8428-981bf2489999"">"
597508ffa6bb59852e6d8ee2e1a42ba3c37fb233,Trek Glowacki,2024-01-04 15:04:54+00:00,GitHub,2024-01-04 15:04:54+00:00,"[cli] handle rate limit respones when fetching /teams endpoint (#11013)

Not the biggest fan of handling this here but of all the various location we do response handling, this seems to be the appropriate location."
57ee3e1fd5f302fa2b3bc2c692a09c142be1f5bc,Vercel Release Bot,2024-01-04 07:08:17+00:00,GitHub,2024-01-04 07:08:17+00:00,"[tests] Update Gatsby fixture versions (#10995)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
83952e45c2f3f6037e2324e801f6daea241573f2,Vercel Release Bot,2024-01-03 22:20:58+00:00,GitHub,2024-01-03 22:20:58+00:00,"Version Packages (#10982)

This PR was opened by the [Changesets release](https://github.com/changesets/action) GitHub action. When you're ready to do a release, you can merge this and the packages will be published to npm automatically. If you're not ready to do a release yet, that's fine, whenever you add more changesets to main, this PR will be updated.


# Releases
## vercel@33.0.2

### Patch Changes

-   Log extension execution failures ([#10937](https://github.com/vercel/vercel/pull/10937))

-   Updated dependencies \[[`fbe08fe57`](https://github.com/vercel/vercel/commit/fbe08fe57eededc0bcd2409692b23d185c70069d), [`77585013d`](https://github.com/vercel/vercel/commit/77585013dec5fc406b8b7ea00918e49fdb8f10ec), [`c536a74bc`](https://github.com/vercel/vercel/commit/c536a74bc9e7188a87b292615fa88d6fc506b105), [`91f8763ed`](https://github.com/vercel/vercel/commit/91f8763edce672a3c05b6096db6084f1e6741384), [`7f8f5f865`](https://github.com/vercel/vercel/commit/7f8f5f86516934acb0c4b936ea601433c8d30c5c)]:
    -   @vercel/next@4.0.17
    -   @vercel/go@3.0.5
    -   @vercel/node@3.0.15
    -   @vercel/redwood@2.0.6
    -   @vercel/remix-builder@2.0.16

## @vercel/go@3.0.5

### Patch Changes

-   Remove `VERCEL_USE_GO_PROVIDED_RUNTIME` env var check ([#10968](https://github.com/vercel/vercel/pull/10968))

## @vercel/next@4.0.17

### Patch Changes

-   Ensure rewrites handle RSC requests ([#11005](https://github.com/vercel/vercel/pull/11005))

-   [next][node][redwood][remix] Bump `@vercel/nft@0.26.1` ([#11009](https://github.com/vercel/vercel/pull/11009))

## @vercel/node@3.0.15

### Patch Changes

-   Await waitUntil promises to resolve before exiting ([#10915](https://github.com/vercel/vercel/pull/10915))

-   [next][node][redwood][remix] Bump `@vercel/nft@0.26.1` ([#11009](https://github.com/vercel/vercel/pull/11009))

## @vercel/redwood@2.0.6

### Patch Changes

-   [next][node][redwood][remix] Bump `@vercel/nft@0.26.1` ([#11009](https://github.com/vercel/vercel/pull/11009))

## @vercel/remix-builder@2.0.16

### Patch Changes

-   [next][node][redwood][remix] Bump `@vercel/nft@0.26.1` ([#11009](https://github.com/vercel/vercel/pull/11009))

-   Update `@remix-run/dev` fork to v2.4.1 ([#10992](https://github.com/vercel/vercel/pull/10992))"
8e8f44a21d642c49c5e69b7302467c44b3a75cc2,Trek Glowacki,2024-01-03 21:13:45+00:00,GitHub,2024-01-03 21:13:45+00:00,"[static-build] Update stencil fixture to latest 4.x (#10990)

Update stencil framework fixture to latest minor in the major."
91f8763edce672a3c05b6096db6084f1e6741384,Steven,2024-01-03 20:18:30+00:00,GitHub,2024-01-03 20:18:30+00:00,"[next][node][redwood][remix] Bump `@vercel/nft@0.26.2` (#11009)

https://github.com/vercel/nft/releases/tag/0.26.2
https://github.com/vercel/nft/releases/tag/0.26.1
https://github.com/vercel/nft/releases/tag/0.25.0"
b1e0523e7115d896513f0548c00d2228463dc9a8,Brody McKee,2024-01-03 05:05:18+00:00,GitHub,2024-01-03 05:05:18+00:00,"[cli] log extension execution failures (#10937)

Co-authored-by: Nathan Rajlich <n@n8.io>"
7f8f5f86516934acb0c4b936ea601433c8d30c5c,Vercel Release Bot,2024-01-03 00:05:52+00:00,GitHub,2024-01-03 00:05:52+00:00,"[remix] Update `@remix-run/dev` to v2.4.1 (#10992)

This auto-generated PR updates `@remix-run/dev` to version 2.4.1."
fbe08fe57eededc0bcd2409692b23d185c70069d,JJ Kasper,2024-01-02 18:46:31+00:00,GitHub,2024-01-02 18:46:31+00:00,"[next] Ensure rewrites handle RSC requests (#11005)

This ensures we add handling for our internal `.rsc` suffixes for rewrites since this currently fail to match by default unless the user manually adds handling for this. Updated our test fixture to ensure this is tested properly."
9903f11cc3a4face9e4690d8b40af966ea84c3d1,Luc Leray,2023-12-21 19:21:53+00:00,GitHub,2023-12-21 19:21:53+00:00,"[examples] Fix `ERR_PNPM_OUTDATED_LOCKFILE` when deploying SvelteKit example (#10984)

Currently, [the SvelteKit (v1)](https://vercel.com/new/clone?b=main&s=https%3A%2F%2Fgithub.com%2Fvercel%2Fvercel%2Ftree%2Fmain%2Fexamples%2Fsveltekit-1&showOptionalTeamCreation=false&template=sveltekit-1&teamCreateStatus=hidden) example fails with:
```
ERR_PNPM_OUTDATED_LOCKFILE Cannot install with ""frozen-lockfile"" because pnpm-lock.yaml is not up to date with package.json
```

This fixes the lockfile, and therefore fixes the example.

---

As a side-quest, I also fixed the ""unmet peer"" warnings:
```
 @vercel/style-guide 4.0.2
    unmet peer eslint@^8.24.0: found 8.14.0
    unmet peer prettier@^2.7.0: found 2.6.2
   eslint-plugin-unicorn 43.0.2
      unmet peer eslint@>=8.18.0: found 8.14.0
```"
04f5f3f3d2f14399124d8bc1cc3b4e34c73b05f6,Luc Leray,2023-12-21 19:04:26+00:00,GitHub,2023-12-21 19:04:26+00:00,"[examples] Fix TypeScript error in ionic react example (#10985)

The ionic react build currently fails with:
```
$ react-scripts build
09:06:23.084 | Creating an optimized production build...
09:06:45.231 | Failed to compile.
09:06:45.231 | 
09:06:45.232 | /vercel/path0/node_modules/@types/babel__traverse/index.d.ts
09:06:45.232 | TypeScript error in /vercel/path0/node_modules/@types/babel__traverse/index.d.ts(314,13):
09:06:45.232 | Type expected.  TS1110
09:06:45.232 | 
09:06:45.232 | 312 \|         // too complex for TS. So we type it as a general visitor only if the key contains `\|`
09:06:45.232 | 313 \|         // this is good enough for non-visitor traverse options e.g. `noScope`
09:06:45.232 | > 314 \|         [k: `${string}\|${string}`]: VisitNode<S, Node>;
09:06:45.232 | \|             ^
09:06:45.232 | 315 \|     };
09:06:45.232 | 316 \|
09:06:45.232 | 317 \| export type VisitNode<S, P extends Node> = VisitNodeFunction<S, P> \| VisitNodeObject<S, P>;
09:06:45.232
```

Upgrading to TypeScript 4 fixes the issue.

---------

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
5e3c077b6b99166f4d7f3652b4d7581f9ee7d3d5,Trek Glowacki,2023-12-21 17:01:52+00:00,GitHub,2023-12-21 17:01:52+00:00,"[static-build] update ionic/angular to latest v7 (#10986)

update ionic/angular to latest v7. Needed to add and `overrides` entry.
Some packages just specify angular >= 14 and this bumps us to angular
17, which we're not ready for yet."
2cc2fac8195790969cd31ff09ebc32cd6df15144,Trek Glowacki,2023-12-21 16:17:38+00:00,GitHub,2023-12-21 16:17:38+00:00,"Revert #10980 (#10989)

Undoes #10980 (mostly). This appears to be some kind of caching issue. Works locally until you run `eslint` without `--cache` and then it will reproduce. Hopefully this is the last time and we're not playing whack-a-mole with these pragmas every day?"
c536a74bc9e7188a87b292615fa88d6fc506b105,Seiya Nuta,2023-12-21 10:11:34+00:00,GitHub,2023-12-21 10:11:34+00:00,"[node] Await waitUntil promises to resolve before exiting (#10915)

Say you have a middleware (`middleware.js`) that looks like this:

```js
export async default function middleware(req, ctx) {
  ctx.waitUntil(tooLongFunction())
}

async function tooLongFunction() {
  console.log('tooLongFunction started')
  await new Promise((resolve) => setTimeout(resolve, 10000))
  console.log('tooLongFunction finished')
}
```

When you run this middleware locally with `vercel dev`, you won't see the `tooLongFunction finished` message because the server process is killed right after finishing the response. While Edge Runtime's `server.close()`, which awaits all `waitUntil` promises, is called, but `exit-hook`'s callback in CLI doesn't wait for the `close` promise to resolve.

This PR fixes this by allowing an optional graceful shutdown callback instead of killing the process immediately."
838d56c31caaf4a57435aa33e75f2144fe8fe2ec,Trek Glowacki,2023-12-20 21:25:04+00:00,GitHub,2023-12-20 21:25:04+00:00,"[static-build] Add Angular 17 fixture (#10969)

Add Angular 17 fixture"
77585013dec5fc406b8b7ea00918e49fdb8f10ec,Nathan Rajlich,2023-12-20 19:35:12+00:00,GitHub,2023-12-20 19:35:12+00:00,"[go] Remove `VERCEL_USE_GO_PROVIDED_RUNTIME` env var check (#10968)

Feature flag has been rolled out for long enough now. Remove this check."
44569e692933f853c4c7cd7055a19bb5997a4957,Trek Glowacki,2023-12-20 18:14:10+00:00,GitHub,2023-12-20 18:14:10+00:00,"Remove unneeded global directives (#10980)

An update to latest `turbo` somehow made these no longer required? 

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
6194e8ca8daabd0cc5fd8a9c8691730cc7dbd78c,Vercel Release Bot,2023-12-20 14:34:34+00:00,GitHub,2023-12-20 14:34:34+00:00,"Version Packages (#10971)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
7b0adf371bae64d33ed0a1b966fc50b1f7c9639b,Wyatt Johnson,2023-12-19 21:03:18+00:00,GitHub,2023-12-19 21:03:18+00:00,"[next] App Pages Prerender Manifest Update (#10978)

Previously routes that did not have a `dataRoute` key in the `prerender-manifest.json` would be treated as an App Route. The logic has been updated (for partial prerendering support) to also consider the new `prefetchDataRoute`. Entries with either of these keys are treated as an App Page instead of an App Route.

This also addressed the scenerio where a app route (`route.ts`) with a dynamic segment (`/api/[slug]/route.ts`) which doesn't emit a `.body` during build doesn't cause the build to fail by checking for the file first."
471bdd5b4506f1410afd7bca6efae3bc696cd939,S3Prototype,2023-12-19 20:29:59+00:00,GitHub,2023-12-19 20:29:59+00:00,"Update nuxt logo (#10977)

We're using an out of date Nuxt logo, and the team has requested an update. This PR updates it"
67fa2f3dd6a6d5a3504b7f9081e56deff7b36eab,Nathan Rajlich,2023-12-18 23:45:45+00:00,GitHub,2023-12-18 23:45:45+00:00,"[build-utils] Extend Node v16 discontinue date to 2024-06-15 (#10967)

AWS has extended the discontinue date for `nodejs16.x` Lambda runtime, so we will follow suit."
b67b97023b884a5a37fad420945979e2683d1e6f,Vercel Release Bot,2023-12-18 19:25:56+00:00,GitHub,2023-12-18 19:25:56+00:00,"Version Packages (#10944)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@33.0.0

### Major Changes

- [cli] replace `--deprecated` with `--update-required` in `vc project
ls` ([#10965](https://github.com/vercel/vercel/pull/10965))

### Patch Changes

- Fix `vercel bisect` selecting too many deployments
([#10956](https://github.com/vercel/vercel/pull/10956))

- Updated dependencies
\[[`6a9002f22`](https://github.com/vercel/vercel/commit/6a9002f2296c5ccce4522c0fa9a8938c3d7a4849),
[`4d63d9e95`](https://github.com/vercel/vercel/commit/4d63d9e954549d811063d259250d1865b7de2ba1)]:
    -   @vercel/remix-builder@2.0.15
    -   @vercel/build-utils@7.4.0
    -   @vercel/static-build@2.0.15
    -   @vercel/node@3.0.13

## @vercel/build-utils@7.4.0

### Minor Changes

- Adds new helper `getPathForPackageManager()`
([#10918](https://github.com/vercel/vercel/pull/10918))

## @vercel/client@13.0.11

### Patch Changes

- Updated dependencies
\[[`4d63d9e95`](https://github.com/vercel/vercel/commit/4d63d9e954549d811063d259250d1865b7de2ba1)]:
    -   @vercel/build-utils@7.4.0

## @vercel/gatsby-plugin-vercel-builder@2.0.13

### Patch Changes

- Add support for ""rewrites""
([#10954](https://github.com/vercel/vercel/pull/10954))

- Updated dependencies
\[[`4d63d9e95`](https://github.com/vercel/vercel/commit/4d63d9e954549d811063d259250d1865b7de2ba1)]:
    -   @vercel/build-utils@7.4.0

## @vercel/node@3.0.13

### Patch Changes

- Updated dependencies
\[[`4d63d9e95`](https://github.com/vercel/vercel/commit/4d63d9e954549d811063d259250d1865b7de2ba1)]:
    -   @vercel/build-utils@7.4.0

## @vercel/remix-builder@2.0.15

### Patch Changes

- Update `@remix-run/dev` fork to v2.4.0
([#10943](https://github.com/vercel/vercel/pull/10943))

## @vercel/static-build@2.0.15

### Patch Changes

- Updated dependencies
\[[`652a31275`](https://github.com/vercel/vercel/commit/652a3127533974c426ea8e5b1047af1aecddb57e)]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.13

## @vercel-internals/types@1.0.18

### Patch Changes

- Updated dependencies
\[[`4d63d9e95`](https://github.com/vercel/vercel/commit/4d63d9e954549d811063d259250d1865b7de2ba1)]:
    -   @vercel/build-utils@7.4.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
9146885f80f342c18671b3bc1c28e08cb217c2f1,Ethan Arrowood,2023-12-18 19:10:07+00:00,GitHub,2023-12-18 19:10:07+00:00,"[cli] replace `--deprecated` with `--update-required` in `vc project ls` (#10965)

Replaces the new `--deprecated` option with `--update-required` in the `vc project ls` command."
98bc41d49a58c0b932bbd355138ba372b8b25a55,Mitch (a.k.a Voz),2023-12-18 16:59:19+00:00,GitHub,2023-12-18 16:59:19+00:00,"fix: Doc links in auth files (#10955)

Fixed the links in the auth files to reflect what the doc links currently are."
a38c102208204b27b63de85a7048fff7200749e4,Vercel Release Bot,2023-12-18 16:39:28+00:00,GitHub,2023-12-18 16:39:28+00:00,"[tests] Upgrade Turbo to version 1.11.2 (#10960)

This auto-generated PR updates Turbo to version 1.11.2"
211c74a7d2a3a65fa2a7a4bcf1cf0154067a394d,Trek Glowacki,2023-12-15 18:58:29+00:00,GitHub,2023-12-15 18:58:29+00:00,"[static-build] Add vite@5 test fixture (#10953)

Add vite@5 test fixture"
2a40ff564e5ae25e735893c4d29b6b81827dbf37,Trek Glowacki,2023-12-15 18:32:14+00:00,GitHub,2023-12-15 18:32:14+00:00,"[static-build] update ember-v5 fixture to latest minor (#10957)

Update ember-v5 fixture to latest minor."
d4cf2b9ae6c168d81d0a6f83bdee3024302b9896,Trek Glowacki,2023-12-15 18:07:55+00:00,GitHub,2023-12-15 18:07:55+00:00,"[static-build] Update astro-v3 to fixture to latest (#10952)

Update astro-v3 to fixture to latest"
7695316cd4150170b8fa31a99473b5bdf746f3d0,Trek Glowacki,2023-12-15 16:22:00+00:00,GitHub,2023-12-15 16:22:00+00:00,"[examples] Update sveltekit1 fixture to latest 1.x (#10948)

Update sveltekit1 fixture to latest 1.x"
7ecb146fdb82a18997ffd00f208e8a6fd947c0c6,Trek Glowacki,2023-12-15 09:02:18+00:00,GitHub,2023-12-15 09:02:18+00:00,"[examples] Update ionic-react to latest (#10949)

Update ionic-react example to latest minor of its current major."
ec3d6ad640b2f5ba313b133e7502e97b2b4a1a05,Trek Glowacki,2023-12-15 08:38:45+00:00,GitHub,2023-12-15 08:38:45+00:00,"[static-build] Update storybook-v7 fixture to latest (#10951)

Update storybook-v7 fixture to latest"
5d521af586e0691c8b61b3138bf159b64d9d5be1,Nathan Rajlich,2023-12-15 08:17:29+00:00,GitHub,2023-12-15 08:17:29+00:00,[cli] Fix `vc bisect` selecting too many deployments (#10956)
652a3127533974c426ea8e5b1047af1aecddb57e,Nathan Rajlich,2023-12-15 01:08:07+00:00,GitHub,2023-12-15 01:08:07+00:00,"[gatsby-plugin-vercel-builder] Add support for ""rewrites"" (#10954)"
bd516c505b3d30b92dcef294dd9809f876efd37b,Trek Glowacki,2023-12-14 17:18:43+00:00,GitHub,2023-12-14 17:18:43+00:00,"[static-build] Update test fixture stencil-v4 to latest (#10950)

Update test fixture stencil-v4 to latest"
4d63d9e954549d811063d259250d1865b7de2ba1,Felix Haus,2023-12-14 15:17:20+00:00,GitHub,2023-12-14 15:17:20+00:00,"[build-utils] Add getPathForPackageManager  (#10918)

To use this outside of CLI we want a way to suppress the `console.log`s in `getEnvForPackageManager`.
For achieving this, we introduce a new helper `getPathForPackageManager()` which contains the core logic.

Best to review commit by commit + hide whitespace.

**X-Ref**
- [Internal Context](https://vercel.slack.com/archives/C03F2CMNGKG/p1701970097725689)"
6a9002f2296c5ccce4522c0fa9a8938c3d7a4849,Vercel Release Bot,2023-12-14 04:05:10+00:00,GitHub,2023-12-14 04:05:10+00:00,"[remix] Update `@remix-run/dev` to v2.4.0 (#10943)

This auto-generated PR updates `@remix-run/dev` to version 2.4.0."
2829d541b80c9deb6e3ccdb62b50ccb709912bba,Vercel Release Bot,2023-12-13 14:46:11+00:00,GitHub,2023-12-13 14:46:11+00:00,Version Packages (#10939)
6880dcb3c34f2a621cecb8f44273770c3ab71c05,Ethan Arrowood,2023-12-13 07:22:10+00:00,GitHub,2023-12-13 07:22:10+00:00,"[cli] Use new `deprecated` query param in projects api for `vc project ls --deprecated` (#10938)

Uses the new `deprecated` query param for the GET /projects API instead of client-side filtering.

This enables a better UX so that results are properly paginated. 

Here are some example runs:

Pagination works as expected:
<img width=""831"" alt=""Screenshot 2023-12-12 at 20 59 57"" src=""https://github.com/vercel/vercel/assets/16144158/c592752d-bf49-41a0-8dae-8b8e233052f8"">

Usage without the flag results in different output (as expected!)
<img width=""830"" alt=""Screenshot 2023-12-12 at 21 04 52"" src=""https://github.com/vercel/vercel/assets/16144158/c65461e0-b4a0-4725-aaae-a63739e6c8e9"">"
832ba4b69a4618765ab4172e17b6975c1d8b593f,Trek Glowacki,2023-12-12 21:08:12+00:00,GitHub,2023-12-12 21:08:12+00:00,"[tests] Add ""Summary"" Step to release workflow (#10936)"
9a250d528c82caa58785567ef9abd7fd6aedf1ce,Vercel Release Bot,2023-12-12 17:31:23+00:00,GitHub,2023-12-12 17:31:23+00:00,"Version Packages (#10935)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.7.1

### Patch Changes

- [cli] double page limit for vc project ls --deprecated
([#10932](https://github.com/vercel/vercel/pull/10932))

- Updated dependencies
\[[`d09dd1794`](https://github.com/vercel/vercel/commit/d09dd1794b5ffa28c15d3ad2880b90db2f4c06f0)]:
    -   @vercel/remix-builder@2.0.14

## @vercel/remix-builder@2.0.14

### Patch Changes

- Reinstall dependencies during `prepareCache()`
([#10922](https://github.com/vercel/vercel/pull/10922))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
382ff2f526a04e5b16a0c861ca2243d90f5ef6f6,Vercel Release Bot,2023-12-12 16:52:07+00:00,GitHub,2023-12-12 16:52:07+00:00,"[tests] Update Gatsby fixture versions (#10931)

Automatically generated PR to update Gatsby fixture versions in
`@vercel/static-build`

---------

Co-authored-by: Ethan Arrowood <ethan.arrowood@vercel.com>"
f80a59c73fbab90981abc15e87292611518e766f,Ethan Arrowood,2023-12-12 15:27:25+00:00,GitHub,2023-12-12 15:27:25+00:00,"[cli] double page limit for vc project ls --deprecated (#10932)

As titled. Increases api page size for `vc project ls` when
`--deprecated` is used.

This is a temporary workaround since we do the filtering ""client-side"".
We will eventually update the API itself to support this and then we can
remove the client-based filter and reduce the page limit back to the
ideal `20`.

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
d09dd1794b5ffa28c15d3ad2880b90db2f4c06f0,Nathan Rajlich,2023-12-12 00:41:51+00:00,GitHub,2023-12-12 00:41:51+00:00,"[remix] Reinstall dependencies during `prepareCache()` (#10922)

https://github.com/vercel/vercel/pull/10819 introduced a bug causing the `prepareCache()` function to fail (due to `@remix-run/dev` no longer being require-able). Even if it were not failing, the deps installed are not a valid representation of the user's `package.json` / lockfile. So to have more truthful cache contents, run `npm install` once again during `prepareCache()` to fix both issues at the same time."
ab34a262054d34999796b80629b413d0ee8abc86,Zack Tanner,2023-12-12 00:24:43+00:00,GitHub,2023-12-12 00:24:43+00:00,"[tests] fix brittle next rewrite probe test (#10934)

It seems the intention of this test was to verify that the rewritten
file matches the original file, but it does so by just asserting on
arbitrary script text, which is brittle and broke as a result of
https://github.com/vercel/next.js/pull/56294

The right way to test this would be to fetch the original script and
compare the contents with the rewritten script, but this relies on
`__NEXT_SCRIPT__` magic which is only available in probe checks. For now
this just asserts on a valid status code, as a chunk that isn't properly
rewritten should 404 in this case."
7582571d943b1e5cfa2cea01b03493eee78c135f,Vercel Release Bot,2023-12-11 16:39:34+00:00,GitHub,2023-12-11 16:39:34+00:00,"Version Packages (#10913)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
e6aaf79d04fafd032d9a28143b02d28766add415,John Pham,2023-12-08 19:25:42+00:00,GitHub,2023-12-08 19:25:42+00:00,"Update Next.js screenshot preview (#10921)

This new screenshot matches the template. It removes the version number
so this screenshot will not go stale."
a1df25a197f5562dea7735c885f4adfba298cde4,Ethan Arrowood,2023-12-08 17:55:24+00:00,GitHub,2023-12-08 17:55:24+00:00,"[cli] Clean up `project ls --deprecate` (#10926)

Follow up to #10919

Removes console.log statements and changes log into warning."
dfe47f6e6c1d395ae24d802f4b7c98e39b9f90f4,Ethan Arrowood,2023-12-08 17:09:18+00:00,GitHub,2023-12-08 17:09:18+00:00,"[cli] add `--deprecated` option to `vc project ls` command (#10919)

Adds a `--deprecated` option to the `vc project ls` command that will only show projects currently running on a soon-to-be-deprecated Node.js version.

It also adds additional output providing more information to the user about what versions and a link to our documentation so they can learn more.

Example:

<img width=""836"" alt=""Screenshot 2023-12-07 at 15 01 22"" src=""https://github.com/vercel/vercel/assets/16144158/3b7f7b13-802e-4af1-a76e-a158a477beb4"">"
3a584316956d97865c4d6b930055b7fa522657f3,Vercel Release Bot,2023-12-08 10:17:39+00:00,GitHub,2023-12-08 10:17:39+00:00,"[examples][tests] Upgrade Next.js to version 14.0.4 (#10923)

This auto-generated PR updates 7 packages to Next.js version 14.0.4"
204c3592c78fc544e62f0210b0e7e1e4cd382a0c,Vercel Release Bot,2023-12-07 01:29:54+00:00,GitHub,2023-12-07 01:29:54+00:00,"[remix] Update `@remix-run/dev` to v2.3.1 (#10908)

This auto-generated PR updates `@remix-run/dev` to version 2.3.1."
3cede43ca7ea3aec3ff33864b7d33da57891ddb2,Nathan Rajlich,2023-12-07 01:28:17+00:00,GitHub,2023-12-07 01:28:17+00:00,[ruby] Remove `VERCEL_ALLOW_RUBY32` env var check (#10910)
1dbb22bb6d33657faa78376f527fe350188c5257,Nathan Rajlich,2023-12-07 00:57:10+00:00,GitHub,2023-12-07 00:57:10+00:00,[ruby] Use Ruby 3.2 in test fixtures (#10909)
f124779b35bce740e61a8797e4a547d4b9ba068b,Matt Straka,2023-12-02 19:23:03+00:00,GitHub,2023-12-02 19:23:03+00:00,Update README.md (#10898)
371c7a08f2b79a69c64f818fd26313e8d9ca41d7,Vercel Release Bot,2023-12-01 19:43:49+00:00,GitHub,2023-12-01 19:43:49+00:00,Version Packages (#10896)
447c20fb99de5b7709641541b48ced0343e38352,Ethan Arrowood,2023-12-01 19:39:07+00:00,GitHub,2023-12-01 19:39:07+00:00,"Add GitHub Runner Image Version to turbo-cache-key.json (#10887)

Add GitHub Runner Image Version to turbo-cache-key.json"
0fe8c07194631b64cb054de5819032dbb69c0dbf,Nathan Rajlich,2023-12-01 19:35:04+00:00,GitHub,2023-12-01 19:35:04+00:00,"[cli] Revert ""forbids globally installed @vercel/speed-insights and @vercel/analytics (#10848)"" (#10895)

This reverts commit 6afdd7fb0b6172ae3a37e60162d9e9f1e8a7098e."
78d1d548d910de9b6edd2107d53262fdf48557d7,Vercel Release Bot,2023-11-30 19:01:27+00:00,GitHub,2023-11-30 19:01:27+00:00,Version Packages (#10865)
c41ff450c0420047a3e6988dd964647fb81520f6,Trek Glowacki,2023-11-29 14:15:17+00:00,GitHub,2023-11-29 14:15:17+00:00,"[cli] Fix behavior for combination of northstar user + team scope provided to cli as an argument. (#10884)

Fixes a neat little bug with the intersection of northstar users, teams, and the behavior of `Array#find_index`:

When selecting an org for various cli actions _non_ northstar users will see a select list with their user in the 0th position, and their teams in the 1..nth positions, like so:

```
// user: Logan
// teams: [Avengers, X-Men]
 Logan
 Avengers
 X-Men
``` 

We'd like to preselect either a team referenced in `client.config.currentTeam` or if said team cannot be found in the collection of a user's teams, preselect the user. So if `X-Men` is `currentTeam`, we find that item (element `1` in the teams array) and increment that value by `1` to account for the user being element `0` in the list of choices:

```
// currentTeam: X-Men
// user: Logan
// teams: [Avengers, X-Men]
 Logan
 Avengers
 X-Men
``` 

If we _can't_ find the `currentTeam` in the list of teams (or one isn't provided), `Array#find_index` returns `-1`, which we increment to by `1` to get the 0th element in the list of choices:

```
// currentTeam: undefined
// user: Logan
// teams: [Avengers, X-Men]
 Logan
 Avengers
 X-Men
``` 

Neat trick!

However, Northstar users _don't_ use the user account as the 0th element in the list of choices. Northstar users will in fact have a team that represents a hidden default team with the same name as their `user.name` and this will be the 0th element in their teams:

```
// user: Logan
// teams: [Logan, Avengers, X-Men]
 Logan
 Avengers
 X-Men
``` 

This of course means the trick of `+1` to index of the team selects the wrong item _and_ can result in `undefined` in cases where the `currentTeam` references the last team.

```
// currentTeam: X-Men
// user: Logan
// teams: [Logan, Avengers, X-Men]
 Logan
 Avengers
 X-Men
``` 

 how'd we get out here?!?!  

To address the issue this PR:
1. calls `findIndex` on the array of _choices_ checking for matches to `currentTeam`
2. wraps that in `Math.max` to set to `0` if `find_index` returns `-1` when a `currentTeam` can't be found."
ca2cbf06fbf252e23aff6e007d0df5ffc243b56e,Chris Barber,2023-11-28 23:22:36+00:00,GitHub,2023-11-28 23:22:36+00:00,[remix] Resolve static dir using non-parent `publicPath` segments (#10685)
2d86a2d4ba109176b8152925101cc45b07371b81,Trek Glowacki,2023-11-28 23:21:32+00:00,GitHub,2023-11-28 23:21:32+00:00,"[tests] tidy and make select-org tests more realistic (#10882)

Tracking down a bug with ""northstar"" users and have a little prefactor that 

a) isolates setup code so it's less repeated
b) makes the ""northstar"" tests more reflective of actual execution.

Northstar users will always have a `currentTeam` value on their `client.config`:

https://github.com/vercel/vercel/blob/aa0f3d712b6be4aa1af2f28acb0f4c7a6cdf9f16/packages/cli/src/util/get-scope.ts#L18-L20

And finally c) add tests for the case of a non-northstar users where a team scope is supplied.

The final hypothetical matching group (northstart users with team scope provided) is the bug that I'll fix with a refactor."
4edfcd74b6dfd8e9cbc05a71d47578051a2a7d63,Nathan Rajlich,2023-11-28 22:41:39+00:00,GitHub,2023-11-28 22:41:39+00:00,"[remix] Fix issue where `npm install` was not properly injecting forked compiler (#10819)

User reported a scenario in which npm was ignoring the second `npm install` command to replace the Remix compiler with our forked version. This seems like a bug in npm. Workaround that seems to work is to remove `@remix-run/dev` entirely and install our forked version as a ""standard"" dependency (instead of using the `npm:` syntax). The `bin` entry for `remix` should at that point be our forked compiler."
c52bdf77585dfa41b25cabe2f9403827d0964169,Nathan Rajlich,2023-11-28 22:38:37+00:00,GitHub,2023-11-28 22:38:37+00:00,"[go] Set Lambda runtime to ""provided.al2"" behind env var (#10880)

This is a re-land of https://github.com/vercel/vercel/pull/10856, but with the addition of the env var check so that we can feature flag this change."
bc5ac1ec508998432cf134e2d7f01fd0efb4e11d,Nathan Rajlich,2023-11-28 18:49:02+00:00,GitHub,2023-11-28 18:49:02+00:00,"[static-build] Add `yarn.lock` and force jsdom@22 to fix ""umi-v2"" test fixture  (#10881)

`jsdom@23` does not work with Node 16, but UmiJS v2 does not work with Node 18. So use the lower common denominator and force a older version of jsdom that still works with 16.x."
aa0f3d712b6be4aa1af2f28acb0f4c7a6cdf9f16,Lee Robinson,2023-11-28 01:40:30+00:00,GitHub,2023-11-28 01:40:30+00:00,"chore: update Nuxt example (#10869)

This updates the default Nuxt example to start with a static route, plus
updates dependencies with the latest version.

Demo: https://nuxt-vercel-inky.vercel.app/

---------

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
e02212ae80af095abc1a660f39e4646c7763aca9,Csaba Palfi,2023-11-28 00:38:02+00:00,GitHub,2023-11-28 00:38:02+00:00,Fix changeset lint for forks (#10737)
a8934da6232b66a98e9ce43ebf5342eac664d40d,Lee Robinson,2023-11-27 16:54:49+00:00,GitHub,2023-11-27 16:54:49+00:00,"Update placeholder for Nuxt to be correct command. (#10873)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
0e9bb30fd285492beadc365bece2ab1df67b387b,Vercel Release Bot,2023-11-27 14:56:18+00:00,GitHub,2023-11-27 14:56:18+00:00,"[tests] Update Gatsby fixture versions (#10875)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
6afdd7fb0b6172ae3a37e60162d9e9f1e8a7098e,Damien Simonin Feugas,2023-11-22 08:29:40+00:00,GitHub,2023-11-22 08:29:40+00:00,[cli] forbids globally installed @vercel/speed-insights and @vercel/analytics (#10848)
fdef0339f2d4a6d55507ad7c52fe91721e291467,Vercel Release Bot,2023-11-21 21:59:05+00:00,GitHub,2023-11-21 21:59:05+00:00,Version Packages (#10861)
4636ae54c6c17709c1a058169cdca19c3df73ddb,Nathan Rajlich,2023-11-21 21:57:23+00:00,GitHub,2023-11-21 21:57:23+00:00,"[ruby] Enable `ruby3.2` runtime (#10859)

Allows for Ruby 3.2 Serverless Functions to be created.

**Note:** New test fixtures will be added after this is deployed to production."
61a23f13824d6b6c836cedc0e78e32003ae483fb,Nathan Rajlich,2023-11-21 21:13:24+00:00,GitHub,2023-11-21 21:13:24+00:00,"Revert ""[go] Set Lambda runtime to `provided.al2`"" (#10864)

This reverts commit 4b8b4992c4524eb8bb97e90a72c137e329dbbeb1.

We'll re-land this after Thanksgiving."
4b8b4992c4524eb8bb97e90a72c137e329dbbeb1,Nathan Rajlich,2023-11-21 19:29:53+00:00,GitHub,2023-11-21 19:29:53+00:00,"[go] Set Lambda runtime to ""provided.al2"" (#10856)

Migrate from the deprecated `go1.x` runtime to the `provided.al2` runtime, [as suggested by AWS in their migration guide](https://aws.amazon.com/blogs/compute/migrating-aws-lambda-functions-from-the-go1-x-runtime-to-the-custom-runtime-on-amazon-linux-2/)."
611fbdd5ac55c74f58388f831a452c26de2ecbc0,Zack Tanner,2023-11-21 16:21:56+00:00,GitHub,2023-11-21 16:21:56+00:00,"Revert ""[cli][tests] Work around Yarn + Corepack issue in tests"" (#10860)"
ffd2f34c6c3d53bbb673aa3241845abc50e67c5e,Zack Tanner,2023-11-21 00:44:46+00:00,GitHub,2023-11-21 00:44:46+00:00,"[next] ensure function configs apply to route groups (#10855)

`getSourceFilePathFromPage` attempts to match patterns found in `vercel.json` with source files. However, the `page` argument to this function is stripped of route groups, so these files are erroneously skipped and function settings are not applied. 

For app-dir routes which might contain route groups, this checks an internal mapping which maps the ""normalized"" paths (e.g. `app/dashboard/[slug]/page.js`) to the file-system path (e.g. `app/dashboard/[slug]/(group)/page.js`)"
8feaa9c3b35fae5f7aa5b475c08b362d273f8765,Nathan Rajlich,2023-11-20 21:47:39+00:00,GitHub,2023-11-20 21:47:39+00:00,"[cli][tests] Work around Yarn + Corepack issue in tests (#10858)

CI started failing on corepack related tests with error:

```
error This project's package.json defines ""packageManager"": ""yarn@npm@8.1.0"". However the current global version of Yarn is 1.22.21.
```

This appears to be a bug in the Yarn v1.22.21, which was released a week ago: https://github.com/yarnpkg/yarn/releases/tag/v1.22.21

Setting the `SKIP_YARN_COREPACK_CHECK` env var disables this new check which fixes the issue for us.

**NOTE:** Review with [whitespace changes disabled](https://github.com/vercel/vercel/pull/10858/files?w=1) for an easier view."
31daff66affc115e0a3087b9dfefd28230c83e8b,Vercel Release Bot,2023-11-19 18:54:04+00:00,GitHub,2023-11-19 18:54:04+00:00,[examples][tests] Upgrade Next.js to version 14.0.3 (#10847)
48c6b2dcc3bb4817498efcee5daa80037c162af2,Simon H,2023-11-19 04:43:16+00:00,GitHub,2023-11-19 04:43:16+00:00,"[docs] mention nodejs20.x in LambdaRuntime (#10849)

The error message when trying to deploy with an invalid runtime value
leads you there, where `nodejs20.x` is missing currently"
6f3ae1a0edb89c5e263bcff17b8fb1d72660acd8,Vercel Release Bot,2023-11-16 05:19:35+00:00,GitHub,2023-11-16 05:19:35+00:00,"Version Packages (#10836)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
88da7463ce12df91d49fbde85cb617030d55f558,Nathan Rajlich,2023-11-15 22:04:36+00:00,GitHub,2023-11-15 22:04:36+00:00,"[build-utils] Remove Node v20 env var check (#10834)

It's safe to remove this env var check, because #10822 makes it explicit on which versions of Node are actually present in the build environment."
142aa55a5d884e358c4bc5df6438f17618be102a,Ethan Arrowood,2023-11-15 20:12:05+00:00,GitHub,2023-11-15 20:12:05+00:00,"Add .node-version file (#10820)

This a small QOL change. Essentially if you have a tool like `fnm` on your machine for using multiple versions of Node.js, they will look for files like this one and automatically switch your terminal session node version to the value in it. 

The `vercel/front` repo uses this too"
7bc8b65d13bb1b4c71b4b55ed8c9d9c418fde460,Vercel Release Bot,2023-11-15 00:45:19+00:00,GitHub,2023-11-15 00:45:19+00:00,"Version Packages (#10832)

This PR was opened by the [Changesets release](https://github.com/changesets/action) GitHub action. When you're ready to do a release, you can merge this and the packages will be published to npm automatically. If you're not ready to do a release yet, that's fine, whenever you add more changesets to main, this PR will be updated.


# Releases
## @vercel/build-utils@7.2.4

### Patch Changes

-   Select Node.js version based on what's available in build-container ([#10822](https://github.com/vercel/vercel/pull/10822))

## vercel@32.5.4

### Patch Changes

-   Updated dependencies \[[`65dec5b7e`](https://github.com/vercel/vercel/commit/65dec5b7e752f4da8fe0ffdb25215170453f6f8b)]:
    -   @vercel/build-utils@7.2.4
    -   @vercel/node@3.0.10
    -   @vercel/static-build@2.0.11

## @vercel/client@13.0.8

### Patch Changes

-   Updated dependencies \[[`65dec5b7e`](https://github.com/vercel/vercel/commit/65dec5b7e752f4da8fe0ffdb25215170453f6f8b)]:
    -   @vercel/build-utils@7.2.4

## @vercel/gatsby-plugin-vercel-builder@2.0.10

### Patch Changes

-   Updated dependencies \[[`65dec5b7e`](https://github.com/vercel/vercel/commit/65dec5b7e752f4da8fe0ffdb25215170453f6f8b)]:
    -   @vercel/build-utils@7.2.4

## @vercel/node@3.0.10

### Patch Changes

-   Updated dependencies \[[`65dec5b7e`](https://github.com/vercel/vercel/commit/65dec5b7e752f4da8fe0ffdb25215170453f6f8b)]:
    -   @vercel/build-utils@7.2.4

## @vercel/static-build@2.0.11

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.10

## @vercel-internals/types@1.0.15

### Patch Changes

-   Updated dependencies \[[`65dec5b7e`](https://github.com/vercel/vercel/commit/65dec5b7e752f4da8fe0ffdb25215170453f6f8b)]:
    -   @vercel/build-utils@7.2.4"
65dec5b7e752f4da8fe0ffdb25215170453f6f8b,Nathan Rajlich,2023-11-14 23:08:27+00:00,GitHub,2023-11-14 23:08:27+00:00,"[build-utils] Select Node.js version based on what's available in build-container (#10822)

Makes `getLatestNodeVersion()` and `getSupportedNodeVersion()` (and thus by extension - `getNodeVersion()`) be aware of the available Node.js versions when running inside the build-container. This is to address the situation with the new AL2023 build-container image which has different Node versions installed compared to the existing AL2 build image.

### Project Settings `20.x` with package.json `""engines"": ""18.x""`

If the Project Settings Node Version is set to `20.x`, but the package.json has `""engines"": ""18.x""`, then the build will fail like so, because Node 18 is not present on the AL2023 build image:

<img width=""1044"" alt=""Screenshot 2023-11-09 at 1 25 41 PM"" src=""https://github.com/vercel/vercel/assets/71256/572c544b-6574-4eb1-98f7-787075a60000"">

### Project Settings `18.x` with package.json `""engines"": ""20.x""`

If the Project Settings Node Version is set to `18.x`, but the package.json has `""engines"": ""20.x""`, then the build will fail like so, because Node 20 is not present on the AL2 build image:

<img width=""1042"" alt=""Screenshot 2023-11-09 at 1 34 43 PM"" src=""https://github.com/vercel/vercel/assets/71256/c6a2d955-9453-4ef5-a99d-b49a6d9af766"">

### Project Settings `18.x` with no package.json `""engines""`

If Project Settings Node Version is set to `18.x`, but the package.json has no ""engines"" (and thus wants ""latest""), then the latest available Node version in the build-container, which would be Node 18."
f3b62d8ea2e5e2475dcc52dcd1aeb55f9bb61fbc,Brooks Lybrand,2023-11-13 20:10:57+00:00,GitHub,2023-11-13 20:10:57+00:00,"chore: Update Remix example README (#10830)

Not sure the best spot to put this command in the Readme, but I thought having a `create-remix` command might be useful for people trying to get going.

If there's a more preferred way to scaffold this project on your machine, I'm open to that, just using what I know"
9472c22bf7192da264bcff8184ab651d3e726a49,Wyatt Johnson,2023-11-09 23:45:35+00:00,GitHub,2023-11-09 23:45:35+00:00,"[next] Added more PPR tests (#10823)

This adds additional regression tests for PPR support for Next.js."
493185709aa9a1ceedeaad021bb677f1ecefabd8,Vercel Release Bot,2023-11-08 17:36:37+00:00,GitHub,2023-11-08 17:36:37+00:00,"Version Packages (#10809)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.5.3

### Patch Changes

- Handle `TooManyProjects` error in places where projects are created
([#10807](https://github.com/vercel/vercel/pull/10807))

- Updated dependencies
\[[`89c1e0323`](https://github.com/vercel/vercel/commit/89c1e032335d9ec0fcfc84fe499cf004fe73fafc),
[`fd29b966d`](https://github.com/vercel/vercel/commit/fd29b966d39776318b0e11a53909edb43d1fc5f2)]:
    -   @vercel/node@3.0.9
    -   @vercel/next@4.0.14

## @vercel/next@4.0.14

### Patch Changes

- Fixed headers for static routes when PPR is enabled
([#10808](https://github.com/vercel/vercel/pull/10808))

## @vercel/node@3.0.9

### Patch Changes

- Replace usage of `fetch` with `undici.request`
([#10767](https://github.com/vercel/vercel/pull/10767))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
89c1e032335d9ec0fcfc84fe499cf004fe73fafc,Ethan Arrowood,2023-11-08 17:31:03+00:00,GitHub,2023-11-08 17:31:03+00:00,"[node] swap `undici.fetch` for `undici.request` in `serverless-handler.mts`  (#10767)

In a recent undici update, setting the `host` header for fetch requests became invalid (https://github.com/nodejs/undici/pull/2322). 

We relied on this in order to proxy serverless dev server requests via `@vercel/node`. 

This PR replaces the usage of `undici.fetch` with `undici.request`. 

It is blocked by an `undici` type change: https://github.com/nodejs/undici/pull/2373"
ebd7e3ac391d1eb6e2d4312e5fe6dae9c7d76a5b,Zach Ward,2023-11-08 16:48:12+00:00,GitHub,2023-11-08 16:48:12+00:00,"Project limits error handling (#10807)

This PR adds improved error handling for the 200 project limit error
that will start being returned for free tier teams/accounts. The
following changes have been made:
- improve error message format by using `client.output.prettyError` so
that the docs link
(https://vercel.com/docs/limits/overview#general-limits) returned with
the error response is included with the error message
- add explicit error handling of this error from any places where
`createProject` is called, which includes the following commands:
  - `vc project add`
  - `vc link` (indirectly called via `ensureLink`)
  - `vc list` (indirectly called via `ensureLink`)
  - `vc git connect` (indirectly called via `ensureLink`)

### Testing
- sign in to a vercel account that is associated with your work email
(ends in `@vercel.com`), this is necessary for creating a team with the
proper conditions to artificially trigger the error message
- create a Pro Trial team and make sure to prefix the name with:
`vtest314 too many projects `, for example `vtest314 too many projects
test 1`
- check out this branch and cd to `vercel/vercel/packages/cli`
- run: `pnpm dev add [project-name] --cwd=/path/to/some/project`
- the project should fail to be created and you should see the expected
error message (screenshot below) in the terminal output

**Screenshot of error message when attempting to add project from cli**
<img width=""798"" alt=""image""
src=""https://github.com/vercel/vercel/assets/14896430/43e6ac2c-ae1c-4367-8d57-0aeb7fbddf33"">

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
fd29b966d39776318b0e11a53909edb43d1fc5f2,Wyatt Johnson,2023-11-08 16:21:51+00:00,GitHub,2023-11-08 16:21:51+00:00,"tests: added tests for PPR (#10808)

This adds some tests to the PPR implementation for Next.js. This also
fixes a bug where the static pages were incorrectly generating a header
that falsly indicated that it postponed."
2bd92164039764732fa12d78895fda4ed832c0ec,Vercel Release Bot,2023-11-07 19:20:58+00:00,GitHub,2023-11-07 19:20:58+00:00,"Version Packages (#10805)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.5.2

### Patch Changes

- Updated dependencies
\[[`c94a082f6`](https://github.com/vercel/vercel/commit/c94a082f6bb1b84eaf420ac47ea83640dc83668e)]:
    -   @vercel/next@4.0.13

## @vercel/next@4.0.13

### Patch Changes

- Added `getRequestHandlerWithMetadata` export
([#10753](https://github.com/vercel/vercel/pull/10753))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c94a082f6bb1b84eaf420ac47ea83640dc83668e,Wyatt Johnson,2023-11-07 18:32:03+00:00,GitHub,2023-11-07 18:32:03+00:00,"Added `getRequestHandlerWithMetadata` export (#10753)

This adds a new `getRequestHandlerWithMetadata` export if enabled and
available to the exported method.

---------

Co-authored-by: Joe Haddad <timer@vercel.com>
Co-authored-by: JJ Kasper <jj@jjsweb.site>"
66cd626d1c8ca5b39c2cd34446bc14f878ca9001,Vercel Release Bot,2023-11-07 17:51:39+00:00,GitHub,2023-11-07 17:51:39+00:00,"Version Packages (#10765)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.2.3

### Patch Changes

- Add experimental flag to allow Node.js v20
([#10802](https://github.com/vercel/vercel/pull/10802))

## vercel@32.5.1

### Patch Changes

- Debug log load user exceptions
([#10773](https://github.com/vercel/vercel/pull/10773))

- bump: edge-runtime
([#10712](https://github.com/vercel/vercel/pull/10712))

- Updated dependencies
\[[`fc90a3dc0`](https://github.com/vercel/vercel/commit/fc90a3dc0bd998453f6527c03d211c35bb0d5770),
[`644b8a52c`](https://github.com/vercel/vercel/commit/644b8a52cb2cc8f05e215e2230f95f902cdf8ae8),
[`0861dc8fb`](https://github.com/vercel/vercel/commit/0861dc8fbcea1037626b00664a4b6c22f1b0a7ed),
[`33cc8e0ac`](https://github.com/vercel/vercel/commit/33cc8e0acf1b3466d50d45b2e5bbe66b89a87c14),
[`f5296c3c0`](https://github.com/vercel/vercel/commit/f5296c3c06e620a39c5f88287ac94e58703bdaac),
[`d9065c210`](https://github.com/vercel/vercel/commit/d9065c2102223e9cdb5b22df14db41c363cf7828)]:
    -   @vercel/next@4.0.12
    -   @vercel/node@3.0.8
    -   @vercel/build-utils@7.2.3
    -   @vercel/remix-builder@2.0.11
    -   @vercel/static-build@2.0.10

## @vercel/client@13.0.7

### Patch Changes

- Updated dependencies
\[[`0861dc8fb`](https://github.com/vercel/vercel/commit/0861dc8fbcea1037626b00664a4b6c22f1b0a7ed)]:
    -   @vercel/build-utils@7.2.3

## @vercel/edge@1.1.1

### Patch Changes

- bump: edge-runtime
([#10712](https://github.com/vercel/vercel/pull/10712))

## @vercel/error-utils@2.0.2

### Patch Changes

- use Node.js `util.types.isNativeError` for `isError` method
([#10764](https://github.com/vercel/vercel/pull/10764))

## @vercel/frameworks@2.0.3

### Patch Changes

- update Angular output path discovery
([#10678](https://github.com/vercel/vercel/pull/10678))

- Updated dependencies
\[[`34dd9c091`](https://github.com/vercel/vercel/commit/34dd9c0918585cf6d3b04bddd9158978b0b4192f)]:
    -   @vercel/error-utils@2.0.2

## @vercel/fs-detectors@5.1.3

### Patch Changes

- Updated dependencies
\[[`306f653da`](https://github.com/vercel/vercel/commit/306f653da9de96ddf583cce35603229aa55c4e53),
[`34dd9c091`](https://github.com/vercel/vercel/commit/34dd9c0918585cf6d3b04bddd9158978b0b4192f)]:
    -   @vercel/frameworks@2.0.3
    -   @vercel/error-utils@2.0.2

## @vercel/gatsby-plugin-vercel-builder@2.0.9

### Patch Changes

- Fix nested SSR routes
([#10751](https://github.com/vercel/vercel/pull/10751))

- Updated dependencies
\[[`0861dc8fb`](https://github.com/vercel/vercel/commit/0861dc8fbcea1037626b00664a4b6c22f1b0a7ed)]:
    -   @vercel/build-utils@7.2.3

## @vercel/next@4.0.12

### Patch Changes

- fix re-mapping logic for index prefetches
([#10750](https://github.com/vercel/vercel/pull/10750))

- Fixes a case where using `basePath` along with static generation would
output a lambda that conflicts with the root route.
([#10738](https://github.com/vercel/vercel/pull/10738))

- Rework prefetch route handling
([#10779](https://github.com/vercel/vercel/pull/10779))

## @vercel/node@3.0.8

### Patch Changes

- bump: edge-runtime
([#10712](https://github.com/vercel/vercel/pull/10712))

- Updated dependencies
\[[`0861dc8fb`](https://github.com/vercel/vercel/commit/0861dc8fbcea1037626b00664a4b6c22f1b0a7ed),
[`34dd9c091`](https://github.com/vercel/vercel/commit/34dd9c0918585cf6d3b04bddd9158978b0b4192f)]:
    -   @vercel/build-utils@7.2.3
    -   @vercel/error-utils@2.0.2

## @vercel/remix-builder@2.0.11

### Patch Changes

- Update `@remix-run/dev` fork to v2.2.0
([#10788](https://github.com/vercel/vercel/pull/10788))

## @vercel/static-build@2.0.10

### Patch Changes

- Updated dependencies
\[[`efd3cc05d`](https://github.com/vercel/vercel/commit/efd3cc05dcf3993a68eb2ac41f39d42ed905b036)]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.9

## @vercel-internals/types@1.0.14

### Patch Changes

- Updated dependencies
\[[`0861dc8fb`](https://github.com/vercel/vercel/commit/0861dc8fbcea1037626b00664a4b6c22f1b0a7ed)]:
    -   @vercel/build-utils@7.2.3

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0861dc8fbcea1037626b00664a4b6c22f1b0a7ed,Nathan Rajlich,2023-11-07 13:43:29+00:00,GitHub,2023-11-07 13:43:29+00:00,"[build-utils] Add experimental flag to allow Node.js v20 (#10802)

Similar to #8836, but now for Node.js v20."
7b553c70328ffee579b131032283211fccab8bb1,JJ Kasper,2023-11-07 05:04:29+00:00,GitHub,2023-11-07 05:04:29+00:00,"Disable deployment SSO protection for tests (#10799)

Our tests rely on not being behind deployment protection which is now enabled by default so this adds a step to tests to disable this setting to allow tests to continue working as expected."
644b8a52cb2cc8f05e215e2230f95f902cdf8ae8,Kiko Beats,2023-11-06 08:58:22+00:00,GitHub,2023-11-06 08:58:22+00:00,bump: edge-runtime (#10712)
33cc8e0acf1b3466d50d45b2e5bbe66b89a87c14,Bryce Kalow,2023-11-03 20:25:56+00:00,GitHub,2023-11-03 20:25:56+00:00,"fix(next): do not generate conflicting lambdas when using basePath with app router (#10738)

When using `basePath` with statically generated routes, the builder
currently generates lambdas for the root route that conflict with the
prerender functions generated.

E.g. if we have `basePath: ""test""` and a root route at: `app/page.js`,
this is currently the output:

```
test
test.rsc
test/index
test/index.rsc
```

The result is that visiting the deployed app at `/test` renders an
incomplete page. On the other hand visiting `/test/index` outputs the
expected markup.

It seems like the intent is that we want to delete the lambdas that
conflict with the prerender functions. I've updated the lambda name
generation logic when doing the deleting to line up with how the lambda
names are generated initially."
c0efce29adcc0508f194f35e9510ebe081947fbc,Steven,2023-10-31 23:01:48+00:00,GitHub,2023-10-31 23:01:48+00:00,chore: remove styfle from codeowners (#10790)
b4d115b24ad54419549d6b5be59425f327aff78e,Ethan Arrowood,2023-10-31 21:08:28+00:00,GitHub,2023-10-31 21:08:28+00:00,[error-utils] fix jest coverage issue (#10789)
34dd9c0918585cf6d3b04bddd9158978b0b4192f,Ethan Arrowood,2023-10-31 19:39:30+00:00,GitHub,2023-10-31 19:39:30+00:00,"[error-utils] use Node.js `util.types.isNativeError` for `isError` method (#10764)

I recently learned about https://nodejs.org/api/util.html#utiltypesisnativeerrorvalue which is pretty great. It will return `true` for all errors including subclasses (`class MyError extends Error {}`)"
f5296c3c06e620a39c5f88287ac94e58703bdaac,JJ Kasper,2023-10-31 18:15:13+00:00,GitHub,2023-10-31 18:15:13+00:00,"Rework prefetch route handling (#10779)

Follow-up to https://github.com/vercel/vercel/pull/10750 this removes the underscore prefetching from all prefetch outputs and instead only applies it to the index route itself as this causes issues with PPR making these outputs prerenders and being able to interpolate the route param values. 

There is the edge case of a user returning the literal value `index` from `generateStaticParams` but we can tolerate that more than ppr not working as expected."
d9065c2102223e9cdb5b22df14db41c363cf7828,Vercel Release Bot,2023-10-31 17:59:35+00:00,GitHub,2023-10-31 17:59:35+00:00,"[remix] Update `@remix-run/dev` to v2.2.0 (#10788)

This auto-generated PR updates `@remix-run/dev` to version 2.2.0."
0ad37829dafadb73da26f925df39dca9612e747f,Vercel Release Bot,2023-10-30 14:12:31+00:00,GitHub,2023-10-30 14:12:31+00:00,"[tests] Update Gatsby fixture versions (#10745)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
67748b520798e629a8c7d6906a1ac22a28b30fde,Vercel Release Bot,2023-10-29 15:59:56+00:00,GitHub,2023-10-29 15:59:56+00:00,"[examples][tests] Upgrade Next.js to version 14.0.0 (#10774)

This auto-generated PR updates 7 packages to Next.js version 14.0.0"
306f653da9de96ddf583cce35603229aa55c4e53,Alan Agius,2023-10-27 13:54:24+00:00,GitHub,2023-10-27 13:54:24+00:00,Update Angular output path discovery (#10678)
9e2120a32599f83f54a308ca1cf5373671c7dd40,Chris Barber,2023-10-26 16:12:16+00:00,GitHub,2023-10-26 16:12:16+00:00,"[cli] Debug log load user exceptions (#10773)

When `getUser(client)` throws an exception, the actual error is never printed. This is useful information, so we should write it to the debug log output."
a6463d26368f37775dfcb44e9f3422de403e6002,Vercel Release Bot,2023-10-26 15:55:22+00:00,GitHub,2023-10-26 15:55:22+00:00,"[tests] Upgrade Turbo to version 1.10.16 (#10744)

This auto-generated PR updates Turbo to version 1.10.16"
429a111b50834895e661986475b30675cbd70b0d,Trek Glowacki,2023-10-26 15:30:56+00:00,GitHub,2023-10-26 15:30:56+00:00,[tests] Add package-lock.json file to dev-server-and-routes vc dev fixture (#10771)
431dde5fa88bb04884d9a702514d698f70d11ade,Trek Glowacki,2023-10-25 14:19:23+00:00,GitHub,2023-10-25 14:19:23+00:00,[tests] Migrate docusaurus vc dev test to package-lock.json file (#10769)
1f09979c6f36e6f6962abac07677a0cfe4ccefd8,Trek Glowacki,2023-10-24 22:12:11+00:00,GitHub,2023-10-24 22:12:11+00:00,"[examples] Migrate hydrogen example from yarn.lock to package-lock.json (#10766)

This example occasionally fails with `ERROR: Command ""yarn install""
exited with 1 at nowDeploy`. We've noticed errors at the yarn registry
being a root cause of lots of tests failures. This migrates the example
to use the npm registry instead.

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
fc90a3dc0bd998453f6527c03d211c35bb0d5770,Zack Tanner,2023-10-24 20:51:55+00:00,GitHub,2023-10-24 20:51:55+00:00,"[next] fix re-mapping logic for index prefetches (#10750)

Follow-up to https://github.com/vercel/vercel/pull/10734 -- but considers that the static prefetch associated with `/` might be inside of a dir such as `index/index.prefetch.rsc`. 

To avoid any future matching conflicts, this PR updates to prefix all static prefetches"
57541e230d7c72c90b8fe76c2288ab37dc4aa20b,Trek Glowacki,2023-10-24 20:33:04+00:00,GitHub,2023-10-24 20:33:04+00:00,"[examples] Update Saber to use npm registry (#10755)

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
efd3cc05dcf3993a68eb2ac41f39d42ed905b036,Nathan Rajlich,2023-10-24 20:15:46+00:00,GitHub,2023-10-24 20:15:46+00:00,"[gatsby-plugin-vercel-builder] Fix nested SSR routes (#10751)

Fixes SSR / DSG pages that are nested deeper than the root path for Gatsby projects.

Also introduces unit tests for the logic related to determining which page name to use."
a732b64c02895fff0458313d7ce93d7b1496368c,Trek Glowacki,2023-10-24 17:44:53+00:00,GitHub,2023-10-24 17:44:53+00:00,[examples][tests] Update fixture test names to be concretely named (#10752)
f8320417a8b92f2e7f27da99771ae0b7ea28227e,Zack Tanner,2023-10-24 16:41:54+00:00,GitHub,2023-10-24 16:41:54+00:00,"[next] replace `next export` with `output: export` in tests (#10756)

`next export` has been deprecated on the latest Next.js canary so these
tests will no longer pass.

This changes it to use `output: export` from `next.config.js` instead.

---------

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
50791803b6467c3cc6c203c3fa248ff464ea3ea4,Trek Glowacki,2023-10-24 16:17:48+00:00,GitHub,2023-10-24 16:17:48+00:00,[examples] Migrate Sanity to use npm over yarn (#10754)
7504bfbe26779c963808bf4035749acf8692a743,Vercel Release Bot,2023-10-20 18:51:02+00:00,GitHub,2023-10-20 18:51:02+00:00,"Version Packages (#10668)

This PR was opened by the [Changesets release](https://github.com/changesets/action) GitHub action. When you're ready to do a release, you can merge this and the packages will be published to npm automatically. If you're not ready to do a release yet, that's fine, whenever you add more changesets to main, this PR will be updated.


# Releases
## vercel@32.5.0

### Minor Changes

-   Indicates whether @vercel/speed-insights or @vercel/analytics are used ([#10623](https://github.com/vercel/vercel/pull/10623))

-   [cli] update env var validation rule to allow name start with underscore ([#10697](https://github.com/vercel/vercel/pull/10697))

### Patch Changes

-   Updated dependencies \[[`da300030c`](https://github.com/vercel/vercel/commit/da300030c999b3555c608a321c9d0a4d36923a5a), [`de84743e1`](https://github.com/vercel/vercel/commit/de84743e10d4c9701d409355c0fe057f35e6e435), [`913608de4`](https://github.com/vercel/vercel/commit/913608de4dd4e37557533d732ca8449a5737d4a6), [`7fa08088e`](https://github.com/vercel/vercel/commit/7fa08088ea0d5df6955ea4af7f08513cf4027bb3)]:
    -   @vercel/next@4.0.11
    -   @vercel/python@4.1.0
    -   @vercel/remix-builder@2.0.10
    -   @vercel/redwood@2.0.5
    -   @vercel/static-build@2.0.9

## @vercel/python@4.1.0

### Minor Changes

-   Add support for pip3.10 and pip3.11 ([#10648](https://github.com/vercel/vercel/pull/10648))

## @vercel/routing-utils@3.1.0

### Minor Changes

-   Adds support for statusCode property on rewrites ([#10495](https://github.com/vercel/vercel/pull/10495))

## @vercel/client@13.0.6

### Patch Changes

-   Updated dependencies \[[`9e9fac019`](https://github.com/vercel/vercel/commit/9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357)]:
    -   @vercel/routing-utils@3.1.0

## @vercel/fs-detectors@5.1.2

### Patch Changes

-   Updated dependencies \[[`9e9fac019`](https://github.com/vercel/vercel/commit/9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357)]:
    -   @vercel/routing-utils@3.1.0

## @vercel/gatsby-plugin-vercel-builder@2.0.8

### Patch Changes

-   Updated dependencies \[[`9e9fac019`](https://github.com/vercel/vercel/commit/9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357)]:
    -   @vercel/routing-utils@3.1.0

## @vercel/next@4.0.11

### Patch Changes

-   fix `build` in appDir on Windows ([#10708](https://github.com/vercel/vercel/pull/10708))

-   Fix RSC prefetch for index route with catch-all ([#10734](https://github.com/vercel/vercel/pull/10734))

## @vercel/redwood@2.0.5

### Patch Changes

-   Updated dependencies \[[`9e9fac019`](https://github.com/vercel/vercel/commit/9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357)]:
    -   @vercel/routing-utils@3.1.0

## @vercel/remix-builder@2.0.10

### Patch Changes

-   Update `@remix-run/dev` fork to v2.1.0 ([#10732](https://github.com/vercel/vercel/pull/10732))

## @vercel/static-build@2.0.9

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.8

## @vercel-internals/types@1.0.13

### Patch Changes

-   Updated dependencies \[[`9e9fac019`](https://github.com/vercel/vercel/commit/9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357)]:
    -   @vercel/routing-utils@3.1.0"
7fa08088ea0d5df6955ea4af7f08513cf4027bb3,Vercel Release Bot,2023-10-20 18:00:14+00:00,GitHub,2023-10-20 18:00:14+00:00,"[remix] Update `@remix-run/dev` to v2.1.0 (#10732)

This auto-generated PR updates `@remix-run/dev` to version 2.1.0."
5d40da17babbf473dd0edacd0e236407dc4e668a,Chris Barber,2023-10-20 17:41:15+00:00,GitHub,2023-10-20 17:41:15+00:00,[python] Mock Python for tests running on machines without Python actually installed (#10742)
de84743e10d4c9701d409355c0fe057f35e6e435,JJ Kasper,2023-10-20 15:05:30+00:00,GitHub,2023-10-20 15:05:30+00:00,"Fix RSC prefetch for index route with catch-all (#10734)

When matching outputs and we have an `index.{ext}` file it will take priority over dynamic routes which we don't want to match prefetch RSC index outputs unless it's specifically a prefetch request so this remaps this specific file to avoid the overlap. 

x-ref: [slack thread](https://vercel.slack.com/archives/C061DMGDXQW/p1697664158904469?thread_ts=1697647520.783419&cid=C061DMGDXQW)"
39ce9166ba959159a8d6d13cd95ef70dc3e9dca1,JJ Kasper,2023-10-20 14:36:50+00:00,GitHub,2023-10-20 14:36:50+00:00,"Update to run Next.js integration with Node.js v18 (#10740)

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Steven <steven@ceriously.com>"
ce54ca631bc4a64e46f2d8c39f37fc6059586c5c,Vercel Release Bot,2023-10-19 00:31:38+00:00,GitHub,2023-10-19 00:31:38+00:00,"[examples][tests] Upgrade Next.js to version 13.5.6 (#10735)

This auto-generated PR updates 7 packages to Next.js version 13.5.6"
d6ca05d97583b496ed8cd21929ac85fcc08cf19b,Ethan Arrowood,2023-10-18 14:40:56+00:00,GitHub,2023-10-18 14:40:56+00:00,"[static-build] remove old gatsby tests and merge into new gatsby-v2 (#10727)

Removes some old Gatsby tests and merge's their relevant probes into the newer `gatsby-v2` fixture. 

No point having 3 separate Gatsby v2 tests when they can all be in one."
f8c893bb156d12284866c801dcd3e5fe3ef08e20,Chris Barber,2023-10-17 21:40:30+00:00,GitHub,2023-10-17 21:40:30+00:00,Add Zero Config Team to 'edge' codeowners (#10729)
5e6ef3d56984e8d2b86c5e810acd3023fa73a1ce,Chris Barber,2023-10-17 15:15:29+00:00,GitHub,2023-10-17 15:15:29+00:00,"Enable source maps in tests (#10725)

The `tsconfig` files were unified with a common configuration in https://github.com/vercel/vercel/pull/10667 including disabling source maps. The source maps greatly increase the distribution size, but they are invaluable when the tests run, so this PR enables source maps for tests including adding a `tsconfig.json` where absent.

Linear: https://linear.app/vercel/issue/ZERO-364/enable-sourcemaps-in-all-testtsconfigjson-files"
88715ad598e6a7bf2906953c0a33229c7341c1fe,Vercel Release Bot,2023-10-16 22:55:18+00:00,GitHub,2023-10-16 22:55:18+00:00,"[examples][tests] Upgrade Next.js to version 13.5.5 (#10718)

This auto-generated PR updates 7 packages to Next.js version 13.5.5"
ed19b26603ccdd0e5fac2d18a272b87f0d872a11,Trek Glowacki,2023-10-16 18:55:43+00:00,GitHub,2023-10-16 18:55:43+00:00,[cli] Migrate 30-next-image-optimization fixture to use npm install (#10720)
9c4589ed282b1cf7a3a79f16034f8b7ed1278047,Trek Glowacki,2023-10-16 17:33:13+00:00,GitHub,2023-10-16 17:33:13+00:00,"[cli] autoconfirm in CI to domain buys (#10703)

The `try to purchase a domain` CLI test starting failing on  11 October when the API became slightly slower to respond. This is because `vercel domains buy example.com` displays a prompt asking the user to `y` into agreeing to the purchase. We interacted with this in tests by spamming `y` on STDIN for a few seconds. The timing required is now a bit longer but I think we can skip that pattern entirely by passing the `--yes` option to the subcommand.

I don't _think_ we want this anywhere but in CI and let people unintentionally buy domains , so I've gated the use based on that, but happy to make it available always.

Ironically this issue went away on 13 October when the API response times improved and we could just unskip the test https://github.com/vercel/vercel/pull/10707"
da300030c999b3555c608a321c9d0a4d36923a5a,Zack Tanner,2023-10-16 14:57:38+00:00,GitHub,2023-10-16 14:57:38+00:00,"[next] fix `build` in appDir on windows (#10708)

On Windows, `globPath` is a non-POSIX path (ie `'favicon.ico\\route.js'`) which won't match the paths generated by the `glob` util, since it normalizes Windows separators to Unix separators ([ref](https://github.com/vercel/vercel/blob/main/packages/build-utils/src/fs/normalize-path.ts#L6-L8))"
90b14b689d4f136b0e97cd0a7752aebe29692430,Vercel Release Bot,2023-10-15 19:28:50+00:00,GitHub,2023-10-15 19:28:50+00:00,"[tests] Update Gatsby fixture versions (#10710)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
e0ed2d1e761b75eef32b3982b290a993d18dcb66,Ethan Arrowood,2023-10-13 19:34:08+00:00,GitHub,2023-10-13 19:34:08+00:00,"[static-build] update astro-v2 fixture (#10706)

Astro-v2 fixture was using the wrong major version"
e7516f8002c1bd5d3b2b0f3e2fdb4770db04a131,Shohei Maeda,2023-10-13 14:52:47+00:00,GitHub,2023-10-13 14:52:47+00:00,"[cli] update env var validation rule to allow name start with underscore (#10697)

internal ref: https://github.com/vercel/api/pull/20129

Vercel now accepts env var names that start with underscore."
9e9fac0191cb1428ac9e5479c3d5c8afd7b7d357,Felix Haus,2023-10-13 10:03:36+00:00,GitHub,2023-10-13 10:03:36+00:00,"[routing-utils] Adds support for `statusCode` property on `rewrites` (#10495)

Allows to define a `statusCode` property on `rewrites` in the same way as we already have it for `redirects`.
This is still blocked internally as it requires a feature flag to build with that setting.

So it would allow to set the status in `vercel.json` like this:
```json
{
  ""rewrites"": [
    {
      ""source"": ""/*"",
      ""destination"": ""not-found.html"",
      ""statusCode"": 404
    }
  ]
}

```

Once released, I'll update the documentation on that as well.

### Requirements
> Cause once router sees a status code is set, it stops routing.
> So it wont run the `miss` and `rewrite` sections again once it has a status.
> So just need to make sure wherever status code is set, its at the end of its routing.
> [[internal ref](https://vercel.slack.com/archives/C01A2M9R8RZ/p1691594782351809?thread_ts=1691540814.244679&cid=C01A2M9R8RZ)]"
00f26b35713adbac9179c5c237364e63a0611046,Trek Glowacki,2023-10-13 00:54:18+00:00,GitHub,2023-10-13 00:54:18+00:00,[cli] Add lockfile mistakenly missed due to gitignore (#10699)
68b45167229adffce412ea4b8277ef16ac1b8133,Trek Glowacki,2023-10-12 22:22:46+00:00,GitHub,2023-10-12 22:22:46+00:00,"Remove svelte v5 fixture (#10698)

I originally created with following the instructions on the site `npm create svelte@latest` but got confused seeing a version `5.1.1` but that's for `create-svelte`, not `svelte` itself. It creates a svelte 4 app still."
7bf7591dd383aca74dc94b40f6019be603ff99f6,Ethan Arrowood,2023-10-12 21:57:07+00:00,GitHub,2023-10-12 21:57:07+00:00,[static-build] add angular v16 (#10683)
a012a1e7496e8c20933ce34db2658405961493b4,Ethan Arrowood,2023-10-12 21:30:56+00:00,GitHub,2023-10-12 21:30:56+00:00,[static-build] ember-v5 (#10696)
6dbeb5c3eea819a3c961382857e8c7d965547a8d,Ethan Arrowood,2023-10-12 21:05:50+00:00,GitHub,2023-10-12 21:05:50+00:00,[static-build] stencil-v4 (#10695)
853a570384c3eda6e978a03a90418df9bef0a335,Ethan Arrowood,2023-10-12 20:42:34+00:00,GitHub,2023-10-12 20:42:34+00:00,[static-build] nuxt-v3 (#10694)
353a7ddfcd8fdcdb51447a4af84e9a1dfb74051b,Trek Glowacki,2023-10-12 20:25:56+00:00,GitHub,2023-10-12 20:25:56+00:00,Disable failing e2e test (#10700)
6fcbdb90c753f3f927b42fa975e0d04ffd9d0331,Ethan Arrowood,2023-10-12 18:20:25+00:00,GitHub,2023-10-12 18:20:25+00:00,[static-build] scully-v2 (#10693)
80a6960dc906aae113b7fe313f2e370e9451e05a,Ethan Arrowood,2023-10-11 23:25:12+00:00,GitHub,2023-10-11 23:25:12+00:00,[static-build] hydrogen-v2023 (#10688)
b52741b1bb045412b15723b5dc021dc2d9f2b5aa,Ethan Arrowood,2023-10-11 22:59:44+00:00,GitHub,2023-10-11 22:59:44+00:00,[static-build] blitz-v2 (#10690)
1d4c86d0f873a3c63267c4c462db208b98d75c4b,Ethan Arrowood,2023-10-11 22:35:18+00:00,GitHub,2023-10-11 22:35:18+00:00,[static-build] storybook-v7 (#10686)
913608de4dd4e37557533d732ca8449a5737d4a6,Chris Barber,2023-10-11 19:53:54+00:00,GitHub,2023-10-11 19:53:54+00:00,[python] Add support for pip3.10 and pip3.11 in `vc build` (#10648)
d595db6294c99ed8d3befe17d36f67dfcb74fe3b,Steven,2023-10-11 18:40:11+00:00,GitHub,2023-10-11 18:40:11+00:00,"[ci] update codeowners (#10691)

Remove styfle from a few examples and static-build"
ae489687d211b9130c9c6ee54193599c0d0c3ac4,Trek Glowacki,2023-10-11 14:06:10+00:00,Trek Glowacki,2023-10-11 14:06:10+00:00,"Revert ""Remove comment (testing branch protection)""

This reverts commit 6fc2872794b5b6e2464a214542ba92a3d9950171."
6fc2872794b5b6e2464a214542ba92a3d9950171,Trek Glowacki,2023-10-10 23:04:31+00:00,Trek Glowacki,2023-10-10 23:04:31+00:00,Remove comment (testing branch protection)
6697a0e846beafbaf99087fc7635943f44d341b1,Ethan Arrowood,2023-10-10 22:52:47+00:00,GitHub,2023-10-10 22:52:47+00:00,[static-build] vite-v4 (#10675)
ed9ef486a80e8b71a55e0f10d661e6e6e1dd26cc,Ethan Arrowood,2023-10-10 22:44:10+00:00,Ethan Arrowood,2023-10-10 22:44:10+00:00,"Revert ""[static-build] hydrogen-v2023""

This reverts commit 213ec69db34bc6c010be25fdc74360d000130ae3."
213ec69db34bc6c010be25fdc74360d000130ae3,Ethan Arrowood,2023-10-10 22:41:59+00:00,Ethan Arrowood,2023-10-10 22:41:59+00:00,[static-build] hydrogen-v2023
7512bf64b1a94602a5484efaa6d39c70563b6675,Ethan Arrowood,2023-10-10 20:42:44+00:00,GitHub,2023-10-10 20:42:44+00:00,[static-build] hexo-v6 fixture (#10684)
00e12792d8e195c9579561b739ff60a94a5cecd2,Trek Glowacki,2023-10-10 19:54:49+00:00,GitHub,2023-10-10 19:54:49+00:00,"[static-build] Add basic Middleman v4 fixture (#10682)

Adding a new fixture for middleman. Currently missing."
469d38aad80ee25f4085869b28e3e5d4b16df76c,Vercel Release Bot,2023-10-10 19:26:06+00:00,GitHub,2023-10-10 19:26:06+00:00,"[tests] Upgrade Turbo to version 1.10.15 (#10677)

This auto-generated PR updates Turbo to version 1.10.15"
0e84a6775d10d81fc02cee924328f0576dfb387e,Chris Barber,2023-10-10 17:58:36+00:00,GitHub,2023-10-10 17:58:36+00:00,"Run workflows using Node 16 (#10680)

Align the `lint` and `update-remix-run-dev` workflows to use Node 16 since all other workflows use Node 16.

Linear: https://linear.app/vercel/issue/ZERO-997/update-node-version-in-workflows"
3029af5a2bffbff018e7bba456b6997704f84e30,Trek Glowacki,2023-10-10 16:50:55+00:00,GitHub,2023-10-10 16:50:55+00:00,"[static-build] add umi-4 fixture (#10659)

Added new umi-v4 fixture by following the [new project directions for `npm`](https://umijs-org.translate.goog/docs/guides/getting-started?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en&_x_tr_pto=wapp&_x_tr_hist=true)"
4422eee5c4a2bdc12b39014d7b0b9e929604a813,Trek Glowacki,2023-10-09 12:23:46+00:00,GitHub,2023-10-09 12:23:46+00:00,"Add vue-3 (#10660)

Adds a fixture test for vue@3"
222710f612800624037fd8bc6abba114403a00b7,Chris Barber,2023-10-09 11:58:23+00:00,GitHub,2023-10-09 11:58:23+00:00,"Add `type-check` and unify tsconfig (#10667)

This adds a new `pnpm type-check` that leverages `turbo` to validate the TypeScript code. This can be run at the top-level or for an individual package.

The `test-lint` workflow will run it after linting and doing the prettier check.

As apart of this effort, each package's `tsconfig.json` has been simplified. There's a new top-level `tsconfig.base.json` file that extends the Vercel Style Guide for TypeScript. Each package's `tsconfig.json` has been audited and previously suppressed rules that no longer apply have been removed. The result is each package's `tsconfig.json` is greatly simplified and we can control common settings in the base config while keeping the flexibility of package-level overrides.

Lastly, in `package/cli`, `pnpm build` calls `scripts/build.mjs` which calls `scripts/compile-templates.mjs`. The `compile-templates.mjs` file was generating invalid TypeScript code. I've fixed it and now it's happier than ever.

Note: In order to run `pnpm type-check`, you must first `pnpm build` because we need the `.d.ts` definition files."
d8179032e26b4c6c30659d35b8c150d422336579,Ethan Arrowood,2023-10-06 17:07:27+00:00,GitHub,2023-10-06 17:07:27+00:00,"[static-build] add parcel v2 fixture (#10674)

Kinda simple. Not sure how else to improve this. Parcel is a pretty
basic build tool I think."
f2d7f3f444e184dc0dddb2676f0009d0d9f583ce,Trek Glowacki,2023-10-05 21:05:12+00:00,GitHub,2023-10-05 21:05:12+00:00,Move existing framework fixtures to numeric-free prefix (#10670)
60929bb1afe39bdc5975e30e73806de08c543da8,Trek Glowacki,2023-10-05 18:55:51+00:00,GitHub,2023-10-05 18:55:51+00:00,"[static-build] Add fixtures for latest versions of tested frameworks (#10656)

Adds `preact@10`, `eleventy@2` and `jekyll@4` fixtures."
4ef0b19508d958095bc9ecb721939382d7f9c505,Damien Simonin Feugas,2023-10-05 14:08:13+00:00,GitHub,2023-10-05 14:08:13+00:00,[cli] indicates whether @vercel/speed-insights or @vercel/analytics are used (#10623)
6041a3f6c87b5ce5d40d59ea333ad00283221d51,Trek Glowacki,2023-10-04 21:58:36+00:00,GitHub,2023-10-04 21:58:36+00:00,"[cli] Remove unused test helpers (#10663)

These helpers are unused in the project."
5ee94e0dceedf950216394914de85ab390a95236,Trek Glowacki,2023-10-04 21:39:54+00:00,GitHub,2023-10-04 21:39:54+00:00,"[cli] Remove unused options to testFixtureStdio test helper (#10662)

Auditing for options use of `testFixtureStdio`:

* `{ skipDeploy: true }` is used frequently.
* `{ readyTimeout: 2000 }` is used once in `'[vercel dev] 08-hugo'`
* `{ projectSettings: { directoryListing: true } }` is used once in `'[vercel dev] 00-list-directory'`

Both `isExample` and `expectedCode` have stopped being used."
9bc5bb4afc2656f958ce16405c6f4d9f702505e3,Trek Glowacki,2023-10-04 17:31:08+00:00,GitHub,2023-10-04 17:31:08+00:00,"[cli] Move from yarn to npm for fixtures and ensure lockfiles to speed up installs (#10619)

Some of our tests take quite some time to run and occasionally timeout when accessing https://yarnpkg.com/. We decided to make sure there is a lockfile for this _and_ just move over to `npm`. Shifting the `packages/cli` fixtures over in this PR.

I possibly missed one but I changed the install commands in tests and ran

* pnpm test
* pnpm test-unit
* pnpm test-dev
* pnpm test-e2e"
cf6152d16b4c3936396f3a8c30a0e7da16cd3d9f,Trek Glowacki,2023-10-04 16:04:39+00:00,GitHub,2023-10-04 16:04:39+00:00,"[static-build] Update existing fixtures to latest of their currently pinned framework dependency (#10652)

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
0f5ec80cc69023a90d48376567fa716f0085a2fe,Vercel Release Bot,2023-10-03 22:13:03+00:00,GitHub,2023-10-03 22:13:03+00:00,"Version Packages (#10647)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c523a755f8e4bc41f7c353ebc0b939c21703df00,Steven,2023-10-03 22:07:56+00:00,GitHub,2023-10-03 22:07:56+00:00,"Revert ""[next] Correct output file tracing and limit calculation (#10631)"" (#10651)

This reverts commit e9026c7a692937122e60e73b91100cf7009e022d.

This was causing some builds using Turbo + Next.js to fail with:

```
...writing to cache...
--
17:02:42.820 | Traced Next.js server files in: 169.874ms
17:02:42.871 | Error: Config file was not found at ""/vercel/output/config.json""
17:02:42.871 | at f3 (/var/task/sandbox.js:239:2647)
17:02:42.872 | at async TCe (/var/task/sandbox.js:245:4681)
17:02:42.872 | at async WBt (/var/task/sandbox.js:261:1990)
17:02:42.872 | at async zBt (/var/task/sandbox.js:261:1791)
```

INC-442"
fa8e3132225de73ba007dee994de82c9925c8acd,Steven,2023-10-03 21:22:30+00:00,GitHub,2023-10-03 21:22:30+00:00,"[next] fix test missing `yarn.lock` file (#10642)

- Follow up to https://github.com/vercel/vercel/pull/10630

Was passing in the PR
https://github.com/vercel/vercel/actions/runs/6386018083/job/17332012211#step:9:269

But is failing on main
https://github.com/vercel/vercel/actions/runs/6386371621/job/17332970210

Looks like the `yarn.lock` was removed right before merging so this PR
adds it back.

INC-442"
0c1603f41bcea262bf1fe57a4c78f7cc718e8c6f,Trek Glowacki,2023-10-03 15:26:37+00:00,GitHub,2023-10-03 15:26:37+00:00,"[static-build] Add Svelte 5 fixture (#10645)

Adds Svelte 5 fixture for testing as we expand our test matrix. This is an updated version of `11-svelte`"
18b04b3589b7a0510d103069cf64dcaa65fdd12a,Trek Glowacki,2023-10-03 15:06:46+00:00,GitHub,2023-10-03 15:06:46+00:00,"[static-build] Add fixture for svelte 4 apps (#10637)

Adds Svelte 4 fixture for testing as we expand our test matrix. This is an updated version of `11-svelte`"
58215906f9ee28da3a7f2f3f4aeb862ab53bf55e,Jimmy Lai,2023-10-03 14:46:00+00:00,GitHub,2023-10-03 14:46:00+00:00,"next: bump minimal version for bundled server usage (#10646)

There was a bug that we caught in the bundled server when using the instrumentation hook that we fixed in https://github.com/vercel/next.js/pull/56318 . This PR bumps the version that we check so that we don't use it if the Next version is not up to date."
1feb4d797e1c196c7b74953a8651e6a6f0eafb9f,Vercel Release Bot,2023-10-03 14:24:44+00:00,GitHub,2023-10-03 14:24:44+00:00,"[examples][tests] Upgrade Next.js to version 13.5.4 (#10643)

This auto-generated PR updates 5 packages to Next.js version 13.5.4

Co-authored-by: Steven <steven@ceriously.com>"
45ae16e37103860fa339bcf5d8b229d491ad084a,Vercel Release Bot,2023-10-03 11:38:27+00:00,GitHub,2023-10-03 11:38:27+00:00,"Version Packages (#10576)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.4.0

### Minor Changes

- Restore unsetting teamId for non-team accounts
([#10612](https://github.com/vercel/vercel/pull/10612))

### Patch Changes

- remove unused source map pkg
([#10577](https://github.com/vercel/vercel/pull/10577))

- disable source map for prod build
([#10575](https://github.com/vercel/vercel/pull/10575))

- Better rendering upon authentication error in `vc cert ls`
([#10551](https://github.com/vercel/vercel/pull/10551))

- Updated dependencies
\[[`e9026c7a6`](https://github.com/vercel/vercel/commit/e9026c7a692937122e60e73b91100cf7009e022d),
[`ea5bc8806`](https://github.com/vercel/vercel/commit/ea5bc8806276abf5ba14bdb4a966267497e5d14d),
[`a4996e1c5`](https://github.com/vercel/vercel/commit/a4996e1c5a7e6986d5410b662014dc584c0f7c54),
[`a18ed98f2`](https://github.com/vercel/vercel/commit/a18ed98f2df78fe1256410ea8676686564ed9b35),
[`2f5b0aeeb`](https://github.com/vercel/vercel/commit/2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada),
[`09f1bbfa4`](https://github.com/vercel/vercel/commit/09f1bbfa41a87cf0063a3fb3022b7531d03862b5),
[`ce7e82fa7`](https://github.com/vercel/vercel/commit/ce7e82fa7aa6cec5f5d7b4953353b297b7ad1694)]:
    -   @vercel/next@4.0.9
    -   @vercel/go@3.0.3
    -   @vercel/build-utils@7.2.2
    -   @vercel/node@3.0.7
    -   @vercel/redwood@2.0.4
    -   @vercel/remix-builder@2.0.9
    -   @vercel/static-build@2.0.8

## @vercel/build-utils@7.2.2

### Patch Changes

- [cli] Update bun detection and add tests for projects with both
bunlock binary and yarn.lock text files
([#10583](https://github.com/vercel/vercel/pull/10583))

## @vercel/client@13.0.5

### Patch Changes

- Updated dependencies
\[[`2f5b0aeeb`](https://github.com/vercel/vercel/commit/2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada)]:
    -   @vercel/build-utils@7.2.2

## @vercel/fs-detectors@5.1.1

### Patch Changes

- [cli] Update bun detection and add tests for projects with both
bunlock binary and yarn.lock text files
([#10583](https://github.com/vercel/vercel/pull/10583))

## @vercel/gatsby-plugin-vercel-builder@2.0.7

### Patch Changes

- Updated dependencies
\[[`2f5b0aeeb`](https://github.com/vercel/vercel/commit/2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada)]:
    -   @vercel/build-utils@7.2.2

## @vercel/go@3.0.3

### Patch Changes

- Update broken documentation link
([#10579](https://github.com/vercel/vercel/pull/10579))

## @vercel/next@4.0.9

### Patch Changes

- Correct output file tracing and limit calculation
([#10631](https://github.com/vercel/vercel/pull/10631))

- Fix the instrumentation hook on Next.js Edge Functions
([#10608](https://github.com/vercel/vercel/pull/10608))

- [next] fix lambda creation for i18n edge pages
([#10630](https://github.com/vercel/vercel/pull/10630))

- Revert ""[next][node][redwood][remix] Update @vercel/nft (#10540)""
([#10633](https://github.com/vercel/vercel/pull/10633))

- Update `@vercel/nft` to 0.24.2
([#10644](https://github.com/vercel/vercel/pull/10644))

## @vercel/node@3.0.7

### Patch Changes

- Revert ""[next][node][redwood][remix] Update @vercel/nft (#10540)""
([#10633](https://github.com/vercel/vercel/pull/10633))

- Update `@vercel/nft` to 0.24.2
([#10644](https://github.com/vercel/vercel/pull/10644))

- Updated dependencies
\[[`2f5b0aeeb`](https://github.com/vercel/vercel/commit/2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada)]:
    -   @vercel/build-utils@7.2.2

## @vercel/redwood@2.0.4

### Patch Changes

- Revert ""[next][node][redwood][remix] Update @vercel/nft (#10540)""
([#10633](https://github.com/vercel/vercel/pull/10633))

- Update `@vercel/nft` to 0.24.2
([#10644](https://github.com/vercel/vercel/pull/10644))

## @vercel/remix-builder@2.0.9

### Patch Changes

- Revert ""[next][node][redwood][remix] Update @vercel/nft (#10540)""
([#10633](https://github.com/vercel/vercel/pull/10633))

- Update `@vercel/nft` to 0.24.2
([#10644](https://github.com/vercel/vercel/pull/10644))

## @vercel/static-build@2.0.8

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.7

## @vercel-internals/types@1.0.12

### Patch Changes

- Updated dependencies
\[[`2f5b0aeeb`](https://github.com/vercel/vercel/commit/2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada)]:
    -   @vercel/build-utils@7.2.2

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ce7e82fa7aa6cec5f5d7b4953353b297b7ad1694,Ethan Arrowood,2023-10-03 11:15:00+00:00,GitHub,2023-10-03 11:15:00+00:00,"[next][node][redwood][remix] Update @vercel/nft 0.24.2 (#10644)

Updates nft to 0.24.2 fixing a broken feature"
e9026c7a692937122e60e73b91100cf7009e022d,JJ Kasper,2023-10-03 00:00:20+00:00,GitHub,2023-10-03 00:00:20+00:00,"[next] Correct output file tracing and limit calculation (#10631)

While investigating build times noticed that our lambda creation times were increasing linearly with the number of pages which is unexpected since there are mostly shared dependencies. After further investigation it seems we were falling back to our legacy manual `nodeFileTrace` calls in the builder when we shouldn't have been.

Also noticed we were still doing the un-necessary reading/calculating for uncompressed lambda sizes which is as discussed previously isn't required and the only limit we need to keep enforcing is the uncompressed size which is a lot less expensive to compute. 

As a further optimization this adds proper usage of our lstat cache/sema where it wasn't previously and proper parallelizing where applicable. 

These changes reduce tracing/lambda creation times by 3-5x in larger applications and can fix edge cases where we weren't leveraging our more accurate traces from the build. 

Before: 

```sh
Traced Next.js server files in: 444.05ms
Created all serverless functions in: 1:36.311 (m:ss.mmm)
Collected static files (public/, static/, .next/static): 241.47ms
```

After: 

```sh
Traced Next.js server files in: 10.4ms
Created all serverless functions in: 43.684s
Collected static files (public/, static/, .next/static): 250.828ms
```"
a18ed98f2df78fe1256410ea8676686564ed9b35,Csaba Palfi,2023-10-02 22:57:50+00:00,GitHub,2023-10-02 22:57:50+00:00,"[next] fix lambda creation for i18n edge pages (#10630)

An issue similar to https://github.com/vercel/next.js/issues/44381
exists whereby vercel creates lambda functions for edge pages when i18n
is configured.

Fixes https://github.com/vercel/next.js/issues/42854

---------

Co-authored-by: Steven <steven@ceriously.com>"
09f1bbfa41a87cf0063a3fb3022b7531d03862b5,Sean Massa,2023-10-02 21:14:29+00:00,GitHub,2023-10-02 21:14:29+00:00,"Revert ""[next][node][redwood][remix] Update @vercel/nft"" (#10633)

This reverts commit ab329f0fe88e9cb72607d0cba41f5e168d77e077.

@TooTallNate confirmed with a user that this revert fixed their issue: https://github.com/orgs/vercel/discussions/4231#discussioncomment-7102952"
13efc4f04f79c87ac924e764911dbaddcc733f86,Trek Glowacki,2023-10-02 19:56:59+00:00,GitHub,2023-10-02 19:56:59+00:00,"[static-build] Add Astro 2.x fixture (#10634)

Adds Astro 2 fixture for testing as we expand our test matrix. Not sure what all probes we'd want beyond a ""did it work"" one."
08c5a9b0fc8852c5beedb2ce3cf9c03a7d83226d,Trek Glowacki,2023-10-02 19:32:42+00:00,GitHub,2023-10-02 19:32:42+00:00,"[static-build] Add Astro 3.x fixture (#10632)

Adds Astro 3 fixture for testing as we expand our test matrix. Not sure what all probes we'd want beyond a ""did it work"" one."
5349fb9181f79ab6491f15807a9e0719cd7e40b1,Trek Glowacki,2023-10-02 18:05:07+00:00,GitHub,2023-10-02 18:05:07+00:00,"[tests] *Also* run Determine HIT or MISS step regardless of sucess status (#10638)

The `if:` ""condition"" for ""Upload Test Report to Datadog"" will always be false if ""Determine Turbo HIT or MISS"" does not run.

Added a forced-fail test to verify:
<img width=""544"" alt=""CleanShot 2023-10-02 at 12 43 57@2x"" src=""https://github.com/vercel/vercel/assets/9736/ce18bfa4-9cc5-4eae-b223-04a4ca4cb009"">"
2f51171a173ad0d1c1763e0e46a80e036e88e343,Ethan Arrowood,2023-09-29 16:11:17+00:00,GitHub,2023-09-29 16:11:17+00:00,[tests] improve gatsby fixtures in static-build (#10620)
63c010a7f428dd8b2da0d3b2f32a7519f8064738,Trek Glowacki,2023-09-29 13:31:00+00:00,GitHub,2023-09-29 13:31:00+00:00,Move full GitHub Actions expression into curlies in test workflow (#10622)
7128a65ccd95a4accb2d8140a80fe04461c358c3,Trek Glowacki,2023-09-28 16:25:41+00:00,GitHub,2023-09-28 16:25:41+00:00,"[cli] Restore setting of `currentTeam` (#10612)

As part of a refactor in #10535, we lost the  admittedly untested  behavior of 

1. setting the new `teamId` from a login `result`
2. removing this value if it was `undefined` ensuring we didn't write `""currentTeam"": undefined` to `config.json`.

This resulted in subsequent calls to `vc login` keeping the last known defined `teamId`.

This should restore that behavior but also retain the behavior of calling `updateCurrentTeamAfterLogin` to check if the user has a new `defaultTeamId` to be stored.

Not a fan of just how much mutation exists on `client.config` in this flow, but that predates this change and I wanted to keep this bugfix as small as possible."
d402c4350a25ef37d4600d2482f36772171b1b50,Ethan Arrowood,2023-09-28 15:29:39+00:00,GitHub,2023-09-28 15:29:39+00:00,"[tests] Reduce ionic fixture sizes to improve test timing (#10605)

This PR regenerates the ionic-angular and ionic-react fixtures to be significantly smaller and simpler. 

I don't know why the lock files are so massive. If anyone has ideas to reduce the size of those (I've tried ripping out a bunch of dependencies)."
f88afba733bb159b8e6d9cc132463bdadad6bac5,Trek Glowacki,2023-09-28 14:44:12+00:00,GitHub,2023-09-28 14:44:12+00:00,Report tests to DataDog even on failed runs (#10616)
ea5bc8806276abf5ba14bdb4a966267497e5d14d,Andrew Gadzik,2023-09-27 18:25:27+00:00,GitHub,2023-09-27 18:25:27+00:00,"[next] fix next.js edge functions that use the instrumentation hook (#10608)

Fixes a issue when a Next.js app uses app router + edge runtime + instrumentation hook deployed out on Vercel.  The issue is that the code to register the instrumentation hook in Next.js expects `_ENTRIES` to be defined on `globalThis`.

```ts
async function registerInstrumentation() {
  console.log(""'_ENTRIES' in globalThis:"", '_ENTRIES' in globalThis)
  console.log(
    '_ENTRIES.middleware_instrumentation:',
    Boolean(_ENTRIES.middleware_instrumentation)
  )
  console.log(
    '_ENTRIES.middleware_instrumentation.register:',
    Boolean(_ENTRIES.middleware_instrumentation.register)
  )

  if (
    '_ENTRIES' in globalThis &&
    _ENTRIES.middleware_instrumentation &&
    _ENTRIES.middleware_instrumentation.register
  ) {
    try {
      console.log('registering middleware instrumentation...')
      await _ENTRIES.middleware_instrumentation.register()
      console.log('registered middleware instrumentation!')
    } catch (err: any) {
      err.message = `An error occurred while loading instrumentation hook: ${err.message}`
      console.error(err)
      throw err
    }
  }
}
```

produced the following output,

![image](https://github.com/vercel/vercel/assets/1278714/d0a3a536-5579-4a63-a726-2e34a575e713)

This PR fixes this by changing `let _ENTRIES = {}'` to `globalThis._ENTRIES = {};`

![image](https://github.com/vercel/vercel/assets/1278714/7ba558ac-7364-4d91-869e-920662161022)"
eb06bd262b0c32d40a2471fd6281e8233fb0d1ad,Ethan Arrowood,2023-09-27 16:52:17+00:00,GitHub,2023-09-27 16:52:17+00:00,Fix internal-dependency-trace script by handling commands/secrets/index.js (#10599)
cb37ff2c894d9d9e7ee83796ec62ee8c28957908,Trek Glowacki,2023-09-27 12:05:24+00:00,GitHub,2023-09-27 12:05:24+00:00,"Fix incorrect comment (#10603)

Fixes an errant comment from #10583."
2f5b0aeeb183ed3ea8cbc68cb3bc3c949c486ada,Trek Glowacki,2023-09-26 21:11:57+00:00,GitHub,2023-09-26 21:11:57+00:00,"[cli] Update bun detection and add tests for projects with both `bunlock.b` and `yarn.lock` files (#10583)

Updates package manager detection to account for two lock files. All other managers will only have the one lock file. Bun, however, may have both a `bun.lockb` _and_ a `yarn.lock` file. To ensure bun is properly detected, the presence of `bun.lockb` with `yarn.lock` must occur before `yarn.lock` so we don't mistake the presence of a `yarn.lock` to mean ""Yarn"".

This PR also adds a test for this situation in `fs-detectors`. The behavior is currently correct there, but was not tested initially. It is now to avoid future regressions."
ab0160878566d4e155ca89ebdadf15594a9ec9f0,Steven,2023-09-25 20:11:40+00:00,GitHub,2023-09-25 20:11:40+00:00,"Revert ""[ci] use `--output-logs=new-only` to only list tests that changed"" (#10584)

Reverts vercel/vercel#10570

This was causing a bug because my assumption about turbo cache hit/miss was incorrect. 

I thought `turbo run test-e2e --listTests` would be use the same cache as `turbo run test-e2e` but it does not. So what was happening is that tests were not running on a second push to a PR because turbo already ""cached"" the result of `--listTests` so that `new-only` was saying there are no new tests and nothing to run "
905c7b6ad49ba2b797fe3c4831ef4cbd075f87b5,balazs4,2023-09-25 16:25:46+00:00,GitHub,2023-09-25 16:25:46+00:00,"[vc cert ls] remove error shallowing (#10551)

During [project-level-rbac bug bash](https://linear.app/vercel/issue/IAM-1267/vc-certs-ls-fails-with-typeerror-for-contributors) we were facing a runtime error 

```
Error: An unexpected error occurred in certs: TypeError: Cannot read properties of undefined (reading 'length')
```

The reason for that is because the API responded with `403`, which was expected in our test. However the CLI should not exit with a generic runtime error in this case.

This PR removes the `.catch(err => err)` error shallowing instruction."
717dd82c515fba6df1e896b5463b0dd617bc2e70,Vercel Release Bot,2023-09-25 15:58:07+00:00,GitHub,2023-09-25 15:58:07+00:00,"[examples][tests] Upgrade Next.js to version 13.5.3 (#10581)

This auto-generated PR updates 5 packages to Next.js version 13.5.3"
a4996e1c5a7e6986d5410b662014dc584c0f7c54,Jack Wilson,2023-09-25 13:36:09+00:00,GitHub,2023-09-25 13:36:09+00:00,"Update broken documentation link (#10579)

The error link for the Go runtime documentation was broken. This PR updates the link."
c147ead1bce041543e3d482ecf3d85b7e98454f6,Steven,2023-09-23 03:25:28+00:00,GitHub,2023-09-23 03:25:28+00:00,"[cli] remove unused source map pkg (#10577)

This PR removes a [deprecated package](https://www.npmjs.com/package/@zeit/source-map-support) that was originally added in PR https://github.com/vercel/vercel/pull/1205

The comment said:

```js
// we only enable source maps while developing, since
// they have a small performance hit. for this, we
// look for `pkg`, which is only present in the final bin
```

Some time along the way this was changed from development only, to always being installed.

However, no longer need this package because we can enable source maps for development by using [`--enable-source-map`](https://nodejs.org/docs/latest-v18.x/api/cli.html#--enable-source-maps) which has been available since Node.js 12"
2ab5ce5d9079f68a133832618b4a19a1a311a023,Steven,2023-09-23 02:12:03+00:00,GitHub,2023-09-23 02:12:03+00:00,"[cli] disable source map for prod build (#10575)

I noticed the latest release got [larger in size](https://packagephobia.com/result?p=vercel@32.3.1) when we were expecting it to get smaller.

This is because a 14MB source map was published to npm as [`dist/index.js.map`](https://unpkg.com/browse/vercel@32.3.1/dist/).

This PR disables source maps by default and you can optionally enable when running locally to debug."
33e43e103a6101b3fe9e08ac5016649f3b51ff68,Steven,2023-09-22 17:14:57+00:00,GitHub,2023-09-22 17:14:57+00:00,"[ci] use `--output-logs=new-only` to only list tests that changed (#10570)

This PR effectively reverts the change in https://github.com/vercel/vercel/pull/9172 since it is safe to skip tests that are not part of the turbo cache miss results. Previously, we were unable to do this because all of those jobs/checks were marked as required on the github repo settings. But now we have a single [""Summary"" job](https://github.com/vercel/vercel/blob/f6e863d4bbdeb755eb89f1c621bf38dddc7399e1/.github/workflows/test.yml#L111-L128) that is marked as required at the repo level so now we don't need to create jobs anymore just to see the turbo cache hit go green.

- [15f90b0](https://github.com/vercel/vercel/pull/10570/commits/15f90b057da8c31ba860ca87ffad5750120007c1) correctly skipped all e2e tests since none of the packages changed
- [2613963](https://github.com/vercel/vercel/pull/10570/commits/26139634fb7ba1f65aabe0cfdc76f4bdb32df1e0) correctly ran the `vercel` e2e tests since the cli package was changed
- [8488b05](https://github.com/vercel/vercel/pull/10570/commits/8488b0543b6c261d2433ba5f3de4af8a9caabe99) correctly runs tests for all packages since build-utils was changed and all packages depend on it

Also see [Turbo `-output-logs` docs](https://turbo.build/repo/docs/reference/command-line-reference/run#--output-logs) for more."
3dbc75580daabfc7807fd413819b9e95980d25ab,Steven,2023-09-22 16:50:21+00:00,GitHub,2023-09-22 16:50:21+00:00,"[ci] increase concurrency for e2e tests (#10569)

 Increase concurrency for e2e tests so they finish faster"
f6e863d4bbdeb755eb89f1c621bf38dddc7399e1,Vercel Release Bot,2023-09-22 15:54:57+00:00,GitHub,2023-09-22 15:54:57+00:00,"Version Packages (#10565)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.3.1

### Patch Changes

- Use ""esbuild"" to build CLI
([#10555](https://github.com/vercel/vercel/pull/10555))

- Updated dependencies
\[[`9f63ca60a`](https://github.com/vercel/vercel/commit/9f63ca60ad914af0f7ba18c9bbe1656eeea68a0a),
[`e3f9faf51`](https://github.com/vercel/vercel/commit/e3f9faf513bd97900d8966f2f1116fc3ca07221b)]:
    -   @vercel/next@4.0.8
    -   @vercel/remix-builder@2.0.8

## @vercel/next@4.0.8

### Patch Changes

- Fix edge case for setting `__NEXT_PRIVATE_PREBUNDLED_REACT`
([#10568](https://github.com/vercel/vercel/pull/10568))

## @vercel/remix-builder@2.0.8

### Patch Changes

- Update `@remix-run/dev` fork to v2.0.1
([#10566](https://github.com/vercel/vercel/pull/10566))"
9f63ca60ad914af0f7ba18c9bbe1656eeea68a0a,Nathan Rajlich,2023-09-22 15:40:54+00:00,GitHub,2023-09-22 15:40:54+00:00,"[next] Fix a couple issues with server-build template injecting (#10568)

(Includes e2e thanks to @feedthejim)"
873327e9bdb56be5dbfcf3ca45308d9f8308debc,Nathan Rajlich,2023-09-22 13:57:20+00:00,GitHub,2023-09-22 13:57:20+00:00,Remove `@vercel/ncc` dependency from all packages (#10559)
e3f9faf513bd97900d8966f2f1116fc3ca07221b,Vercel Release Bot,2023-09-22 13:25:08+00:00,GitHub,2023-09-22 13:25:08+00:00,"[remix] Update `@remix-run/dev` to v2.0.1 (#10566)

This auto-generated PR updates `@remix-run/dev` to version 2.0.1."
1a5bd6c5b9f579bb339264fc411a2a7cb2c5fcb1,Nathan Rajlich,2023-09-22 12:25:26+00:00,GitHub,2023-09-22 12:25:26+00:00,"[cli] Use ""esbuild"" (#10555)"
6d312d85b26652bd5c02a3c9f7d8617dde52500a,Vercel Release Bot,2023-09-21 17:59:12+00:00,GitHub,2023-09-21 17:59:12+00:00,"Version Packages (#10542)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.3.0

### Minor Changes

- [cli] Support northstar users
([#10535](https://github.com/vercel/vercel/pull/10535))

### Patch Changes

- Internal variants
([#10549](https://github.com/vercel/vercel/pull/10549))

- [speed insights] Prepare for migration to new speed insights package
([#10500](https://github.com/vercel/vercel/pull/10500))

- Updated dependencies
\[[`b0898a665`](https://github.com/vercel/vercel/commit/b0898a66591d5296dc38ffcf0e8345c9338b72f3),
[`10d4e51ac`](https://github.com/vercel/vercel/commit/10d4e51ac57b76f05ddc0bf3adf220e2490244fc),
[`decdf27fb`](https://github.com/vercel/vercel/commit/decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3),
[`f5ca497b7`](https://github.com/vercel/vercel/commit/f5ca497b7522a2dad637cef238da9716ac133057),
[`ab329f0fe`](https://github.com/vercel/vercel/commit/ab329f0fe88e9cb72607d0cba41f5e168d77e077),
[`d0d052011`](https://github.com/vercel/vercel/commit/d0d0520111264434d57d5920de0f622f6a2588dc),
[`9bb3067de`](https://github.com/vercel/vercel/commit/9bb3067de28be77f3ce268a31a7aa6184836dfb1)]:
    -   @vercel/static-build@2.0.7
    -   @vercel/node@3.0.6
    -   @vercel/build-utils@7.2.1
    -   @vercel/next@4.0.7
    -   @vercel/python@4.0.2
    -   @vercel/redwood@2.0.3
    -   @vercel/remix-builder@2.0.7
    -   @vercel/go@3.0.2

## @vercel/edge@1.1.0

### Minor Changes

- Add flag to geolocation
([#10443](https://github.com/vercel/vercel/pull/10443))

    Usage

        const { flag } = geolocation(req)

## @vercel/build-utils@7.2.1

### Patch Changes

- Internal variants
([#10549](https://github.com/vercel/vercel/pull/10549))

## @vercel/client@13.0.4

### Patch Changes

- Updated dependencies
\[[`decdf27fb`](https://github.com/vercel/vercel/commit/decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3)]:
    -   @vercel/build-utils@7.2.1

## @vercel/gatsby-plugin-vercel-analytics@1.0.11

### Patch Changes

- Remove ""babel"" compilation
([#10546](https://github.com/vercel/vercel/pull/10546))

## @vercel/gatsby-plugin-vercel-builder@2.0.6

### Patch Changes

- Use ""esbuild"" to build package
([#10508](https://github.com/vercel/vercel/pull/10508))

- Updated dependencies
\[[`decdf27fb`](https://github.com/vercel/vercel/commit/decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3)]:
    -   @vercel/build-utils@7.2.1

## @vercel/go@3.0.2

### Patch Changes

- Add support for Go v1.21.0
([#10552](https://github.com/vercel/vercel/pull/10552))

## @vercel/next@4.0.7

### Patch Changes

- Internal variants
([#10549](https://github.com/vercel/vercel/pull/10549))

- Update `@vercel/nft` to v0.24.1.
([#10540](https://github.com/vercel/vercel/pull/10540))

- Build package using ""esbuild""
([#10482](https://github.com/vercel/vercel/pull/10482))

## @vercel/node@3.0.6

### Patch Changes

- Use ""esbuild"" to build package
([#10553](https://github.com/vercel/vercel/pull/10553))

- Update `@vercel/nft` to v0.24.1.
([#10540](https://github.com/vercel/vercel/pull/10540))

- Updated dependencies
\[[`decdf27fb`](https://github.com/vercel/vercel/commit/decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3)]:
    -   @vercel/build-utils@7.2.1

## @vercel/python@4.0.2

### Patch Changes

- Fix docs URL in error message
([#10544](https://github.com/vercel/vercel/pull/10544))

## @vercel/redwood@2.0.3

### Patch Changes

- Update `@vercel/nft` to v0.24.1.
([#10540](https://github.com/vercel/vercel/pull/10540))

## @vercel/remix-builder@2.0.7

### Patch Changes

- Update `@vercel/nft` to v0.24.1.
([#10540](https://github.com/vercel/vercel/pull/10540))

## @vercel/static-build@2.0.7

### Patch Changes

- Mark `@vercel/static-config` and `ts-morph` as externals
([#10543](https://github.com/vercel/vercel/pull/10543))

- Updated dependencies
\[[`4b376a564`](https://github.com/vercel/vercel/commit/4b376a564a09679dc1085d3bfcd6290c6f15760e),
[`b8bc682d3`](https://github.com/vercel/vercel/commit/b8bc682d3eef0e6033fd6e8db2089c6c4ca671af)]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.6
    -   @vercel/gatsby-plugin-vercel-analytics@1.0.11

## @vercel-internals/types@1.0.11

### Patch Changes

- Updated dependencies
\[[`decdf27fb`](https://github.com/vercel/vercel/commit/decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3)]:
    -   @vercel/build-utils@7.2.1

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
10d4e51ac57b76f05ddc0bf3adf220e2490244fc,Nathan Rajlich,2023-09-20 21:35:57+00:00,GitHub,2023-09-20 21:35:57+00:00,"[node] Use ""esbuild"" to build package (#10553)"
57231a0d603fdba6315ddb331d0dbe5f3ee99c9f,Tobias Lins,2023-09-20 21:06:12+00:00,GitHub,2023-09-20 21:06:12+00:00,"[speed insights] Prepare for migration to new speed insights package (#10500)

During `vc build` do following when `@vercel/speed-insights` package is in dependencies:
- Show a warning when `VERCEL_ANALYTICS_ID` is set in environment variables
- Unset it in process.env to prevent auto-injecting old speed insights in Next.js

Durning `vc env pull` prevent pulling internal environment variables `VERCEL_ANALYTICS_ID`, `VERCEL_SPEED_INSIGHTS_ID` & `VERCEL_WEB_ANALYTICS_ID`. They are never required in the frontend"
e0e9cffc8d23d58b4b2e885354daf7b9b07a9979,Vercel Release Bot,2023-09-20 20:19:36+00:00,GitHub,2023-09-20 20:19:36+00:00,"[examples][tests] Upgrade Next.js to version 13.5.2 (#10554)

This auto-generated PR updates 4 packages to Next.js version 13.5.2"
d0d0520111264434d57d5920de0f622f6a2588dc,Nathan Rajlich,2023-09-20 20:01:03+00:00,GitHub,2023-09-20 20:01:03+00:00,"[next] Use ""esbuild"" to build package (#10482)

### Before

```
$ time pnpm run build

> @vercel/next@4.0.6 build /Users/nrajlich/Code/vercel/vercel/packages/next
> node build.js

ncc: Version 0.24.0
ncc: Compiling file index.js
ncc: Using typescript@4.9.5 (local user-provided)
1506kB  dist/main/index.js
1506kB  [3345ms] - ncc 0.24.0

real    0m5.210s
user    0m9.083s
sys     0m0.506s

$ ls -l dist/
total 1700
-rw-r--r-- 1 nrajlich staff    2176 Sep 20 15:18 ___get-nextjs-edge-function.js
-rw-r--r-- 1 nrajlich staff    3283 Sep 20 15:18 create-serverless-config.js
drwxr-xr-x 6 nrajlich staff     192 Sep 20 15:18 edge-function-source/
-rw-r--r-- 1 nrajlich staff 1542314 Sep 20 15:18 index.js
-rw-r--r-- 1 nrajlich staff     728 Sep 20 15:18 legacy-launcher.js
-rw-r--r-- 1 nrajlich staff    6807 Sep 20 15:18 legacy-versions.js
-rw-r--r-- 1 nrajlich staff   66662 Sep 20 15:18 server-build.js
-rw-r--r-- 1 nrajlich staff    1583 Sep 20 15:18 server-launcher.js
-rw-r--r-- 1 nrajlich staff    5167 Sep 20 15:18 sourcemapped.js
-rw-r--r-- 1 nrajlich staff    1003 Sep 20 15:18 templated-launcher-shared.js
-rw-r--r-- 1 nrajlich staff     799 Sep 20 15:18 templated-launcher.js
-rw-r--r-- 1 nrajlich staff   83876 Sep 20 15:18 utils.js

$ pnpm pack && ls -lh vercel-next-4.0.6.tgz 
-rw-r--r-- 1 nrajlich staff 373K Sep 20 15:19 vercel-next-4.0.6.tgz
```

### After

```
$ time pnpm run build

> @vercel/next@4.0.6 build /Users/nrajlich/Code/vercel/vercel/packages/next
> node build.mjs

real    0m1.144s
user    0m0.550s
sys     0m0.171s

$ ls -l dist/
total 540
-rw-r--r-- 1 nrajlich staff   2176 Sep 20 15:15 ___get-nextjs-edge-function.js
-rw-r--r-- 1 nrajlich staff 528575 Sep 20 15:15 index.js
-rw-r--r-- 1 nrajlich staff   1680 Sep 20 15:15 legacy-launcher.js
-rw-r--r-- 1 nrajlich staff    901 Sep 20 15:15 server-launcher.js
-rw-r--r-- 1 nrajlich staff    532 Sep 20 15:15 templated-launcher-shared.js
-rw-r--r-- 1 nrajlich staff    316 Sep 20 15:15 templated-launcher.js

$ pnpm pack && ls -lh vercel-next-4.0.6.tgz 
-rw-r--r-- 1 nrajlich staff 104K Sep 20 15:15 vercel-next-4.0.6.tgz
```"
9bb3067de28be77f3ce268a31a7aa6184836dfb1,Ethan Arrowood,2023-09-20 18:30:38+00:00,GitHub,2023-09-20 18:30:38+00:00,"[go] add support for Go 1.21.0 (#10552)

as titled

updates a test to check for runtime version

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
decdf27fb5ca914fe50a9320c4fd50ef79d2fbb3,Andy,2023-09-20 17:42:20+00:00,GitHub,2023-09-20 17:42:20+00:00,"[cli][next][build-utils] Variants (#10549)

Co-authored-by: Ethan Arrowood <ethan.arrowood@vercel.com>"
4b376a564a09679dc1085d3bfcd6290c6f15760e,Nathan Rajlich,2023-09-20 13:26:31+00:00,GitHub,2023-09-20 13:26:31+00:00,"[gatsby-plugin-vercel-builder] Use ""esbuild"" to build package (#10508)

Removes the two-staged `tsc` build into a single `esbuild` bundle. The `ssr-handler.ts` template file is moved to the root of the package and converted to JavaScript."
b7e93524e3606223cc9fde254c8e67d5ec3c98e0,Shu Uesugi,2023-09-19 21:45:42+00:00,GitHub,2023-09-19 21:45:42+00:00,"[cli] Support northstar users (#10535)

Supports users who have `version === 'northstar'` and `defaultTeamId`."
62283356b8fec88abeb85892b6b8259c111659f1,Paul Scanlon,2023-09-19 21:25:46+00:00,GitHub,2023-09-19 21:25:46+00:00,"feat: add flag to geolocation (#10443)

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
3305f5e83277f5b035137342dcd38956af665c98,Vercel Release Bot,2023-09-19 21:06:40+00:00,GitHub,2023-09-19 21:06:40+00:00,"[examples][tests] Upgrade Next.js to version 13.5.1 (#10545)

This auto-generated PR updates 4 packages to Next.js version 13.5.1"
a9387069161e1cdd206a2c2b116a36bc5daaf0b4,Jiachi Liu,2023-09-19 21:01:13+00:00,GitHub,2023-09-19 21:01:13+00:00,"update code owners for nextjs example (#10548)

Add @huozhi to nextjs example code owners

---------

Co-authored-by: Steven <steven@ceriously.com>"
b8bc682d3eef0e6033fd6e8db2089c6c4ca671af,Nathan Rajlich,2023-09-19 20:45:26+00:00,GitHub,2023-09-19 20:45:26+00:00,"[gatsby-plugin-vercel-analytics] Remove ""babel"" compilation (#10546)

The ""babel"" build for this package essentially does nothing. The output is still using ESM and no transformation is done. Let's just remove the ""build"" script entirely."
f5ca497b7522a2dad637cef238da9716ac133057,Nathan Rajlich,2023-09-19 18:07:43+00:00,GitHub,2023-09-19 18:07:43+00:00,[python] Fix docs URL in error message (#10544)
b0898a66591d5296dc38ffcf0e8345c9338b72f3,Nathan Rajlich,2023-09-19 17:47:05+00:00,GitHub,2023-09-19 17:47:05+00:00,"[static-build] Mark `@vercel/static-config` and `ts-morph` as externals (#10543)

To be consistent with the other packages that use `@vercel/static-config`/`ts-morph`, move these packages to ""dependencies"" so that they will be excluded from the bundle, and de-duped at the `node_modules` level when installing CLI."
ab329f0fe88e9cb72607d0cba41f5e168d77e077,Chris Barber,2023-09-19 14:27:54+00:00,GitHub,2023-09-19 14:27:54+00:00,"[next][node][redwood][remix] Update @vercel/nft (#10540)

Updating `nft` to fix a bug. We're a couple version behind. Here's all cumulative changes:

- 0.24.1
  - resolve cjs deps as cjs instead of esm
- 0.24.0
  - drop node@14 
- 0.23.1
  - use builtinModules from module
- 0.23.0
  - resolve: export resolve() function
- 0.22.6
  - Make caching work correctly in async context"
8b35333446c81b4698c432459e7784e6901fd5c7,Nathan Rajlich,2023-09-18 19:32:30+00:00,GitHub,2023-09-18 19:32:30+00:00,"[examples] Update ""remix"" template to v2 (#10532)"
a92467719bc2927702a990398384495899b9498a,Vercel Release Bot,2023-09-18 18:44:07+00:00,GitHub,2023-09-18 18:44:07+00:00,"Version Packages (#10528)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@32.2.5

### Patch Changes

- Updated dependencies
\[[`849eedf0f`](https://github.com/vercel/vercel/commit/849eedf0f2841211e4175d374f1cf01330bf9611),
[`f6f16b034`](https://github.com/vercel/vercel/commit/f6f16b0347bac9f5c33c79ccb1fb9fd9d254cae5),
[`3035e18fb`](https://github.com/vercel/vercel/commit/3035e18fb67dfe7031e235a74136a41948f86d5a),
[`cb784aeb9`](https://github.com/vercel/vercel/commit/cb784aeb9c9e4eddf1c65b61849a87edb1117af1)]:
    -   @vercel/next@4.0.6
    -   @vercel/remix-builder@2.0.6

## @vercel/next@4.0.6

### Patch Changes

- Fix feature flag detection
([#10531](https://github.com/vercel/vercel/pull/10531))

## @vercel/remix-builder@2.0.6

### Patch Changes

- Fix ESM mode for Edge runtime
([#10530](https://github.com/vercel/vercel/pull/10530))

- Update `@remix-run/dev` fork to v2.0.0
([#10526](https://github.com/vercel/vercel/pull/10526))

- Fixes for Remix v2
([#10525](https://github.com/vercel/vercel/pull/10525))"
f6f16b0347bac9f5c33c79ccb1fb9fd9d254cae5,Nathan Rajlich,2023-09-18 18:26:53+00:00,GitHub,2023-09-18 18:26:53+00:00,"[remix] Fix ESM mode for Edge runtime, add Remix v2 E2E test (#10530)

Similar to the default import fix from #10525 which was for Node runtime, but this one fixes Edge runtime.

Also adds an E2E test for Remix v2, including both a Node route and Edge route."
92ad73b8f3acbfaeda182391ffbeb8b00aa57369,Trek Glowacki,2023-09-18 16:43:16+00:00,GitHub,2023-09-18 16:43:16+00:00,"Restore datadog checking with logs not exit codes (#10527)

Restores DataDog flakey test detection. Briefly disabled because the old method of using exit codes would bail the entire workflow.

Taking the Turbo team's suggestion of looking at `runData.execution` values to avoid an extra loop. Now with unit tests!"
849eedf0f2841211e4175d374f1cf01330bf9611,Steven,2023-09-18 16:17:55+00:00,GitHub,2023-09-18 16:17:55+00:00,"[next] fix feature flag detection (#10531)

For feature flags, we use the string `1` for enabled and the string `0` for disabled.

So we need to check the value of the env var, not the presence of the env var."
848a62e4a5beb9f369b51517aa4bd400822d9c32,Vercel Release Bot,2023-09-18 15:31:52+00:00,GitHub,2023-09-18 15:31:52+00:00,"[tests] Upgrade Turbo to version 1.10.14 (#10529)

This auto-generated PR updates Turbo to version 1.10.14"
cb784aeb9c9e4eddf1c65b61849a87edb1117af1,Nathan Rajlich,2023-09-18 14:32:08+00:00,GitHub,2023-09-18 14:32:08+00:00,"[remix] Fixes for Remix v2 (#10525)

The Remix v2 template now uses `""type"": ""module""` by default, so adjust our bundling logic to account for that possibility."
3035e18fb67dfe7031e235a74136a41948f86d5a,Vercel Release Bot,2023-09-18 14:05:42+00:00,GitHub,2023-09-18 14:05:42+00:00,"[remix] Update `@remix-run/dev` to v2.0.0 (#10526)

This auto-generated PR updates `@remix-run/dev` to version 2.0.0."
eb40c4c4a0320e56f4167ee787929cfe55349252,Vercel Release Bot,2023-09-15 19:13:54+00:00,GitHub,2023-09-15 19:13:54+00:00,"Version Packages (#10514)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/fs-detectors@5.1.0

### Minor Changes

- Add support for bun detection in monorepo
([#10511](https://github.com/vercel/vercel/pull/10511))

## vercel@32.2.4

### Patch Changes

- Add support for bun detection in monorepo
([#10511](https://github.com/vercel/vercel/pull/10511))

- Updated dependencies
\[[`1b6f3a0f6`](https://github.com/vercel/vercel/commit/1b6f3a0f6534f71c7486a4e33ac199f1da330626)]:
    -   @vercel/static-build@2.0.6

## @vercel/static-build@2.0.6

### Patch Changes

- Add support for bun detection in monorepo
([#10511](https://github.com/vercel/vercel/pull/10511))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
c90ee12b1709087e24648e9184d0a867bbe5b044,Nathan Rajlich,2023-09-15 19:06:32+00:00,GitHub,2023-09-15 19:06:32+00:00,"Update bun changeset to bump static-build + CLI (#10516)

Also reverts https://github.com/vercel/vercel/pull/10515 since it didn't
work the way we were hoping."
78be0200b4193a8437034db6a2d93095c39ae58c,Nathan Rajlich,2023-09-15 18:54:47+00:00,GitHub,2023-09-15 18:54:47+00:00,"Enable changesets experimental `updateInternalDependents: 'always'` config (#10515)

From the [sounds of
it](https://github.com/changesets/changesets/blob/main/docs/experimental-options.md#updateinternaldependents-type-out-of-range--always),
setting this config value to ""always"" will make it so that a patch
release will happen for a package that depends on another package which
is being bumped. This would normally happen anyways, but does not happen
when a dependency is a `devDependency` rather than a `dependency` (which
happens for the Builders and CLI, since those packages get bundled and
thus have their deps listed as devDependencies)."
1b6f3a0f6534f71c7486a4e33ac199f1da330626,Steven,2023-09-15 18:13:26+00:00,GitHub,2023-09-15 18:13:26+00:00,"[fs-detectors] Add support for bun detection in monorepo (#10511)

E2E test looks like:

```sh
bunx create-turbo@canary
cd my-turborepo
gh repo create
vc link --repo
vc deploy
```"
eceb15ace9adedd2b7393974d8198e641f13bdb4,Trek Glowacki,2023-09-15 17:49:24+00:00,GitHub,2023-09-15 17:49:24+00:00,"Revert skipping datadog reports (#10513)

Revert
[.github/workflows/test.yml](https://github.com/vercel/vercel/pull/10513/files#diff-faff1af3d8ff408964a57b2e475f69a6b7c7b71c9978cccc8f471798caac2c88)
to an earlier version."
fa3f701e052bb69af410d8240d891717ee9e5fb2,Vercel Release Bot,2023-09-14 21:06:33+00:00,GitHub,2023-09-14 21:06:33+00:00,"Version Packages (#10505)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
9953fc765f3be98a578ea4c79d2f41c3ee8765a7,Trek Glowacki,2023-09-14 16:39:53+00:00,GitHub,2023-09-14 16:39:53+00:00,Complete the error message (#10509)
29ea1af971cfd7076c139c598da0778f6e2b8207,Trek Glowacki,2023-09-14 15:47:20+00:00,GitHub,2023-09-14 15:47:20+00:00,Skip DataDog reporting if Turbo cache indicates the uploaded files would be identical (#10501)
083aad448e45edae296da3201eec9f890a01d22d,Zack Tanner,2023-09-14 01:19:13+00:00,GitHub,2023-09-14 01:19:13+00:00,"[next] missed a prerender for experimentalBypassFor (#10504)

Missed this in https://github.com/vercel/vercel/pull/10497"
314a105ba178c85f79e6acfdb8165d0d660df0fa,Vercel Release Bot,2023-09-13 22:15:29+00:00,GitHub,2023-09-13 22:15:29+00:00,"Version Packages (#10493)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
1abda9ca871ce4fad98b260c9467fd5a7f294a40,Ikko Eltociear Ashimine,2023-09-13 13:26:51+00:00,GitHub,2023-09-13 13:26:51+00:00,"[cli] Fix typo in corepack.ts (#10499)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
7a0fed970c39cb8f4df70544ded3284d3538b06a,Zack Tanner,2023-09-12 22:40:49+00:00,GitHub,2023-09-12 22:40:49+00:00,[next] provide `experimentalBypassFor` to prerender from manifest (#10497)
2f461a8b0bcbdd05da0516395c2905c2d0242682,Jimmy Lai,2023-09-12 19:45:23+00:00,GitHub,2023-09-12 19:45:23+00:00,"next.js: add option to use bundled runtime (#10485)

This PR adds an environment variable that should allow us to test the bundled version for Next.js on Vercel, see https://github.com/vercel/next.js/pull/52997 for reference.

The changes include:
- a new environment variable `VERCEL_NEXT_BUNDLED_SERVER`
- some logic changes that will put app route handlers into their own lambda groups
- extra logic to require early the rendering runtimes (see PR above for details)"
ec894bdf7f167debded37183f11360756f577f14,Steven,2023-09-12 15:29:24+00:00,GitHub,2023-09-12 15:29:24+00:00,"[frameworks] Add `bun install` placeholder (#10492)

<img width=""899"" alt=""image""
src=""https://github.com/vercel/vercel/assets/229881/f37a3cfd-bbb9-4c33-88dc-cd19b9855a47"">"
009cea6d3050699b9ea6d2858476284e23df93f7,Andy,2023-09-12 15:25:02+00:00,GitHub,2023-09-12 15:25:02+00:00,"[examples] Use placeholder for API Key (#10490)

The Ionic example has an actual Google Maps API key by default and we'd
like to not have it displayed, so we'll replace it with a placeholder
instead. Considering it's commented out anyways, this will be a no-op.

---------

Co-authored-by: Steven <steven@ceriously.com>"
1bab21026ec0bb8a4a8fbeac3d6e4a197f1030fd,Nathan Rajlich,2023-09-12 14:55:16+00:00,GitHub,2023-09-12 14:55:16+00:00,[remix] Fix usage with `bun install` (#10489)
bcebab7517a2d440bde4cfd486f68025e2408d5a,Vercel Release Bot,2023-09-11 21:30:02+00:00,GitHub,2023-09-11 21:30:02+00:00,"Version Packages (#10478)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@7.2.0

### Minor Changes

- Add new optional prerender field: experimentalStreamingLambdaPath
([#10476](https://github.com/vercel/vercel/pull/10476))

- [build-utils] Add zero config detection for bun package manager
([#10486](https://github.com/vercel/vercel/pull/10486))

### Patch Changes

- add `experimentalBypassFor` field to Prerender
([#10481](https://github.com/vercel/vercel/pull/10481))

## vercel@32.2.1

### Patch Changes

- Update @vercel/fun@1.1.0
([#10477](https://github.com/vercel/vercel/pull/10477))

- [node] upgrade edge-runtime
([#10451](https://github.com/vercel/vercel/pull/10451))

- Updated dependencies
\[[`6784e7751`](https://github.com/vercel/vercel/commit/6784e77516ba180a691e3c48323b32bb4506d7b6),
[`a8ad17626`](https://github.com/vercel/vercel/commit/a8ad176262ef822860ce338927e6f959961d2d32),
[`0ee089a50`](https://github.com/vercel/vercel/commit/0ee089a501ebb78901c4afe1658e794917998f8f),
[`f15cba614`](https://github.com/vercel/vercel/commit/f15cba6148a0cdb6975db7724775c35ab7d929b2),
[`b265e13d4`](https://github.com/vercel/vercel/commit/b265e13d40d541b77148fa79ac60b4c4dd10974c),
[`50e04dd85`](https://github.com/vercel/vercel/commit/50e04dd8584664c842a86c15d92d654f4ea8dcbb),
[`45b73c7e8`](https://github.com/vercel/vercel/commit/45b73c7e86458564dc0bab007f6f6365c4c4ab5d),
[`a732d30c8`](https://github.com/vercel/vercel/commit/a732d30c8409f96f59ea5406e974a6c4186cc130),
[`9d64312aa`](https://github.com/vercel/vercel/commit/9d64312aaaa875a4e193b7602c50e5dc68979aad),
[`6baefc825`](https://github.com/vercel/vercel/commit/6baefc825ad7cfc3a5edce31cb4244721452f753),
[`989f0d813`](https://github.com/vercel/vercel/commit/989f0d813910d8d67ed355de93018f1dcd91b6ba),
[`d8bc570f6`](https://github.com/vercel/vercel/commit/d8bc570f604950d97156d4f33c8accecf3b3b28f)]:
    -   @vercel/go@3.0.1
    -   @vercel/redwood@2.0.2
    -   @vercel/remix-builder@2.0.4
    -   @vercel/hydrogen@1.0.1
    -   @vercel/static-build@2.0.5
    -   @vercel/build-utils@7.2.0
    -   @vercel/next@4.0.3
    -   @vercel/node@3.0.5
    -   @vercel/python@4.0.1
    -   @vercel/ruby@2.0.2

## @vercel/client@13.0.3

### Patch Changes

- Updated dependencies
\[[`50e04dd85`](https://github.com/vercel/vercel/commit/50e04dd8584664c842a86c15d92d654f4ea8dcbb),
[`45b73c7e8`](https://github.com/vercel/vercel/commit/45b73c7e86458564dc0bab007f6f6365c4c4ab5d),
[`d8bc570f6`](https://github.com/vercel/vercel/commit/d8bc570f604950d97156d4f33c8accecf3b3b28f)]:
    -   @vercel/build-utils@7.2.0

## @vercel/edge@1.0.2

### Patch Changes

- [node] upgrade edge-runtime
([#10451](https://github.com/vercel/vercel/pull/10451))

## @vercel/gatsby-plugin-vercel-builder@2.0.5

### Patch Changes

- Updated dependencies
\[[`50e04dd85`](https://github.com/vercel/vercel/commit/50e04dd8584664c842a86c15d92d654f4ea8dcbb),
[`45b73c7e8`](https://github.com/vercel/vercel/commit/45b73c7e86458564dc0bab007f6f6365c4c4ab5d),
[`9d64312aa`](https://github.com/vercel/vercel/commit/9d64312aaaa875a4e193b7602c50e5dc68979aad),
[`d8bc570f6`](https://github.com/vercel/vercel/commit/d8bc570f604950d97156d4f33c8accecf3b3b28f)]:
    -   @vercel/build-utils@7.2.0
    -   @vercel/node@3.0.5

## @vercel/go@3.0.1

### Patch Changes

- Update to esbuild script
([#10468](https://github.com/vercel/vercel/pull/10468))

## @vercel/hydrogen@1.0.1

### Patch Changes

- Use `build-builder.mjs` script to bundle, and remove types and source
maps ([#10480](https://github.com/vercel/vercel/pull/10480))

## @vercel/next@4.0.3

### Patch Changes

- fix content-type for RSC prefetches
([#10487](https://github.com/vercel/vercel/pull/10487))

## @vercel/node@3.0.5

### Patch Changes

- [node] upgrade edge-runtime
([#10451](https://github.com/vercel/vercel/pull/10451))

- Updated dependencies
\[[`50e04dd85`](https://github.com/vercel/vercel/commit/50e04dd8584664c842a86c15d92d654f4ea8dcbb),
[`45b73c7e8`](https://github.com/vercel/vercel/commit/45b73c7e86458564dc0bab007f6f6365c4c4ab5d),
[`d8bc570f6`](https://github.com/vercel/vercel/commit/d8bc570f604950d97156d4f33c8accecf3b3b28f)]:
    -   @vercel/build-utils@7.2.0

## @vercel/python@4.0.1

### Patch Changes

- Update to esbuild script
([#10470](https://github.com/vercel/vercel/pull/10470))

## @vercel/redwood@2.0.2

### Patch Changes

- Update to esbuild script
([#10471](https://github.com/vercel/vercel/pull/10471))

## @vercel/remix-builder@2.0.4

### Patch Changes

- Use `build-builder.mjs` script to bundle, and remove types and source
maps ([#10479](https://github.com/vercel/vercel/pull/10479))

## @vercel/ruby@2.0.2

### Patch Changes

- Update to esbuild script
([#10472](https://github.com/vercel/vercel/pull/10472))

## @vercel/static-build@2.0.5

### Patch Changes

- Build package using ""esbuild""
([#10462](https://github.com/vercel/vercel/pull/10462))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@2.0.5

## @vercel-internals/types@1.0.10

### Patch Changes

- Updated dependencies
\[[`50e04dd85`](https://github.com/vercel/vercel/commit/50e04dd8584664c842a86c15d92d654f4ea8dcbb),
[`45b73c7e8`](https://github.com/vercel/vercel/commit/45b73c7e86458564dc0bab007f6f6365c4c4ab5d),
[`d8bc570f6`](https://github.com/vercel/vercel/commit/d8bc570f604950d97156d4f33c8accecf3b3b28f)]:
    -   @vercel/build-utils@7.2.0

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
45b73c7e86458564dc0bab007f6f6365c4c4ab5d,Steven,2023-09-11 21:26:34+00:00,GitHub,2023-09-11 21:26:34+00:00,"[build-utils] Add zero config detection for bun package manager (#10486)

> [!IMPORTANT]  
> This PR will only support Bun as a package manager at build time. 
> Bun will **not** work at runtime with Serverless Functions or Edge
Functions at this time.

- Depends on https://github.com/vercel/api/pull/21869
- Fixes https://github.com/orgs/vercel/discussions/2021
- Closes https://github.com/vercel/vercel/pull/10244
- Related https://github.com/nodejs/corepack/issues/295
- Docs https://bun.sh/docs/install"
a732d30c8409f96f59ea5406e974a6c4186cc130,Zack Tanner,2023-09-11 19:04:16+00:00,GitHub,2023-09-11 19:04:16+00:00,"[next] fix content-type for RSC prefetches (#10487)

This ensures that the `.prefetch.rsc` requests respond with the correct `content-type` since this is used by Next.js to determine if a request is valid or not (and in the case it's invalid, an mpa navigation will occur)

Fixes: https://github.com/vercel/next.js/issues/54934"
85047358089177b7099d49a1345633a066e9df41,Lee Robinson,2023-09-11 16:29:54+00:00,GitHub,2023-09-11 16:29:54+00:00,"[examples] Update Astro starter (#10397)

Deployed https://astro.vercel.app/image."
9d64312aaaa875a4e193b7602c50e5dc68979aad,Kiko Beats,2023-09-10 13:14:43+00:00,GitHub,2023-09-10 13:14:43+00:00,[node] upgrade edge-runtime (#10451)
a8ad176262ef822860ce338927e6f959961d2d32,Chris Barber,2023-09-09 01:48:54+00:00,GitHub,2023-09-09 01:48:54+00:00,[redwood] Use new esbuild script (#10471)
0ee089a501ebb78901c4afe1658e794917998f8f,Nathan Rajlich,2023-09-09 00:35:56+00:00,GitHub,2023-09-09 00:35:56+00:00,"[remix] Bundle, remove types and source maps (#10479)

For consistency with other Builders."
d8bc570f604950d97156d4f33c8accecf3b3b28f,Zack Tanner,2023-09-08 23:33:59+00:00,GitHub,2023-09-08 23:33:59+00:00,"[build-utils] add `experimentalBypassFor` field to Prerender (#10481)

This adds an experimental flag to `Prerender` outputs as a way to programmatically bypass the cache and hit the lambda directly, using a similar interface to `has`. 

(Note: I copied over `HasField` from `@vercel/router-utils` since it wasn't available for import in `build-utils`, but can add it as a dep if that's preferred)

The specific use-case being targeted here relates to https://github.com/vercel/next.js/pull/51534 -- a Next.js page marked static should still be able to initiate server actions."
f15cba6148a0cdb6975db7724775c35ab7d929b2,Nathan Rajlich,2023-09-08 22:55:03+00:00,GitHub,2023-09-08 22:55:03+00:00,"[hydrogen] Bundle, remove types and source maps (#10480)

Similar to #10479, but for `@vercel/hydrogen`."
989f0d813910d8d67ed355de93018f1dcd91b6ba,Chris Barber,2023-09-08 22:27:17+00:00,GitHub,2023-09-08 22:27:17+00:00,[ruby] Use new esbuild script (#10472)
6784e77516ba180a691e3c48323b32bb4506d7b6,Chris Barber,2023-09-08 22:00:40+00:00,GitHub,2023-09-08 22:00:40+00:00,"[go] Update to esbuild script (#10468)

Co-authored-by: Nathan Rajlich <n@n8.io>"
6baefc825ad7cfc3a5edce31cb4244721452f753,Chris Barber,2023-09-08 21:23:23+00:00,GitHub,2023-09-08 21:23:23+00:00,"[python] Update to esbuild script (#10470)

Co-authored-by: Steven <steven@ceriously.com>"
0a08e4b23ec25d838f93d28c942a2a412511a0af,Chris Barber,2023-09-08 20:39:13+00:00,GitHub,2023-09-08 20:39:13+00:00,[cli] Update @vercel/fun@1.1.0 (#10477)
b265e13d40d541b77148fa79ac60b4c4dd10974c,Nathan Rajlich,2023-09-08 19:39:12+00:00,GitHub,2023-09-08 19:39:12+00:00,"[static-build] Use esbuild (#10462)

Switch to using esbuild to compile + bundle `@vercel/static-build`."
50e04dd8584664c842a86c15d92d654f4ea8dcbb,Nabeel Sulieman,2023-09-08 18:42:06+00:00,GitHub,2023-09-08 18:42:06+00:00,"Add optional experimentalStreamingLambda field for prerender (#10476)

This adds a new `experimentalStreamingLambda` field to Prerender
outputs, allowing references to an optional streaming lambda path."
82231058da85a9bab65940180718e0538da0d35b,Vercel Release Bot,2023-09-08 16:41:32+00:00,GitHub,2023-09-08 16:41:32+00:00,"Version Packages (#10400)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
61227bf7e32409493887738572008c5f23e416b1,Steven,2023-09-08 02:09:11+00:00,GitHub,2023-09-08 02:09:11+00:00,"fix .changeset/nice-lies-sip.md (#10474)

I think we need to remove `api` since its private so its not published to npm and therefore isn't versioned."
6aa0aa4e65b81903f4fce677a198dcfaebee744b,Zack Tanner,2023-09-08 00:17:08+00:00,GitHub,2023-09-08 00:17:08+00:00,"[next] fix ENOENT on /404.html when `fallback: false` w/ `basePath` (#10473)

The following error occurs during build when `basePath` is present in conjunction with `fallback: false` in `getStaticPaths`:

> Error: ENOENT: no such file or directory, open '/vercel/path0/.next/server/pages/404.html'

`localePrefixed404` was incorrectly being set to `false` because it was looking for `/<basePath>/<locale>/404.html` (when it's actually `/<locale>/404.html`)

This meant that inside `onPrerenderRoute`, `htmlFsRef` was pointing to `/404.html` rather than `/en/404.html`."
caaba0d6855eff4350b6a04acc3ea502025bff8f,JJ Kasper,2023-09-07 22:03:12+00:00,GitHub,2023-09-07 22:03:12+00:00,"[next] fix app dir edge functions with basePath (#10465)

x-ref: https://github.com/vercel/vercel/pull/10394"
335fd70a68e7d1207056858ec516a7d8ee411ce1,Steven,2023-09-07 14:20:20+00:00,GitHub,2023-09-07 14:20:20+00:00,"[ci] Update codeowners (#10467)

Update codeowners for Next.js"
c3c54d6e695ec078777c4b1f4f23acbeee3c3b09,Zack Tanner,2023-09-07 14:03:14+00:00,GitHub,2023-09-07 14:03:14+00:00,"[next]: Fix RSC rewrite behavior (#10415)

- Removes some of the hacks from #10388 that were attempting to resolve an issue with RSC prefetches to `pages` routes in favor of adding rsc rewrites for all dynamic paths, and letting it fall through to a 404 if there's no match
- Fixes an issue where RSC requests were matching the wrong path (filesystem rather than RSC variant) introduced in above mentioned change
  - Closes https://github.com/vercel/next.js/issues/54698"
43048a0dd87626438d0ff463ed81362c48d3ec3d,Shu Uesugi,2023-09-07 13:12:54+00:00,GitHub,2023-09-07 13:12:54+00:00,"[CLI] Fix team URL on `vercel help switch`  (#10466)

In `vercel help switch`, it suggests that team URL is of the format `vercel.com/teams/name`, but this will be 404. It should be `vercel.com/name`."
60c75fd76cf45a53b8143c560e295a2aed62b450,Sean Massa,2023-09-06 23:46:44+00:00,GitHub,2023-09-06 23:46:44+00:00,"[CLI] show instant preview url on `vc deploy` and `vc redeploy` (#10458)

Show Instant Preview URLs immediately during `vc deploy`.

This does mean that we'll no longer show the nicer aliased URLs, but that's probably fine.

https://github.com/vercel/vercel/assets/41545/5d6d5695-60c3-49ca-a54d-a16828583070

---

- [Card](https://linear.app/vercel/issue/VCCLI-897/show-instant-preview-url-on-vc-deploy)"
bd1319d7a32e809489c7fdfe41c92308795ed0cc,Trek Glowacki,2023-09-06 20:58:57+00:00,GitHub,2023-09-06 20:58:57+00:00,"[cli] Update secrets.js to more current styles (#10461)

Updates the `secrets` command to be a bit more modern. Initially I was going to covert this to typescript but that change was quite large, so going stepwise for easier review.

1. Moves the command implementation into a directory like other commands
2. Shifts the command data structure into its own file
3. Adds a test.

Other relevant comments inline."
1138f7e3d16719b154cff73bc31b05c40c1e5710,Nathan Rajlich,2023-09-06 19:49:50+00:00,GitHub,2023-09-06 19:49:50+00:00,"Use `esbuild` for non-ncc'd packages (#10430)

The intention is for this to be a drop-in replacement for compiling TypeScript to JavaScript, but using `esbuild` instead of `tsc`. `tsc` is still needed, but only for the cases where we want to generate type definitions."
bb95cb9225df0a361a8f953333794ed30f84f2bf,Ethan Arrowood,2023-09-06 16:15:35+00:00,GitHub,2023-09-06 16:15:35+00:00,"[cli] migrate teams command (#10434)

Before:
<img width=""661"" alt=""Screenshot 2023-08-31 at 13 59 35"" src=""https://github.com/vercel/vercel/assets/16144158/7d16367a-662e-4ef1-8561-c197f4badf48"">

After:
<img width=""1036"" alt=""Screenshot 2023-08-31 at 14 00 23"" src=""https://github.com/vercel/vercel/assets/16144158/64431bdb-48ce-4bc1-8ed0-c719bdfbb350"">"
0048eb999e2b205ce4bc62ca5ea7451352a1340f,Trek Glowacki,2023-09-06 15:42:37+00:00,GitHub,2023-09-06 15:42:37+00:00,"[cli] N, not n. (#10460)

Followup to https://github.com/vercel/vercel/pull/10432#discussion_r1315482954"
1b4de4a986f7a612aac834ebae3ec7bb9e9b8cf8,Espen Hovlandsdal,2023-09-06 13:37:37+00:00,GitHub,2023-09-06 13:37:37+00:00,"chore(deps): upgrade semver dependency (#10411)

Addresses ReDoS vulnerability: https://security.snyk.io/vuln/SNYK-JS-SEMVER-3247795
Uses the latest unaffected versions in the respective major versions, to prevent having to deal with any other breaking changes."
c9ad4084ee5e6eb51a41c17d5c69c92e60ebddac,JJ Kasper,2023-09-06 00:46:37+00:00,GitHub,2023-09-06 00:46:37+00:00,"[next] Update page config test (#10456)

Updates failing test in https://github.com/vercel/vercel/actions/runs/6090040294/job/16525842631?pr=10430 per changes in https://github.com/vercel/next.js/pull/54786"
98ee6e47281fe9eee6f9fab0532578f981d9c907,Trek Glowacki,2023-09-05 21:11:03+00:00,GitHub,2023-09-05 21:11:03+00:00,"[cli] Migrate `domains` to new command structure (#10427)

After:
<img width=""790"" alt=""CleanShot 2023-08-31 at 11 39 25@2x"" src=""https://github.com/vercel/vercel/assets/9736/b2e0e090-8c7c-4659-b1aa-1c59744d2eb1"">

Before:
<img width=""813"" alt=""CleanShot 2023-08-31 at 11 40 06@2x"" src=""https://github.com/vercel/vercel/assets/9736/731626a0-86f0-446d-8f77-436205acac87"">"
d7db0c57940febbd48a0d44d4cf2a79c7bc1caef,Vercel Release Bot,2023-09-05 20:28:17+00:00,GitHub,2023-09-05 20:28:17+00:00,"[tests] Upgrade Turbo to version 1.10.13 (#10404)

This auto-generated PR updates Turbo to version 1.10.13"
e90e922ee8a23c072642e3dd1ceb5001fea21a88,Sean Massa,2023-09-05 19:51:44+00:00,GitHub,2023-09-05 19:51:44+00:00,"migrate dev command structure for help output (#10433)

Migrates the `vc git` command to the command data structure for use in the help output.

---

<img width=""1891"" alt=""Screenshot 2023-08-31 at 1 35 07 PM"" src=""https://github.com/vercel/vercel/assets/41545/d3d63faa-9427-49e8-8137-a76d4c208cb3"">"
adb9ac87ce3e8f1660e6ac624bbbe6be91dfed8f,Trek Glowacki,2023-09-05 16:17:18+00:00,GitHub,2023-09-05 16:17:18+00:00,"[cli] Remove `mri` workaround (#10452)

As of https://github.com/vercel/vercel/pull/10389 the `mri` package is no longer used and this workaround can be removed."
e43191b1866da70a3dab3815a3f2176942240ef3,Steven,2023-09-01 14:39:52+00:00,GitHub,2023-09-01 14:39:52+00:00,"[next] fix 404 enoent for i18n (#10416)

This PR fixes the following error:

```
Error: ENOENT: no such file or directory, open '/vercel/path0/.next/server/pages/en/404.html'
```


https://github.com/vercel/vercel/actions/runs/6030773334/job/16364078054?pr=10415#step:9:1352"
a962e84409c9878efab11a1702fae6942da19ee7,Dan Stowell,2023-08-31 23:10:28+00:00,GitHub,2023-08-31 23:10:28+00:00,"migrate `env` to command structure (#10429)

Migrates the `vc env` command to the command data structure for use in the help output."
7593e219fd13972f0b94a1e6d9e3bb57382abee6,Trek Glowacki,2023-08-31 22:45:44+00:00,GitHub,2023-08-31 22:45:44+00:00,"[cli] Update `project` command to new structure (#10432)

Before:
<img width=""687"" alt=""CleanShot 2023-08-31 at 13 29 29@2x"" src=""https://github.com/vercel/vercel/assets/9736/87e0f445-701a-4851-b73f-c787db01abe3"">

After:
<img width=""868"" alt=""CleanShot 2023-08-31 at 13 31 50@2x"" src=""https://github.com/vercel/vercel/assets/9736/b6820654-3254-4a65-820a-30ff7b577a44"">"
ec9506668992c7db084c043f4928b4cfb37d30de,Dan Stowell,2023-08-31 22:17:51+00:00,GitHub,2023-08-31 22:17:51+00:00,migrate `vc secrets` to help command structure (#10435)
42a71416b963c15ba50608aa0be4c30b55503dc8,Sean Massa,2023-08-31 21:48:09+00:00,GitHub,2023-08-31 21:48:09+00:00,"migrate `init` command structure for help output (#10428)

Migrates the `vc init` command to the command data structure for use in the help output.

---

<img width=""1891"" alt=""Screenshot 2023-08-31 at 11 36 37 AM"" src=""https://github.com/vercel/vercel/assets/41545/1caeb203-470f-49a5-86b2-273b04bc0489"">"
80af30ce60dfa6819425241fa8df807df3b07802,Sean Massa,2023-08-31 21:02:49+00:00,GitHub,2023-08-31 21:02:49+00:00,migrate `git` command structure for help output (#10431)
74a15b5f324be3a242c7fd2b715ebf9753d5f051,Sean Massa,2023-08-31 19:09:59+00:00,GitHub,2023-08-31 19:09:59+00:00,"migrate `rollback` command structure for help output (#10426)

Migrates the `vc rollback` command to the command data structure for use in the help output.

---

<img width=""1891"" alt=""Screenshot 2023-08-31 at 11 25 49 AM"" src=""https://github.com/vercel/vercel/assets/41545/a6d802ac-3851-4641-b950-764fc65fa9d2"">"
c0416f7e95c2008011ec826488f4c9a143722faa,Sean Massa,2023-08-31 18:41:55+00:00,GitHub,2023-08-31 18:41:55+00:00,"migrate `promote` command structure for help output (#10425)

Migrates the `vc promote` command to the command data structure for use in the help output.

---

<img width=""1878"" alt=""Screenshot 2023-08-31 at 11 04 32 AM"" src=""https://github.com/vercel/vercel/assets/41545/b79c6aec-af03-4685-8ee4-9c0d89b2f236"">"
fc1e13c09928c654410b373fc1775c2b63c6ef4a,Kiko Beats,2023-08-31 14:34:27+00:00,GitHub,2023-08-31 14:34:27+00:00,fix: remove console.log (#10417)
0e9ec194a3346c843ba3d00d57dd5132dec2af42,Nathan Rajlich,2023-08-29 05:50:30+00:00,GitHub,2023-08-29 05:50:30+00:00,Keep `vercel@canary` up to date with `vercel@latest` (#10410)
5609a1187be9d6cf8d5f16825690c5ea72f17dc5,Sean Massa,2023-08-27 00:49:47+00:00,GitHub,2023-08-27 00:49:47+00:00,[build-utils] add descriptions to NodeVersion properties (#10403)
cff72e3129f369c62d1d39417445c2f6263a0e89,Sean Massa,2023-08-25 15:01:55+00:00,GitHub,2023-08-25 15:01:55+00:00,"[examples] fix redwood template and update examples to use at least node@16 (#10395)

The redwood template was broken because it would use node@18, which is not supported for the version of redwood used in the template. This PR updates that version to be node@16, which does work.

While we're at it, I also updated other examples to be at least node@16. I tested deployments of each of these and the all work."
d3c84e5d2ab5addf057876ffaca12b389439d450,Vercel Release Bot,2023-08-24 21:04:39+00:00,GitHub,2023-08-24 21:04:39+00:00,"Version Packages (#10398)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
9e3827c785e1bc45f2bed421132167381481770f,Andrew Barba,2023-08-24 20:44:30+00:00,GitHub,2023-08-24 20:44:30+00:00,"[build-utils] Support serverless function architecture (#10392)

# Problem

Framework authors often produce build outputs from platforms like Github
Actions or M1 Macs where the arm64 architecture is being used. They then
deploy these outputs to Vercel using `vercel deploy`, bypassing Vercel's
build system. Today they must cross compile to x86_64 in order to deploy
compatible Serverless functions to Vercel.

# Solution

Allow Framework authors to detect the current architecture and specify
either x86_64 or arm64 when deploying a Serverless function to Vercel.

# Related PRs

https://github.com/vercel/api/pull/21559

https://github.com/vercel/proxy/pull/6901

https://github.com/vercel/front/pull/24924"
fb6d77afac7c951a22c834f14d4b2149d712bff0,Trek Glowacki,2023-08-24 20:09:13+00:00,GitHub,2023-08-24 20:09:13+00:00,[cli] Improve error messages for JSON parse issues (#10396)
cfc1bb180b80931417765e87426704c46bb1ef53,Vercel Release Bot,2023-08-24 18:56:29+00:00,GitHub,2023-08-24 18:56:29+00:00,"Version Packages (#10384)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
f06776468f2b680e146364071cd219080356d1f0,Trek Glowacki,2023-08-24 18:05:11+00:00,GitHub,2023-08-24 18:05:11+00:00,"[cli] Remove mri package (#10389)

`vc secrets` appears to be mostly deprecated but this was a fairly straightforward change that lets us drop `mri` today. Tested pretty extensively locally."
597a8a81764c39e70c65b98e78bf4c3827a779a7,Kiko Beats,2023-08-24 14:52:49+00:00,GitHub,2023-08-24 14:52:49+00:00,upgrade edge-runtime (#10385)
3f6d99470db86681e006d66507f32afcea086b41,Kiko Beats,2023-08-24 08:06:33+00:00,GitHub,2023-08-24 08:06:33+00:00,[node] use `undici` instead of `node-fetch` (#10387)
44223268651f1bbd5c6f2b0b315239685dd5716e,JJ Kasper,2023-08-24 05:26:58+00:00,GitHub,2023-08-24 05:26:58+00:00,"Add handling to leverage RSC prefetch outputs (#10390)

Implements handling for the RSC prefetch outputs when available that
were added in https://github.com/vercel/next.js/pull/54403"
09446a8fe8b8201dbe3ead3ca645ef0aa1833b6b,Zack Tanner,2023-08-23 22:30:33+00:00,GitHub,2023-08-23 22:30:33+00:00,"[next] fix RSC matching behavior & 404 status code on `fallback: false` (#10388)

Fixes two separate issues for the Next builder:

- `pages` routes unexpectedly matching to RSC routes when prefetching from `app`. This update will attempt to match the route with the corresponding `pages` entry rather than falling back to a catch-all RSC
  - Fixes https://github.com/vercel/next.js/issues/53776
- `fallback: false` returning a successful status code when underlying page as a param (e.g. `/blog/[slug]` would 200 but `/blog/non-existent` would 404)
  - [slack x-ref](https://vercel.slack.com/archives/C03S8ED1DKM/p1692817762403579)"
37e93a91a8659934eac7f5cd441b310511bf5646,Vercel Release Bot,2023-08-22 20:49:48+00:00,GitHub,2023-08-22 20:49:48+00:00,"[remix] Update `@remix-run/dev` to v1.19.3 (#10381)

This auto-generated PR updates `@remix-run/dev` to version 1.19.3."
eec6e4723235c9166785ad2a8e596515375964d5,Trek Glowacki,2023-08-22 20:24:19+00:00,GitHub,2023-08-22 20:24:19+00:00,"[cli] Update `dns` commands to new structure (#10379)

Before:
<img width=""795"" alt=""CleanShot 2023-08-22 at 10 46 34@2x"" src=""https://github.com/vercel/vercel/assets/9736/456faef8-6335-46ac-89ae-5ce13db4568e"">


After:
<img width=""815"" alt=""CleanShot 2023-08-22 at 10 48 04@2x"" src=""https://github.com/vercel/vercel/assets/9736/e78a9cc5-d9e9-4079-bd4a-81cd68917127"">"
3a0cfce669d63e79ac3e4f3eb690eb0a5c89866b,Vercel Release Bot,2023-08-22 19:43:00+00:00,GitHub,2023-08-22 19:43:00+00:00,"Version Packages (#10375)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ae4a9535c12ce33c11cc18743ec1d17e29a7d92c,Maz,2023-08-22 19:27:29+00:00,GitHub,2023-08-22 19:27:29+00:00,"[cli] Add `--git-branch` to pull command help output (#10382)

Improves the help for pull command by adding --git-branch to the output."
c615423a0b60ed64bf5e0e10bbc4ca997c31bd60,Sean Massa,2023-08-22 17:31:19+00:00,GitHub,2023-08-22 17:31:19+00:00,"[frameworks] move some `devDependencies` to `dependencies` (#10380)

Because `frameworks` isn't bundled with `ncc`, we need the runtime dependencies to exist in the `dependencies` section of `package.json`."
96f99c714715651b85eb7a03f58ecc9e1316d156,Steven,2023-08-22 17:04:57+00:00,GitHub,2023-08-22 17:04:57+00:00,"[error-utils] fix `files` in package.json to use `dist` (#10378)

These packages were publishing unnecessary files to npm so we can reduce to only the `dist` directory.

- Example: https://unpkg.com/browse/@vercel/error-utils@2.0.0/
- Docs: https://docs.npmjs.com/cli/v9/configuring-npm/package-json#files"
8f318d44cb517abaf6f906450829e58a88e36f74,Trek Glowacki,2023-08-22 15:33:36+00:00,GitHub,2023-08-22 15:33:36+00:00,"Migrate `certs` to new command structure (#10377)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
ade5e4ea0a59f6f4e54c8b577245eae9390c8dc7,Vercel Release Bot,2023-08-21 23:55:07+00:00,GitHub,2023-08-21 23:55:07+00:00,"[examples][tests] Upgrade Next.js to version 13.4.19 (#10373)

This auto-generated PR updates 3 packages to Next.js version 13.4.19"
87dee36ef9f6405fcb76f555961ddf4fe07ee27e,Trek Glowacki,2023-08-21 21:31:02+00:00,GitHub,2023-08-21 21:31:02+00:00,"[cli] Update new `--help` structure to support subcommands (#10372)

Before:
<img width=""727"" alt=""CleanShot 2023-08-21 at 11 07 25@2x"" src=""https://github.com/vercel/vercel/assets/9736/1ff4b5b8-75e3-4fcb-b44a-7172e7612ecc"">

After:
<img width=""759"" alt=""CleanShot 2023-08-21 at 11 13 21@2x"" src=""https://github.com/vercel/vercel/assets/9736/acdd954a-6137-4535-8fbb-db025491156b"">

Some notes re: ""Before""

* We've dropped wrapping required args in `<>` some time ago.
* The command name for alias is optional (default is `set`) but was incorrectly still listed as required."
c97407da49ab8997badfd9e6805d5db7ce671d70,Vercel Release Bot,2023-08-21 20:10:45+00:00,GitHub,2023-08-21 20:10:45+00:00,"Version Packages (#10361)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
37f5c6270058336072ca733673ea72dd6c56bd6a,Steven,2023-08-21 12:51:38+00:00,GitHub,2023-08-21 12:51:38+00:00,"BREAKING CHANGE: Drop Node.js 14, bump minimum to Node.js 16 (#10369)

https://vercel.com/changelog/node-js-14-and-16-are-being-deprecated


https://github.com/nodejs/Release/blob/main/README.md#end-of-life-releases"
104ab0332dd91d97d0ecd93b6f527b56548207f7,Trek Glowacki,2023-08-18 20:01:45+00:00,GitHub,2023-08-18 20:01:45+00:00,"[cli] Wrap description in help output (#10370)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
8ed71bea65dc43159a044f9bc34d28ffd1fb2066,Vercel Release Bot,2023-08-18 17:36:13+00:00,GitHub,2023-08-18 17:36:13+00:00,"[examples][tests] Upgrade Next.js to version 13.4.18 (#10366)

This auto-generated PR updates 3 packages to Next.js version 13.4.18"
bc7a5d38be1016e265fd19f3cf146aa5609fc4ec,Chris Barber,2023-08-18 17:10:40+00:00,GitHub,2023-08-18 17:10:40+00:00,"Exclude Gatsby from default 404 error route (#10365)

All static builds (except Next.js) have a default 404 error route. This PR add the exclusion of Gatsby from being assigned a 404 error route. The error routes are now introduced by the `gatsby-plugin-vercel-builder`.

Linear: https://linear.app/vercel/issue/VCCLI-749/fix-gatsby-404500-pages-directory-listing-bug"
09174df6cfbe697ea13e75468b9cd3c6ec7ad01c,Nathan Rajlich,2023-08-17 19:17:28+00:00,GitHub,2023-08-17 19:17:28+00:00,"[remix] Only add workspace check flag for Yarn v1 (#10364)

Yarn v2/v3 do not require this flag."
6aa2dc6f510082e0bbb450660faf27f1e6375c35,Trek Glowacki,2023-08-17 15:31:16+00:00,GitHub,2023-08-17 15:31:16+00:00,"Connecting Datadog / GH Actions / Turbo / Jest to detect flakey tests (#10334)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>
Co-authored-by: Steven <steven@ceriously.com>"
9db3794735481881289c560baef9702c1710c70c,Vercel Release Bot,2023-08-17 14:09:28+00:00,GitHub,2023-08-17 14:09:28+00:00,"[examples][tests] Upgrade Next.js to version 13.4.17 (#10362)

This auto-generated PR updates 3 packages to Next.js version 13.4.17"
ed806d8a6b560b173ba80b24cbfafaa6f179d8b1,Nathan Rajlich,2023-08-17 07:30:32+00:00,GitHub,2023-08-17 07:30:32+00:00,"[frameworks][fs-detectors] Add ""supersedes"" prop to Framework interface (#10345)

The `supersedes` property on the `Framework` interface may be specified by a framework in which the superseded framework should _not_ be included in the resulting framework matches during detection.

For example, a Hydrogen v2 project matches both the ""remix"" and ""hydrogen"" framework detectors, but we really only want ""remix"" to be selected."
de9a1dbab7d9e0729ff2e9a5b5ba4ec051750540,Vercel Release Bot,2023-08-17 03:34:05+00:00,GitHub,2023-08-17 03:34:05+00:00,"Version Packages (#10359)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.4.0

### Minor Changes

- Force-publish ([#10358](https://github.com/vercel/vercel/pull/10358))

### Patch Changes

- Updated dependencies
\[[`6e44757ff`](https://github.com/vercel/vercel/commit/6e44757ff5d7d80ba6db2ab5ea65213392ecf1cd)]:
    -   @vercel/static-build@1.4.0

## @vercel/static-build@1.4.0

### Minor Changes

- Force-publish ([#10358](https://github.com/vercel/vercel/pull/10358))"
ae9b33b801c259600e5536c652a824af2dc3e600,Nathan Rajlich,2023-08-17 03:12:12+00:00,Nathan Rajlich,2023-08-17 03:12:12+00:00,Force-publish on `@vercel/static-build`
6e44757ff5d7d80ba6db2ab5ea65213392ecf1cd,Chris Barber,2023-08-16 23:19:43+00:00,GitHub,2023-08-16 23:19:43+00:00,"v31.4.0 (#10358)

https://github.com/vercel/vercel/pull/10356 didn't publish a new CLI release, so this PR should do the trick."
8dcefe5e83d2db1f828d7a559ccdd26e05209899,Vercel Release Bot,2023-08-16 23:02:42+00:00,GitHub,2023-08-16 23:02:42+00:00,"Version Packages (#10356)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
65ab3b23e9db008ecc13b425a7adcf5a6c1ef568,Riz,2023-08-16 21:29:09+00:00,GitHub,2023-08-16 21:29:09+00:00,"[frameworks] Amend Hugo default `buildCommand` to exclude drafts enabled flag (#7326)

### Related Issues

Reported in https://github.com/vercel/community/discussions/194

Having the `-D` flag results in all draft content to be published (docs reference [here](https://gohugo.io/getting-started/usage/)).

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
8f152a59398196bf2e70f9ad01047cb92fb95143,Nathan Rajlich,2023-08-16 20:59:14+00:00,GitHub,2023-08-16 20:59:14+00:00,[build-utils] Fix Node 14.x tests (#10355)
10a6aa55f928023dfa5be3ed12bf0e2b9bf728b5,Nathan Rajlich,2023-08-15 21:59:21+00:00,GitHub,2023-08-15 21:59:21+00:00,"[tests] Fix failures due to Node 14.x being discontinued (#10346)

This PR upgrades test fixtures from Node.js 14 to 16 and also removes
the `35-puppeteer` test fixture since it doesn't support Node.js 16
unfortunately.

- See https://github.com/alixaxel/chrome-aws-lambda/pull/274

---------

Co-authored-by: Steven <steven@ceriously.com>"
936a4284206ca682ef7155c0c9492afd13d43bab,Vercel Release Bot,2023-08-15 15:21:06+00:00,GitHub,2023-08-15 15:21:06+00:00,"[examples][tests] Upgrade Next.js to version 13.4.16 (#10344)

This auto-generated PR updates 3 packages to Next.js version 13.4.16

Closes #10339"
a93e1a7a6438b7edd032cff0d695cffc577f167b,Steven,2023-08-15 15:05:31+00:00,GitHub,2023-08-15 15:05:31+00:00,"[examples] update ember example (#10347)

This PR updates the ember example using the following:

```
npx ember new ember-quickstart --lang en
```

I also had to add `{ 'ember-welcome-page': { enabled: true } }` to the
build config because the `<WelcomePage>` only works in dev, but throws
when using the default build command:

```
ember build --environment=production
```

For posterity, the error looks like:
```
Uncaught TypeError: Cannot destructure property 'manager' of 'e' as it is null.
    at u.resolvedComponent (vendor-2e12520b7a71eead28708a24fafa7fbc.js:2094:28)
    at vendor-2e12520b7a71eead28708a24fafa7fbc.js:1999:5
    at ne (vendor-2e12520b7a71eead28708a24fafa7fbc.js:1999:30)
    at l (vendor-2e12520b7a71eead28708a24fafa7fbc.js:1991:18)
    at vendor-2e12520b7a71eead28708a24fafa7fbc.js:1981:836
    at _.compile (vendor-2e12520b7a71eead28708a24fafa7fbc.js:1938:173)
    at re (vendor-2e12520b7a71eead28708a24fafa7fbc.js:1991:61)
    at vendor-2e12520b7a71eead28708a24fafa7fbc.js:1988:30
    at ee.compile (vendor-2e12520b7a71eead28708a24fafa7fbc.js:1989:23)
    at Object.evaluate (vendor-2e12520b7a71eead28708a24fafa7fbc.js:2431:224)
```

- Related https://github.com/emberjs/ember.js/issues/19912
- Related https://github.com/ember-cli/ember-welcome-page/issues/385"
4ba188ce44f363d3b34fb7e9bdaf5f220686dabf,Trek Glowacki,2023-08-15 07:33:24+00:00,GitHub,2023-08-15 07:33:24+00:00,"[cli] fix tyops (#10338)

Followup to #10333"
7682c9234c52b509ec4bdf1915195f5dce77271c,Vercel Release Bot,2023-08-15 01:13:53+00:00,GitHub,2023-08-15 01:13:53+00:00,"Version Packages (#10343)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.3.1

### Patch Changes

- Updated dependencies
\[[`844fb6e88`](https://github.com/vercel/vercel/commit/844fb6e880a980f26945f15a7437b4d67bcb5394)]:
    -   @vercel/remix-builder@1.10.1

## @vercel/remix-builder@1.10.1

### Patch Changes

- Set default env vars for Hydrogen v2 deployments
([#10341](https://github.com/vercel/vercel/pull/10341))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
844fb6e880a980f26945f15a7437b4d67bcb5394,Nathan Rajlich,2023-08-15 01:11:01+00:00,GitHub,2023-08-15 01:11:01+00:00,"[remix] Set default env vars for Hydrogen v2 deployments (#10341)

In order to make the default mock shop created from `npm create @shopify/hydrogen@latest` work out-of-the-box and without additional configuration, set the necessary default environment variables to make the server not render an error."
ae20c7230f40a07b2db8a4e16c15dc9e79f7054e,Nathan Rajlich,2023-08-15 00:50:52+00:00,GitHub,2023-08-15 00:50:52+00:00,"[cli] Use `vercel-php@0.6.0` in e2e test fixture (#10342)

`0.5.2` uses Node 14, so this test was failing.

<img width=""934"" alt=""Screenshot 2023-08-14 at 5 13 31 PM""
src=""https://github.com/vercel/vercel/assets/71256/654c8f71-6006-4b98-9ef0-fe288651d158"">"
a36b8eb738570a90e385424d851b40efdccd2ac3,Nathan Rajlich,2023-08-14 23:05:12+00:00,GitHub,2023-08-14 23:05:12+00:00,"[examples] Update ""hydrogen-2"" template readme (#10340)

A few tweaks to the readme file for `hydrogen-2`, based on feedback from
Shopify."
78be5aedd51e82e21edf1e7c3d193163c1eb6546,Vercel Release Bot,2023-08-14 19:00:01+00:00,GitHub,2023-08-14 19:00:01+00:00,"Version Packages (#10318)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.3.0

### Minor Changes

- Update help output to use cli-table3
([#10333](https://github.com/vercel/vercel/pull/10333))

### Patch Changes

- Sanitize argv in log during `vc build`.
([#10311](https://github.com/vercel/vercel/pull/10311))

- Respect `--yes` flag for all prompts during `vc link --repo`
([#10337](https://github.com/vercel/vercel/pull/10337))

- Updated dependencies
\[[`8cb9385fd`](https://github.com/vercel/vercel/commit/8cb9385fd306d0c2b8771d7bb063e6948ed15729),
[`94c93dfb5`](https://github.com/vercel/vercel/commit/94c93dfb5b29aa58317f9d0854273d4880d91a62)]:
    -   @vercel/node@2.15.10
    -   @vercel/static-build@1.3.46

## @vercel/frameworks@1.5.1

### Patch Changes

- Add ""(v1)"" suffix to ""hydrogen"" preset
([#10320](https://github.com/vercel/vercel/pull/10320))

- Use parenthesis on Docusaurus ""name"" fields
([#10324](https://github.com/vercel/vercel/pull/10324))

## @vercel/fs-detectors@4.1.2

### Patch Changes

- Updated dependencies
\[[`33d9c1b7f`](https://github.com/vercel/vercel/commit/33d9c1b7f901b0ef6a28398942b6d447cfea882f),
[`f54598724`](https://github.com/vercel/vercel/commit/f54598724c3cb7fc0761cf452f34d527fd5be16f)]:
    -   @vercel/frameworks@1.5.1

## @vercel/gatsby-plugin-vercel-builder@1.3.18

### Patch Changes

- Updated dependencies
\[[`8cb9385fd`](https://github.com/vercel/vercel/commit/8cb9385fd306d0c2b8771d7bb063e6948ed15729),
[`94c93dfb5`](https://github.com/vercel/vercel/commit/94c93dfb5b29aa58317f9d0854273d4880d91a62)]:
    -   @vercel/node@2.15.10

## @vercel/node@2.15.10

### Patch Changes

- Update 'edge-runtime' to 2.4.4
([#10255](https://github.com/vercel/vercel/pull/10255))

- `edge-light` condition interoperability with `vercel dev`
([#10313](https://github.com/vercel/vercel/pull/10313))

## @vercel/static-build@1.3.46

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.18

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
a1c3bfb50f27aba17b55cdedda23316d594fd018,Nathan Rajlich,2023-08-14 18:26:45+00:00,GitHub,2023-08-14 18:26:45+00:00,"[cli] Respect `--yes` flag for all prompts during `vc link --repo` (#10337)

A couple of the prompts during `vc link --repo` were not honoring the `--yes` flag."
78fa02292d33ac1e31876259db926f5dc669b3c5,Trek Glowacki,2023-08-14 15:12:43+00:00,GitHub,2023-08-14 15:12:43+00:00,"[cli] Swap custom table code with `cli-table3` (#10333)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
94c93dfb5b29aa58317f9d0854273d4880d91a62,Vladislav Ponomarev,2023-08-11 18:08:34+00:00,GitHub,2023-08-11 18:08:34+00:00,"`edge-light` condition interoperability with `vercel dev` (#10313)

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
19addabb6ed68d49dfa924c42c6db55251c5184f,Trek Glowacki,2023-08-11 16:18:13+00:00,GitHub,2023-08-11 16:18:13+00:00,"[cli] Add tests to demonstrate function detection precedence (#10331)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
45fc0dd714ab8c7b67bdb6cc1502671470a44006,Lee Robinson,2023-08-11 00:09:02+00:00,GitHub,2023-08-11 00:09:02+00:00,"[examples] Update Storybook template (#10063)

To use stable App Router.

New deployment: https://storybook-template.vercel.app/"
fc524a1e6a18425ca5de4972ada3ea93dbc97565,Nathan Rajlich,2023-08-10 23:49:05+00:00,GitHub,2023-08-10 23:49:05+00:00,Fixes for changeset from #10255 (#10328)
8cb9385fd306d0c2b8771d7bb063e6948ed15729,Hassan Bazzi,2023-08-10 23:39:35+00:00,GitHub,2023-08-10 23:39:35+00:00,"[node] bump edge-runtime to 2.4.4 (#10255)

# Summary

Edge-runtime 2.4.4 has many bug fixes, but most importantly it adds support for stream cancellation to the edge runtime. This is extremely important since a lot of projects are using `streams` related to `ai`. They currently have no way of handling a cancellation coming from the client.

This was introduced to `next` with as described by this comment: https://github.com/vercel-labs/ai/issues/90#issuecomment-1618915409

You can find the PR for that here: https://github.com/vercel/next.js/pull/51727

It also has a good description for what we're trying to do here, but for people not using `next`

# Problem

When a client sends an abort signal, it is currently not being handled by edge functions. This was fixed in edge-runtime@2.4.4

# Solution

Update the package"
f54598724c3cb7fc0761cf452f34d527fd5be16f,Nathan Rajlich,2023-08-10 22:41:00+00:00,GitHub,2023-08-10 22:41:00+00:00,"[frameworks] Use parenthesis on Docusaurus and SvelteKit ""name"" fields (#10324)

For consistency with https://github.com/vercel/vercel/pull/10320."
abd1197c90554e102846929125460c9b5c299062,Nathan Rajlich,2023-08-10 21:25:51+00:00,GitHub,2023-08-10 21:25:51+00:00,"[fs-detectors] Fix ""hydrogen-2"" detection unit test (#10325)

Follow-up to https://github.com/vercel/vercel/pull/10319, which didn't exhibit this failing test since the fs-detectors package was not changed, and thus those tests didn't run."
db27f409b6d6d0ebcf4344d2e25a1636b264faac,Trek Glowacki,2023-08-10 18:04:24+00:00,GitHub,2023-08-10 18:04:24+00:00,"[cli] tidy up use of package name and logo (#10323)

I erred on the side of preferring the more recently added versions of this behavior. I assume at some point in the distant past the removed function correctly toggled between some now/zeit/vercel transitioning."
33d9c1b7f901b0ef6a28398942b6d447cfea882f,Nathan Rajlich,2023-08-10 02:32:57+00:00,GitHub,2023-08-10 02:32:57+00:00,"[frameworks] Add ""(v1)"" suffix to ""hydrogen"" preset (#10320)

Now that the ""remix"" preset should be used for Hydrogen v2, it's not very clear that the ""hydrogen"" preset is only meant to be used for Hydrogen v1.

So add clarification in the ""name"" of the ""hydrogen"" preset to help remedy that."
97659c687b51473694b55ea66308dc4b49ca142a,Nathan Rajlich,2023-08-10 00:11:33+00:00,GitHub,2023-08-10 00:11:33+00:00,"[examples] Add ""hydrogen-2"" template (#10319)

Adds a Hydrogen v2 template which is the output of the `npm create @shopify/hydrogen@latest` command.

Note that a `vercel.json` file is being used to define the environment variables that are required at runtime. This is required for the template to deploy with zero configuration, however the user should update these values (including replacing the session secret) and migrate them to the Project settings in the Vercel dashboard.

[Live example](https://hydrogen-v2-template.vercel.app)"
d6f18f4e2d502bd37871b29067e322911dbe8c4d,Chris Barber,2023-08-09 15:01:18+00:00,GitHub,2023-08-09 15:01:18+00:00,"[cli] Sanitize argv for `vc build` (#10311)

`vc build` writes a file `.vercel/output/build.json` that contains the `argv` contents which could include sensitive information that needs to be sanitized."
f43e413ba5a1d6b81d89221405f203fac0b68aca,Vercel Release Bot,2023-08-08 22:10:58+00:00,GitHub,2023-08-08 22:10:58+00:00,"Version Packages (#10302)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0945d24cbe901ca3f0eedd011251ad499c72d472,Nathan Rajlich,2023-08-08 21:39:57+00:00,GitHub,2023-08-08 21:39:57+00:00,"[remix] Add initial support for Hydrogen v2 (#10305)

Enables support for Hydrogen v2 apps using the ""Remix"" preset. This initial support works with the Hydrogen demo store template unmodified, and all pages will use Edge functions.

Node.js runtime, and also any other configuration via `export const config`, are not supported at this time, due to some pending blockers."
a8ecf40d6f50e2fc8b13b02c8ef50b3dcafad3a6,Steven,2023-08-08 18:43:20+00:00,GitHub,2023-08-08 18:43:20+00:00,"[build-utils] Fix `getPrefixedEnvVars()` to handle `VERCEL_BRANCH_URL` (#10315)

- Fixes [NEXT-1500](https://linear.app/vercel/issue/NEXT-1500)
- See
[documentation](https://vercel.com/docs/concepts/projects/environment-variables/system-environment-variables#framework-environment-variables)"
2995781a583a9c6df15f6447667ff7adaa0d3bfd,Steven,2023-08-07 20:36:40+00:00,Steven,2023-08-07 20:36:40+00:00,"Revert ""Just testing changeset stuff""

This reverts commit e2096c268defa7adddc3595d6d294ff8efdf7ee4."
e2096c268defa7adddc3595d6d294ff8efdf7ee4,Trek Glowacki,2023-08-07 20:33:26+00:00,Trek Glowacki,2023-08-07 20:33:26+00:00,Just testing changeset stuff
663d8e64379de58352da894456f3d6810030c506,Amy,2023-08-07 18:33:41+00:00,GitHub,2023-08-07 18:33:41+00:00,"Update discussion templates (#10297)

The current note on discussion templates is not bold enough and easily overlooked.

In an effort to reduce off-topic discussion clutter in this repo and direct folks to the general support community which I monitor more closely, this update makes the note more prominent."
153ca440fa532458b7dcec70d32a2c2b972e8210,Trek Glowacki,2023-08-07 18:14:21+00:00,GitHub,2023-08-07 18:14:21+00:00,"Add basic tests for remove command (#10304)

Adds some minimal unit testing for the `remove` command. There is currently none."
c5e0cb4812c34db7cba426ad46e8684dd0442cbf,Steven,2023-08-07 16:44:41+00:00,GitHub,2023-08-07 16:44:41+00:00,"chore(ci): fix turbo logs to no longer group (#10310)

When we upgraded `turbo`, the default `--log-order` changed from `stream` to `grouped`.

This PR changes it back to `stream` which will prevent the collapsed group view that we currently see in CI.

https://turbo.build/repo/docs/reference/command-line-reference/run#--log-order

> If log order is set to auto and turbo detects that it is running on GitHub Actions, then turbo will create grouped logs(opens in a new tab). You can opt out of this behavior by setting a log order of your own."
5bf1fe4c743f6be3f7d5a24447ea5b083a68dc67,Seiya Nuta,2023-08-07 16:05:39+00:00,GitHub,2023-08-07 16:05:39+00:00,"[next] Preserve sourceMappingURL comments in template literals (#10275)

We noticed some edge function builds are failing unexpectedly due to `SyntaxError`. It's triggered by valid code in [Webpack's style-loader](https://github.com/webpack-contrib/style-loader/blob/16e401b17a39544d5c8ca47c9032f02e2b60d8f5/src/runtime/styleDomAPI.js#L35C1-L40C1):

```
  if (sourceMap && typeof btoa !== ""undefined"") {
    css += `\n/*# sourceMappingURL=data:application/json;base64,${btoa(
      unescape(encodeURIComponent(JSON.stringify(sourceMap)))
    )} */`;
  }
```

After minification this script looks like:

```
sourceMap&&typeof btoa!=""undefined""&&(css+=`
/*# sourceMappingURL=data:application/json;base64,${btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))} */`);
```

The key point here is `\n` is replaced with newline character (`0x0A`) and the second line starts with `/*# sourceMappingURL=`. This confuses `removeComments` API in [convert-source-map](https://github.com/thlorenz/convert-source-map/tree/master) package and it removes the second line:

```
sourceMap&&typeof btoa!=""undefined""&&(css+=`

```

In this PR, we implement source map stripping based on that package's regex but add some heuristic checks to prevent false positives like above."
011f836aa746c819e7cdd2697c05601ce9326d90,Vercel Release Bot,2023-08-07 15:12:14+00:00,GitHub,2023-08-07 15:12:14+00:00,"[examples][tests] Upgrade Next.js to version 13.4.13 (#10308)

This auto-generated PR updates 3 packages to Next.js version 13.4.13"
ec107d7c91466b25a1c5cf364c66f5b9def245d5,Trek Glowacki,2023-08-07 14:34:49+00:00,GitHub,2023-08-07 14:34:49+00:00,"Handle calls for deployment aliases when mocking deployment API (#10303)

Attempting to add tests to unblock a contributor https://github.com/vercel/vercel/pull/10236#issuecomment-1664183891 and finding a deployment also checks its aliases. This PR updates the mock deployment code to also create a handler for its aliases."
0d27ae3b1a7fc8cc7536e6fabcb6b72d35626299,Shu Uesugi,2023-08-07 14:10:22+00:00,GitHub,2023-08-07 14:10:22+00:00,"Remove unused code (#10309)

Reference was removed in https://github.com/vercel/vercel/pull/8377 but the code wasn't removed."
08da4b9c923501d9d28eb6e3f26f4605fee83042,Vercel Release Bot,2023-08-04 23:17:40+00:00,GitHub,2023-08-04 23:17:40+00:00,"[remix] Update `@remix-run/dev` to v1.19.2 (#10299)

This auto-generated PR updates `@remix-run/dev` to version 1.19.2."
877f09ff5c99fdf8710485dd9e70b0119567bd8a,Trek Glowacki,2023-08-04 15:20:33+00:00,GitHub,2023-08-04 15:20:33+00:00,"Be looser with mock server URLs (#10300)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>"
5cca9b6c5c523bed8b5c2322a344c9332e417492,Vercel Release Bot,2023-08-02 20:04:48+00:00,GitHub,2023-08-02 20:04:48+00:00,"Version Packages (#10289)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.2.2

### Patch Changes

- Migrate list command to new structure
([#10284](https://github.com/vercel/vercel/pull/10284))

- Migrate whoami command to new structure
([#10266](https://github.com/vercel/vercel/pull/10266))

- Migrate logs command to new structure
([#10281](https://github.com/vercel/vercel/pull/10281))

- Migrate login command to new structure
([#10283](https://github.com/vercel/vercel/pull/10283))

- Migrate pull command to new structure
([#10280](https://github.com/vercel/vercel/pull/10280))

- Migrate logout command to new structure
([#10282](https://github.com/vercel/vercel/pull/10282))

- Migrate build command to new structure
([#10286](https://github.com/vercel/vercel/pull/10286))

- Migrate inspect command to new structure
([#10277](https://github.com/vercel/vercel/pull/10277))

- Migrate redeploy command to new structure
([#10279](https://github.com/vercel/vercel/pull/10279))

- Migrate link command to new structure
([#10285](https://github.com/vercel/vercel/pull/10285))

- Update spacing of --help output for CLI
([#10287](https://github.com/vercel/vercel/pull/10287))

- Updated dependencies
\[[`4af242af8`](https://github.com/vercel/vercel/commit/4af242af8633e58b6a9bf920564416da3ef22ad4),
[`0cbdae141`](https://github.com/vercel/vercel/commit/0cbdae1411aa7936ff7dfe551919ca5e56cd6e98),
[`85dd66778`](https://github.com/vercel/vercel/commit/85dd667781693539d753d587566e53964bbe189d)]:
    -   @vercel/node@2.15.8
    -   @vercel/remix-builder@1.9.1
    -   @vercel/static-build@1.3.44

## @vercel/gatsby-plugin-vercel-builder@1.3.16

### Patch Changes

- Updated dependencies
\[[`4af242af8`](https://github.com/vercel/vercel/commit/4af242af8633e58b6a9bf920564416da3ef22ad4),
[`85dd66778`](https://github.com/vercel/vercel/commit/85dd667781693539d753d587566e53964bbe189d)]:
    -   @vercel/node@2.15.8

## @vercel/node@2.15.8

### Patch Changes

- Move `@types/content-type` to dev dependency
([#10292](https://github.com/vercel/vercel/pull/10292))

- fix: compress condition
([#10288](https://github.com/vercel/vercel/pull/10288))

## @vercel/remix-builder@1.9.1

### Patch Changes

- Disable root workspace check in pnpm and yarn when adding deps
([#10291](https://github.com/vercel/vercel/pull/10291))

## @vercel/static-build@1.3.44

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.16

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
4af242af8633e58b6a9bf920564416da3ef22ad4,Nathan Rajlich,2023-08-02 20:00:14+00:00,GitHub,2023-08-02 20:00:14+00:00,"[node] Move `@types/content-type` to dev dependency (#10292)

`@types/content-type` is only needed at build time."
0cbdae1411aa7936ff7dfe551919ca5e56cd6e98,Nathan Rajlich,2023-08-02 18:36:38+00:00,GitHub,2023-08-02 18:36:38+00:00,"[remix] Disable root workspace check in pnpm and yarn when adding deps (#10291)

The Remix application might _also_ be the root of a workspace, so check for that case and pass the appropriate flag to the package manager to make it not error.

See: https://github.com/orgs/vercel/discussions/3467"
85dd667781693539d753d587566e53964bbe189d,Kiko Beats,2023-08-02 18:15:16+00:00,GitHub,2023-08-02 18:15:16+00:00,"fix: compress condition (#10288)

I'm experiencing an issue due the condition is wrongly set.

When the response is buffered, it should be `compress: true` since we're acting as proxy, and we're going to recompress again.

When the response is streaming, then it should be `compress: false` since the response is going to be piped."
7d3dda7341e7b1d87a324fcdbeb85c8a90b04034,Trek Glowacki,2023-08-02 17:33:59+00:00,GitHub,2023-08-02 17:33:59+00:00,"[cli] Update spacing on `--help` output (#10287)

Indent more items rightwards to tidy up spacing.

Example of unmigrated `bisect` on current `main`:
<img width=""561"" alt=""CleanShot 2023-07-31 at 14 47 38@2x"" src=""https://github.com/vercel/vercel/assets/9736/7474ac88-775c-43aa-937b-3f544c064c6d"">

Migrated example (https://github.com/vercel/vercel/pull/10276) before changes in this PR:
<img width=""661"" alt=""CleanShot 2023-07-31 at 15 07 26@2x"" src=""https://github.com/vercel/vercel/assets/9736/076b247c-35cf-45ea-8713-3c684b5063e4"">


Migrated example after changes in this PR:
<img width=""693"" alt=""CleanShot 2023-07-31 at 14 46 39@2x"" src=""https://github.com/vercel/vercel/assets/9736/f5f056a1-7f68-42e5-a724-79cf86031d09"">"
2144d0b2a93f3e2a9f0040703c6e63aed87d7c00,Vercel Release Bot,2023-08-02 17:12:33+00:00,GitHub,2023-08-02 17:12:33+00:00,"[tests] Upgrade Turbo to version 1.10.12 (#10270)

This auto-generated PR updates Turbo to version 1.10.12"
976e6aedf95d59e8b37dac4ac7ae98c5e6687c45,Trek Glowacki,2023-08-02 16:48:24+00:00,GitHub,2023-08-02 16:48:24+00:00,"[cli] Migrate `link` command to new structure (#10285)

Before:
<img width=""785"" alt=""CleanShot 2023-07-31 at 09 55 03@2x"" src=""https://github.com/vercel/vercel/assets/9736/1f60cbcb-354f-4005-bb74-8ffd68a38fba"">

After:
<img width=""785"" alt=""CleanShot 2023-07-31 at 09 55 03@2x"" src=""https://github.com/vercel/vercel/assets/9736/4eea5e82-0304-4949-9e8f-aeaa1b2e74eb"">"
6328751e148fc4eb046162f410c7b0d68f64ec15,Trek Glowacki,2023-08-02 14:21:57+00:00,GitHub,2023-08-02 14:21:57+00:00,"[cli] Migrate `whoami` to new command structure (#10266)

Migrating `whoami` to the command structure created in #10090. Unsure about tests. This is technically a refactor so existing tests should suffice."
8cb49a51361438678deb03966f150119bc2ec6d1,Trek Glowacki,2023-08-02 13:59:49+00:00,GitHub,2023-08-02 13:59:49+00:00,"[cli] Migrate `logout` command to new structure (#10282)

Co-authored-by: Trek Glowacki <trek.glowacki@vercel.com>
Co-authored-by: Chris Barber <chris.barber@vercel.com>"
3fa4f344cccae9b43386145859787fddd09cfb2b,Trek Glowacki,2023-08-01 20:24:25+00:00,GitHub,2023-08-01 20:24:25+00:00,"[cli] Migrate `pull` command to new structure (#10280)

Before:
<img width=""797"" alt=""CleanShot 2023-07-31 at 09 23 44@2x"" src=""https://github.com/vercel/vercel/assets/9736/88edd229-0aab-4155-9739-de64ad42e2f0"">

After:
<img width=""765"" alt=""CleanShot 2023-07-31 at 09 23 59@2x"" src=""https://github.com/vercel/vercel/assets/9736/574d0af0-5ce4-48dd-ad59-c4ca9893c147"">"
27610896ed2d61c75ebb1ad69fdb3da36fa269c6,Trek Glowacki,2023-08-01 20:05:11+00:00,GitHub,2023-08-01 20:05:11+00:00,"[cli] Migrate `inspect` command to new structure (#10277)

Before:
<img width=""659"" alt=""CleanShot 2023-07-31 at 10 06 01@2x"" src=""https://github.com/vercel/vercel/assets/9736/32c91a94-9ae7-479c-8255-e4b554badd2f"">


After:
<img width=""664"" alt=""CleanShot 2023-07-31 at 10 06 11@2x"" src=""https://github.com/vercel/vercel/assets/9736/9237b42a-a015-4d58-8231-5e257342ac90"">"
b9dae36e379b9bb9ad4879e17000b5bcae2e9e5c,Trek Glowacki,2023-08-01 19:43:16+00:00,GitHub,2023-08-01 19:43:16+00:00,"[cli] Migrate `logs` command to new structure (#10281)

Before:
<img width=""669"" alt=""CleanShot 2023-07-31 at 09 36 25@2x"" src=""https://github.com/vercel/vercel/assets/9736/ee28d4b7-33eb-49cf-a565-fd4f56bf8bb6"">

After:
<img width=""693"" alt=""CleanShot 2023-07-31 at 09 36 46@2x"" src=""https://github.com/vercel/vercel/assets/9736/450d7c54-216f-4590-98b9-9f6b1a13d040"">"
1537ff9c381c5cbe52ed26ba704a36e295d82d76,Ilya Komichev,2023-08-01 18:46:39+00:00,GitHub,2023-08-01 18:46:39+00:00,"chore(README): set correct link to nuxt docs (#10265)

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
7e0317775f9a8743735d247c5e5506fc52661e9b,Trek Glowacki,2023-08-01 16:59:01+00:00,GitHub,2023-08-01 16:59:01+00:00,"[cli] Migrate `build` command to new structure (#10286)

Before:
<img width=""854"" alt=""CleanShot 2023-07-31 at 09 59 18@2x"" src=""https://github.com/vercel/vercel/assets/9736/7a91572f-1481-4a2a-ac70-2384d6c30560"">

After:
<img width=""907"" alt=""CleanShot 2023-07-31 at 09 59 30@2x"" src=""https://github.com/vercel/vercel/assets/9736/ed358eae-9207-4ebe-ad41-865ce213560e"">"
2dd27976b3e25ca7f212fbf4b3aaf76573e88507,Trek Glowacki,2023-08-01 16:37:32+00:00,GitHub,2023-08-01 16:37:32+00:00,"[cli] Migrate `redeploy` command to new structure (#10279)

Before:
<img width=""816"" alt=""CleanShot 2023-07-31 at 09 19 16@2x"" src=""https://github.com/vercel/vercel/assets/9736/cf194706-8071-4f86-9a1c-896383a51a29"">

After:
<img width=""673"" alt=""CleanShot 2023-07-31 at 09 19 30@2x"" src=""https://github.com/vercel/vercel/assets/9736/d0f3faed-83e7-40b9-9252-c8b68855a7a3"">"
25e2b7efba4a7f95d54f0b88b5f26f00e5d584de,Trek Glowacki,2023-08-01 15:43:02+00:00,GitHub,2023-08-01 15:43:02+00:00,"[cli] Migrate `login` command to new structure (#10283)

We currently incorrectly specify the argument is required with `<>`, but the examples show you can do `vercel login` without an argument, so I've corrected that as part of this migration.

Before:
<img width=""549"" alt=""CleanShot 2023-07-31 at 09 44 28@2x"" src=""https://github.com/vercel/vercel/assets/9736/f1b1a328-69e0-4d61-b65c-d2739c81f61c"">


After:
<img width=""684"" alt=""CleanShot 2023-07-31 at 09 44 43@2x"" src=""https://github.com/vercel/vercel/assets/9736/e2bb28bf-e3d8-4d89-ad7e-864dd091ec3d"">"
3d23d1270cd817651622db9661ead531267e4615,Trek Glowacki,2023-07-31 22:21:11+00:00,GitHub,2023-07-31 22:21:11+00:00,"[cli] Migrate `list` command to new structure (#10284)

Before:

<img width=""809"" alt=""CleanShot 2023-07-31 at 09 51 37@2x"" src=""https://github.com/vercel/vercel/assets/9736/f5ac2ccc-3ff9-4a52-9c93-4a47fe479497"">


After:
<img width=""836"" alt=""CleanShot 2023-07-31 at 09 51 48@2x"" src=""https://github.com/vercel/vercel/assets/9736/48314715-132a-477a-8a66-a5d23c27ee50"">"
fde40e731a1dcb436b0c661a100742becfbeb390,Vercel Release Bot,2023-07-31 18:31:22+00:00,GitHub,2023-07-31 18:31:22+00:00,"Version Packages (#10278)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
f3535274212688dd53125bcc8c9d055f5d93997f,Trek Glowacki,2023-07-31 16:03:13+00:00,GitHub,2023-07-31 16:03:13+00:00,"[cli] Migrate `bisect` command to new structure (#10276)

Migrating `bisect` to the command structure created in https://github.com/vercel/vercel/pull/10090. Unsure about tests. This is technically a refactor so existing tests should suffice.

Before:
<img width=""534"" alt=""CleanShot 2023-07-31 at 08 14 29@2x"" src=""https://github.com/vercel/vercel/assets/9736/8ae53672-9b1f-444a-94d3-296ac0fa8d30"">

After:
<img width=""674"" alt=""CleanShot 2023-07-31 at 08 15 02@2x"" src=""https://github.com/vercel/vercel/assets/9736/0ba12f19-fb34-41f3-84fb-0c1498d7a485"">"
c1cdfb3e757e1a001e24f12de7a672c580125df0,Trek Glowacki,2023-07-31 15:42:27+00:00,GitHub,2023-07-31 15:42:27+00:00,"[cli] Migrate `remove` command to new structure (#10268)

Migrating `remove` to the command structure created in #10090. Unsure about tests. This is technically a refactor so existing tests should suffice."
fc413707d017e234d5013b761d885f65f9b981bc,Kiko Beats,2023-07-31 14:11:18+00:00,GitHub,2023-07-31 14:11:18+00:00,"fix: move content-type as dependency (#10274)

It's required by `serverless-functions/helpers.js` causing unhandled
error because it's missing.

```
Error: Cannot find module 'content-type'
Require stack:
- /Users/kikobeats/Library/pnpm/global/5/.pnpm/@vercel+node@2.15.6/node_modules/@vercel/node/dist/serverless-functions/helpers.js
    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:1077:15)
    at Function.Module._resolveFilename.sharedData.moduleResolveFilenameHook.installedValue [as _resolveFilename] (/Users/kikobeats/Library/pnpm/global/5/.pnpm/@cspotcode+source-map-support@0.8.1/node_modules/@cspotcode/source-map-support/source-map-support.js:811:30)
    at Function.Module._load (node:internal/modules/cjs/loader:922:27)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:110:18)
    at Object.<anonymous> (/Users/kikobeats/Library/pnpm/global/5/.pnpm/@vercel+node@2.15.6/node_modules/@vercel/node/dist/serverless-functions/helpers.js:6:24)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Object.require.extensions.<computed> [as .js] (/Users/kikobeats/Library/pnpm/global/5/.pnpm/ts-node@10.9.1_@types+node@14.18.33_typescript@4.9.5/node_modules/ts-node/src/index.ts:1608:43)
    at Module.load (node:internal/modules/cjs/loader:1119:32) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/kikobeats/Library/pnpm/global/5/.pnpm/@vercel+node@2.15.6/node_modules/@vercel/node/dist/serverless-functions/helpers.js'
  ]
}
```"
e842a8870ea7b2f34b12ab20aff19a91fa52d8c9,Vercel Release Bot,2023-07-28 22:40:19+00:00,GitHub,2023-07-28 22:40:19+00:00,"Version Packages (#10261)

# Releases
## vercel@31.2.0

### Minor Changes

- Add a ""Global Options"" section to help output
([#10250](https://github.com/vercel/vercel/pull/10250))

### Patch Changes

- Updated dependencies
\[[`d1b0dbe3a`](https://github.com/vercel/vercel/commit/d1b0dbe3a7d8754286aa2b7ba0c8b55d3adafdea),
[`4a8622a10`](https://github.com/vercel/vercel/commit/4a8622a10d52260cb629a1c4a6f797ade05ea154),
[`6469ef1b8`](https://github.com/vercel/vercel/commit/6469ef1b8ce37e93f50ab4a108aa0953d7631fe8)]:
    -   @vercel/remix-builder@1.9.0
    -   @vercel/next@3.9.3

## @vercel/remix-builder@1.9.0

### Minor Changes

- Install `@vercel/remix-run-dev` at build-time instead of using symlink
([#9784](https://github.com/vercel/vercel/pull/9784))

### Patch Changes

- Update `@remix-run/dev` fork to v1.19.1
([#10246](https://github.com/vercel/vercel/pull/10246))

## @vercel/next@3.9.3

### Patch Changes

- fix dynamic not found pages
([#10262](https://github.com/vercel/vercel/pull/10262))"
d1b0dbe3a7d8754286aa2b7ba0c8b55d3adafdea,Nathan Rajlich,2023-07-28 20:49:32+00:00,GitHub,2023-07-28 20:49:32+00:00,"[remix] Install `@vercel/remix-run-dev` at build-time instead of using symlink (#9784)

Instead of including the fork `@remix-run/dev` package as a regular dependency of `@vercel/remix-builder`, install it at build-time by modifying the project's `package.json` file. The reasons for this are:

* Avoids deprecation warnings from a few packages that currently exist on the `@remix-run/dev` package when installing Vercel CLI (those warnings already show up in the build logs anyways, so nothing new there).
* Allows us to install a version as close as possible to the version specified in the user's `package.json` (similar to how we do when auto-injecting the `@vercel/remix` package). This will be especially important once Remix v2 is released, which will have breaking changes compared to v1.

**Note:** `@vercel/remix-run-dev` is still a _dev_ dependency, so that we can use TypeScript types from it, as well as, at runtime, we use the version in the Builder's `package.json` to determine the maximum versions of `@vercel/remix-run-dev` and/or `@vercel/remix` which can safely be installed.

Fixes #10027.
Fixes #10222."
d614709308837a81af87fb8a6c82ac10653d94be,Chris Barber,2023-07-28 17:28:45+00:00,GitHub,2023-07-28 17:28:45+00:00,"[codeowners] Add @trek to codeowners (#10267)

Adding Trek so he join in on the code review fun!"
d5b588bc06697a0628fa43694d791a8bca7611a5,Trek Glowacki,2023-07-27 20:48:07+00:00,GitHub,2023-07-27 20:48:07+00:00,"[cli] Add a ""Global Options"" section to help output (#10250)

Followup PR to #10090. Some of our commands duplicate global options into their `args` structure e.g. https://github.com/vercel/vercel/blob/2661f56347d5c32de369a6cea74bc9fb46d565a2/packages/cli/src/commands/logs.ts#L25-L26

 Others commands omit it entirely.

This updates the `--help` output for commands migrated to our new structure (so far, only `deploy`) will show a ""Global Options"" section:

```
 vercel deploy [project-path] [options]

Deploy your project to Vercel. The `deploy` command is the default command for the Vercel CLI, and can be omitted (`vc deploy my-app` equals `vc my-app`).

Options

  --archive                    Compress the deployment code into a file before uploading it
  -b, --build-env <key=value>  Specify environment variables during build-time (e.g. `-b KEY1=value1 -b KEY2=value2`)
  -e, --env <key=value>        Specify environment variables during run-time (e.g. `-e KEY1=value1 -e KEY2=value2`)
  -f, --force                  Force a new deployment even if nothing has changed
  -m, --meta <key=value>       Specify metadata for the deployment (e.g. `-m KEY1=value1 -m KEY2=value2`)
  --no-wait                    Don't wait for the deployment to finish
  --prebuilt                   Use in combination with `vc build`. Deploy an existing build
  --prod                       Create a production deployment
  -p, --public                 Deployment is public (`/_src`) is exposed)
  --regions                    Set default regions to enable the deployment on
  --with-cache                 Retain build cache when using ""--force""
  -y, --yes                    Use default options to skip all prompts

Global Options

  --cwd <DIR>                Sets the current working directory for a single run of a command
  -d, --debug                Debug mode (default off)
  -Q, --global-config <DIR>  Path to the global ${'`.vercel`'} directory
  -h, --help                 Output usage information
  -A, --local-config <FILE>  Path to the local `vercel.json` file
  --no-color                 No color mode (default off)
  -S, --scope                Set a custom scope
  -t, --token <TOKEN>        Login token
  -v, --version              Output the version number
```

As commands are migrated to this new structure, they'll gain this output automatically."
4a8622a10d52260cb629a1c4a6f797ade05ea154,Zack Tanner,2023-07-27 16:18:31+00:00,GitHub,2023-07-27 16:18:31+00:00,"[next] fix dynamic not found pages (#10262)

This updates `getServerlessPages` to consider `/_not-found` pages (which might opt into dynamic rendering)

- Corresponding Next.js changes https://github.com/vercel/next.js/pull/53231
- [slack x-ref](https://vercel.slack.com/archives/C03S8ED1DKM/p1683763412272429)"
6469ef1b8ce37e93f50ab4a108aa0953d7631fe8,Vercel Release Bot,2023-07-26 22:22:21+00:00,GitHub,2023-07-26 22:22:21+00:00,"[remix] Update `@remix-run/dev` to v1.19.1 (#10246)

This auto-generated PR updates `@remix-run/dev` to version 1.19.1."
b8d42a521bb28b335f68c3ed3542c502c916a96d,Nathan Rajlich,2023-07-26 21:48:07+00:00,GitHub,2023-07-26 21:48:07+00:00,"[examples] Remove ""author"" field from `hydrogen` template (#10253)"
b1e8c9cb6e7509a29872a0de7e29239842db24de,Vercel Release Bot,2023-07-26 18:50:22+00:00,GitHub,2023-07-26 18:50:22+00:00,"Version Packages (#10260)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.1.1

### Patch Changes

- Updated dependencies
\[[`7c30b13cc`](https://github.com/vercel/vercel/commit/7c30b13ccb79bdf0ac240282bba4c084f1d0d122)]:
    -   @vercel/next@3.9.2

## @vercel/next@3.9.2

### Patch Changes

- Fix pages/404 gsp + i18n case
([#10258](https://github.com/vercel/vercel/pull/10258))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
7c30b13ccb79bdf0ac240282bba4c084f1d0d122,JJ Kasper,2023-07-26 18:41:25+00:00,GitHub,2023-07-26 18:41:25+00:00,"[next] Fix pages/404 gsp + i18n case (#10258)

This ensures we detect the locale prefixed 404 when it uses `getStaticProps` correctly. 

- x-ref: [slack thread](https://vercel.slack.com/archives/C05JTC58AQJ)
- Closes https://github.com/vercel/vercel/pull/10248"
e5e757de34522cc4256296ffeed1b2e68664195a,Steven,2023-07-26 16:52:13+00:00,GitHub,2023-07-26 16:52:13+00:00,"[tests] fix `vary` header in next tests (#10249)

Since we run tests against canary, the latest [v13.4.13-canary.0](https://github.com/vercel/next.js/releases/tag/v13.4.13-canary.0) changed the `vary` header in https://github.com/vercel/next.js/pull/52746 so we need to update the tests to match."
2661f56347d5c32de369a6cea74bc9fb46d565a2,Vercel Release Bot,2023-07-25 01:02:38+00:00,GitHub,2023-07-25 01:02:38+00:00,"Version Packages (#10227)

# Releases

## vercel@31.1.0

### Minor Changes

- Add 'Environment' column to 'vc list' with new '--environment' filter
and pipe URLs to stdout
([#10239](https://github.com/vercel/vercel/pull/10239))

### Patch Changes

- Update `proxy-agent` to v6.3.0
([#10226](https://github.com/vercel/vercel/pull/10226))

- Use `getNodeBinPaths()` in `vc dev`
([#10225](https://github.com/vercel/vercel/pull/10225))

- Updated dependencies
\[[`b1c14cde0`](https://github.com/vercel/vercel/commit/b1c14cde03f94b2c15ba12c9be9d19c72df2fdbb),
[`ce4633fe4`](https://github.com/vercel/vercel/commit/ce4633fe4d00cb5c251cdabbfab08f39ec3f3b5f)]:
    -   @vercel/next@3.9.1
    -   @vercel/static-build@1.3.42

## @vercel/frameworks@1.5.0

### Minor Changes

- Add `ignorePackageJsonScript` configuration for Framework command
settings to ignore the `package.json` script.
([#10228](https://github.com/vercel/vercel/pull/10228))

Enable this mode for Storybook's `buildCommand`, since it should not
invoke the ""build"" script, which is most likely designated for the
frontend app build.

## @vercel/fs-detectors@4.1.1

### Patch Changes

- Updated dependencies
\[[`ce4633fe4`](https://github.com/vercel/vercel/commit/ce4633fe4d00cb5c251cdabbfab08f39ec3f3b5f)]:
    -   @vercel/frameworks@1.5.0

## @vercel/next@3.9.1

### Patch Changes

- Fix pages and app router i18n handling
([#10243](https://github.com/vercel/vercel/pull/10243))

## @vercel/static-build@1.3.42

### Patch Changes

- Add `ignorePackageJsonScript` configuration for Framework command
settings to ignore the `package.json` script.
([#10228](https://github.com/vercel/vercel/pull/10228))

Enable this mode for Storybook's `buildCommand`, since it should not
invoke the ""build"" script, which is most likely designated for the
frontend app build."
b1c14cde03f94b2c15ba12c9be9d19c72df2fdbb,JJ Kasper,2023-07-24 23:26:25+00:00,GitHub,2023-07-24 23:26:25+00:00,"[next] Fix pages and app router i18n handling (#10243)

Ensures app router paths are handled properly when i18n is configured for pages directory. 

x-ref: [slack thread](https://vercel.slack.com/archives/C03KAR5DCKC/p1687565759424049)
x-ref: [slack thread](https://vercel.slack.com/archives/C03KAR5DCKC/p1687565759424049)
x-ref: [slack thread](https://vercel.slack.com/archives/C03KAR5DCKC/p1672781549860349?thread_ts=1671393204.073649&cid=C03KAR5DCKC)

[VCCLI-780](https://linear.app/vercel/issue/VCCLI-780/add-404i18n-invariant-case-in-nextjs-builder)"
8dd6d021df0e52f574b97a0d9c79871998957522,Chris Barber,2023-07-24 20:02:25+00:00,GitHub,2023-07-24 20:02:25+00:00,"[cli] Add ""Environment"" column to `vc list` (#10239)

Also adds a new `--environment=[preview|production]` filter and ability to pipe deployment URLs to `stdout`!

<img width=""380"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/20de0caa-2d63-4112-8213-cc15d23295c7"">

```
vc list --environment preview
```

```
vc list --environment production
```

```
vc list --environment preview > preview_deployments.txt
```"
88ec6e69d629fcbe7b716fb2c50fd2b272b8546c,Vercel Release Bot,2023-07-23 21:51:14+00:00,GitHub,2023-07-23 21:51:14+00:00,"[examples][tests] Upgrade Next.js to version 13.4.12 (#10240)

This auto-generated PR updates 3 packages to Next.js version 13.4.12"
a6f2e7b136209347e8587af6cd770b2a09634384,Vercel Release Bot,2023-07-23 21:30:01+00:00,GitHub,2023-07-23 21:30:01+00:00,"[tests] Upgrade Turbo to version 1.10.9 (#10241)

This auto-generated PR updates Turbo to version 1.10.9"
e90636590990f4009ac3eaea2d752e97d646ed04,Vercel Release Bot,2023-07-21 19:01:10+00:00,GitHub,2023-07-21 19:01:10+00:00,"[examples][tests] Upgrade Next.js to version 13.4.11 (#10233)

This auto-generated PR updates 3 packages to Next.js version 13.4.11"
7b01a073947d73f29584e32a9129d8797702e3b6,Nathan Rajlich,2023-07-19 22:19:43+00:00,GitHub,2023-07-19 22:19:43+00:00,"[cli] Use `getNodeBinPaths()` in `vc dev` (#10225)

This allows for the ""dev command"" of a Project to work better in monorepos, where the dev server might live up the node_modules hierarchy within the repo."
ce4633fe4d00cb5c251cdabbfab08f39ec3f3b5f,Nathan Rajlich,2023-07-19 20:23:51+00:00,GitHub,2023-07-19 20:23:51+00:00,"[frameworks][static-build] Add `ignorePackageJsonScript` configuration for Framework command settings (#10228)

When this property is set to `true`, then the corresponding `package.json` script will not be invoked, allowing for the default setting value will be executed.

This is enabled for Storybook's `buildCommand`, since we do not want the ""build"" script to be invoked, since that would belong to the frontend application's build instead of Storybook's."
fdf86fda038133e50892fe6a28852ff2cdf56931,Nathan Rajlich,2023-07-18 20:29:37+00:00,GitHub,2023-07-18 20:29:37+00:00,"[cli] Update `proxy-agent` to v6.3.0 (#10226)

This version includes a refactor for proxies specified via PAC files such that it no longer uses the deprecated `vm2` module.

See https://github.com/TooTallNate/proxy-agents/issues/218."
56178e6a46d42c6be2b9b6a2273db984a9def8e3,Vercel Release Bot,2023-07-18 19:02:19+00:00,GitHub,2023-07-18 19:02:19+00:00,"Version Packages (#10213)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
5439d7c0c9b79e7161bf4fa84ffdb357365f9e7e,Nathan Rajlich,2023-07-18 18:27:19+00:00,GitHub,2023-07-18 18:27:19+00:00,"[remix] Create ensured dependency symlink at the `start` directory, instead of root of repo (#10224)

When the `ensureResolvable()` function runs in a monorepo, the symlink should be created in the `node_modules` directory within the app subdirectory, rather than the root of the repository. Fixes the following issue:

![image](https://github.com/vercel/vercel/assets/71256/c0171533-881a-425e-85b9-82318ef19032)"
c670e51712022193e078bd68b055f7e61013015d,Zack Tanner,2023-07-17 19:48:45+00:00,GitHub,2023-07-17 19:48:45+00:00,"[next] fix 404 page in edge runtime (#10223)

Fixes Next builder to handle edge runtime on 404 pages

[Related Next.js PR](https://github.com/vercel/next.js/pull/52754)
[slack x-ref](https://vercel.slack.com/archives/C03S8ED1DKM/p1689312606770609)"
b56639b624e9ad1df048a4c85083e26888696060,Kiko Beats,2023-07-17 16:45:05+00:00,GitHub,2023-07-17 16:45:05+00:00,"[node] fix: runs edge user code inside IIFE (#10220)

In this way, `self` is isolated and modify it doesn't break some Edge Runtime internals

Originally reported by @jawj at https://github.com/jawj/neon-vercel-zapatos-minimal-crash"
12bbae098ce084d48b26c2faddf017888885363e,Kiko Beats,2023-07-17 14:33:25+00:00,GitHub,2023-07-17 14:33:25+00:00,[codeowners] @vercel/edge-compute  @vercel/compute (#10219)
9969f0ba18a8588e9aaf8cc8df2bc1d4af30d5ea,Nathan Rajlich,2023-07-14 18:11:49+00:00,GitHub,2023-07-14 18:11:49+00:00,"[cli] Use `detectFrameworks()` during `vc link --repo` (#10203)

Allows for multiple frameworks to be detectable within the same root directory. This is basically specifically for Storybook.

<img width=""700"" alt=""Screenshot 2023-07-12 at 6 04 37 PM"" src=""https://github.com/vercel/vercel/assets/71256/5a240f1e-b000-42ad-b36f-3c151d3cd449"">"
24e1e3c3be212c01847b422d6c11d421a7663ae0,Vercel Release Bot,2023-07-14 16:27:44+00:00,GitHub,2023-07-14 16:27:44+00:00,"[examples][tests] Upgrade Next.js to version 13.4.10 (#10215)

This auto-generated PR updates 3 packages to Next.js version 13.4.10"
b61674cb2d665b27980808bf930d5aa5b752854e,Steven,2023-07-14 16:07:26+00:00,GitHub,2023-07-14 16:07:26+00:00,"[tests] Fix next update cron job (#10214)

This was supposed to be fixed in https://github.com/vercel/vercel/pull/10173 but the file was created after git commit.

This PR makes sure the file is created before git commit."
cae60155f34883f08a5e4f51b547e2a1a5fee694,Florentin / ,2023-07-14 13:27:06+00:00,GitHub,2023-07-14 13:27:06+00:00,"[next] support maxDuration in Next.js deployments (#10069)

Follow up PR to
https://github.com/vercel/next.js/commit/8703c55f9f3d96df18ce192612141e094b3dc4fd
which reads the newly created function config manifest and patches in
the options for resource creation.

---------

Co-authored-by: Steven <steven@ceriously.com>"
a91bde5287318c04520431a5cb1cbdd7a8377417,Vercel Release Bot,2023-07-13 23:17:13+00:00,GitHub,2023-07-13 23:17:13+00:00,"Version Packages (#10192)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/fs-detectors@4.1.0

### Minor Changes

- Add `detectFrameworks()` function
([#10195](https://github.com/vercel/vercel/pull/10195))

## @vercel/build-utils@6.8.2

### Patch Changes

- Push back `nodejs16.x` discontinue date to `2024-02-06`
([#10209](https://github.com/vercel/vercel/pull/10209))

## vercel@31.0.3

### Patch Changes

- Fix redeploy target to be undefined when null
([#10201](https://github.com/vercel/vercel/pull/10201))

- Respect forbidden API responses
([#10178](https://github.com/vercel/vercel/pull/10178))

- Update `supports-hyperlinks` to v3
([#10208](https://github.com/vercel/vercel/pull/10208))

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2
    -   @vercel/static-build@1.3.40
    -   @vercel/node@2.15.5
    -   @vercel/remix-builder@1.8.17

## @vercel/client@12.6.5

### Patch Changes

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2

## @vercel/gatsby-plugin-vercel-builder@1.3.13

### Patch Changes

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2
    -   @vercel/node@2.15.5

## @vercel/node@2.15.5

### Patch Changes

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2

## @vercel/remix-builder@1.8.17

### Patch Changes

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2

## @vercel/static-build@1.3.40

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.13

## @vercel-internals/types@1.0.5

### Patch Changes

- Updated dependencies
\[[`0750517af`](https://github.com/vercel/vercel/commit/0750517af99aea41410d4f1f772ce427699554e7)]:
    -   @vercel/build-utils@6.8.2

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0750517af99aea41410d4f1f772ce427699554e7,Steven,2023-07-13 22:47:03+00:00,GitHub,2023-07-13 22:47:03+00:00,"[build-utils] Push back `nodejs16.x` discontinue date to 2024-02-06 (#10209)

The discontinue date for `nodejs16.x` needs to be pushed back until we can add support for `nodejs20.x`.

Currently `nodejs18.x` can cause problems with native packages that depend on a specific version of glibc so the only solution for that use case is to stay on `nodejs16.x` at this time.


### Related Issues
- https://github.com/orgs/vercel/discussions/3061
- https://github.com/orgs/vercel/discussions/2867
- https://github.com/orgs/vercel/discussions/2258
- https://github.com/orgs/vercel/discussions/2630
- https://github.com/orgs/vercel/discussions/2105
- https://github.com/orgs/vercel/discussions/2596
- https://github.com/orgs/vercel/discussions/2730"
70f678295439b686066933fc2bfd4c59cd91e03c,Steven,2023-07-13 21:29:51+00:00,GitHub,2023-07-13 21:29:51+00:00,"[tests] Add lockfile to `51-puppeteer-build` test (#10210)

This test was failing so I'm adding a lockfile to prevent this build error:

```
Running ""yarn run build""
--
16:40:10.239 | yarn run v1.22.17
16:40:10.260 | $ node build.js
16:40:40.630 | node:internal/process/promises:288
16:40:40.630 | triggerUncaughtException(err, true /* fromPromise */);
16:40:40.630 | ^
16:40:40.630 | 
16:40:40.630 | TimeoutError: Navigation timeout of 30000 ms exceeded
16:40:40.631 | at /vercel/path1/node_modules/puppeteer/lib/LifecycleWatcher.js:142:21
16:40:40.631 | -- ASYNC --
16:40:40.631 | at Frame.<anonymous> (/vercel/path1/node_modules/puppeteer/lib/helper.js:111:15)
16:40:40.631 | at Page.goto (/vercel/path1/node_modules/puppeteer/lib/Page.js:672:49)
16:40:40.631 | at Page.<anonymous> (/vercel/path1/node_modules/puppeteer/lib/helper.js:112:23)
16:40:40.631 | at /vercel/path1/build.js:10:14
16:40:40.631 | at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
```"
5f1e37ee165ee6c855852c36b8055f773c5dcd04,Nathan Rajlich,2023-07-13 19:24:30+00:00,GitHub,2023-07-13 19:24:30+00:00,"Update `supports-hyperlinks` to v3 (#10208)

Enables proper detection for VSCode's terminal emulator, and allows us
to remove the in-house types since v3 includes its own types."
680d666fdca90866692838d6f13241b458fe5bef,Steven,2023-07-13 13:48:27+00:00,GitHub,2023-07-13 13:48:27+00:00,"[tests] Add huozhi to cron job for Next.js (#10205)

This adds Jiachi to the default reviewer list for the Next.js update cron job."
06a5dccfed333d24968646edf4bf2ebe41a30d1b,Chris Barber,2023-07-12 21:26:33+00:00,GitHub,2023-07-12 21:26:33+00:00,[cli] Fix redeploy target to be `undefined` when `null` (#10201)
f85df894c0d1af97fd8a23426af372652a67fb3f,Nathan Rajlich,2023-07-11 20:08:55+00:00,GitHub,2023-07-11 20:08:55+00:00,"[fs-detectors] Add `detectFrameworks()` (#10195)

Similar to `detectFramework()`, but this version returns all detected frameworks at the given path. It also returns the full `Framework` objects instead of just the slug.

This will be useful for detecting when multiple Projects exist at the same root directory (i.e. Storybook).

**Note:** I rearranged some tests, so probably review with [whitespace changes hidden](https://github.com/vercel/vercel/pull/10195/files?diff=split&w=1)."
e9ec779f1cb2a58008a26ae1e3b017d16f4fd0e7,balazs4,2023-07-11 10:32:43+00:00,GitHub,2023-07-11 10:32:43+00:00,"[rbac]s show forbidden error in case of missing permission (#10178)

fixes
[iam-941](https://linear.app/vercel/issue/IAM-941/cli-improve-handling-of-insufficient-permissions-no-access)"
4333d1e6b223055b8548f5df025df45fcfb20f5b,Vercel Release Bot,2023-07-11 07:51:06+00:00,GitHub,2023-07-11 07:51:06+00:00,"[examples][tests] Upgrade Next.js to version 13.4.9 (#10183)

This auto-generated PR updates 3 packages to Next.js version 13.4.9"
493a31091ddcd48e81f8c1db03d6ef41612c42d9,Vercel Release Bot,2023-07-10 22:48:32+00:00,GitHub,2023-07-10 22:48:32+00:00,"Version Packages (#10158)

## @vercel/build-utils@6.8.1

### Patch Changes

- Revert ""[build-utils] Allow file-ref sema to be controlled through env
flag"" ([#10167](https://github.com/vercel/vercel/pull/10167))

## vercel@31.0.2

### Patch Changes

- Allow additional project settings in `createProject()`
([#10172](https://github.com/vercel/vercel/pull/10172))

- Run local Project detection during `vc link --repo`.
([#10094](https://github.com/vercel/vercel/pull/10094))
This allows for creation of new Projects that do not yet exist under the
selected scope.

- Redeploy command no longer redeploys preview deployments to production
([#10186](https://github.com/vercel/vercel/pull/10186))

- Added trailing new line at end of help output
([#10170](https://github.com/vercel/vercel/pull/10170))

- Create new help output and arg parsing for deploy command
([#10090](https://github.com/vercel/vercel/pull/10090))

- [cli] Remove `preinstall` script
([#10157](https://github.com/vercel/vercel/pull/10157))

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08),
[`5e5332fbc`](https://github.com/vercel/vercel/commit/5e5332fbc9317a8f3cc4ed0b72ec1a2c76020891),
[`027bce00b`](https://github.com/vercel/vercel/commit/027bce00b3821d9b4a8f7ec320cd1c43ab9f4215)]:
    -   @vercel/build-utils@6.8.1
    -   @vercel/node@2.15.4
    -   @vercel/remix-builder@1.8.16
    -   @vercel/static-build@1.3.39

## @vercel/client@12.6.4

### Patch Changes

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08)]:
    -   @vercel/build-utils@6.8.1

## @vercel/gatsby-plugin-vercel-builder@1.3.12

### Patch Changes

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08),
[`5e5332fbc`](https://github.com/vercel/vercel/commit/5e5332fbc9317a8f3cc4ed0b72ec1a2c76020891)]:
    -   @vercel/build-utils@6.8.1
    -   @vercel/node@2.15.4

## @vercel/node@2.15.4

### Patch Changes

- [node] fix decompress mismatching
([#10184](https://github.com/vercel/vercel/pull/10184))

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08)]:
    -   @vercel/build-utils@6.8.1

## @vercel/remix-builder@1.8.16

### Patch Changes

- Update `@remix-run/dev` fork to v1.18.1
([#10180](https://github.com/vercel/vercel/pull/10180))

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08)]:
    -   @vercel/build-utils@6.8.1

## @vercel/static-build@1.3.39

### Patch Changes

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.12

## @vercel-internals/constants@1.0.4

### Patch Changes

- Create new help output and arg parsing for deploy command
([#10090](https://github.com/vercel/vercel/pull/10090))

## @vercel-internals/types@1.0.4

### Patch Changes

- Updated dependencies
\[[`7021279b2`](https://github.com/vercel/vercel/commit/7021279b284f314a4d1bdbb4306b4c22291efa08),
[`718bbd365`](https://github.com/vercel/vercel/commit/718bbd365a50271a980bdca231ca801a0eead32b)]:
    -   @vercel/build-utils@6.8.1
    -   @vercel-internals/constants@1.0.4

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
8d7206f5b625cdbfb676c07bd0e58798cf1421e8,Nathan Rajlich,2023-07-10 22:42:13+00:00,GitHub,2023-07-10 22:42:13+00:00,"[cli] Run local Project detection during `vc link --repo` (#10094)

Run local Project detection during `vc link --repo`. This allows for creation of new Projects that do not yet exist under the selected scope."
4bf2ca55ff64b5994ee386b99d0e491f1a70c00a,Sean Massa,2023-07-10 02:17:06+00:00,GitHub,2023-07-10 02:17:06+00:00,"Revert ""Add Changesets ""ignore"" configuration"" (#10189)

Reverts vercel/vercel#10181

This seems to be breaking releases of packages that depend on ignored packages. Example: https://github.com/vercel/vercel/actions/runs/5489491313/jobs/10003713249"
5e5332fbc9317a8f3cc4ed0b72ec1a2c76020891,Kiko Beats,2023-07-07 18:33:05+00:00,GitHub,2023-07-07 18:33:05+00:00,"[node] fix decompress mismatching (#10184)

This PR disabled `node-fetch` default compression handling when the
response is not streamed.

The default behavior in node-fetch is to handle the compression. That's
great if you interact with node-fetch as user, but bad if you use it as
intermediate proxy server, since it's creating a mismatching related
with the body format and length expectations.

Instead, we disable compression, get the buffered response and compress
it again if needed.

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
281ec776a5fc9a8f6ef619cb4089705eff8ea8e4,Ethan Arrowood,2023-07-07 17:50:06+00:00,GitHub,2023-07-07 17:50:06+00:00,"Fix redeploy target (#10186)

This PR fixes customer issue
https://github.com/vercel/customer-issues/issues/1310 which identified
an issue with the `redeploy` command.

`redeploy` should not default the `target` to `'production'` as an
`undefined` target is meant to mean `'preview'`."
ee8f9292b46d74c2c87e988fa12ef287d340a710,Nathan Rajlich,2023-07-05 22:07:15+00:00,GitHub,2023-07-05 22:07:15+00:00,"Add Changesets ""ignore"" configuration (#10181)

These packages already don't get published since they have `private: true`, but adding to the ""ignore"" configuration also removes them from the selection prompt when executing the `changeset` CLI command."
027bce00b3821d9b4a8f7ec320cd1c43ab9f4215,Vercel Release Bot,2023-07-05 21:23:48+00:00,GitHub,2023-07-05 21:23:48+00:00,"[remix] Update `@remix-run/dev` to v1.18.1 (#10180)

This auto-generated PR updates `@remix-run/dev` to version 1.18.1."
ca1f41200ab3c6ae7999e57fc09d31d04427b47d,Vercel Release Bot,2023-07-05 20:46:59+00:00,GitHub,2023-07-05 20:46:59+00:00,"[tests] Upgrade Turbo to version 1.10.7 (#10164)

This auto-generated PR updates Turbo to version 1.10.7"
834b3e652b0d47d9964330672c03b28225014e45,Nathan Rajlich,2023-07-03 21:42:00+00:00,GitHub,2023-07-03 21:42:00+00:00,"[cli] Allow additional project settings in `createProject()` (#10172)

Previously, `createProject()` only allowed a string `name` to be provided, and another API call would need to be done after creation with `updateProject()`. This should not be necessary since the `POST` endpoint can accept additional properties already."
5c6941d18c494231b42b1a22b3c665d5b815e3be,Steven,2023-07-03 21:03:42+00:00,GitHub,2023-07-03 21:03:42+00:00,"[tests] Fix `update-next.js` cron job to include changeset (#10173)

The cron job script only updates the Next.js example so it should have an empty changeset"
761ede24820da60a61604c2629c7e9e887b20faf,Vercel Release Bot,2023-07-03 20:22:59+00:00,GitHub,2023-07-03 20:22:59+00:00,"[examples][tests] Upgrade Next.js to version 13.4.8 (#10171)

This auto-generated PR updates 3 packages to Next.js version 13.4.8"
1d01703dc3f7c696985d003c86dd691fda243ff9,Chris Barber,2023-07-03 16:46:29+00:00,GitHub,2023-07-03 16:46:29+00:00,"[cli] Added line return at end of help output (#10170)

I noticed the help output doesn't render a line return at the end.

<img width=""290"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/8aea6be0-9620-4445-b05d-62b838cefb07"">"
7021279b284f314a4d1bdbb4306b4c22291efa08,Andrew Healey,2023-07-03 15:42:16+00:00,GitHub,2023-07-03 15:42:16+00:00,"Revert ""[build-utils] Allow file-ref sema to be controlled through env flag"" (#10167)

Reverts vercel/vercel#8681

We ran an experiment here a while ago but it had flaky results.

This PR cleans up the experiment code, and reverts to the previous behavior."
28acf50bdf44d10228c643783ad0e4639af27017,Ethan Arrowood,2023-06-30 15:50:22+00:00,GitHub,2023-06-30 15:50:22+00:00,"Removes a leftover `console.log` in the new `help` method (#10162)

Removes a leftover `console.log` in the new `help` method. Whoops!"
718bbd365a50271a980bdca231ca801a0eead32b,Ethan Arrowood,2023-06-29 20:08:17+00:00,GitHub,2023-06-29 20:08:17+00:00,"Improve `help` output UX and DX (#10090)

This PR adds a new utility for generating `help` output for CLI
commands. Backed by a JSON data structure that represents the commands,
this utility uses deterministic functions for generating the different
output sections (such as `options` and `examples`). This change will let
contributor easily add/modify command details. The data structure is
also used by the CLI to generate the args parsing structure for the
`deploy` command. Optimistically, this same data structure can be used
to generate documentation output for `front` such that the online docs
will match the `help` output.

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
7e791ee080b517f500154d61ac7065b855a1521f,Steven,2023-06-28 22:30:49+00:00,GitHub,2023-06-28 22:30:49+00:00,"[cli] Remove `preinstall` script (#10157)

This will solve two of the warnings from [Socket.dev](https://socket.dev/npm/package/vercel):

<img width=""1126"" alt=""image"" src=""https://github.com/vercel/vercel/assets/229881/c890c973-4f5a-44d9-9b96-2580a1e40ed0"">

This preinstall script isn't necessary to run Vercel CLI, its only used to improve the error message in two cases:

- The system has `node` version prior to 14.x (3 years ago)
- The system still has `now` installed but should be using `vercel` (last shipped 3 years ago)

The usage of `preinstall` scripts have gone out of style due to security audits so we should remove this script now."
13769106cb1b2d2c72c3c6bbd750428b9dfc4249,Vercel Release Bot,2023-06-28 21:49:14+00:00,GitHub,2023-06-28 21:49:14+00:00,"Version Packages (#10156)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.0.1

### Patch Changes

- Updated dependencies
\[[`aa734efc6`](https://github.com/vercel/vercel/commit/aa734efc6c42badd4aa9bf64487904aa64e9bd49)]:
    -   @vercel/next@3.8.8

## @vercel/next@3.8.8

### Patch Changes

- [next] Ensure RSC paths handle basePath
([#10155](https://github.com/vercel/vercel/pull/10155))"
aa734efc6c42badd4aa9bf64487904aa64e9bd49,JJ Kasper,2023-06-28 21:00:43+00:00,GitHub,2023-06-28 21:00:43+00:00,"[next] Ensure RSC paths handle basePath (#10155)

This ensures we properly create the `.rsc` variant of outputs when `basePath` is configured and adds a regression test for this. 

x-ref: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1687944744404289)
Fixes: https://github.com/vercel/next.js/issues/48305"
acc10e47c7404d15e519ef793975492a5854088b,Vercel Release Bot,2023-06-28 19:29:31+00:00,GitHub,2023-06-28 19:29:31+00:00,"Version Packages (#10123)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@31.0.0

### Major Changes

- Update `vc dev` redirect response to match production behavior
([#10143](https://github.com/vercel/vercel/pull/10143))

### Patch Changes

- require `--yes` to promote preview deployment
([#10135](https://github.com/vercel/vercel/pull/10135))

- [cli] Optimize write build result for vc build
([#10154](https://github.com/vercel/vercel/pull/10154))

- Only show relevant Project matches in Project selector
([#10114](https://github.com/vercel/vercel/pull/10114))

- [cli] Fix error message when token is invalid
([#10131](https://github.com/vercel/vercel/pull/10131))

- Updated dependencies
\[[`e4895d979`](https://github.com/vercel/vercel/commit/e4895d979b57e369e0618481c5974243887d72cc),
[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c),
[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c),
[`a6de052ed`](https://github.com/vercel/vercel/commit/a6de052ed2f09cc80bf4c2d0f06bedd267a63cdc)]:
    -   @vercel/next@3.8.7
    -   @vercel/static-build@1.3.38
    -   @vercel/build-utils@6.8.0
    -   @vercel/remix-builder@1.8.15
    -   @vercel/node@2.15.3

## @vercel/build-utils@6.8.0

### Minor Changes

- Add `getNodeBinPaths()` and `traverseUpDirectories()` functions
([#10150](https://github.com/vercel/vercel/pull/10150))

## @vercel/client@12.6.3

### Patch Changes

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0

## @vercel/frameworks@1.4.3

### Patch Changes

- [frameworks] Update `saber.land` to `saber.egoist.dev`
([#10148](https://github.com/vercel/vercel/pull/10148))

## @vercel/fs-detectors@4.0.1

### Patch Changes

- Resolve symlinks in `LocalFileSystemDetector#readdir()`
([#10126](https://github.com/vercel/vercel/pull/10126))

- Updated dependencies
\[[`0867f11a6`](https://github.com/vercel/vercel/commit/0867f11a6a1086ef4f4701db2b98da8fcc299586)]:
    -   @vercel/frameworks@1.4.3

## @vercel/gatsby-plugin-vercel-builder@1.3.11

### Patch Changes

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0
    -   @vercel/node@2.15.3

## @vercel/next@3.8.7

### Patch Changes

- [next] Update payload flag
([#10147](https://github.com/vercel/vercel/pull/10147))

- Use `getNodeBinPaths()` function to improve monorepo support
([#10150](https://github.com/vercel/vercel/pull/10150))

## @vercel/node@2.15.3

### Patch Changes

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0

## @vercel/remix-builder@1.8.15

### Patch Changes

- Update `@remix-run/dev` fork to v1.18.0
([#10146](https://github.com/vercel/vercel/pull/10146))

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0

## @vercel/static-build@1.3.38

### Patch Changes

- Use `getNodeBinPaths()` function to improve monorepo support
([#10150](https://github.com/vercel/vercel/pull/10150))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.11

## @vercel-internals/constants@1.0.3

### Patch Changes

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0

## @vercel-internals/types@1.0.3

### Patch Changes

- Updated dependencies
\[[`346892210`](https://github.com/vercel/vercel/commit/3468922108f411482a72acd0331f0f2ee52a6d4c)]:
    -   @vercel/build-utils@6.8.0
    -   @vercel-internals/constants@1.0.3"
6a0e1e0b66715dd399d4f31463c9f01b47592781,JJ Kasper,2023-06-28 19:07:52+00:00,GitHub,2023-06-28 19:07:52+00:00,"[cli] Optimize write build result for vc build (#10154)

As noticed this is copying all fallback files from output even if they are already on the disk in the build container which should be able to be considered a ""pure"" environment. This copying can cause disk space/perf issues when there are massive amounts of fallback files generated e.g. 8000 outputs at 200KB/output is already 1.6GB of copying needing to be done that could just be a move operation. 


x-ref: [slack thread](https://vercel.slack.com/archives/C03F2CMNGKG/p1687969734598509?thread_ts=1687963253.178369&cid=C03F2CMNGKG)
x-ref: [slack thread](https://vercel.slack.com/archives/C02SM2K2UM9/p1687970267370669)
x-ref: [slack thread](https://vercel.slack.com/archives/C03DQ3QFV7C/p1687338157228459)"
3468922108f411482a72acd0331f0f2ee52a6d4c,Nathan Rajlich,2023-06-28 01:53:34+00:00,GitHub,2023-06-28 01:53:34+00:00,"[build-utils] Add `getNodeBinPaths()` function (#10150)

The `getNodeBinPath()` function is problematic because it assumes that commands are installed in the `node_modules` directory alongside the detected lockfile. This works fine the majority of the time, but ends up not being the case when using a monorepo that uses a package manager in ""linked"" mode (i.e. pnpm by default).

Consider the following:

```
.
 pnpm-lock.yaml
 node_modules
 blog
  node_modules
   hexo -> .pnpm/hexo@3.9.0/node_modules/hexo
```

In this setup, adding the root-level `node_modules/.bin` would not make the `hexo` command be visible in the `$PATH`.

To solve this issue, the new `getNodeBinPaths()` function returns an array of all directories up to the specified `root`, which can then be placed into the `$PATH`. It's also more efficient (synchronous) since it does not need to scan for a lockfile anymore (the `root` needs to be specified explicitly).

The new function is being used in `@vercel/next` and `@vercel/static-build`.

The `traverseUpDirectories()` function from CLI was moved to `build-utils` to implement this function. Consequently, that makes the implementations of `walkParentDirs()` and `walkParentDirsMulti()` simpler, since it's using this generator now."
e4895d979b57e369e0618481c5974243887d72cc,JJ Kasper,2023-06-27 23:34:21+00:00,GitHub,2023-06-27 23:34:21+00:00,"[next] Update payload flag (#10147)

x-ref: [slack thread](https://vercel.slack.com/archives/C05E6RJTPJS/p1687898295532579)"
733ff5ed85fe10aca1fabc90c9410399748fbf5c,Steven,2023-06-27 23:05:55+00:00,GitHub,2023-06-27 23:05:55+00:00,"[tests] Add `x-vercel-id` to test error message (#10149)

Including the `x-vercel-id` header when a e2e test fails will help us
debug issues"
0867f11a6a1086ef4f4701db2b98da8fcc299586,Steven,2023-06-27 22:23:27+00:00,GitHub,2023-06-27 22:23:27+00:00,"[frameworks] Update `saber.land` to `saber.egoist.dev` (#10148)

The website url for Saber changed

x-ref:
[slack](https://vercel.slack.com/archives/C01RUTYJYHW/p1687900208904799)"
a6de052ed2f09cc80bf4c2d0f06bedd267a63cdc,Vercel Release Bot,2023-06-27 17:32:46+00:00,GitHub,2023-06-27 17:32:46+00:00,"[remix] Update `@remix-run/dev` to v1.18.0 (#10146)

This auto-generated PR updates `@remix-run/dev` to version 1.18.0."
f5d48ec3bc0c87112229b3b39c04d7e19fd0b486,Michal De Boey,2023-06-26 23:52:24+00:00,GitHub,2023-06-26 23:52:24+00:00,"[examples] Update `remix` template (#9846)

Bring in line with latest template"
6ec11807985c221400dc0dab8ef2f19321b78747,Sean Massa,2023-06-26 21:43:48+00:00,GitHub,2023-06-26 21:43:48+00:00,"require `--yes` flag to promote preview deployment (#10135)

In order to promote a preview deployment, we want to make sure the user knows that this is not typical. Now the `--yes` flag is required to make this work."
36db62a491aa3155ebb286f0e533bd8edfc93670,Nathan Rajlich,2023-06-26 20:12:21+00:00,GitHub,2023-06-26 20:12:21+00:00,"Delete `.changeset/beige-carrots-begin.md` (#10144)

We don't want changesets to try and create a release / changelog for the
`examples` dir."
f9266e069fdea470863365239ead739c143a9846,Vercel Release Bot,2023-06-26 20:10:26+00:00,GitHub,2023-06-26 20:10:26+00:00,"[tests] Upgrade Turbo to version 1.10.6 (#10140)

This auto-generated PR updates Turbo to version 1.10.6"
8163a153dfdbe169a83f2fe933d8274d73d952ae,Nathan Rajlich,2023-06-26 19:41:35+00:00,GitHub,2023-06-26 19:41:35+00:00,"[cli] Respond with ""Redirecting..."" to match production behavior (#10143)

Production was recently changed to make redirect responses return the text ""Redirecting..."" without the destination nor status code in the text.

This caused some tests to start failing, so update `vc dev` to match this new behavior and update the relevant tests."
c5e6bd1a7a2bfd8deb2849181548bd4f1fa761ef,Steven,2023-06-23 16:14:23+00:00,GitHub,2023-06-23 16:14:23+00:00,"Delete lerna.json (#10133)

We no longer use lerna since switching to changesets so we can delete `lerna.json`

- See https://github.com/vercel/vercel/pull/9914"
c2f1bebd1f16b588cc65b6faba476b88781cfbd4,Steven,2023-06-23 15:18:58+00:00,GitHub,2023-06-23 15:18:58+00:00,"[cli] Fix error message when token is invalid (#10131)

This changes the error when a token is invalid or expired from

```
Error: Could not retrieve Project Settings. To link your Project, remove the `.vercel` directory and deploy again.
Learn More: https://vercel.link/cannot-load-project-settings
```

to a better error

```
Error: The specified token is not valid. Use `vercel login` to generate a new token.
```

- This could be considered a follow up to
https://github.com/vercel/vercel/pull/7794"
31384155338c130145a5368574d41a4257540e48,Nathan Rajlich,2023-06-22 18:19:28+00:00,GitHub,2023-06-22 18:19:28+00:00,"[fs-detectors] Resolve symlinks in `LocalFileSystemDetector#readdir()` (#10126)

`LocalFileSystemDetector#readdir()` was throwing an error when a symlink was encountered, due to `fs.readdir()` `withFileTypes: true` option performing an lstat instead of a stat operation.

So re-implement the `readdir()` logic to use `fs.stat()` so that the symlink is resolved (only ""dir"" and ""file"" types are expected in the result)."
8f6813bb63dd6904e419e7c171570f4c232b9026,Vercel Release Bot,2023-06-22 00:36:23+00:00,GitHub,2023-06-22 00:36:23+00:00,"[examples][tests] Upgrade Next.js to version 13.4.7 (#10125)

This auto-generated PR updates 3 packages to Next.js version 13.4.7"
734499fc03dc266c5a3bd7e186d9e8b1e624d30f,Nathan Rajlich,2023-06-21 17:22:21+00:00,GitHub,2023-06-21 17:22:21+00:00,"[cli] Only show relevant Project matches in Project selector (#10114)

When showing the Project selector and there's more than one Project matched given the current cwd, only show the matched Projects instead of all Projects listed in the `repo.json` file."
f06988d914f196bce38cf7c083927302e81a6dde,Nathan Rajlich,2023-06-20 18:09:40+00:00,GitHub,2023-06-20 18:09:40+00:00,"[cli] Add debug logging for repo link root lookup (#10112)

Adds some logging during the root directory resolving logic to help debug any cases where that lookup isn't behaving correctly."
71ac16220bdaa7ad36b7d0c5e53d2417b37f1554,Vercel Release Bot,2023-06-20 16:42:04+00:00,GitHub,2023-06-20 16:42:04+00:00,"Version Packages (#10107)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
8b3a4146af68d2b7288c80a5b919d832dba929b5,Kiko Beats,2023-06-20 09:06:43+00:00,GitHub,2023-06-20 09:06:43+00:00,"[node][edge][cli] upgrade Edge Runtime (#10051)

We avoided to use `undici.WebSocket` because @jawj found a bug in the
implementation.

The [fix was merged](https://github.com/nodejs/undici/pull/2106) in
[undici@5.22.1](https://github.com/nodejs/undici/releases/tag/v5.22.1),
so we can be back to use it.

The latest version of Edge Runtime exposes `undici.WebSocket` compatible
with node.js 14, 16 & 18

---------

Co-authored-by: Sean Massa <endangeredmassa@gmail.com>"
cfea31e6cff33c0a2dd3663025093fd9b8e7f1d8,Nathan Rajlich,2023-06-16 22:45:52+00:00,GitHub,2023-06-16 22:45:52+00:00,Remove `.changeset/curvy-stingrays-cheat.md` (#10115)
7090fec110d782c1b2552424de04810f0bd98306,Vercel Release Bot,2023-06-16 22:21:41+00:00,GitHub,2023-06-16 22:21:41+00:00,"[examples][tests] Upgrade Next.js to version 13.4.6 (#10111)

This auto-generated PR updates 3 packages to Next.js version 13.4.6"
bc7c80fb9b4188425e5456894ae3b5ad2c21371c,Sean Massa,2023-06-15 22:19:34+00:00,GitHub,2023-06-15 22:19:34+00:00,"[cli] do not force auto-assign value on deployments (#10110)

When `vc deploy` happens, it was forcing a `true`/`false` value for `autoAssignCustomDomains`. This overwrites the project setting in some cases, which is not what we want.

If a CLI command or API call explicitly wants to force `autoAssignCustomDomains` on or off, it can. Otherwise, the project setting value should be used.

This PR only sets `autoAssignCustomDomains` to `false` when the `--skip-domain` flag is passed. Otherwise, the value is `undefined` so that the project setting can take effect."
91406abdb0c332152fc6c7c1e4bd3a872b084434,Sean Massa,2023-06-15 17:31:47+00:00,GitHub,2023-06-15 17:31:47+00:00,[node] add tests to getBodyParser helper (#10109)
a5af8381ce962028fd92b16bdaccffcad6f1c559,Nathan Rajlich,2023-06-14 19:20:20+00:00,GitHub,2023-06-14 19:20:20+00:00,"[fs-detectors] Add `test-e2e` script (#10103)

Seems we have not been running the `fs-detectors` integration tests."
2230ea6cc1b84c1f03227a4e197b7684635b5955,Nathan Rajlich,2023-06-14 18:53:14+00:00,GitHub,2023-06-14 18:53:14+00:00,[remix] Link to `https://vercel.com/help` (#10106)
f057f0421b35b0ca09a96314b6cd57b58daa9dff,Vercel Release Bot,2023-06-14 17:47:10+00:00,GitHub,2023-06-14 17:47:10+00:00,Version Packages (#10081)
42c0b32a8d4ad1b1c88a318cbb247cd31c6e9521,Nathan Rajlich,2023-06-13 23:30:00+00:00,GitHub,2023-06-13 23:30:00+00:00,"[fs-detectors] Use `LocalFileSystemDetector` instead of `FixtureFilesystem` (#10100)

The code for these two are almost identical, so consolidate into one codebase.

Also adjusts the `pnpm test` script to allow for specifying a file name to be executed, instead of running all tests."
d61a1a79886f090c7f6fa06672115d6947d04cfc,Chris Barber,2023-06-12 16:32:01+00:00,GitHub,2023-06-12 16:32:01+00:00,"[cli] Fix team validation bug where you are apart of a team (#10092)

When consolidating the deployment team validation, a bug was introduced where the command would error if the user was currently using a team. The logic was meant to copy the logic in `getDeploymentByIdOrURL()`: https://github.com/vercel/vercel/blob/main/packages/cli/src/util/deploy/get-deployment-by-id-or-url.ts#L80."
c438bbb3628d72d1423b7869e6e08652392e8b4a,Vercel Release Bot,2023-06-12 15:02:47+00:00,GitHub,2023-06-12 15:02:47+00:00,"[examples][tests] Upgrade Next.js to version 13.4.5 (#10097)

This auto-generated PR updates 3 packages to Next.js version 13.4.5"
cb5eef0eb5e247b95969a5a66c957b9010bbe9bd,Vercel Release Bot,2023-06-11 07:44:11+00:00,GitHub,2023-06-11 07:44:11+00:00,"[tests] Upgrade Turbo to version 1.10.3 (#10096)

This auto-generated PR updates Turbo to version 1.10.3"
79dee367cfb7dfe9748ce1c3322f638ae836eb7e,Nathan Rajlich,2023-06-09 22:59:17+00:00,GitHub,2023-06-09 22:59:17+00:00,"[cli] Remove `findProjectFromPath()` (#10093)

Superceded by the `findProjectsFromPath()` function which may return multiple matches, and it was only being used in tests.

The relevant tests have been updated to use the multiple matches version instead, and updated to include the case where multiple matches are returned.

__Note:__ No changeset for this one since it's an internal function being removed, and doesn't need to be referenced in the public changelog."
dea58dea7e653e3140ef7159ff25e8abf26d0c79,Nathan Rajlich,2023-06-09 09:54:17+00:00,GitHub,2023-06-09 09:54:17+00:00,"[cli] Add support for `vc deploy --prebuilt` command with repo link (#10083)

When repo linked, `vc deploy --prebuilt` will change working directory to the Project root directory, instead of the repo root, so that the project's local `.vercel/output` directory is what gets uploaded + deployed."
fecebfa7fa696c4b451aec8ffd1b4c01026a94eb,Steven,2023-06-08 00:09:22+00:00,GitHub,2023-06-08 00:09:22+00:00,"[cli] vc env pull should add `.env*.local` to `.gitignore` (#10085)

This is a follow up to PR #9892 which changed the default to `.env.local`.

Now that we know local files should never be committed to git, we can automatically add `.env*.local` to `.gitignore`. Note that this is the same ignore pattern that ships with create-next-app [as seen here](https://github.com/vercel/next.js/blob/06abd634899095b6cc28e6e8315b1e8b9c8df939/packages/create-next-app/templates/app/js/gitignore#L28), so most Next.js users won't see anything change.

See the related [Linear ticket](https://linear.app/vercel/issue/VCCLI-461/)"
94d5612dcef3a2a40558a8a571daf7471f8a0dac,Nathan Rajlich,2023-06-07 21:33:47+00:00,GitHub,2023-06-07 21:33:47+00:00,"[cli] Move readme copy logic to a helper function for `vc link` (#10084)

ncc has an issue with detecting + rewriting this file path for some reason. Moving to a helper function should work around that issue.

Fixing:

```
Error: ENOENT: no such file or directory, open '/node_modules/vercel/projects/VERCEL_DIR_README.txt'
```"
3eaf58bb7417f4cad4e56961c7fc9e9b59802a97,Nathan Rajlich,2023-06-07 18:48:28+00:00,GitHub,2023-06-07 18:48:28+00:00,"[cli] Add support for `vc dev` command with repo link (#10082)

When repo linked, `vc dev` already works fine when run from the root of the repo. This change makes it so that `vc dev` also works as expected when executed within a project subdirectory."
e63cf401531f9759e981aacf036f32b1a3870025,Nathan Rajlich,2023-06-07 08:26:13+00:00,GitHub,2023-06-07 08:26:13+00:00,"[cli] Add support for `vc build` command with repo link (#10075)

When the repo is linked to Vercel with `vc link --repo`, the `vc build` command should be invoked from the project subdirectory (otherwise the project selector is displayed). The output directory is at `<projectRoot>/.vercel/output` instead of at the repo root."
709c9509f4c5ee9b1621c4d83fbf6d0b36a4a8e7,Sean Massa,2023-06-07 07:49:45+00:00,GitHub,2023-06-07 07:49:45+00:00,"Revert ""Revert ""[cli] Add support for `vc pull` command with repo link"""" (#10078)

Reverts vercel/vercel#10076

Restores the original PR: https://github.com/vercel/vercel/pull/10071

With the fix from: https://github.com/vercel/vercel/pull/10073"
6107c1ed22449c6cde4aebaccc463ffcb6442bcc,Nathan Rajlich,2023-06-07 06:27:39+00:00,GitHub,2023-06-07 06:27:39+00:00,"Disable ""Enforce Changeset"" job for release PRs (#10080)

This job leads to a false-positive for the release PR, so disable it."
7a0f377afe121c1be0190d4467e3b7216aaedbd8,Vercel Release Bot,2023-06-07 06:23:29+00:00,GitHub,2023-06-07 06:23:29+00:00,"Version Packages (#10074)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
a04bf557fc6e1080a117428977d0993dec78b004,Sean Massa,2023-06-07 06:20:19+00:00,GitHub,2023-06-07 06:20:19+00:00,"handle undefined content type in `vc dev` (#10077)

When no content type header is sent to an API request during `vc dev`, the request fails:

```
/Users/smassa/source/vercel/vercel-2/node_modules/.pnpm/content-type@1.0.4/node_modules/content-type/index.js:108
    throw new TypeError('argument string is required')
          ^
TypeError: argument string is required
...
```

This comes from some runtime type validation happening in the `content-type` package, for which we do not have types, which is why typescript didn't catch this."
b6736e82cfdee6ef1e5fe2263dedb2d11a3cf707,Sean Massa,2023-06-07 05:46:21+00:00,GitHub,2023-06-07 05:46:21+00:00,Clear revert out of changelog (#10079)
7923056bc023f1ea9aced038b63b0ac755dd7206,Sean Massa,2023-06-07 05:35:12+00:00,GitHub,2023-06-07 05:35:12+00:00,"Revert ""[cli] Add support for `vc pull` command with repo link"" (#10076)"
71ff193ea3c9971970e2f410e4434763e5a16963,Nathan Rajlich,2023-06-06 22:01:37+00:00,GitHub,2023-06-06 22:01:37+00:00,"[cli] Add support for `vc pull` command with repo link (#10071)

When the repo is linked to Vercel with `vc link --repo`, the `.vercel` directory will be created at the _project root_ instead of the _repo root_, and will still contain the `project.json`.

The difference is that the `orgId` and `projectId` props will not be present in the `project.json` file when repo linked, since that information is available at the root level `repo.json` file."
c21d93de4421d9780edf8a6c25da1ee8aebe3820,Vercel Release Bot,2023-06-06 21:34:04+00:00,GitHub,2023-06-06 21:34:04+00:00,"Version Packages (#10062)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
0039c8b5cea975316a62c4f6aaca5d66d731cc0d,Kiko Beats,2023-06-06 21:15:10+00:00,GitHub,2023-06-06 21:15:10+00:00,"[node] Add isomorphic functions (#9947)

This PR allow using Web APIs in Serverless functions

```js
// api/serverless.js
export const GET = () => {
  return new Response(`new Response(' Hello from Serverless Web!)`)
}
```

More about that
https://nextjs.org/docs/app/building-your-application/routing/router-handlers

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
49c7178567ec5bcebe633b598c8c9c0e1aa40fbb,Vercel Release Bot,2023-06-06 20:31:48+00:00,GitHub,2023-06-06 20:31:48+00:00,"[remix] Update `@remix-run/dev` to v1.17.0 (#10072)

This auto-generated PR updates `@remix-run/dev` to version 1.17.0."
b038b29614585670b476bb12721af68ec7373c4d,Ethan Arrowood,2023-06-06 00:52:38+00:00,GitHub,2023-06-06 00:52:38+00:00,"Add vercel.json setting overrides to storybook example for zero-config experience (#10067)

This PR adds necessary configuration overrides to the storybook example so that it can have a zero-config experience."
7a249a22845324eb1ebcee4ef0c5a680b536c544,Nathan Rajlich,2023-06-05 22:44:40+00:00,GitHub,2023-06-05 22:44:40+00:00,"Enforce a changeset file to be present (#10065)

Based off of these setup instructions:

https://github.com/changesets/changesets/blob/main/docs/automating-changesets.md#blocking

If a commit should really not publish a release, you can run `changeset
--empty`."
a5e32ec31d2518a95031e94b196e38015366ceab,Nathan Rajlich,2023-06-05 17:06:57+00:00,GitHub,2023-06-05 17:06:57+00:00,"[cli] Add `client.fetchPaginated()` async iterator (#10054)

Adds async iterator helper function for interacting with endpoints that have pagination.

Implemented for use with `vc bisect` (fetching deployments) and `vc link --repo` (fetching projects)."
bc5afe24c4547dbf798b939199e8212c4b34038e,Florentin / ,2023-06-05 08:05:53+00:00,GitHub,2023-06-05 08:05:53+00:00,"[node] add `maxDuration` config support for vc node deployments (#10028)

This PR enables specifying `maxDuration` in `config` for node vc
deployments.

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
5070e3bbbdb7a7a18b94138baa2ebb9dd43358a4,Vercel Release Bot,2023-06-05 03:57:56+00:00,GitHub,2023-06-05 03:57:56+00:00,"[tests] Upgrade Turbo to version 1.10.1 (#10059)

This auto-generated PR updates Turbo to version 1.10.1"
4ad1cbbd7d488fd8d1bcadc54ff64c47aeffbbad,Vercel Release Bot,2023-06-03 00:29:17+00:00,GitHub,2023-06-03 00:29:17+00:00,"Version Packages (#10058)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
4f4e09477da3fbb8754ad14ade6a76549acabfeb,Chris Barber,2023-06-03 00:24:32+00:00,GitHub,2023-06-03 00:24:32+00:00,Attempting to publish build-utils and vercel (#10057)
cd35071f609d615d47bc04634c123b33768436cb,Chris Barber,2023-06-03 00:22:22+00:00,GitHub,2023-06-03 00:22:22+00:00,Attempting to publish build-utils and vercel (#10057)
f373c94508f70c4a7dbac7a7128474c5ba4114e9,Vercel Release Bot,2023-06-02 21:28:57+00:00,GitHub,2023-06-02 21:28:57+00:00,"Version Packages (#10055)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
553c001eb03ed01308963ba74628a45d64874b5f,Chris Barber,2023-06-02 21:04:03+00:00,GitHub,2023-06-02 21:04:03+00:00,"[cli] `vc build` ignore `.env*` & ignore files for `@vercel/static` (#10056)

For projects with static files only (e.g. `@vercel/static` builder), do not copy`.env*`, `.vercelignore`, or `.nowignore` into the BOA output dir."
f6c3a9578374fdc6b1aeb6f5ad81bfe412eb26f8,Chris Barber,2023-06-02 15:27:28+00:00,GitHub,2023-06-02 15:27:28+00:00,"[cli] Ensure .npmrc does not contain use-node-version (#10049)

When a project has a `.npmrc` containing `use-node-version`, package managers (notably `pnpm`) will download the specified Node.js version. This is not the correct way as it can lead to `pnpm` downloading Node.js 18 or newer which depends on a version of GLIBC that is not present in the current AWS image. The proper way is to set the `""engines""` in the `package.json`.

<img width=""468"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/0974cf05-6a11-4d95-88e8-13affc4aad2a"">

Discussion: https://github.com/orgs/vercel/discussions/2436"
c0bcef0ca4a36d07ec3315961e99a0eb24ad2fcb,Sean Massa,2023-06-01 17:07:18+00:00,GitHub,2023-06-01 17:07:18+00:00,Update CODEOWNERS for `.changeset/` (#10053)
4cd77608e883f4f8eec91c612d0787f48ac8aa9d,Vercel Release Bot,2023-06-01 15:09:24+00:00,GitHub,2023-06-01 15:09:24+00:00,"Version Packages (#10020)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
e6b2980ebaac2a4eb2ef678d85ce4e83ec7cc78f,Steven,2023-05-31 22:24:54+00:00,GitHub,2023-05-31 22:24:54+00:00,"[tests] Fix summary workflow to always run (#10048)

### Description
This ensures the Summary job always runs to check if any test failed and
cause itself to fail as well.

This allows us to dynamically add as many concurrent jobs as we want but
only have one (Summary) marked as required.

### Testing
I verified this worked by making a change to `@vercel/static-config`
which is not required and the Summary check failed:

https://github.com/vercel/vercel/actions/runs/5136560652/jobs/9243924596

Then I reverted it so that the test was passing and the Summary check
passed:

https://github.com/vercel/vercel/actions/runs/5137401343/jobs/9245554297"
67e20a6ede34cb7372cb2158788d47b89e2f9194,Nathan Rajlich,2023-05-31 18:07:30+00:00,GitHub,2023-05-31 18:07:30+00:00,"[cli] Add repo linking support for `deploy` command (#10013)

Adds support for `vercel deploy` command when the repository has been linked via `vercel link --repo`."
c63679ea0a6bc48c0759ccf3c0c0a8106bd324f0,JJ Kasper,2023-05-31 15:38:22+00:00,GitHub,2023-05-31 15:38:22+00:00,"Revert ""[next] Update rsc content-type test fixtures"" (#10040)

Relies on https://github.com/vercel/next.js/pull/50472 this should only be merged after the Next.js PR is released to canary

Reverts vercel/vercel#10023"
4280166df45bcab971856be47c2f5a735e295d7e,Damien Simonin Feugas,2023-05-31 07:41:46+00:00,GitHub,2023-05-31 07:41:46+00:00,docs(sveltekit): re-introduce speed insights (#9988)
18ae78137cf5a8044beca3f1b4307f7540ee45b6,Nathan Rajlich,2023-05-30 21:10:03+00:00,GitHub,2023-05-30 21:10:03+00:00,"Fetch git tags during Release workflow (#10045)

Follow-up to #10044. The git tags need to be present for `changeset tag` to work properly."
ebe40580731cc7d46822642cfcc7e387644cf1dc,Nathan Rajlich,2023-05-30 19:25:24+00:00,GitHub,2023-05-30 19:25:24+00:00,"Use `pnpm publish -r` and `changeset tag` to publish packages (#10044)

This is a re-application of #10022 (which was reverted in #10032), but with the addition of `changeset tag` after the `pnpm publish -r` command. This ensures the proper git tags are also created, allowing for the GitHub releases to be published."
942e76840e3dc85bb0fcfff31e90f8e9fc46599c,Vercel Release Bot,2023-05-29 20:31:12+00:00,GitHub,2023-05-29 20:31:12+00:00,"[tests] Upgrade Turbo to version 1.9.9 (#10036)

This auto-generated PR updates Turbo to version 1.9.9"
57515d2d07dc63809dfc25017ebec4b760ccf559,Nathan Rajlich,2023-05-26 21:27:19+00:00,GitHub,2023-05-26 21:27:19+00:00,"[cli] Fix `link` subcommand unit tests on Windows (#10033)

Follow-up to #10031 which broke the `link` unit tests on Windows.

For some reason Kodiak was a bad bot and merged the PR with failing tests <picture data-single-emoji="":rarityannoyed:"" title="":rarityannoyed:""><img class=""emoji"" src=""https://emoji.slack-edge.com/T0CAQ00TU/rarityannoyed/b62f8c87a5fb7239.png"" alt="":rarityannoyed:"" width=""20"" height=""auto"" align=""absmiddle""></picture> 

_Note:_ Probably easier to review with [whitespace hidden](https://github.com/vercel/vercel/pull/10033/files?w=1)."
ef30a46c037adfdf31cdd1e10642130ad41ae8ea,Nathan Rajlich,2023-05-26 20:42:03+00:00,GitHub,2023-05-26 20:42:03+00:00,"[cli] Add `client.cwd` to unify all working directory related logic (#10031)

A few commands were still checking on `--cwd` explicitly, which is incorrect since the entrypoint file already handles the directory change.

The new `client.cwd` property is a helper to make writing tests easier. Tests no longer need to `chdir()` explicitly and then revert afterwards."
113b8ac87b89ef2e14a0fbdad9293cf5048aca99,Nathan Rajlich,2023-05-26 20:18:49+00:00,GitHub,2023-05-26 20:18:49+00:00,"Revert ""Use `pnpm publish -r` to publish packages (#10022)"" (#10032)

This reverts commit 1e47bbf32f21262c0d85fa0c1fe89cf59b67cd4c.

`changeset publish` also creates git tags, whereas `pnpm publish -r` does not. This causes the GitHub Releases to not be created."
b56ac2717d6769eb400f9746f0a05431929b4501,Shohei Maeda,2023-05-26 18:01:05+00:00,GitHub,2023-05-26 18:01:05+00:00,"[next] Pass `pageExtensions` data to `apiLambdaGroups` (#10015)

Right now, we can't detect API routes correctly if `pageExtensions` is set:

> WARNING: Unable to find source file for page xxxx with extensions: js, jsx, ts, tsx, this can cause functions config from `vercel.json` to not be applied"
aa8957ab104bfffa7e937bb356b4d393d9b62c7b,Vercel Release Bot,2023-05-26 14:54:42+00:00,GitHub,2023-05-26 14:54:42+00:00,"[examples][tests] Upgrade Next.js to version 13.4.4 (#10025)

This auto-generated PR updates 3 packages to Next.js version 13.4.4"
c6c19354e852cfc1338b223058c4b07fdc71c723,Shohei Maeda,2023-05-25 21:01:29+00:00,GitHub,2023-05-25 21:01:29+00:00,"[next] Fix `functions` config with App Router (#9889)

We added appDir support in https://github.com/vercel/vercel/pull/9811 so that users can customize `memory`/`maxDuration` for routes in appDir.

But since RSC is enabled by default in Next.js 13, `vercel build` still reports some warning messages, such as:

```json
""functions"": {
  ""app/**/*"": {
    ""maxDuration"": 5,
    ""memory"": 512
  }
}
```
```
WARNING: Unable to find source file for page hello.js with extensions: ts, tsx, js, jsx, md, mdx, this can cause functions config from `vercel.json` to not be applied
WARNING: Unable to find source file for page index.js with extensions: ts, tsx, js, jsx, md, mdx, this can cause functions config from `vercel.json` to not be applied
```

To suppress these errors and properly apply `functions` setting to those routes, updating the current detection logic to also search `page.${ext}` files."
96b2502133b36e060ce47ded9d7a74b70e63b8df,JJ Kasper,2023-05-25 08:32:53+00:00,GitHub,2023-05-25 08:32:53+00:00,"[next] Update rsc content-type test fixtures (#10023)

This updates the tests to the latest expected content-type header for RSC responses. 

x-ref: https://github.com/vercel/next.js/pull/50314"
2df0262675f2db6c70d622f213103169bc6704e6,Swarnava Sengupta,2023-05-24 22:06:01+00:00,GitHub,2023-05-24 22:06:01+00:00,[examples] Update `preact` template to use Node 18 (#10012)
1e47bbf32f21262c0d85fa0c1fe89cf59b67cd4c,Nathan Rajlich,2023-05-24 21:56:45+00:00,GitHub,2023-05-24 21:56:45+00:00,"Use `pnpm publish -r` to publish packages (#10022)

Following the instructions here: https://pnpm.io/using-changesets

This should ensure that packages are published in the correct order (see related issue: https://github.com/changesets/changesets/issues/238)."
00813a3945fa5c79e3f517f87f3bce204e27fd86,Nathan Rajlich,2023-05-24 21:35:33+00:00,GitHub,2023-05-24 21:35:33+00:00,"[cli] Add `expect` dev dependency to fix type error in `toOutput` (#10021)

Also make the timeout print what was buffered to help with debugging failed tests."
a73ec6343f9b80f9149272724da750c851cb473a,Chris Barber,2023-05-24 19:10:28+00:00,GitHub,2023-05-24 19:10:28+00:00,"[cli] Clean up 'vc rollback' (#10019)

This PR removes dependency on the deprecated `lastRollbackTarget` project property and adopts many of the code conventions used in `vc promote`.

Important! Please merge #9984 first!"
4bd70d4b6e475249d67445286bdbcd77ceb32adc,Chris Barber,2023-05-24 17:22:11+00:00,GitHub,2023-05-24 17:22:11+00:00,"[cli] New `vc promote` command (#9984)

~This PR is blocked by https://github.com/vercel/api/pull/19508.~

Linear: https://linear.app/vercel/issue/VCCLI-262/cli-new-command-to-promote-deployment"
c7bcea408131df2d65338e50ce319a6d8e4a8a82,Javi Velasco,2023-05-24 16:22:43+00:00,GitHub,2023-05-24 16:22:43+00:00,"Remove usage of `env` from Edge Functions and Middleware (#10018)

Co-authored-by: Steven <steven@ceriously.com>"
aab95532d66760d9e70187b3182944afcf967518,Vercel Release Bot,2023-05-24 15:13:01+00:00,GitHub,2023-05-24 15:13:01+00:00,"Version Packages (#10006)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
1b18c853c26af72ebae493a996bc9be6e0ab0efd,Sean Massa,2023-05-23 19:26:47+00:00,GitHub,2023-05-23 19:26:47+00:00,"[cli] implement `vc deploy --prod --skip-domain` (#9836)

Adds the `--skip-domain` option to be used like `vc deploy --prod --skip-domain`. This passes along the `autoAliasCustomDomains: false` flag to the API so that the deployment will not auto alias domains for this deployment.

This PR also moves the `commands/deploy/archive` fixture to `commands/deploy/static` to better describe what the fixture is, not how it is sometimes used in a test.

---

Depends on: https://github.com/vercel/api/pull/18730
Card: https://linear.app/vercel/issue/VCCLI-276/cli-allow-creation-of-production-deployment-without-auto-alias"
1663db7ca34d3dd99b57994f801fb30b72fbd2f3,Swarnava Sengupta,2023-05-23 18:29:14+00:00,GitHub,2023-05-23 18:29:14+00:00,[examples] Update `solid-js` template to use Node 18 (#10009)
e80247fb992452ef49b6e86555443b8a348a2df5,Nathan Rajlich,2023-05-23 15:01:18+00:00,GitHub,2023-05-23 15:01:18+00:00,"Update to latest version of `patrickedqvist/wait-for-vercel-preview` (#10008)

The older version we were using is using Node 12, and GH Actions prints this warning:

> Node.js 12 actions are deprecated. Please update the following actions to use Node.js 16: patrickedqvist/wait-for-vercel-preview@ae34b392ef30297f2b672f9afb3c329bde9bd487. For more information see: https://github.blog/changelog/2022-09-22-github-actions-all-actions-will-begin-running-on-node16-instead-of-node12/.

The current version of this action uses Node 16."
a19edc985b8832b72fa72bf18fa4216d3ca51783,Samuel Bodin,2023-05-23 02:50:42+00:00,GitHub,2023-05-23 02:50:42+00:00,"[cli] Fix `vercel git connect` command when passing a URL parameter (#9967)

Hey team,

I had an error this morning when trying to link my repo using the CLI 
![Screenshot 2023-05-17 at 11 38 01](https://github.com/vercel/vercel/assets/1637651/798d6e4f-8c9e-41b7-b712-0322001fca02)


Seems like a combination of `: any` and a recent refacto introduced an issue here.

~- Removed all `any` that were hiding the error~
- Correctly pass the URL already parsed

~- Removed the second useless parsing~
~- Added missing `--help` flag~
  ~I noticed you never specify them and Typescript screams because of that, not sure if on purpose and how you make the compilation pass with this error. Don't hesitate to tell me.~

The fix could be improved by using `arg.Result<THE_ACTUAL_TYPE>` but that would require to store the dictionnary of flags somewhere else and also create an external type. This is already better so...

--- 

NB: 
I had multiple issues while cloning this repo
- pnpm bootstrap does not work
- missing `constants.ts` file that is not explained in the Contributing guidelines
- maybe due to bootstrap not working, almost nothing else worked and the tests too."
4fd593ac09fefc8aaed2bb14d8bfde818dc52c7a,Nathan Rajlich,2023-05-22 22:26:36+00:00,GitHub,2023-05-22 22:26:36+00:00,"Sync repo package versions (#10002)

Some of these packages got out of sync at some point, causing duplicate
/ older copies to be installed. Additionally, the `@vercel-internal`
packages should have ""version"" fields.

Attempting to fix these
[warnings](https://github.com/vercel/vercel/actions/runs/5048844603/jobs/9057538600)
during release:

```
Package ""examples"" must depend on the current version of ""@vercel/frameworks"": ""1.4.2"" vs ""1.3.0""
Package ""@vercel-internals/constants"" must depend on the current version of ""@vercel/build-utils"": ""6.7.3"" vs ""6.3.2""
Package ""@vercel-internals/constants"" must depend on the current version of ""@vercel/routing-utils"": ""2.2.1"" vs ""2.1.10""
Package ""@vercel-internals/constants"" must depend on the current version of ""@vercel-internals/tsconfig"": ""undefined"" vs ""*""
Package ""@vercel-internals/get-package-json"" must depend on the current version of ""@vercel-internals/tsconfig"": ""undefined"" vs ""*""
Package ""@vercel-internals/types"" must depend on the current version of ""@vercel-internals/constants"": ""undefined"" vs ""*""
Package ""@vercel-internals/types"" must depend on the current version of ""@vercel/build-utils"": ""6.7.3"" vs ""6.3.2""
Package ""@vercel-internals/types"" must depend on the current version of ""@vercel/routing-utils"": ""2.2.1"" vs ""2.1.10""
Package ""@vercel-internals/types"" must depend on the current version of ""@vercel-internals/tsconfig"": ""undefined"" vs ""*""
Package ""vercel"" must depend on the current version of ""@vercel-internals/constants"": ""undefined"" vs ""*""
Package ""vercel"" must depend on the current version of ""@vercel-internals/get-package-json"": ""undefined"" vs ""*""
Package ""vercel"" must depend on the current version of ""@vercel-internals/types"": ""undefined"" vs ""*""
Package ""@vercel/node"" must depend on the current version of ""@vercel/error-utils"": ""1.0.10"" vs ""1.0.8""
```"
1b0d72aba50c4cb1cfe2298cac6d66e82c439b09,Dan Stowell,2023-05-22 22:24:38+00:00,GitHub,2023-05-22 22:24:38+00:00,"[cli] Change `vc env pull` default output file to `.env.local` (#9892)

`vc deploy` ignores `.env.local`. To make sure we don't inadvertently
push people's secrets to source control, have all environment pulls
default to writing to `.env.local`."
c52a59809e30be9769ef6a2805465bd9682f1afe,Nathan Rajlich,2023-05-22 22:16:47+00:00,GitHub,2023-05-22 22:16:47+00:00,"Remove `pnpm bootstrap` from contributing instructions (#10005)

This script no longer exists."
cdf55b3b1a5fff91241971054ea172c0a95f8c2a,Chris Barber,2023-05-22 22:08:49+00:00,GitHub,2023-05-22 22:08:49+00:00,"[cli] New `vc redeploy` command (#9956)

This adds a new `vc redeploy <url-or-id>` command. It fetches the requested deployment, then performs a redeploy with similar output to `vc deploy` including the ability to pipe the deployment URL into a file or program.

### Redeploy Example:

<img width=""650"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/b17fc424-558b-415c-8b74-63e450f4b753"">

### Bad deployment URL:

<img width=""579"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/0cb53209-396e-4490-b5d0-744d5d870aaf"">

### No args:

<img width=""622"" alt=""image"" src=""https://github.com/vercel/vercel/assets/97262/cb36d625-991b-41fa-bb49-d7d36c1a201b"">

Linear: https://linear.app/vercel/issue/VCCLI-558/cli-new-command-to-redeploy"
8de42e0a70f7c3a5fda5c671e9489c1f5add7376,Nathan Rajlich,2023-05-22 21:44:52+00:00,GitHub,2023-05-22 21:44:52+00:00,"[cli] Remove `--platform-version` global common arg (#9807)

Removes the unused `--platform-version` flag from the common args.

Technically this is a breaking change, so we should probably hold off on merging until we plan to do a major version bump."
7ff321310f5d8d2224947a87ddfe2125b7abf5f3,Swarnava Sengupta,2023-05-22 18:56:21+00:00,GitHub,2023-05-22 18:56:21+00:00,"[examples] Update ""vue"" template to use Node 18 (#10001)"
2da72bc5e4ff76157519ff7c27ce51799f4c4e9f,Nathan Rajlich,2023-05-22 18:49:51+00:00,GitHub,2023-05-22 18:49:51+00:00,"Fix promoting CLI release to ""latest"" GH Release (#10003)

The logic to retrieve the latest release was not working correctly, so use the `getLatestRelease()` function instead of assuming that `release[0]` is tagged as the latest."
46950633f417299b1c6525bbc32291900db41a36,Vercel Release Bot,2023-05-22 17:47:47+00:00,GitHub,2023-05-22 17:47:47+00:00,Version Packages (#9994)
44b1dfe7c522454daa55614d0df38782bdbb9bb7,Vercel Release Bot,2023-05-22 08:50:23+00:00,GitHub,2023-05-22 08:50:23+00:00,"[tests] Upgrade Turbo to version 1.9.8 (#9996)

This auto-generated PR updates Turbo to version 1.9.8"
0278c7b7b955fd318cd84a2d9cebc543501e86f2,Vercel Release Bot,2023-05-19 21:08:38+00:00,GitHub,2023-05-19 21:08:38+00:00,"[examples] Upgrade Next.js to version 13.4.3 (#9980)

This auto-generated PR updates Next.js to version 13.4.3"
761db597be6acadb49a01fa74412562ec738ee20,Sean Massa,2023-05-19 19:31:32+00:00,GitHub,2023-05-19 19:31:32+00:00,"clarify next.js dupe api directory warning (#9979)

In a Next.js app, if you have Node.js Functions in both `api` and `pages/api`, you'll get a warning about moving those `api` functions into `pages/api`. This does specify Node.js Functions already, but a user was confused and tried to move their non-Node.js functions into `pages/api` as well.

This PR tries to make it clearer that you can do both. Note that this still requires a non-ideal local dev setup where you:

- update next config to fall back to the `vc dev` port for `api` handlers
- run `next dev` for the Next.js app on one port
- run `vc dev` for the top-level `api` Functions on another port

---

Example repo: https://github.com/rexfordessilfie/vercel-api-languages"
671e63e7b8acf2668bddb9869a851b2204be3b6a,Nathan Rajlich,2023-05-19 18:53:49+00:00,GitHub,2023-05-19 18:53:49+00:00,"[cli] Add `vc link --repo` flag (alpha) (#8931)

Adding a new `--repo` flag to `vc link` which is a new linking style to
link to a Git URL rather then directly to a single Vercel Project. This
allows for multiple Projects to be linked simultaneously, which is
useful for monorepo setups.

Utilization of this new linking style in other commands will be done in
a follow-up PR."
f7bdc6cc26c14857317086df0a8ab5109b2cb288,Vercel Release Bot,2023-05-19 17:08:50+00:00,GitHub,2023-05-19 17:08:50+00:00,"Version Packages (#9991)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
e94a153b2f4d9f23bf74241a62a06fe9996a7b07,Sean Massa,2023-05-19 17:02:12+00:00,GitHub,2023-05-19 17:02:12+00:00,add repo details for packages that are missing it (#9990)
74e639a772cae7a36d6119ca51f0e9a1d51787dc,Vercel Release Bot,2023-05-19 16:34:26+00:00,GitHub,2023-05-19 16:34:26+00:00,"Version Packages (#9978)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## @vercel/build-utils@6.7.3

### Patch Changes

- Deprecate Node.js 14.x and 16.x with warning
([#9976](https://github.com/vercel/vercel/pull/9976))

## vercel@29.3.5

### Patch Changes

- Updated dependencies
\[[`2c950d47a`](https://github.com/vercel/vercel/commit/2c950d47aeb22a3de16f983259ea6f37a4555189),
[`71b9f3a94`](https://github.com/vercel/vercel/commit/71b9f3a94b7922607f8f24bf7b2bd1742e62cc05),
[`f00b08a82`](https://github.com/vercel/vercel/commit/f00b08a82085c3a63059f34f67f10ced92f2979c)]:
    -   @vercel/static-build@1.3.31
    -   @vercel/build-utils@6.7.3
    -   @vercel/next@3.8.5
    -   @vercel/node@2.14.3
    -   @vercel/remix-builder@1.8.10

## @vercel/client@12.5.1

### Patch Changes

- Updated dependencies
\[[`71b9f3a94`](https://github.com/vercel/vercel/commit/71b9f3a94b7922607f8f24bf7b2bd1742e62cc05)]:
    -   @vercel/build-utils@6.7.3

## @vercel/gatsby-plugin-vercel-builder@1.3.4

### Patch Changes

- Updated dependencies
\[[`71b9f3a94`](https://github.com/vercel/vercel/commit/71b9f3a94b7922607f8f24bf7b2bd1742e62cc05)]:
    -   @vercel/build-utils@6.7.3
    -   @vercel/node@2.14.3

## @vercel/next@3.8.5

### Patch Changes

- [next] Ensure app functions are detected/separated properly
([#9989](https://github.com/vercel/vercel/pull/9989))

## @vercel/node@2.14.3

### Patch Changes

- Updated dependencies
\[[`71b9f3a94`](https://github.com/vercel/vercel/commit/71b9f3a94b7922607f8f24bf7b2bd1742e62cc05)]:
    -   @vercel/build-utils@6.7.3

## @vercel/remix-builder@1.8.10

### Patch Changes

- Updated dependencies
\[[`71b9f3a94`](https://github.com/vercel/vercel/commit/71b9f3a94b7922607f8f24bf7b2bd1742e62cc05)]:
    -   @vercel/build-utils@6.7.3

## @vercel/static-build@1.3.31

### Patch Changes

- ensure cleanup after gatsby plugin runs
([#9975](https://github.com/vercel/vercel/pull/9975))

-   Updated dependencies \[]:
    -   @vercel/gatsby-plugin-vercel-builder@1.3.4

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
f00b08a82085c3a63059f34f67f10ced92f2979c,JJ Kasper,2023-05-19 16:22:44+00:00,GitHub,2023-05-19 16:22:44+00:00,"[next] Ensure app functions are detected/separated properly (#9989)

Follow-up to https://github.com/vercel/vercel/pull/9974 this uses the `lambdaAppPaths` as the source of truth instead of the manifest which is more accurate for separating/detecting. Also adds additional test cases for new root and index app functions. 

x-ref: https://github.com/vercel/next.js/issues/49169"
6cdd38d130c068f498837d33004142f6a96a892e,Chris Barber,2023-05-19 14:06:08+00:00,GitHub,2023-05-19 14:06:08+00:00,"[tests] Pin Next.js version in test fixtures (#9910)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
2c950d47aeb22a3de16f983259ea6f37a4555189,Sean Massa,2023-05-18 19:42:08+00:00,GitHub,2023-05-18 19:42:08+00:00,"ensure cleanup after the gatsby plugin runs (#9975)

There is an issue where you can interrupt a gatsby project build and the temporary files are not cleaned up. If you try to build again, it will get stuck in an infinite loop.

This PR adds an exit hook to make sure the cleanup happens."
71b9f3a94b7922607f8f24bf7b2bd1742e62cc05,Sean Massa,2023-05-18 19:03:01+00:00,GitHub,2023-05-18 19:03:01+00:00,"Deprecate Node.js 14.x and 16.x with warning (#9976)

Node.js 14 and 16 are being deprecated. This PR will cause a warning when they are used today and an error after August 15."
91b7f6dcd90ecec469b537f5fc358d579262fe52,Vercel Release Bot,2023-05-18 17:38:24+00:00,GitHub,2023-05-18 17:38:24+00:00,"Version Packages (#9973)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@29.3.4

### Patch Changes

- Updated dependencies
\[[`67e556bc8`](https://github.com/vercel/vercel/commit/67e556bc80c821c233120a2ec1611adb8e195baa),
[`ba10fb4dd`](https://github.com/vercel/vercel/commit/ba10fb4dd4155a75df79b98a0c43a6c42eac7b62)]:
    -   @vercel/remix-builder@1.8.9
    -   @vercel/next@3.8.4

## @vercel/next@3.8.4

### Patch Changes

- Update handling for react prebundled flag
([#9974](https://github.com/vercel/vercel/pull/9974))

## @vercel/remix-builder@1.8.9

### Patch Changes

- Upgrade `@remix-run/dev` fork to v1.16.1
([#9971](https://github.com/vercel/vercel/pull/9971))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
ba10fb4dd4155a75df79b98a0c43a6c42eac7b62,JJ Kasper,2023-05-18 13:37:50+00:00,GitHub,2023-05-18 13:37:50+00:00,"[next] Update handling for react prebundled flag (#9974)

This ensures we properly set the prebundled react flag conditionally for
app and pages ensuring they are kept separate when bundling.

x-ref: https://github.com/vercel/next.js/issues/49169"
18c1c45ce30f181079ff8a947f5fa6db5e370dd8,Nathan Rajlich,2023-05-17 23:39:09+00:00,GitHub,2023-05-17 23:39:09+00:00,"Add changeset for `@remix-run/dev` updater GH Action (#9972)

Adds a changeset file when the GH Action to update `@remix-run/dev`
creates a pull request."
67e556bc80c821c233120a2ec1611adb8e195baa,Vercel Release Bot,2023-05-17 19:34:12+00:00,GitHub,2023-05-17 19:34:12+00:00,"[remix] Upgrade @remix-run/dev to version 1.16.1 (#9971)

This auto-generated PR updates @remix-run/dev to version 1.16.1"
7235000181d198f7793229d69bc7e8f31da5bbc9,Sean Massa,2023-05-17 18:26:30+00:00,GitHub,2023-05-17 18:26:30+00:00,"fix release script (#9959)

The [previous PR](https://github.com/vercel/vercel/pull/9942) used `github.repos`, but I think this needs to be `github.rest.repos`.

- [Docs](https://octokit.github.io/rest.js/v19#repos)
- [Failed GH Action](https://github.com/vercel/vercel/actions/runs/4994578940/jobs/8945329301)"
5124d431eaa1a513110a55271558cdf48e1f23e3,Sean Massa,2023-05-17 17:45:28+00:00,GitHub,2023-05-17 17:45:28+00:00,"fix deploy from local (#9969)

Local deployments of this repo would fail because this repo assumes that it's only ever deployed via git connection."
c879401bbc867900faea2d261a9ae673f320c18c,Vercel Release Bot,2023-05-17 08:45:41+00:00,GitHub,2023-05-17 08:45:41+00:00,"Version Packages (#9966)

This PR was opened by the [Changesets
release](https://github.com/changesets/action) GitHub action. When
you're ready to do a release, you can merge this and the packages will
be published to npm automatically. If you're not ready to do a release
yet, that's fine, whenever you add more changesets to main, this PR will
be updated.


# Releases
## vercel@29.3.3

### Patch Changes

- Updated dependencies
\[[`6c6f3ce9d`](https://github.com/vercel/vercel/commit/6c6f3ce9d228b1e038641e4bafb38c3487e7dff7)]:
    -   @vercel/next@3.8.3

## @vercel/next@3.8.3

### Patch Changes

- Ensure un-necessary rsc routes are not added
([#9963](https://github.com/vercel/vercel/pull/9963))

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
6c6f3ce9d228b1e038641e4bafb38c3487e7dff7,JJ Kasper,2023-05-16 23:33:09+00:00,GitHub,2023-05-16 23:33:09+00:00,"[next] Ensure un-necessary rsc routes are not added (#9963)

These routes aren't needed for RSC as `_next/data` isn't used for
routing app paths.

x-ref: [slack
thread](https://vercel.slack.com/archives/C058FQFKAGH/p1684272340654679?thread_ts=1684271538.503259&cid=C058FQFKAGH)"
aa836808325251db75fb34a680f5e25c875f9781,Vercel Release Bot,2023-05-16 22:54:10+00:00,GitHub,2023-05-16 22:54:10+00:00,"[examples] Upgrade Next.js to version 13.4.2 (#9943)

This auto-generated PR updates Next.js to version 13.4.2"
06113d3e39a2a472adae01c442175b92430f690e,Vercel Release Bot,2023-05-16 20:53:57+00:00,GitHub,2023-05-16 20:53:57+00:00,"Version Packages (#9962)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
5150f21404bdae5e84ff5b83e46734b71d5a9b18,Luc Leray,2023-05-16 19:17:00+00:00,GitHub,2023-05-16 19:17:00+00:00,"[vc dev] Fix serverless function size limit condition (#9961)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
eb6bb98406d630f872a60b298e638129793da308,Sean Massa,2023-05-16 16:49:25+00:00,Sean Massa,2023-05-16 16:49:25+00:00,empty push test
d8e3b6e7385a42c212d197ab3a79b6d6805f2ea9,Vercel Release Bot,2023-05-16 16:48:06+00:00,GitHub,2023-05-16 16:48:06+00:00,"Version Packages (#9950)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
25da051d62be8e18f4c3440cd90812b7ca098009,Luc Leray,2023-05-16 15:58:04+00:00,GitHub,2023-05-16 15:58:04+00:00,"[vc dev] Skip 50MB zip size limit for Python (#9944)

Do not apply the 50MB zip size limit for Python serverless function during `vc dev`.

Related to internal PR: https://github.com/vercel/api/pull/19279"
f57af66dc2e9d2e5d6bcca5cbae2076ce23424a1,Vercel Release Bot,2023-05-16 03:21:01+00:00,GitHub,2023-05-16 03:21:01+00:00,"[tests] Upgrade Turbo to version 1.9.4 (#9952)

This auto-generated PR updates Turbo to version 1.9.4"
b2f71d5352791220a133188cdd81a5542100a181,Nathan Rajlich,2023-05-15 21:38:30+00:00,GitHub,2023-05-15 21:38:30+00:00,"Remove ""Required PR Label"" workflow (#9958)

Changesets enforces this, so no need for this extra workflow anymore."
6115f0d74a90b1931ce500be2c3a05645c8529f6,Lee Robinson,2023-05-13 20:32:46+00:00,GitHub,2023-05-13 20:32:46+00:00,"Update README (#9951)

To be more clear about what Vercel is actually providing you, as a developer."
14c877e46825c4225687d7b1b04ff601403f1ee9,Nathan Rajlich,2023-05-12 22:08:59+00:00,GitHub,2023-05-12 22:08:59+00:00,"[cli] Sort keys in `vc env pull` (#9949)

Makes sense to have the output be deterministic. Alphabetical sort seems like a logical choice."
d80732d74fce4f673e250354d77664b2d13b69b0,Nathan Rajlich,2023-05-11 20:40:34+00:00,GitHub,2023-05-11 20:40:34+00:00,"[release] Promote `vercel` CLI release to ""latest"" (#9942)

It's possible that changesets will promote a release to latest that is
not the Vercel CLI release. This script ensures that a `vercel@` release
is always the latest after a publish happens."
b739c1845cac643352116e36b730cac07265d72a,Vercel Release Bot,2023-05-11 15:46:10+00:00,GitHub,2023-05-11 15:46:10+00:00,"Version Packages (#9939)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
e9f0fcf397f62fe81c13cd5daaa2e67f8a4ccde6,Sean Massa,2023-05-11 15:16:48+00:00,GitHub,2023-05-11 15:16:48+00:00,"[cli] remove `vc rollback` beta label (#9928)

Remove the ""beta"" label from `vc rollback`."
924a20a0fcf172ca0742edb54baa403aceb928d8,Sean Massa,2023-05-11 14:50:14+00:00,GitHub,2023-05-11 14:50:14+00:00,[tests] make prettier ignore .changeset (#9938)
fc3b74d06ff11d2c463216fc1a9f37b2658001c5,Nathan Rajlich,2023-05-10 23:24:28+00:00,GitHub,2023-05-10 23:24:28+00:00,"Add `id-token: write` permissions to enable npm publish provenance (#9936)

Was previously added in https://github.com/vercel/vercel/pull/9583, was
missed in the changesets switchover."
380ed38c7161448f075592f080bac56dce582d9b,Vercel Release Bot,2023-05-10 22:55:42+00:00,GitHub,2023-05-10 22:55:42+00:00,"Version Packages (#9935)

This PR was opened by the [Changesets release](https://github.com/changesets/action) GitHub action. When you're ready to do a release, you can merge this and the packages will be published to npm automatically. If you're not ready to do a release yet, that's fine, whenever you add more changesets to main, this PR will be updated.


# Releases
## vercel@29.2.1

### Patch Changes

-   Updated dependencies \[[`6d5983eaa`](https://github.com/vercel/vercel/commit/6d5983eaaefe3fd2204f49c3228718ac64a452e3)]:
    -   @vercel/remix-builder@1.8.8

## @vercel/remix-builder@1.8.8

### Patch Changes

-   Upgrade `@remix-run/dev` to v1.16.0-patch.1 to fix erroneous ""not found in your node_modules"" warning ([#9930](https://github.com/vercel/vercel/pull/9930))"
e228cdd373cf9a8a077208566010ba1a22eeae5c,Nathan Rajlich,2023-05-10 21:47:42+00:00,GitHub,2023-05-10 21:47:42+00:00,"Add `@svitejs/changesets-changelog-github-compact` to package.json (#9934)

Forgot to add the package in #9933 :doh:"
9bd92535d6ebac27a7973e184c3102569c5aa79f,Nathan Rajlich,2023-05-10 21:41:19+00:00,GitHub,2023-05-10 21:41:19+00:00,"Use Svelte's changelog generator and don't delete `CHANGELOG.md` (#9933)

Partial revert of #9932, since apparently [that didn't
work](https://github.com/vercel/vercel/actions/runs/4941266637/jobs/8833725828).

We can investigate that more later, but this gets it working again
properly at least.

Also use Svelte's changelog generator, since it includes the PR numbers
which Sean wanted."
5825e3070046f090cbca998b82a8e01261559e79,Nathan Rajlich,2023-05-10 20:58:29+00:00,GitHub,2023-05-10 20:58:29+00:00,"Create release PR as ""Vercel Bot"" and remove `CHANGELOG.md` files (#9932)

* Have changesets create the release PR as ""Vercel Bot"", so that the
tests run.
* Remove the `CHANGELOG.md` files. They are redundant with the GH
Releases which contain the same information."
6d5983eaaefe3fd2204f49c3228718ac64a452e3,Vercel Release Bot,2023-05-10 20:20:15+00:00,GitHub,2023-05-10 20:20:15+00:00,"[remix] Upgrade @remix-run/dev to version 1.16.0-patch.1 (#9930)

This auto-generated PR updates @remix-run/dev to version 1.16.0-patch.1"
2fd59a3b5a727270018a1a0c13c8b2974c734558,Nathan Rajlich,2023-05-10 19:35:17+00:00,GitHub,2023-05-10 19:35:17+00:00,"Use `changesets` instead of `lerna` (#9914)

`changesets` will improve our release workflow, since we will no longer need to manually curate and publish the changelog and GitHub Release. Instead, you simply merge the publish PR that the changesets GH action maintains as we push commits to `main`."
d1d3e9384d139a06acca521348f8f9209bb3d214,Nathan Rajlich,2023-05-10 17:39:11+00:00,Nathan Rajlich,2023-05-10 17:39:11+00:00,"Publish Stable

 - vercel@29.2.0
 - @vercel/client@12.5.0
 - @vercel/frameworks@1.4.2
 - @vercel/fs-detectors@3.9.2
 - @vercel/gatsby-plugin-vercel-builder@1.3.3
 - @vercel/node@2.14.2
 - @vercel/static-build@1.3.30"
8428632eb1f1a8d7bb39fc11eff06880b246a50c,Nathan Rajlich,2023-05-10 16:36:58+00:00,GitHub,2023-05-10 16:36:58+00:00,"[cli] Add support for Vercel CLI Extensions (#9800)

# Vercel CLI Extensions

Adds a new mechanism to add additional sub-commands to Vercel CLI, inspired by how Git handles sub-commands:

* Extensions are standalone executables that Vercel CLI will spawn as a child process.
* The name of the executable must begin with `vercel-`. For example, to add a sub-command called `vercel example`, there should exist an executable called `vercel-example`.
* The executable can either be a npm package with a `""bin""` entry installed into the local project's workspace, or be globally available in the `$PATH`.
* Extensions can access the [Vercel REST API](https://vercel.com/docs/rest-api), pre-authenticated, by utilizing the `VERCEL_API` env var. Vercel CLI spawns a local HTTP server that adds the `Authorization` header and then proxies to the Vercel REST API.

## Environment Variables

A few environment variables which provide features and context to the extension:

| Name      | Description |
| ----------- | ----------- |
| `VERCEL_API`      | HTTP URL to access the pre-authenticated Vercel API.       |
| `VERCEL_TEAM_ID`  | Provided when the currently selected scope is a Team. |
| `VERCEL_DEBUG` | Provided when the `--debug` flag is used. The command _may_ output additional debug logging. |
| `VERCEL_HELP` | Provided when the `--help` flag is used. The command _should_ print the help output and then end with exit code **2**. |

## Example

```bash
#!/usr/bin/env bash
set -euo pipefail

echo Hi, from a Vercel CLI Extension!
user=""$(curl -s ""$VERCEL_API/v2/user"" | jq -r .user.username)""
echo ""Logged in as: $user""
```

Usage:

```
$ vc example
Vercel CLI 28.18.5
Hi, from a Vercel CLI Extension!
Logged in as: tootallnate
```"
fa443035f66faf113badac5b6b30e76f46277a7d,Chris Barber,2023-05-06 10:18:52+00:00,GitHub,2023-05-06 10:18:52+00:00,"[tests] Add test for set-cookie with multiple cookies (#9916)

This adds the missing test for https://github.com/vercel/vercel/pull/9899."
de2c7e1633a29f28dd7f562bd41572e8d09e8848,Sean Massa,2023-05-05 22:00:27+00:00,GitHub,2023-05-05 22:00:27+00:00,"[cli] rename global options in help output (#9917)

Make the distinction between global and deploy options more clear.

The dim note about how to get `deploy`-specific help:

<img width=""670"" alt=""Screenshot 2023-05-05 at 3 55 49 PM"" src=""https://user-images.githubusercontent.com/41545/236568356-10b9ce4f-2865-4267-a3eb-3488df88a133.png"">"
75d243513806352fc26aac2b96f025d3d94d3811,Sean Massa,2023-05-05 18:54:50+00:00,GitHub,2023-05-05 18:54:50+00:00,"[cli] refactor help output around default and deploy commands (#9912)

When getting help output for the default command `vc --help`, you get a list of commands. When you specify the `deploy` command with `vc deploy --help`, you get the same list of commands.

This PR makes a distinction between an explicit `deploy` command and a default one for the purposes of help output.

Should show CLI help:

- `vc -h`
- `vc --help`
- `vc help`

Should show `deploy` command help:

- `vc deploy -h`
- `vc deploy --help`
- `vc help deploy`"
5328bb69e27f27b84c97d3728256e3e26fa5e395,Vercel Release Bot,2023-05-05 16:25:11+00:00,GitHub,2023-05-05 16:25:11+00:00,"[examples] Upgrade Next.js to version 13.4.1 (#9911)

This auto-generated PR updates Next.js to version 13.4.1"
e3fe368baaac0337dace11cb534af0d817b7c791,Kiko Beats,2023-05-05 14:09:10+00:00,GitHub,2023-05-05 14:09:10+00:00,"[cli][node] upgrade `async-listen` to 3.0.0 (#9907)

The `async-listen@3.0.0` is ESM ready and always returns a `URL`
instance; That helps us to unify code."
99832587c545cbdf0e8273c1f1445e61dedcad64,Nathan Rajlich,2023-05-05 00:52:18+00:00,GitHub,2023-05-05 00:52:18+00:00,"[cli] Add support for `HTTPS_PROXY` env var (#9880)

By leveraging the [`proxy-agent`](https://www.npmjs.com/package/proxy-agent) npm module, enable CLI to support making HTTP requests over a proxy, by leveraging the `HTTPS_PROXY` or `ALL_PROXY` env var (same convention as `curl` uses).

Finally closes this ancient issue: https://github.com/vercel/vercel/issues/255"
47d0d4f84ae0bc74764f9fb4f2c499e4a68bd00e,Vercel Release Bot,2023-05-04 20:25:08+00:00,GitHub,2023-05-04 20:25:08+00:00,"[examples] Upgrade Next.js to version 13.4.0 (#9902)

This auto-generated PR updates Next.js to version 13.4.0"
aba54ee6cfef34dd633021b5afb3943a0e037fa4,Sean Massa,2023-05-03 23:36:26+00:00,GitHub,2023-05-03 23:36:26+00:00,"[frameworks] validate getOutputDirName and other missing values on framework entries (#9900)

Covers the validation whole in Framework entries over function properties and other missing holes."
cd7d3ef1c5cc8b9833e1a1b999ea8ae8e86f6103,Chris Barber,2023-05-03 22:12:45+00:00,GitHub,2023-05-03 22:12:45+00:00,"[node] Explicitly set 'set-cookie' header (#9899)

When looping over the response headers returned by `node-fetch`, it will join `set-cookie` header value into a single string. The whatwg calls for a `headers.getSetCookie()` function to handle the `set-cookie` special case, but `node-fetch@2.x` doesn't support it.

As a workaround, we need to grab the raw `set-cookie` header value."
c4915507aae9cbfd745e10ba6cc361efc05f4a98,Sean Massa,2023-05-03 21:20:45+00:00,Sean Massa,2023-05-03 21:20:45+00:00,"Publish Stable

 - vercel@29.1.1
 - @vercel/frameworks@1.4.1
 - @vercel/fs-detectors@3.9.1
 - @vercel/static-build@1.3.29"
6c02ae9e3639228f4f54cea556360ebbb6112fe4,Sean Massa,2023-05-03 21:19:45+00:00,GitHub,2023-05-03 21:19:45+00:00,[frameworks] Add `getOutputDirName` to Storybook definition (#9898)
672c1681cc453744e30f985d3e532111d4d7b120,Sean Massa,2023-05-03 19:08:25+00:00,Sean Massa,2023-05-03 19:08:25+00:00,"Publish Stable

 - vercel@29.1.0
 - @vercel/frameworks@1.4.0
 - @vercel/fs-detectors@3.9.0
 - @vercel/gatsby-plugin-vercel-builder@1.3.2
 - @vercel/node@2.14.1
 - @vercel/remix-builder@1.8.7
 - @vercel/static-build@1.3.28"
7a0dacf8bbbb7c5913c21dc4b5929d90b1db1582,Chris Barber,2023-05-03 19:05:44+00:00,GitHub,2023-05-03 19:05:44+00:00,"[cli][fs-detectors][frameworks] Re-add Storybook support (#9891)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
8088b07abfbe1eab31c096af9db184108b9adb5b,Nathan Rajlich,2023-05-03 17:13:59+00:00,GitHub,2023-05-03 17:13:59+00:00,"[remix] Use `debug()` for warnings when reading config file (#9894)

Follow-up to address this comment: https://github.com/vercel/vercel/pull/9888#discussion_r1182739621"
5ee4acb23bf238dfdb03c0ddda7440913533fabe,Kiko Beats,2023-05-02 18:01:40+00:00,GitHub,2023-05-02 18:01:40+00:00,"use `ws` instead of `undici.WebSocket` (#9893)

The `WebSocket` constructor exposed by `undici` is not working against some db connections.

That can be considered kind of expected since `undici` docs is saying it's experimental.

We're working into isolate the issue and report at `undici` repository, but for now, let's just use `ws` for all the node versions."
ff0978593d71cd8b077db700365f46e18aa54984,Nathan Rajlich,2023-05-02 16:32:39+00:00,GitHub,2023-05-02 16:32:39+00:00,"[remix] Suppress warnings when reading config (#9888)

Currently, any warnings logged when calling `readConfig()` are emitted in build logs _three times_:

1. When initially reading the config before executing the Build Command
2. When the Build Command is executed (`remix build` reads the config)
3. After the build, in the `prepareCache()` function

For the callsites that we are in control of (`1.` and `3.`), we should suppress those warnings and only allow the standard warnings when invoking `remix build` to be emitted to the build logs."
678e13af53d180f804ffe558343af7eacc769ca5,Chris Barber,2023-05-02 15:03:28+00:00,GitHub,2023-05-02 15:03:28+00:00,[cli][fs-detectors][frameworks] Revert Storybook support (#9890)
ac2457494af75a4bf583ad7628e443ab136eb68c,Vercel Release Bot,2023-05-02 09:49:13+00:00,GitHub,2023-05-02 09:49:13+00:00,"[remix] Upgrade @remix-run/dev to version 1.16.0 (#9887)

This auto-generated PR updates @remix-run/dev to version 1.16.0"
8b9a8c09867921cf2294b7f37fd7eb8f1a670889,Vercel Release Bot,2023-05-01 21:55:13+00:00,GitHub,2023-05-01 21:55:13+00:00,"[examples] Upgrade Next.js to version 13.3.4 (#9881)

This auto-generated PR updates Next.js to version 13.3.4

Co-authored-by: Steven <steven@ceriously.com>"
603a7d8787a6a4539c954fb85e13ba46b55526bd,Nathan Rajlich,2023-05-01 20:53:35+00:00,GitHub,2023-05-01 20:53:35+00:00,"[fs-detectors] Add `disableRootMiddleware`, bypass `ignoreRuntimes` for root-level ""middleware"" files (#9883)

`ignoreRuntimes: ['@vercel/node']` will also disable root-level middleware, which is not intended. So ensure that middleware still work, even for frameworks that have this `ignoreRuntimes` configuration enabled (Remix, RedwoodJS)."
9240cbc0229e6cfff4916e2d32f7fa37746f980e,Chris Barber,2023-05-01 16:25:06+00:00,GitHub,2023-05-01 16:25:06+00:00,"[cli][fs-detectors][frameworks] Add Storybook support (#9839)

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
da046d85de8121e6c851af8e51aff81984646e0b,Vercel Release Bot,2023-05-01 04:21:32+00:00,GitHub,2023-05-01 04:21:32+00:00,"[tests] Update Gatsby fixture versions (#9776)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
f8749e1ff1d69fe25421a1f0f9309542ea50ad6e,Tim Neutkens,2023-04-30 13:59:21+00:00,Tim Neutkens,2023-04-30 13:59:21+00:00,"Publish Stable

 - vercel@29.0.3
 - @vercel/next@3.8.2"
ec7b1cf80dbc88adeac7804cfaf0ba8aee4f1d9c,Tim Neutkens,2023-04-30 13:58:07+00:00,GitHub,2023-04-30 13:58:07+00:00,"[next] Return all and auto when those are used (#9877)

The edge function deployment API doesn't accept these in the array
format."
85947b658ee1b4b3b7fcb631bdc6e591ee1e338a,Tim Neutkens,2023-04-30 09:47:04+00:00,Tim Neutkens,2023-04-30 09:47:04+00:00,"Publish Stable

 - vercel@29.0.2
 - @vercel/next@3.8.1"
7ab86a94fbc1ba04d01ece4f108710e70c75b5c2,Tim Neutkens,2023-04-30 09:45:28+00:00,GitHub,2023-04-30 09:45:28+00:00,"[next] Fix return value in normalizeRegions (#9876)

Missed that the newRegions wasn't returned. Also added a check for empty
array, e.g. when `home` is not supported and such."
b5db13c97035d0eae04a5e075ae74e488d1298d6,Steven,2023-04-29 22:02:35+00:00,Steven,2023-04-29 22:02:35+00:00,"Publish Stable

 - vercel@29.0.1
 - @vercel/fs-detectors@3.8.13
 - @vercel/gatsby-plugin-vercel-builder@1.3.1
 - @vercel/next@3.8.0
 - @vercel/node@2.14.0
 - @vercel/static-build@1.3.27"
473f62d1410cd073bdc5341d3ebaa9eb47787fa4,Tim Neutkens,2023-04-29 17:25:25+00:00,GitHub,2023-04-29 17:25:25+00:00,"Add support for `home` and `global` as edge function regions (#9869)

Adds `home` and `global` as supported values for `regions` when coming
from Next.js. We'll port these to the build output API at a later time.

Related Next.js changes: https://github.com/vercel/next.js/pull/48959

---------

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
cc140d6e2852ade7934e9fe6db2b3437ddfad3a4,JJ Kasper,2023-04-29 08:43:40+00:00,GitHub,2023-04-29 08:43:40+00:00,"[node] Fix exposing WebSocket to edge runtime and legacy next tests (#9871)

This ensures we expose WebSocket correctly for edge runtime for Node.js
v16 and v18 properly. This also fixes failing legacy Next.js tests due
to a bad `@babel/compat-data` package publish from 8 hours ago.

x-ref: [slack
thread](https://vercel.slack.com/archives/C04R82GSDBN/p1682709850008189?thread_ts=1682707749.424459&cid=C04R82GSDBN)
x-ref: https://github.com/vercel/next.js/pull/48924
x-ref: https://github.com/vercel/vercel/pull/9860
Closes: https://github.com/vercel/vercel/pull/9870"
09ac96ae212aa25d953a50ef6f2b731e0a5dd593,Kiko Beats,2023-04-28 21:03:35+00:00,GitHub,2023-04-28 21:03:35+00:00,"[node] expose `WebSocket` constructor in Edge functions (#9860)

This PR exposes `WebSocket` to be used for Edge Runtime for `vc dev`.

Ideally, that's a thing we should to handle inside `edge-runtime`
dependency.

Unfortunately, that is not as easy as it sounds, since Edge Runtime is
doing a heavy use of vm module and `undici` is using some Node.js APIs
that are not available, or they are hard to make them working inside vm.

Related PR: https://github.com/vercel/edge-runtime/pull/309

While we're finishing that work, in order to don't delay users to start
using `WebSocket`, we can simply expose it directly from `undici` as
dependency.

---------

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
ebd1bf41b623037c1db22101d2fb40a5c285e496,Nathan Rajlich,2023-04-28 20:37:26+00:00,GitHub,2023-04-28 20:37:26+00:00,"[node] Don't compile ""edge"" functions with Babel (#9868)"
e1a16b0333a965a6030675b559bb19f1e6ac3d2e,Steven,2023-04-28 19:58:43+00:00,GitHub,2023-04-28 19:58:43+00:00,"[node] Add log message about compiling ESM to CJS (#9866)

When `@vercel/node` was created 5 or so years ago, Node.js didn't support ESM out of the box. So to create a zero configuration experience, babel was introduce to compile the authored ESM into the runtime CJS.

Today, Node.js supports ESM but you have to opt in using `type: module` in package.json or the `.mjs` file extension.

Indeed `@vercel/node` detects ESM and skips babel compilation. However, there is a case where the source code is ESM and a dependency supports both ESM and CJS via `imports` in package.json. This case will break because `@vercel/nft` traces the source file as ESM and assumes the dependency will be resolved as ESM too. But after `@vercel/nft` traces the source file, `@vercel/node` will compile to CJS and thus the trace will be incorrect and fail at runtime.

So this PR adds a warning when babel compiles ESM to CJS because it is no longer expected in 2023."
ed568226750618b14dee8cb22c5b9ca7795c28af,Shohei Maeda,2023-04-28 18:59:23+00:00,GitHub,2023-04-28 18:59:23+00:00,"[next] support functions property in appDir (#9811)

Currently, `functions` property (i.e., `memory` and `maxDuration`) are
not supported in appDir routes. This PR attempts to add support.

---------

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: JJ Kasper <jj@jjsweb.site>"
ce597ce0ecdabfe085c442a955d375618b3a30a7,Sean Massa,2023-04-27 19:22:47+00:00,GitHub,2023-04-27 19:22:47+00:00,"[node] validate function runtime and throw when ""nodejs"" (#9851)

We want to keep the currently unused `runtime: ""nodejs""` value clear for future use. This PR effectively makes any unrecognized value fail the build. If the value is ""nodejs"" specifically, a direct error is thrown suggesting they remove the value.

Only a handful of projects set this value currently. We're reaching out to them to let them know that this value is not currently supported and that they should remove it. Then, we should deploy this PR so that anyone else using this value will know to remove it."
2de365f9cfea3ce283d2bf855507c71209f1e3d8,Sean Massa,2023-04-27 18:09:25+00:00,Sean Massa,2023-04-27 18:09:25+00:00,"Publish Stable

 - @vercel/build-utils@6.7.2
 - vercel@29.0.0
 - @vercel/client@12.4.12
 - @vercel/edge@0.3.4
 - @vercel/frameworks@1.3.5
 - @vercel/fs-detectors@3.8.12
 - @vercel/gatsby-plugin-vercel-builder@1.3.0
 - @vercel/go@2.5.1
 - @vercel/hydrogen@0.0.64
 - @vercel/next@3.7.6
 - @vercel/node@2.13.0
 - @vercel/python@3.1.60
 - @vercel/redwood@1.1.15
 - @vercel/remix-builder@1.8.6
 - @vercel/routing-utils@2.2.1
 - @vercel/ruby@1.3.76
 - @vercel/static-build@1.3.26
 - @vercel/static-config@2.0.17"
fb6fe4615850f0c75da2b672a25d68ec8283f5ed,Nathan Rajlich,2023-04-27 18:00:17+00:00,GitHub,2023-04-27 18:00:17+00:00,"[cli] Remove `--target` global common arg (#9808)

It doesn't make sense to have `--target` as a global argument, because not all subcommands utilize this flag (actually only `vc deploy` does, and it's even deprecated).

This is technically a breaking change (though risk of someone using this flag on non-`vc deploy` is very unlikely), so we may want to hold off on merging this until we're ready to do a major version bump."
bfebfc28e1f25a18eaa8ea86f3e607daebedd768,Sean Massa,2023-04-27 15:53:04+00:00,GitHub,2023-04-27 15:53:04+00:00,"[tests] Update CODEOWNERS for `packages/node` (#9864)

Right now, @Kikobeats is a required approver on `packages/node`. This change allows them to approve changes to the package without being absolutely required."
9e183b2e8dceec762650597882426060c1ce14ca,Chris Barber,2023-04-27 15:27:02+00:00,GitHub,2023-04-27 15:27:02+00:00,[tests] Move `allowJs: true` to test tsconfig.json (#9862)
0490a7733ba09cf21201add77ab57640787bff22,Sean Massa,2023-04-27 08:13:53+00:00,GitHub,2023-04-27 08:13:53+00:00,"[tests] install root typescript version `4.9.5` and standardize on that version (#9858)

This add a root-level `typescript` version that matches the one used throughout for VS Code (and other IDEs) to use when browsing the code. After this PR merges, you will be able to set VS Code's TypeScript version to match the project's version.

This will remove issues where the IDE says TypeScript compilation is good to go, but `pnpm build` disagrees.

If there's a better way to allow this, please suggest it!

---

To enable:

<img width=""849"" alt=""Screenshot 2023-04-25 at 4 28 22 PM"" src=""https://user-images.githubusercontent.com/41545/234408245-205b3260-7b1d-4c43-a531-d616915dbefb.png"">

Then:

<img width=""1015"" alt=""Screenshot 2023-04-25 at 4 29 20 PM"" src=""https://user-images.githubusercontent.com/41545/234408271-4e7b4ec8-0be3-4743-afd7-813a267c0756.png"">"
65a6e713c80fe55b3d66134cd9230ab0ee342e7c,Chris Barber,2023-04-26 17:23:43+00:00,GitHub,2023-04-26 17:23:43+00:00,[node] Fix ESM dependency support (#9692)
fda76691d1b2978b1d36d903b723a1c2d98cac32,Nathan Rajlich,2023-04-25 06:31:27+00:00,GitHub,2023-04-25 06:31:27+00:00,"[gatsby-plugin-vercel-builder] Log validation errors (#9854)

Log state validation errors, because they can be user error.

Example:

```
error ""gatsby-node.js"" threw an error while running the onPostBuild lifecycle:

Gatsby state validation failed:
  - Expected boolean, got string (""true"") at path ""/redirects/0/isPermanent""
Please check your Gatsby configuration files, or file an issue at https://vercel.com/help#issues

  3 |
  4 | export const onPostBuild = async ({ store }: { store: any }) => {
> 5 |   await generateVercelBuildOutputAPI3Output({
    |         ^
  6 |     // validated by `pluginOptionSchema`
  7 |     gatsbyStoreState: store.getState(),
  8 |   });
```"
007e48c1cdb2fa318343c4486adca873e286ac8b,Vercel Release Bot,2023-04-25 06:03:04+00:00,GitHub,2023-04-25 06:03:04+00:00,"[tests] Upgrade Turbo to version 1.9.3 (#9844)

This auto-generated PR updates Turbo to version 1.9.3"
954536e68126a47879845fc1acde71cdc25d40da,Nathan Rajlich,2023-04-25 03:53:42+00:00,GitHub,2023-04-25 03:53:42+00:00,"Use pnpm v8.3.1 (#9853)

Updates our usage of pnpm to version 8.3.1, and updates the lockfile to the newer version 6 format."
c52220ab7288a79339002680df960939890daade,Nathan Rajlich,2023-04-25 03:14:40+00:00,GitHub,2023-04-25 03:14:40+00:00,"[next] Update test fixture 00-app-dir-edge to use `export const runtime` (#9855)

This test has started to fail consistently:

https://github.com/vercel/vercel/actions/runs/4792497815/jobs/8524784756"
545f82603fcbc0b933a083af7e710ad610b31bb2,Nathan Rajlich,2023-04-24 22:17:52+00:00,GitHub,2023-04-24 22:17:52+00:00,"[remix-entry-server] Delete package (#9852)

The functionality of this package has been moved to the `@vercel/remix` package, so this one is no longer necessary."
032df14c799808885fecf66229157084b9e9572b,Vercel Release Bot,2023-04-24 16:34:13+00:00,GitHub,2023-04-24 16:34:13+00:00,"[examples] Upgrade Next.js to version 13.3.1 (#9842)

This auto-generated PR updates Next.js to version 13.3.1"
604f3b8d834efdcc6669e5f790872077d8c2773f,Michal De Boey,2023-04-24 02:35:31+00:00,GitHub,2023-04-24 02:35:31+00:00,"fix(remix): update `entry.client.react.jsx` (#9845)

Bring in line with Remix defaults

https://github.com/remix-run/remix/blob/main/packages/remix-dev/config/defaults/entry.client.react-stream.tsx"
c0380cac5aa668546f2514625a00f978a7d8f995,Sean Massa,2023-04-21 16:57:19+00:00,GitHub,2023-04-21 16:57:19+00:00,[node] remove last mention of node-bridge (#9838)
7082da84511740ea0304b5f93b0073bbb3f3a9ed,Chris Barber,2023-04-20 14:19:59+00:00,Chris Barber,2023-04-20 14:19:59+00:00,"Publish Stable

 - vercel@28.20.0
 - @vercel/client@12.4.11
 - @vercel/gatsby-plugin-vercel-analytics@1.0.10
 - @vercel/gatsby-plugin-vercel-builder@1.2.10
 - @vercel/node@2.12.0
 - @vercel/static-build@1.3.25"
20a7b2f2d42a24a7fdf123c5f88291f0fc2bb63e,Chris,2023-04-20 14:07:41+00:00,GitHub,2023-04-20 14:07:41+00:00,"[all] Update naming for Next.js Analytics (#9835)

Updates the name of Next.js Analytics to Next.js Speed Insights

closes ALY-484"
a5c3cbcd4578a781fa37bb45fe22310aa47b7a78,Gary Borton,2023-04-20 13:11:17+00:00,GitHub,2023-04-20 13:11:17+00:00,"Allow passing of local git meta even with no remote. (#9824)

This enables the CLI to pass locally detected git meta data even when there is no available remote. It requires a corresponding internal change, which is blocking the e2e tests."
6dded87426a81df6c2b6705948a28c9ca1729f1a,Kiko Beats,2023-04-19 21:56:41+00:00,GitHub,2023-04-19 21:56:41+00:00,"[node] Add streaming support for `vc dev` (#9745)

Until now, the user code response it's buffered and serialized. This is
mismatching how Vercel works these days.

This PR enables streaming response in `vc dev` for Edge/Serverless.

As part of the implementation, the `node-bridge` which spawns a process
to consume the user code is not necessary anymore.

Some necessary files (like HTTP server helpers) have been moved to live
in node builder package instead.

---------

Co-authored-by: Ethan Arrowood <ethan.arrowood@vercel.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
a63b9d960bec291e152308c30074843aab802c8d,Chris Barber,2023-04-19 15:14:58+00:00,Chris Barber,2023-04-19 15:14:58+00:00,"Publish Stable

 - vercel@28.19.0
 - @vercel/client@12.4.10
 - @vercel/edge@0.3.3
 - @vercel/error-utils@1.0.10
 - @vercel/fs-detectors@3.8.11
 - @vercel/gatsby-plugin-vercel-builder@1.2.9
 - @vercel/go@2.5.0
 - @vercel/hydrogen@0.0.63
 - @vercel/next@3.7.5
 - @vercel/node@2.11.0
 - @vercel/python@3.1.59
 - @vercel/remix-builder@1.8.5
 - @vercel/static-build@1.3.24
 - @vercel/static-config@2.0.16"
3cefbb19fec5d45be25b67348d38d292c5e6995e,Sean Massa,2023-04-18 20:27:01+00:00,GitHub,2023-04-18 20:27:01+00:00,"[tests] split next-local tests into chunks (#9774)

The next-local e2e tests where split between middleware (fast) and all other (slow) tests. This meant there was not a good balance of amount of time spent across these test files, making overall test run times as slow as ""all other tests"" running.

This PR rebalances the split of tests across 2 files. The new run time is ~9-10m."
f43894ef4eeb069e33d34b01651b1cbcad8cc691,Sean Massa,2023-04-18 19:29:42+00:00,GitHub,2023-04-18 19:29:42+00:00,"[cli] refactor to use create deployment param type (#9805)

Small refactor to provide type safety to this invocation of `createDeploy`."
2081f10b221fee2c7172ebf1e9f75c3a58de8a2e,Chris Barber,2023-04-18 16:37:09+00:00,GitHub,2023-04-18 16:37:09+00:00,"[node] Move `path-to-regexp` and `ts-morph` from dev deps to deps (#9823)

`@vercel/node` uses `ncc` to bundle the `index.js` spawns the dev server entrypoint which does not bundle the required dependencies, thus `path-to-regexp` and `ts-morph` must be moved from dev dependencies to dependencies.

Fixes #9735."
b52df7a533160f605f5584e2e5401e3701297ade,Chris Barber,2023-04-17 15:43:05+00:00,GitHub,2023-04-17 15:43:05+00:00,"[cli] Add `vc deploy --no-wait` and `vc inspect --wait` (#9802)

There's a need to allow `vc deploy` to not block and not wait for the deployment to finish, yet return the URL.

```
$ vc deploy --no-wait
Vercel CLI 28.18.5
  Inspect: https://vercel.com/chrisbarber/next13fun/L8X4oxp5LGcmy51yVptXwMK7n4wt [1s]
  Note: Deployment is still processing...
  Production: https://next13fun-kecpx6za2-chrisbarber.vercel.app [1s]
```

Normally this deployment takes around 30 seconds, but the `--no-wait` flag causes the command to exit in less than 2 seconds.

The next step is to add the ability for `vc inspect` to wait as well as specify the maximum time to wait (defaults to 3 minutes, same as `vc rollback`).

```
$ vc inspect --wait --timeout 1m https://next13fun-kecpx6za2-chrisbarber.vercel.app
Vercel CLI 28.18.5
> Fetched deployment ""next13fun-ov2r4pvdz-chrisbarber.vercel.app"" in chrisbarber [23s]

  General

    id		dpl_9VUuV23EGeoqWf7akEeL8rP1c8cb
    name	next13fun
    status	 Ready
    url		https://next13fun-ov2r4pvdz-chrisbarber.vercel.app
    created	Thu Apr 13 2023 12:25:07 GMT-0500 (Central Daylight Time) [24s ago]
<snip>
```

Also added the ability to pipe the URL into `vc inspect`:

```
echo https://next13fun-ov2r4pvdz-chrisbarber.vercel.app | vc inspect
```

Combined, it allows us to support cool things like:

```
$ vc inspect $(vc deploy --prod --no-wait) --wait
```"
ec89436417c0bead4bf750192b19e9a0137d3b83,Vercel Release Bot,2023-04-16 07:18:36+00:00,GitHub,2023-04-16 07:18:36+00:00,"[tests] Upgrade Turbo to version 1.9.1 (#9819)

This auto-generated PR updates Turbo to version 1.9.1"
993a404311965826edcf825e6e250dc1bee97fea,Nathan Rajlich,2023-04-14 21:45:35+00:00,GitHub,2023-04-14 21:45:35+00:00,"[cli] Support pnpm in `getUpdateCommand()` (#9813)

We're currently showing bad instructions when CLI was installed via pnpm:

![image](https://user-images.githubusercontent.com/71256/232131890-ecc1c2c1-ace6-48b3-bd6f-8631cf7be087.png)

This adds support for it by leveraging our existing `scanParentDirs()` logic from build-utils."
3e7bcb2073bb7cbc423181b1b229f61c44ab3d6b,Nathan Rajlich,2023-04-14 20:35:56+00:00,GitHub,2023-04-14 20:35:56+00:00,"[cli] Remove a bunch of `isCanary` checks (#9806)

We no longer publish versions that include `-canary` in the package.json `version` field, so these are dead code. Just doing a little bit of cleanup."
ed119d6a33c9a22906e4366f964ea68db26aa714,Ethan Arrowood,2023-04-14 18:08:12+00:00,GitHub,2023-04-14 18:08:12+00:00,"[internals] Refactor `@vercel-internals/types` enums into constants (#9789)

- Creates new internals package, `@vercel-internals/constants`
- Refactors the `enum`s from `@vercel-internals/types` into `as const` objects, and moves them to `@vercel-intenrals/constants`
- Updates all relevant code within `packages/cli`, including `@vercel-internals/types` imports to be `import type`"
2aeddde7d54780bc75ecb539c8398b7b179a4de9,Sean Massa,2023-04-13 22:19:14+00:00,GitHub,2023-04-13 22:19:14+00:00,"[tests] split python e2e tests into chunks (#9771)

Split python tests into two chunks. They take <10m each."
a8eab6beb799a3ecde70cd310b6a3ae5e1a6de97,Dan Stowell,2023-04-13 20:47:13+00:00,GitHub,2023-04-13 20:47:13+00:00,"[tests] fetch vercel.com cert before builds and after tests (#9803)

To debug intermittent connection errors when the tests make requests to [api.vercel.com], fetch the SSL certificate before builds and after tests."
031c18289656f4f595a7b72211f0b426613880ca,Nathan Rajlich,2023-04-13 18:36:59+00:00,GitHub,2023-04-13 18:36:59+00:00,[examples] Update Remix template to use v1.15.0 (#9788)
38eb0bca04ef57a7ff821ece03f16ed056e30881,Chris Barber,2023-04-13 17:59:47+00:00,GitHub,2023-04-13 17:59:47+00:00,"[go] Support 'go.work' file and resolve shared deps relative to work path (#9708)

This PR fixes a few issues related to `vc dev`.

1. Create a default `go.work` file in the cache dir when building the `vercel-dev-server-go` executable
2. Copy the existing `go.mod` file into the cache dir and update any ""replace"" relative paths
3. Split the ""build"" logic into separate functions for the legacy ""main"" package build and the `go.mod` build

Additionally, it fixes:

1. `vc build`: pass in `build.env` from `vercel.json`
2. Fix several tests to work with `vc dev` and `vc build`

Linear: https://linear.app/vercel/issue/VCCLI-638/vc-dev-go-builder-cant-resolve-workspace-dependencies

The user that reported the issue has tested this build and seems to fix their use case: https://github.com/vercel/vercel/issues/9393#issuecomment-1490726785."
732ac2072cd1c09e383d7da2f671c3bb430c8a8a,Chris Barber,2023-04-12 13:38:03+00:00,GitHub,2023-04-12 13:38:03+00:00,"[tests] Update Typescript, Jest, and ts-jest (#9782)

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Swarnava Sengupta <swarnavasengupta@gmail.com>"
64d9cef963550fe71f66cde58122902db0007f4f,Nathan Rajlich,2023-04-12 06:53:46+00:00,GitHub,2023-04-12 06:53:46+00:00,"[publish] Trigger update workflow on ""api"" repo after Publish (#9791)

So that we don't need to trigger it manually and/or wait for the cronjob."
6b9e274bc7b01726c57b2df8e294e50a162cb447,Nathan Rajlich,2023-04-12 04:29:29+00:00,GitHub,2023-04-12 04:29:29+00:00,"[cli] Simplify `parseRepoUrl()` and fix edge case (#9796)

Fixes an edge case in `parseRepoUrl()` when there is a `.com` in the repo name. The code was hard to refactor in its previous form so I refactored it to be simpler as well."
a2da071755d0ab21dc7cc341f77f2c3550c18465,Sean Massa,2023-04-12 00:57:07+00:00,GitHub,2023-04-12 00:57:07+00:00,"[tests] re-chunk example tests (#9792)

It turns out that these do take a long time to run when not cached. We do want these chunks."
14ece4111aed844a92e0024c5933f41b8ae717a0,Dan Stowell,2023-04-11 21:25:20+00:00,Dan Stowell,2023-04-11 21:25:20+00:00,"Publish Stable

 - vercel@28.18.5
 - @vercel/fs-detectors@3.8.10
 - @vercel/gatsby-plugin-vercel-builder@1.2.8
 - @vercel/static-build@1.3.23"
e302631dedee9d67a64e3e51b828bc20b52dce9d,Sean Massa,2023-04-11 21:22:41+00:00,GitHub,2023-04-11 21:22:41+00:00,"[fs-detectors] check turbo versions to allow for tags like ""latest"" (#9790)

When a project depends on `turbo` at version `latest`, this code was breaking because `latest` is not a valid range for `semver.intersects`."
43a57a3a60cc72b2311c18e8d96b0c1375adb7c9,Nathan Rajlich,2023-04-11 19:52:38+00:00,GitHub,2023-04-11 19:52:38+00:00,"[gatsby-plugin-vercel-builder] Ignore `assetPrefix` completely (#9787)

Before, we were stripping off only the hostname portion of `assetPrefix`, so any pathname was still being ""handled"" by the plugin.

Instead, we should be ignoring the `assetPrefix` entirely, so that these two configurations are treated differently:

 * `{ assetPrefix: 'http://example.com', pathPrefix: '/foo' }` - Gatsby project is served from `/foo`
 * `{ assetPrefix: 'http://example.com/foo', pathPrefix: undefined }` - Gatsby project is served from the root `/`

Currently, both configuration behave as the first version listed above. This change makes it so they can behave differently, specifically for some proxy configurations.

In both cases, the generated HTML contains the full URL `http://example.com/foo/*` for JS/CSS/etc. assets"
136077ab6f93eb138c814201b08a61b96936b1b4,Ethan Arrowood,2023-04-10 21:01:17+00:00,GitHub,2023-04-10 21:01:17+00:00,"[scripts] Create internal-dependency-trace script package (#9783)

Adds a new package under `scripts/internal-dependency-trace` that can be used to generate a rendering of any internal file dependency graph.

Default configured to generate the directed dependency graph of `packages/cli/src/index.ts`"
8634f9cd7e0c663b77f3dd02789bcba0d20baed7,Lee Robinson,2023-04-10 08:35:00+00:00,GitHub,2023-04-10 08:35:00+00:00,"[examples] Update Astro example. (#9778)

This demo now showcases:

- `/` - A static page (pre-rendered)
- `/ssr` - A page that uses server-side rendering (through Vercel Edge Functions)
- `/ssr-with-swr-caching` - Similar to the previous page, but also caches the response on the Vercel Edge Network using `cache-control` headers
- `/edge.json` - An Astro API Endpoint that returns JSON data using Vercel Edge Functions

The new example has been deployed to https://astro.vercel.app."
dc8523998c1b6b4b9df9491f22e49432e654991b,Sean Massa,2023-04-07 23:47:27+00:00,GitHub,2023-04-07 23:47:27+00:00,"[tests] combine examples e2e into one chunk (#9772)

We don't need 5 chunks of the very fast examples tests. We spend more time in setup for each one. We are also more likely to hit the [usage limit](https://docs.github.com/en/actions/learn-github-actions/usage-limits-billing-and-administration#usage-limits) with these.

This PR combines them into one test suite."
925c8ba18ceec80174d9440cd2cad0e725ed4f56,Sean Massa,2023-04-07 21:43:42+00:00,Sean Massa,2023-04-07 21:43:42+00:00,"Publish Stable

 - @vercel/build-utils@6.7.1
 - vercel@28.18.4
 - @vercel/client@12.4.9
 - @vercel/edge@0.3.2
 - @vercel/error-utils@1.0.9
 - @vercel/frameworks@1.3.4
 - @vercel/fs-detectors@3.8.9
 - @vercel/gatsby-plugin-vercel-analytics@1.0.9
 - @vercel/gatsby-plugin-vercel-builder@1.2.7
 - @vercel/go@2.4.4
 - @vercel/hydrogen@0.0.62
 - @vercel/next@3.7.4
 - @vercel/node-bridge@4.0.1
 - @vercel/node@2.10.3
 - @vercel/python@3.1.58
 - @vercel/redwood@1.1.14
 - @vercel/remix-entry-server@0.1.1
 - @vercel/remix-builder@1.8.4
 - @vercel/routing-utils@2.2.0
 - @vercel/ruby@1.3.75
 - @vercel/static-build@1.3.22
 - @vercel/static-config@2.0.15"
19804b78a9d0335e8b9807317bc0c6c4b614725d,Sean Massa,2023-04-07 21:24:40+00:00,GitHub,2023-04-07 21:24:40+00:00,"[routing-utils] add `isInternal` flag (#9761)

Adds a new Route property called `isInternal` that indicates whether or not this is a project route or a Vercel platform route. Routes with this flag will be hidden from project-specific lists of routes to avoid confusion.

Verified on staging."
f774d5f7a2c72e4b6c8fade5d28d939ab9a63135,Sean Massa,2023-04-07 20:42:36+00:00,GitHub,2023-04-07 20:42:36+00:00,"[next] use ""Page"" instead of ""SSR"" for `operationType` (#9770)

Update the `operationType` from ""SSR"" to ""Page"" for display in build outputs."
9bf8a6868531f83731187faf0f93a6c6bdc2563d,JJ Kasper,2023-04-07 20:01:48+00:00,GitHub,2023-04-07 20:01:48+00:00,[next] Update allowQuery test case (#9767)
294935a9c5e9c8c625290eed840413707ed49788,Nathan Rajlich,2023-04-07 02:10:51+00:00,GitHub,2023-04-07 02:10:51+00:00,"[static-build] Remove Gatsby env var check (#9766)

This feature flag has been fully rolled out for a while now. Removing it makes the plugin work with `vc build` when running locally."
778c2879640d81b2e87b684a75cc5b998f8c0b2e,Vercel Release Bot,2023-04-07 01:36:55+00:00,GitHub,2023-04-07 01:36:55+00:00,"[examples] Upgrade Next.js to version 13.3.0 (#9765)

This auto-generated PR updates Next.js to version 13.3.0"
7a9a51951783e67b77ce98413dcb6a0efa10502e,JJ Kasper,2023-04-07 00:04:58+00:00,GitHub,2023-04-07 00:04:58+00:00,"[next] Fix edge runtime for route groups (#9764)

This ensures we use the correct short name when generating edge
functions with route groups from app directory.

Example deployment with fix can be seen here
https://next-debug-edge-runtime-1ar7agbjh-vtest314-ijjk-testing.vercel.app/group-no-layout

Fixes: https://github.com/vercel/next.js/issues/43458"
52b2892b8015fe150659752104d19d3316b9446b,Espen Hovlandsdal,2023-04-06 23:18:07+00:00,GitHub,2023-04-06 23:18:07+00:00,"[build-utils][cli][fs-detectors] Upgrade minimatch to 3.1.2 (#9762)

Minimatch 3.0.4 has a [ReDoS
vulnerability](https://security.snyk.io/vuln/SNYK-JS-MINIMATCH-3050818).
While not likely to be an issue for the packages that use it here, a
simple version bump should prevent the issue and reduce vulnerability
noise on audits. 3.1.2 is the latest version within the 3.x range, so
prevents breaking changes."
ee4ba6ccbeea068f6469635cfcbdb6e6e82ad3d8,Nathan Rajlich,2023-04-06 22:33:55+00:00,GitHub,2023-04-06 22:33:55+00:00,"[all] Use correct ""license"" field in `package.json` (#9754)

Follow-up to #9696. Ensures that all packages in this repository have
the correct ""license"" field in their respective `package.json` files set
to ""Apache-2.0"", to match the `LICENSE` file at the root of the
repository.

The `LICENSE` file the authoritative source, so the ""MIT"" value was
incorrect. This change corrects the previous values and is not
considered a relicensing."
07a09b7880014fd6348dd96e8f71d40a151d52e0,Ethan Arrowood,2023-04-06 18:18:04+00:00,GitHub,2023-04-06 18:18:04+00:00,"[cli] refactor pkg.ts into `@vercel-internals/get-package-json` (#9719)

Extracts the logic from `pkg.ts` into a new utility function
`getPackageJSON` from `@vercel-internals/utils`.

---------

Co-authored-by: Nathan Rajlich <n@n8.io>"
b62c40586a899e48d8b163f45fff25e12b2b7b6e,JJ Kasper,2023-04-06 17:37:24+00:00,GitHub,2023-04-06 17:37:24+00:00,"[next] Update allowQuery test (#9758)

These values are now expected to be prefixed so we can isolate them from normal query params. 

x-ref: https://github.com/vercel/vercel/actions/runs/4624385719/jobs/8179201620?pr=9719#step:8:2982"
d07eb34e38a23d76938af20fbcfedd1842c5df29,Vercel Release Bot,2023-04-06 16:14:07+00:00,GitHub,2023-04-06 16:14:07+00:00,"[tests] Update Gatsby fixture versions (#9760)

Automatically generated PR to update Gatsby fixture versions in `@vercel/static-build`"
46d0503361a28cba7b09cc1a6dc843d6014d1265,Ethan Arrowood,2023-04-06 15:56:04+00:00,GitHub,2023-04-06 15:56:04+00:00,"Fix update gatsby fixture cron job (#9725)

This PR fixes the gatsby fixture update script to correctly create pull
requests after it updates the fixtures."
349df907a84022ccd7b72f10bb7cf0d9cb711dca,Steven,2023-04-06 01:10:00+00:00,GitHub,2023-04-06 01:10:00+00:00,"[tests] Skip broken test temporarily (#9753)

Currently, `next@canary` is broken so we should temporarily skip this
test until it can be fixed


https://github.com/vercel/vercel/actions/runs/4622527617/jobs/8176298610?pr=9719#step:8:1695

---------

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>
Co-authored-by: Ethan Arrowood <ethan.arrowood@vercel.com>"
e5f5ba0ae8281b2b7a5e971a230d6f4dd1287f3c,Espen Hovlandsdal,2023-04-05 22:04:27+00:00,GitHub,2023-04-05 22:04:27+00:00,"[frameworks][fs-detectors] Use correct ""license"" field in `package.json` (#9696)

Makes the ""license"" field in these two packages' `package.json` files
be consistent with the LICENSE file in the root of the repository."
b2ccbf4881e52081d8a612e7ea4ff5e4d5e92449,Steven,2023-04-05 15:17:57+00:00,GitHub,2023-04-05 15:17:57+00:00,"[tests] update pnpm version to 7.31.0 (#9751)

- Closes #9750"
434c794713608a03fa9e05b489da9eb0d9e2604d,Kiko Beats,2023-04-04 16:49:41+00:00,GitHub,2023-04-04 16:49:41+00:00,"[tests] move test files to subdirectory (#9749)

Some unit tests didn't run since Aug 2022 because they are not included as part of the testing command.

This PR introduce `unit` and `integration` folders for testing, so anything that it's placed there will be run as part of the testing command."
d8f5052d9a93646b88770e5336e2b497a1a44623,Vercel Release Bot,2023-03-31 21:49:36+00:00,GitHub,2023-03-31 21:49:36+00:00,"[remix] Upgrade @remix-run/dev to version 1.15.0 (#9740)

This auto-generated PR updates @remix-run/dev to version 1.15.0"
10d14488db21fe5c6ee4aa52b495663ed7027e1c,Nathan Hammond,2023-03-31 21:02:30+00:00,GitHub,2023-03-31 21:02:30+00:00,"[fs-detectors] Fix turbo@1.8 all filters are inferred (#9680)

We no longer need to specify the active folder for `turbo` to identify the context correctly."
c29f2b2fbd5e36cc8395b81fed59fffe9803e886,Sean Massa,2023-03-31 20:04:02+00:00,GitHub,2023-03-31 20:04:02+00:00,"[tests] update typescript version used in next fixtures (#9739)

Updates the typescript version in next fixtures to accommodate newer syntax used in types for `next@canary`."
46348201b4eadb03b403f99dc5574c31d2b3926e,Nathan Rajlich,2023-03-29 19:25:26+00:00,Nathan Rajlich,2023-03-29 19:25:26+00:00,"Publish Stable

 - @vercel/build-utils@6.7.0
 - vercel@28.18.3
 - @vercel/client@12.4.8
 - @vercel/fs-detectors@3.8.8
 - @vercel/gatsby-plugin-vercel-builder@1.2.6
 - @vercel/go@2.4.3
 - @vercel/hydrogen@0.0.61
 - @vercel/next@3.7.3
 - @vercel/node@2.10.2
 - @vercel/python@3.1.57
 - @vercel/redwood@1.1.13
 - @vercel/remix-builder@1.8.3
 - @vercel/ruby@1.3.74
 - @vercel/static-build@1.3.21"
509926545eea1c7ddde4484e7b75c03560efb74e,Nathan Rajlich,2023-03-29 19:11:09+00:00,GitHub,2023-03-29 19:11:09+00:00,[build-utils] Rename Lambda `experimentalResponseStreaming` prop to `supportsResponseStreaming` (#9721)
70c8b32cf0ca2ad52a2a342ab4d7e70bb868af28,Sean Massa,2023-03-29 07:44:42+00:00,GitHub,2023-03-29 07:44:42+00:00,"[tests] Split CLI integration tests into chunks (#9688)

Welcome to the grand splitting of CLI integration tests:

- replaced `test-cli` test suite with `test-e2e`
- made some small fixes along the way
- split integration tests into 3 files
- moved shared logic to `packages/cli/test/helpers/*`
- simplified `_execa` / `execa` / `execute` usage into `execCli` and `exec`
    - simplified arguments required to make these work
- defaulted `execCLI` to set `NO_COLOR=1` to make assertions simpler in tests that aren't testing color/emoji support
- expanded functionality of `formatOutput` to handle error states
- centralized temp dir handling and cleanup
- enhanced `waitForPrompt` to:
    - more clearly show what it was waiting for
    - support waiting for regex, string, or a function that returns a boolean
    - show what was the most recent thing it saw
    - end early if the process it's monitoring exits
- removed some test pollution where unnecessary, shifted some into `beforeAll`
- renamed unit tests helper from `setupFixture` to `setupUnitFixture` to avoid confusion with the new shared helper `setupE2EFixture`


Some of this could be pulled out into a separate PR, but the feedback cycle is a slog, which this PR is helping to address. I'd be happy to discuss what could be pulled out, but I'd also be happy to get the whole thing through.

---

Wait for prompt failures:

<img width=""939"" alt=""CleanShot 2023-03-27 at 10 24 21@2x"" src=""https://user-images.githubusercontent.com/41545/227987773-a3582549-32f9-4131-8a35-7be7cc265b66.png"">

---

Current Timing:

```
Tests / test-e2e (vercel, 1, ubuntu-latest) (pull_request) Successful in 3m
Tests / test-e2e (vercel, 2, ubuntu-latest) (pull_request) Successful in 8m
Tests / test-e2e (vercel, 3, ubuntu-latest) (pull_request) Successful in 8m
```

---

Before merge, I'll mark the original `CLI` integration test suite as no longer required."
54514a44afef48726220bc8be8d20f4fda8e8b4f,Sean Massa,2023-03-28 03:25:08+00:00,Sean Massa,2023-03-28 03:25:08+00:00,"Publish Stable

 - @vercel/build-utils@6.6.0
 - vercel@28.18.2
 - @vercel/client@12.4.7
 - @vercel/fs-detectors@3.8.7
 - @vercel/gatsby-plugin-vercel-builder@1.2.5
 - @vercel/go@2.4.2
 - @vercel/hydrogen@0.0.60
 - @vercel/next@3.7.2
 - @vercel/node-bridge@4.0.0
 - @vercel/node@2.10.1
 - @vercel/python@3.1.56
 - @vercel/redwood@1.1.12
 - @vercel/remix-builder@1.8.2
 - @vercel/ruby@1.3.73
 - @vercel/static-build@1.3.20"
0db8fadf7411c748740689c23a5145e1901b831a,Ethan Arrowood,2023-03-27 23:07:39+00:00,GitHub,2023-03-27 23:07:39+00:00,"[build-utils] add pnpm v8 auto detection (#9720)

Adds automatic detection for pnpm v8 based on lockfile v6"
6f01e5ab757535e1c18198fdca10f5f681959a36,Sean Massa,2023-03-27 15:18:16+00:00,GitHub,2023-03-27 15:18:16+00:00,"[cli] support `build -y` shorthand (#9717)

The `build` command wasn't supporting the `-y` shorthand for `--yes`. Now it does.

I looked at the other uses and they all seem fine."
78d45f9e7e96c1acf9d15bf3380cb862b3bd5f53,Kiko Beats,2023-03-26 08:34:12+00:00,GitHub,2023-03-26 08:34:12+00:00,"[node-bridge] add feature flags support (#9713)

This PR allows executing conditional logic based in feature flags.

---------

Co-authored-by: Steven <steven@ceriously.com>"
22e1a6a9ce193373dbfe3a08d5385b6ec73a1b45,Kiko Beats,2023-03-24 19:12:36+00:00,GitHub,2023-03-24 19:12:36+00:00,"[node-bridge]: remove API Gateway normalization (#9711)

We no longer use since a long time ago"
8391734b5ef1c8a98afcf2db94ea3eb6955b52e5,Steven,2023-03-24 05:45:27+00:00,GitHub,2023-03-24 05:45:27+00:00,"[build-utils] Fix system env var detection for prefixed env vars (#9709)

This PR fixes a bug that was causing too many env vars to be exposed to the frontend by adding the framework `envPrefix`.

Some frameworks, such as CRA, will include all of these in the frontend even if not explicitly used so we must only prefix known [System Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables/system-environment-variables).

This PR adds an allowlist to ensure this is handle properly.

- Fixes https://linear.app/vercel/issue/VCCLI-639"
6a7fa1526c6652c24350ef4797664a945775cf52,Sean Massa,2023-03-23 19:45:33+00:00,Sean Massa,2023-03-23 19:45:33+00:00,"Publish Stable

 - vercel@28.18.1
 - @vercel/gatsby-plugin-vercel-builder@1.2.4
 - @vercel/next@3.7.1
 - @vercel/node@2.10.0
 - @vercel/remix-builder@1.8.1
 - @vercel/static-build@1.3.19"
64b15d2409bb05cba1021a65ce0f8457550b7c11,Nathan Rajlich,2023-03-23 19:35:46+00:00,GitHub,2023-03-23 19:35:46+00:00,"[remix] Fix zero matching on sub catch-all routes (#9707)

Fixes https://github.com/vercel/remix/issues/20."
40f73e7978efe63100afc1c3f395e6ad2a3a2328,Gal Schlezinger,2023-03-23 17:48:49+00:00,GitHub,2023-03-23 17:48:49+00:00,"[node] support node:[lib] in vc dev (#9694)

- [node] add edge-node-compat-plugin
- [node] implement edge-handler"
4c9ca27195815e9749151fe552e6d75fbeb2ec15,Nathan Rajlich,2023-03-23 15:35:05+00:00,GitHub,2023-03-23 15:35:05+00:00,"[examples] Remove `entry.server.tsx` file from ""remix"" template (#9698)

This file is now optional, and a default implementation is used when the
file does not exist."
a847ef43fda6036d2089271f75824c08eefcf1e7,Steven,2023-03-23 15:34:46+00:00,GitHub,2023-03-23 15:34:46+00:00,"[tests] Try publishing with provenance (#9706)

This is a follow up to #9583 since it didn't work as expected."
3b466232a9db629347795ec8d961dd5179a4deb5,JJ Kasper,2023-03-22 21:36:40+00:00,GitHub,2023-03-22 21:36:40+00:00,"[next] Remove extra env variables (#9704)

These env variables were temporarily added to bust turbo/nx cache although this should no longer be needed as a proper fix has been landed in Next.js itself. 

x-ref: [slack thread](https://vercel.slack.com/archives/C04Q0GWSB8W/p1679518040946589)"
efdeea9db221d866b07e81b7cc27421d6292cd88,Chris Barber,2023-03-22 19:39:36+00:00,GitHub,2023-03-22 19:39:36+00:00,"[tests] Disable Turbo's update notifier (#9302)

Since switching to the canary releases of Turbo, we are seeing the
update notification often. We have a cron job
(https://github.com/vercel/vercel/pull/9301) that will keep this
up-to-date for us, so we don't need to have Turbo notify us of updates.

<img width=""587"" alt=""image""
src=""https://user-images.githubusercontent.com/97262/214372374-a2682014-2deb-4942-b694-fd140c26a6ef.png"">"
ab9915af32e54338845f6ff32340dd0189474c55,Sean Massa,2023-03-22 17:37:51+00:00,Sean Massa,2023-03-22 17:37:51+00:00,"Publish Stable

 - @vercel/build-utils@6.5.0
 - vercel@28.18.0
 - @vercel/client@12.4.6
 - @vercel/fs-detectors@3.8.6
 - @vercel/gatsby-plugin-vercel-builder@1.2.3
 - @vercel/go@2.4.1
 - @vercel/hydrogen@0.0.59
 - @vercel/next@3.7.0
 - @vercel/node@2.9.14
 - @vercel/python@3.1.55
 - @vercel/redwood@1.1.11
 - @vercel/remix-builder@1.8.0
 - @vercel/ruby@1.3.72
 - @vercel/static-build@1.3.18"
d6dc27638c44f7676c50fae2a71c4c361beff372,Chris Barber,2023-03-22 17:16:44+00:00,GitHub,2023-03-22 17:16:44+00:00,"[build-utils][next] Add prerender source path (#9686)

Adds the `sourcePath` for ISR prerender lambdas so that the front end can associate derived pages with the source route.

There's an accompanying `api` PR (https://github.com/vercel/api/pull/17940) which uses this deployment's tarballs to test the functionality. Here's the result:

![image](https://user-images.githubusercontent.com/97262/226947180-a8e6b75e-f6a5-44fa-8034-08bd24569f3f.png)

Linear: https://linear.app/vercel/issue/VCCLI-410/communicate-how-functions-are-bundled"
0fb0601d1942c520f1291bb3421f28367ad1f8a1,Sean Massa,2023-03-22 16:31:44+00:00,GitHub,2023-03-22 16:31:44+00:00,[node] Improve edge-handler-template error handling (#9697)
ce25dec97d6dda8f16030bb8bca8be9af9a9b3e9,Nathan Rajlich,2023-03-22 01:06:14+00:00,GitHub,2023-03-22 01:06:14+00:00,"[remix] Inject `@vercel/remix` package instead of `@vercel/remix-entry-server` (#9684)

The `handleRequest()` function has been moved to the `@vercel/remix` package, so we can deprecate `@vercel/remix-entry-server` entirely and install `@vercel/remix` in the project instead, when there is no `app/entry.server.tsx` file defined in the project already."
20bd71ce70aee9e8aa969ea19ef9e9d2a70aaa3d,Nathan Rajlich,2023-03-21 23:59:49+00:00,GitHub,2023-03-21 23:59:49+00:00,"[node][remix] Update nft conditions to include ""edge-light"" for Edge Functions (#9700)"
4c77dab5cb480ff2e40b1003e8446b171a15f30a,Sean Massa,2023-03-18 18:21:45+00:00,GitHub,2023-03-18 18:21:45+00:00,"[tests][cli] convert CLI integration tests to TS (#9672)

Converts the CLI integration tests to TypeScript. This will make it easier to pick apart the test pollution."
151b0dfb636e9fefdea231e2ff357ba2b6ec4863,Sean Massa,2023-03-17 22:12:23+00:00,GitHub,2023-03-17 22:12:23+00:00,"[cli] handle `BUILD_UTILS_SPAWN_*` errors (#9689)

Some condition in the system caused `BUILD_UTILS_SPAWN_1` errors to be thrown for failed deployments. The error handling logic wasn't handling this properly, causing the error message to never show up in the output.

```
Error: Unexpected error. Please try again later. ()
```"
42e9bbea5bd25a170bf95f56f8d12e81578d94af,Nathan Rajlich,2023-03-17 21:47:05+00:00,GitHub,2023-03-17 21:47:05+00:00,"[examples] Update ""remix"" template to use `@vercel/remix` package (#9683)"
c0471302e968efc8e0a7d810e8b5871fb342ef9d,Steven,2023-03-16 23:57:33+00:00,GitHub,2023-03-16 23:57:33+00:00,"[cli] Ignore `vc build` subdirectory warning on vercel (#9685)

This warning is only relevant when running `vc build` locally so we can hide it for Vercel deployments.

I noticed this in the build logs here:

<img width=""862"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/225774670-9b4aecf5-d020-489f-819f-7b55ce96f877.png"">"
b2c68f1301b6a5eb41b6261b7faac6a8fa4c53eb,Nathan Rajlich,2023-03-16 19:23:51+00:00,Nathan Rajlich,2023-03-16 19:23:51+00:00,"Publish Stable

 - @vercel/build-utils@6.4.0
 - vercel@28.17.0
 - @vercel/client@12.4.5
 - @vercel/frameworks@1.3.3
 - @vercel/fs-detectors@3.8.5
 - @vercel/gatsby-plugin-vercel-builder@1.2.2
 - @vercel/go@2.4.0
 - @vercel/hydrogen@0.0.58
 - @vercel/next@3.6.7
 - @vercel/node@2.9.13
 - @vercel/python@3.1.54
 - @vercel/redwood@1.1.10
 - @vercel/remix-builder@1.7.0
 - @vercel/routing-utils@2.1.11
 - @vercel/ruby@1.3.71
 - @vercel/static-build@1.3.17
 - @vercel/static-config@2.0.14"
9712640fe39d7d72e1bd10ec73291015ca97a15d,Vedant,2023-03-16 19:11:49+00:00,GitHub,2023-03-16 19:11:49+00:00,"[go] Add support for Go 1.20 (#9367)

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
0dd3711f63f5d25e8914c823e18f7a3428ec72b5,Chris Barber,2023-03-16 19:05:09+00:00,GitHub,2023-03-16 19:05:09+00:00,"[go] Go builder improvements (#9576)

This PR fixes a handful of Go builder issues all related to the selected Golang version being used to build the function:

- `go.mod` version ignored for `vc build` and `vc dev`, uses system `PATH` version only
- `vc dev` fails if `go.mod` does not exist
- If the analyze bin doesnt exist, downloads golang into `.vercel/cache/golang` instead of a global shared dir
- When running `vc dev`, doesnt reuse go build code/common settings
- go tidy fails when `go.mod` set to 1.19 or 1.20, but 1.18 or older is installed
- `vc build` builds wrong arch on Apple Silicon/arm64
- `vc build` on Windows doesn't properly resolve ""builds"" in `vercel.json` due to posix separator issue
- `vc build` on Windows fails with `package <pkg/name> is not in GOROOT` due to posix separator issue
- Removed `actions/setup-go` from all test workflows

I added a test that tests the `go tidy` issue."
4b657debed28e32143a5c386b06b8acf27705615,Chris Barber,2023-03-16 18:31:43+00:00,GitHub,2023-03-16 18:31:43+00:00,"[cli] Honor `--local-config` when present during `vc build` (#9675)

As reported https://github.com/vercel/vercel/discussions/9648, `vc build` does not honor the `--local-config <file>` option.

`vc build` will only load the `vercel.json` (or `now.json`) in the `workPath` which is based on the `rootDirctory`.

If `--local-config` is specified in the command line arguments, then it should take precedence."
ffdca76155a62a8832887d1e30d9ece58a87c616,Sean Massa,2023-03-16 18:00:56+00:00,GitHub,2023-03-16 18:00:56+00:00,"[gatsby-plugin-vercel-builder] link instead of move (#9673)

When creating the `./vercel/output/static` dir...

**Moving the `public` dir** is what currently happens. This causes Gatsby to believe that the build was not complete:

> info We've detected that the Gatsby cache is incomplete (the .cache directory exists but the public directory does not). As a precaution, we're deleting your site's cache to ensure there's no stale data.

**Copying the `public` dir** is not an option because it can cause a build to run out of space.

**Symlinking the `public` dir** would work, but it would require more changes throughout the system to make sure the symlink was followed properly.

**Hard Linking the `public` dir's files** is the best option. This PR links the directories instead of moving them. We did look for a library that already does the `hardlinkFileTree` thing, but couldn't find one.

---

**Testing**

This was manually tested with real deployments.

---

* paired with @TooTallNate 
* [user report](https://github.com/vercel/vercel/issues/9452#issuecomment-1432858615)"
af7b34aa45e04021c757bd71e1f67b59d2b687b6,Vladislav Ponomarev,2023-03-16 16:01:07+00:00,GitHub,2023-03-16 16:01:07+00:00,"[node] Handle multi-protocol in Edge Functions (#9502)

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
fix #9501"
e210977a9c05aca571ae4b4fadb1511427226fbc,Sean Massa,2023-03-16 14:41:40+00:00,GitHub,2023-03-16 14:41:40+00:00,"[tests] update python tests to use zero config (#9668)

This PR is some cleanup before splitting python e2e tests.

Changes:

- use `probes.json`
- use `/api` autodetection instead of `builds` array

---

I was also trying to figure out why these tests are so much faster when run locally (293s) vs. CI (1099s). I encountered issues trying to view the build logs for the deployments that are made."
1c2ef371735cd922de150245b602cf07a0db2cff,Nathan Rajlich,2023-03-16 09:47:13+00:00,GitHub,2023-03-16 09:47:13+00:00,"[remix] Remove symlink creation warning (#9679)

We're now going to encourage users to use `@vercel/remix` instead of `@remix-run/node`. So switch the symlink warning to a `debug()` call instead."
65bbcd3e6282300a261927e98a5380f326a1986c,matamatanot,2023-03-15 00:52:04+00:00,GitHub,2023-03-15 00:52:04+00:00,"[Astro example] Replace npm with pnpm (#9662)

Based on lockfile and `.npmrc`, pnpm seems to be correct."
5caf73380d2120e151772299296c76970930a8ef,Vercel Release Bot,2023-03-15 00:32:54+00:00,GitHub,2023-03-15 00:32:54+00:00,"[remix] Upgrade @remix-run/dev to version 1.14.2 (#9676)

This auto-generated PR updates @remix-run/dev to version 1.14.2"
395929b36a9a68f8b774c3e1a82e0ad8d5cbf37a,Sean Massa,2023-03-14 16:18:56+00:00,GitHub,2023-03-14 16:18:56+00:00,"[tests] remove comment (#9671)

We don't need this comment."
0e235a926a067d697879be322b5629b446e0e2c1,Sean Massa,2023-03-14 15:48:27+00:00,GitHub,2023-03-14 15:48:27+00:00,"[tests][cli] CLI Integration tests - better failure messages (#9667)

Co-authored-by: Steven <steven@ceriously.com>"
f1bdc0bfd105f616776e2b69dabb6bd7ee63bd06,Nathan Rajlich,2023-03-13 22:10:52+00:00,GitHub,2023-03-13 22:10:52+00:00,"[remix] Rename `@vercel/remix` to `@vercel/remix-builder` (#9665)

We're changing the name of the Remix Builder to free up the name `@vercel/remix` for user-facing usage within Remix applications."
59ca86365cc6100de3465ee7adc9fc8cd468865a,Amy,2023-03-13 21:27:50+00:00,GitHub,2023-03-13 21:27:50+00:00,"[docs] Update issue and discussion templates (#9666)

Updates the existing [issue
template](https://github.com/vercel/vercel/issues/new/choose) and adds
[new discussion
forms](https://docs.github.com/en/discussions/managing-discussions-for-your-community/syntax-for-discussion-category-forms)
to direct Vercel platform questions to
https://github.com/vercel/community/discussions

---------

Co-authored-by: Steven <steven@ceriously.com>"
13d54b2095382daf74188220875f523183c09be5,Nathan Rajlich,2023-03-13 20:47:56+00:00,GitHub,2023-03-13 20:47:56+00:00,"[remix] Support optional `entry.{server,client}.tsx` file (#9620)

Remix v1.14.0 added support for having no `app/entry.server.tsx`/`app/entry.client.tsx` files in a project (there are default versions bundled into `@remix-run/dev`). Projects configured like this are currently failing because we symlink our forked version of the `remix` CLI into the project, so it cannot resolve the necessary modules at build time.

To solve this, instead of relying on the default versions of these files in `@remix-run/dev` package, we'll include our own versions in `@vercel/remix`, and physically copy them into the project dir. This way, the modules used will be properly resolved relative to the project's own `node_modules` dir.

Our default version of `app/entry.server.tsx` is also slightly different then upstream one, because it uses `@vercel/remix-entry-server` to enable isomorphic React streaming on both Node + Edge runtimes. Because of this, if that dependency is not present, then we'll automatically install the dependency at build-time."
bada86b8d69a2e8d8fe4a90d16d0ab2252b7212b,Steven,2023-03-13 19:55:59+00:00,GitHub,2023-03-13 19:55:59+00:00,"[tests] Add prettier check (#9664)

This PR fixes the formatting on several files that were never run through `prettier`.

It also makes sure to run `prettier` in CI to to [fail fast](https://github.com/vercel/vercel/actions/runs/4408442998/jobs/7723453978) when the incorrect formatting is attempted."
7ec377757d14ccb3252e430d139f0b3fcd477670,Ethan Arrowood,2023-03-10 19:23:38+00:00,GitHub,2023-03-10 19:23:38+00:00,"[cli] update monorepo default setting log (#9654)

Updates the `setMonorepoDefaultSetting` log"
8040c8806b1e468a72dbf3c841266a06c02eef2a,Vercel Release Bot,2023-03-10 16:34:54+00:00,GitHub,2023-03-10 16:34:54+00:00,"[examples] Upgrade Next.js to version 13.2.4 (#9647)

This auto-generated PR updates Next.js to version 13.2.4"
2b1c8d89d41c15625f33bfe40699be6289949d9a,Chris Barber,2023-03-10 15:55:13+00:00,GitHub,2023-03-10 15:55:13+00:00,"[docs] Add more info about prepareCache (#9644)

I felt the `prepareCache()` docs could use an additional note and example."
c5e9ccfacf2b9fcd82686550813171d4ed36f6c0,Sean Massa,2023-03-10 00:34:03+00:00,GitHub,2023-03-10 00:34:03+00:00,"[tests] convert CLI Integration tests from ava to jest (#9632)

Co-authored-by: Steven <steven@ceriously.com>"
66fe3db888ff1d736023ce7cb70e8cdd7ff69ed3,Sean Massa,2023-03-08 22:56:51+00:00,GitHub,2023-03-08 22:56:51+00:00,"[tests] add tests to edge handler template (#9528)

The Edge Handler wrapping logic we add during `vc dev` was not testable. This PR refactors it to be testable and adds some basic tests."
765ec05cea66fac9cf8c42d01915f90a4aaea17d,Steven,2023-03-08 20:50:45+00:00,GitHub,2023-03-08 20:50:45+00:00,"[next] Fix `i18n` for `app` dir and sublocales (#9623)

- Applies this fix again #9582
- Applies a test for https://github.com/orgs/vercel/discussions/1714"
413706d72aed50a5e16ddb3f899bbc1aa0e6a25d,Chris Barber,2023-03-08 18:44:13+00:00,GitHub,2023-03-08 18:44:13+00:00,"[tests] Bump test timeouts for slow tests (#9631)

This PR address the following slow tests:

* https://linear.app/vercel/issue/VCCLI-560/flakey-test-login-with-no-color
* https://linear.app/vercel/issue/VCCLI-561/flakey-test-[vercel-dev]-04-create-react-app
* https://linear.app/vercel/issue/VCCLI-563/flakey-test-build--should-build-with-vercelnode
* https://linear.app/vercel/issue/VCCLI-574/flakey-test-build-output-api-v1-should-detect-the-output-format
* https://linear.app/vercel/issue/VCCLI-578/flakey-test-importbuilders--should-install-and-import-1st-party
* https://linear.app/vercel/issue/VCCLI-580/flakey-test-creategitmeta--detects-dirty-commit"
9bc8817f920fabb24527604c13c6c61e82586cd0,Sean Massa,2023-03-08 16:42:11+00:00,GitHub,2023-03-08 16:42:11+00:00,"[tests] remove eslint from fixture (#9629)

In a previous PR https://github.com/vercel/vercel/pull/9622/files#diff-508a8f08333e1f42e2b2f02e99081c181802b6b2e7baa4e75c18e51e1e703ce4, this fixture was added which contained an eslint config file. We do have these fixtures eslint ignored, but it seems the presence of this config file re-enables it. This causes eslint failures inside the fixture to bubble up and fail lint checks.

This PR removes eslint from the fixture."
9da41dcafa6b94218b01cde5743cac80d36f5ffc,Steven,2023-03-08 15:17:44+00:00,GitHub,2023-03-08 15:17:44+00:00,"[tests] Change test-unit to test-lint (#9627)

In a previous PR (#9615) the unit tests were moved to separate jobs in
the `test.yml` workflow. So we can now change the `test-unit.yml`
workflow to simply be `test-lint.yml` to avoid redundancy.

I also checked to see if this would affect code coverage but it turns
out codecov was [disabled a long time
ago](https://app.codecov.io/gh/vercel/vercel)."
f1ab5704f1f9c67820442f8987cf69b163514e7c,Steven,2023-03-08 15:04:33+00:00,GitHub,2023-03-08 15:04:33+00:00,"[cli] Fix example list api to exclude `node_modules` (#9626)

<img width=""219"" alt=""image""
src=""https://user-images.githubusercontent.com/229881/223744886-e4bf430d-078c-49c4-81c3-0c30dce08f2e.png"">"
d8cf3e8831c2f79a84488db22a331cb4e33a7803,Nathan Rajlich,2023-03-08 06:58:18+00:00,GitHub,2023-03-08 06:58:18+00:00,"[remix] Add turborepo monorepo E2E test (#9622)

Adds a Remix E2E test with a Turborepo monorepo configuration."
c06209901c504ee4033233259beff751f996ed42,Steven,2023-03-07 23:50:21+00:00,GitHub,2023-03-07 23:50:21+00:00,"[tests] Run unit tests concurrently in chunks (#9615)

We can separate each package `test-unit` into a separate job. This will help isolate problems and we can re-run CI for a specific package."
f20756344e000ddd2fd50ddbf1e21478536d1d68,Ethan Arrowood,2023-03-07 21:52:01+00:00,GitHub,2023-03-07 21:52:01+00:00,"[internals] Initialize @vercel-internals/utils and create @vercel-internals/tsconfig (#9618)

- Creates `@vercel-internals/tsconfig`
- Changes `@vercel-internals/types` to depend on `@vercel-intenrals/tsconfig`
- Creates `@vercel-internals/utils`

Moving these to another PR:
- ~Moves all top level util files from `@vercel/cli` to `@vercel-internals/utils`~
- ~Updates all relevant imports within `@vercel/cli` to use `@vercel-internals/utils`~"
21a440b83262760ccae70f5c58dc73b3718182a5,Steven,2023-03-07 18:56:14+00:00,Steven,2023-03-07 18:56:14+00:00,"Publish Stable

 - @vercel/build-utils@6.3.4
 - vercel@28.16.15
 - @vercel/client@12.4.4
 - @vercel/fs-detectors@3.8.4
 - @vercel/gatsby-plugin-vercel-builder@1.2.1
 - @vercel/go@2.3.11
 - @vercel/hydrogen@0.0.57
 - @vercel/next@3.6.6
 - @vercel/node@2.9.12
 - @vercel/python@3.1.53
 - @vercel/redwood@1.1.9
 - @vercel/remix@1.6.2
 - @vercel/ruby@1.3.70
 - @vercel/static-build@1.3.16"
48d925f10589db37f21cb22d86cf749aacd3a2ba,Steven,2023-03-07 18:17:14+00:00,Steven,2023-03-07 18:17:14+00:00,"Publish Stable

 - @vercel/build-utils@6.3.3
 - vercel@28.16.14
 - @vercel/client@12.4.3
 - @vercel/fs-detectors@3.8.3
 - @vercel/gatsby-plugin-vercel-builder@1.2.0
 - @vercel/go@2.3.10
 - @vercel/hydrogen@0.0.56
 - @vercel/next@3.6.5
 - @vercel/node@2.9.11
 - @vercel/python@3.1.52
 - @vercel/redwood@1.1.8
 - @vercel/remix@1.6.1
 - @vercel/ruby@1.3.69
 - @vercel/static-build@1.3.15"
011f6ff1508cd5d77c6499d48ad15acabbdae019,Steven,2023-03-07 18:15:28+00:00,GitHub,2023-03-07 18:15:28+00:00,"Revert ""[next] Fix incorrect 404 when `i18n` and `appDir` configured"" (#9617)

Reverts vercel/vercel#9582

https://github.com/orgs/vercel/discussions/1714"
cd09a38c198f2d403e8df8c025e749479d508326,Sean Massa,2023-03-07 17:21:53+00:00,GitHub,2023-03-07 17:21:53+00:00,"[tests] skip recent flakey tests (#9613)

This test has been flakey on mac for a long time."
af239b5fa59e672ad7e2f0642a5fe7bfe97ded24,Ethan Arrowood,2023-03-07 15:44:25+00:00,GitHub,2023-03-07 15:44:25+00:00,"[internals] Create `@vercel-internals/types` (#9608)

Moves the type file out of the cli package and into its own standalone
package. utilizes `@vercel/style-guide` too for typescript config,
eslint, and prettier."
38244c8ed6e90f6c6845afdf281ec7eb6532adc4,Chris Barber,2023-03-07 06:04:41+00:00,GitHub,2023-03-07 06:04:41+00:00,"[next] Populate middlewareRawSrc using middleware originalSource (#9602)

Next.js will pass the original middleware matching routes through to the middleware manifest once https://github.com/vercel/next.js/pull/46753 lands. This PR will take those original values and put them in the middleware route `middlewareRawSrc` property.

NOTE: The tests will need to be updated once the Next.js version is updated in the fixtures."
57e8ec13cf9d6cefd79e63a80c0f854bfaac245c,Nathan Rajlich,2023-03-07 00:50:37+00:00,GitHub,2023-03-07 00:50:37+00:00,"[remix] Support optional static path segments (#9607)

Fixes https://github.com/orgs/vercel/discussions/1707."
2e8423e24e1f2aa746d0b2ddb8152bc3cc857ba1,Nathan Rajlich,2023-03-06 21:44:23+00:00,GitHub,2023-03-06 21:44:23+00:00,"[gatsby] Remove ""gatsby"" dependency, use typebox instead of ajv for validation (#9606)

The ""gatsby"" dependency is large and relies on native packages (""sharp"" specifically, which are error prone because it attempts to download a precompiled binary, of which the CDN has been down before causing us to not be able to merge anything).

The package is only used for TypeScript types, and we've decided that including the package only for those types is not worth the trouble. The existing JSON schemas already validate at runtime that the Gatsby redux store provides the values that we depend on.

`ajv` was ditched in favor of TypeBox types, which provide both JSON Schema and validation using a simpler syntax."
a92c68e0ffc4d91fc2e11e703da445c285f0c926,Sean Massa,2023-03-06 19:47:36+00:00,Sean Massa,2023-03-06 19:47:36+00:00,"Publish Stable

 - vercel@28.16.13
 - @vercel/next@3.6.4
 - @vercel/remix@1.6.0"
84f3a5bc1b3f32f28d230248e927b5fd117b9bae,Vercel Release Bot,2023-03-06 16:26:41+00:00,GitHub,2023-03-06 16:26:41+00:00,"[tests] Upgrade Turbo to version 1.8.3 (#9604)

This auto-generated PR updates Turbo to version 1.8.3"
186bd9bb518c19d48cdd588073cff40b1a30b784,JJ Kasper,2023-03-04 01:50:54+00:00,GitHub,2023-03-04 01:50:54+00:00,"[next] Fix api prefixed app routes serverless streaming (#9603)

Fixes: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1677753703572609)"
9ae84ba05fd3385ed00c2dccc9d94caa3c32ccc3,Nathan Rajlich,2023-03-03 21:33:12+00:00,GitHub,2023-03-03 21:33:12+00:00,"[remix] Add test for escaped route paths (#9516)

In Remix routes, you can [use bracket notation to escape the filesystem routing behavior](https://remix.run/docs/en/1.14.0/file-conventions/routes-files#escaping-special-characters). For example `app/routes/receipt[.]pdf.tsx` would be available at path `/receipt.pdf` (whereas, unescaped, it would be at `/receipt/pdf`).

This adds an e2e test for that behavior."
a638755e95ceea3bb4ee430a35808da297025dcd,Jeemin Choi(),2023-03-03 20:27:11+00:00,GitHub,2023-03-03 20:27:11+00:00,"[cli] change patch-inquirer-legacy to patch-inquirer (#8919)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
15eb018f849da2b30248ae17c4fcf86142b444db,Nathan Rajlich,2023-03-03 20:02:27+00:00,GitHub,2023-03-03 20:02:27+00:00,"[remix] Clean up dev symlink upon config error (#9595)

Move the try/catch block to immediately after the symlink call, so that if reading the `remix.config.js` file throws an error or if there's an error parsing the `export const config` in a route, the catch block will clean up after itself properly.

I recommend reviewing with [whitespace changes hidden](https://github.com/vercel/vercel/pull/9595/files?w=1)."
7f89aca52cad7427a0ab6dfbdacb0709e7eabbdc,Ethan Arrowood,2023-03-03 18:18:14+00:00,GitHub,2023-03-03 18:18:14+00:00,"[tests] Add more remix tests (#9600)

Adds some more tests to the remix project. 

- 05-root-only : tests a remix app with only a `root.jsx` route.
  - https://kentcdodds.com/blog/super-simple-start-to-remix
- 06-v2-routing : tests the remix v2 routing works"
dc9ec1bc6deee215d04a8fb1483e2370dabad56a,Nathan Rajlich,2023-03-03 04:29:55+00:00,GitHub,2023-03-03 04:29:55+00:00,[remix] Return `framework.version` in build result (#9596)
df93b0124877c0ca33cc53b7189cb7ce3ae2e3d3,Nathan Rajlich,2023-03-03 01:58:15+00:00,GitHub,2023-03-03 01:58:15+00:00,[examples] Run `prettier` on Remix template (#9594)
fb37ad22abb6b2c4d53048455b245d3929fd8da8,Nathan Rajlich,2023-03-02 23:28:26+00:00,GitHub,2023-03-02 23:28:26+00:00,"[remix] Fix support for optional path params (#9590)

Changes the way that routes with optional params are stored on Vercel to not use `?` in the name, because it's not possible to have a route destination with a `?` that's pointing to a function.

So instead of the function with a name such as `:lang?`, it will be stored on Vercel with a name like `(:lang)`, which can be routed to."
684f69bc5b55b71361b470a0947a59424dec13fd,Vercel Release Bot,2023-03-02 20:57:25+00:00,GitHub,2023-03-02 20:57:25+00:00,"[remix] Upgrade @remix-run/dev to version 1.14.0 (#9593)

This auto-generated PR updates @remix-run/dev to version 1.14.0"
ddae78458d8c2461b3b1264e56dbc3e1f68caf56,Ethan Arrowood,2023-03-02 19:54:29+00:00,GitHub,2023-03-02 19:54:29+00:00,Fix remix updater workflow when fetching latest version (#9592)
fc614a7a9212ea0dd0c8ebcdf18db122768918d3,Nathan Rajlich,2023-03-02 17:00:40+00:00,Nathan Rajlich,2023-03-02 17:00:40+00:00,"Publish Stable

 - vercel@28.16.12
 - @vercel/remix@1.5.1"
6e4ea0774e76cdf9ad77e1de2d91a6d67ea35759,Nathan Rajlich,2023-03-02 16:58:00+00:00,GitHub,2023-03-02 16:58:00+00:00,"[remix] Make symlink logic of `@remix-run/dev` work in monorepos (#9591)

Utilize `require.resolve()` to determine the correct location of
`@remix-run/dev`, instead of assuming it's in
""node_modules/@remix-run/dev"" relative to the project work path.

Fixes https://github.com/orgs/vercel/discussions/1671.

Manually tested with yarn and pnpm on this template:
https://github.com/remix-run/examples/tree/main/turborepo-vercel"
cfc1c9e818ebb55d440479cf0edf18536b772b28,Nathan Rajlich,2023-03-02 01:24:34+00:00,Nathan Rajlich,2023-03-02 01:24:34+00:00,"Publish Stable

 - vercel@28.16.11
 - @vercel/next@3.6.3
 - @vercel/remix@1.5.0"
62a872fc0e73cd3702385810c10671ae2a71c299,Vercel Release Bot,2023-03-02 00:10:12+00:00,GitHub,2023-03-02 00:10:12+00:00,"[remix] Upgrade @remix-run/dev to version 1.13.0-patch.2 (#9589)

This auto-generated PR updates @remix-run/dev to version 1.13.0-patch.2"
03b5bfbaa2a1245e45aa21631ef6d5da8dc5c936,Vercel Release Bot,2023-03-01 23:34:51+00:00,GitHub,2023-03-01 23:34:51+00:00,"[examples] Upgrade Next.js to version 13.2.3 (#9586)

This auto-generated PR updates Next.js to version 13.2.3"
aa305e5c66b78671edcdb69d04759d5536a312be,Nathan Rajlich,2023-03-01 23:08:44+00:00,GitHub,2023-03-01 23:08:44+00:00,"[remix] Add better error message when server build directory is missing (#9584)

Show a more helpful message instead of showing a cryptic error messsage:

> Error: ENOENT: no such file or directory, copyfile
'/var/task/node_modules/@vercel/remix/server-node.mjs' ->
'/vercel/path0/packages/web/build/server-node.mjs'

This is probably due to a bad user configuration (i.e. with Turbo), but
tell them to contact support anyways in case there is a different cause
that we would need to address."
2309c43fceb141e4e36bfaa49749b29f7467a81b,Ethan Arrowood,2023-03-01 21:50:23+00:00,GitHub,2023-03-01 21:50:23+00:00,"add vercel/remix-run-dev updater workflow (#9588)

Adds a github workflow and javascript updater script that will update
the `@remix-run/dev` version to the latest release of
`@vercel/remix-run-dev`"
0bbb06daa706f562e8591cd0a99b09ccd88ade5f,Nathan Rajlich,2023-03-01 21:45:10+00:00,GitHub,2023-03-01 21:45:10+00:00,"[remix] Support ""regions"", ""memory"" and ""maxDuration"" in static config (#9442)

Apply the `regions` configuration (for both Edge and Node) and `memory`/`maxDuration` (only for Node) in a page's static config export, i.e.

```js
export const config = { runtime: 'edge', regions: ['iad1'] }

// or for Node
export const config = { runtime: 'nodejs', regions: ['iad1'], maxDuration: 5, memory: 3008 }
```

Similar to `runtime`, these config values can be inherited from a parent layout route to apply to all sub-routes. Routes with common config settings get placed into a common server bundle, meaning that there may now be more than 2 functions created (previously was one Edge, one Node), allowing for more granularity between the server build bundles."
61de63d2859c740d49ba1d28288fb7242886420c,Nathan Rajlich,2023-03-01 03:10:42+00:00,GitHub,2023-03-01 03:10:42+00:00,"[remix] Split Edge and Node server builds using `serverBundles` config (#9504)

Utilize the [`serverBundles`](https://github.com/remix-run/remix/pull/5479) config option to generate two server bundle builds. One contains only the routes that should run in Node.js, and the other contains only the routes that should run in the Edge runtime. In the future we could update this configuration to generate more than two bundles to be more granular and allow for infinite scalability.

Because the `serverBundles` PR is not yet merged, this PR introduces usage of a forked version of `@remix-run/dev` which incorporates our changes. Hopefully usage of a fork is temporary, but it gets us unblocked for now."
1ca3704297a2b54a520058c9066256fd2b5434ee,Steven,2023-03-01 02:02:55+00:00,GitHub,2023-03-01 02:02:55+00:00,"[next] Fix incorrect 404 when `i18n` and `appDir` configured (#9582)

Fix incorrect 404 when visiting the `/` route with `i18n` and `appDir` configured"
ae4180b28771c7c570f77af9489bf9eb024d5e09,Nathan Rajlich,2023-03-01 01:02:43+00:00,GitHub,2023-03-01 01:02:43+00:00,"[tests] Use `probes.json` instead of `vercel.json` for e2e tests (#9556)

Makes it easier to test fixtures directly via CLI deployments.

Coincidentally, this also revealed that auto-detection of Remix apps wasn't working correctly if there's a `remix.config.mjs` file. So `@vercel/frameworks` is updated to account for that case as well."
40081cb3194013dc6df6879c8561303ffa5f14fa,Steven,2023-03-01 00:12:33+00:00,Steven,2023-03-01 00:12:33+00:00,"Publish Stable

 - vercel@28.16.10
 - @vercel/remix@1.4.3"
9200be61d2d382d229cb83fa8cbe23f49b7a0e38,Steven,2023-03-01 00:09:40+00:00,GitHub,2023-03-01 00:09:40+00:00,"[tests] Publish with npm@9 (#9583)

https://vercel.slack.com/archives/C04DUD7EB1B/p1676488464681929"
1390f6d2eeca4ead7025824e135644a433550af5,Nathan Rajlich,2023-02-28 22:51:58+00:00,GitHub,2023-02-28 22:51:58+00:00,"[remix] Gracefully handle symlink creation when updating Remix packages (#9569)

Fixes an edge-case error when changing the version of Remix and then making a deployment to Vercel when there is already an existing build cache:

> Error: EEXIST: file already exists, symlink '../.pnpm/@remix-run+server-runtime@1.5.0_biqbaboplfbrettd7655fr4n2y/node_modules/@remix-run/server-runtime' -> '/vercel/path0/node_modules/@remix-run/server-runtime'

This would happen because the symlink was created in a previous run, but no longer points to a valid path because it's a different version. To fix we'll delete the previous symlink when the target value does not match."
b78cfc9ba5587f943e55d6707033bac44ffdc09c,Nathan Rajlich,2023-02-28 22:16:05+00:00,GitHub,2023-02-28 22:16:05+00:00,[remix] Set `framework` property on Lambda / EdgeFunction (#9579)
803a9363f93c3f2be0f0ea2bce3ba64eefa78e04,Chris Barber,2023-02-28 21:32:23+00:00,Chris Barber,2023-02-28 21:32:23+00:00,"Publish Stable

 - vercel@28.16.9
 - @vercel/gatsby-plugin-vercel-analytics@1.0.8
 - @vercel/gatsby-plugin-vercel-builder@1.1.11
 - @vercel/node-bridge@3.1.14
 - @vercel/node@2.9.10
 - @vercel/static-build@1.3.14"
4a0a3b64a274c6421c9af8f4726570800e43a2cd,Chris Barber,2023-02-28 21:26:26+00:00,GitHub,2023-02-28 21:26:26+00:00,"[node] Added middlewareRawSrc to BOA route config (#9435)

Blocked by https://github.com/vercel/vercel/pull/9564

The build output's route configuration contains a compiled `src` from the list of `matchers` in middleware config, however we need to also save the original inputs so that we can render something meaningful in the web UI. The new prop added to the route is called `middlewareRawSrc` of type `string[]`.

This PR depends on https://github.com/vercel/api/pull/17231.

Linear: https://linear.app/vercel/issue/VCCLI-411/display-uncompressed-edge-middleware-matcher-show-the-list-of-matches"
347c2de3a2f2d1477253cf682a83adbeed63c9ec,Mehul Kar,2023-02-28 20:49:28+00:00,GitHub,2023-02-28 20:49:28+00:00,[tests] Adopt Workspace Configurations from turbo@1.8 (#9573)
a05cc117197d4d8daaa255ed04d5141af8851f32,Ethan Arrowood,2023-02-28 20:13:57+00:00,GitHub,2023-02-28 20:13:57+00:00,"[tests] Fix gatsby cron job script - git diff operation (#9577)

as titled"
55b999ea9b3c754acf444185df28e70354422a66,Ethan Arrowood,2023-02-28 20:05:31+00:00,GitHub,2023-02-28 20:05:31+00:00,"[tests] add missing -w option for pnpm in gatsby cron job script (#9575)

as titled"
8babc3694ff7fa3f28e2c5b5d65d313c1a5cd2a0,Ethan Arrowood,2023-02-28 19:59:58+00:00,GitHub,2023-02-28 19:59:58+00:00,"[tests] Fix gatsby cron job (#9574)

Changes logic so its a single npm call instead of multiple"
6dc03212169864a1d4d84ae4904d1561c6712c03,Ethan Arrowood,2023-02-28 19:40:05+00:00,GitHub,2023-02-28 19:40:05+00:00,"[tests] add missing __dirname from gatsby cron job script (#9572)

as titled"
3df8c057926582749594f81b4a9dda482b8d7982,Ethan Arrowood,2023-02-28 19:32:00+00:00,GitHub,2023-02-28 19:32:00+00:00,"[tests] Add cron job to update gatsby fixtures (#9510)

PR to add a cron job and script that automatically updates gatsby
fixture versions."
e0f8bc98202146eda0f2b85efac74b803654e786,Sean Massa,2023-02-28 16:26:29+00:00,Sean Massa,2023-02-28 16:26:29+00:00,"Publish Stable

 - @vercel/build-utils@6.3.2
 - vercel@28.16.8
 - @vercel/client@12.4.2
 - @vercel/edge@0.3.1
 - @vercel/frameworks@1.3.2
 - @vercel/fs-detectors@3.8.2
 - @vercel/gatsby-plugin-vercel-builder@1.1.10
 - @vercel/go@2.3.9
 - @vercel/hydrogen@0.0.55
 - @vercel/next@3.6.2
 - @vercel/node-bridge@3.1.13
 - @vercel/node@2.9.9
 - @vercel/python@3.1.51
 - @vercel/redwood@1.1.7
 - @vercel/remix@1.4.2
 - @vercel/routing-utils@2.1.10
 - @vercel/ruby@1.3.68
 - @vercel/static-build@1.3.13"
ebd2e1822c5e8180143254eae198aa8af4b9575c,Chris Barber,2023-02-28 03:59:06+00:00,GitHub,2023-02-28 03:59:06+00:00,"[routing-utils] Add missing 'middlewareRawSrc' to route schema (#9564)

Need to add `middlewareRawSrc` to route schema so the build container will accept the new property.

This PR blocks https://github.com/vercel/vercel/pull/9435.

Linear: https://linear.app/vercel/issue/VCCLI-411/display-uncompressed-edge-middleware-matcher-show-the-list-of-matches"
31bc2581f30f43a1ad358771bd4fd97bb082a98a,Steven,2023-02-27 21:23:49+00:00,GitHub,2023-02-27 21:23:49+00:00,"[cli] Remove unncessary warning when monorepo setting override (#9565)

This warning is not actionable by the user so this PR removes it."
96759a9fda7d20f1f61e2de8f41715302848cdaf,Steven,2023-02-27 20:01:05+00:00,GitHub,2023-02-27 20:01:05+00:00,"[hydrogen] Add missing envPrefix (#9551)

- Follow up to #9326"
ad2864bca53abec514a812276aa7ff77e3340fb0,Jimmy Lai,2023-02-27 18:58:12+00:00,GitHub,2023-02-27 18:58:12+00:00,"[next] add support for the integration hook file tracing (#9562)

Adds support for bundling properly the dependencies used by the experimental instrumentation hook file, `instrumentation.js`, by adding the generated nft file to the list of server deps

fixes NEXT-631"
40fbc993d7d8cad6d4d994e95bcf3995093ac7bf,Sean Massa,2023-02-27 17:05:27+00:00,GitHub,2023-02-27 17:05:27+00:00,"[tests] extract noisey setup to make test clearer (#9509)

Clarify dev server tests with a small function extraction."
1f30e56a6d338bb49985251c4356c1b65ba5e351,Sean Massa,2023-02-27 16:37:57+00:00,GitHub,2023-02-27 16:37:57+00:00,[cli][dev] remove link to 404 FAQ (#9508)
58d6268899c6c21949e16cccfac648196ccab936,Nathan Rajlich,2023-02-27 15:07:32+00:00,GitHub,2023-02-27 15:07:32+00:00,"[frameworks] Check for `remix.config.mjs` for ""remix"" auto-detection (#9558)

Moving this to a separate PR based on this comment:
https://github.com/vercel/vercel/pull/9556#discussion_r1117939290

This will need to be merged and released before the relevant E2E test in
#9556 will pass.

Co-authored-by: Steven <steven@ceriously.com>"
4e6659ace760b189719f70dd0bfb6d5128004ebe,Nathan Rajlich,2023-02-27 07:19:58+00:00,GitHub,2023-02-27 07:19:58+00:00,"[remix] Fix sending multiple response headers with the same name with Node.js (#9533)

i.e. `Set-Cookie`. Right now only one will be sent and others will be lost. This update matches the code being used in `@remix-run/vercel`."
769234b6a61fd18d7d10c43661db641b100ecac3,Nathan Rajlich,2023-02-25 08:53:30+00:00,GitHub,2023-02-25 08:53:30+00:00,"[remix] Inject Edge entrypoint into `@remix-run/vercel` during Edge Function creation (#9553)

There's [a PR](https://github.com/remix-run/remix/pull/5537) opened on
Remix to add an Edge compatible entrypoint to `@remix-run/vercel`. This
is only really needed specifically for projects that have a custom
server.js entrypoint file, which is not strictly necessary anymore, but
there are some edge cases where a project might still want to have one.
So this PR is necessary for those kinds of projects to be able to use
Edge runtime.

Even when they merge the PR, it would be good to leave this injection
code around for some time to continue support for older
`@remix-run/vercel` versions in existing projects."
53cab61e885b45c2b13367d4ec00909347603163,JJ Kasper,2023-02-25 02:46:06+00:00,GitHub,2023-02-25 02:46:06+00:00,"[next] Fix deploying with cached build (#9555)

This leverages the relative app dir field in the required files manifest when available so that we don't rely on absolute paths from a cached build since the cache can be restored in a separate context where the value no longer applies.

x-ref: https://github.com/vercel/next.js/pull/45864
x-ref: https://github.com/vercel/next.js/pull/46393
x-ref: https://github.com/vercel/next.js/discussions/39432#discussioncomment-4914549
x-ref: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1675821643786319)"
3a65acfb321980413604aa1a6ba01754307d82d7,Nathan Rajlich,2023-02-25 01:17:01+00:00,GitHub,2023-02-25 01:17:01+00:00,"[remix] Don't create output for Pathless Layout Routes without any child routes at the root level (#9539)

Fixes https://github.com/vercel/community/discussions/1587."
48eed7532a5c13f60769add9269f33df9a81ab1a,Nathan Rajlich,2023-02-24 22:07:00+00:00,GitHub,2023-02-24 22:07:00+00:00,"[tests] Properly test for multiple headers with same name in probes (#9538)

Updates the `responseHeaders` probe checks to properly test for multiple headers with the same name.

Previously the probes were using `headers.get()` which concats multiple headers into a single string, which results in the test not really checking if there are in fact multiple headers with the same name. Using `headers.raw()` allows us to properly test for that.

A couple of Python tests that were already checking for multiple `set-cookie` headers needed to be updated to match the full value, since the check now properly validates the full string match of each header (before it was basically just doing a `string.includes()` check).

This is a precursor for https://github.com/vercel/vercel/pull/9533."
f09d6fce85d214a839d2e7f2e60e72cfdbe39ffa,Cody Olsen,2023-02-24 20:40:55+00:00,GitHub,2023-02-24 20:40:55+00:00,"[frameworks] add `envPrefix` to `hydrogen` framework (#9326)

Hydrogen uses the `PUBLIC_` env prefix, [it also supports
`VITE_`](https://github.com/Shopify/hydrogen/blob/8168cd2dd850b59fb051e610d1db918f7e4ef327/packages/hydrogen/src/framework/plugins/vite-plugin-hydrogen-config.ts#L127)
but [the docs only talk about
`PUBLIC_`](https://shopify.dev/custom-storefronts/hydrogen/environment-variables#public-variables)."
cc82c499db2ca7f4414e0815ee2bee69b6b2b5c0,Chris Barber,2023-02-24 20:14:53+00:00,GitHub,2023-02-24 20:14:53+00:00,"[cli] Added fetch dist-tags http status validation (#9549)

If for some reason the `get-latest-worker.js` fails to get the dist-tags, it doesn't check the status code and proceeds to `JSON.parse()` the response. If for example npm returns 401 Unauthorized, you get a cryptic JSON parse error message."
f0bc207717d3489a5846ee15e9a048684c291832,Steven,2023-02-24 18:02:35+00:00,GitHub,2023-02-24 18:02:35+00:00,"[build-utils] Handle error during `readConfigFile()` (#9542)

This fixes a confusing error:

```
$ vercel build
Vercel CLI 28.16.6
Error: duplicated mapping key in ""/vercel/path0/pnpm-lock.yaml"" at line 1215, column -164:
      /@react-dnd/asap/4.0.1:
      ^
```"
151c7f99eed3539e54162557d5ce022187e8f984,Steven,2023-02-24 16:14:17+00:00,GitHub,2023-02-24 16:14:17+00:00,"[tests] Pass token to cron github actions (#9544)

https://github.com/actions/github-script#using-a-separate-github-token"
61c2c494bf63e047189b2afcd93c6e69ea253850,Steven,2023-02-24 16:07:29+00:00,GitHub,2023-02-24 16:07:29+00:00,"Revert ""[tests] Update cron with token in git checkout"" (#9543)

Reverts vercel/vercel#9541"
7f49816129608f623cc6ed2d8024d8958bde7f4b,Steven,2023-02-24 15:51:03+00:00,GitHub,2023-02-24 15:51:03+00:00,"[tests] Update cron with token in git checkout (#9541)

Hopefully this will fix the issue where actions do not run against the
automated PR."
7845bef8268b191f422f493fca6e2772bee7ac86,Nathan Rajlich,2023-02-24 12:04:16+00:00,Nathan Rajlich,2023-02-24 12:04:16+00:00,"Publish Stable

 - vercel@28.16.7
 - @vercel/edge@0.3.0
 - @vercel/gatsby-plugin-vercel-builder@1.1.9
 - @vercel/next@3.6.1
 - @vercel/node-bridge@3.1.12
 - @vercel/node@2.9.8
 - @vercel/static-build@1.3.12"
7acb2e4b0790c5642c2df9cdea81f962752c0064,github-actions[bot],2023-02-24 11:55:18+00:00,GitHub,2023-02-24 11:55:18+00:00,"[examples] Upgrade Next.js to version 13.2.1 (#9536)

This auto-generated PR updates Next.js to version 13.2.1"
abea002e93053e8e34b3211bf4ee84a195bf7b5c,Gal Schlezinger,2023-02-24 11:07:16+00:00,GitHub,2023-02-24 11:07:16+00:00,"[edge] Add RequestContext type (#9526)

Co-authored-by: Kiko Beats <josefrancisco.verdu@gmail.com>"
2db9678bd49cfe44266094517400d54ebd23aaed,Nathan Rajlich,2023-02-24 04:03:37+00:00,GitHub,2023-02-24 04:03:37+00:00,"[node-bridge] Fix multiple `Set-Cookie` headers in streaming mode (#9520)

Multiple `Set-Cookie` headers are being concat'd instead of being sent individually when in streaming mode.

**Non-streaming:**

```
$ curl -v https://01-remix-basics-eqztqyq3y.vercel-support.app/set-cookie 2>&1 | grep cookie
* h2h3 [:path: /set-cookie]
> GET /set-cookie HTTP/2
< set-cookie: foo=bar
< set-cookie: sessionId=38afes7a8
```

**Streaming:**

```
$ curl -v https://01-remix-basics-9b18alizh.vercel-support.app/set-cookie 2>&1 | grep cookie
* h2h3 [:path: /set-cookie]
> GET /set-cookie HTTP/2
< set-cookie: foo=bar,sessionId=38afes7a8
```"
05f942c53fa655b4646ab89ccc35746f2b4ef4f2,JJ Kasper,2023-02-24 00:29:34+00:00,GitHub,2023-02-24 00:29:34+00:00,"[tests] Update app-dir integration test (#9532)

The cache heuristic changed so there are now two separate serverless functions expected."
6c5f0b7aa08ed2e2612557ca8bc0f509d55b374d,Nathan Rajlich,2023-02-23 23:53:45+00:00,Nathan Rajlich,2023-02-23 23:53:45+00:00,"Publish Stable

 - vercel@28.16.6
 - @vercel/remix@1.4.1"
fea05383b9d4d69c4f8b327cc50ede2a04d6c7a1,Nathan Rajlich,2023-02-23 23:52:27+00:00,GitHub,2023-02-23 23:52:27+00:00,"[remix] Ignore `serverBuildPath` from Remix config (#9531)

We are explicitly overriding `serverBuildPath` so there is no need to use the value that `readConfig()` gives to us.

Fixes #9524."
247f49f765017665ffbfc21166bdf6e644e0e88a,github-actions[bot],2023-02-23 20:28:38+00:00,GitHub,2023-02-23 20:28:38+00:00,"[examples] Upgrade Next.js to version 13.2.0 (#9529)

This auto-generated PR updates Next.js to version 13.2.0

Co-authored-by: vercel-release-bot <infra+release@vercel.com>"
231714c71b172dd49f390e23e5270826a59654b0,Nathan Rajlich,2023-02-23 19:18:40+00:00,GitHub,2023-02-23 19:18:40+00:00,"[remix] `cd` to the project directory during `readConfig()` (#9518)

Sometimes the `cwd` needs to be properly set for some Remix configurations. This is problematic in monorepos because the default `cwd` is the root of the monorepo, and not the project directory.

So `cd` to the project directory when reading the Remix config file to account for that.

Fixes https://github.com/kiliman/remix-flat-routes/issues/42.
Fixes https://github.com/vercel/vercel/discussions/9478."
73d6f0d0fa74482153f2382426974b88e8092ee2,Nathan Rajlich,2023-02-23 03:44:37+00:00,GitHub,2023-02-23 03:44:37+00:00,"[remix] Update `@remix-run/dev` dep to v1.13.0 (#9519)

There were some fixes to thier new v2 filesystem routing that this will help with.

Related to https://github.com/remix-run/remix/issues/5322 and https://github.com/remix-run/remix/pull/5228."
34d199bd4925fab1fb32b8dae507e2383d38493a,Steven,2023-02-23 01:23:55+00:00,Steven,2023-02-23 01:23:55+00:00,"Publish Stable

 - @vercel/build-utils@6.3.1
 - vercel@28.16.5
 - @vercel/client@12.4.1
 - @vercel/fs-detectors@3.8.1
 - @vercel/gatsby-plugin-vercel-builder@1.1.8
 - @vercel/go@2.3.8
 - @vercel/hydrogen@0.0.54
 - @vercel/next@3.6.0
 - @vercel/node@2.9.7
 - @vercel/python@3.1.50
 - @vercel/redwood@1.1.6
 - @vercel/remix@1.4.0
 - @vercel/ruby@1.3.67
 - @vercel/static-build@1.3.11"
1dd421e1f630662c3e6cd5ab77f0aab20c94469e,Steven,2023-02-23 01:13:16+00:00,GitHub,2023-02-23 01:13:16+00:00,"[build-utils][next] Add `images.contentDispositionType` (#9513)

- Related to https://github.com/vercel/next.js/pull/46254
- Depends on https://github.com/vercel/api/pull/17434"
a91690fb8abb00b444fda1742715523622629c3e,Nathan Rajlich,2023-02-23 00:07:37+00:00,GitHub,2023-02-23 00:07:37+00:00,"[tests] Remove `watchPaths` from remix test fixture (#9517)

Follow-up to https://github.com/vercel/vercel/pull/9512 which is a
revert of the test fixture.

The fixture was actually broken in the previous commit
(https://github.com/vercel/vercel/pull/9506) since it now is trying to
read the config file before running the Build Command. Having a setup
like this will not be able to be supported, especially in order to land
https://github.com/vercel/vercel/pull/9504."
264437c751498e896c8375a647dab02c3a81c3af,Steven,2023-02-22 23:50:25+00:00,GitHub,2023-02-22 23:50:25+00:00,"[tests] Increase test timeout from 5s to 10s (#9515)

Fixes this error:

```
@vercel/node:test-unit: FAIL test/dev.test.ts (14.891 s)
@vercel/node:test-unit:    runs a mjs endpoint (5057 ms)
@vercel/node:test-unit:    runs a esm typescript endpoint (5122 ms)
@vercel/node:test-unit: 
@vercel/node:test-unit:    runs a mjs endpoint
@vercel/node:test-unit: 
@vercel/node:test-unit:     thrown: ""Exceeded timeout of 5000 ms for a test.
@vercel/node:test-unit:     Use jest.setTimeout(newTimeout) to increase the timeout value, if this is a long-running test.""
```


https://github.com/vercel/vercel/actions/runs/4247588973/jobs/7385801227#step:9:1039"
b8cce66eff2102c2aec7943f5bdb2bdf7c954777,Nathan Rajlich,2023-02-22 23:22:18+00:00,GitHub,2023-02-22 23:22:18+00:00,"[remix] Simplify ESM detection of `remix.config.js` (#9512)

In a Turborepo setup, there was this in the `remix.config.js` file:

```js
  watchPaths: [require.resolve(""ui"")],
```

Since we attempt to `require()` the `remix.config.js` file in order to
determine whether or not it is using ESM syntax, this would fail since
the require happens before the Build Command is executed.

To fix, treat any non `ERR_REQUIRE_ESM` error as CJS, instead of
re-throwing the error. If there really is an issue with importing the
config, then that'll happen right after when `remix build` is doing it."
cbad57d14f94984687e644ab554dcc4487668f16,Nathan Rajlich,2023-02-22 22:19:40+00:00,GitHub,2023-02-22 22:19:40+00:00,"[remix] Restore support for a custom `server.js` entrypoint file (#9506)

When the project defines a custom `server.js` file in `remix.config.js`,
then don't override that with the bundled
`server-node.mjs`/`server-edge.mjs` file. This allows for a custom
`getLoadContext()` function to remain supported.

In order for Edge runtime to be supported, a [companion
PR](https://github.com/remix-run/remix/pull/5537) for
`@remix-run/vercel` adapter has been created with a dedicated entrypoint
for when Edge runtime is being used. In order to support Edge on
previous versions of the adapter, we may end up patching the package to
enable support, but that will happen in a follow-up PR.

Related to https://github.com/orgs/vercel/discussions/1596.

---------

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
4da176d26fd38b358c0943d0a16a91a8c9f72918,Nathan Rajlich,2023-02-22 20:35:12+00:00,GitHub,2023-02-22 20:35:12+00:00,"[remix] Allow `runtime` to be defined from a parent route (#9473)

Make it so that the `export const config = { runtime }` value is ""inherited"" from a parent route, if it is defined.

For example, ""edge"" can be defined in `app/root.tsx`, and so all routes will use the Edge runtime by default, unless `""runtime"": ""nodejs""` is used more specifically in a route deeper in the route hierarchy."
1f51e043877fdf232fea3d51b0e56d7219546754,Chris Barber,2023-02-22 18:02:54+00:00,GitHub,2023-02-22 18:02:54+00:00,"[cli] Fix 'vc remove --safe <project>' (#9477)

`vc remove --safe <project>` has a unique code path that queries all deployments by project id. This function calls v4 deployments endpoint and returns the legacy deployment structure.

The problem is the `vc remove` command relies on the new `Deployment` structure defined by the v13 get deployment endpoint.

I've updated the `getDeploymentsByProjectId()` function to transform the legacy structure into the current one.

Fixes #9321 

Linear: https://linear.app/vercel/issue/VCCLI-538/vc-rm-project-safe-is-not-working"
756174714f35ad205e06614f79e5010fc1d482be,Sean Massa,2023-02-22 17:23:12+00:00,GitHub,2023-02-22 17:23:12+00:00,"[cli] fix content type determination logic (#9498)

The logic behind `getMimeType` only works for file names, not file paths. This PR fixes the logic to work regardless and adds a couple tests."
6e32832f947212e755e0513c4a2daad0679db5bc,Ethan Arrowood,2023-02-22 15:48:21+00:00,GitHub,2023-02-22 15:48:21+00:00,"[tests] Delete monorepo tests (#9499)

Deletes flaky monorepo tests as the logic is well tested within the fs-detectors repo."
e682e9cd7d1f1d4473057eb7628576f4c62e3b48,Gal Schlezinger,2023-02-22 05:54:39+00:00,GitHub,2023-02-22 05:54:39+00:00,"[node] fix TypeScript + ESM in Windows (#9487)

ESM on Windows versions of Node.js require `--loader PATH` to be a `file://` protocol.
This PR allows `vc dev` to be used with both TypeScript and ESM"
b30f000d2ab37bea5ec67c5461bb68d1a007cc3b,Sean Massa,2023-02-22 00:51:33+00:00,Sean Massa,2023-02-22 00:51:33+00:00,"Publish Stable

 - vercel@28.16.4
 - @vercel/next@3.5.2"
f78051ada951008280a468a9d61b7f568bb7ba7b,JJ Kasper,2023-02-22 00:41:54+00:00,GitHub,2023-02-22 00:41:54+00:00,[next] Ensure .rsc outputs are not created for route handlers (#9503)
10bc74904ca246df30449c742d2c9d38218df3b5,Don Alvarez,2023-02-21 16:32:03+00:00,GitHub,2023-02-21 16:32:03+00:00,"[docs] Improve docs for `@vercel/next` no pages built message (#9494)

After many hours of debugging, I tracked down that having an old Node
version (eg 14.x) listed in your Vercel project settings can result in
the build step failing with a confusing and unhelpful error message
""`@vercel/next` No Serverless Pages Built"". Note that this is a case
where it ""can"" cause it to fail, including with NextJS 13.1.6 and Vercel
CLI 28.16.2, but it is not guaranteed to fail. I have six NextJS
projects. They have identical next.config.js, tsconfig.json,
eslintrc.js, and .gitignore files, and other than a few seemingly
non-critical dependencies they have identical package.json files. Four
of the six consistently built and deployed in the cloud without issue.
Two consistently failed to build in the cloud. All built successfully
locally including using vercel build locally, and all would vercel
deploy --prebuilt successfully. Switching all the vercel cloud project
settings from Node 14.x to Node 18.x enabled all the projects to build
and deploy successfully in the vercel cloud without needing local vercel
build and local vercel deploy --prebuilt steps.

---------

Co-authored-by: Steven <steven@ceriously.com>"
c8f7a9a8741451c45dbafe584d8273f5a5b8cc50,Steven,2023-02-21 15:11:08+00:00,GitHub,2023-02-21 15:11:08+00:00,"[cli] Fix global detection for fnm (#9496)

Fix `--global` install detection when
[fnm](https://github.com/Schniz/fnm) was used to install node"
2fd33152219e7a2485b85b698e339c9c5cee23cf,Sean Massa,2023-02-21 14:53:23+00:00,Sean Massa,2023-02-21 14:53:23+00:00,"Publish Stable

 - vercel@28.16.3
 - @vercel/next@3.5.1
 - @vercel/remix@1.3.5"
54ef027cbe373781cf9d08ab5f875a36c40fe6fe,JJ Kasper,2023-02-21 01:54:17+00:00,GitHub,2023-02-21 01:54:17+00:00,"[next] Fix rsc routes order (#9493)

This ensures we maintain the correct order for our rsc routes with
reference to middleware so that they match correctly. This also adds a
regression test to ensure it's working as expected.

Fixes: https://github.com/vercel/next.js/issues/45331
x-ref: [slack
thread](https://vercel.slack.com/archives/C035J346QQL/p1676926522772859?thread_ts=1676926096.412539&cid=C035J346QQL)"
6620c7f6005b68b7c6a5cf8a10d3c4ccef7d92ce,Shu Ding,2023-02-20 19:35:06+00:00,GitHub,2023-02-20 19:35:06+00:00,"[next] Add initial `vary` header to all prerendered pages when RSC is enabled (#9481)

This PR changes the fallback headers that relate to RSC to the defaults that Next.js currently uses. Also, it sets the initial `vary` header to all prerendered routes when RSC is enabled (`routesManifest?.rsc`), even for the pages directory. 

That's because although the pages directory won't return any RSC payload, it can still be used in a project that contains app routes. When the app route requests a page route for RSC data, it's important for the browser to not accidentally cache that result hence we need the `vary` header to set there as well.

More related discussions can be found [here](https://linear.app/vercel/issue/NEXT-382/add-vary-rsc-etc-header-to-all-responses-to-ensure-browser-caching)."
38f40f1c15417d8da70a9270d2d62486272360f3,JJ Kasper,2023-02-20 10:41:24+00:00,GitHub,2023-02-20 10:41:24+00:00,"[next] Handle prerender-manifest v4 (#9489)

Co-authored-by: Tim Neutkens <tim@timneutkens.nl>"
63211b8b89f7d3e5147a49c1de9cc66424c51d45,Nathan Rajlich,2023-02-17 18:46:33+00:00,GitHub,2023-02-17 18:46:33+00:00,"[remix] Add unit tests (#9469)

Moves parts of the `@vercel/remix` builder into util functions that have isolated unit tests. No functionality changes."
83ee5ea2b84a7818e12a787c2d1a3179a434447c,Ikko Eltociear Ashimine,2023-02-17 16:45:44+00:00,GitHub,2023-02-17 16:45:44+00:00,"[cli] Fix typo in get-latest-worker.js (#9470)

persistance -> persistence

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
f063645646a11049212e358eb7e6ac11f1a2fa78,Ethan Arrowood,2023-02-17 16:42:26+00:00,GitHub,2023-02-17 16:42:26+00:00,"[examples] Update remix template (#9472)

Previous PR was merged automatically but need to fix a dependency
version"
4f8c5e344d030db9b503e8e9f98f5c70293562a0,Ethan Arrowood,2023-02-17 15:10:17+00:00,GitHub,2023-02-17 15:10:17+00:00,"[examples] update remix template (#9455)

Updates our remix template so that it works with our new Remix changes"
70a53515bd12202f895c369504e2d5be6c9469f4,Nathan Rajlich,2023-02-16 23:12:31+00:00,Nathan Rajlich,2023-02-16 23:12:31+00:00,"Publish Stable

 - vercel@28.16.2
 - @vercel/fs-detectors@3.8.0
 - @vercel/next@3.5.0
 - @vercel/remix@1.3.4
 - @vercel/ruby@1.3.66
 - @vercel/static-build@1.3.10"
4d4f0fa672d31fea6ec034936e64ebd2909e4cbf,Sean Massa,2023-02-16 22:59:14+00:00,GitHub,2023-02-16 22:59:14+00:00,"[next] Add Operation Types to Next.js Lambdas (#9196)

In order to have Next.js Lambdas show their operation types more specifically in the build output in the dashboard, the builder needs to return the Lambdas with `operationType` set to the appropriate value.

This PR adds those values. This allows the Richer Deployment Outputs to show the different types of serverless functions:
<img width=""228"" alt=""Screenshot 2023-02-03 at 3 49 42 PM"" src=""https://user-images.githubusercontent.com/41545/216717479-d02fbd4a-fa62-479d-8b65-bd77fdcdb26c.png"">"
46c0fd153a23e7c4dc9a29d578f7683e42c10547,Felix Haus,2023-02-16 21:42:42+00:00,GitHub,2023-02-16 21:42:42+00:00,"[fs-detectors] Remove increments of 64 limit for function memory (#9465)

Missed this occurrence so it still prevents the upload of serverless
functions that have a mem value that is not dividable by 64.
Should be the last place before we can ship the documentation update.

#### Related PRs
- #9440

Co-authored-by: Steven <steven@ceriously.com>"
1c8b4717e362a8e0826596c9793565ef1ca4c88c,Marc Greenstock,2023-02-16 21:41:56+00:00,GitHub,2023-02-16 21:41:56+00:00,"[ruby] fix: HEAD requests (#9436)

When WEBrick receives `HEAD` requests it discards the body (i.e.
`req.body.nil? => true`), this causes Vercel to throw a
`BODY_NOT_A_STRING_FROM_FUNCTION` since it is expecting the serverless
function to respond with a string in the body.

---------

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Steven <steven@ceriously.com>"
d52d26eaac1306e81deb4008f1c441f24d1c5512,Nathan Rajlich,2023-02-16 21:25:19+00:00,GitHub,2023-02-16 21:25:19+00:00,"[remix] Install Node globals (#9467)

Fixes https://github.com/vercel/community/discussions/1547.
Fixes https://github.com/vercel/community/discussions/1549."
db65728fc4f87b26dbeeb632a4e202dc144cb061,Vincent Voyer,2023-02-16 14:36:16+00:00,Vincent Voyer,2023-02-16 14:36:16+00:00,"Publish Stable

 - vercel@28.16.1"
a788d06f850208d5a04658a6eed4663a6a5168e1,Vincent Voyer,2023-02-16 14:34:56+00:00,GitHub,2023-02-16 14:34:56+00:00,"[cli]: fix merging of vercel.json and build result crons (#9464)

Ensures that existing crons and crons from vercel.json are merged
together correctly."
3d98d1cdea151b7125deb082c2c8469c865027d0,Vincent Voyer,2023-02-16 11:08:50+00:00,Vincent Voyer,2023-02-16 11:08:50+00:00,"Publish Stable

 - @vercel/build-utils@6.3.0
 - vercel@28.16.0
 - @vercel/client@12.4.0
 - @vercel/fs-detectors@3.7.14
 - @vercel/gatsby-plugin-vercel-builder@1.1.7
 - @vercel/go@2.3.7
 - @vercel/hydrogen@0.0.53
 - @vercel/next@3.4.7
 - @vercel/node@2.9.6
 - @vercel/python@3.1.49
 - @vercel/redwood@1.1.5
 - @vercel/remix@1.3.3
 - @vercel/ruby@1.3.65
 - @vercel/static-build@1.3.9
 - @vercel/static-config@2.0.13"
667af829c42b97988c161810c8c7404567b23ddb,Vincent Voyer,2023-02-16 10:49:09+00:00,GitHub,2023-02-16 10:49:09+00:00,"[build-utils][cli][client][node][next][static-config]: forward `crons` from vercel.json to config.json (#9454)

This PR changes the way cron jobs are being created in the build output
API. This is my first time contributing here. If you see something
unusual, let me know.

 Good for review

Our goal is to:
- Allow creating cron jobs via the `crons` property of `vercel.json` for
end users
- Allow framework authors to create cron jobs on Vercel via the `crons`
property of the Build Output API configuration

---

As you can see, we removed the previous implementation where cron jobs
could be configured at the function code level (export const cron = """"),
on top of vercel.json `functions` property. Here's why:

- All frameworks would have to implement the configure at the function
code level
- Not all frameworks can easily map a path to a specific function
(example: SvelteKit) and would have to bail on bundling functions inside
the same lambda
- Configuring a path + scheduler provides a better mapping of what cron
jobs are as of today: API routes on a schedule and not functions on a
schedule
- Dynamic routes Cron Jobs will be supported:
/api/crons/sync-slack-team/230
- Query parameters will be supported support:
/api/crons/sync-slack-team/230?secret=32k13l2k13lk21 (= securing cron
jobs v0)
- 100% frameworks compatibility from day one

Next.js and other frameworks may choose to implement their own cron jobs
feature that will then need to be configured through the `crons`
property of `config.json` (build output API).

cc @timneutkens @Rich-Harris 

Internal thread:
https://vercel.slack.com/archives/C04DWF5HB6K/p1676366892714349"
1bb7b37e0ce3ea25fad81f9a328de466de67a14e,Nathan Rajlich,2023-02-16 07:41:25+00:00,Nathan Rajlich,2023-02-16 07:41:25+00:00,"Publish Stable

 - vercel@28.15.7
 - @vercel/next@3.4.6
 - @vercel/remix@1.3.2"
ca81c133b981af237514fc7188576631db4e0bf9,Nathan Rajlich,2023-02-16 07:32:53+00:00,GitHub,2023-02-16 07:32:53+00:00,"[remix] Fix root-level splat path (#9457)

Fixes https://github.com/orgs/vercel/discussions/1545."
f332b7856cd12820dbc819b9afa8f4abd1c6dfe9,Luba Kravchenko,2023-02-15 22:56:29+00:00,GitHub,2023-02-15 22:56:29+00:00,"Adds framework fields to build outputs (#9449)

Adds framework to Lambda and edge build outputs so that we can distinguish which framework they originated from when certain features should be applied to specific frameworks.

This PR adds framework to the outputs. Part 1: https://github.com/vercel/vercel/pull/9448

ticket: ED-131

x-ref: [slack channel](https://vercel.slack.com/archives/C042LHPJ1NX)"
9308a0fda5e14ee8a07b9a3506e4480f5f67d212,Sean Massa,2023-02-15 18:26:53+00:00,Sean Massa,2023-02-15 18:26:53+00:00,"Publish Stable

 - @vercel/build-utils@6.2.4
 - vercel@28.15.6
 - @vercel/client@12.3.10
 - @vercel/frameworks@1.3.1
 - @vercel/fs-detectors@3.7.13
 - @vercel/gatsby-plugin-vercel-builder@1.1.6
 - @vercel/go@2.3.6
 - @vercel/hydrogen@0.0.52
 - @vercel/next@3.4.5
 - @vercel/node@2.9.5
 - @vercel/python@3.1.48
 - @vercel/redwood@1.1.4
 - @vercel/remix@1.3.1
 - @vercel/routing-utils@2.1.9
 - @vercel/ruby@1.3.64
 - @vercel/static-build@1.3.8"
c2f8a5990ad9bddd01f660473522772059893569,Steven,2023-02-15 17:11:54+00:00,GitHub,2023-02-15 17:11:54+00:00,"[tests] Fix gh actions cron job to update next/turbo (#9453)

This token should run the tests automatically"
fc2f0b919b07b3cddde4620328378962eb47616e,JJ Kasper,2023-02-15 09:00:24+00:00,GitHub,2023-02-15 09:00:24+00:00,[next] Ensure app routes are handled (#9450)
a606ab8678cf465c6f4691727becbe95fd3141c8,Luba Kravchenko,2023-02-15 03:14:21+00:00,GitHub,2023-02-15 03:14:21+00:00,"[build-utils] add framework slug and version to build output (#9448)

Adds framework to Lambda and edge build outputs so that we can distinguish which framework they originated from when certain features should be applied to specific frameworks.

Breaking up https://github.com/vercel/vercel/pull/9447 into two parts:
This PR introduces the frameworks type. Part 2: https://github.com/vercel/vercel/pull/9449

ticket: ED-131

x-ref: [slack channel](https://vercel.slack.com/archives/C042LHPJ1NX)"
13062cd47d84729bf4a49eba30be54610e7fb5b7,Chris Barber,2023-02-14 23:45:03+00:00,GitHub,2023-02-14 23:45:03+00:00,"[routing-utils] Added middlewareRawSrc to RouteWithSrc type (#9443)

This PR adds a new `middlewareRawSrc` prop to the `RouteWithSrc` type which is used for edge middleware routes. The existing `middlewarePath` prop contains a regex of all the middleware `matcher` routes which isn't very user friendly on the front end.

By preserving the original middleware matchers, the front end can display the list in a much more presentable fashion.

This feature blocks 3 other PRs.
1. https://github.com/vercel/api/pull/17231 depends on `Route` type for schema validation and translates `middlewareRawSrc` to `rawMatchers` for front end consumption
2. https://github.com/vercel/vercel/pull/9435 sets the `middlewareRawSrc` in the BOA output
3. https://github.com/vercel/front/pull/19606 displays the `rawMatchers` under the Edge Middleware section for a deployment

Linear: https://linear.app/vercel/issue/VCCLI-411/display-uncompressed-edge-middleware-matcher-show-the-list-of-matches"
bb9faaed99d52a8569c72fb3e4bd012ca64665b1,Chris Barber,2023-02-14 22:59:52+00:00,GitHub,2023-02-14 22:59:52+00:00,"[test] Use execFileSync() to get processes (#9445)

`spawnSync()` does not throw if the command can't be found in the PATH or if an error occurs. If we use `execFileSync()`, it will throw and that was likely the desired behavior in this test utility function."
881e43a0e2d6daa2f7654ad16566960b00d412aa,Sean Massa,2023-02-14 21:38:34+00:00,Sean Massa,2023-02-14 21:38:34+00:00,"Publish Stable

 - @vercel/build-utils@6.2.3
 - vercel@28.15.5
 - @vercel/client@12.3.9
 - @vercel/fs-detectors@3.7.12
 - @vercel/gatsby-plugin-vercel-builder@1.1.5
 - @vercel/go@2.3.5
 - @vercel/hydrogen@0.0.51
 - @vercel/next@3.4.4
 - @vercel/node@2.9.4
 - @vercel/python@3.1.47
 - @vercel/redwood@1.1.3
 - @vercel/remix-entry-server@0.1.0
 - @vercel/remix@1.3.0
 - @vercel/ruby@1.3.63
 - @vercel/static-build@1.3.7"
578a7742fe706d0ff918675f03089203693dc9e5,Steven,2023-02-14 20:32:18+00:00,GitHub,2023-02-14 20:32:18+00:00,"[next] Improve error message when routes-manifest.json not found (#9441)

The dashboard doesn't handle multiline errors very well because other lines are collapsed.

https://vercel.com/changelog/deployment-logs-filtering-now-available

<img width=""1237"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/218832497-0bcd9404-b4f5-49fe-9edd-bd6de6d8bb8f.png"">


We also show the complete error in the top and it doesn't show newlines properly.

<img width=""428"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/218832603-065e0d4d-ae6e-4b44-b2db-b2fff063da58.png"">

The ""Learn More"" link already has the relevant information so we can reduce this error message to a single line to improve the call to action."
2d84a6443069a7f3fda33816833e646bf3c51e7f,Nathan Rajlich,2023-02-14 18:09:07+00:00,GitHub,2023-02-14 18:09:07+00:00,"[remix-entry-server] Add initial implementation (#9417)

This adds a new package to the monorepo: `@vercel/remix-entry-server`

The purpose of this package is to provide most of the implementation of
the Remix `app/entry.server.tsx` file with proper support for the Vercel
Serverless and Edge runtimes, specifically in regards to React 18
streaming.

The reason that this package is necessary, as opposed to just updating
our Remix template, is due to the fact that Serverless and Edge runtimes
require a different implementation. This is because the
`react-dom/server` package exports different functions for the Node
(`renderToPipeableStream()`) vs. Edge (`renderToReadableStream()`)
bundles, and thus this package also has two different implementations
(by utilizing the `main` and `browser` fields in `package.json`).

Usage of this package in a Remix application's `app/entry.server.tsx`
file looks like:

```tsx
import handleRequest from ""@vercel/remix-entry-server"";
import { RemixServer } from ""@remix-run/react"";
import type { EntryContext } from ""@remix-run/server-runtime"";

export default function (
  request: Request,
  responseStatusCode: number,
  responseHeaders: Headers,
  remixContext: EntryContext
) {
  const remixServer = <RemixServer context={remixContext} url={request.url} />;
  return handleRequest(request, responseStatusCode, responseHeaders, remixServer)
}
```

Once this package is published then we can update our own Remix template
to utilize it, enabling React 18 streaming for both Vercel runtimes."
200ac9964764672e67146acccf140dd9ebe9b89e,Felix Haus,2023-02-14 18:08:40+00:00,GitHub,2023-02-14 18:08:40+00:00,"[build-utils][cli] Remove 64 increment limit for serverless functions (#9440)

We no longer require the memory to be provided in steps of 64mb for
serverless functions.
Instead the memory can now be chosen freely from `128mb` to `3008mb` in
`1mb increments`.

Updates the `vercel.json` schema to reflect that change."
1d3f2b5a62b6f9b78fa7dbd91d988382c72c8913,Felix Haus,2023-02-14 16:44:24+00:00,GitHub,2023-02-14 16:44:24+00:00,"[build-utils][cli] Update link to project-configuration (#9439)

The link to the documentation has changed.
It is now available under https://vercel.com/docs/concepts/projects/project-configuration

This updates:
- link generation `https://vercel.com/docs/configuration#project/*` -> `https://vercel.com/docs/concepts/projects/project-configuration#*`
-  Updates test files
- Updates static references of https://vercel.com/docs/configuration across the repo"
8f499695853c6689cb231c6f3f6020feb95b4713,Steven,2023-02-14 15:31:46+00:00,GitHub,2023-02-14 15:31:46+00:00,"[tests] Update tests script names (#9433)

### Description 

These script names are currently really long and that makes it difficult
to read.

In particular, the most important part (the package name) is often
truncated.

See before/after below.

## Before

<img width=""302"" alt=""image""
src=""https://user-images.githubusercontent.com/229881/218588978-b8ed9a7a-f4da-4d58-af3f-2b1a7087737d.png"">

## After

<img width=""290"" alt=""image""
src=""https://user-images.githubusercontent.com/229881/218596895-65627ad0-2895-4bd7-8506-f5f545a419d3.png"">"
cfbfaa7cd09a77c4f2818ca073b6fbd6433f6f9b,Steven,2023-02-14 14:58:10+00:00,GitHub,2023-02-14 14:58:10+00:00,"[tests] Fix memory limit test (#9438)

This error message was adjusted recently"
25747a76216a56733e9a96dd09437296e3430627,Nathan Rajlich,2023-02-14 01:01:46+00:00,GitHub,2023-02-14 01:01:46+00:00,"[remix] Support per-page Edge functions and replace ""@remix-run/vercel"" (#9375)

Adds support for server-side rendered Remix using Edge Functions. This runtime can be enabled on a per-page basis, by adding the following to a page within the `app/routes` directory:

```js
export const config = {
  runtime: 'edge'
};
```

Additionally, this PR further supersedes the `@remix-run/vercel` runtime adapter, because we will always inject our own server entrypoint. So the logic to ensure that package exists in the project's `package.json` has been removed (so this closes #9011). The only requirement is that the Remix project has `@remix-run/node` as a dependency, which is the case for the vanilla Remix template so I think that's a fair assumption.

To make Edge Functions work, we need to ensure that `remix build` is executed with a few specific configuration values in place, so this change wraps the existing `remix.config.js` file and adds our own to make sure those values are in place (and then cleans itself up after the build command is executed).

Finally, the reading of the Remix config logic was simplified by using the `readConfig()` function from the `@remix-run/dev` package, which also includes the routes manifest, so the hacky `vm` running logic to retrieve the manifest was able to be removed.

Closes #8784.
Closes #9011.

---

# To test this out:

1. Ensure that Remix dependencies are running _at least version `1.5.0`_ (which is when `writeReadableStreamToWritable()` was added to `@remix-run/node`).

2. Add the following line of codeto any page in your Remix applications`app/routes/*` directory:
    
    ```jsx
    export const config = { runtime: 'edge' };
    ```
    
3. Set an Environment Variable on your Vercel Project:
    - Name:`VERCEL_CLI_VERSION`
    - Value: `https://vercel-git-update-remix-edge.vercel.sh/tarballs/vercel.tgz`
    
4. Make a deployment, either by running `vercel deploy` in the CLI, or by pushing a Git commit to your repository which has a Vercel Git integration enabled."
8d635beed75241aeda78ccfc751c6009769b502e,github-actions[bot],2023-02-14 00:01:45+00:00,GitHub,2023-02-14 00:01:45+00:00,"[tests] Upgrade Turbo to version 1.7.4 (#9431)

This auto-generated PR updates Turbo to version 1.7.4"
6225f050faa1dded954ab50cc928b114d4cb3f5f,JJ Kasper,2023-02-13 23:22:33+00:00,GitHub,2023-02-13 23:22:33+00:00,"[next] Fix app-dir tests from new content-type (#9434)

x-ref: https://github.com/vercel/vercel/pull/9408
x-ref:
https://github.com/vercel/vercel/actions/runs/4168082693/jobs/7214887847"
30a899bab1c33df9e5ad85cbc7b73e44fbcefbe4,Steven,2023-02-13 21:39:15+00:00,GitHub,2023-02-13 21:39:15+00:00,"[tests] Add `workflow_dispatch` to cron workflows (#9430)

This `workflow_dispatch` prop allows manual runs by clicking a button on
https://github.com/vercel/vercel/actions"
a010d8fe8af5786c16c9d1d40c730e2302d02c00,Sean Massa,2023-02-13 21:37:16+00:00,GitHub,2023-02-13 21:37:16+00:00,"[cli] add slash before url for edge function errors (#9428)

Edge Functions and Serverless Functions were both updated to show the path of their entry points, but it turns out Serverless Function paths started with a slash and Edge Function paths did not.

The [related code for Serverless Functions](https://github.com/vercel/vercel/blob/d62888094236c6f2afdc34a5db2f098adf575470/packages/node-bridge/helpers.ts) does not need to be updated.

---

Before:

<img width=""996"" alt=""CleanShot 2023-02-13 at 13 23 42@2x"" src=""https://user-images.githubusercontent.com/41545/218554154-2b112a68-2d68-4968-bae7-acf6e85a72a2.png"">

---

After: 

<img width=""921"" alt=""CleanShot 2023-02-13 at 13 20 22@2x"" src=""https://user-images.githubusercontent.com/41545/218554029-c3dce6b1-b01f-4a78-aa32-f6891ff16e51.png"">"
a9ff23fe22939ee2a170b42142ac39087f9d256a,Steven,2023-02-13 21:00:42+00:00,GitHub,2023-02-13 21:00:42+00:00,"[test] Switch to turbo main release line (#9429)

Per @tknickman, we don't need to be testing every turbo canary in this
repo, that will happen in the turborepo tests"
b60d3f657a5a5410b83c31268818c22ae1393b4c,Steven,2023-02-13 20:59:05+00:00,GitHub,2023-02-13 20:59:05+00:00,"[tests] Update CI to Node.js 16 (#9397)

In an effort to speed up CI, we should update the lowest common
denominator to Node.js 16

Note: In April, Node.js 14 will reach EOL so we can update tsconfig
targets and ship a major semver at that time.

---------

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
e7947a1b3384a09e264a50cbd3ff259c4dd59870,Nathan Rajlich,2023-02-13 20:27:37+00:00,GitHub,2023-02-13 20:27:37+00:00,"[node] Make NFT resolve ""worker""/""browser"" exports for Edge Functions (#9377)

This makes `react-dom` work as expected from within Edge Functions. Otherwise, NFT will only select the Node.js version of the files which do not work with react-dom within an Edge Function."
95a4dcfb33d813f1a0ef18d766232d42c876ce69,Sean Massa,2023-02-13 18:47:15+00:00,Sean Massa,2023-02-13 18:47:15+00:00,"Publish Stable

 - @vercel/build-utils@6.2.2
 - vercel@28.15.4
 - @vercel/client@12.3.8
 - @vercel/fs-detectors@3.7.11
 - @vercel/gatsby-plugin-vercel-builder@1.1.4
 - @vercel/go@2.3.4
 - @vercel/hydrogen@0.0.50
 - @vercel/next@3.4.3
 - @vercel/node-bridge@3.1.11
 - @vercel/node@2.9.3
 - @vercel/python@3.1.46
 - @vercel/redwood@1.1.2
 - @vercel/remix@1.2.13
 - @vercel/ruby@1.3.62
 - @vercel/static-build@1.3.6"
124b747b0e13e1437d64b46de477b6afee7a4b8b,Tim Neutkens,2023-02-13 13:04:54+00:00,GitHub,2023-02-13 13:04:54+00:00,Read rscContentType from routes manifest (#9408)
a735527d8fbbc4ba09a7f14a3babb6bfa664dcca,Nathan Rajlich,2023-02-11 20:42:39+00:00,GitHub,2023-02-11 20:42:39+00:00,"[build-utils] Filter out files outside of `cwd` when glob is in ""follow"" mode (#9412)

Enables `glob()` to operate in ""follow"" mode, but filters out any values where a symlink points to a target that lives outside of the `cwd."
d62888094236c6f2afdc34a5db2f098adf575470,Sean Massa,2023-02-11 00:14:58+00:00,GitHub,2023-02-11 00:14:58+00:00,"[cli][node][node-bridge] improve edge/serverless function error messages (#9410)

The error messages shown during `vc dev` when an Edge or Serverless functions returns a promise that ends up being rejected could be better.

Main changes:

- removed ""socket hang up"" error messages because they were not helpful to the user
- changed serverless function error handling to log explicitly and exit
- changed serverless function error message to include the request path
- changed edge function error message to include request path and a faked (but useful) stack trace

## Current

### In Production

**Serverless Function:** In production, for a serverless function rejected promise, you'll see this in the logs:

```
Unhandled Promise Rejection 	{
  ""errorType"": ""Runtime.UnhandledPromiseRejection"",
  ""errorMessage"": ""Error: intentional break!"",
  ""reason"": {
    ""errorType"": ""Error"",
    ""errorMessage"": ""intentional break!"",
    ""stack"": [
      ""Error: intentional break!"",
      ""    at handler (/var/task/api/node.js:3:9)"",
      ""    at Server.<anonymous> (/var/task/___vc/__helpers.js:813:19)"",
      ""    at Server.emit (node:events:527:28)"",
      ""    at parserOnIncoming (node:_http_server:956:12)"",
      ""    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)""
    ]
  },
  ""promise"": {},
  ""stack"": [
    ""Runtime.UnhandledPromiseRejection: Error: intentional break!"",
    ""    at process.<anonymous> (file:///var/runtime/index.mjs:1194:17)"",
    ""    at process.emit (node:events:539:35)"",
    ""    at process.emit (/var/task/___vc/__sourcemap_support.js:559:21)"",
    ""    at emit (node:internal/process/promises:140:20)"",
    ""    at processPromiseRejections (node:internal/process/promises:274:27)"",
    ""    at processTicksAndRejections (node:internal/process/task_queues:97:32)""
  ]
}
Unknown application error occurred
Runtime.Unknown
```

**Edge Function:** In production, for an edge function rejected promise, you'll see this in the logs:

```
Error: intentional break!
    at (api/edge.js:10:10)
```

In both cases, in the browser, you see the ""This Serverless/Edge Function has crashed."" template with no error message or stack trace.


### In `vc dev`


**Serverless Function:** In `vc dev`, for a serverless function rejected promise, you'll see this in the output:

```
Unhandled rejection: Error: intentional break!
    at handler (/Users/smassa/source/demo/edge-errors/api/node.js:3:9)
    at Server.<anonymous> (/Users/smassa/source/vercel/vercel/packages/node-bridge/helpers.js:813:19)
    at Server.emit (node:events:513:28)
    at Server.emit (node:domain:489:12)
    at parserOnIncoming (node:_http_server:998:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)
Error: Failed to complete request to /api/node: Error: socket hang up
```

**Edge Function:** In `vc dev`, for an edge function rejected promise, you'll see this in the output:

```
Unhandled rejection: intentional break!
Error: Failed to complete request to /api/edge: Error: socket hang up
```

## After Changes

### In `vc dev`


**Serverless Function:** In `vc dev`, for a serverless function rejected promise, you'll see this in the output:

```
Rejected Promise returned from /api/node: Error: intentional break!
    at handler (/Users/smassa/source/demo/edge-errors/api/node.js:3:9)
    at Server.<anonymous> (/Users/smassa/source/vercel/vercel/packages/node-bridge/helpers.js:824:19)
    at Server.emit (node:events:513:28)
    at Server.emit (node:domain:489:12)
    at parserOnIncoming (node:_http_server:998:12)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)
```

**Edge Function:** In `vc dev`, for an edge function rejected promise, you'll see this in the output:

```
Rejected Promise returned from api/edge: intentional break!
    at (api/edge.ts)
```

We can't show the real stack trace for Edge Functions because the bundling + VM execution mangles it. What's rendered here is a fake one, but it's still useful to the user.

If we currently showed the real stack trace for edge functions, it would look like:

```
Rejected Promise returned from api/edge: intentional break!
    at edge (evalmachine.<anonymous>:35:9)
    at FetchEvent.<anonymous> (evalmachine.<anonymous>:87:26)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async EdgeRuntime.dispatchFetch (evalmachine.<anonymous>:29:7)
    at async Server.handler (/Users/smassa/source/vercel/vercel/node_modules/.pnpm/edge-runtime@2.0.0/node_modules/edge-runtime/src/server/create-handler.ts:46:26)
```

## Follow Up

We'll look into improving the Edge Function error stack traces later."
084125d90ff025ad3fa70403bc89de1583d7a6d9,chloetedder,2023-02-10 22:56:01+00:00,GitHub,2023-02-10 22:56:01+00:00,"[fs-detectors] Add main to test package.json files (#9416)

Fix flakey tests"
2b483b0fd0cc7cd60613fbcad26230f1de0d1cb2,Steven,2023-02-10 22:32:45+00:00,GitHub,2023-02-10 22:32:45+00:00,"[tests] Fix examples tests with shared util (#9415)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
fdcd86d37cf125a2f0078ccb537361d646e2323a,Sean Massa,2023-02-10 21:33:38+00:00,GitHub,2023-02-10 21:33:38+00:00,"[tests] add missing dep that used to be hoisted (#9413)

It looks like `find-up` was working before because of yarn hoisting, but not anymore. I don't know why this works sometimes and not others, though.

This module is imported from: https://github.com/vercel/vercel/blob/main/packages/cli/test/helpers/setup-fixture.ts#L1

I stuck with version `4.1.0` because that looks like the version being used before.

---

Trying to fix: https://github.com/vercel/vercel/actions/runs/4147054878/jobs/7174327469#step:9:2622"
f5280cb3752f2c02b50cd75ba56fd32d8b7ae477,Steven,2023-02-10 20:29:45+00:00,GitHub,2023-02-10 20:29:45+00:00,"[node] Fix incorrect stack trace of TS error (#9409)

### Description

TS has an option, `noEmitOnError`, that is used to either fail the build by throwing when `true` or just print the error and continuing to build when `false`.

This PR fixes the case when `noEmitOnError: false`. Previously showing an error stack trace but now it correctly shows the error message without the stack.

### Before

<img width=""1186"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/218186616-9e6f04ea-0256-4ed6-8705-50e8dd5090f5.png"">

### After

<img width=""1195"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/218186818-526b2b6a-599e-43e1-aa7b-7f536887730a.png"">"
26773daf05af3aa274f95fc3e506619d5be8566c,Steven,2023-02-09 14:58:37+00:00,GitHub,2023-02-09 14:58:37+00:00,"[tests] Add tests for `examples` (#9403)

These tests will run if one of the conditions is met:

- any change to `./examples`
- any changes to `./packages/frameworks`

The test ensures that examples can build and deploy without errors.

In a future PR, we could improve these tests to make requests to the
test deployment (like we do for probes)."
8087b7804e37e0eb8cdea593b6e131f4bd6d98df,Steven,2023-02-09 14:56:17+00:00,GitHub,2023-02-09 14:56:17+00:00,"[tests] Fix app-dir test assertion (#9404)

This was changed in `next@canary`"
c8690190f67702b7a9b7feb3d892c8789d18d9b6,Chris Barber,2023-02-09 05:03:52+00:00,GitHub,2023-02-09 05:03:52+00:00,"[cli] Update notification redesign (#9392)

This PR does a couple fantastic things:

1. Increases latest version check from once a week to once a day
2. Increases latest version notification from once a week to once every 3 days unless an even newer version is available
3. Update changelog link to all releases and make text an actual link
4. Redesign of the update notification to be more visible by wrapping in a box
5. Replace `boxen` (500KB) (used by `vc bisect`) with slimmed down built-in version (3.4KB)
6. Update notification appears at the end of the command regardless if an error occurred

Regular notification: displayed once every 3 days or sooner if a new release first day:

<img width=""438"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/217167938-40baa1fe-2ab7-4092-a8a0-c4a968d5fc17.png"">

Same as above, but formats the notification to adapt to narrow terminals:

<img width=""389"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/217170374-b3f23ffc-47cc-45ca-aa0b-1dde4fb1c66c.png"">

Whenever any command (aside from `help`) returns a non-zero exit code, show an additional message to encourage updating:

<img width=""436"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/217172208-b9e24e67-669f-4403-8bf2-29f896b27f06.png"">

Linear: https://linear.app/vercel/issue/VCCLI-504/investigate-old-update-notifier-behavior"
74f6cf31fc09923ec6f6412fea7459d425fe0f7a,JJ Kasper,2023-02-09 00:45:16+00:00,JJ Kasper,2023-02-09 00:45:16+00:00,"Publish Stable

 - vercel@28.15.3
 - @vercel/gatsby-plugin-vercel-builder@1.1.3
 - @vercel/next@3.4.2
 - @vercel/static-build@1.3.5"
abd5310e58e1ebc737781f4185320ce7a3e95421,JJ Kasper,2023-02-09 00:38:18+00:00,GitHub,2023-02-09 00:38:18+00:00,"[next] Update env variable for output trace root (#9402)

Since turbo and nx only consider `NEXT_PUBLIC_` prefixed env variables for the cache key this ensures we expose variables that affect the build in that format as well so that an incompatible build cache isn't attempted to be leveraged. No additional tests were added here as this related to build cache which can't be reliably tested here. 

x-ref: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1675821643786319)"
f3ef9696d76463556bd6f38c6a4234af8181f40a,Steven,2023-02-09 00:12:53+00:00,GitHub,2023-02-09 00:12:53+00:00,"[tests] Fix test for `functions` config (#9401)

This message was recently updated in the API response

- https://github.com/vercel/api/pull/17126

---------

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
86eb67c3becd9e687dba6e1a918456e1919307bb,Sean Massa,2023-02-08 21:41:12+00:00,GitHub,2023-02-08 21:41:12+00:00,"[examples] update Vite example lockfile (#9400)

The [Vite example update](https://github.com/vercel/vercel/pull/8362)
looked like it would install dependencies just fine because if you
navigate to `./examples/vite` and run `pnpm i --frozen-lockfile`, it
will work. If instead you copy that example outside of this repo and run
the same command, you'll get an error.

We'll fix that elsewhere, but for now, let's fix the Vite example
itself.

---

* [Failed Deployment with Current
Example](https://vercel.com/endangeredmassa/vite-new-example/5vULFx1U5ob8t7sjuTGGw9AY8xdL)
* [Successful Deployment with Updated
Example](https://vercel.com/endangeredmassa/vite-new-example/4gVTJbUAdR4BmQfoxfhUrLrXpxx5)"
1ec44ee1e360f4ff1356df4c20aab3d6324a44c8,MoskalykA,2023-02-08 17:48:06+00:00,GitHub,2023-02-08 17:48:06+00:00,"[examples] Bump Vite.js (#8362)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
Co-authored-by: Lee Robinson <me@leerob.io>"
e24f42e9bc92ca7982644b70360f3544f80158f1,Nathan Rajlich,2023-02-08 16:15:20+00:00,GitHub,2023-02-08 16:15:20+00:00,"[gatsby-plugin-vercel-builder] Strip `assetPrefix` from `pathPrefix` (#9394)

Removes the `assetPrefix` value from the `pathPrefix` config value,
since Gatsby concats them for some reason."
c1c8b454cc29de4bd306b87078f36d6416ceb90f,JJ Kasper,2023-02-07 19:51:17+00:00,JJ Kasper,2023-02-07 19:51:17+00:00,"Publish Stable

 - @vercel/build-utils@6.2.1
 - vercel@28.15.2
 - @vercel/client@12.3.7
 - @vercel/fs-detectors@3.7.10
 - @vercel/gatsby-plugin-vercel-builder@1.1.2
 - @vercel/go@2.3.3
 - @vercel/hydrogen@0.0.49
 - @vercel/next@3.4.1
 - @vercel/node@2.9.2
 - @vercel/python@3.1.45
 - @vercel/redwood@1.1.1
 - @vercel/remix@1.2.12
 - @vercel/ruby@1.3.61
 - @vercel/static-build@1.3.4"
e2105e47b547a21344e6e4747a30731b3b0efbd6,JJ Kasper,2023-02-07 00:57:17+00:00,GitHub,2023-02-07 00:57:17+00:00,[build-utils] Add passQuery field to Prerender (#9388)
76d58673fccd538b026bc7640ee469a93108b8ab,(Jeemin Choi),2023-02-06 22:45:17+00:00,GitHub,2023-02-06 22:45:17+00:00,"[cli] Add `--no-color` mode (#8826)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
Co-authored-by: Chris Barber <chris.barber@vercel.com>"
a585969dd3b77a4ed36d6a2ca11b34f9050489f1,Andy Bitz,2023-02-06 16:24:54+00:00,Andy Bitz,2023-02-06 16:24:54+00:00,"Publish Stable

 - @vercel/build-utils@6.2.0
 - vercel@28.15.1
 - @vercel/client@12.3.6
 - @vercel/fs-detectors@3.7.9
 - @vercel/gatsby-plugin-vercel-builder@1.1.1
 - @vercel/go@2.3.2
 - @vercel/hydrogen@0.0.48
 - @vercel/next@3.4.0
 - @vercel/node@2.9.1
 - @vercel/python@3.1.44
 - @vercel/redwood@1.1.0
 - @vercel/remix@1.2.11
 - @vercel/ruby@1.3.60
 - @vercel/static-build@1.3.3"
35eca33b443eae7ab1c553b421119f8453a99195,Andy,2023-02-06 14:46:18+00:00,GitHub,2023-02-06 14:46:18+00:00,[redwood] Consider all Lambda options (#9386)
d60815396122d9f98e9541beeecf84e5946019d5,Andy,2023-02-06 11:28:41+00:00,GitHub,2023-02-06 11:28:41+00:00,[next][build-utils] Add support for cron to vercel.json (#9374)
a4cfc5f9430d8a9393b28f5177f85417a86917a0,Bishal Shrestha,2023-02-03 23:23:20+00:00,GitHub,2023-02-03 23:23:20+00:00,[docs] Add troubleshooting step for no serverless pages error  (#9333)
2eef3e3ddbc459f507b819c3d96c6c193cefc845,chloetedder,2023-02-03 22:56:22+00:00,GitHub,2023-02-03 22:56:22+00:00,"[fs-detectors] Add fix for if monorepo and proj at root (#9353)

If there is a monorepo that has one project at the root level we want to
return commands without the relative to root prefixes

---------

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
8120fd3d7a7a02de6aabc0d72e61e4ea99114dc6,Swarnava Sengupta,2023-02-03 19:12:29+00:00,GitHub,2023-02-03 19:12:29+00:00,[examples] Update Astro example to v2 (#9371)
ba498f3a8e7dc7097d34fc380f097f9a55197c90,Andy McKay,2023-02-03 17:01:02+00:00,GitHub,2023-02-03 17:01:02+00:00,"[python] Cope with duplicate header values (#9205)

There are times when a request can arrive for a Python function with headers as a list. One of those examples is this header `x-vercel-proxied-for` which apparently is set twice. Example:

`[b'x-vercel-proxied-for', [b'207.81.134.243', b'172.71.147.74']]`

I took a quick scan through the other Python server implementations and I don't think any of them manipulate the value of the HTTP headers, the way the ASGI one does so I think we are good there.

To reproduce:

`curl https://..../ -H ""foo: bar"" -H ""foo: bar""`

Will fail.

Fixes: https://github.com/vercel/vercel/issues/9132"
b5a940827266893fb5649afc539630d2de1f4821,Steven,2023-02-03 15:46:18+00:00,GitHub,2023-02-03 15:46:18+00:00,"[node] Add log for unused config runtime (#9373)

Both `runtime: undefined` and `runtime: nodejs` have the same behavior
but we want to change that in the future.

The first step is to see if `runtime: nodejs` is currently used at all."
946f7f0bfcd939bba29da54dd4718a0adab45572,Nathan Rajlich,2023-02-02 22:29:52+00:00,GitHub,2023-02-02 22:29:52+00:00,"[remix] Remove `render` path (#9365)

Instead of outputting a single SSR function at `/render` path, scan the
build manifest file to determine the proper paths to output the SSR
function at."
804a3863e77a72ed1c33a75783586f17dbe03ebf,Ethan Arrowood,2023-02-02 01:07:08+00:00,GitHub,2023-02-02 01:07:08+00:00,"[cli] add charset to content-type headers for `vc dev` (#9364)

Adds `charset: utf8` to the `content-type` header"
a4d16c681a7e85f64a2d78432d499c599b398bde,Andy Bitz,2023-02-01 22:26:52+00:00,Andy Bitz,2023-02-01 22:26:52+00:00,"Publish Stable

 - @vercel/build-utils@6.1.0
 - vercel@28.15.0
 - @vercel/client@12.3.5
 - @vercel/fs-detectors@3.7.8
 - @vercel/gatsby-plugin-vercel-builder@1.1.0
 - @vercel/go@2.3.1
 - @vercel/hydrogen@0.0.47
 - @vercel/next@3.3.21
 - @vercel/node@2.9.0
 - @vercel/python@3.1.43
 - @vercel/redwood@1.0.54
 - @vercel/remix@1.2.10
 - @vercel/ruby@1.3.59
 - @vercel/static-build@1.3.2
 - @vercel/static-config@2.0.12"
61bbd4f98b5fdf4f37bfc4af0d0b08aa63c6c183,Andy,2023-02-01 21:47:55+00:00,GitHub,2023-02-01 21:47:55+00:00,"[cli] Add crons to build output (#9360)

Co-authored-by: George Karagkiaouris <gkaragkiaouris2@gmail.com>
Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Nathan Rajlich <n@n8.io>"
fedf264862da300653e2b441ed830ff203703c1e,Nathan Rajlich,2023-02-01 20:27:36+00:00,GitHub,2023-02-01 20:27:36+00:00,"[cli] Merge build output contents instead of copying (#9358)

When Root Directory setting is used, and/or `vc build --output` is used,
do an intelligent ""merge"" (move) operation rather than copying the
contents of the build output directory to the destination. This should
overall be faster and avoid disk space issues for larger projects."
6420e54b35ec34907bd063f2b1772d534152ceef,Nathan Rajlich,2023-02-01 20:27:24+00:00,GitHub,2023-02-01 20:27:24+00:00,"[gatsby-plugin-vercel-builder] Use `pathPrefix` from BuildArgs (#9362)

Instead of using `pathPrefix` from the Redux store, grab the value
directly from the ""BuildArgs"" passed to `onPostBuild()`. This value
seems to properly reflect whether or not `--prefix-path` mode was
enabled during the Gatsby build process."
aa6b957b23101cff6c265bd4baa1c06a3fd1f1bd,Nathan Rajlich,2023-02-01 19:05:45+00:00,GitHub,2023-02-01 19:05:45+00:00,"[gatsby-plugin-vercel-builder] Move ""public"" dir instead of copying (#9356)

We are getting reports of some larger Gatsby projects running out of
disk space during build which seem to be the result of copying the
static directory multiple times.

So move instead of copying, which doesn't fully solve the problem, but
it does kick the can down the road a bit. Very large projects would
probably still hit the disk limit at some point. Anyways, moving is
faster than copying so this is still a net positive."
c6717a1492f049f3b7479661fdd1f232e45a768e,Nathan Rajlich,2023-02-01 02:57:06+00:00,GitHub,2023-02-01 02:57:06+00:00,"[static-build] Add Gatsby `GENERATED_FILE_COMMENT` for non-existing config file cases (#9354)

Follow-up to #9312 which missed these two cases."
0b33c1c3e71ec3b4e3bea69dfc91cf0a0ace9b09,Steven,2023-01-31 23:58:43+00:00,GitHub,2023-01-31 23:58:43+00:00,"[tests] Remove `actions/cache` since its actually slower than no cache (#9359)

This PR removes `actions/cache` since it is actually **slower** than no cache.

## ubuntu-latest
- [with cache](https://github.com/vercel/vercel/actions/runs/4059017971/jobs/6986950123): 21s + 3s + 1m4s = 88s
- [without cache](https://github.com/vercel/vercel/actions/runs/4059216913/jobs/6987026470): 44s

## macos-latest
- [with cache](https://github.com/vercel/vercel/actions/runs/4059017971/jobs/6986950275): 2m55s + 8s + 3m20s = 383s
- [without cache](https://github.com/vercel/vercel/actions/runs/4059216913/jobs/6987026554): 2m21s = 141s

## windows-latest
- [with cache](https://github.com/vercel/vercel/actions/runs/4059017971/jobs/6986950359): 1m10s + 6s + 3m29s = 285s
- [without cache](https://github.com/vercel/vercel/actions/runs/4059216913/jobs/6987026661): 1m25s = 85s"
dbea973546e1cb0cec3fe45d87650ced9451d2c5,Steven,2023-01-31 23:27:36+00:00,GitHub,2023-01-31 23:27:36+00:00,"[build-utils][cli] Add env vars for `VERCEL_PROJECT_SETTINGS_` (#9332)

This PR adds a few new environment variables for project settings.

This allows frameworks targeting the [Build Output API](https://vercel.com/docs/build-output-api/v3) to read data that is normally only available in through the `config` object when developing a [Builder/Runtime](https://github.com/vercel/vercel/blob/main/DEVELOPING_A_RUNTIME.md).

This will also solve the problem of old Builders/Runtimes that never passed the `config` through to `getNodeVersion()`.

- Related to https://github.com/unjs/nitro/pull/879"
8ac481470287761c7a5cbd88ddc0da3851d31750,Nathan Rajlich,2023-01-31 22:10:40+00:00,GitHub,2023-01-31 22:10:40+00:00,"[cli] Remove `.vercel/output` during `vc build --output` (#9357)

The `.vercel/output` directory gets wiped away when `--output` is _not_ being used, but it should be deleted even when the flag is being used so that build scripts targeting Build Output API directly always start with a fresh slate."
c84d6c4355d10e87673f45f10e9190ca9b32c7f8,github-actions[bot],2023-01-31 17:20:53+00:00,GitHub,2023-01-31 17:20:53+00:00,"[examples] Upgrade Next.js to version 13.1.6 (#9334)

This auto-generated PR updates Next.js to version 13.1.6

Co-authored-by: vercel-release-bot <infra+release@vercel.com>
Co-authored-by: Steven <steven@ceriously.com>"
61b6e879876e06fb2f7932db958c10ee37806701,Steven,2023-01-31 17:06:44+00:00,GitHub,2023-01-31 17:06:44+00:00,"[tests] Add labels to cron-update-next (#9351)

See example PR: https://github.com/vercel/vercel/pull/9334"
ada9a48d57be8f4375494a369aaa98cee1f5eae2,chloetedder,2023-01-30 22:19:54+00:00,chloetedder,2023-01-30 22:19:54+00:00,"Publish Stable

 - @vercel/build-utils@6.0.1
 - vercel@28.14.1
 - @vercel/client@12.3.4
 - @vercel/fs-detectors@3.7.7
 - @vercel/gatsby-plugin-vercel-builder@1.0.3
 - @vercel/go@2.3.0
 - @vercel/hydrogen@0.0.46
 - @vercel/next@3.3.20
 - @vercel/node@2.8.17
 - @vercel/python@3.1.42
 - @vercel/redwood@1.0.53
 - @vercel/remix@1.2.9
 - @vercel/ruby@1.3.58
 - @vercel/static-build@1.3.1"
31f3daa5b48dec9956feafb1411b3b031239274e,chloetedder,2023-01-30 18:35:42+00:00,GitHub,2023-01-30 18:35:42+00:00,"[fs-detectors] getMonorepoDefaultSettings: Fix settings (#9315)

1. `commandForIgnoringBuildStep` should be run at the project directory level not the monorepo root level
2. Simplifying the `installCommand` because doesn't need the relative root unless it is `npm`"
fdf7fd6784af2fbb266e59403bc06cf604dad3ec,Steven,2023-01-30 17:08:10+00:00,GitHub,2023-01-30 17:08:10+00:00,"[go] Add support for Go 1.19 (#9343)

![image](https://user-images.githubusercontent.com/229881/215526900-fef3e4e0-d1a6-4327-b68f-d8bb9068e2a0.png)"
db216f903f4dbf3944743f0e416e6dca371ea0c7,Bryan Eaton,2023-01-30 15:42:00+00:00,GitHub,2023-01-30 15:42:00+00:00,"[tests] Fix github action restore cache timeout (#9342)

Github Action for actions/cache has an issue that could cause it to take
1 hour and then timeout while trying to restore the cache.

Since `actions/setup-node` is no longer used to restore the pnpm cache,
the `timeout-minutes: 5` doesn't do anything for this action.

Instead we need to put an env variable on the `actions/cache` Github
Action to actually set the restore cache timeout.

```
env:
  SEGMENT_DOWNLOAD_TIMEOUT_MINS: 5 # See https://github.com/actions/cache/issues/810
```

- See discussion here https://github.com/vercel/vercel/discussions/9340
- Related to actions/cache#810
- Follow up to #8639"
40a55b11d527f45da51f485246547a7b1435127b,Nathan Rajlich,2023-01-28 17:03:27+00:00,GitHub,2023-01-28 17:03:27+00:00,"[gatsby-plugin-vercel-builder] Downgrade `esbuild` to v0.14.47 (#9329)

So that there will only be one copy in the dependency tree between `@vercel/node` and `@vercel/gatsby-plugin-vercel-builder`"
5da537124ca4e9c2682c45443a336ff3d464caa7,Nathan Rajlich,2023-01-27 22:00:29+00:00,GitHub,2023-01-27 22:00:29+00:00,[static-build] Add integration test for Gatsby Function (#9330)
54aaab83aad2a63ef7d8adb30acf4ef30051f2c7,JJ Kasper,2023-01-27 21:59:42+00:00,GitHub,2023-01-27 21:59:42+00:00,"[docs] Replace references to @now/next in error docs (#9331)

It's been long enough I think we can change these to refer to
`@vercel/next` instead.

x-ref: [slack
thread](https://vercel.slack.com/archives/C03DQ3QFV7C/p1674849801196389)"
7110cb449b23d9ef2f0987afe6d5323e8a1d0dd7,Chris Barber,2023-01-27 20:07:03+00:00,GitHub,2023-01-27 20:07:03+00:00,"[go] Improved 'go build' error handling (#9320)

The `go` builder doesn't properly handle when `go build` fails. There are 2 failure scenarios:

1. The `go` binary is not found in the `PATH`. There is no message that the `go` executable was not found. Worse, the builder continues and fails trying to run the compiled executable:

![image](https://user-images.githubusercontent.com/97262/214765157-f5244467-7bc8-48e8-8fcf-385efc32b283.png)

The solution is to switch from `spawnSync()` to `execFileSync()` so that if `go` is not found, it will throw like this:

<img width=""507"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/214765388-792ce59a-79f5-4bc8-8088-472969729558.png"">
Note: I temporarily changed the code to spawn `gooooo` to simulate `go` not being found. Either way, `execFileSync()` will throw and we get a helpful message.

2. The `go build` fails due to some actual build error. This should never happen, but better safe than sorry.

The solution here is to allow `go build` to inherit stdout/stderr and if `go build` should fail, we can see the output:

<img width=""574"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/214765614-c414f160-ad8e-4bd2-a628-b5a91dcc88d8.png"">"
89a15681d5f51a0e9685635c03bb1d6e24ce219f,Chris Barber,2023-01-27 18:21:59+00:00,GitHub,2023-01-27 18:21:59+00:00,"[build-utils] Rewrite rename() to be more efficient (#9322)

Around 6 months ago, @styfle brought to my attention how `rename()` in build-utils used `reduce()` and could be written better. So, I rewrote it.

Before, the code would create a new `Files` object and copy the contents of the previous `Files` object. This caused heavy garbage collection and memory thrashing.

Instead, I created a single `Files` object, then add the files to it.

Results:

| # Files | Before | After |
|---|---|---|
| 1,000 | 75 ms | 1 ms |
| 10,000 | 10.6 s | 7 ms |
| 20,000 | 44.6 s | 16 ms |
| 30,000 | 105.5 s | 22 ms |
| 100,000 | Too long | 73 ms |"
9317543c48a039bda0ae91f0819f38f789d98338,Ethan Arrowood,2023-01-27 17:12:32+00:00,Ethan Arrowood,2023-01-27 17:12:32+00:00,"Publish Stable

 - vercel@28.14.0
 - @vercel/gatsby-plugin-vercel-builder@1.0.2
 - @vercel/static-build@1.3.0"
e3f326f714ac304856fb7f42666f44b9c6849e7f,Nathan Rajlich,2023-01-27 17:08:22+00:00,GitHub,2023-01-27 17:08:22+00:00,"[gatsby-plugin-vercel-builder] Don't delete `.vercel/output` (#9327)

`.vercel/output` is already made fresh when running `vc build`, so the
plugin should not be doing this. In fact, it makes the `builds.json`
file be wiped away, which we don't want to happen."
eed6a377f1a14cf06cc6bb1e6bde6547e194d302,Ethan Arrowood,2023-01-27 16:23:02+00:00,GitHub,2023-01-27 16:23:02+00:00,"[static-build] Cleanup gatsby file changes after static-build completes (#9312)

Adds a new function that restores the user's `gatsby-config.(j|t|mj)s` and `gatsby-node.(j|t|mj)s` files"
c16d9e67849d29d5f508f8b076933ebfe29d1d5f,Nathan Rajlich,2023-01-26 20:15:58+00:00,GitHub,2023-01-26 20:15:58+00:00,"[static-build] Include Gatsby plugins as regular dependencies (#9313)

Right now, static-build will add the necessary Gatsby plugins to the project's `package.json` at build-time, which has been bothersome for package managers when using a frozen lockfile.

Another issue with it is that we install `latest` version of the plugin, so the version used becomes disjointed from the CLI version itself, which leads to unpredictability when trying to debug issues or help users roll back to a previous behavior if something breaks.

So instead of patching `package.json` directly, include the plugins as deps of static-build itself, and create symlinks to those paths into the project's `node_modules` directory."
25f6595d3698546ba69c7fe9f601a906167fef3f,Steven,2023-01-26 16:19:03+00:00,Steven,2023-01-26 16:19:03+00:00,"Publish Stable

 - @vercel/build-utils@6.0.0
 - vercel@28.13.2
 - @vercel/client@12.3.3
 - @vercel/edge@0.2.7
 - @vercel/frameworks@1.3.0
 - @vercel/fs-detectors@3.7.6
 - @vercel/gatsby-plugin-vercel-builder@1.0.1
 - @vercel/go@2.2.31
 - @vercel/hydrogen@0.0.45
 - @vercel/next@3.3.19
 - @vercel/node@2.8.16
 - @vercel/python@3.1.41
 - @vercel/redwood@1.0.52
 - @vercel/remix@1.2.8
 - @vercel/ruby@1.3.57
 - @vercel/static-build@1.2.1"
e8385566fad2ff56efec64fd7250909789662790,JJ Kasper,2023-01-26 04:54:24+00:00,GitHub,2023-01-26 04:54:24+00:00,"[next] Ensure we warn when leveraging next export (#9319)

We currently don't make it obvious when `next export` is being leveraged which de-opts features like `middleware`, `rewrites`, `redirects`, etc. so this adds a notice to let users know when we are using `next export` output."
52ca35252ac9c911ca78ee1117b541cf3b72761b,Ethan Arrowood,2023-01-26 03:33:18+00:00,GitHub,2023-01-26 03:33:18+00:00,"[tests] add gatsby related unit tests to static-build (#9318)

Adds some unit tests for the gatsby injection logic. 

These are net new since we've heavily changed the injection logic. The tests and fixtures in `build-fixtures` and `builds.test.js` are seemingly not executed. We may delete those here too."
2004e3d7340ff2bcd57a52d3169d4ed364042c02,Steven,2023-01-26 00:59:39+00:00,GitHub,2023-01-26 00:59:39+00:00,"[tests] Fix jest-haste-map: Haste module naming collision (#9317)

```
jest-haste-map: Haste module naming collision: app-three
The following files share their name; please adjust your hasteImpl:
  * <rootDir>/test/fixtures/33-hybrid-monorepo/backend/app-three/package.json
  * <rootDir>/test/fixtures/34-monorepo-no-workspaces/backend/app-three/package.json
```"
49b4394c446a90600b9b17f08a51aded1e3eb478,Steven,2023-01-25 22:53:06+00:00,GitHub,2023-01-25 22:53:06+00:00,"[next] Remove hardcoded NODE_OPTIONS (#9314)

The `NODE_OPTIONS` env var value is wrong here and we shouldn't be overriding the user's setting to begin with.

Typically, it will be assigned in a build container or project settings."
08cdfa2a057e835d13957933b8ec12a19e2031b4,Steven,2023-01-25 20:45:56+00:00,GitHub,2023-01-25 20:45:56+00:00,"[tests] Fix turbo config and bump to latest version (#9307)

We had Turborepo miscofigured. The `dependsOn: [""^build""]` means run all dependencies' build script, but it doesn't mean the package's build script will run first. For tests, it should always `dependsOn: [""build""]` (without the upcaret) instead to ensure its own build is complete before testing. I also learned that `outputs: []` can be dropped now since thats the default behavior."
f18fa8546f73e394efcba426f2c3833c97d04d7c,Nathan Rajlich,2023-01-25 19:07:04+00:00,GitHub,2023-01-25 19:07:04+00:00,"[static-build] Patch the `gatsby-node` config file to invoke `@vercel/gatsby-plugin-vercel-builder` (#9308)

We need to ensure that `@vercel/gatsby-plugin-vercel-builder` is executed as the very last plugin, which Gatsby itself doesn't really support in the plugins listing. So instead we'll patch the `gatsby-node` file to invoke the plugin in the project's own `onPostBuild()` hook, which does get executed last. The patching is similar to how is done with the `gatsby-config` file."
025344c4a7ecbbc580e0d901fb01f601d9089048,Swarnava Sengupta,2023-01-25 15:08:45+00:00,GitHub,2023-01-25 15:08:45+00:00,"[examples] Update Parcel version to support Node 18 (#9310)

Looks like our Parcel examples are currently failing in Node 18.x.
Updating the version which also Support Node 18.x

<img width=""814"" alt=""image""
src=""https://user-images.githubusercontent.com/1162991/214491854-92dc39a4-d7b7-442a-a16c-88621b52621a.png"">"
8b036e97eacf28d35161f65dce81ea1b561459cb,Chris Swithinbank,2023-01-25 00:05:13+00:00,GitHub,2023-01-25 00:05:13+00:00,"[frameworks] Add default immutable cache path for Astro v2 (#9305)

Astro v2 was released today. It includes [improved support for caching
all hashed build
assets](https://docs.astro.build/en/guides/upgrade-to/v2/#changed-_astro-folder-for-build-assets)
by gathering these all in a single `_astro` directory in build output
(previously these ended up in a number of different places).

This PR updates the Vercel frameworks config to provide out-of-the-box
immutable caching for these assets.

Co-authored-by: Steven <steven@ceriously.com>"
a4240e89e113c6ec238a1d8dbc09244a81122f2b,Ethan Arrowood,2023-01-24 23:37:03+00:00,GitHub,2023-01-24 23:37:03+00:00,"[gatsby-plugin-vercel-builder] add support for pathPrefix (#9294)

This pr adds support for the gatsby `pathPrefix`  properties"
0863ae0c6f98dbca841ecfbd56a24ca20894ef49,Nathan Rajlich,2023-01-24 22:10:43+00:00,GitHub,2023-01-24 22:10:43+00:00,"[gatsby-plugin-vercel-builder] Get rid of the `_ssr` function (#9304)

Right now we create the SSR serverless function at path `_ssr`, and then symlink all the other pages to that function.

Instead just make the first page encountered be the ""real"" function, and symlink all the other pages to that endpoint."
e09d3d5928cc36ae429e3e4480df3e0ce4564451,github-actions[bot],2023-01-24 21:52:38+00:00,GitHub,2023-01-24 21:52:38+00:00,"[examples] Upgrade Next.js to version 13.1.5 (#9288)

This auto-generated PR updates Next.js to version 13.1.5"
f5f544ffd22a47b4d0e1808ab9a3130cc094a79a,Nathan Rajlich,2023-01-24 19:36:47+00:00,GitHub,2023-01-24 19:36:47+00:00,"[gatsby-plugin-vercel-builder] Merge SSR and page-data into single Serverless Function (#9292)

Previously, the page-data Serverless Function and SSR Serverless Function were two distinct functions. They had almost identical file contents and just slightly different handler logic. So here we merge the handler logic into a single function and re-use the same Serverless Function for both page-data and SSR.

This simplifies the output quite a bit and deletes a good amount of code, and helps with build output size, cold boot times, etc."
4eb1ff87304a589e1b2946d42ac480e0a2abc9d3,Lee Robinson,2023-01-24 18:48:04+00:00,GitHub,2023-01-24 18:48:04+00:00,chore: Update Gatsby example README (#9300)
d4b604f05c8301bf76f24fc34f4a92e35e2b83e0,Chris Barber,2023-01-24 18:17:39+00:00,GitHub,2023-01-24 18:17:39+00:00,"[tests] Added cron workflow to update turbo (#9301)

Linear: https://linear.app/vercel/issue/VCCLI-450/add-cron-update-turbo-workflow

Based on the Next.js update script, this PR adds a cron job that checks for the latest Turbo canary release, then updates the `package.json` and `pnpm-lock.yaml` files."
a3cf05af0609107b5a9f945fc7cea1a91bd8f73d,Sean Massa,2023-01-24 15:20:03+00:00,GitHub,2023-01-24 15:20:03+00:00,[tests] Update CODEOWNERS (#9277)
df2bcec8303ca0226d821d722ef6a19af846c60a,Steven,2023-01-24 09:11:14+00:00,GitHub,2023-01-24 09:11:14+00:00,"[edge] Add missing metadata to package.json (#9293)

I noticed this was missing when visiting https://www.npmjs.com/package/@vercel/edge"
f5e81273af2bb3d89a4c40029b322babf3a39b25,Nathan Rajlich,2023-01-24 05:32:03+00:00,GitHub,2023-01-24 05:32:03+00:00,"[static-build] Add Gatsby plugins as dev dependencies (#9298)

So that the test runs get invalidated by Turbo when code changes within one of the plugin files. This is to avoid a PR breaking something in a plugin, but we don't notice it because the static-build tests still ""pass"" due to cache hit."
e75d900eafb69006e9c645df483e5e1c72481c41,Nathan Rajlich,2023-01-24 04:43:07+00:00,GitHub,2023-01-24 04:43:07+00:00,"[static-build] Use tarball URLs for Gatsby plugin E2E tests (#9297)

When running the static-build integration tests, use the tarball URL for the Gatsby plugins, so that any changes made to the plugin(s) in the PR will be reflected in the test deployments without having to publish to npm first.

Example screenshots of a deployment's build logs before I removed the debugging:

<img width=""1045"" alt=""Screenshot 2023-01-23 at 7 35 32 PM"" src=""https://user-images.githubusercontent.com/71256/214207250-24695a11-051d-4abb-a132-729ab0ab167a.png"">
<img width=""517"" alt=""Screenshot 2023-01-23 at 7 35 41 PM"" src=""https://user-images.githubusercontent.com/71256/214207254-74265e05-ed17-4fbb-b54d-9edc2234a3e4.png"">"
1a4f185045729400c2fefd189a9b15b8be3a13bf,Chris Barber,2023-01-24 01:05:44+00:00,GitHub,2023-01-24 01:05:44+00:00,"[build-utils] Removed unused execAsync() function (#9200)

This function can sometimes give a TypeScript error if @types/node says 'code' should be a `number | null` and yet the code is returns as a `number`:

```
@vercel/build-utils:build: src/fs/run-user-scripts.ts(140,13): error TS2322: Type 'number \| null' is not assignable to type 'number'.
@vercel/build-utils:build:   Type 'null' is not assignable to type 'number'.
```

I'm not sure if there are any other projects that depend on `@vercel/build-utils`, but it doesn't appear that the Vercel CLI nor the build container use this `execAsync()` function. If I'm mistaken, feel free to close this PR.

As this removal is a breaking change, setting the semver to major and not auto-merging unless others are in agreement."
35cc7db1a727fe5afbcb98f31e688bd38081e721,Steven,2023-01-23 23:51:58+00:00,GitHub,2023-01-23 23:51:58+00:00,"[cli] add missing deprecation warnings for builders/runtimes (#9289)

We used to print deprecations on the old build pipeline but this was lost when switching to `vercel build`.

This PR ensures that `vercel build` prints deprecation warnings if available.

## Example

https://npmjs.com/package/@now/node

<img width=""751"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/214143779-f71c88c8-6ee3-47ce-b459-a86154474991.png"">"
f535a20aad9b600088cbf4334ee25cd717a5a943,Nathan Rajlich,2023-01-23 21:31:49+00:00,GitHub,2023-01-23 21:31:49+00:00,[gatsby-plugin-vercel-builder] Remove `vercel.config.js` file handling (#9290)
fcea36bf044017ba7831d97d34fe83fcbc1710f4,Ethan Arrowood,2023-01-23 19:22:45+00:00,Ethan Arrowood,2023-01-23 19:22:45+00:00,"Publish Stable

 - vercel@28.13.1
 - @vercel/gatsby-plugin-vercel-analytics@1.0.7
 - @vercel/gatsby-plugin-vercel-builder@1.0.0"
93f5a4438b7d553e0f9eae83af541c14195cde71,Steven,2023-01-23 17:49:24+00:00,GitHub,2023-01-23 17:49:24+00:00,"[cli] Improve error message when using legacy `@now` builders (#8677)

This PR adds a helpful error message when using a legacy `@now` builder.

This mimics the behavior of the build-container."
72265aa9a117e881d8ae4aab6c00d49503e7b0e3,github-actions[bot],2023-01-21 00:23:59+00:00,GitHub,2023-01-21 00:23:59+00:00,"[examples] Upgrade Next.js to version 13.1.4 (#9279)

This auto-generated PR updates Next.js to version 13.1.4

Co-authored-by: vercel-release-bot <infra+release@vercel.com>"
6ee5eb137ba6744b948506247415eaab52b5fd4a,Felix Haus,2023-01-20 23:32:04+00:00,GitHub,2023-01-20 23:32:04+00:00,"[examples] Restrict node version for gridsome example (#9275)

Gridsome was not updated for [more than 2 years](https://www.npmjs.com/package/gridsome) and still relies on Webpack 4 what makes it incompatible with >= Node.js 17.
To make the example still deployable on Vercel, this adds an engine restriction to the `package.json` for that example.

Same as #9007."
c4f1c2f5edd44201bbd79199172d85ed398c1136,Ethan Arrowood,2023-01-20 22:31:41+00:00,GitHub,2023-01-20 22:31:41+00:00,"[gatsby-plugin-vercel-analytics] add build script (#9260)

Adds the previously omitted build script. Includes necessary changes to turbo.json too"
f35a77c2920310f6b229f2174198682b5ad38dc8,Ethan Arrowood,2023-01-20 21:15:58+00:00,GitHub,2023-01-20 21:15:58+00:00,"[gatsby-plugin-vercel-builder] support `trailingSlash` configuration (#9278)

Connects the gatsby trailingslash configuration property to our BOA3
trailingslash property"
4bf3c237ee2352b5d59f6f3d2869a6da2d082182,Andy McKay,2023-01-20 20:58:28+00:00,GitHub,2023-01-20 20:58:28+00:00,"[cli] Revert some tables back to stdout (#9227)

In https://github.com/vercel/vercel/pull/8735 some output was sent to `stderr`, this sends them `stdout` instead."
62c991f25e7274acd54c1a89471714aed940aa5f,github-actions[bot],2023-01-20 20:39:26+00:00,GitHub,2023-01-20 20:39:26+00:00,"[examples] Upgrade Next.js to version 13.1.3 (#9271)

This auto-generated PR updates Next.js to version 13.1.3"
6ea2db4ae9782406d53bf65f353725f641a90c58,Nathan Rajlich,2023-01-20 18:49:44+00:00,GitHub,2023-01-20 18:49:44+00:00,"[gatsby-plugin-vercel-builder] Various fixes and refactoring (#9268)

* Sets a valid number of seconds for DSG expiration (10 minutes - do we want to make that configurable somehow?)
* Sets the `group` of DSG pages, so that the page-data and SSR pages are associated
* Outputs SSR/DSG pages with `/index.html` suffix so that those paths are accessible
* Updates SSR and page-data functions URL path parsing logic to handle querystrings and the `index.html` scenario
* Remove the unnecessary `rewrite` related to page-data URL paths
* Remove the page-data function static file fallback handling (they are accessible as just regular static files)
* Correct the path for the page-data endpoing when the root-level index page is SSR/DSG"
1943b1ecc0494b2c800203de23112627a27f89fc,Ethan Arrowood,2023-01-20 18:07:25+00:00,GitHub,2023-01-20 18:07:25+00:00,"[gatsby-plugin-vercel-builder] add documentation to README (#9264)

Adds some basic documentation to the plugin"
92f5b6e0c9be947a68b617d282fc39144f530813,Ethan Arrowood,2023-01-20 17:27:31+00:00,Ethan Arrowood,2023-01-20 17:27:31+00:00,"Publish Stable

 - vercel@28.13.0
 - @vercel/gatsby-plugin-vercel-builder@0.1.2
 - @vercel/next@3.3.18
 - @vercel/node@2.8.15
 - @vercel/static-build@1.2.0"
ed6ce1149a8ac46569cf489ef8e5ff6cd242da4f,JJ Kasper,2023-01-20 17:08:32+00:00,GitHub,2023-01-20 17:08:32+00:00,"[next] Ensure outputDirectory is normalized (#9269)

This ensures we normalize an absolute `outputDirectory` passed into the Next.js builder as this can cause incorrect resolving. We should probably normalize this higher up as well but this is a starting point. 

Fixes: [slack thread](https://vercel.slack.com/archives/C0289CGVAR2/p1674176040821579?thread_ts=1674168748.257019&cid=C0289CGVAR2)"
fc3611fb80e938be499c143196b2157351516019,Ethan Arrowood,2023-01-20 11:02:26+00:00,GitHub,2023-01-20 11:02:26+00:00,"[static-build] add gatsby v5 fixture (#9267)

Adds a gatsby v5 fixture using ssr and dsg to demonstrate plugin works

Co-authored-by: Nathan Rajlich <n@n8.io>"
ed33c2b27c1b6c679f03ef9a4e6d9e09cacae569,Nathan Rajlich,2023-01-20 00:05:48+00:00,GitHub,2023-01-20 00:05:48+00:00,[gatsby-plugin-vercel-builder] Remove some leftover `console.log` calls (#9265)
a7a5bf1a1293b23360833a8dc5e9286f3b41c6e9,Nathan Rajlich,2023-01-19 23:10:06+00:00,GitHub,2023-01-19 23:10:06+00:00,"[tests] Pass in builder to `runBuildLambda()` (#9262)

Removes the need for `next`/`static-build` to be present in the root `package.json` file."
cc687b3880c2f6a05429a1618dd2314d66a03938,JJ Kasper,2023-01-19 23:03:58+00:00,GitHub,2023-01-19 23:03:58+00:00,[next] Correct RSC route for app dir with trailingSlash (#9263)
053ec92d5f0b5d278f5fd6dd6abe3974fa3ab66c,Nathan Rajlich,2023-01-19 21:39:27+00:00,GitHub,2023-01-19 21:39:27+00:00,"[node] Add build logs probe for TypeScript usage messages (#9261)

Follow-up to https://github.com/vercel/vercel/pull/9258, even though that issue seemed to only happen when linked to the monorepo locally. In any case, this test will ensure those log messages are intact for any other change around that part of the codebase in the future."
4838dc336a578251efef73bbf110f6e8109311df,Ethan Arrowood,2023-01-19 20:07:53+00:00,GitHub,2023-01-19 20:07:53+00:00,"[static-build] run pnpm install --lockfile-only after injecting gatsby plugins (#9259)

Fixes a bug where after injecting plugins and modifying the users package.json, pnpm would fail normal install"
eae45f4019a011dbae489618e5635545c223d0cb,Nathan Rajlich,2023-01-19 13:12:31+00:00,GitHub,2023-01-19 13:12:31+00:00,"[node] Fix TypeScript built-in compiler log message check (#9258)

This check started breaking probably after the pnpm switch, so switch to a simpler solution that doesn't require comparing the paths."
02feb564a73412ba52091e993bec42187447aff0,Ethan Arrowood,2023-01-19 03:34:47+00:00,GitHub,2023-01-19 03:34:47+00:00,"[static-build][fs-detectors] add gatsby builder plugin injection (#9252)

Modifies the `@vercel/static-build` injection logic in order to now inject both the analytics and builder gatsby plugins."
e174a06673de32a4d0db58e9f6343db5d476e7d0,Nathan Rajlich,2023-01-18 23:19:12+00:00,Nathan Rajlich,2023-01-18 23:19:12+00:00,"Publish Stable

 - vercel@28.12.8
 - @vercel/gatsby-plugin-vercel-builder@0.1.1
 - @vercel/next@3.3.17
 - @vercel/remix@1.2.7"
de034943af3c0dd260b5f5d58dedd578fdd7a5cd,Nathan Rajlich,2023-01-18 23:10:28+00:00,GitHub,2023-01-18 23:10:28+00:00,"[gatsby-plugin-vercel-builder] Fix turbo cache outputs configuration (#9257)

The published version on npm was missing the compiled code because Turbo
was not configured to cache them properly."
b3862271a5826b27cd6b3c65dafc58ee508e59f0,JJ Kasper,2023-01-18 21:30:30+00:00,GitHub,2023-01-18 21:30:30+00:00,"[next] Fix normalize route with middleware and basePath (#9255)

This ensures we properly match the index route when normalizing routes with `x-nextjs-data` for middleware. 

x-ref: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1674034533265989)"
aaceeef604ffe432af15d5f8f315c8ebc5db98f5,Steven,2023-01-18 19:13:55+00:00,GitHub,2023-01-18 19:13:55+00:00,"[tests] Add test for `./examples/remix` (#9251)

- Related to #9249"
ad107ecf79a15082dff683855e066d0b251e9127,Steven,2023-01-18 17:35:45+00:00,GitHub,2023-01-18 17:35:45+00:00,"[tests] Split more dev tests (#9230)

This PR attempts to balance the tests so they run concurrently and therefore faster.

I also sorted the tests so they are deterministic when splitting/chunking."
79ef5c37246c75973c0af9f5fd04afa51f0859ba,Steven,2023-01-18 13:39:44+00:00,Steven,2023-01-18 13:39:44+00:00,"Publish Stable

 - vercel@28.12.7
 - @vercel/client@12.3.2
 - @vercel/gatsby-plugin-vercel-builder@0.1.0
 - @vercel/next@3.3.16
 - @vercel/node-bridge@3.1.10
 - @vercel/node@2.8.14
 - @vercel/remix@1.2.6"
02ff265074a0b9434703e23f088a4f4305b63608,Nathan Rajlich,2023-01-18 11:24:42+00:00,GitHub,2023-01-18 11:24:42+00:00,"[remix] Fix config file dynamic import (#9249)

Follow-up to https://github.com/vercel/vercel/pull/8793, which breaks dynamic import of the config file, causing some issues for remix users: https://github.com/orgs/vercel/discussions/1282

The underlying error is `MODULE_NOT_FOUND`.

`import()` should work with `file://` URIs, however, since it's using typescript, the `import` gets compiled to `require()`, which does not support `file://` protocol scheme.

Supersedes https://github.com/vercel/vercel/pull/9248."
ae89b8b8bee068cf9499867d6c794cb2ccc47c24,Ethan Arrowood,2023-01-18 02:24:32+00:00,GitHub,2023-01-18 02:24:32+00:00,"[gatsby-plugin-vercel-builder] Implement `@vercel/gatsby-plugin-vercel-builder` (#9218)

<picture data-single-emoji="":gatsby:"" title="":gatsby:""><img class=""emoji"" src=""https://single-emoji.vercel.app/api/emoji/eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..Dli3tTuity9MEBnK.YyaiT9ASg3XvFmlx5q0Ovkdbkto2fgJGjIJhsLcraR_hqYG0DAC6CcBMiaARcI_hF0502EnqhkrHQLeYfEoxfomLi9iKk4WBAe-oSfsENsG9oAwzYdH4LA.VMtHCMaOXNOqpB2xvph3Kg"" alt="":gatsby:"" width=""20"" height=""auto"" align=""absmiddle""></picture> 

Implement the Build Output API v3 Gatsby plugin for use within `@vercel/static-build`.

Supersedes https://github.com/vercel/vercel/pull/8259."
4ccdcde463560dc44da89edf52523419fc56ab62,Steven,2023-01-18 00:25:26+00:00,Steven,2023-01-18 00:25:26+00:00,"Publish Stable

 - @vercel/build-utils@5.9.0
 - vercel@28.12.6
 - @vercel/client@12.3.1
 - @vercel/fs-detectors@3.7.5
 - @vercel/go@2.2.30
 - @vercel/hydrogen@0.0.44
 - @vercel/next@3.3.15
 - @vercel/node@2.8.13
 - @vercel/python@3.1.40
 - @vercel/redwood@1.0.51
 - @vercel/remix@1.2.5
 - @vercel/ruby@1.3.56
 - @vercel/static-build@1.1.7"
22d3ee160b727bc83f8f7e5f4539db86cf2ad94e,Nathan Rajlich,2023-01-18 00:21:40+00:00,GitHub,2023-01-18 00:21:40+00:00,"[build-utils] Add `includeDirectories` option to `glob()` (#9245)

Instead of always including empty directories in `glob()`, make it an
opt-in behavior because technically it's a breaking change to include
them by default."
6d97e1673e8466cae9689cbb9f03e2a2255c2aa3,Sean Massa,2023-01-17 19:46:58+00:00,Sean Massa,2023-01-17 19:46:58+00:00,"Publish Stable

 - vercel@28.12.5
 - @vercel/client@12.3.0
 - @vercel/node-bridge@3.1.9
 - @vercel/node@2.8.12"
522565f6e5018ce0dbedeb058853bfe746581a83,Nathan Rajlich,2023-01-14 01:41:50+00:00,GitHub,2023-01-14 01:41:50+00:00,"[node-bridge] Add missing lazy dependencies (#9231)

These were missing from the compiled ncc build of `helpers.ts`, and thus causing an error at runtime because the deps are not available within the Serverless Function."
07bf81ab102e67301bc31da98df8faa7ee5fced0,Steven,2023-01-14 00:27:14+00:00,GitHub,2023-01-14 00:27:14+00:00,"[client] Add sliding window delay when polling deployment complete (#9222)

The previous delay of 1500ms was causing some users to hit the API rate limits. This doesn't normally happen with a single deployment, but it can happen with several concurrent deployments (for example a monorepo with many projects).

We don't need to be polling so often, so this PR changed the polling delay to the following:

- During 0s-15s: check every 1 second
- During 15s-60s: check every 5 seconds
- During 1m-5m: check every 15 seconds
- During 5m-10m: check every 30 seconds"
35024a4e3af019c42d7fc5a49f60959d3c7cfd44,Steven,2023-01-13 23:53:57+00:00,GitHub,2023-01-13 23:53:57+00:00,"[tests] Split up dev tests to increase concurrency (#9228)

This will speed up CI because we can run more tests concurrently.

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
c1df9bca1997715308e22fff9449908be55724d9,Sean Massa,2023-01-13 23:24:50+00:00,GitHub,2023-01-13 23:24:50+00:00,[tests] skip private packages (#9229)
4c1cdd1f0faecd363a26c2b3b2145aa667ecaa4c,Nathan Rajlich,2023-01-13 22:24:31+00:00,GitHub,2023-01-13 22:24:31+00:00,"[client] Send empty directory entries to POST create deployment (#9118)

Update `@vercel/client` to send empty directory entries to the `POST` create deployment endpoint. This makes it so that CLI deployments will have empty directories re-populated in the build-container when doing `vc deploy`.

Follow-up to #9103."
b5cdc82a1cca4d0b3369490f8a19fd8f8478fe94,Sean Massa,2023-01-13 21:45:03+00:00,Sean Massa,2023-01-13 21:45:03+00:00,"Publish Stable

 - @vercel/build-utils@5.8.3
 - vercel@28.12.4
 - @vercel/client@12.2.31
 - @vercel/edge@0.2.6
 - @vercel/error-utils@1.0.8
 - @vercel/frameworks@1.2.4
 - @vercel/fs-detectors@3.7.4
 - @vercel/gatsby-plugin-vercel-analytics@1.0.6
 - @vercel/go@2.2.29
 - @vercel/hydrogen@0.0.43
 - @vercel/next@3.3.14
 - @vercel/node-bridge@3.1.8
 - @vercel/node@2.8.11
 - @vercel/python@3.1.39
 - @vercel/redwood@1.0.50
 - @vercel/remix@1.2.4
 - @vercel/routing-utils@2.1.8
 - @vercel/ruby@1.3.55
 - @vercel/static-build@1.1.6
 - @vercel/static-config@2.0.11"
c7851404b34f5a9ba30e048471031246101bce96,Nathan Rajlich,2023-01-13 21:42:29+00:00,GitHub,2023-01-13 21:42:29+00:00,"[*] Remove ""workspace:"" (#9225)"
e54da8a2e5504987a956e2baaad6d817028b597f,Sean Massa,2023-01-13 21:06:45+00:00,Sean Massa,2023-01-13 21:06:45+00:00,"Publish Stable

 - @vercel/build-utils@5.8.2
 - vercel@28.12.3
 - @vercel/client@12.2.30
 - @vercel/edge@0.2.5
 - @vercel/error-utils@1.0.7
 - @vercel/frameworks@1.2.3
 - @vercel/fs-detectors@3.7.3
 - @vercel/gatsby-plugin-vercel-analytics@1.0.5
 - @vercel/go@2.2.28
 - @vercel/hydrogen@0.0.42
 - @vercel/next@3.3.13
 - @vercel/node-bridge@3.1.7
 - @vercel/node@2.8.10
 - @vercel/python@3.1.38
 - @vercel/redwood@1.0.49
 - @vercel/remix@1.2.3
 - @vercel/routing-utils@2.1.7
 - @vercel/ruby@1.3.54
 - @vercel/static-build@1.1.5
 - @vercel/static-config@2.0.10"
a066bedf952f07e4f7cbb5dd50870bfa9ee8738c,Sean Massa,2023-01-13 21:06:16+00:00,Sean Massa,2023-01-13 21:06:16+00:00,add the lockfile before commit
09b23e53baff1f11d07a5cdef1b3d67114e3abe5,Sean Massa,2023-01-13 21:05:29+00:00,Sean Massa,2023-01-13 21:05:29+00:00,update lockfile because lerna did not do its job
b793a6758890d12aef76c48339412b641b14c3b1,Sean Massa,2023-01-13 21:01:55+00:00,Sean Massa,2023-01-13 21:01:55+00:00,"Publish Stable

 - @vercel/build-utils@5.8.1
 - vercel@28.12.2
 - @vercel/client@12.2.29
 - @vercel/edge@0.2.4
 - @vercel/error-utils@1.0.6
 - @vercel/frameworks@1.2.2
 - @vercel/fs-detectors@3.7.2
 - @vercel/gatsby-plugin-vercel-analytics@1.0.4
 - @vercel/go@2.2.27
 - @vercel/hydrogen@0.0.41
 - @vercel/next@3.3.12
 - @vercel/node-bridge@3.1.6
 - @vercel/node@2.8.9
 - @vercel/python@3.1.37
 - @vercel/redwood@1.0.48
 - @vercel/remix@1.2.2
 - @vercel/routing-utils@2.1.6
 - @vercel/ruby@1.3.53
 - @vercel/static-build@1.1.4
 - @vercel/static-config@2.0.9"
31dd354b3ad45f0c30a381659c14b81b915a6e74,Sean Massa,2023-01-13 21:00:52+00:00,Sean Massa,2023-01-13 21:00:52+00:00,remove unnecessary checkout
529ff3b2d7ecde2df34cc59ca9d8b4397ae62159,Sean Massa,2023-01-13 20:59:49+00:00,Sean Massa,2023-01-13 20:59:49+00:00,"add ""version"" lifecycle hook for lerna to update lockfile before commit"
e71d5638ee1c8f9f2bae396a4868928e2ef9e8a3,Sean Massa,2023-01-13 20:47:25+00:00,Sean Massa,2023-01-13 20:47:25+00:00,"Publish Stable

 - @vercel/build-utils@5.8.0
 - vercel@28.12.1
 - @vercel/client@12.2.28
 - @vercel/edge@0.2.3
 - @vercel/error-utils@1.0.5
 - @vercel/frameworks@1.2.1
 - @vercel/fs-detectors@3.7.1
 - @vercel/gatsby-plugin-vercel-analytics@1.0.3
 - @vercel/go@2.2.26
 - @vercel/hydrogen@0.0.40
 - @vercel/next@3.3.11
 - @vercel/node-bridge@3.1.5
 - @vercel/node@2.8.8
 - @vercel/python@3.1.36
 - @vercel/redwood@1.0.47
 - @vercel/remix@1.2.1
 - @vercel/routing-utils@2.1.5
 - @vercel/ruby@1.3.52
 - @vercel/static-build@1.1.3
 - @vercel/static-config@2.0.8"
8c16e765ee4562cd3d2da8856664b561a69fd5ae,Ethan Arrowood,2023-01-13 20:29:23+00:00,GitHub,2023-01-13 20:29:23+00:00,[tests] adjust root and api deps to use worskpace:* (#9223)
a008c9c7fe1a0a6b5885edaabc057c1eb5266896,Ethan Arrowood,2023-01-13 20:01:37+00:00,GitHub,2023-01-13 20:01:37+00:00,"[build-utils] Support empty directory entries for `glob()` and `download()` (#9164)

Reopening #9103 since it was reverted."
62b28ad0b4633d8307d0dda293ba4abe2701ee18,Sean Massa,2023-01-13 20:00:46+00:00,Sean Massa,2023-01-13 20:00:46+00:00,"Publish Stable

 - @vercel/build-utils@5.7.6
 - vercel@28.12.0
 - @vercel/client@12.2.27
 - @vercel/edge@0.2.2
 - @vercel/error-utils@1.0.4
 - @vercel/frameworks@1.2.0
 - @vercel/fs-detectors@3.7.0
 - @vercel/gatsby-plugin-vercel-analytics@1.0.2
 - @vercel/go@2.2.25
 - @vercel/hydrogen@0.0.39
 - @vercel/next@3.3.10
 - @vercel/node-bridge@3.1.4
 - @vercel/node@2.8.7
 - @vercel/python@3.1.35
 - @vercel/redwood@1.0.46
 - @vercel/remix@1.2.0
 - @vercel/routing-utils@2.1.4
 - @vercel/ruby@1.3.51
 - @vercel/static-build@1.1.2
 - @vercel/static-config@2.0.7"
7c50f2916e43799635438b6f4c843f2449fb02c0,Sean Massa,2023-01-13 19:04:59+00:00,GitHub,2023-01-13 19:04:59+00:00,"[frameworks] update framework detectors with packages (#9167)

In [a different PR](https://github.com/vercel/vercel/pull/9009), detecting frameworks by package name will also provide framework version metadata to the build. Should we update these framework detectors to look up their respective packages or were they not doing that already for a reason?

I left the old detectors in place as fallbacks, which looks like:

```
some: [
  {
    path: 'package.json',
    matchContent:
      '""(dev)?(d|D)ependencies"":\\s*{[^}]*""remix"":\\s*"".+?""[^}]*}',
  },
  {
    path: 'remix.config.js',
  },
],
```

Please review carefully."
a521dadafb1443372f33b9d442d3f1324d157362,github-actions[bot],2023-01-13 18:26:57+00:00,GitHub,2023-01-13 18:26:57+00:00,"[examples] Upgrade Next.js to version 13.1.2 (#9217)

This auto-generated PR updates Next.js to version 13.1.2

Co-authored-by: vercel-release-bot <infra+release@vercel.com>"
1efb5d6c0df08b660ad4cafc8255af1d811bc8e5,Steven,2023-01-13 17:59:49+00:00,GitHub,2023-01-13 17:59:49+00:00,"[fs-detectors] Add support for `api/**/*.tsx` zero config detection (#9216)

There are cases where you would want to use `.tsx` with Serverless Functions, such as OG Image Generation.

This PR adds zero config detection for `.tsx` file extensions and also consolidates the glob pattern into a single string matching all valid `@vercel/node` cases.

https://twitter.com/hasparus/status/1593136849404694528

https://linear.app/vercel/issue/VCCLI-322"
72df5ce8f6ac6e77f279630e32422b6affccadf2,Sean Massa,2023-01-13 17:24:00+00:00,GitHub,2023-01-13 17:24:00+00:00,"[examples][frameworks] add tests for all examples being detected (#9197)

This PR adds tests (under `packages/fs-detectors`) that ensure are `./examples` get detected as the appropriate framework."
e20b74687f41d5abef9179e08b0a04700b68011e,Chris Barber,2023-01-13 16:25:53+00:00,GitHub,2023-01-13 16:25:53+00:00,"[docs] Updated local dev instructions in CLI readme (#9215)

When I run `pnpm`, it just prints the help screen. I need to specify the install command `pnpm i`."
8f1358bd15e045f5f8076aef09eae9fc78c722b2,Sean Massa,2023-01-13 07:50:00+00:00,GitHub,2023-01-13 07:50:00+00:00,"[cli][frameworks][fs-detectors][next] detect framework versions (#9009)

This PR:

- updates `packages/frameworks` to have most supported frameworks specify which dependency version should reflect the overall framework version
- updates `packages/fs-detectors` to allow framework detection that returns the full `Framework` record instead of just the slug
- updates `packages/next` to return the detected Next.js version in the build result
- updates `packages/cli` to leverage these changes so that `vc build` can add `framework: { version: string; }` to `config.json` output

The result is that Build Output API and supported frameworks will return their framework version in the build result of `vc build` when possible, which is used by the build container  when creating the deployment. The dashboard later retrieves this value to display in richer deployment outputs.

Supports:

- https://github.com/vercel/api/pull/15601
- https://github.com/vercel/front/pull/18319

---

With the related build container updates, we get to see Next.js version in the build output. You'll see this with BOA+Prebuilt or a normal deploy:

<img width=""1228"" alt=""Screen Shot 2022-12-09 at 2 48 12 PM"" src=""https://user-images.githubusercontent.com/41545/206793639-f9cd3bdf-b822-45dd-9564-95b94994271d.png"">

---

### The Path to this PR

I went through all the supported frameworks and figured out how to best determine their versions. For most of them, we can check a known dependency's installed version number. 

We can get most of the way only checking npm. For a handful, we'd have to support Go/Ruby/Rust/Whatever dependencies.

I started with a more complex method signature to allow for later expansion without changing the signature. It looked like this, in practice:

```
async getVersion(dependencies: DependencyMap) => depedencies['next']
```

However, after checking all currently supported frameworks, I don't think this will end up being necessary. It also has the constraint that all dependencies have to be gathered and presented to the function even though it only needs to check for one or two. That's not a huge deal if we have them already where we need them, but we don't. We could use a variant here where this function does its own lookups, but this seemed unnecessary and would beg for duplication and small variances that could cause bugs.

Further, if we only look at `package.json`, we're going to either see a specific version of a version range. To be precise, we have to look at the installed version of the package. That means checking one of the various types of lockfiles that can exist or poking into node_modules.

If we poke into node_modules to detect the installed version, we introduce another point where Yarn 3 (default mode) will not be supported. If we read lockfiles, we have to potentially parse `npm`, `pnpm`, and `yarn` lockfiles.

If we use `npm ls <package-name>`, that also fails in Yarn 3 (default mode). We could accept that and go forward anyway, which would look like:

```
const args = `ls ${packageName} --depth=0 --json`.split(' ');
const { stdout } = await execa('npm', args, { cwd });
const regex = new RegExp(String.raw`${packageName}@([\.\d]+)`);
const matches = stdout.match(regex);
if (matches) {
  return matches[1];
}
```

But it turns out there's a `--json` option! That's what I ended up using, for now.

We could explore the lockfile route more, but after some initial digging, it' non-trivial. There are 3 main lockfiles we'd want to check for (npm, pnpm, and yarn) and there are different lockfile versions that put necessary data in different places. I looked for existing tools that parse this, but I didn't find any. We could certainly go down this path, but the effort doesn't seem worth it when `npm ls` gets us really close.

---

### Follow-up Versioning

Now that we know how to determine version per framework, we can vary configuration by version. In a future PR, we could allow a given value to vary by version number:

```
name: (version) => {
  if (semver.gt(version, '9.8.7')) {
    return 'some-framework-2''
  }

  return 'some-framework';
}
```

However, it may still be easier to differentiate significant versions by adding multiple entries in the list."
74c0b3e1bbe8ba70e6d69f02f811c4d84ea5c003,Logan McAnsh,2023-01-13 03:26:52+00:00,GitHub,2023-01-13 03:26:52+00:00,"[remix] Add support for `.cjs` and `.mjs` extensions for ""remix.config"" (#8793)

Adds support for `remix.config.mjs` and `remix.config.cjs` and
also updates the example/fixtures to the latest version of Remix.

See: https://github.com/remix-run/remix/pull/3675"
eb0a031aeb60836552ac8eb2dc6c8e022bf71ab6,Chris Barber,2023-01-12 23:32:11+00:00,GitHub,2023-01-12 23:32:11+00:00,"[tests] Adding missing jest-matcher-utils dependency (#9214)

Fixes the following error when tests are run:

```
Cannot find module 'jest-matcher-utils' from 'test/mocks/matchers/to-output.ts'
```

Log: https://github.com/vercel/vercel/actions/runs/3898221824/jobs/6656730316#step:10:3049"
f327be2d1f9c41dc534efd28385358c0738d775a,Chris Barber,2023-01-12 22:45:21+00:00,GitHub,2023-01-12 22:45:21+00:00,[cli] Bumped get latest version test timeouts (#9213)
16a5867f6bd523bda603d916b99f2f73fd042d79,Ethan Arrowood,2023-01-12 18:01:38+00:00,GitHub,2023-01-12 18:01:38+00:00,"[fs-detectors] use project path instead of name for turbo filter (#9210)

Fixes: https://github.com/orgs/vercel/discussions/1218"
90cbd675fae752efa2fcb25d36e4185513303979,Steven,2023-01-12 02:01:16+00:00,GitHub,2023-01-12 02:01:16+00:00,"[cli] Remove `qs` dependency (#9206)

There is no need for `qs` because the query string for `teamId` is already handled here:

https://github.com/vercel/vercel/blob/5b88f673f89c44b9e91e44247e29be6bed43805a/packages/cli/src/util/client.ts#L99"
9c768b98b71cfc72e8638bf5172be88c39e8fa69,Ethan Arrowood,2023-01-11 23:35:13+00:00,GitHub,2023-01-11 23:35:13+00:00,"[tests] Migrate from yarn to pnpm (#9198)

<picture data-single-emoji="":pnpm:"" title="":pnpm:""><img class=""emoji"" src=""https://single-emoji.vercel.app/api/emoji/eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..4mJzrO94AnSn0Pue.4apgaKtTUdQ-wxNyahjdJj28u8bbXreLoTA8AGqYjLta3MrsFvbo9DsQFth4CoIkBgXFhQ5_BVcKNfYbwLg4bKzyIvItKe4OFS8AzG7Kkicz2kUUZk0.nXyK_PvHzZFGA-MQB6XHfA"" alt="":pnpm:"" width=""20"" height=""auto"" align=""absmiddle""></picture> 

yarn has become increasingly more difficult to use as the v1 we rely on no longer receives updates. pnpm is faster and is actively maintained. 

This PR migrates us to pnpm."
4c3bc0532216f21f354623ada76b2315ef8ba519,JJ Kasper,2023-01-11 20:01:03+00:00,JJ Kasper,2023-01-11 20:01:03+00:00,"Publish Stable

 - @vercel/build-utils@5.7.5
 - vercel@28.11.1
 - @vercel/client@12.2.26
 - @vercel/fs-detectors@3.6.2
 - @vercel/gatsby-plugin-vercel-analytics@1.0.1
 - @vercel/go@2.2.24
 - @vercel/hydrogen@0.0.38
 - @vercel/next@3.3.9
 - @vercel/node@2.8.6
 - @vercel/python@3.1.34
 - @vercel/redwood@1.0.45
 - @vercel/remix@1.1.7
 - @vercel/ruby@1.3.50
 - @vercel/static-build@1.1.1"
3f47587a8b204ecc5782fde77dabcee5f1d6e7e7,JJ Kasper,2023-01-11 17:35:21+00:00,GitHub,2023-01-11 17:35:21+00:00,"[next] fix lambda creation when using edge runtime (#9204)

Co-authored-by: remorses <beats.by.morse@gmail.com>"
84f93d8af44caa64d4741c07564922a41c17911b,Nathan Rajlich,2023-01-11 10:21:42+00:00,GitHub,2023-01-11 10:21:42+00:00,"[build-utils] Support directory entries in `Lambda#createZip()` (#9201)

Adds support for empty directory entries in the Lambda `createZip()` function."
e1aaf8080bb413fad5ad0c4c10efdd6785b09908,Chris Barber,2023-01-11 03:45:36+00:00,GitHub,2023-01-11 03:45:36+00:00,"[cli] Replace update-notifier dependency with build in (#9098)

This PR replaces the `update-notifier` dependency with a custom implementation.

There are a few reasons: the dependency is quite large, it requires ESM in order to update, can sometimes suggest an update to an older version, and used dependencies with known security issues.

The result looks like:

<img width=""768"" alt=""image"" src=""https://user-images.githubusercontent.com/97262/208452226-b7508299-f830-4d42-a96a-7646ec8227aa.png"">

Note: This PR is the successor to https://github.com/vercel/vercel/pull/8090."
08573529674ef5a726eafa9b5754cfe0040e0320,JJ Kasper,2023-01-11 00:24:28+00:00,GitHub,2023-01-11 00:24:28+00:00,"[next] Fix dynamic routes order for app dir (#9202)

This ensures the RSC dynamic routes come before the HTML route as it's more specific and the HTML route can end up matching first unexpectedly. 

Test deployment with fix: https://discord-gmki6w031-vtest314-ijjk-testing.vercel.app/

Fixes: https://github.com/vercel/next.js/issues/44728"
f92d229a63dc6beb0f860396a862dc059145eea1,Chris Barber,2023-01-10 21:05:08+00:00,GitHub,2023-01-10 21:05:08+00:00,"[cli] Rollback team check (#9120)

https://linear.app/vercel/issue/VCCLI-377/rollback-failing-for-enterprise-teams

When running `vc rollback` for a deployment belonging to another team, the command will fail requesting the rollback. Technically, the command should have failed trying to get the deployment. This PR checks that the current team matches the deployment being rolled back.

![image](https://user-images.githubusercontent.com/97262/210431585-ffb73658-b15c-4adb-b110-a8c5e816db32.png)

This PR also cleans up a bunch of deployment related things. There were 3 functions to get a deployment and now there's just one which uses the latest v13 API. Get deployment error handling now throws instead of returning an error. The `Deployment` type definition has been updated to match the v13 response and mock deployment data was also updated."
427a2a58cf8114d19244b635b479f0e65d37e290,Steven,2023-01-10 17:51:12+00:00,GitHub,2023-01-10 17:51:12+00:00,"[tests] Update turbo to 1.7.0-canary.9 (#9193)

Let's try out turbo canary

Co-authored-by: tknickman <tom.knickman@vercel.com>"
ccb5f301ad3690d5892c72df5bb410788637cd47,Ethan Arrowood,2023-01-10 15:22:31+00:00,GitHub,2023-01-10 15:22:31+00:00,"[static-build] @vercel/static-build to use @vercel/gatsby-plugin-vercel-analytics (#9194)

Updates the `static-build` injector to use the new plugin.

Still need to verify somehow that the newly published plugin is working as expected. It should be fine since it was a copy-paste from the previous plugin repo, but always good to verify before we break everything! 

This PR also updates the README in `@vercel/gatsby-plugin-vercel-analytics`"
721cd3afcbff994fa96704b4eb79e5f6da7ab73c,Ethan Arrowood,2023-01-09 22:53:47+00:00,Ethan Arrowood,2023-01-09 22:53:47+00:00,"Publish Stable

 - @vercel/build-utils@5.7.4
 - vercel@28.11.0
 - @vercel/client@12.2.25
 - @vercel/frameworks@1.1.18
 - @vercel/fs-detectors@3.6.1
 - @vercel/gatsby-plugin-vercel-analytics@1.0.0
 - @vercel/go@2.2.23
 - @vercel/hydrogen@0.0.37
 - @vercel/next@3.3.8
 - @vercel/node@2.8.5
 - @vercel/python@3.1.33
 - @vercel/redwood@1.0.44
 - @vercel/remix@1.1.6
 - @vercel/ruby@1.3.49
 - @vercel/static-build@1.1.0"
3c8f20047ffec7ce345e4676f1c3479b6e360060,Ethan Arrowood,2023-01-09 22:30:28+00:00,GitHub,2023-01-09 22:30:28+00:00,"Migrate gatsby-plugin-vercel to @vercel/gatsby-plugin-vercel-analytics (#9191)

This PR migrates https://github.com/vercel/gatsby-plugin-vercel to this
repo so that we can eventually integrate into our monorepo tooling.

Since it currently requires Node.js v12 to be built, I've manually
built, copied, and committed the package as it exists now so that we can
publish a stable v1 of `@vercel/gatsby-plugin-vercel-analytics`.

After work completes on adding support for Gatsby v4, I will come back
to this package and update it to Node.js v16 so that it can be
integrated properly into the repository's tooling.

 DO NOT SQUASH MERGE "
f15988418dc11f541493c22e4cfd2af7a080993c,Ethan Arrowood,2023-01-09 22:03:22+00:00,Ethan Arrowood,2023-01-09 22:03:22+00:00,migrate gatsby-plugin-vercel to @vercel/gatsby-plugin-vercel-analytics
5b88f673f89c44b9e91e44247e29be6bed43805a,Ethan Arrowood,2023-01-09 21:56:25+00:00,Ethan Arrowood,2023-01-09 21:56:25+00:00,"Add 'packages/gatsby-plugin-vercel-analytics/' from commit 'afa64cb2086ff1caa739eb4b585b50ed08ae8941'

git-subtree-dir: packages/gatsby-plugin-vercel-analytics
git-subtree-mainline: e28c5f9733e45883d98e63fcdf721f5bb3a38677
git-subtree-split: afa64cb2086ff1caa739eb4b585b50ed08ae8941"
e28c5f9733e45883d98e63fcdf721f5bb3a38677,Ethan Arrowood,2023-01-09 20:59:29+00:00,GitHub,2023-01-09 20:59:29+00:00,"[static-build] add support for gatsby esm config (#9183)

Adds support for auto injection into Gatsby's new ESM config format. Only injects if the `gatsby-config.mjs` is present, and continues to default generation of `gatsby-config.js`"
afa64cb2086ff1caa739eb4b585b50ed08ae8941,Tobias Lins,2023-01-09 16:27:44+00:00,GitHub,2023-01-09 16:27:44+00:00,ci: use elevated npm token (#12)
8572cc653a9695111e3d2abe18decba28e49f3d1,Douglas Parsons,2023-01-09 15:10:53+00:00,GitHub,2023-01-09 15:10:53+00:00,fix: run prettier + force new version (#11)
10841e8b0672628f47a8c80a765c011965390a40,Tobias Lins,2023-01-09 15:03:36+00:00,GitHub,2023-01-09 15:03:36+00:00,"Use GITHUB_TOKEN instead of GH_TOKEN (#10)

* Use GITHUB_TOKEN instead of GH_TOKEN

* ci: use GITHUB_TOKEN instead of GH_TOKEN"
1e13a6ca48809e07f9ce9ae1442a760a3f9af317,Mitchell Nally,2023-01-06 23:55:54+00:00,GitHub,2023-01-06 23:55:54+00:00,"[build-utils] Add fix for windows git bash to check path is set (#9163)

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Steven <steven@ceriously.com>"
976e082c4417fb69ff22c7205086f349d5f30c60,Ethan Arrowood,2023-01-06 22:42:38+00:00,GitHub,2023-01-06 22:42:38+00:00,"[tests] Fix monorepo tests so they are less flaky (#9181)

This PR generates lockfiles for the various monorepo build tests and updates the package versions to their latest within the major. This should help make these tests less flaky."
82d21f2ac8058a93c8544a07cc89aeca9eb2cf50,Steven,2023-01-06 20:22:16+00:00,GitHub,2023-01-06 20:22:16+00:00,"[tests] Update bot username/email of cron job (#9179)

Related to https://github.com/vercel/front/pull/18685"
f145540fe6f8d09aa7c5b8c542d41edc2c392c41,Grace Yun,2023-01-06 20:04:50+00:00,GitHub,2023-01-06 20:04:50+00:00,"[frameworks] Update screenshot for Next.js example (#9177)

Related issue: https://vercel.slack.com/archives/C017QMYC5FB/p1673025728939139

Updates the screenshot used for the Next.js template that shows up on the import/new project flow. The asset has been updated on Cloudinary (`/front/import/nextjs`) and this PR updates the version # of the url."
02d15eb0c44572ee409ffe207e130d983d5b0e1f,Tobias Lins,2023-01-06 14:44:48+00:00,GitHub,2023-01-06 14:44:48+00:00,ci: bump node to 16 (#8)
0088873a6ec1ca39127cf6c54afd78c9d5e0fc42,Douglas Parsons,2023-01-06 14:30:56+00:00,GitHub,2023-01-06 14:30:56+00:00,"Upgrade semantic-release to latest (#6)

Hoping this fixes the CI failure."
fc0e6872e51d53fffc137658c95acf2a249ec926,Steven,2023-01-05 21:27:06+00:00,Steven,2023-01-05 21:27:06+00:00,"Publish Stable

 - vercel@28.10.3
 - @vercel/frameworks@1.1.17
 - @vercel/fs-detectors@3.6.0
 - @vercel/next@3.3.7
 - @vercel/node-bridge@3.1.3
 - @vercel/node@2.8.4
 - @vercel/redwood@1.0.43
 - @vercel/remix@1.1.5
 - @vercel/static-build@1.0.46"
d800d9cd681958c7c202d8add0eee3df501711ba,Ethan Arrowood,2023-01-05 21:16:03+00:00,GitHub,2023-01-05 21:16:03+00:00,"[fs-detectors][cli] move monorepo default setting code to fs-detectors (#9101)

Makes the monorepo default setting logic reusable by API and includes a `commandForIgnoringBuildStep` setting for Turbo projects."
9c8f6aa70f88d8ab8861954e896afd644861e11a,Steven,2023-01-05 20:37:57+00:00,GitHub,2023-01-05 20:37:57+00:00,"[tests] Replace `::set-output` with `>> $GITHUB_OUTPUT` in gh actions (#9170)

This PR fixes a deprecation warning we have been seeing in GitHub Actions for a few months. See [example](https://github.com/vercel/vercel/actions/runs/3849500423/jobs/6558559310#step:7:453).

> Warning: The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/"
feceeef7b70e7532cd85f1c6dfcc00474a006aeb,Steven,2023-01-05 20:25:32+00:00,GitHub,2023-01-05 20:25:32+00:00,"[node] Fix ESM output from TS source (#7954)

- Depends on https://github.com/vercel/nft/pull/297
- Fixes #7908 
- Fixes #6194 

This PR bumps `@vercel/nft` (for production) and `ts-node` (for
development) to fix ESM behavior.

Because Node.js cannot dynamically set [loader
hooks](https://nodejs.org/docs/latest-v18.x/api/esm.html#loaders) once a
process is started, I had to change the way `ts-node` is registered by
using environment variables such as `NODE_OPTIONS`. Most of the logic
for TS and ESM was pulled out of the child process and into the parent.

Co-authored-by: Ethan Arrowood <ethan.arrowood@vercel.com>"
6215c516e7ef4ae1a94041e15ef875cdad0c749d,Steven,2023-01-05 20:12:59+00:00,GitHub,2023-01-05 20:12:59+00:00,"[tests] Turbo should use full logs when listing tests (#9172)

In PR #9168, the output mode was changed so it doesnt print logs when the result is cached. However, we need the output for the dry run where we list all relevant tests. So the flag was added to that one script only to avoid this skipped problem:

![skipped](https://user-images.githubusercontent.com/229881/210870102-a597d1b9-f007-41ba-8e1d-f53aa765b740.png)"
ada1ad384022a43088c783eb8fdcb47df056a7e6,Steven,2023-01-05 18:02:05+00:00,GitHub,2023-01-05 18:02:05+00:00,"[tests] Bump turbo and update turbo.json (#9168)

This PR does a few things
- Revert https://github.com/vercel/vercel/pull/8264 because it was causing some tests not to run (for example, modifying `@vercel/build-utils` should run tests for all packages)
- Bump `turbo` to version 1.6.3
- Update [`outputMode`](https://turbo.build/repo/docs/reference/configuration#outputmode) to new-only
- Update [`dependsOn`](https://turbo.build/repo/docs/reference/configuration#dependson) to `^` to ensure all dependencies are considered"
fe184618f48b3a17db84537ac0966580df0ea6f0,Sean Massa,2023-01-05 16:29:39+00:00,GitHub,2023-01-05 16:29:39+00:00,"[frameworks] fix blitzjs detection (#9166)

The framework detectors do not support this syntax:

```
path: 'blitz.config.(js|ts)',
```

This PR fixes framework detection for ""Blitz.js (Legacy)""."
de21cf9b629e2a3ae97450848d7be49c1d16eec8,Tobias Lins,2023-01-05 13:00:58+00:00,GitHub,2023-01-05 13:00:58+00:00,Track data also when page name cant be resolved (#5)
c9c5e148f7720b1bf8f3e87b0a8e6e0e14533f8b,Kiko Beats,2023-01-04 13:23:01+00:00,GitHub,2023-01-04 13:23:01+00:00,"[tests] use assert.strictEqual (#9162)

assert.equal is deprecated"
8115582e250cf37ac2f82a29f5eb05e0e2006fb7,Andy McKay,2023-01-04 04:11:08+00:00,GitHub,2023-01-04 04:11:08+00:00,"[frameworks] Fix vitepress screenshot (#9158)

When you are on this page, creating a project the image here is the screenshot of an example project in the `Vercel Examples` enterprise. However that was not working:

<img width=""1060"" alt=""Screen Shot 2023-01-03 at 2 26 58 PM"" src=""https://user-images.githubusercontent.com/74699/210451850-8208f42b-de43-4ac4-a1fe-b90d88fe86d8.png"">

It does this by hitting the API. In this case the problem is that there is a trailing slash on the domain name, causing the API to fail:

<img width=""477"" alt=""Screen Shot 2023-01-03 at 2 29 48 PM"" src=""https://user-images.githubusercontent.com/74699/210452032-2e32ae61-df29-48b4-b79f-93f5bcf299d3.png"">

So this removes that trailing, but I'll see if I can tighten this up as well so in the future it doesn't matter if there is a `/` there.

FYI: this passes unit tests in framework, because it passes the URL in demo through to `URL` and grabs the hostname, which strips out the `protocol` and trailing `/`. Perhaps we should do the same on front."
3e3f92e6d3d6b746a26891b77d2bd5b0b7de9578,JJ Kasper,2023-01-04 01:26:50+00:00,GitHub,2023-01-04 01:26:50+00:00,"[next] Lock test fixture dependency (#9159)

This locks the test dependency down for this fixture since the version of Next.js doesn't support the `node:` prefixed imports added in the latest version of `isomorphic-unfetch`. 

Fixes: https://github.com/vercel/vercel/actions/runs/3833489157/jobs/6525280122#step:9:6013"
d6cccd70f28969eec48b484b0e74b0942de9b6cd,Steven,2023-01-03 22:31:50+00:00,Steven,2023-01-03 22:31:50+00:00,"Publish Stable

 - @vercel/build-utils@5.7.3
 - vercel@28.10.2
 - @vercel/client@12.2.24
 - @vercel/fs-detectors@3.5.7
 - @vercel/go@2.2.22
 - @vercel/hydrogen@0.0.36
 - @vercel/next@3.3.6
 - @vercel/node@2.8.3
 - @vercel/python@3.1.32
 - @vercel/redwood@1.0.42
 - @vercel/remix@1.1.4
 - @vercel/ruby@1.3.48
 - @vercel/static-build@1.0.45"
3a68c7349624a74972d899205d394b32148a9498,Sean Massa,2023-01-03 22:29:27+00:00,GitHub,2023-01-03 22:29:27+00:00,"[build-utils] Revert ""Support empty directory entries for `glob()` and `download()`"" (#9157)

Reverts vercel/vercel#9103

We believe the original PR is the cause of errors like:

> Error: EISDIR: illegal operation on a directory, read"
1c21ba52cebaf377a2663646dfdaf4190e52139e,Ikko Ashimine,2022-12-27 17:53:17+00:00,GitHub,2022-12-27 17:53:17+00:00,"[docs] fix typo in DEVELOPING_A_RUNTIME.md (#9138)

specifc -> specific"
6e55e724988854105effe64768bb7721071e79f7,github-actions[bot],2022-12-24 20:28:11+00:00,GitHub,2022-12-24 20:28:11+00:00,"[examples] Upgrade Next.js to version 13.1.1 (#9125)

This auto-generated PR updates Next.js to version 13.1.1

Co-authored-by: Vercel Team Bot <team@zeit.co>"
cb29bfdd684893cace5454f50a11a777407a9e45,Chris Barber,2022-12-23 00:47:23+00:00,Chris Barber,2022-12-23 00:47:23+00:00,"Publish Stable

 - @vercel/build-utils@5.7.2
 - vercel@28.10.1
 - @vercel/client@12.2.23
 - @vercel/frameworks@1.1.16
 - @vercel/fs-detectors@3.5.6
 - @vercel/go@2.2.21
 - @vercel/hydrogen@0.0.35
 - @vercel/next@3.3.5
 - @vercel/node@2.8.2
 - @vercel/python@3.1.31
 - @vercel/redwood@1.0.41
 - @vercel/remix@1.1.3
 - @vercel/ruby@1.3.47
 - @vercel/static-build@1.0.44"
5ba2d61c77ed3579112abf5f37ad79d9e929f7ea,github-actions[bot],2022-12-23 00:31:42+00:00,GitHub,2022-12-23 00:31:42+00:00,"[examples] Upgrade Next.js to version 13.1.0 (#9117)

This auto-generated PR updates Next.js to version 13.1.0

Co-authored-by: Vercel Team Bot <team@zeit.co>"
879096fff3ed58dd9e04957b1146fe0e79b17584,Chris Barber,2022-12-21 21:09:12+00:00,GitHub,2022-12-21 21:09:12+00:00,"[frameworks] Fix vitepress output directory (#9115)

In July 2022, VitePress changed (https://github.com/vuejs/vitepress/pull/931) the output directory from `.vitepress/dist` to `docs/.vitepress/dist`, however the framework detector was still referencing the old .vitepress/dist` output directory."
99e40272cf5dc6d4dbfa1156078de6276f67c0e6,Nathan Rajlich,2022-12-21 20:06:14+00:00,GitHub,2022-12-21 20:06:14+00:00,"[build-utils] Support empty directory entries for `glob()` and `download()` (#9103)

There are some edge-case situations where a dependency or build process is expecting an empty directory to exist, and this expectation would fail currently because `glob()` does not return directory entries.

So update `glob()` to return entries for empty directories, which are also re-created properly when passed to the `download()` function."
04e9f771dff574e48d4128acd883935c50511425,Steven,2022-12-21 16:13:25+00:00,Steven,2022-12-21 16:13:25+00:00,"Publish Stable

 - vercel@28.10.0
 - @vercel/edge@0.2.1
 - @vercel/next@3.3.4"
6f21f1081d0cb9ef64b11c7da535ab98068846fb,JJ Kasper,2022-12-21 09:39:45+00:00,GitHub,2022-12-21 09:39:45+00:00,"[next] Ensure updated path is specific (#9112)

Follow-up to https://github.com/vercel/vercel/pull/9111"
d806c9f846099cb940d6f53ce6a8e6fffbd49a1c,JJ Kasper,2022-12-21 00:30:48+00:00,GitHub,2022-12-21 00:30:48+00:00,"[next] Handle output location (#9111)

Ensures output location is handled x-ref: [slack thread](https://vercel.slack.com/archives/C04DUD7EB1B/p1671473159350219?thread_ts=1671467623.309669&cid=C04DUD7EB1B)"
71cc4ca8652a8b9c58dca9d80b480ef29a4f7d22,Steven,2022-12-21 00:07:07+00:00,GitHub,2022-12-21 00:07:07+00:00,"[next] Disable Image Optimization API when next.config.js has `unoptimized: true` (#9110)

- Related to https://github.com/vercel/next.js/pull/44205"
21f25f5eb05ba2a978898da40e99cfd18a8878d3,Nathan Rajlich,2022-12-20 02:33:59+00:00,GitHub,2022-12-20 02:33:59+00:00,"[cli] Add `Output#link()` function to format terminal hyperlinks (#8370)

This adds a `link()` helper function to the `Output` class that is inspired by the `terminal-link` npm package.

The main difference with this version is that it's more tightly integrated with the `Output` class for the purposes of being able to toggle hyperlinks support on/off for [unit tests](https://github.com/vercel/vercel/blob/4a54b19f46953af2a808bad3e461798e5a40e350/packages/cli/test/unit/util/output/create-output.test.ts) by setting the `output.supportsHyperlink` boolean.

> **Note:** Since hyperlinks are still a relatively new feature, and users might not yet understand how to interact with them, we should only use this function for progressive enhancement scenarios at this time, and _not_ as part of a critical UX."
2a492fa7ecc49638da6c29a694db43e89f558fa9,Andy McKay,2022-12-19 19:20:10+00:00,GitHub,2022-12-19 19:20:10+00:00,Delete comment-on-pr.yml
f8ca24b226a9ac88973c81ed5b77c174afa085bb,Andy McKay,2022-12-19 19:19:53+00:00,GitHub,2022-12-19 19:19:53+00:00,Create comment-on-pr.yml
019590e845f3d33a62491911bc2d1dc3863fc7bb,Chris Barber,2022-12-19 18:20:04+00:00,GitHub,2022-12-19 18:20:04+00:00,"[cli] Only throw DeploymentNotReady if deployment not ready (#9100)

When adding an alias, the server can return a 400 Bad Request under these circumstances:

1. Invalid alias: no alias, empty string, null alias, alias domain is invalid, alias is not public, alias is not a subdomain (code: `'invalid_alias'`)
2. The deployment is indeed not ready (code `'deployment_not_ready'`)
3. The cert for the provided alias is not ready (code `'cert_missing'`)
4. There was an error assigning the alias (code varies)

`vc alias add` will treat all 4 of those bad request errors as the deployment ""is not ready"". Instead of treating all 400's as not ready, only return `DeploymentNotReady` if the `code` is set to `'deployment_not_ready'`."
6180701f8d7ddf7dc3c72aa29ec49c02c2497307,Simon He,2022-12-19 16:58:42+00:00,GitHub,2022-12-19 16:58:42+00:00,"[tests] add eslintcache (#8993)

Co-authored-by: Steven <steven@ceriously.com>"
b1c7ca8e91ae8c73eb2514d6d3b657e0dc34c602,github-actions[bot],2022-12-16 23:27:31+00:00,GitHub,2022-12-16 23:27:31+00:00,"[examples] Upgrade Next.js to version 13.0.7 (#9082)

This auto-generated PR updates Next.js to version 13.0.7"
dbc00a7c3e4ddfb63d712fd960448455e6bd206d,Sean Massa,2022-12-15 19:03:27+00:00,GitHub,2022-12-15 19:03:27+00:00,"[admin] Update CODEOWNERS for edge (#9084)

The CODEOWNERS file had an error referencing the `@vercel/edge-function` team, which does not exist. I assume this is supposed to be `@vercel/edge-compute`, but please confirm.

There are a [few edge-related teams](https://github.com/orgs/vercel/teams?query=edge)."
5ae7c2f4525a675dc0b24aeecc878096cf4ce2b2,Sean Massa,2022-12-15 18:32:53+00:00,Sean Massa,2022-12-15 18:32:53+00:00,"Publish Stable

 - @vercel/edge@0.2.0"
0cbc676a6f7fcd5ccfa2ee6d3ca9110de861309d,Sean Massa,2022-12-15 18:00:53+00:00,GitHub,2022-12-15 18:00:53+00:00,[edge] publish process.env types for edge functions (#9083)
61e588cd63c96f76c79a366417568502f14d08eb,Damien Simonin Feugas,2022-12-15 11:01:02+00:00,GitHub,2022-12-15 11:01:02+00:00,"feat(edge): adds json() response helper (#9081)

###  What's in there?

Because Typescript's `libdom` does not have [`static Response.json()`](https://github.com/microsoft/TypeScript-DOM-lib-generator/issues/1444) (which modern browsers and edge runtimes are supporting), Typescript users can't use easily use it.

This helper fills the gap.

###  How to test?

It's covered with unit tests"
4484c134487214af68bc97da322688ec027db532,Steven,2022-12-14 21:23:22+00:00,Steven,2022-12-14 21:23:22+00:00,"Publish Stable

 - @vercel/build-utils@5.7.1
 - vercel@28.9.0
 - @vercel/client@12.2.22
 - @vercel/frameworks@1.1.15
 - @vercel/fs-detectors@3.5.5
 - @vercel/go@2.2.20
 - @vercel/hydrogen@0.0.34
 - @vercel/next@3.3.3
 - @vercel/node@2.8.1
 - @vercel/python@3.1.30
 - @vercel/redwood@1.0.40
 - @vercel/remix@1.1.2
 - @vercel/ruby@1.3.46
 - @vercel/static-build@1.0.43"
0e4c7fa74a8896c6abca7829e3a06ccc7b3ec1cf,S. Elliott Johnson,2022-12-14 21:18:20+00:00,GitHub,2022-12-14 21:18:20+00:00,"[examples] Upgrade SvelteKit template to 1.0.0 (#9070)

 Kit is live!  

Merge prior to #9030. Manually updates Kit to latest (will need to have
a commit pushed after 1.0 goes live on NPM).

Co-authored-by: Steven <steven@ceriously.com>"
363dfef68cabbed6853ff2ca9a49a18f708e9a2b,Chris Barber,2022-12-13 18:05:30+00:00,GitHub,2022-12-13 18:05:30+00:00,"[frameworks] Add quotes to match vitepress dep (#9077)

Added quotes to get the `vitepress` detector to correctly detect the dependency."
37bace787507985425de764bada226186269e85a,Kiko Beats,2022-12-13 05:27:58+00:00,GitHub,2022-12-13 05:27:58+00:00,"[next] Use MIB for Lambda constants (#8991)

According to AWS Lambda official documentation:

> The Lambda documentation, log messages, and console use the abbreviation MB (rather than MiB) to refer to 1024 KB.

https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html

This is also a convenient thing for us since CF Limits are in base-2 (even they are printed as base-10)."
25e2b7f0cefa3f1fc19c6fd56fdb1ee3e55f4ce6,Sean Massa,2022-12-13 04:19:26+00:00,GitHub,2022-12-13 04:19:26+00:00,"[tests] fix flakey tests (#9071)

Fixes flakey tests / CI:

- git metadata test for corrupted `.git` directory
- version identifier for `build-utils` being using in `fs-detectors`'s `devDependencies`
- bad import from `../dist/..`"
142c2cede0c6eff10b756ba74fa184472ec82f98,Steven,2022-12-10 22:52:56+00:00,GitHub,2022-12-10 22:52:56+00:00,"[tests] Update to use `actions/cache@v3` (#9056)

Use `actions/cache` directly instead of relying on `actions/setup-node` to see if this solves [the hanging restore](https://github.com/vercel/vercel/actions/runs/3660219547/jobs/6187125554).

- Related to https://github.com/actions/cache/issues/810
- Related to https://github.com/Azure/azure-sdk-for-js/issues/22321


This also shaves a minute off cache restore time since we are caching 250MB instead of multiple GB."
17a7ec5456bddfd6fe4ef5813429b6c95a4ceda7,Nathan Rajlich,2022-12-09 19:29:50+00:00,GitHub,2022-12-09 19:29:50+00:00,"[cli] Add `--git-branch` option to `vc pull` and `vc env pull` (#9028)

Allows for the the Git branch name to be specified when pulling Preview environment variables.

```
$ vc pull --branch feat/new-header --environment preview

  Updated .vercel/.env.preview.local file [236ms]


$ cat .vercel/.env.preview.local
# Created by Vercel CLI
A=""a""

$ vc pull --branch remove/something --environment preview

  Updated .vercel/.env.preview.local file [340ms]


$ cat .vercel/.env.preview.local
# Created by Vercel CLI
B=""b""
```"
8e2226ad2a7bb734c7bf82a3e441c4365966669e,Ethan Arrowood,2022-12-09 17:52:53+00:00,GitHub,2022-12-09 17:52:53+00:00,"[tests] Create label-feature-request.yml (#9051)

Adds a workflow that auto replies to issues labeled with `triaged: feature request`"
1fe9a6c108e7fe3338ade4942121dc9eabe78d77,Andy McKay,2022-12-08 23:13:17+00:00,GitHub,2022-12-08 23:13:17+00:00,"[tests] Create label-triaged.yml (#9050)

Add in a message for when an issue is labeled `triaged: bug`. cc @Ethan-Arrowood"
a95e477ed3a2610e2a88ae5d6398416e7c829d39,Steven,2022-12-08 18:55:53+00:00,GitHub,2022-12-08 18:55:53+00:00,"[docs] Delete duplicate security.md (#9048)

This file is redundant because it is already [inherited from the
org](https://github.com/vercel/.github/blob/main/SECURITY.md).

This will allow us to manage the security policy in one place for all
repos.

See [the
docs](https://docs.github.com/en/communities/setting-up-your-project-for-healthy-contributions/creating-a-default-community-health-file)
for more info."
f619441eb4f6d86b9fe4cacba67c85f6e1cbe107,Steven,2022-12-08 14:21:05+00:00,GitHub,2022-12-08 14:21:05+00:00,"[cli] Remove unused dependency `email-prompt` (#9042)

Remove unused dependency `email-prompt`

- closes https://github.com/vercel/vercel/issues/1190"
3a4d221fde7af069b2e521895a18f874e566941d,aaronbrown-vercel,2022-12-07 23:27:23+00:00,GitHub,2022-12-07 23:27:23+00:00,"[docs] modify responsible disclosure email (#9045)

Quick update on the responsible disclosure email."
e65af715deed252f773d1437ad93c03f4361e678,Sean Massa,2022-12-07 23:04:27+00:00,GitHub,2022-12-07 23:04:27+00:00,"Revert ""testing a theory in CI"" (#9044)

Reverts vercel/vercel#9041"
5b802f7f9038e4876036f8225924ee45756e3285,Steven,2022-12-07 23:03:14+00:00,GitHub,2022-12-07 23:03:14+00:00,"[docs] Add security.md (#9043)

This is a copy of
https://github.com/vercel/next.js/blob/canary/SECURITY.md"
beee71cfe3b7c3484b3a69fde39cca736961b01a,Sean Massa,2022-12-07 22:52:28+00:00,GitHub,2022-12-07 22:52:28+00:00,"testing a theory in CI (#9041)

DO NOT MERGE"
6228d55d1cd762a2e644874ad560302d7e9051df,Andy McKay,2022-12-07 22:27:23+00:00,GitHub,2022-12-07 22:27:23+00:00,"Automate support label

Add in a workflow file to automate labelling and closing support issues."
f0a28287c3fe1e34d7dede01c7a6d5c88042131a,Steven,2022-12-07 21:23:09+00:00,GitHub,2022-12-07 21:23:09+00:00,"[docs] Delete pull_request_template.md (#9040)

This template is no longer used"
34b93e52c8fb504dca91b0a21ba75d9c846caea4,Steven,2022-12-07 16:17:54+00:00,GitHub,2022-12-07 16:17:54+00:00,"[examples] Bump `decode-uri-component` (#9029)

This PR closes all the dependabot PRs created today

- #9018
- #9019 
- #9020 
- #9021 
- #9022 
- #9023 
- #9024 
- #9025 
- #9026

Co-authored-by: Chris Barber <chris.barber@vercel.com>"
584d0ea8535f1fad5588a4dc51269d4985a32875,Sean Massa,2022-12-07 15:53:52+00:00,Sean Massa,2022-12-07 15:53:52+00:00,"Publish Stable

 - vercel@28.8.0
 - @vercel/node@2.8.0"
2413e684a183344805ca3442730baeb6d19bece5,Damien Simonin Feugas,2022-12-07 13:35:08+00:00,GitHub,2022-12-07 13:35:08+00:00,"feat(node,cli): allows 'edge' as possible runtime value (#9016)

###  What's in there?

As part of Edge function GA, we're allowing `edge` as a runtime value.
This is adding to the allowed list, so we stay backward compatible.

[Linear ticket](https://linear.app/vercel/issue/EC-481/add-edge-to-the-list-of-allowed-runtimes)

I've kept one instance of `experimental-edge` in the test fixtures to ensure we still supports it.

###  Checklist

####   Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
9b92a810bbef2f3497fb5174ce70e3faaf7bdea2,Andy McKay,2022-12-07 00:46:31+00:00,GitHub,2022-12-07 00:46:31+00:00,"[cli] Allow `ls` to specify a limit up to 100 (#8735)

### Related Issues

Allow the `ls` commands to have a `--limit` option that allows a user to fetch up to 100 records per page. Currently the default is 20, but the API allows up to 100. This keeps the default, if unspecified at 20. 

Fixes: https://linear.app/vercel/issue/VCCLI-244/add-limit-option-all-the-ls-subcommands

This adds in `ls --limit` into:
- [x] `alias ls`
- [x] `certs ls`
- [x] `dns ls`
- [x] `domains ls`

I note that `env` has an `ls` command, but it doesn't have a pagination command and [looking at the API](https://vercel.com/docs/rest-api#endpoints/projects/retrieve-the-environment-variables-of-a-project-by-id-or-name) it doesn't support pagination or limit.

Wasn't sure if I should add in `-L` as a short cut to `--limit`, seems like a good idea.

~Couldn't find any tests that cover this API, but I could be looking in the wrong place, this is the first pull request, so my apologies if I've missed it. But I'll take another look tomorrow and leave it in the draft state for now.~

Added in unit tests for each of the commands and mocks for those unit tests, which is has caused this PR to get quite a bit larger, sorry about that.

Of note for reviewers, there were a few places where I changed `console.log` to `output.log` to get the output passed to the tests - as far as I can tell everything works on the command line and in tests.

###  Checklist


#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
cd487bc604f0856524a24877a9a91925c88a6311,github-actions[bot],2022-12-05 21:00:42+00:00,GitHub,2022-12-05 21:00:42+00:00,"[examples] Upgrade Next.js to version 13.0.6 (#8998)

This auto-generated PR updates Next.js to version 13.0.6

Co-authored-by: Vercel Team Bot <team@zeit.co>
Co-authored-by: Steven <steven@ceriously.com>"
f2f6cc93bb8ee528423250661b79c3967a4c8787,Felix Haus,2022-12-05 18:08:13+00:00,GitHub,2022-12-05 18:08:13+00:00,"[examples] Restrict node version for umi example (#9007)

The umi example currently uses `umi@2` which uses `webpack@4` under the hood to build.
Because of this issue https://github.com/webpack/webpack/issues/14532 Webpack@4 is no longer able to run on Node.js 17+.
Since we use [Node.js 18 as default](https://vercel.com/changelog/node-js-18-lts-is-now-available) for new projects, this example currently breaks when it gets deployed.

Temporary fix is here to ensure that a Node.js version below 17 is used in the meantime."
17a73f4f117ab569c30212bcb732a30a2ea116b4,Chris Barber,2022-12-03 00:20:48+00:00,Chris Barber,2022-12-03 00:20:48+00:00,"Publish Stable

 - vercel@28.7.2"
2e0cbf10decc158984a1786fd22f0de0a8e6f729,Lee Robinson,2022-12-03 00:20:11+00:00,GitHub,2022-12-03 00:20:11+00:00,"[cli] Revert replace `update-notifier` dependency with built in (#9000)

Reverts https://github.com/vercel/vercel/pull/8090.


![image](https://user-images.githubusercontent.com/9113740/205410222-efd63ff6-8094-4cba-8316-559845c64289.png)"
b37ac5f798acbfb8f04e047301766440ad0d4c59,Sean Massa,2022-12-02 20:15:48+00:00,Sean Massa,2022-12-02 20:15:48+00:00,"Publish Stable

 - @vercel/build-utils@5.7.0
 - vercel@28.7.1
 - @vercel/client@12.2.21
 - @vercel/go@2.2.19
 - @vercel/hydrogen@0.0.33
 - @vercel/next@3.3.2
 - @vercel/node@2.7.1
 - @vercel/python@3.1.29
 - @vercel/redwood@1.0.39
 - @vercel/remix@1.1.1
 - @vercel/ruby@1.3.45
 - @vercel/static-build@1.0.42"
01ad4c4c8e9b02bc6718536083d2eb655265b593,Sean Massa,2022-12-02 19:54:24+00:00,GitHub,2022-12-02 19:54:24+00:00,"[build-utils] expand build result type for framework version (#8984)

Augments the `BuildResultV2Typical` type to support `framework` and `frameworkVersion` for use in Richer Deployment Outputs.

I added this to a new `meta` object because it contains data about the result, not really part of the result.

---

Supports a related builder container update."
577fd3e9792683daa8cd6e52786bac2d25d95b56,Steven,2022-12-01 23:07:52+00:00,GitHub,2022-12-01 23:07:52+00:00,"[cli] Replace `update-notifier` dependency with built in (#8090)

This PR replaces the `update-notifier` dependency with a custom
implementation.

There are a few reasons: the dependency is quite large, it requires ESM
in order to update, and can sometimes suggest an update to an older
version. For example:


![image](https://user-images.githubusercontent.com/229881/195891579-c8c047a6-51ec-45f2-b597-daf927f48203.png)


- Related to #8038

Co-authored-by: Chris Barber <chris.barber@vercel.com>
Co-authored-by: Chris Barber <chris@cb1inc.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
d649a3c9319c18d444de6747167ba94a5f6e7485,Steven,2022-12-01 18:34:56+00:00,GitHub,2022-12-01 18:34:56+00:00,"[node] Add caching for TS compile per file (#8987)

As a follow up to #8986, we can reduce the TS compile time even more by caching TS compile per file so we never compile the same file twice.  This brings down the total deployment time of a large app with many `api/*.ts` from 7 min to 5 min.

Note: review this PR with [whitespace disabled](https://github.com/vercel/vercel/pull/8987/files?w=1).

- Related to https://github.com/vercel/customer-issues/issues/925"
a036b033986a99061a9678efec033b9a7cbdfd4e,Chris Barber,2022-11-30 21:52:38+00:00,Chris Barber,2022-11-30 21:52:38+00:00,"Publish Stable

 - vercel@28.7.0
 - @vercel/frameworks@1.1.14
 - @vercel/fs-detectors@3.5.4
 - @vercel/next@3.3.1
 - @vercel/static-build@1.0.41"
1a6a030df53ea4e96130ef59380925e4a7e0ea7e,Chris Barber,2022-11-30 20:08:06+00:00,GitHub,2022-11-30 20:08:06+00:00,"[cli] Add `vc rollback` command (#8942)

The `vc rollback` command provides the ability to redeploy a previous
deployment and check the status of a rollback request.

#### Requesting a rollback

    vc rollback <id | url>

Upon requesting a rollback, the command will being a status polling loop
for 3 minutes. This timeout can be adjusted via the `--timeout <value>`
option which accepts time formats such as `30s` or `2m`. A timeout of
`0` (zero) will skip the status polling and immediately exit after
successfully requesting a rollback.

#### Querying rollback status 

    vc rollback
    vc rollback status

The `status` action will return the most recent rollback info within the
last 3 minutes.

### Related Issues

>
https://linear.app/vercel/issue/HIT-117/cli-add-support-for-vc-rollback-deployid
>
https://linear.app/vercel/issue/HIT-118/cli-add-support-for-vc-rollback-[status]

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
fc8b68eda23fcb4b704040cfdeceb713cf8e2692,Kiko Beats,2022-11-30 16:38:29+00:00,GitHub,2022-11-30 16:38:29+00:00,"edge: format MB with sepace separator (#8990)

The Edge Function size limit is declared in KiB, not in KB:


https://github.com/vercel/vercel/blob/d7654e2252660f6e3fd6f1de375ab8237dc6e178/packages/next/src/edge-function-source/constants.ts#L8

And `pretty-bytes` doesn't support base-2 as input:

```js
require('pretty-bytes')(1024 * 1024* 4) // => '4.19 MB' :(
```

Instead, `bytes` is used:

```js
require('bytes')(1024 * 1024* 4, { unitSeparator: ' ' }) // => '4 MB' 
```"
9ecc89a3c78502d4b213f97cc15b5ff904538380,Kiko Beats,2022-11-30 00:32:11+00:00,GitHub,2022-11-30 00:32:11+00:00,"[next] increase edge functions limit to 4MB (#8989)

Roll-up x4 more user code size for Edge Functions "
2a4e06616351031ebb46174187b6ab26b53616c1,Luc Leray,2022-11-29 20:05:31+00:00,GitHub,2022-11-29 20:05:31+00:00,"[frameworks] Fix astro default routes since it is not SPA (#8200)

The default routes for Astro are redirecting all non-existing files to
`index.html`, which means that the `404.html` page is not used, and
instead `index.html` is shown for all not found pages.

Astro outputs files for each page (ie. `about.html`, `blog.html`, ...)
so the `{handle: 'filesystem'}` route should be enough to route all
existing pages correctly.

The missing part to ship this fix is to answer the following question:
can we safely assume that Astro will always output a `404.html` file?

Internal ref: https://github.com/vercel/customer-issues/issues/638

Co-authored-by: Okiki Ojo <okikio.dev@gmail.com>
Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Steven <steven@ceriously.com>"
a19447f9cdc8c7be8aa3646dfb441dd9469d2ed3,Sean Massa,2022-11-29 16:13:02+00:00,Sean Massa,2022-11-29 16:13:02+00:00,"Publish Stable

 - @vercel/build-utils@5.6.0
 - vercel@28.6.0
 - @vercel/client@12.2.20
 - @vercel/frameworks@1.1.13
 - @vercel/fs-detectors@3.5.3
 - @vercel/go@2.2.18
 - @vercel/hydrogen@0.0.32
 - @vercel/next@3.3.0
 - @vercel/node@2.7.0
 - @vercel/python@3.1.28
 - @vercel/redwood@1.0.38
 - @vercel/remix@1.1.0
 - @vercel/ruby@1.3.44
 - @vercel/static-build@1.0.40"
dd032e8efaefb7ae23d2a0b02e4e952135b31069,JJ Kasper,2022-11-29 01:08:06+00:00,GitHub,2022-11-29 01:08:06+00:00,"[next] Update matching priority for middleware/rsc (#8978)

### Related Issues

Fixes: [slack
thread](https://vercel.slack.com/archives/C035J346QQL/p1669508061056179)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
b8079b85212ccaa84dc66cb36a0b7dc9f91b3b07,Jiachi Liu,2022-11-29 00:45:17+00:00,GitHub,2022-11-29 00:45:17+00:00,"[next] Fix incorrect 404.html path when app directory is present with pages folder (#8988)

### Related Issues


Fixes https://github.com/vercel/next.js/issues/43357

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
f8758258939be6ddb2058d5f1d3a0c026340b33a,Steven,2022-11-28 23:24:58+00:00,GitHub,2022-11-28 23:24:58+00:00,"[node] Add caching to TS compile (#8986)

Since introducing `vc build`, we no longer have isolated builds. This means we can share the cache across builds and improve TS compile across multiple builds.

For example, `api/foo.js` and `api/bar.js` are two different builds but they will likely share the same `tsconfig.json`. So this PR caches the initialization used before running the TS compiler so that it can be shared between builds of the same deployment.

In one customer build, we saw deployment time drop from 14 min to 7 min.

- Related to https://github.com/vercel/customer-issues/issues/925"
3ac4540202702ccf558f99c6774bdfff20e0e41b,Andy McKay,2022-11-28 19:41:45+00:00,GitHub,2022-11-28 19:41:45+00:00,"[dev] Update the templates to get closer to production (#8976)

### Related Issues

Update the templates so that `vc dev` is closer to production visually.
The two are different and on production there are a large number of
error conditions that `vc dev` does not handle, so this handles a few
more of the more common situations. There's probably more we could do
here.

I have a test application here:
https://testing-errors-andymckay.vercel.app/ so here's a list of
screenshots and URLs.

*404*
Example url: https://testing-errors-andymckay.vercel.app/api/not-found

`vc dev` before:

<img width=""731"" alt=""Screen Shot 2022-11-25 at 3 50 54 PM""
src=""https://user-images.githubusercontent.com/74699/204063815-b0fa0e74-c397-4ce7-8c69-10df4af7b956.png"">

Production:

<img width=""664"" alt=""Screen Shot 2022-11-25 at 3 05 13 PM""
src=""https://user-images.githubusercontent.com/74699/204063305-e3b5fbee-9784-457f-a029-65a3c66d003e.png"">

`vc dev` after:

<img width=""672"" alt=""Screen Shot 2022-11-25 at 3 05 29 PM""
src=""https://user-images.githubusercontent.com/74699/204063301-39b87612-5e9b-453a-8e19-47d4c2309b89.png"">

This is pretty much the same. The link goes to [this
page](https://vercel.com/docs/concepts/edge-network/frequently-asked-questions#why-do-i-see-a-404-error-when-accessing-my-deployment)
which I thought was useful in local development.

*500: Serverless error*
Example url: https://testing-errors-andymckay.vercel.app/api/500

`vc dev` before:

<img width=""753"" alt=""Screen Shot 2022-11-25 at 3 52 31 PM""
src=""https://user-images.githubusercontent.com/74699/204063860-b6bdbd34-cff5-4398-8c30-6020bea8479d.png"">

(trimmed the powered by bit at the bottom)

Production:

<img width=""800"" alt=""Screen Shot 2022-11-25 at 3 04 55 PM""
src=""https://user-images.githubusercontent.com/74699/204063365-110416e2-a402-4214-ac6a-7472c7c0d279.png"">

`vc dev` after:

<img width=""815"" alt=""Screen Shot 2022-11-25 at 3 33 00 PM""
src=""https://user-images.githubusercontent.com/74699/204063375-85913e95-dd3c-4e78-b8da-5c5f9dadb31d.png"">

Rather than pointing to logs, it refers a user to check their terminal.
The message about connection and vercel working correctly seemed not
relevant in a local situation.

*500: Edge error*
Example url:
https://testing-errors-andymckay.vercel.app/api/middleware-error

`vc dev` before:

<img width=""655"" alt=""Screen Shot 2022-11-25 at 3 51 58 PM""
src=""https://user-images.githubusercontent.com/74699/204063832-09c1b24a-e3f4-4574-8d2b-e4b84044217e.png"">

Production:

<img width=""850"" alt=""Screen Shot 2022-11-25 at 3 05 06 PM""
src=""https://user-images.githubusercontent.com/74699/204063410-9413f327-4c16-4f84-a508-152de5b767a8.png"">

`vc dev`:

<img width=""848"" alt=""Screen Shot 2022-11-25 at 3 33 11 PM""
src=""https://user-images.githubusercontent.com/74699/204063430-2985f835-57aa-427e-8d35-cee790c9f4f3.png"">

Rather than pointing to logs, it refers a user to check their terminal.
The message about connection and vercel working correctly seemed not
relevant in a local situation.

*502: Error*

I couldn't reproduce this on production, yet. Or really in `vc dev`,
yet. But it will look very similar to the 500 error but with the
appropriate error code and no ""blame"" assigned above it.

I have removed the `Powered by Vercel` at the bottom.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
0bbf826213696d13a1e78885ca60e913238c061e,Sean Massa,2022-11-28 16:32:50+00:00,GitHub,2022-11-28 16:32:50+00:00,"[build-utils] make `lambda` optional in `Prerender` constructor (#8965)

It turns out that there is [a logic flow](https://github.com/vercel/api/pull/15237/files#diff-54171844caccedbadf06e6f6f408676d4cd200358b55b62ca6f9818e113aeabbL144) in the build container that will not populate `Prerender#lambda` right away. The type error was being ignored with `@ts-expect-error`.

The `Prerender` class needs to handle this case.

---

This will be used in https://github.com/vercel/api/pull/15237"
f7dd55323997997dd7fe83b707ecc91f74f1506f,github-actions[bot],2022-11-27 01:25:20+00:00,GitHub,2022-11-27 01:25:20+00:00,"[examples] Upgrade Next.js to version 13.0.5 (#8966)

This auto-generated PR updates Next.js to version 13.0.5"
71b9ac6976bf139f53e893f651050e3375ac25ff,Andy McKay,2022-11-25 18:47:11+00:00,GitHub,2022-11-25 18:47:11+00:00,"Fix up some missing URLs (#8975)

### Related Issues

This fixes up a few links that had errors I found when scanning through
the code.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
191f63d03b158bead2d9cf277f263e2ae861c866,Lydia Hallie,2022-11-23 22:52:43+00:00,GitHub,2022-11-23 22:52:43+00:00,"[frameworks] Add VuePress and VitePress (#7815)

This PR adds [VuePress](https://vuepress.vuejs.org/) and [VitePress](https://vitepress.vuejs.org/)  the list of supported frameworks.

- https://vuepress-starter-template.vercel.app
- https://vitepress-starter-template.vercel.app

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`"
b11210e9ed0958de250f2ab06ac00cd1876a26bd,Sean Massa,2022-11-23 22:22:52+00:00,GitHub,2022-11-23 22:22:52+00:00,[docs] make `yarn dev` usage clearer (#8964)
164d392f568d52a7080c7ebd441f44ceb4863601,Sean Massa,2022-11-23 21:50:34+00:00,GitHub,2022-11-23 21:50:34+00:00,[build-utils][node][next][remix] add `operationType` to Lambda (#8887)
9b1c30913fb119b2797dcbe16a267da3b4f3e710,Nathan Rajlich,2022-11-23 21:18:37+00:00,GitHub,2022-11-23 21:18:37+00:00,"[cli] Fix `vc build --cwd` with a relative path (#8949)

`--cwd` is handled globally in the CLI entrypoint file, so if a relative path is used then it would be applied twice in `vc build` since it was _also_ handling `--cwd`. So remove `vc build`'s logic for it.

Fixes https://github.com/vercel/vercel/discussions/8948."
5d387517b1cb78457fff2f6fbbf31f5ab6153ae1,Chris Barber,2022-11-23 18:11:29+00:00,GitHub,2022-11-23 18:11:29+00:00,"[cli] Move json5 dependency to dev dependencies (#8935)

`json5` can be moved to a dev dependency since `ncc` bundles it into the output.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
97e0eb370e26042d2c5368021eda7a8049d55621,Sean Massa,2022-11-23 17:43:30+00:00,GitHub,2022-11-23 17:43:30+00:00,[docs] add more details on local development (#8960)
fa154098c8698842314eb9d26952e7ed4780e4bb,Sean Massa,2022-11-23 17:40:51+00:00,GitHub,2022-11-23 17:40:51+00:00,"[tests] Fix CI after Node 18 updates (#8959)

There are some more test failures after the node 18 updates rolled out. This PR fixes all of them."
6405a20dd3ddcdecb445c1af3043c90e9622815d,Dillon Raphael,2022-11-23 02:52:21+00:00,GitHub,2022-11-23 02:52:21+00:00,"[frameworks] Update ""blitz"" properties to match legacy detection (#8432)

A simple update to the framework array, updating the blitz properties to
match the legacy framework. This PR detects a `blitz.config.(ts|js)`
file which is specific to the legacy framework. With the blitz 2.0
update the framework detection should automatically be next.js."
7003531d5db7895fc3b2fa940c2d83b6e75bbd9e,Nathan Rajlich,2022-11-21 19:46:27+00:00,Nathan Rajlich,2022-11-21 19:46:27+00:00,"Publish Stable

 - @vercel/build-utils@5.5.9
 - vercel@28.5.6
 - @vercel/client@12.2.19
 - @vercel/go@2.2.17
 - @vercel/hydrogen@0.0.31
 - @vercel/next@3.2.13
 - @vercel/node@2.6.4
 - @vercel/python@3.1.27
 - @vercel/redwood@1.0.37
 - @vercel/remix@1.0.37
 - @vercel/ruby@1.3.43
 - @vercel/static-build@1.0.39"
13bfc29cec65538bef0c85d40d86a99a2f237ef0,Nathan Rajlich,2022-11-21 19:39:32+00:00,GitHub,2022-11-21 19:39:32+00:00,[cli] Fix failing tests after Node 18 default change (#8950)
26ea6b8860ea0a5c5031f217a12d75f12e0f1b16,github-actions[bot],2022-11-18 23:26:58+00:00,GitHub,2022-11-18 23:26:58+00:00,[examples] Upgrade Next.js to version 13.0.4 (#8946)
0ecc356103409f35888bbaa5a37d13de6bf99516,Lee Robinson,2022-11-18 19:58:07+00:00,GitHub,2022-11-18 19:58:07+00:00,"[examples] Move some framework templates to pnpm. (#8883)

`pnpm` is our package manager of choice. This repository contains
framework starter templates, which check-in lockfiles to speed up clone
& deploy time. This PR updates a few frameworks to use `pnpm` instead of
`yarn` or `npm`.

- Updates Gatsby to Gatsby 5 given Node.js 18 support
- Updates to latest Nuxt 3 template for stable version
- Updates Astro to latest stable version, previously on RC
- Updates Angular to v15, previously on v13"
e200bf2ddc6dd68822f1778bf5b2128f44c4c9ec,Nathan Rajlich,2022-11-18 19:23:25+00:00,GitHub,2022-11-18 19:23:25+00:00,"[build-utils] Remove Node 18 env var check (#8947)

Node 18 is the new default."
1542aff9eca6dd3234c2a04838d6863610290148,Chris Barber,2022-11-18 17:26:53+00:00,GitHub,2022-11-18 17:26:53+00:00,"[cli][next] Removed --forceExit from jest args (#8718)

Remove `--forceExit` and wait for the child `vc dev` process to close
before continuing.

Listen to the `'close'` event instead of `'exit'` to ensure stdio has
been flushed and closed before continuing.

Some tests cause `vc dev` to spawn child processes that in turn spawn
nested child processes that do not exit when the parent exits, so a
`nukeProcessTree()` helper was added to ensure all spawned processes are
cleaned up. Furthermore, some of the nested child processes don't
respond well to `SIGTERM` and we need to use `SIGKILL` if `SIGTERM`
doesn't do the job.

I uncovered a larger issue exposed by removing the `--forceExit` flag.
The go builder uses `go run` to build and run the go-based serverless
function. Turns out that `go run` will build the executable, then spawn
it with a parent process id (ppid) of `1` (launchd) on macOS. This means
that the go serverless function executable is not detected as a child
process of `vc dev` and won't be cleaned up, yet has inherited `stdout`
and `stderr` keeping Jest alive. The solution is to explicitly `go
build` the serverless executable, then run it.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with
tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
6796fd721d72042def14ec613e850199335d10e9,Ethan Arrowood,2022-11-17 21:48:37+00:00,Ethan Arrowood,2022-11-17 21:48:37+00:00,"Publish Stable

 - vercel@28.5.5"
15e95629701037e0a5b31aa6cd1a18fe2253ba4e,Ethan Arrowood,2022-11-17 21:47:52+00:00,GitHub,2022-11-17 21:47:52+00:00,"[cli] Add more guards to vc build monorepo support feature (#8939)

### Related Issues

Includes a guard checking for `vercel-build` and a LD flag to control
rollout.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
2cafcdab9dce089b6d89c06c85e8b87db98c1f98,Steven Tey,2022-11-17 20:27:02+00:00,GitHub,2022-11-17 20:27:02+00:00,[examples] Updated Nuxt starter to v3 stable (#8928)
bef3a4bef20519ec2fa8df7df1fee6793f85ba20,Ethan Arrowood,2022-11-17 14:34:31+00:00,Ethan Arrowood,2022-11-17 14:34:31+00:00,"Publish Stable

 - vercel@28.5.4
 - @vercel/fs-detectors@3.5.2"
9be16605ec027970007622c573e54e142237f1e3,Ethan Arrowood,2022-11-16 23:01:30+00:00,GitHub,2022-11-16 23:01:30+00:00,"[cli] support package.json based turbo config in vc build automatic build/install command feature (#8926)

### Related Issues

Adds support for package.json based turbo configuration. 

Includes test.

Confirmed with Turbo that `turbo.json` takes precedence over
`package.json` based config so that is how it is processed here.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
759744144a46d60c705569f1cc79e5d1be62cf0d,Rich Harris,2022-11-16 21:33:51+00:00,GitHub,2022-11-16 21:33:51+00:00,"[cli] fix typo: `configuarion` -> `configuration` (#8925)

### Related Issues

No related issue, this is a drive-by fix

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
896dd04cd77570f784180a95f9bba6f37cc878bc,Nathan Rajlich,2022-11-16 17:33:17+00:00,GitHub,2022-11-16 17:33:17+00:00,"[fs-detectors] Don't add ""api/*"" 404 route when only a middleware is present (#8920)

This route should not be added when there are no explicit builds under
the ""api"" directory.

Fixes https://github.com/sveltejs/kit/issues/6777."
2dae293c1ecc2396d9eaa8d43424e43ad46f57d1,Nathan Rajlich,2022-11-16 17:21:45+00:00,GitHub,2022-11-16 17:21:45+00:00,"[fs-detectors] Remove `limitedRoutes` (#8921)

These were only used for FS API v2, and are no longer needed."
4159b498b93cc340ee483beb5dd1ef18dc762408,Sean Massa,2022-11-15 22:43:09+00:00,Sean Massa,2022-11-15 22:43:09+00:00,"Publish Stable

 - vercel@28.5.3
 - @vercel/static-build@1.0.38"
feabd64d5e1b94e2e27d9bb350730c203adbdc75,Douglas Parsons,2022-11-15 22:37:18+00:00,GitHub,2022-11-15 22:37:18+00:00,"[static-build] support gatsby-config as typescript (#8894)

### Related Issues

A customer issue was raised that web-vitals analytics were not working for their Gatsby application, even though this is meant to be zero config. 

It turns out the issue is due to their `gatsby-config` file being declared as a `ts` file, rather than `js`. This is perfectly valid and supported in Gatsby. 

However, the static-build modifications that are made to automatically add the `gatsby-plugin-vercel` only apply to existing `js` files. 

This lead to their deployments containing both a `js` and `ts` version of `gatsby-config`. Luckily, the `ts` version has higher precedence, so _only_ web-vitals were affected. 

Closes https://linear.app/vercel/issue/FLA-364/investigate-gatsby-and-nuxt-data-issues

#### Tests

- [X] The code changed/added as part of this PR has been covered with tests
- [X] All tests pass locally with `yarn test-unit`

#### Code Review

- [X] This PR has a concise title and thorough description useful to a reviewer
- [X] Issue from task tracker has a link to this PR"
74593e4d813cb3f9ae5bb44878461355c3a86849,Ethan Arrowood,2022-11-15 21:56:46+00:00,Ethan Arrowood,2022-11-15 21:56:46+00:00,"Publish Stable

 - @vercel/build-utils@5.5.8
 - vercel@28.5.2
 - @vercel/client@12.2.18
 - @vercel/go@2.2.16
 - @vercel/hydrogen@0.0.30
 - @vercel/next@3.2.12
 - @vercel/node@2.6.3
 - @vercel/python@3.1.26
 - @vercel/redwood@1.0.36
 - @vercel/remix@1.0.36
 - @vercel/ruby@1.3.42
 - @vercel/static-build@1.0.37"
3770b8499958b9b87961742479af61cdd94b1154,Ethan Arrowood,2022-11-15 21:00:40+00:00,GitHub,2022-11-15 21:00:40+00:00,"[cli] add support for JSON5 and skip when no rootDirectory (#8913)

### Related Issues

Adds support for comments in JSON configs and skips operation when root directory is null or `'.'`

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
91bc2e693bf85d32f3123682d457a29c1b41291d,Nathan Rajlich,2022-11-15 19:37:18+00:00,GitHub,2022-11-15 19:37:18+00:00,"[cli] Remove `readOutputStream()` helper function for tests (#8889)

The `readOutputStream()` module was counting ""data"" events, not lines specifically, and was failing for me locally. So that was removed, and updated the tests that were using it to use the `line-async-iterator` module instead to be more explicit and be able to perform assertions on a per-line basis."
898a5621f1e02a9ddfc2e709f83e0fcb85f7d326,Nathan Rajlich,2022-11-15 08:25:21+00:00,GitHub,2022-11-15 08:25:21+00:00,"[build-utils] Fix `runNpmInstall()` error when install fails (#8909)

Fixes a regression where the thrown error was not propagated to the caller when npm deps failed to install."
4e41c0e0a60fa443e0a0b2a9aba539d02c9ffc10,Sean Massa,2022-11-14 20:24:34+00:00,Sean Massa,2022-11-14 20:24:34+00:00,"Publish Stable

 - vercel@28.5.1
 - @vercel/fs-detectors@3.5.1"
a8822170d67ed62b456810bd995fb7f4a18bf6bf,Ethan Arrowood,2022-11-14 20:23:12+00:00,GitHub,2022-11-14 20:23:12+00:00,"[fs-detectors] restore rush support in fs-detectors (#8907)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
7d87f66f5d602d412f0b363a8a8f76c333db846f,Sean Massa,2022-11-14 20:07:50+00:00,GitHub,2022-11-14 20:07:50+00:00,[cli] update yarn.lock (#8905)
8d2c0fec89b34c98e0a6123516d54407fc1cb738,Sean Massa,2022-11-14 18:53:42+00:00,Sean Massa,2022-11-14 18:53:42+00:00,"Publish Stable

 - vercel@28.5.0
 - @vercel/edge@0.1.2
 - @vercel/fs-detectors@3.5.0
 - @vercel/python@3.1.25"
0663524cd7d5c2fda4c5c8f88c22cb80bd178c84,Ethan Arrowood,2022-11-14 17:23:33+00:00,GitHub,2022-11-14 17:23:33+00:00,"[cli][fs-detectors] Improve `vc build` monorepo support (#8742)

### Related Issues

Improves how `vc build` handles monorepos. In short, this introduces
monorepo manager detection logic and then some helpful defaults so users
don't have to manually specify a `buildCommand` or `installCommand` when
linking a project within a monorepo.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
f283b3b10615bc88aa80687e1bf3f1332e5dca77,Chris Barber,2022-11-14 15:26:27+00:00,GitHub,2022-11-14 15:26:27+00:00,"[cli] Add node_modules/.bin to PATH instead of running npx/yarn run (#8890)

`runDevCommand()` assumes the dev command is an npm package and thus uses `npx` or `yarn run` to execute it. In the case of a Hugo-based app, there is no npm package, so we want spawn to find Hugo in the `PATH`. Then for Node-based apps, instead of `npx`, spawn should find the command since `node_modules/.bin` has been added to the `PATH`.

### Related Issues

> https://github.com/vercel/customer-issues/issues/871

Note: This PR is a recreation of https://github.com/vercel/vercel/pull/8864 because prettier changed a bunch of Hugo files, which was bloating the original PR.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
b572ef5d7149d055118825d61d2427ba35a681c8,github-actions[bot],2022-11-11 22:38:57+00:00,GitHub,2022-11-11 22:38:57+00:00,[examples] Upgrade Next.js to version 13.0.3 (#8891)
71e233ce7f73d3d78165250ad5ee7f9e11ae22af,Chris Barber,2022-11-11 02:33:31+00:00,GitHub,2022-11-11 02:33:31+00:00,"[python] Explicitly bind HTTP server to localhost (#8880)

On Windows, Python 3 is unable to listen on `0.0.0.0` and errors with:

```
[WinError 10049] The requested address is not valid in its context
```

The only solution I found is to bind to `127.0.0.1` or `localhost`. I've run into issues before with using `localhost`, so I chose to go with `127.0.0.1` and Windows (and macOS) seems to be happy.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5669fad6bcb5ebda45fccdf40769dcba185090b0,Nathan Rajlich,2022-11-11 02:25:38+00:00,GitHub,2022-11-11 02:25:38+00:00,[cli] Remove `--runInBand` from Jest (#8888)
c294409f5bcafeb57ac621b77bf33d703107c3cd,Dominik Ferber,2022-11-10 21:30:27+00:00,GitHub,2022-11-10 21:30:27+00:00,"[edge] fix broken link on npmjs.org (#8848)

Before this change clicking on ""follow the documentation"" from
https://www.npmjs.com/package/@vercel/edge would lead to a 404 as the
docs link is relative."
686f78a86e4f88f533a9ed720c0e45f9c581a3fb,Andy McKay,2022-11-10 17:40:57+00:00,GitHub,2022-11-10 17:40:57+00:00,"[cli] Add in a message for `deployment-error` message (#8865)

We have a link to an error page here:
https://github.com/vercel/vercel/blob/main/packages/cli/src/commands/deploy/index.ts#L873,
however that page is currently a 404.

This is an attempt to explain the error a bit more. Because there are
many possible causes of a deployment error, this mostly focuses on
explaining how to get to the logs.

### Related Issues

Fixes https://github.com/vercel/vercel/issues/1732. 

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Chris Barber <chris.barber@vercel.com>"
c6ed021d2e29a1e4e377426b182b935f371c7512,Josh Thomas,2022-11-10 15:24:20+00:00,GitHub,2022-11-10 15:24:20+00:00,"[examples] Add Vercel Analytics to Astro template (#8472)

Co-authored-by: Lee Robinson <lrobinson2011@gmail.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
f8cdc943ca2dd001aaad9c5361f2f6f74e7c8129,Ryan Carniato,2022-11-10 07:27:24+00:00,GitHub,2022-11-10 07:27:24+00:00,"[examples] update SolidStart example (#8707)

Updates the SolidStart example to the latest in anticipation of the
upcoming beta release."
d8d30b59ec622780f3e67118bb373efd12ce0f00,Nathan Rajlich,2022-11-09 08:43:42+00:00,GitHub,2022-11-09 08:43:42+00:00,"[examples] Remove `ENABLE_VC_BUILD` env var from Solidstart template (#8875)

Env var is no longer required."
a93383cf2ed695d99c7cbfbe3d71b58fbc29170c,Nathan Rajlich,2022-11-09 07:29:05+00:00,GitHub,2022-11-09 07:29:05+00:00,"Remove `ENABLE_VC_BUILD` from Vercel deployment (#8876)

This env var is no longer necessary."
49dac4c2295ba0c32a7d835415981f351919652d,Lee Robinson,2022-11-09 04:22:58+00:00,GitHub,2022-11-09 04:22:58+00:00,"[examples] Update Remix template for latest. (#8857)

From `create-remix`"
1b211f28dfdcb112f1aecb53a2b9f257ecc58420,JJ Kasper,2022-11-09 00:21:25+00:00,JJ Kasper,2022-11-09 00:21:25+00:00,"Publish Stable

 - vercel@28.4.17
 - @vercel/client@12.2.17
 - @vercel/frameworks@1.1.12
 - @vercel/fs-detectors@3.4.9
 - @vercel/next@3.2.11
 - @vercel/redwood@1.0.35
 - @vercel/routing-utils@2.1.3
 - @vercel/static-build@1.0.36"
c2d0887b94476cd540fb9d94e6e8b353cd343c38,JJ Kasper,2022-11-09 00:17:34+00:00,GitHub,2022-11-09 00:17:34+00:00,"[next][routing-utils] Add missing matcher support (#8874)

### Related Issues

This adds handling to ensure we pass through the `missing` route field
correctly for custom routes and middleware matchers. Tests are also
added in the complimentary Next.js PR for this, example deployment can
be seen here
https://vtest314-e2e-tests-jj4-vtest314-next-e2e-tests.vercel.app/

x-ref: [slack
thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1667935428788529?thread_ts=1667850697.542269&cid=C03S8ED1DKM)
x-ref: https://github.com/vercel/next.js/pull/42660

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
fbb8bba4cfb06040d62916bdc3fc849ac0b4d074,JJ Kasper,2022-11-08 19:03:01+00:00,JJ Kasper,2022-11-08 19:03:01+00:00,"Publish Stable

 - vercel@28.4.16
 - @vercel/next@3.2.10"
56cc87fe9dc3d3702cd49cf08d0001fa76be75f0,JJ Kasper,2022-11-08 18:31:02+00:00,GitHub,2022-11-08 18:31:02+00:00,"[next] Handle skip normalize flag for middleware (#8873)

### Related Issues

x-ref: [slack
thread](https://vercel.slack.com/archives/C01224Q5M99/p1667927545637489?thread_ts=1664536480.045539&cid=C01224Q5M99)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
0027ffa65baf313e04a0fbd041cd3e3f67a40020,JJ Kasper,2022-11-08 15:24:32+00:00,GitHub,2022-11-08 15:24:32+00:00,"[next] Ensure rsc dynamic routes are correct (#8866)

### Related Issues

This ensures we properly route dynamic routes with segments in the
middle of the path for rsc paths and also ensures we normalize the
header values from the routes-manifest correctly.

x-ref: https://github.com/vercel/next.js/issues/42364
x-ref:
https://github.com/vercel/next.js/actions/runs/3415662540/jobs/5685787894

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
0964be17106419263b3f38d67784dd97b8b0c565,JJ Kasper,2022-11-07 20:46:03+00:00,JJ Kasper,2022-11-07 20:46:03+00:00,"Publish Stable

 - vercel@28.4.15
 - @vercel/client@12.2.16
 - @vercel/error-utils@1.0.3
 - @vercel/frameworks@1.1.11
 - @vercel/fs-detectors@3.4.8
 - @vercel/hydrogen@0.0.29
 - @vercel/next@3.2.9
 - @vercel/node-bridge@3.1.2
 - @vercel/node@2.6.2
 - @vercel/redwood@1.0.34
 - @vercel/remix@1.0.35
 - @vercel/routing-utils@2.1.2
 - @vercel/static-build@1.0.35
 - @vercel/static-config@2.0.6"
9618ffe05feb13a0e7214c2095be97425fec62ef,JJ Kasper,2022-11-07 20:42:26+00:00,GitHub,2022-11-07 20:42:26+00:00,"[next] Update rsc header handling (#8862)

### Related Issues

Required for https://github.com/vercel/next.js/pull/42482

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
832ba3fe2332365779da6a079084bde6f46da124,github-actions[bot],2022-11-04 23:18:30+00:00,GitHub,2022-11-04 23:18:30+00:00,"[examples] Upgrade Next.js to version 13.0.2 (#8847)

This auto-generated PR updates Next.js to version 13.0.2"
253b4fd1d2c1985ceced87dfd385b9e30c21dc7b,Ethan Arrowood,2022-11-04 20:21:13+00:00,GitHub,2022-11-04 20:21:13+00:00,"[cli][client][error-utils][frameworks][fs-detectors][hydrogen][next][node-bridge][node][redwood][remix][routing-utils][static-config] update @types/node to v14 across repo (#8842)

### Related Issues

Updates @types/node to the latest version within the v14 major (based on `npm view @types/node`)

```
 npm view @types/node@'>=14.0.0 <15.0.0' version | tail -1
@types/node@14.18.33 '14.18.33'
```

This PR also fixes the various necessary type changes

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
9e5f17b3c606b3f80443d7056c66b5261f35a95e,Nathan Rajlich,2022-11-04 19:12:37+00:00,GitHub,2022-11-04 19:12:37+00:00,"[cli] Allow `vc link` to overwrite existing link (#8845)

There was a regression in #8670 which caused `vc link` to be a no-op
when there was already a link to a Vercel project in the `.vercel`
directory."
39d0f8dbfc7ff3587644ef95b88e2002793405ee,Ethan Arrowood,2022-11-04 00:12:56+00:00,GitHub,2022-11-04 00:12:56+00:00,"[cli] fix broken integration test (#8844)

### Related Issues

https://github.com/vercel/api/pull/15009 broke one of our integration tests. This PR fixes it.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
a567d047d18d992207958c4b250feaccf68dd724,Andy McKay,2022-11-02 20:14:37+00:00,Andy McKay,2022-11-02 20:14:37+00:00,"Publish Stable

 - @vercel/build-utils@5.5.7
 - vercel@28.4.14
 - @vercel/client@12.2.15
 - @vercel/edge@0.1.1
 - @vercel/error-utils@1.0.2
 - @vercel/frameworks@1.1.10
 - @vercel/fs-detectors@3.4.7
 - @vercel/go@2.2.15
 - @vercel/hydrogen@0.0.28
 - @vercel/next@3.2.8
 - @vercel/node-bridge@3.1.1
 - @vercel/node@2.6.1
 - @vercel/python@3.1.24
 - @vercel/redwood@1.0.33
 - @vercel/remix@1.0.34
 - @vercel/routing-utils@2.1.1
 - @vercel/ruby@1.3.41
 - @vercel/static-build@1.0.34
 - @vercel/static-config@2.0.5"
fdfb3a385e116b247464871f51305955d2544f7e,Steven,2022-11-02 20:12:09+00:00,GitHub,2022-11-02 20:12:09+00:00,"[error-utils] Allow publishing to npm (#8839)

> If you set ""private"": true in your package.json, then npm will refuse
to publish it.


https://docs.npmjs.com/cli/v8/configuring-npm/package-json#private"
a630e1989613052f64411fd7e5468de58c5999ba,Andy McKay,2022-11-02 19:59:38+00:00,Andy McKay,2022-11-02 19:59:38+00:00,"Publish Stable

 - @vercel/build-utils@5.5.6
 - vercel@28.4.13
 - @vercel/client@12.2.14
 - @vercel/edge@0.1.0
 - @vercel/error-utils@1.0.1
 - @vercel/frameworks@1.1.9
 - @vercel/fs-detectors@3.4.6
 - @vercel/go@2.2.14
 - @vercel/hydrogen@0.0.27
 - @vercel/next@3.2.7
 - @vercel/node-bridge@3.1.0
 - @vercel/node@2.6.0
 - @vercel/python@3.1.23
 - @vercel/redwood@1.0.32
 - @vercel/remix@1.0.33
 - @vercel/routing-utils@2.1.0
 - @vercel/ruby@1.3.40
 - @vercel/static-build@1.0.33
 - @vercel/static-config@2.0.4"
00430eeabf17797a7df128351fabfa44dc58989f,Steven,2022-11-02 19:43:27+00:00,GitHub,2022-11-02 19:43:27+00:00,"[tests] Update turbo cache key (#8830)

This ensures we don't share cache results between node major versions
like 14.x vs 16.x (as well as OS and Arch)"
49f453742b190c989447bedf3c85947287086688,Ethan Arrowood,2022-11-02 19:18:00+00:00,GitHub,2022-11-02 19:18:00+00:00,"[error-utils] Create `@vercel/error-utils` package (#8828)

While working on #8742 i found some useful error checking code buried in
the CLI. This PR adds a new private package `@vercel/errors` that moves
those helpful utilities into its own package so it can be used
throughout the monorepo."
bcb8d4f8124beb279239fc295f2a977dc3015e4d,Chris Barber,2022-11-02 15:32:00+00:00,GitHub,2022-11-02 15:32:00+00:00,"[next] Prepend basePath to edge function destination (#8835)

For Next.js apps, a custom `basePath` in the `next.config.js` file was being prepended to all paths except edge functions of which this PR resolves.

### Related Issues

> Fixes [#853](https://github.com/vercel/customer-issues/issues/853)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
d42a8a658893398e3b55157cec5c17fb105edfdb,Steven,2022-11-02 14:56:14+00:00,GitHub,2022-11-02 14:56:14+00:00,"[build-utils] Experimental flag to allow nodejs18.x (#8836)

Add a new experimental flag to allow `nodejs18.x`"
301bcf58fbacdfc6f4d11749848dc0c5d85b6e38,Nathan Rajlich,2022-11-02 02:16:37+00:00,GitHub,2022-11-02 02:16:37+00:00,"[node-bridge] Support streaming response for Serverless Function (#8795)

Adds streaming response support for React Server Components with Next 13."
11d009139314a50e7660863dd8c6f30864b8957d,Steven,2022-11-02 01:43:18+00:00,GitHub,2022-11-02 01:43:18+00:00,"[cli] Fix middleware 500 in `vc dev` (#8833)

The status code no longer prints the generic error page."
6405fb51a181aacaff6e84a5f61e123fcfae51cf,Steven,2022-11-01 22:42:35+00:00,GitHub,2022-11-01 22:42:35+00:00,"[tests] Fix next & react version for dev test (#8832)

https://nextjs.org/docs/upgrading#upgrading-from-12-to-13"
edd477e602834ec73201a867f93a9a1bb777e903,github-actions[bot],2022-11-01 15:20:16+00:00,GitHub,2022-11-01 15:20:16+00:00,"[examples] Upgrade Next.js to version 13.0.1 (#8820)

This auto-generated PR updates Next.js to version 13.0.1

Co-authored-by: Vercel Team Bot <team@zeit.co>"
4f8f8a5b98a97d9ad7f0cfba3175eb28e5e35e53,Tobias Lins,2022-11-01 15:17:50+00:00,GitHub,2022-11-01 15:17:50+00:00,"[routing-utils] Allow to appendRoutes add null phase (#8814)

For Analytics V2 we need to append routes to the `null` phase instead of
`filesystem`."
a8e66eef412f8f8acd35f9a53d94490d74a088c1,chloetedder,2022-11-01 03:23:38+00:00,GitHub,2022-11-01 03:23:38+00:00,"Remove output directory placeholder (#8817)

### Related Issues

Related - https://github.com/vercel/api/pull/15027
Removing setting the output directory placeholder - it is not extremely reliable https://vercel.slack.com/archives/C02HEJASXGD/p1667234137439189?thread_ts=1667232443.320769&cid=C02HEJASXGD

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
23dd29e2691823ffbe1b7077cc79f53a47715c1b,Kiko Beats,2022-10-31 14:52:40+00:00,GitHub,2022-10-31 14:52:40+00:00,"[node] upgrade edge-runtime to v2.0.0 (#8811)

Drop node12 support"
4eb4d2b3556029ff6f73200da6756db63bd0fff9,Seiya Nuta,2022-10-27 06:51:27+00:00,GitHub,2022-10-27 06:51:27+00:00,"[dev] Support request headers override in middleware (#8752)

Implements request headers override in middlewares.

#### New middleware headers

- `x-middleware-override-headers`: A comma separated list of *all* request header names. Headers not listed will be deleted.
- `x-middleware-request-<name>`: A new value for the header `<name>`.

### Related Issues

- #8724: Add helper functions for non-Next.js middlewares
- https://github.com/vercel/next.js/pull/41380: Next.js' implementation

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
3590ea06a421bf65108591e3f38a8e28543f040d,Tim Paine,2022-10-26 15:00:31+00:00,GitHub,2022-10-26 15:00:31+00:00,"[docs][typo] Update license link in readme (#8779)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
314a97b3187cf11e459cf9292f974ae7018a33d6,github-actions[bot],2022-10-26 05:42:21+00:00,GitHub,2022-10-26 05:42:21+00:00,"[examples] Upgrade Next.js to version 13.0.0 (#8778)

This auto-generated PR updates Next.js to version 13.0.0"
d41d9e7374b6b19be0c2a4838819a60c6ce947d2,JJ Kasper,2022-10-24 21:49:41+00:00,GitHub,2022-10-24 21:49:41+00:00,"[next] Ensure static app paths have vary correctly (#8771)

### Related Issues

x-ref: https://github.com/vercel/vercel/pull/8763
x-ref: [slack
thread](https://vercel.slack.com/archives/C035J346QQL/p1666645450798089)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
80b211fb4a1bebf64afc4af59d9b1b64fc7b704e,Kiko Beats,2022-10-24 20:12:31+00:00,GitHub,2022-10-24 20:12:31+00:00,[node] upgrade edge-runtime to v1.1.0 (#8765)
ffaf5c9143cd0c879942b22197ee6a8ccb025345,JJ Kasper,2022-10-23 16:12:03+00:00,GitHub,2022-10-23 16:12:03+00:00,"[next] Add leveraging initialHeaders/status for prerender (#8763)

### Related Issues

x-ref: https://github.com/vercel/vercel/pull/8757
Fixes: [slack thread](https://vercel.slack.com/archives/C035J346QQL/p1666278547705429)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
ba1c2a7e54966c7ecc37a2f2426a7911a96133f5,Andy McKay,2022-10-21 22:26:41+00:00,GitHub,2022-10-21 22:26:41+00:00,"Cope with socket hang up (#8760)

### Related Issues

Copes with `socket hang up` errors.

I tested with https://github.com/Shopify/toxiproxy and set up a proxy that generated a socket hangup error. With a test URL etc it looks like this:

<img width=""935"" alt=""Screen Shot 2022-10-21 at 2 13 48 PM"" src=""https://user-images.githubusercontent.com/74699/197289788-9467ebef-d4dd-4fae-bf41-f635b7857d03.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
30a9183836c876aec63995056c2877a2c428c458,Baruch-Adi Hen,2022-10-21 20:18:15+00:00,GitHub,2022-10-21 20:18:15+00:00,"[ENV] Use new env/pull endpoint for vc env pull, vc pull (#8751)

### Related Issues

We introduced a new endpoint: `/env/pull/:projectId/:target?/:gitBranch?` which will return a complete list of key/value pairs (environment variables) for the proper target environment, using the same logic as we use for deployments. 

This means that we don't need to fetch env variables from multiple sources (system, project, shared) and stitch them on the client anymore. 

- removes unused logic for fetching & merging environment variables on the CLI client
- offloads env variables generation to the API
  - new: shared env variables are now supported in vc env pull! 


###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
df9accfd6cac6c837162fcde9bfe839f6372e8fd,Seiya Nuta,2022-10-21 02:27:37+00:00,GitHub,2022-10-21 02:27:37+00:00,"[@vercel/edge] Support overriding request headers (#8724)

<!--
Thanks for opening a PR! Your contribution is much appreciated.
To make sure your PR is handled as smoothly as possible we request that
you follow the checklist sections below.
Choose the right checklist for the change that you're making:
-->

This PR adds a feature in middleware to add, modify, or delete request
headers. This feature is quite useful to pass data from middleware to
Serverless/Edge API routes.

### New APIs

Adds a new option `request.headers` to the `MiddlewareResponseInit`
parameter in `NextResponse.next()` and `NextResponse.rewrite()`. It's a
[`Header`](https://developer.mozilla.org/en-US/docs/Web/API/Headers)
object holding *all* request headers. Specifically:

```ts
interface ExtraResponseInit extends ResponseInit {
  request?: {
    headers?: Headers
  }
}
```

### Example

```ts
// api/hello.ts
export default (req, res) => {
  const valueFromMiddleware = req.headers['x-hello-from-middleware']
  return res.send(valueFromMiddleware)
}

// middleware.ts
import { next } from '@vercel/edge'

export default function middleware(request: NextRequest) {
  // Clone request headers
  const headers = new Headers(request.headers);
  // Add a new request header
  headers.set('x-hello-from-middleware', 'foo');
  // Delete a request header from the client
  headers.delete('x-from-client');

  return next({
    request: {
      headers
    }
  });
}
```

### New middleware headers

- `x-middleware-override-headers`: A comma separated list of *all*
request header names. Headers not listed will be deleted.
- `x-middleware-request-<name>`: A new value for the header `<name>`.

### Related Issues

- Next.js' implementation: https://github.com/vercel/next.js/pull/41380

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Gal Schlezinger <gal@spitfire.co.il>"
b388357c0b300af9fcaf19fdc1300bf5229b7595,JJ Kasper,2022-10-20 22:48:01+00:00,GitHub,2022-10-20 22:48:01+00:00,"[build-utils] Fix check for initialHeaders on prerender (#8757)

### Related Issues

x-ref: https://github.com/vercel/vercel/pull/8743

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
90291525c27490e8235d5f86cf8d439e5b83f3ef,Seiya Nuta,2022-10-20 08:59:20+00:00,GitHub,2022-10-20 08:59:20+00:00,[edge] Fix the `region` field of geolocation (#8517)
812dd43b6a0c8b573c431aebb32461723257a7fc,Gal Schlezinger,2022-10-19 19:27:30+00:00,GitHub,2022-10-19 19:27:30+00:00,"[build-utils] allow EdgeFunction constructor to receive any string as a region (#8747)

### Related Issues

This will allow a shorthand form of `export const config = { regions:
'iad1' }`

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Damien Simonin Feugas <damien@vercel.com>"
9e97e0fd581bc563221fd8376c641bc3786b46d3,Gal Schlezinger,2022-10-19 15:38:07+00:00,GitHub,2022-10-19 15:38:07+00:00,"[node] allow to extract Edge Function regions from source code (#8733)

Co-authored-by: Steven <steven@ceriously.com>"
74528c2160a14b9f8ec40f2edc64a089e048fa0c,Chris Barber,2022-10-18 23:32:58+00:00,GitHub,2022-10-18 23:32:58+00:00,"[cli] Use ensureLink() in `link` and `pull` commands (#8670)

The `link` and `pull` commands have essentially duplicate code from `ensureLink()`. This

Card: https://linear.app/vercel/issue/VCCLI-224/adopt-ensurelink-across-commands

The `dev` command should also be updated to use `ensureLink()`, however that may interfere with this in progress PR: https://github.com/vercel/vercel/pull/8666.

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
82fd2b8068880f90305dab7c4dd119452519ca5e,JJ Kasper,2022-10-18 22:50:25+00:00,GitHub,2022-10-18 22:50:25+00:00,"[build-utils] Allow initialHeaders and initialStatus for Prerender (#8743)

### Related Issues

This allows `initialHeaders` and `initialStatus` for Prender as has been discussed quite a bit so that the proper headers can be applied when serving the fallback.

x-ref: [slack thread](https://vercel.slack.com/archives/C035J346QQL/p1666130102396799?thread_ts=1666122861.189349&cid=C035J346QQL)
x-ref: follow-up to https://github.com/vercel/vercel/pull/8737
x-ref: https://github.com/vercel/vercel/blob/dd94dcab3255839c7c9addbba35026dc88cf0e95/packages/next/src/server-build.ts#L970

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
dd94dcab3255839c7c9addbba35026dc88cf0e95,JJ Kasper,2022-10-18 16:50:29+00:00,JJ Kasper,2022-10-18 16:50:29+00:00,"Publish Stable

 - vercel@28.4.12
 - @vercel/edge@0.0.5
 - @vercel/next@3.2.6
 - @vercel/node@2.5.26"
300e6c6ebb966009d4c2d3cb5f88c455b79d52ec,JJ Kasper,2022-10-18 14:47:56+00:00,GitHub,2022-10-18 14:47:56+00:00,"[next] Ensure vary header is set for static app paths (#8737)

### Related Issues

x-ref: [slack thread](https://vercel.slack.com/archives/C035J346QQL/p1666025811694049?thread_ts=1666008214.416389&cid=C035J346QQL)
x-ref: https://github.com/vercel/next.js/pull/41479

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
cfe6550ac83934e8010ffd45cacf55ef383cf68b,Kiko Beats,2022-10-18 12:28:14+00:00,GitHub,2022-10-18 12:28:14+00:00,[node] upgrade edge-runtime to v1.1.0-beta.40 (#8740)
dfe009ffe2ef4108794732ef7e48a3e36d1c2ef9,Andy McKay,2022-10-17 23:16:53+00:00,GitHub,2022-10-17 23:16:53+00:00,"[tests] Update workflow to examine both labels and use annotations (#8736)

### Related Issues

I couldn't find an issue related to this, but just noticed it when I
submitted a request. I got a build failing because I failed to add in an
`area` label, so added that label and it failed again this time on
`semver`. This change makes it so the workflow looks at both labels,
rather than just one and exiting early. This might save some people
doing 2 builds, like I did 

Also changed it to use Actions annotations, which does colourization for
you. Docs on that are here:
https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#setting-a-debug-message

But the output is now something like this ([test
repo](https://github.com/andymckay/test-config)). Missing both labels:

<img width=""724"" alt=""Screen Shot 2022-10-17 at 4 01 35 PM""
src=""https://user-images.githubusercontent.com/74699/196299860-9f8ec5e7-fe40-4fe4-8e36-486bf00b2d13.png"">

And in the log:

<img width=""805"" alt=""Screen Shot 2022-10-17 at 4 01 41 PM""
src=""https://user-images.githubusercontent.com/74699/196299903-149a56e0-2538-419d-8e9f-8e459c7fb42a.png"">

And if you've got the labels:

<img width=""576"" alt=""Screen Shot 2022-10-17 at 4 02 59 PM""
src=""https://user-images.githubusercontent.com/74699/196299931-88f7f623-f08f-4189-83ec-cd75c466e6a5.png"">"
40f38948a04d83a9e260ddd455685d74e3eb9209,Steven,2022-10-16 18:11:02+00:00,Steven,2022-10-16 18:11:02+00:00,"Publish Stable

 - @vercel/build-utils@5.5.5
 - vercel@28.4.11
 - @vercel/client@12.2.13
 - @vercel/frameworks@1.1.8
 - @vercel/fs-detectors@3.4.5
 - @vercel/go@2.2.13
 - @vercel/hydrogen@0.0.26
 - @vercel/next@3.2.5
 - @vercel/node@2.5.25
 - @vercel/python@3.1.22
 - @vercel/redwood@1.0.31
 - @vercel/remix@1.0.32
 - @vercel/ruby@1.3.39
 - @vercel/static-build@1.0.32"
87eba56063d7f893c11bb2ed261d8a9dc30676ac,Sean Massa,2022-10-14 21:31:13+00:00,GitHub,2022-10-14 21:31:13+00:00,"[node] update typescript detection message (#8727)

When deploying a project that uses typescript, but typescript is not a dependency, the default typescript is used. The message that's logged when this happens says:

> Using TypeScript 4.3.4 (no local tsconfig.json)

which is not necessarily true. You can have a `tsconfig.json` file with no typescript dependency.

This message leads to bad debugging paths.

This PR updates the message to be more specific. Now the message will say:

> Using TypeScript 4.3.4 (no local ""typescript"" package detected)"
d0a5676c263d423146b884da3ed3b96f284e9aff,JJ Kasper,2022-10-14 21:18:32+00:00,GitHub,2022-10-14 21:18:32+00:00,"[next] Fix index rsc route handling (#8729)

### Related Issues

This ensures we probably route the `/` rsc route properly and adds a regression test along with enabling some now patched tests that were skipped. 

Fixes: [slack thread](https://vercel.slack.com/archives/C043ANYDB24/p1665746921485109)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
da9fa997ed5f9b38166eb0f7e2669d9ee78deea7,Siarhei,2022-10-11 23:57:55+00:00,GitHub,2022-10-11 23:57:55+00:00,[tests] Update the checkout action to V3 in `publish.yml` (#8721)
3d79a9d4d47a878c0246f6267456f2c74d0f343a,Peter van der Zee,2022-10-11 23:47:52+00:00,GitHub,2022-10-11 23:47:52+00:00,"[build-utils] Cleanup getNodeVersion (#8720)

- `meta.isDev` is unconditionally read after the first check (even though it could technically still be `null`, ignoring typescript)
- `meta.isDev` is explicitly asserted to be falsy, since the first `if` will return early if it's truthy, so the later checks are all redundant
- added `?.` for the `packageJson?.engines?.node` read

The rest is auto formatting (and if my local eslint warnings are correct then I'm just gonna close this PR...)"
ae13c5ee92d9f5d679f38415ec86f77b3536815b,Sean Massa,2022-10-11 17:43:42+00:00,Sean Massa,2022-10-11 17:43:42+00:00,"Publish Stable

 - vercel@28.4.10
 - @vercel/frameworks@1.1.7
 - @vercel/fs-detectors@3.4.4
 - @vercel/node@2.5.24
 - @vercel/static-build@1.0.31"
ad654139df53b690e1888491a34bb81f4647d118,Jacob Ford,2022-10-11 17:04:53+00:00,GitHub,2022-10-11 17:04:53+00:00,"[frameworks] Detect Hydrogen TypeScript config (#8711)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
74f8414e12ef0bf03bc3796c626e08029b4059a8,Jacob Ford,2022-10-11 16:02:27+00:00,GitHub,2022-10-11 16:02:27+00:00,"[frameworks] Detect additional valid Sanity v3 configs (#8710)

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
65c2860e14b5ce1b9c9ca49b7765dd106d72680c,Kiko Beats,2022-10-11 13:02:34+00:00,GitHub,2022-10-11 13:02:34+00:00,"[node] upgrade edge-runtime to v1.1.0-beta.38 (#8715)

It fixes an implementation detail issue users are facing when you try to redirect"
3b5b397b355a6c1f044049e02dac5aa9f9d1621c,JJ Kasper,2022-10-11 00:52:11+00:00,JJ Kasper,2022-10-11 00:52:11+00:00,"Publish Stable

 - vercel@28.4.9
 - @vercel/fs-detectors@3.4.3
 - @vercel/next@3.2.4
 - @vercel/node@2.5.23"
051e06117614bc2789f25bec36301daaf30d7dc9,JJ Kasper,2022-10-10 23:50:20+00:00,GitHub,2022-10-10 23:50:20+00:00,"[next] Fix optional catch-all data route with middleware (#8713)

### Related Issues

This ensures we properly normalize the optional catch-all data route correctly with middleware as currently the route is expecting a repeated slash in the regex `(?:/(?` which it should just be `(?:(?`. This also adds a regression test for this specific case. 

Fixes: [slack thread](https://vercel.slack.com/archives/C045FKE5P51/p1665153317613089)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
30d46321cc3edd613e2270e35f85624f53b89ec0,chloetedder,2022-10-07 17:22:41+00:00,GitHub,2022-10-07 17:22:41+00:00,"[fs-detectors] Add dark/light turborepo logo (#8694)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
c2563535ea2b0c88e21f987f1813738018700a3d,Christian Rackerseder,2022-10-07 16:59:12+00:00,GitHub,2022-10-07 16:59:12+00:00,"[node] Allow VercelApiHandler to also return a Promise (#8690)

### Related Issues

Otherwise you are not able to write a serverless function that returns a
Promise when using the ESLint rule
[@typescript-eslint/no-misused-promises](https://typescript-eslint.io/rules/no-misused-promises/)

Following function

```typescript
const handler: VercelApiHandler = async () => {};
```

will report a `Promise-returning function provided to variable where a
void return was expected`

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with
tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
5f2bed4f24d0e87f65c457b5afa3d5666fd2e391,Steven,2022-10-06 18:07:22+00:00,GitHub,2022-10-06 18:07:22+00:00,"[tests] Enable corepack for monorepo (#8691)

This will ensure yarn 1 is used by contributors"
cfb7946f4be33ac10c049983cec575a9b336cea1,chloetedder,2022-10-06 14:51:35+00:00,chloetedder,2022-10-06 14:51:35+00:00,"Publish Stable

 - vercel@28.4.8
 - @vercel/fs-detectors@3.4.2"
05c5b3a80d500e830fb678d64b79c8bec1403505,chloetedder,2022-10-05 21:34:00+00:00,GitHub,2022-10-05 21:34:00+00:00,"[fs-detectors] Add setting placeholders for monorepos (#8688)

### Related Issues

Add in placeholder settings for monorepos

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
45bd855250436b73bee892c53f0407e1f24bc689,Nathan Rajlich,2022-10-05 19:41:42+00:00,Nathan Rajlich,2022-10-05 19:41:42+00:00,"Publish Stable

 - @vercel/build-utils@5.5.4
 - vercel@28.4.7
 - @vercel/client@12.2.12
 - @vercel/go@2.2.12
 - @vercel/hydrogen@0.0.25
 - @vercel/next@3.2.3
 - @vercel/node@2.5.22
 - @vercel/python@3.1.21
 - @vercel/redwood@1.0.30
 - @vercel/remix@1.0.31
 - @vercel/ruby@1.3.38
 - @vercel/static-build@1.0.30"
49de8ad9a0b4ce5a768fc18e212f10d31e533700,Nathan Rajlich,2022-10-05 19:33:53+00:00,GitHub,2022-10-05 19:33:53+00:00,"[node] Update `edge-runtime` to v1.1.0-beta.37 (#8687)

Fixes error:

```
ENOENT: no such file or directory, open 'querystring'
```

Unfortunately this issue would only manifest when installed externally. I.e. our tests didn't catch this since the `querystring` module is presumably present in the monorepo."
a1ea56fd6744d87aee0ad9c5427a3db12b77f337,JJ Kasper,2022-10-05 19:18:41+00:00,GitHub,2022-10-05 19:18:41+00:00,"[next] Update max route src check for generated route (#8689)

### Related Issues

This reduces the max length we check for when generating routes to ensure we stay under the 4096 limit after normalizing. 

x-ref: https://github.com/vercel/customer-issues/issues/779

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e88addc9ed7d303d96ebb3589d941b4aaa46c32e,JJ Kasper,2022-10-05 14:21:10+00:00,GitHub,2022-10-05 14:21:10+00:00,"[next] Fix legacy pages/404 case (#8682)

### Related Issues

This ensures we handle the case were a lambda isn't present for `pages/404.js` with `getStaticProps` which can occur in older Next.js versions e.g. `v9.5.5`. This also adds a regression test for this specific version to ensure it is working as expected. 

x-ref: https://github.com/vercel/vercel/pull/8663
Fixes: [slack thread](https://vercel.slack.com/archives/C03DQ3QFV7C/p1664945825621409)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5d50013f93bb564fbf370270fdd0a14f16091af4,Peter van der Zee,2022-10-05 13:21:27+00:00,GitHub,2022-10-05 13:21:27+00:00,"[build-utils] Allow file-ref sema to be controlled through env flag (#8681)

My IDE tells me `process` is unknown but mentions something about package.json so that may just be a superficial issue. I guess CI/CD will tell me soon enough.

This adds an env flag to override the file ref sema's so we can experiment with setting a higher sema.

One potential problem I'm seeing is that this is a generic sema for all the things that use this class. Not sure if that's going to work out as intended but in that case we'll have to find a different way :)"
44e1eb398399732aa86cd3ea1b40e8e53f3cc114,Lee Robinson,2022-10-04 04:48:10+00:00,GitHub,2022-10-04 04:48:10+00:00,"Update CLI README (#8675)

:another-one:"
f8af013349d1f2b117d13e933c77270034b59cf9,Lee Robinson,2022-10-04 04:13:41+00:00,GitHub,2022-10-04 04:13:41+00:00,"Update README (#8674)

Small changes "
972cc495ec98bfd577eec392e4b52c6f7bd95be3,Steven,2022-10-03 23:49:28+00:00,GitHub,2022-10-03 23:49:28+00:00,"[tests] Replace `cancel-workflow-action` with native `cancel-in-progress` (#8671)

This removes the `styfle/cancel-workflow-action` in favor of native GitHub Actions `cancel-in-progress`.

The cancel key is workflow+branch but we don't want to cancel on the `main` branch.

https://docs.github.com/en/actions/using-jobs/using-concurrency"
1c580da3d8765764c64e2b5d53f8043ce87be4f4,Steven,2022-10-03 22:07:02+00:00,GitHub,2022-10-03 22:07:02+00:00,"[cli] Fix `vc build` to error early when runtime is discontinued (#8669)

This moves an existing error from the build container to `vercel build`.

Its rare, but [Vercel Runtimes](https://vercel.com/docs/runtimes) might target a discontinued [AWS Lambda Runtime](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html) so we should fail fast when we know this has happened in `vercel build`.

A test has been added to demonstrate the failure using an old PHP version."
244554ab1b1d9dc1ea5c0c114ffb1e36167328ed,Steven,2022-10-03 20:59:05+00:00,GitHub,2022-10-03 20:59:05+00:00,"[tests] Remove nodejs12.x tests (#8667)

Now that `nodejs12.x` has passed the sunset date, new deployments will fail so we need to update a few tests.

https://vercel.com/changelog/node-js-12-is-being-deprecated"
053c185481b1fa0f980e3f54c9ecbeda53e7d72b,Steven,2022-10-03 14:07:07+00:00,Steven,2022-10-03 14:07:07+00:00,"Publish Stable

 - vercel@28.4.6
 - @vercel/client@12.2.11
 - @vercel/next@3.2.2"
8805b586eaf3c225dfe6df09af8e00797bcaa523,JJ Kasper,2022-10-02 13:09:24+00:00,GitHub,2022-10-02 13:09:24+00:00,"[next] Allow revalidating ISR 404 path itself (#8663)

### Related Issues

Fixes: https://vercel.slack.com/archives/C03S8ED1DKM/p1664521958768189

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
681070ffa0b2b68246b7fd9cd267e4c0070b15fd,Chris Barber,2022-09-30 18:29:39+00:00,GitHub,2022-09-30 18:29:39+00:00,"[tests] Adding test for next builder OS path separator for serverless file refs (#8661)

Here's the test for https://github.com/vercel/vercel/pull/8657.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
362b17d60aebb024c3f981002e2f411b31fe3d1e,Chris Barber,2022-09-30 15:25:33+00:00,GitHub,2022-09-30 15:25:33+00:00,"[next] Use OS path separator to match serverless file references (#8657)

When running `vc build` for a Next.js app, the Next builder will execute the server build which performs several steps. One of the steps is to trace each serverless function for any referenced files, then the raw list of files is scrubbed and filtered. The filtering uses OS specific file path comparisons to see if a file is of interest. Since it's comparing OS specific paths, we need to use OS specific path separators.

During testing on Windows, the traced serverless functions file list was always empty.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
c7c9b1a79138b982d3239cb5e93ed0e963e78427,JJ Kasper,2022-09-28 20:24:01+00:00,GitHub,2022-09-28 20:24:01+00:00,"[next] Update RSC header in has routes (#8651)

### Related Issues

x-ref: https://github.com/vercel/next.js/pull/40979

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
c42f309463d23d65e9e5a7349c7d3f3315e1066f,Nathan Rajlich,2022-09-28 19:33:33+00:00,GitHub,2022-09-28 19:33:33+00:00,"[cli] Print upload progress in increments of 25% when non-TTY (#8650)

When running `vc deploy` in a non-TTY context (i.e. CI), limit the number of progress updates to 25% increments (for a total of 5).

```
Uploading [--------------------] (0.0B/71.9MB)
Uploading [=====---------------] (18.0MB/71.9MB)
Uploading [==========----------] (36.0MB/71.9MB)
Uploading [===============-----] (54.0MB/71.9MB)
Uploading [====================] (71.9MB/71.9MB)
```

This avoids spamming the user logs with many progress updates."
a0ead283697bbc8a181d25abec8adcaa68668a14,Sean Massa,2022-09-28 17:52:40+00:00,GitHub,2022-09-28 17:52:40+00:00,"[tests] replace spinner messages with normal output during tests (#8634)

Convert spinner output to simple prints during test runs. This makes it easier to write tests against the output of commands."
8814fc15159c78432375d7bb6a99c2e42125de5d,chloetedder,2022-09-28 15:14:27+00:00,chloetedder,2022-09-28 15:14:27+00:00,"Publish Stable

 - @vercel/build-utils@5.5.3
 - vercel@28.4.5
 - @vercel/client@12.2.10
 - @vercel/fs-detectors@3.4.1
 - @vercel/go@2.2.11
 - @vercel/hydrogen@0.0.24
 - @vercel/next@3.2.1
 - @vercel/node@2.5.21
 - @vercel/python@3.1.20
 - @vercel/redwood@1.0.29
 - @vercel/remix@1.0.30
 - @vercel/ruby@1.3.37
 - @vercel/static-build@1.0.29"
0d044b4eac079117e3a1f28d2b180a69b8c73f45,chloetedder,2022-09-28 11:38:25+00:00,GitHub,2022-09-28 11:38:25+00:00,"[fs-detectors] Use json5 parser for Rush to have valid json parsing (#8645)

### Related Issues

Parse `rush.json` files with `json5` because it is very common for these
to have comments in them

[Template for people to clone for
Rush](https://rushjs.io/pages/configs/rush_json/) which has comments in
it as a default which most people will clone
 
Docs of Rush showing to not use `JSON.parse`

https://rushjs.io/pages/help/faq/#why-do-rushs-json-config-files-contain--comments-that-github-shows-in-red

Added in tests with block comments and single line comments

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
f6bd1aa8c0fe01eb41ac24f70782bce3007a9991,Steven,2022-09-27 23:38:49+00:00,GitHub,2022-09-27 23:38:49+00:00,"[tests] Remove console.log() from test (#8647)

Remove `console.log()` from test"
8cd84ec066fb50de6c3c4630465f896609e8f412,Steven,2022-09-27 20:35:00+00:00,Steven,2022-09-27 20:35:00+00:00,"Publish Stable

 - @vercel/build-utils@5.5.2
 - vercel@28.4.4
 - @vercel/client@12.2.9
 - @vercel/go@2.2.10
 - @vercel/hydrogen@0.0.23
 - @vercel/next@3.2.0
 - @vercel/node@2.5.20
 - @vercel/python@3.1.19
 - @vercel/redwood@1.0.28
 - @vercel/remix@1.0.29
 - @vercel/ruby@1.3.36
 - @vercel/static-build@1.0.28"
a8df231e4c54c63292358c4fa0cae2a772627d98,Steven,2022-09-27 20:33:24+00:00,GitHub,2022-09-27 20:33:24+00:00,"[build-utils] Fix npm version detection for `--legacy-peer-deps` (#8646)

There was a case where the npm version wasn't decided base on Node.js version but instead based on the lockfile.
This PR fixes the case when a newer npm version is detected base on the lockfile.

- Follow up to #8598
- Follow up to #8550"
f674842bed9a8ff5a8ff565f88c6dc399be89e64,Gal Schlezinger,2022-09-27 17:46:02+00:00,GitHub,2022-09-27 17:46:02+00:00,"[next] read `regions` from middleware-manifest output (#8629)

### Related Issues

- Needs https://github.com/vercel/next.js/pull/40881 for this to be
useful
- Resolves EC-238

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: JJ Kasper <jj@jjsweb.site>"
bf5cfa9a41f8c1f9e2a3d3fc30735708ca72ad09,Steven,2022-09-27 13:39:04+00:00,Steven,2022-09-27 13:39:04+00:00,"Publish Stable

 - @vercel/build-utils@5.5.1
 - vercel@28.4.3
 - @vercel/client@12.2.8
 - @vercel/go@2.2.9
 - @vercel/hydrogen@0.0.22
 - @vercel/next@3.1.30
 - @vercel/node@2.5.19
 - @vercel/python@3.1.18
 - @vercel/redwood@1.0.27
 - @vercel/remix@1.0.28
 - @vercel/ruby@1.3.35
 - @vercel/static-build@1.0.27"
12121b7a71a6cbfdb6a860fad9ddf13ca22547c2,JJ Kasper,2022-09-27 13:21:49+00:00,GitHub,2022-09-27 13:21:49+00:00,"[next] Fix build time 404 route with trailingSlash: true (#8627)

This ensures we properly handle trailing slashes in the `notFound: true` build time routes. 

Fixes: [slack thread](https://vercel.slack.com/archives/C03S8ED1DKM/p1663691719703509)"
baa56aed2cb13ca0ef412868c3c16336e0936f5d,Steven,2022-09-26 22:33:43+00:00,GitHub,2022-09-26 22:33:43+00:00,"[tests] Fix timeout for `actions/setup-node` (#8639)

Try fixing the timeout again. For example: https://github.com/vercel/vercel/actions/runs/3130757219/jobs/5081381465

- Follow up to #8613 
- Related to https://github.com/actions/cache/issues/810 
- Related to https://github.com/Azure/azure-sdk-for-js/issues/22321"
6f767367e4cc15694f4eb74a7f57798aec0b3f03,Steven,2022-09-26 22:22:32+00:00,GitHub,2022-09-26 22:22:32+00:00,"[build-utils] Adjust `nodejs12.x` discontinueDate to Monday (#8638)

The previous date was on a Saturday so lets move it to the following Monday to ensure support tickets are quickly answered."
0e4124f94c94ba7774a8c3ed73d3c0962f70b847,Sean Massa,2022-09-26 19:47:15+00:00,GitHub,2022-09-26 19:47:15+00:00,"[cli] fix vc bisect off by one (#8399)

Co-authored-by: Nathan Rajlich <n@n8.io>"
30503d0a3fc3c521f29cfd12ab1ca9ff6ec7cba2,Sean Massa,2022-09-26 19:31:36+00:00,GitHub,2022-09-26 19:31:36+00:00,"[go] remove unused, breaking watchlist from Go builder (#8633)"
6c9164f67df15d4f2af43b35695be0d8135bf21a,Steven,2022-09-24 01:25:59+00:00,GitHub,2022-09-24 01:25:59+00:00,"[cli] Refactor doBuild to return void (#8626)

This PR refactor `doBuild()` to return `void`.

This will prevent accidental bugs like #8623 where an exit code number was returned instead of throwing on error."
906b7a8f2cebc4c3a4b47d48b3c08fe891ce6978,Steven,2022-09-23 22:08:53+00:00,GitHub,2022-09-23 22:08:53+00:00,"[cli] Fix invalid vercel.json config error serialization (#8623)

Follow up to #8622 since we should be throwing errors so the error is correctly serialized to `builds.json`."
43499b13d8060e0415e65bf64e750635661189b1,Steven,2022-09-23 20:33:28+00:00,GitHub,2022-09-23 20:33:28+00:00,"[cli] Add `vercel.json` validation to `vercel build` (#8622)

We were doing this validation in `vercel dev` but not `vercel build`.

This PR adds `vercel.json` validation to `vercel build` too.

Note I am calling this a patch because invalid `vercel.json` was already failing when passed to the API so this allows a nice error message earlier in the process."
7d6e56670f56ea73c15a8673a23ca905481c15bc,Sean Massa,2022-09-23 14:23:03+00:00,GitHub,2022-09-23 14:23:03+00:00,"[cli][dev] Add strict mode to `vc dev` edge function handlers (#8616)

Add strict mode to `vc dev` edge function handlers. This is behind a flag in production, but that flag has been at 100% for a while. So, it seems safe to include it here unconditionally.

Also remove legal comments.

These changes bring `vc dev` edge function support closer to production."
dba337f1484311f061cc0551ba59a59aff3180d0,Sean Massa,2022-09-22 21:34:32+00:00,GitHub,2022-09-22 21:34:32+00:00,[cli][dev] extract edge/serverless handler logic into separate files (#8615)
a825bc95409aa1403e062e45afebe194c8197061,Steven,2022-09-22 20:50:27+00:00,Steven,2022-09-22 20:50:27+00:00,"Publish Stable

 - @vercel/build-utils@5.5.0
 - vercel@28.4.2
 - @vercel/client@12.2.7
 - @vercel/go@2.2.8
 - @vercel/hydrogen@0.0.21
 - @vercel/next@3.1.29
 - @vercel/node@2.5.18
 - @vercel/python@3.1.17
 - @vercel/redwood@1.0.26
 - @vercel/remix@1.0.27
 - @vercel/ruby@1.3.34
 - @vercel/static-build@1.0.26"
f5486a8297bb44fe663d17a1eb5831529a50d62f,JJ Kasper,2022-09-22 20:44:40+00:00,GitHub,2022-09-22 20:44:40+00:00,"[next] Update to route app rsc paths correctly (#8611)

### Related Issues

x-ref: [slack thread](https://vercel.slack.com/archives/C035J346QQL/p1663799417151099)

Failing probes are unrelated, more info can be seen in [this thread](https://vercel.slack.com/archives/C035J346QQL/p1663820032810519?thread_ts=1663775935.504379&cid=C035J346QQL)"
225e0a4de3cb6a8a06b8315cb2511f4c30f7de27,Mark Glagola,2022-09-22 20:07:43+00:00,GitHub,2022-09-22 20:07:43+00:00,"[tests] Use new `VERCEL_TEST_TOKEN` for tests (#8614)

Use `VERCEL_TEST_TOKEN` for tests"
0ecfdc1325f0406cd649f774bb7d8e38ff3594de,Steven,2022-09-22 14:42:48+00:00,GitHub,2022-09-22 14:42:48+00:00,"[tests] Add timeout for broken `actions/setup-node@v3` (#8613)

This PR will make sure that CI fails fast if there is a network issue when restoring the cache.

This has been a known issue for 3 months and no resolution:

- https://github.com/actions/cache/issues/810"
628409d233ea84d1728e4f5fcf278317464e753d,Gal Schlezinger,2022-09-22 11:38:33+00:00,GitHub,2022-09-22 11:38:33+00:00,[build-utils] support providing execution regions in Edge Functions (#8612)
51d968314f5914138defa2a9fe724324d53efdd1,Steven,2022-09-21 22:47:45+00:00,Steven,2022-09-21 22:47:45+00:00,"Publish Stable

 - vercel@28.4.1
 - @vercel/fs-detectors@3.4.0
 - @vercel/next@3.1.28
 - @vercel/node@2.5.17"
b4e2cbc6e5e71fe46f50c8ace78e298cd8ab3f03,Chris Barber,2022-09-21 22:44:52+00:00,GitHub,2022-09-21 22:44:52+00:00,"[tests] Test route src and dest for normalized path (#8609)

Adding assertions for normalized routes."
7323beea8e52de946756103af76880770717231a,Jiachi Liu,2022-09-21 22:40:38+00:00,GitHub,2022-09-21 22:40:38+00:00,"[next] fix app dir SSG deployment paths (#8608)

### Related Issues

Seeing this while deploying appDir to production. The collecting path is
not correct for generated dist from appDir
```
Collected static files (public/, static/, .next/static): 18.834ms
Error: ENOENT: no such file or directory, open '/vercel/path0/.next/server/pages/route-groups/checkout.html'
Error: An unexpected error occurred!
Error: ENOENT: no such file or directory, open '/vercel/path0/.next/server/pages/route-groups/checkout.html'
Error: Command ""vercel build"" exited with 1
```

Fix the deployment of SSG, the output html/json paths should be prefixed
with `/app`

Adding a TODO now for how to determine the app path route, leveraging
`.rsc` suffix in data route. Better to use app paths manifest to
refactor it later.

###  Checklist
<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with
tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
e4bb31114477250b581dd30057d1dc95a2285cd9,Chris Barber,2022-09-21 21:47:10+00:00,GitHub,2022-09-21 21:47:10+00:00,"[cli] Disable git status background index refresh/optimization (#8569)

The `create-git-meta` file contains a `isDirty()` function which calls `git status` and subsequently causes one of the test fixture's git index to be updated. Turns out that `git status` will update/optimize the index in the background when invoked: https://git-scm.com/docs/git-status#_background_refresh.

By disabling this using the `--no-optional-locks` flag, `isDirty()` will no longer update the index when checking the status.

From my testing, the `--no-optional-locks` flag must be set after `git` and before `status`.

This PR is likely a better alternative to https://github.com/vercel/vercel/pull/8568 as this PR eliminates the problem all together.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
288546659d89bc8f7bd4292e4f29958d80b60103,Andrew Gadzik,2022-09-21 20:59:21+00:00,GitHub,2022-09-21 20:59:21+00:00,"[fs-detectors] ensure processing of potentialFiles for readdir cache hits (#8604)

This is to fix the issue with processing  new entries of `potentialFiles` when there was a `readdir` cache hit 

### Related Issues

Related to https://linear.app/vercel/issue/HIT-57/monorepo-detection-api-prevent-rate-limits

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
822224e212e7569eb25f37ed5ee1295745da0390,Sean Massa,2022-09-21 20:50:22+00:00,GitHub,2022-09-21 20:50:22+00:00,[cli][dev] Use `browser` platform when bundling edge functions for `vc dev` (#8605)
6b23950b650011f612b62c1b2c79982cdee76bf9,Nathan Rajlich,2022-09-21 19:54:34+00:00,GitHub,2022-09-21 19:54:34+00:00,"[cli] Don't set `analyticsId` when Vercel Analytics are disabled in ""vc pull"" (#8607)

The `disabledAt` and `enabledAt` properties need to be consulted in order to determine whether or not the Vercel Analytics feature has been enabled.

Related to https://github.com/vercel/vercel/discussions/8575."
1558f21e49258cacb618e765ea8be10ca5d38192,Chris Barber,2022-09-21 19:31:27+00:00,GitHub,2022-09-21 19:31:27+00:00,"[tests] Added lock file for normalize paths test fixture (#8600)

Added a lock file to the normalize paths text fixture to speed up install dependencies.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
a6aee8b9042db5ed72f82c90a8b7f6280700bb24,chloetedder,2022-09-21 18:00:21+00:00,GitHub,2022-09-21 18:00:21+00:00,"[fs-detectors] Rush json workspace (#8603)

### Related Issues

Add in getting the package paths for Rush workspaces.
First get the contents of the `rush.json` file. If the `projects`
property is an array, map through that array and return the
`projectFolder` as the package path.


###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
27f4034bdce427953fea094b1c4dfbfb00342b54,Steven,2022-09-21 13:24:15+00:00,Steven,2022-09-21 13:24:15+00:00,"Publish Stable

 - @vercel/build-utils@5.4.4
 - vercel@28.4.0
 - @vercel/client@12.2.6
 - @vercel/go@2.2.7
 - @vercel/hydrogen@0.0.20
 - @vercel/next@3.1.27
 - @vercel/node@2.5.16
 - @vercel/python@3.1.16
 - @vercel/redwood@1.0.25
 - @vercel/remix@1.0.26
 - @vercel/ruby@1.3.33
 - @vercel/static-build@1.0.25"
e43b968fbe398471409d9125a9731772a6a4ddc4,Steven,2022-09-21 13:14:21+00:00,GitHub,2022-09-21 13:14:21+00:00,"[build-utils] Retry with legacy peer deps on install failure (#8598)

In this PR, we try to detect when npm install fails due to invalid peer deps and retry with `--legacy-peer-deps`.

This is a follow up to PR #8550 that explains more.

Steps to reproduce the npm bug:

```sh
corepack enable npm
echo '{""packageManager"":""npm@8.5.5"",""dependencies"":{""swr"":""1.3.0"",""react"":""16.8.0""}}' > package.json
npm install --legacy-peer-deps
npm install # works fine now that a lockfile exists
echo '{""packageManager"":""npm@8.6.0"",""dependencies"":{""swr"":""1.3.0"",""react"":""16.8.0""}}' > package.json
npm install # fails with code ERESOLVE (Conflicting peer dependency)
```"
48eb72055603c954b7e399e7783474fd0e87316b,Chris Barber,2022-09-20 22:10:26+00:00,GitHub,2022-09-20 22:10:26+00:00,"[build-utils][next] Remove Path once copied to PATH. (#8596)

Windows doesn't like it when the env has both a `PATH` and a `Path`, so `cloneEnv()` must remove `Path` after copying it to `PATH`.

Renamed the next builder `01-normalize-routes` test to `01-normalize-paths` as it's test normalization of output paths, then re-enabled the test for Windows.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
30e4d74db67f14c7a341a2542163b5edac40fcf7,Steven,2022-09-20 20:50:56+00:00,GitHub,2022-09-20 20:50:56+00:00,[tests] Add turbo caching to publish (#8597)
75840896eed6414ce393cfa25058d57a78d6d78f,Steven,2022-09-20 20:16:54+00:00,GitHub,2022-09-20 20:16:54+00:00,"[tests] Update workflows to use global `env` (#8594)

Follow up to #8586 because [that syntax](https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#setting-an-environment-variable) never worked on windows"
9657bda86d537e3fce93b198f975d317ab848bbb,Nathan Rajlich,2022-09-20 19:58:20+00:00,GitHub,2022-09-20 19:58:20+00:00,"[cli] Add ""images"" optimization configuration support in `vercel.json` (#8566)

This is a (further ) continuation of #8379 by @theMosaad, so that the tests can run.

I also added a change to make `images` _not_ be sent to the create deployment API endpoint, since it fails validation there."
4536029d42b6a3f0ff7a568decd18f0aa9491a84,Steven,2022-09-20 19:13:23+00:00,GitHub,2022-09-20 19:13:23+00:00,"Revert ""[fs-detectors] Rush json workspace"" (#8591)

Reverts vercel/vercel#8565 since tests are failing on windows

https://github.com/vercel/vercel/actions/runs/3091763554/jobs/5002704682"
a35654d0479412bd07b03344655012976baafae6,Steven,2022-09-20 18:51:01+00:00,GitHub,2022-09-20 18:51:01+00:00,"[tests] Skip test 01-normalize-routes temporarily (#8590)

The  `01-normalize-routes` test is failing on windows so we need to temporarily disable until the root cause can be corrected."
f6a01a1af3b1ef66f476f59dbebd1b08b8a8f85b,github-actions[bot],2022-09-20 18:13:12+00:00,GitHub,2022-09-20 18:13:12+00:00,"[examples] Upgrade Next.js to version 12.3.1 (#8587)

This auto-generated PR updates Next.js to version 12.3.1
Co-authored-by: Steven <steven@ceriously.com>"
c2bca954e087e64be5bfa1ca9a26e88c75fa2c1d,chloetedder,2022-09-20 17:14:45+00:00,GitHub,2022-09-20 17:14:45+00:00,"[fs-detectors] Rush json workspace (#8565)

### Related Issues

Add in Rush workspace

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
21701c3c3db7e7f83f3a6f27a7e088e10eb0108f,Steven,2022-09-20 16:19:38+00:00,GitHub,2022-09-20 16:19:38+00:00,"[tests] Fix turbo remote cache (#8586)

Follow up to #7874 since the remote cache was not used on `main`.

We can unconditionally set these env vars with the latest turbo so it will work for contributors too."
7f4723b3f804020ed961282a9aac7ff52fb6984d,JJ Kasper,2022-09-20 01:15:13+00:00,GitHub,2022-09-20 01:15:13+00:00,"[next] Update local app edge test (#8588)

### Related Issues

Fixes:
https://github.com/vercel/vercel/actions/runs/3086450305/jobs/4990850756

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
619ca9342156758efdb0db8adaf20e0d4a1493e4,Sean Massa,2022-09-19 21:40:10+00:00,Sean Massa,2022-09-19 21:40:10+00:00,"Publish Stable

 - @vercel/build-utils@5.4.3
 - vercel@28.3.0
 - @vercel/client@12.2.5
 - @vercel/frameworks@1.1.6
 - @vercel/fs-detectors@3.3.0
 - @vercel/go@2.2.6
 - @vercel/hydrogen@0.0.19
 - @vercel/next@3.1.26
 - @vercel/node@2.5.15
 - @vercel/python@3.1.15
 - @vercel/redwood@1.0.24
 - @vercel/remix@1.0.25
 - @vercel/ruby@1.3.32
 - @vercel/static-build@1.0.24"
cea2981512622b9e46ad5a3e1f7907a7c37b3d59,Steven,2022-09-19 21:30:32+00:00,GitHub,2022-09-19 21:30:32+00:00,"[tests] Change some `runNpmInstall()` unit tests to mocks (#8581)

- Closes #8580"
1f30e3a4b728327a8ea3699f244965e1b7cd88d3,JJ Kasper,2022-09-19 20:08:10+00:00,GitHub,2022-09-19 20:08:10+00:00,"[next] Update app test fixture (#8584)

### Related Issues

Updates our test fixture for related changes in latest canary of
Next.js.

Fixes: https://vercel.slack.com/archives/CGU8HUTUH/p1663607276817069

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
20e8fdd049a3a23092d80eaf20989c2ad03e849b,Steven,2022-09-15 02:05:26+00:00,GitHub,2022-09-15 02:05:26+00:00,"[tests] Add yarn cache to github actions (#8567)

We had this enable for some workflows but not all so this PR enables the yarn cache for the remaining workflows."
3df8313d69b773a7660fa40ab018e3be92b65994,Chris Barber,2022-09-14 23:47:57+00:00,GitHub,2022-09-14 23:47:57+00:00,"[next] Use posix path separator to join routes and overrides paths (#8530)

Use posix path separators for routes (static pages, lambdas, etc) instead of the native platform path separator (e.g. backslash on Windows).

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
95c9ea92c41d6e4cee059b4e3a5637034e4878e5,Steven,2022-09-14 22:18:40+00:00,GitHub,2022-09-14 22:18:40+00:00,"[build-utils] Add flag for `npm install --legacy-peer-deps` (#8550)

Prior to `npm@8.6.0`, running `npm install --legacy-peer-deps` to generate a lock file and then later running `npm install` would work fine.

After `npm@8.6.0`, running `npm install` with that same lock file will fail with `code ERESOLVE` and `Conflicting peer dependency`.

Steps to reproduce:

```sh
corepack enable npm
echo '{""packageManager"":""npm@8.5.5"",""dependencies"":{""next"":""12.3.0"",""react"":""16.8.0""}}' > package.json
npm install --legacy-peer-deps
npm install # works
echo '{""packageManager"":""npm@8.6.0"",""dependencies"":{""next"":""12.3.0"",""react"":""16.8.0""}}' > package.json
npm install # fails with code ERESOLVE
```


This PR introduces a flag so we can safely upgrade npm to a newer version without breaking thousands of deployments.

The [npm docs](https://docs.npmjs.com/cli/v8/using-npm/config#legacy-peer-deps) say the flag is not recommended so we also make sure that once we upgrade to Node.js 18, we stop flagging `--legacy-peer-deps` because its safe to introduce breaking changes."
7ddebb099d4f8917d2306443a4e82d913324caa6,Chris Barber,2022-09-14 20:29:52+00:00,GitHub,2022-09-14 20:29:52+00:00,"[build-utils][cli][go][node][ruby][static-build] Explicitly set PATH when copying env vars (#8532)

On Windows 10 and 11 machines, environment variables are not case sensitive. The system PATH is actually defined as `process.env.Path`, however Node.js kindly handles the case sensitivity and will automatically return the system path when specifying `process.env.PATH`.

When we clone the environment variables via `{ ...process.env }`, we lose the automatic resolving of `Path` to `PATH`. To fix this, we need to explicitly copy the `PATH`.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
6498fd1aab877ee20ee89989144ed643f20ca030,chloetedder,2022-09-14 20:10:14+00:00,GitHub,2022-09-14 20:10:14+00:00,"[fs-detectors] Add Nx Workspace (#8549)

### Related Issues


https://nx.dev/more-concepts/folder-structure#integrated-repo-folder-structure

Nx monorepo has an option to use Nx workspaces.
Nx workspace is defined within the root `workspace.json` file
Within this `workspace.json` file the workspace packages are under
projects
```{
  ""$schema"": ""./node_modules/nx/schemas/workspace-schema.json"",
  ""version"": 2,
  ""projects"": {
    ""myblog"": ""apps/myblog"",
    ""svelte-app"": ""apps/svelte-app"",
  }
}
```
Within `getNxWorkspacePackagePaths` get the projects object values for
the paths
Nx is listed as the last workspace manager within
`workspace-managers.ts` because other workspace managers could exist to
check for before Nx workspaces because the `workspace.json` could exist
but not be the correct workspace manager

Nx workspace file can exist when yarn/npm workspaces exist. When this
happens, the workspace.json file is empty with no projects so it will
not add any package paths to the list to look through for projects.


###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with
tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR"
9d7d822da3713cb212977830cb1d36f7284d584e,Nathan Rajlich,2022-09-14 19:10:49+00:00,GitHub,2022-09-14 19:10:49+00:00,"[tests] Add test for path segments when `go.mod` is present (#7361)

Path segment previously were not working when a `go.mod` file is present. This was fixed likely by https://github.com/vercel/vercel/pull/8291, so now this PR is just a test to ensure this case stays working."
b8110d97d10cb59251355fa01e8095c2761285d1,Nathan Rajlich,2022-09-13 23:56:10+00:00,GitHub,2022-09-13 23:56:10+00:00,"[tests] Add more tests for `importBuilders()` scenarios (#8554)

Covers:
  - Importing a built-in Builder with `@latest` should use the CLI's version
  - Importing a built-in Builder with `@canary` should use the CLI's version
  - Importing a built-in Builder with an explicit version should install to `.vercel/builders`"
2d9373b0f163e37497ae5cfc79ad9fb9f8fc979e,Nathan Rajlich,2022-09-13 23:28:36+00:00,GitHub,2022-09-13 23:28:36+00:00,"[tests] Fix ""50-ionic-react"" test fixture (#8556)

Update ""typescript"" and add a `yarn.lock` file.

It started failing without the lockfile with compilation issues:

```
$ react-scripts build
Creating an optimized production build...
Failed to compile.
/vercel/path1/node_modules/@types/react-router/index.d.ts
TypeScript error in /vercel/path1/node_modules/@types/react-router/index.d.ts(149,100):
Type expected.  TS1110
    147 | ): match<Params> | null;
    148 |
  > 149 | export type ExtractRouteOptionalParam<T extends string, U = string | number | boolean> = T extends `${infer Param}?`
        |                                                                                                    ^
    150 |     ? { [k in Param]?: U }
    151 |     : T extends `${infer Param}*`
    152 |     ? { [k in Param]?: U }
error Command failed with exit code 1.
```"
cc7577a64818d2acd20d543041d19dccad43b720,Nathan Rajlich,2022-09-13 21:35:01+00:00,GitHub,2022-09-13 21:35:01+00:00,"[cli] Use Builder importing logic from `vc build` in `vc dev` (#8485)

This makes `vc dev` utilize the same Builder installing and importing logic that `vc build` uses. So now the Builders will be installed locally on a per-project basis, rather than being installed to a shared global installation directory."
f3f3d7df5bc31df339c421cb017bd79baf8827f3,Nathan Rajlich,2022-09-13 18:38:42+00:00,GitHub,2022-09-13 18:38:42+00:00,"[cli] Replace ""0.0.0.0"" with ""localhost"" in `vc dev` (#8547)

Instead of replacing ""127.0.0.1"" in `vc dev`, replace ""0.0.0.0"" when rendering the URL to access the `vc dev` server.

The thought here is that the IPv6 form is replacing the catch-all host name (`::`), but the IPv4 version is only replacing the explicit ""127.0.0.1"" version, so there's an inconsistency.

Considering the catch-all host names are not usually intended to be routable anyways, we will fix the inconsistency by only replacing the catch-all versions instead of localhost.

Also, since Node.js will default to binding to the catch-all address when not explicitly specifying a host, this replacement will only happen in that case. If the user is explicitly specifing a host to bind to (i.e. `vc dev -l 127.0.0.1:8080` or `vc dev -l tcp://[::1]:8080`) then it makes more sense to print explicitly what the user specified."
0bafea6d5102271b9fc37d43e94c526cec44e331,Steven,2022-09-13 18:08:45+00:00,GitHub,2022-09-13 18:08:45+00:00,"[tests] Fix tarball lookup with sha contains 0 (#8552)

This PR fixes an issue when the sha begins with `0` and causes [an error](https://vercel.com/vercel/vercel/EP7fVcXKsoodzWRy3fwG8AoeQcs6) when looking up the tarball:

> Error: ENOENT: no such file or directory, 
> copyfile '/vercel/path0/packages/build-utils/vercel-build-utils-v5.4.2-0251253.tgz' 
>  -> '/vercel/path0/public/tarballs/@vercel/build-utils.tgz'

The fix is to no longer rely on the exact tarball name because we can't guarantee the name from `yarn pack` and instead rely on a pattern for the tarball name."
5abb74eddd9fb28d3e651527755fc9ecb624d309,Nathan Rajlich,2022-09-13 12:40:06+00:00,GitHub,2022-09-13 12:40:06+00:00,[cli] Use `isStaticRuntime()` helper function when importing Builders (#8551)
23d7eaccab97b2b947755b91ea258df3b3174435,Steven,2022-09-12 23:07:46+00:00,GitHub,2022-09-12 23:07:46+00:00,"[frameworks] Update framework logos to be file paths (#8546)

This removes the reliance on raw github hosting and instead relies on the Vercel deployment hosting the logo images.

Since we already have static files in each deployment (tarballs), it makes sense to start adding static images too."
2cb008e8edfd324269f422ef054fbf2feab04855,Nathan Rajlich,2022-09-12 22:05:38+00:00,GitHub,2022-09-12 22:05:38+00:00,"[cli] Switch to `npm` and add more context to install errors during Builder import (#8545)

Before:

<img width=""1012"" alt=""Screen Shot 2022-09-09 at 7 03 01 PM"" src=""https://user-images.githubusercontent.com/71256/189464732-8cf6398a-9432-423b-8509-a52bd714333e.png"">

After:

<img width=""579"" alt=""Screen Shot 2022-09-12 at 12 27 31 PM"" src=""https://user-images.githubusercontent.com/71256/189739091-86399428-d9b8-4d03-b0e6-7d27a1037bce.png"">

This is a precursor to https://github.com/vercel/vercel/pull/8485, since the last remaining test failure there is related to specialized messaging we had for these same cases."
b5c3610113da7fedcba994151da5565584ca2023,chloetedder,2022-09-12 16:32:13+00:00,chloetedder,2022-09-12 16:32:13+00:00,"Publish Stable

 - vercel@28.2.5
 - @vercel/fs-detectors@3.2.0"
f23c7fc4fca2f2d69c3d45ed0ce31e1510c638ef,chloetedder,2022-09-09 22:51:56+00:00,GitHub,2022-09-09 22:51:56+00:00,"[fs-detectors] Add monorepo managers (#8534)

### Related Issues

Adding in Nx and Rush as monorepo managers.
This will allow to help with starting zero config for both the above managers.
I have added in unit tests for both Nx and Rush.

###  Checklist

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
3dc1ad6437b396bdf604c5a3070fe0c7218b2036,Sean Massa,2022-09-09 22:07:58+00:00,GitHub,2022-09-09 22:07:58+00:00,"[dev] consolidate dev server address parsing (#8538)

Consolidates parsing and access to `this.address` so that we don't have to `new URL(this.address)` all over the place.

---

Follow-up from: https://github.com/vercel/vercel/pull/8457#issuecomment-1238653904"
4dc0bef62ba71f2e7693a99dfa6283cbde6a8c90,github-actions[bot],2022-09-09 21:41:41+00:00,GitHub,2022-09-09 21:41:41+00:00,"[examples] Upgrade Next.js to version 12.3.0 (#8537)

This auto-generated PR updates Next.js to version 12.3.0

Co-authored-by: Steven <steven@ceriously.com>"
8b3c52b9e8cbf7de7fc51f76975374c4bb2fad56,Sean Massa,2022-09-09 21:28:36+00:00,Sean Massa,2022-09-09 21:28:36+00:00,"Publish Stable

 - vercel@28.2.4
 - @vercel/frameworks@1.1.5
 - @vercel/fs-detectors@3.1.0
 - @vercel/static-build@1.0.23"
fc74300ad0675f8d42be8d002cd599d6a55651fe,Sean Massa,2022-09-09 20:34:14+00:00,GitHub,2022-09-09 20:34:14+00:00,"[dev] fix middleware rewrites to relative paths that do not exist (#8535)

When using a `rewrite` in middleware to a relative path that does not exist, the logic gets confused and falls back to the original path.

This was caused by two changes that, in combination, caused this behavior.

1. `prevUrl` was created to keep track of route results that point to other routes, but falls back to `req.url` (`prevUrl`'s initial value): [#4033](https://github.com/vercel/vercel/commit/40e4b6926756528364a4ed9d4c5a7f871f89c945#diff-142c93a61d03a1718eb765cd25e5f18d07a95358bb27ce5d5d4da314ee2fa286R1283-R1284)
2. `prevUrl` was reassigned when handling middleware: [#7973](https://github.com/vercel/vercel/commit/ee1211416f50ac04e2644b24e89403414179a3e9#diff-00ef6e7b63ed4cae298afc2a8c84f49247855a2506270f748e4d3e41da97ad99R1538)

Because `prevUrl` was reset back to `req.url` after the first `phase` (null) was run, the updated `prevUrl` value from middleware was lost. This only matters if the second `phase` (""filesystem"") was going to be hit.

Further confusing matters, this was partially fixed by https://github.com/vercel/vercel/pull/8457 because it either returned a proxy pass (which doesn't have this problem) or assigned `req.url` to include the `rewritePath`, which meant that later when `prevUrl` would default to `req.url`, it still had come from `rewritePath`. So, this is fixed for the absolute URL case, but not the relative path case.

Given all that, I think the fix we need is to keep `prevUrl` at its current value when it's not being updated based on the `routeResult`.

---

So, I made that change here. I added a test that exercises this specific behavior."
28f8a38e007f761368e8c0a2d5aba143d1ded8ee,Andrew Gadzik,2022-09-09 19:39:05+00:00,GitHub,2022-09-09 19:39:05+00:00,"[fs-detectors] Add the writeFile function to DetectorFilesystem (#8536)

Adds a `writeFile` function to `DetectorFilesystem` that will be used to update the various file cache maps.

**Why is this needed?**

When detecting npm7+ monorepos, we identified a performance improvement where the service can inspect the `package-lock.json` file for workspaces, and reuse the package information for each workspace in framework-detection.

The pseudo code in `vercel/api` will look something like this

For a given lockfile
```json
{
  ...,
  ""packages"": {
    """": {
      ""name"": ""npm-workspaces"",
      ""version"": ""1.0.0"",
      ""license"": ""ISC"",
      ""workspaces"": {
        ""packages"": [
          ""apps/*""
        ]
      }
    },
    ""apps/admin"": {
      ""version"": ""0.1.0"",
      ""dependencies"": {
        ""next"": ""12.2.5"",
        ""react"": ""18.2.0"",
        ""react-dom"": ""18.2.0""
      },
      ""devDependencies"": {
        ""eslint"": ""8.23.0"",
        ""eslint-config-next"": ""12.2.5""
      }
    },
    ...,
}
```

```ts
// for each projectPath we detect in package-lock.json
// switch the cwd of the fs to the project directory
const projectFs = fs.chdir(projectPath);
// gets the package info from the lockfile
const projectPackageInfo = lockFile.packages[projectPath];
// insert this content into fs cache
await projectFs.writeFile('package.json', projectPackageInfo)
// call detectFramework, which should now have a cached ""package.json"" file 
const projectFramework = await detectFramework(projectFs);
```

### Related Issues

Related to https://linear.app/vercel/issue/HIT-57/monorepo-detection-api-prevent-rate-limits

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
c318ce9695a1b0d6c9833935503b2de3ac884522,Jacob Ford,2022-09-09 18:59:12+00:00,GitHub,2022-09-09 18:59:12+00:00,"[frameworks] Detect Sanity v3 config (#8540)

Sanity v3 is currently in [developer preview](https://www.sanity.io/blog/sanity-studio-v3-developer-preview), and has deprecated `sanity.json` in the project root, replacing it with `sanity.config.js`. This should detect either.

All commands remain the same in both v2 and v3.

Co-authored-by: Steven <steven@ceriously.com>"
5b36eaacff2d51c558f3e599d31ef2e183b7ec75,Nathan Rajlich,2022-09-09 18:57:50+00:00,GitHub,2022-09-09 18:57:50+00:00,"[cli] Poll the Dev Command server on both IPv4 and IPv6 in `vc dev` (#8542)

This change will allow the downstream Dev Command server be able to listen on either of `127.0.0.1` for IPv4 or `[::1]` for IPv6.

- Fixes #6639
- Fixes #8511
- Fixes #8121
- Closes #8512
- Closes #8384"
c9f7ca23a819dab25220d3082884738ebfeefab0,Chris Barber,2022-09-08 14:26:30+00:00,GitHub,2022-09-08 14:26:30+00:00,"[tests] Skip tests that won't run on Windows due to 'mkdir -p' and symlinks (#8531)

Found a few tests that won't run on Windows. The project settings override test runs `mkdir -p` which errors. The other two build tests fail because they try to create symlinks.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
57e0db0f656bf9f8e88a5c6345a32be8cf7a37ea,Sean Massa,2022-09-07 20:30:10+00:00,GitHub,2022-09-07 20:30:10+00:00,"[dev] allow middleware rewrites to change origin in `vc dev` (#8457)

Middleware rewrites in `vc dev` were not respecting changes to the origin. This PR implements that to match prodution.

---

Paired with: @TooTallNate"
d5537500d8957985c1ffb3798659a611cc2e5d5d,Steven,2022-09-07 19:39:47+00:00,Steven,2022-09-07 19:39:47+00:00,"Publish Stable

 - @vercel/build-utils@5.4.2
 - vercel@28.2.3
 - @vercel/client@12.2.4
 - @vercel/frameworks@1.1.4
 - @vercel/fs-detectors@3.0.0
 - @vercel/go@2.2.5
 - @vercel/hydrogen@0.0.18
 - @vercel/next@3.1.25
 - @vercel/node@2.5.14
 - @vercel/python@3.1.14
 - @vercel/redwood@1.0.23
 - @vercel/remix@1.0.24
 - @vercel/ruby@1.3.31
 - @vercel/static-build@1.0.22"
4b1736b2f2fe7caf3e4590751040f64dd3aa4d63,Andrew Gadzik,2022-09-07 19:35:56+00:00,GitHub,2022-09-07 19:35:56+00:00,"[fs-detectors] optimize readdir for framework detection (#8497)

Adding the ability to explicitly set the `hasPath` and `isFile` caches via `readdir`

**Why is this needed?**

For framework detection, this allows us to fetch the contents of a directory (the root directory) of a git repo, and make assumptions about the existence of files,

```ts
import frameworks from ""@vercel/frameworks"";

// we can make the set of all file paths needed for framework detection like this
const setOfPaths = new Set(
  frameworks.frameworks
    .flatMap((f) => [
      ...(f.detectors?.every ?? []),
      ...(f.detectors?.some ?? []),
    ])
    .map((d) => d.path)
);

// then we can read the contents of the root directory of a git repo via the `DetectorFilesystem`
fs.readdir('./', { potentialFiles: [...setOfPaths] });

// The filesystem has been fully primed - any network calls from here will only happen if needed.
// This works because the logic of `detectFramework` calls `hasPath` and then `isFile` before 
// fetching file contents.  Since the filesystem knows this information, it doesn't have to make 
// any additional network calls  
const framework = detectFramework(fs);
```

### Related Issues

Related to [HIT-57](https://linear.app/vercel/issue/HIT-57/monorepo-detection-api-prevent-rate-limits)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
9da1c6fa66a1d30f44902bd5f05718906abb26be,Sean Massa,2022-09-07 18:47:09+00:00,GitHub,2022-09-07 18:47:09+00:00,"[tests] set retry count to 0 when running tests locally (#8529)

When running tests locally that fail to make a fetch request, the retries add a lot of noise to debugging. This PR sets those retry counts to `0` locally, but keeps them at their current value for CI."
a6c320846e6cb9f0cbdce168f325acb5a598d156,Jiachi Liu,2022-09-06 23:19:28+00:00,GitHub,2022-09-06 23:19:28+00:00,"[@vercel/next] Handle nextjs edge routes from app dir (#8524)

### Related Issues

Add handling for edge SSR in app dir, normalize the edge page routes
from app dir, like what we did for ones in `pages/`.

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with
tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a
reviewer
- [ ] Issue from task tracker has a link to this PR

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
4973814978dc7d3115102a25aa9324c92d3d860b,Shu Uesugi,2022-09-02 18:06:31+00:00,GitHub,2022-09-02 18:06:31+00:00,"[frameworks] Update Next.js Logos (#8505)

Update them to match the new logos. See: https://vercel.com/design/brands#next-js

<img width=""869"" alt=""Screen Shot 2022-09-02 at 10 43 52 AM"" src=""https://user-images.githubusercontent.com/992008/188208956-aae10437-77ef-43c8-9bc1-c2499e509a7c.png"">"
f1289ff2639a82b0ebfb32e891a385a4d8b6a2c1,Sean Massa,2022-09-01 22:19:10+00:00,GitHub,2022-09-01 22:19:10+00:00,"[node] update middleware-no-response behavior to match production changes (#8500)

Production was updated to allow middleware without responses to pass through. This PR makes `vc dev` behave the same way. Tests were updated."
3ff93279cd53bbfb620d27c93ca59d28917a5598,Steven,2022-09-01 20:42:27+00:00,Steven,2022-09-01 20:42:27+00:00,"Publish Stable

 - vercel@28.2.2
 - @vercel/next@3.1.24
 - @vercel/node@2.5.13
 - @vercel/redwood@1.0.22
 - @vercel/remix@1.0.23"
58f9d649a89953d435aff988f7a12b897c61430e,Steven,2022-09-01 20:41:30+00:00,GitHub,2022-09-01 20:41:30+00:00,"[next][node][remix][redwood] Bump `@vercel/nft@0.22.1` (#8502)

Bump `@vercel/nft` to version [0.22.1](https://github.com/vercel/nft/releases/tag/0.22.1)"
cadc082ad1c82f5ecf7d0c3e6873cdeb2ec44827,JJ Kasper,2022-09-01 19:06:18+00:00,GitHub,2022-09-01 19:06:18+00:00,"[next] Fix index app dir case (#8501)

### Related Issues

This ensures we properly normalize the `/` case from the `app-path-routes-manifest` as the outputs expect this to be normalized to `index`. 

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
2906d83eaeddc72f9d874981dbe6698e812f3ca3,Steven,2022-09-01 17:16:42+00:00,Steven,2022-09-01 17:16:42+00:00,"Publish Stable

 - @vercel/build-utils@5.4.1
 - vercel@28.2.1
 - @vercel/client@12.2.3
 - @vercel/edge@0.0.4
 - @vercel/fs-detectors@2.1.0
 - @vercel/go@2.2.4
 - @vercel/hydrogen@0.0.17
 - @vercel/next@3.1.23
 - @vercel/node@2.5.12
 - @vercel/python@3.1.13
 - @vercel/redwood@1.0.21
 - @vercel/remix@1.0.22
 - @vercel/ruby@1.3.30
 - @vercel/static-build@1.0.21"
675c3e29156dcce9917414fe13b36eb357b222e3,Steven,2022-09-01 17:12:41+00:00,GitHub,2022-09-01 17:12:41+00:00,"[cli] Change error message from `Error!` to `Error:` (#8498)

We have code that tries to detect and highlight errors in the build logs, however it doesn't look for `Error!`, only `Error:`.

We could update that highlight code or we could update Vercel CLI to make it consistent.

This PR is the latter."
13a8a7dbf6f29c994b68f4eb5ef42761b979c9ec,Steven,2022-09-01 16:13:35+00:00,GitHub,2022-09-01 16:13:35+00:00,"[next] Revert nft to 0.21.0 (#8499)

In Next.js 12, we introduce `outputFileTracing` as the default behavior. This moved `@vercel/nft` from `@vercel/next` into `next` itself so users can upgrade or downgrade Next.js if there is a bug in `@vercel/nft`.

Unfortunately, some users are setting `outputFileTracing: false` which deopts tracing back from `next` to `@vercel/next`. So we should pin `@vercel/nft` here and never upgrade in case of any bugs."
b480e632a3d5c20b95aaaa13a5f19d2803e71e47,Andrew Gadzik,2022-08-31 18:51:03+00:00,GitHub,2022-08-31 18:51:03+00:00,"Add writeFile to DetectorFilesystem (#8493)

Adds a `writeFile` function to `DetectorFilesystem` that will be used to update the various file cache maps.

When detecting npm7+ monorepos, we identified a performance improvement where the service can inspect the `package-lock.json` file for workspaces, and reuse the package information for each workspace in framework-detection.

The pseudo code in `vercel/api` will look something like this

For a given lockfile
```json
{
  ...,
  ""packages"": {
    """": {
      ""name"": ""npm-workspaces"",
      ""version"": ""1.0.0"",
      ""license"": ""ISC"",
      ""workspaces"": {
        ""packages"": [
          ""apps/*""
        ]
      }
    },
    ""apps/admin"": {
      ""version"": ""0.1.0"",
      ""dependencies"": {
        ""next"": ""12.2.5"",
        ""react"": ""18.2.0"",
        ""react-dom"": ""18.2.0""
      },
      ""devDependencies"": {
        ""eslint"": ""8.23.0"",
        ""eslint-config-next"": ""12.2.5""
      }
    },
    ...,
}
```

```ts
// for each projectPath we detect in package-lock.json
// switch the cwd of the fs to the project directory
const projectFs = fs.chdir(projectPath);
// gets the package info from the lockfile
const projectPackageInfo = lockFile.packages[projectPath];
// insert this content into fs cache
projectFs.writeFile('package.json', projectPackageInfo)
// call detectFramework, which should now have a cached ""package.json"" file 
const projectFramework = await detectFramework(projectFs);
```

### Related Issues

Related to [HIT-57](https://linear.app/vercel/issue/HIT-57/monorepo-detection-api-prevent-rate-limits)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
bc6c364888ad4c829aa70ca7c9b5743757d0c76c,Chris Barber,2022-08-30 02:32:38+00:00,GitHub,2022-08-30 02:32:38+00:00,"[node] Added 'cause' to error message (#8467)

When running `vc dev` for a project using `experimental-edge` runtime and a fetch-related error occurs, the message is a little vague:

```
Unhandled rejection: fetch failed
```

In this case, the fetch promise (defined in @edge-runtime/primitives) is being rejected with a `TypeError: fetch failed` that has a `cause` property containing the actual `response.error` message. The `response.error` is the actual error and is never reported to the user.

This PR simply appends the `cause` message, if exists, to the fetch failure message.

```
Unhandled rejection: fetch failed: Error: getaddrinfo ENOTFOUND undefined
```

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
6cad10c89973bf3cddc411f35f342aa32141150e,Steven,2022-08-30 01:23:34+00:00,GitHub,2022-08-30 01:23:34+00:00,"[build-utils] Replace `npm bin` with custom implementation (#8483)

This PR removes `npm bin` in favor of a custom implementation since the command will be removed in npm 9.

- Related to https://github.com/npm/statusboard/issues/537"
0d78ec46664844eb962b61cd38f1eae6f6bd4c3a,Gal Schlezinger,2022-08-29 09:36:44+00:00,GitHub,2022-08-29 09:36:44+00:00,[edge] Add markdown documentation using TypeDoc (#8446)
b05d653cf1ce93735cfce36ef364dd9937c52627,Nathan Rajlich,2022-08-26 21:43:25+00:00,GitHub,2022-08-26 21:43:25+00:00,"[cli] Use unique ""name"" in package.json test fixtures (#8475)

This fixes a few warnings when running Jest that look something like:

```
jest-haste-map: Haste module naming collision: nextjs
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/dev/fixtures/10-nextjs-node/package.json
    * <rootDir>/test/dev/fixtures/25-nextjs-src-dir/package.json
```"
5a38b94de279598551f4d64e8e4abf92dfce231d,Nathan Rajlich,2022-08-26 21:03:38+00:00,GitHub,2022-08-26 21:03:38+00:00,"[cli] Replace ""progress"" module with custom implementation (#8397)

The `progress` module is overkill for what we are using it for and it's inconsistent with our styling for the rest of the deployment process.

So drop the npm module in favor of an in-house progress bar implementation that can be used inside of the Ora `output.spinner()` that we already use for the other steps of the deployment process.

**Before:**

<img width=""307"" alt=""Screen Shot 2022-08-25 at 5 07 28 PM"" src=""https://user-images.githubusercontent.com/71256/186790052-18431ac0-b05b-434e-b885-9eb76d880b9d.png"">

**After:**

<img width=""347"" alt=""Screen Shot 2022-08-25 at 5 09 35 PM"" src=""https://user-images.githubusercontent.com/71256/186790168-8dd3e9a2-863a-45cc-bd21-d98308d34e22.png"">"
6668d6cf2162903fd2d2883d8484a4239fd56cec,Nathan Rajlich,2022-08-26 18:02:01+00:00,GitHub,2022-08-26 18:02:01+00:00,"[client] Add ""tar-fs"" dependency (#8473)

Fixes #8471."
b63f444abda495f8593c4ae019f44aa6797c4666,Andrew Gadzik,2022-08-26 16:24:13+00:00,GitHub,2022-08-26 16:24:13+00:00,"[fs-detectors] Add a default workspace manager when there's no lock file (#8469)

This fixes an issue with this example,

https://vercel.com/api/v1/integrations/detect-eligible-projects?url=https%3A%2F%2Fgithub.com%2Fvercel%2Fturborepo%2Ftree%2Fmain%2Fexamples%2Fkitchen-sink

Where the repo has no lockfile, and hence our workspace detection fails.  This fix is to add a fallback of ""npm"" in this scenario

### Related Issues

Fixes https://github.com/vercel/turbo-internal/issues/232

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
9d71d4332f28f9895b256900dec4fff7ad509707,Steven,2022-08-26 15:43:14+00:00,GitHub,2022-08-26 15:43:14+00:00,"[tests] Update codeowners for fs-detectors (#8470)

Update codeowners for `@vercel/fs-detectors` to add @agadzik and @chloetedder"
151db21a2fd4e952379ffa343caa2a21abed1fa7,Steven,2022-08-25 22:20:37+00:00,GitHub,2022-08-25 22:20:37+00:00,"[tests] Add required labels (#8464)

This action will fail if the required labels are not applied to a PR.

We allow multiple `area` labels and only a single `semver` label.

- Example failure: https://github.com/vercel/vercel/runs/8024949804?check_suite_focus=true#step:2:19
- Example success: https://github.com/vercel/vercel/runs/8026212031?check_suite_focus=true#step:2:19"
aba9c95ea2eaf780f767e03f977d4a1600ce0c4c,Steven,2022-08-25 22:05:55+00:00,GitHub,2022-08-25 22:05:55+00:00,"[tests] Change PR automerge label (#8465)

We decided to change this to an explicit label and rely on a separate action to check for correct labels (see #8464).

This action likely won't work for PRs from forks, but that might be okay because our other actions don't work for forks either."
e7e0a55b72bc73c26661f7b2a3caa0884a5d1764,Sean Massa,2022-08-25 20:50:50+00:00,Sean Massa,2022-08-25 20:50:50+00:00,"Publish Stable

 - @vercel/build-utils@5.4.0
 - vercel@28.2.0
 - @vercel/client@12.2.2
 - @vercel/go@2.2.3
 - @vercel/hydrogen@0.0.16
 - @vercel/next@3.1.22
 - @vercel/node@2.5.11
 - @vercel/python@3.1.12
 - @vercel/redwood@1.0.20
 - @vercel/remix@1.0.21
 - @vercel/ruby@1.3.29
 - @vercel/static-build@1.0.20"
c2163e3e4f7c5fc9000cddb7b5c321134359c8e8,Sean Massa,2022-08-25 20:06:49+00:00,GitHub,2022-08-25 20:06:49+00:00,"[tests] Update CODEOWNERS (#8463)

Changes:

- added @cb1kenobi @Ethan-Arrowood to sections owned by the Vercel CLI team
- removed outdated code owners: if this was you and you believe this was in error, let us know!
- removed no-op lines"
873f549637548e4826085ba9378dd8c575b551ed,Nathan Rajlich,2022-08-25 19:09:12+00:00,GitHub,2022-08-25 19:09:12+00:00,"[cli] Normalize Builder output paths in `vc dev` (#8461)

Fixes https://github.com/vercel/og-image/issues/180."
ead1e411ee1af21e6bc5e5a1ff17dbdbb0a8d0a6,Naoyuki Kanezawa,2022-08-25 18:57:12+00:00,GitHub,2022-08-25 18:57:12+00:00,"[next] support middleware-manifest v2 (#8319)

### Related Issues

As the title, support a new version of middleware-manifest of next.js that is going to be added in https://github.com/vercel/next.js/pull/39257

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
7c1c089a7033e78689b7d1c001aea0cbf54ff084,Sean Massa,2022-08-25 15:11:05+00:00,GitHub,2022-08-25 15:11:05+00:00,"[tests] rename go test function (#8458)

This function name can be anything, but the current one is confusing. This is what the function gets renamed to during compilation. Let's change it back to avoid confusion."
a7dbd9649ba21478a1384011a1823573fd93a3b7,Ethan Arrowood,2022-08-25 03:00:52+00:00,GitHub,2022-08-25 03:00:52+00:00,"[cli] add override support for vc build and vc dev (#8451)

### Related Issues

Adds configuration override support to `vc build` and `vc dev` commands.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
2e439045c9d49a3f565280d5bab6f56d7697c2f4,Chris Barber,2022-08-25 01:25:30+00:00,GitHub,2022-08-25 01:25:30+00:00,"[cli] Improved 'vc git' help description for --yes flag (#8460)

When adding the `--yes` flag to the `vc git` command's help screen, the description was copy/pasted and not accurate, so this PR improves the description to be more accurate.

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
520e0d01f46b10ac41cfdad269e8a0a4eba9a99a,Steven,2022-08-24 20:07:17+00:00,GitHub,2022-08-24 20:07:17+00:00,"[frameworks] Fix link to framework logo (#8459)

This link should be using our custom domain"
385662378577c7f8e45c30a96a5df1eeff2ba525,Steven,2022-08-24 18:50:20+00:00,GitHub,2022-08-24 18:50:20+00:00,"[build-utils] Prefix debug message (#8378)

This PR adds `VERCEL_DEBUG_PREFIX` environment variable which lets you set a prefix for the debug logs."
1c14e945f9b5e94e2dadb3f47e23146c2178313b,Steven,2022-08-24 18:00:10+00:00,GitHub,2022-08-24 18:00:10+00:00,"[tests] Reduce test logs (#8455)

This PR reduces the noisy test logs that currently look like this:

<img width=""1013"" alt=""image"" src=""https://user-images.githubusercontent.com/229881/186479890-e954ca9c-782e-49b8-89e7-6409185bb490.png"">"
32357fc06fe43cef5744a424675376d431926e35,Steven,2022-08-24 16:13:34+00:00,GitHub,2022-08-24 16:13:34+00:00,"[node][next][redwood][remix] Bump `@vercel/nft@0.22.0` (#8454)

This PR bumps `@vercel/nft` to version [0.22.0](https://github.com/vercel/nft/releases/tag/0.22.0)"
f7c57dc539921a5063c955ccd464e9e63287b7e2,Lee Robinson,2022-08-24 15:15:50+00:00,GitHub,2022-08-24 15:15:50+00:00,"[examples] Update SvelteKit example for breaking changes. (#8439)

There were recently a few breaking changes introduced into SvelteKit. This PR clones that latest changes from a demo SvelteKit application, while retaining support for Vercel Analytics.

Deployed latest to https://sveltekit-template.vercel.app/ and confirmed analytics are sending."
34f7c35c13045ab7b9ba8d566a93ba281415cd5d,github-actions[bot],2022-08-24 14:41:54+00:00,GitHub,2022-08-24 14:41:54+00:00,"[examples] Upgrade Next.js to version 12.2.5 (#8453)

This auto-generated PR updates Next.js to version 12.2.5

Co-authored-by: Vercel Team Bot <team@zeit.co>"
6700630feb23bdb4e94ea727911a9e10aa546361,Sean Massa,2022-08-24 14:09:02+00:00,Sean Massa,2022-08-24 14:09:02+00:00,"Publish Stable

 - @vercel/build-utils@5.3.2
 - vercel@28.1.4
 - @vercel/client@12.2.1
 - @vercel/go@2.2.2
 - @vercel/hydrogen@0.0.15
 - @vercel/next@3.1.21
 - @vercel/node@2.5.10
 - @vercel/python@3.1.11
 - @vercel/redwood@1.0.19
 - @vercel/remix@1.0.20
 - @vercel/ruby@1.3.28
 - @vercel/static-build@1.0.19"
34cd8b41443e2b9336c4b9ed9f9eb6652790f5a3,Sean Massa,2022-08-24 14:07:04+00:00,GitHub,2022-08-24 14:07:04+00:00,[cli] revert git connect inside `vc link` (#8450)
ad0ed6d8520e717fab3e4e22df21e879d3660be7,Sean Massa,2022-08-23 21:58:19+00:00,Sean Massa,2022-08-23 21:58:19+00:00,"Publish Stable

 - vercel@28.1.3
 - @vercel/node@2.5.9"
0bad09b47abc0fe8dfd56d42efa2684a3b078473,Gal Schlezinger,2022-08-23 21:56:13+00:00,GitHub,2022-08-23 21:56:13+00:00,"[node] fix WebAssembly bindings evaluating to `undefined` (#8417)

This was broken since https://github.com/vercel/vercel/pull/8242, which accidentally pushed all WebAssembly modules to be nested under `global.wasmBindings` instead of being directly under the global scope.

### Related Issues

- This was broken since https://github.com/vercel/vercel/pull/8242

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5120689bf2b6201ace3f2349c0438f451ff13209,Steven,2022-08-23 21:28:38+00:00,GitHub,2022-08-23 21:28:38+00:00,"[tests] Fix update-next script (#8452)

Follow up to #8447 since exec returns a buffer, not a string."
5a39fd9242fbc99f92ef5951cd9e940eae425e03,Steven,2022-08-23 17:19:55+00:00,GitHub,2022-08-23 17:19:55+00:00,"[tests] Automatically update Next.js example periodically (#8447)

Automatically update Next.js example every 4 hours using `create-next-app`"
352cd00ef093be6549ddc260803aca1c2ecdc63c,Sean Massa,2022-08-23 15:15:26+00:00,Sean Massa,2022-08-23 15:15:26+00:00,"Publish Stable

 - vercel@28.1.2
 - @vercel/go@2.2.1"
abfe817f869fcf2963b64aca055e03e4bdfb7635,Sean Massa,2022-08-23 15:14:21+00:00,GitHub,2022-08-23 15:14:21+00:00,"[go] ignore bad go handlers and rename functions with more precision (#8422)

Co-authored-by: Steven <steven@ceriously.com>"
ebb5e2b208b14c6dbef325f47643d99008d50700,Sean Massa,2022-08-22 20:33:41+00:00,Sean Massa,2022-08-22 20:33:41+00:00,"Publish Stable

 - vercel@28.1.1
 - @vercel/next@3.1.20
 - @vercel/python@3.1.10"
e34858d0828d97a7ccdedc36ff739cd051e20101,JJ Kasper,2022-08-22 19:58:21+00:00,GitHub,2022-08-22 19:58:21+00:00,"[next] Add handling for app-paths-manifest (#8098)

This adds handling for the `app` outputs and adds initial tests to ensure it is working as expected. 

### Related Issues

x-ref: https://github.com/vercel/next.js/pull/38420

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
f03c947f912fce0fe62660f5e561b07f18edfa74,Ikko Ashimine,2022-08-22 15:58:27+00:00,GitHub,2022-08-22 15:58:27+00:00,"[python] fix typo in install.ts comment (#8442)

overriden -> overridden"
0d13fe7e342dd60163323b6c2c98e07225186f34,JJ Kasper,2022-08-22 15:13:16+00:00,GitHub,2022-08-22 15:13:16+00:00,"[next] Ensure non-static pages/500 is handled (#8438)

Related Issues
Previously we were only checking for a non-static version of pages/404 although this can also be the case for pages/500 so this ensures we match that handling and add a test case to prevent regression.
Fixes: slack thread
 Checklist

Tests

 The code changed/added as part of this PR has been covered with tests
 All tests pass locally with yarn test-unit

Code Review

 This PR has a concise title and thorough description useful to a reviewer
 Issue from task tracker has a link to this PR"
4afec9d373b2671c24cdb6595a42eaaee5f4d0c1,JJ Kasper,2022-08-22 14:52:24+00:00,GitHub,2022-08-22 14:52:24+00:00,"[next] Update middleware data routes to fix caching (#8431)

Related Issues
This fixes caches for data routes with middleware due to search params not matching between the non-data variant and the data variant. Additional tests have been added to ensure this is working as expected.
Fixes: vercel/next.js#39595
 Checklist

Tests

 The code changed/added as part of this PR has been covered with tests
 All tests pass locally with yarn test-unit

Code Review

 This PR has a concise title and thorough description useful to a reviewer
 Issue from task tracker has a link to this PR"
09c85f63d2aa47c147260d343767f6eea60e352c,Sean Massa,2022-08-16 20:05:36+00:00,Sean Massa,2022-08-16 20:05:36+00:00,"Publish Stable

 - vercel@28.1.0
 - @vercel/go@2.2.0
 - @vercel/next@3.1.19"
9963965e9abeed8fb6e6ad7d6c2ac7803d714942,Matthew Stanciu,2022-08-16 19:16:54+00:00,GitHub,2022-08-16 19:16:54+00:00,"[cli] Fix `vc link` not respecting `--yes` (#8412)

As of 28.0.0, `vc link` stopped respecting `--yes` and would wait for prompt if it found a Git repository to connect. This PR passes `autoConfirm` through to the Git prompt, so that `vc link` continues to respect `--yes`.

Here's what `vc link` looks like after this PR if a user has a local Git repository:

<img width=""513"" alt=""Screen Shot 2022-08-16 at 10 05 56 AM"" src=""https://user-images.githubusercontent.com/14811170/184899917-c3dc0603-370d-4c86-afb8-19758fbc051a.png"">

Not sure if we want to remove the log messages to be consistent with the rest of `vc link`?

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
f3ed2790072ca64a5e9d2d7dcca6b6af28cbba74,Matthew Stanciu,2022-08-16 18:47:52+00:00,GitHub,2022-08-16 18:47:52+00:00,"[cli] Change mentions of ""Aborted"" to ""Canceled"" (#8411)

@leerob flagged that the language ""Aborted"" throughout the CLI should be changed to be more inclusive. This PR updates this throughout.

I didn't go as far as to update type names because I wanted to avoid potentially unintended consequences, but happy to also do that if we want.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
4fe489edad4aeacf02172bf3716a49971e62cd67,Sean Massa,2022-08-16 16:54:44+00:00,GitHub,2022-08-16 16:54:44+00:00,"Revert ""Revert ""[go] add lambda wrapper support to the go runtime"""" (#8407)

Co-authored-by: Craig Andrews <craig.andrews@vercel.com>
Co-authored-by: Craig Andrews <44933829+craigandrews@users.noreply.github.com>"
e2911aac0baa47b2cc8c488ac211605621e111b8,Matthew Stanciu,2022-08-16 14:47:41+00:00,GitHub,2022-08-16 14:47:41+00:00,"[cli] Small `vc ls` wording changes (#8405)

I ran `vc ls` for a project and I spotted a few small details that I felt compelled to make better.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
f3cbc5d7462db04411e4d78d5056b70fbdeb186b,JJ Kasper,2022-08-16 14:14:49+00:00,GitHub,2022-08-16 14:14:49+00:00,"[next] Fix un-necessary edge routes being added (#8408)

Currently we are adding routes for edge function un-necessarily as static edge functions don't need routes added and dynamic edge functions already have their routes included in dynamicRoutes in the routes-manifest.
Related Issues
Fixes: slack thread
 Checklist

Tests

 The code changed/added as part of this PR has been covered with tests
 All tests pass locally with yarn test-unit

Code Review

 This PR has a concise title and thorough description useful to a reviewer
 Issue from task tracker has a link to this PR"
40df88b48331a465326f49e85c595a127d4fb1a4,Sean Massa,2022-08-16 08:03:11+00:00,Sean Massa,2022-08-16 08:03:11+00:00,"Revert ""add test for main.go scenario""

This reverts commit 75c4f45b73f4d7518d957cfbdc5f42112d21cfb5."
75c4f45b73f4d7518d957cfbdc5f42112d21cfb5,Sean Massa,2022-08-16 08:01:12+00:00,Sean Massa,2022-08-16 08:01:12+00:00,add test for main.go scenario
05a236f944aec9a5f6c73fde5a01fadbd74b89e3,Sean Massa,2022-08-16 07:49:19+00:00,Sean Massa,2022-08-16 07:49:19+00:00,"Publish Stable

 - vercel@28.0.2
 - @vercel/ruby@1.3.27"
4b7383f521eb9cae31125d0190c94fcc592b3946,Sean Massa,2022-08-16 07:45:48+00:00,GitHub,2022-08-16 07:45:48+00:00,[cli] serialize getDeployment calls in `vercel bisect` (#8403)
c263c31e489ef8c3383702aa7c891f8a3e7091f4,Sean Massa,2022-08-16 03:14:29+00:00,GitHub,2022-08-16 03:14:29+00:00,[cli][tests] remove dupe `inspectorUrl` (#8400)
c80530f9b1fac11b07fe2b6cd36d67a9aa282bd2,Sean Massa,2022-08-15 22:43:04+00:00,GitHub,2022-08-15 22:43:04+00:00,"[cli] fix: undefined variable (#8401)

The variable `chunks` doesn't exist in this context. Updated the error message to reference the `lines` count instead."
16fd4396ef2aa631700b0be434270f77b1701214,Sean Massa,2022-08-15 22:30:02+00:00,GitHub,2022-08-15 22:30:02+00:00,[tests] skip ruby test for now (#8404)
4e7138f40079f21d1850ded6a442137a8fa3cb59,Nathan Rajlich,2022-08-13 22:57:25+00:00,GitHub,2022-08-13 22:57:25+00:00,"[docs] Remove ""watch"" from `DEVELOPING_A_RUNTIME.md` (#8391)

Remove ""watch"" from `DEVELOPING_A_RUNTIME.md`

`vercel dev` no longer utilizes the `watch` field, so let's not document it here."
5273279cf1ead46a1cc864850e67c2a4c2f485f7,Steven,2022-08-13 02:19:42+00:00,Steven,2022-08-13 02:19:42+00:00,"Publish Stable

 - vercel@28.0.1
 - @vercel/ruby@1.3.26"
37290039d626371a660d142fb7511f532bbff028,Steven,2022-08-13 01:59:50+00:00,GitHub,2022-08-13 01:59:50+00:00,"[ruby] Fix `bundle install` (#8392)

This PR is a follow up to #8388. The tests were not running as expected because only the ""vendored"" test used `2.7.x` which was never failing `bundle install` to begin with. I had to add `2.7.x` to the non-vendored test to get `bundle install` to fail. The fix is to rename `2.7.x` to `2.7.0` before running `bundle install`."
b52d01f809b80734ed1ab61df82f299f11a04720,Steven,2022-08-12 20:31:35+00:00,Steven,2022-08-12 20:31:35+00:00,"Publish Stable

 - @vercel/build-utils@5.3.1
 - vercel@28.0.0
 - @vercel/client@12.2.0
 - @vercel/go@2.1.1
 - @vercel/hydrogen@0.0.14
 - @vercel/next@3.1.18
 - @vercel/node@2.5.8
 - @vercel/python@3.1.9
 - @vercel/redwood@1.0.18
 - @vercel/remix@1.0.19
 - @vercel/ruby@1.3.25
 - @vercel/static-build@1.0.18"
ffefaf82a168e4ba582f0abcb4cedd6e11505b52,Matthew Stanciu,2022-08-12 19:56:47+00:00,GitHub,2022-08-12 19:56:47+00:00,"[cli] Fix `vc env pull` delta changes bug (#8382)

#8170 shipped with a small bug: double quotes aren't stripped when pulling existing environment variables, but double quotes are stripped when reading `.env`, so if an environment variable uploaded to Vercel contained double quotes, it would always show as ""Changed"". This PR fixes the bug."
6d8dbfc7d65f98a55e3f3b7b5b8476d9c59f09e2,Steven,2022-08-12 19:56:13+00:00,GitHub,2022-08-12 19:56:13+00:00,"[ruby] Handle exit code 18 gracefully (#8388)

This reverts #8381 and instead supports the ""2.7.x"" syntax.

- Related to https://github.com/vercel/customer-issues/issues/684"
551cd7f68818759daaf23fde00ae4d4ad33d9e03,Steven,2022-08-12 15:31:36+00:00,GitHub,2022-08-12 15:31:36+00:00,"[ruby] Fix ruby version error message (#8381)

This error message was incorrectly telling user to use the `2.7.x` value even though it will fail `bundle install` with the following error:

```
Your Ruby patchlevel is 0, but your Gemfile specified -1
Command failed with exit code 18 (EXDEV)
```

The exact version, `2.7.0`, is necessary."
2dfb6b45cdacb4f242d675489f36f85b9349ad39,Chris Barber,2022-08-12 15:24:31+00:00,GitHub,2022-08-12 15:24:31+00:00,"[cli] MAJOR: Remove update command (#8369)

The `vc update` command is essentially a noop command that doesn't actually update the CLI. This command is not listed in the `--help` output, nor the CLI documentation. It should be safe to remove in the next major release."
65ae2a289e660c1f10bb760429970d1301985291,Steven,2022-08-12 14:51:43+00:00,GitHub,2022-08-12 14:51:43+00:00,"Revert ""[go] add lambda wrapper support to the go runtime"" (#8385)

Revert ""[go] add lambda wrapper support to the go runtime (#8350)""

This reverts commit 4c230c84369d03e21d016cf54c9c76a5c764eef3."
72ea3532b1afc12e13445ad9efcbd62ac71f9b5f,Damien Simonin Feugas,2022-08-12 08:10:05+00:00,GitHub,2022-08-12 08:10:05+00:00,chore: does not add /index when already present (#8373)
78fac008234d796cf32419b28f8a90add676c7f2,Sean Massa,2022-08-12 02:16:07+00:00,GitHub,2022-08-12 02:16:07+00:00,"[cli] improve `vc build --help` language (#8380)

Tweak the `--yes` help language for the `build` command to be more consistent with other flag descriptions.

---

Related to: https://github.com/vercel/vercel/pull/8330"
9e255afa372663e42a4a2e4cc451e9b771a3f169,Nathan Rajlich,2022-08-12 01:18:58+00:00,GitHub,2022-08-12 01:18:58+00:00,"[cli] Support more granular file upload progress bar (#8371)

### Before

Previously, the file upload progress bar would only get updated upon completion of uploading an individual file. This would cause the the progress bar to appear ""chunky"" when uploading large files. This problem is exasperated with #8356, since there is only a single (potentially large) file that gets uploaded, which would cause the progress bar to not render at all, making the deployment process seem ""stuck"".

https://user-images.githubusercontent.com/71256/184241009-ba6d1e63-a0fe-462f-804b-e58f56ec310c.mov

### After

Now, the progress bar gets updated incrementally as individual files get uploaded which makes the progress bar updates smoother and play nicely with large files. This is done by ""chunking"" the individual file into slices and creating a Readable stream from those chunks.

https://user-images.githubusercontent.com/71256/184241050-51832996-d42b-46fd-9a71-d8a1f87a026c.mov"
e4be68270f9b34d688c1370a41095301caf42081,Matthew Stanciu,2022-08-12 00:15:17+00:00,GitHub,2022-08-12 00:15:17+00:00,"[cli] MAJOR: `vc ls` visual changes (#8151)

- Username field does not show if all deployment usernames in the page match the context name
- The `age` field shows first in the table
- A new `duration` field shows the time it took to deploy
- A new `--prod` flag filters for production deployments
- Table headers are colored cyan

### Before

<img width=""1000"" alt=""Screen Shot 2022-07-13 at 6 29 15 PM"" src=""https://user-images.githubusercontent.com/14811170/178867816-5d252c94-86c0-46f4-82bf-a33341686aa6.png"">

<img width=""1081"" alt=""Screen Shot 2022-07-13 at 6 31 15 PM"" src=""https://user-images.githubusercontent.com/14811170/178867934-4fa570a1-e2ba-4d1f-8a93-b88b095c1dca.png"">

### After

<img width=""1002"" alt=""Screen Shot 2022-07-26 at 2 23 27 PM"" src=""https://user-images.githubusercontent.com/14811170/181114658-b1cc0f8d-18a7-4996-8635-a7868af50a19.png"">

<img width=""1077"" alt=""Screen Shot 2022-07-26 at 2 23 21 PM"" src=""https://user-images.githubusercontent.com/14811170/181114646-f614a235-f962-468e-a8e0-ca65f1a94b69.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
9c636dc1ba423ab944de6b0a86b979023ff5bfbf,Matthew Stanciu,2022-08-11 23:29:49+00:00,GitHub,2022-08-11 23:29:49+00:00,[cli] MAJOR: Remove `vc billing` command (#8377)
c98c9996bfcfc560c83dc087de7dc1efa46356ff,Matthew Stanciu,2022-08-11 22:49:36+00:00,GitHub,2022-08-11 22:49:36+00:00,"[cli] MAJOR: Connect a Git provider repository in `vc link` (#8290)

#8100 added a new `vc git` command, which allows users to connect a Git provider repository, enabling them to set up a full Git workflow for their Vercel projects without having to leave the CLI.

This PR takes this functionality a step further by including it as part of the `vc link` flow. This way, users can set up a Vercel project and add a Git provider repository all in one step.

This PR is blocked by a PR to `front` which adds an option to the Git Settings page for a Project to re-enable the prompt if the user opted out (in review).

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
0fcf172a105087fb02034e321648a8233c833373,Matthew Stanciu,2022-08-11 22:08:27+00:00,GitHub,2022-08-11 22:08:27+00:00,"[cli] `vc project ls` visual updates (#8157)

Related to #8102 & #8151. This PR updates the look of `vc project ls`:

- Header names are cyan
- A new ""Latest Production URL"" section

### Before

<img width=""583"" alt=""Screen Shot 2022-08-11 at 10 46 03 AM"" src=""https://user-images.githubusercontent.com/14811170/184199554-5b298f2c-7d62-4200-a580-ddb16765c20e.png"">

### After

<img width=""816"" alt=""Screen Shot 2022-08-11 at 10 45 54 AM"" src=""https://user-images.githubusercontent.com/14811170/184199502-34295b2f-be7f-4289-b426-372c58f37eb6.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
99e5c4a6dbd3df307cfdae705f907be132164c8e,Matthew Stanciu,2022-08-11 21:28:58+00:00,GitHub,2022-08-11 21:28:58+00:00,"[cli] Accept URL argument in `vc git connect` (#8351)

* Add functional but bad code

* Add docs

* Re-add thing just in case

* Fix some things

* Add a few tests

* Add test for multiple

* Add another test

* Small type fix

* Update packages/cli/src/commands/git/index.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/index.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/index.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/test/unit/commands/git.test.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/index.ts

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>

* Fix typo

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>

* Update packages/cli/src/commands/git/connect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/connect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/connect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/connect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/git/connect.ts

Co-authored-by: Steven <steven@ceriously.com>

* return 0

* only return boolean in `promptConnectArg()`

* Remove err.meta check

* `parseRepoUrl()`: parse url without a scheme

* Remove todo

* Fix typo

* Small wording change

* Print each line instead of building buffer

* Make consistent quotes vs template literals

* Remove `multiple` variable

* Remove else

* Accept objects & rename some variables

* Move `connect-git-provider` to `git` folder

* Don't pass in `output`

* Fix small thing

* Add another test

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
Co-authored-by: Chris Barber <chris.barber@vercel.com>"
b8269b0111665a85dd0a17b867d5fea47abd6abb,Nathan Rajlich,2022-08-11 21:08:53+00:00,GitHub,2022-08-11 21:08:53+00:00,"[build-utils] Remove `as` cast in `glob()` (#8376)

This is just a small TypeScript cleanup to remove an `as Stats` cast for the ""statsCache"".

Also drops the `FsFiles` interface in favor of just using the built-in `Record` utility type."
decac0fe3f033bc92cd264d6c0a26279555e2c52,Sean Massa,2022-08-11 19:20:20+00:00,GitHub,2022-08-11 19:20:20+00:00,"Revert ""[remix] add image optimization configuration"" (#8375)

Reverts vercel/vercel#8217

The previous PR had unresolved comments, but the kodiak bot automerged it. Let's revert for now, then we can continue to iterate on code in a new PR."
591d1686d05620db17cfbd647e6b46572b4c2512,Mosaad,2022-08-11 18:30:21+00:00,GitHub,2022-08-11 18:30:21+00:00,"[remix] add image optimization configuration (#8217)

### Feature
Makes it possible to use [Vercel's image optimization](https://vercel.com/docs/build-output-api/v3#build-output-configuration/supported-properties/images).

### Demo
This example is built locally with this patch:
https://github.com/theMosaad/remix-vercel-image"
5e1d5c921cdad93380358dbe36158e1fe4d6e1fb,Matthew Stanciu,2022-08-10 20:44:20+00:00,GitHub,2022-08-10 20:44:20+00:00,"[client] Fix `archive` type on `VercelClientOptions` (#8367)

Fix `archive` type on `VercelClientOptions`"
603b1256c63e46ad54da28aa7963d737349bec4d,Matthew Stanciu,2022-08-10 19:35:25+00:00,GitHub,2022-08-10 19:35:25+00:00,"[client] Send single `source.tgz` archive when creating deployment (#8356)

Right now, deployments via Vercel CLI are created by uploading every source file individually. This PR creates a tarball of the user's source files and sends the packed tarball instead. This speeds up deployment times, especially for large projects, and also bypasses the 15,000 file upload limit.

Currently, it requires a `--archive=tgz` flag. Perhaps we can enable this by default for prebuilt, but that may be for a separate PR.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
6957c728284936672769673392b061ddbacbf80a,Nathan Rajlich,2022-08-10 19:09:04+00:00,GitHub,2022-08-10 19:09:04+00:00,"[client] Remove extraneous file read during deployment upload (#8366)

The `file` object already contains the contents as a Buffer, so there's no need to read the files again.

Extracted from #8356."
9be3650cb750508ea31d67ef9e70d9ededdc9c0e,Steven,2022-08-10 15:55:38+00:00,GitHub,2022-08-10 15:55:38+00:00,"[tests] Use yarn --frozen-lockfile (#8363)

This PR updates CI to use `yarn install --frozen-lockfile` and also updates some github actions to v3."
6e1ee7a7d606874e32630bd41793e591e9a84686,Steven,2022-08-10 15:34:29+00:00,GitHub,2022-08-10 15:34:29+00:00,"[cli] Fix dev query string merging (#8183)

Since `vercel dev` performs query string merging with `vercel.json` routes and the requested url, there is sometimes a slight difference between the request that the browser sends and the request that the upstream dev server receives.

Most servers treat the query string key with ""empty"" value the same as undefined value. Meaning, these two URLs should be equivalent because each has empty values:

- `http://example.com/src/App.vue?vue&type=style&index=0&lang.css`
- `http://example.com/src/App.vue?vue=&type=style&index=0&lang.css=`

However, `vite dev` handles these two URLs differently because of [string comparisons](https://github.com/vitejs/vite/blob/2289d04af5398791c3a01c9e597dc976e593c852/packages/plugin-vue/src/handleHotUpdate.ts#L98-L99) instead of URL parsing, which causes requests from `vercel dev` to fail. Thus, this PR changes from Node.js native URL parsing to a custom implementation in order to handle this corner case and preserve the difference between `?a=` and `?a`.

Ideally this would be [fixed in vite](https://github.com/vitejs/vite/pull/9589), however we might run into other dev servers that also fail in the same way in the future.

- Fixes https://github.com/vercel/vercel/issues/7283
- Closes https://github.com/vitejs/vite/pull/9589
- Related to https://github.com/nodejs/node/issues/9500"
767ce2cff1e0999b5d53fed50708a72131c1e7b2,Damien Simonin Feugas,2022-08-10 13:17:15+00:00,GitHub,2022-08-10 13:17:15+00:00,[node] adds /index to / middleware matchers (#8349)
bb1d0ce1b77d77825ec88c612a911b406574c7fe,Craig Andrews,2022-08-09 21:54:25+00:00,GitHub,2022-08-09 21:54:25+00:00,"chore(docs) Add details of how to enable lambda runtime wrappers to custom runtimes (#8360)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
31f79c7de1944420b1f6fa5be9235c9b3f1d62b6,Sean Massa,2022-08-09 21:11:57+00:00,Sean Massa,2022-08-09 21:11:57+00:00,"Publish Stable

 - vercel@27.4.0
 - @vercel/go@2.1.0
 - @vercel/next@3.1.17"
4c230c84369d03e21d016cf54c9c76a5c764eef3,Craig Andrews,2022-08-09 21:08:20+00:00,GitHub,2022-08-09 21:08:20+00:00,"[go] add lambda wrapper support to the go runtime (#8350)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
7941f5a10492afeac794819b834e3f75f2c26346,Lee Robinson,2022-08-09 18:09:38+00:00,GitHub,2022-08-09 18:09:38+00:00,"[examples] Update Astro template for 1.0. (#8357)

To prepare for [Astro 1.0](https://github.com/withastro/astro/releases/tag/astro%401.0.0-rc.1), this PR updates the template (it has [been deployed](https://astro-template.vercel.app/))."
5b931afbf34e8d5b24b0f44daf000b56fc55c939,JJ Kasper,2022-08-09 16:13:15+00:00,GitHub,2022-08-09 16:13:15+00:00,"[next] Ensure $$ in ISR page is handled correctly (#8359)

* Ensure $$ in ISR page is handled correctly

* update test

* Remove duplicate tests

* add comment

* tweak"
15080364b8f5b297ff3737ef41527e7006a7164c,Chris Barber,2022-08-09 01:05:22+00:00,GitHub,2022-08-09 01:05:22+00:00,"[cli] Standardize on `--yes` instead of `--confirm` (#8330)

Allow for `--yes` flag consistently throughout CLI commands.

Also adds a deprecation warning for usage of `--confirm`,
since `--yes` is now preferred."
47e3381c6df661168e8be335cc58df03f3cf2414,Steven,2022-08-08 23:11:12+00:00,Steven,2022-08-08 23:11:12+00:00,"Publish Stable

 - @vercel/build-utils@5.3.0
 - vercel@27.3.8
 - @vercel/client@12.1.11
 - @vercel/go@2.0.16
 - @vercel/hydrogen@0.0.13
 - @vercel/next@3.1.16
 - @vercel/node@2.5.7
 - @vercel/python@3.1.8
 - @vercel/redwood@1.0.17
 - @vercel/remix@1.0.18
 - @vercel/ruby@1.3.24
 - @vercel/static-build@1.0.17"
33aefdc0295624538c1b4edf02556b993222bb19,Sean Massa,2022-08-08 22:07:02+00:00,GitHub,2022-08-08 22:07:02+00:00,"[go] fix function name conflict (#8299)

Co-authored-by: Steven <steven@ceriously.com>"
30fe76a0cf022baec945953cbb992924f8d57913,Steven,2022-08-08 20:46:04+00:00,GitHub,2022-08-08 20:46:04+00:00,"[build-utils] Push back `nodejs12.x` sunset date (#8355)

This PR pushes back the `nodejs12.x` discontinue date to give more projects a chance to upgrade"
97ef88dc28db3d3fb9fb12c55ae116f0ad5322f6,Thomas Knickman,2022-08-08 20:04:09+00:00,GitHub,2022-08-08 20:04:09+00:00,"chore(docs): use relative links for README (#8354)

This allows README links to work locally (within your IDE) without kicking to a browser - and maintains the current functionality elsewhere."
f679098d7ac5f9e49aacd82d9c3d57236df46409,Nathan Rajlich,2022-08-08 19:22:00+00:00,GitHub,2022-08-08 19:22:00+00:00,"[cli] Fix ""retrieve"" typo (#8352)"
2b57e12ad39687fd9225e5390da29c342c55130f,Steven,2022-08-05 00:51:52+00:00,GitHub,2022-08-05 00:51:52+00:00,"[build-utils] Refactor framework prefixed env vars into shared function (#8166)

This consolidates the logic to get the framework-specific prefixed System Environment Variables into a single shared function so each builder can reuse the same function.

- Related to #7009 
- Related to #8306

In the future, this feature could be added to any other missing builders as well as `vc dev` but we'll save that for a new PR."
c4e94ad03f93a3352384f1ef642d5b95577d7beb,Nathan Rajlich,2022-08-04 21:49:14+00:00,GitHub,2022-08-04 21:49:14+00:00,"[cli] Always set `BROWSER=none` env var for frontend dev server in `vc dev` (#8326)

Previously `vc dev` would only set this env var for ""create-react-app"" Framework preset, but other frameworks do the ""auto-open browser window"" behavior as well, and respect this env var (Docusaurus, specifically).

So always set the `BROWSER=none` env var regardless of which framework preset is selected. Also simplifies the code since this was the only place `frameworkSlug` property was being used."
32afd67d29d46f67027091ab9695d8ff330355b5,Steven,2022-08-04 19:11:10+00:00,Steven,2022-08-04 19:11:10+00:00,"Publish Stable

 - @vercel/build-utils@5.2.0
 - vercel@27.3.7
 - @vercel/client@12.1.10
 - @vercel/edge@0.0.3
 - @vercel/frameworks@1.1.3
 - @vercel/fs-detectors@2.0.5
 - @vercel/go@2.0.15
 - @vercel/hydrogen@0.0.12
 - @vercel/next@3.1.15
 - @vercel/node@2.5.6
 - @vercel/python@3.1.7
 - @vercel/redwood@1.0.16
 - @vercel/remix@1.0.17
 - @vercel/routing-utils@2.0.2
 - @vercel/ruby@1.3.23
 - @vercel/static-build@1.0.16
 - @vercel/static-config@2.0.3"
7523e39f18f6c2994aa8a46e243364f6f010dabd,Nathan Rajlich,2022-08-04 17:51:48+00:00,GitHub,2022-08-04 17:51:48+00:00,[tests] Remove leftover debugging `.pipe()` call in vc build tests (#8317)
99f2f2f1ba9f21d04f8dd6f7644f48c634a3d008,Craig Andrews,2022-08-04 17:23:55+00:00,GitHub,2022-08-04 17:23:55+00:00,"[build-utils] Add flag to indicate that a custom runtime supports lambda wrappers (#8324)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
63830d38cee31db49b0e3700815e53359eb5b22b,Steven,2022-08-04 17:01:01+00:00,GitHub,2022-08-04 17:01:01+00:00,"[cli] Fix vc secret rm (#8320)

Fixes a regression from the the refactor in https://github.com/vercel/vercel/pull/8039 that was causing the following error:

```
Error! client.prompt is not a function
```"
f3428dd2129be66632d3bcdd1c65b699b5ab4ddb,JJ Kasper,2022-08-04 16:57:43+00:00,GitHub,2022-08-04 16:57:43+00:00,"[next] Remove old middleware test (#8323)

Remove old middleware test"
5eb8b16cbdf6215618b4b8125673941757fa1a8e,Steven,2022-08-04 15:39:58+00:00,Steven,2022-08-04 15:39:58+00:00,"Publish Stable

 - @vercel/build-utils@5.1.1
 - vercel@27.3.6
 - @vercel/client@12.1.9
 - @vercel/edge@0.0.2
 - @vercel/frameworks@1.1.2
 - @vercel/fs-detectors@2.0.4
 - @vercel/go@2.0.14
 - @vercel/hydrogen@0.0.11
 - @vercel/next@3.1.14
 - @vercel/node@2.5.5
 - @vercel/python@3.1.6
 - @vercel/redwood@1.0.15
 - @vercel/remix@1.0.16
 - @vercel/routing-utils@2.0.1
 - @vercel/ruby@1.3.22
 - @vercel/static-build@1.0.15
 - @vercel/static-config@2.0.2"
226bf02be2a2163f0af98d4e6309ebb426675eb0,JJ Kasper,2022-08-04 15:39:21+00:00,GitHub,2022-08-04 15:39:21+00:00,"[next] Remove middleware regexp modifying (#8321)


x-ref: [slack thread](https://vercel.slack.com/archives/C03SF65BYSG/p1659626639087909)"
8505872f5587e3028f7f3142072dbdd0a603e048,Steven,2022-08-04 15:02:56+00:00,GitHub,2022-08-04 15:02:56+00:00,"[tests] Update package.json scripts (#8318)

This PR consolidates all the `test` scripts to be the same and removes the `prepublishOnly` script since we always run `build` before publishing to npm."
7db6436797d0b4131113f0b8dccc3b66bc9b1981,Steven,2022-08-04 12:37:04+00:00,Steven,2022-08-04 12:37:04+00:00,"Publish Stable

 - @vercel/build-utils@5.1.0
 - vercel@27.3.5
 - @vercel/client@12.1.8
 - @vercel/go@2.0.13
 - @vercel/hydrogen@0.0.10
 - @vercel/next@3.1.13
 - @vercel/node@2.5.4
 - @vercel/python@3.1.5
 - @vercel/redwood@1.0.14
 - @vercel/remix@1.0.15
 - @vercel/ruby@1.3.21
 - @vercel/static-build@1.0.14"
e2d76e9c927f95024c5d72ea7ac492badbd7f594,Chris Barber,2022-08-04 04:07:33+00:00,GitHub,2022-08-04 04:07:33+00:00,"[cli] recreate symlinked files instead of copying (#8270)

Instead of copying symlinked files during a build, recreate the symlink.

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
337cb21d67b5c8f5279eef3b32b5d18865ff21be,Nathan Rajlich,2022-08-04 03:38:45+00:00,GitHub,2022-08-04 03:38:45+00:00,"[cli] Fix flaky error in `builds.json` tests (#8316)

Follow-up to #8305.

The `expect().toOutput()` call was frequently timing out before the
command writes the error to the terminal, causing the test to fail.
So wait for the command to return the exit code before running assertion
on the printed output."
6bfff3e9eb2c5e077d8b5a23ce9dc1931b6dd319,JJ Kasper,2022-08-04 02:02:19+00:00,GitHub,2022-08-04 02:02:19+00:00,"[next] Remove un-necessary duplicate i18n route (#8313)

* Remove un-necessary duplicate i18n route

* update"
ac5b259c11d36669b1c242d6dcc81b9aa0fd07fc,Sean Massa,2022-08-04 01:11:35+00:00,GitHub,2022-08-04 01:11:35+00:00,"[go] refactor away use of `downloaded` result (#8291)

Review Notes: Turn off diff whitespace.

### Refactor

This PR refactors away the use of the result of `download` for a couple of reasons:
- Keeping `files` and `downloadedFiles` in sync with the file system (like when we rename a file that starts with a bracket) is easy to forget to do, causing bugs
- Nate says that `files` is something we've wanted to move away from using anyway
- It simplifies the code in a few places
- It was getting in the way of other fixes that need to be made

We do still call `download`, but it should be a no-op most of the time.

As a consequence of these changes, this PR also addresses:
- the builder no longer leaves build artifacts around, in many cases
- the builder can compile files that start with brackets again; routes don't seem to allow this to file to respond to a dynamic segments yet, though

### Next Steps

Upcoming PRs will resolve builder issues:

- bracket endpoints responding to dynamic segments
- exported function name conflict handling
- compilation targets should only apply to the source code build, not the analyze go utility

### Operating In-place

We also now have a cleanup step that clears out created files, created directories, and undoes file renames. This fixes an issue where multiple builds on the same directory would fail. It also cleans the user's project code when they are using `vc build`.

Ideally, we'd probably copy all of the code to a separate location, then freely do filesystem operations there. It's not clear to me if this is preferred for large projects because it would have to happen once per endpoint: 100 Go files would cause 10,000 (100 * 100) file copies (or symlinks). 

It has to copy once per endpoint because we potentially need all of the files around in case any of them are imported. If we had nft-style tracing for Go, we could copy only what we needed.

This gets more complex in the next step where the exported function names will be renamed during compilation to fix the name conflict issue."
bfc553db11e9e77cd9a689968adbdd1ddd878320,Steven,2022-08-04 00:15:50+00:00,GitHub,2022-08-04 00:15:50+00:00,"[tests] Add support for probes.json (#8279)

Previously, our test fixtures used to use a probes prop in `vercel.json` that was removed right before it was deployed.

This PR allows a separate `probes.json` file with the same content to separate the test fixture input from the test probes.

This allows us to test real ""zero config"" deployments without a `vercel.json` file."
2b101d4692dabcc32b96ef4dc0e04cb35ff63797,Nathan Rajlich,2022-08-03 23:48:17+00:00,GitHub,2022-08-03 23:48:17+00:00,"[cli] Remove legacy config file migration logic (#8199)

Removes the legacy config file migration logic from back in the days when Zeit CLI supported multiple ""providers"". This was from a _very_ long time ago and we should expect that anyone who would have migrated at this point, has."
3316f38cb4e2711e9455dfd2604b1ebed10f5766,Matthew Stanciu,2022-08-03 22:48:44+00:00,GitHub,2022-08-03 22:48:44+00:00,"[cli] Strip scheme from `vc inspect` argument (#8307)

Right now, `vc inspect` fails to find a deployment if you include `http://` before it. But it works with no scheme and with `https://`.

Since it appears no scheme is what the API looks for anyway, and to avoid confusion, this PR strips any included scheme from the `deploymentIdOrHost` argument.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
7837387127ca7c80aee671a61db8c5d0c4790fad,Nathan Rajlich,2022-08-03 21:32:50+00:00,GitHub,2022-08-03 21:32:50+00:00,"[cli] Print error from Builder in `vc build` (#8305)

Ensures that errors that are serialized into `builds.json` are also printed to the terminal when running the `vc build` command.

Co-authored-by: Steven <steven@ceriously.com>"
f478200dd3ce570e08325e8fd3d03604769785e7,Thomas Knickman,2022-08-03 21:31:18+00:00,GitHub,2022-08-03 21:31:18+00:00,"[static-build] set TURBO_CI_VENDOR_ENV_KEY environment variable (#8306)

Set `TURBO_CI_VENDOR_ENV_KEY` to support https://github.com/vercel/turborepo/pull/1622"
c29de8206ad51500af0eaef5161a9cda632c301a,Matthew Stanciu,2022-08-03 20:04:03+00:00,GitHub,2022-08-03 20:04:03+00:00,"[cli] Minor `vc env pull` diff formatting changes (#8303)

#8170 added a new message at the end of `vc env pull` which shows a delta of what was added, modified, and removed. Some people shared feedback that the yellow chalk color and `~` prefix to indicate modified variables was confusing. This PR instead keeps the prefix as `+` with a green color, but adds a `(Modified)` suffix at the end of every modified variable.

<img width=""638"" alt=""Screen Shot 2022-08-03 at 10 18 28 AM"" src=""https://user-images.githubusercontent.com/14811170/182670327-5a3df6db-d84d-40a1-956b-9cf159501759.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
a2df3b5463be2400a0c80d65f9b5e60afc8776bb,JJ Kasper,2022-08-03 18:40:00+00:00,GitHub,2022-08-03 18:40:00+00:00,"[next] Update data route handling for i18n and static routes (#8304)

* Ensure dynamic data route handles missing default locale path

* Ensure static data routes are still handled"
73446e544a4f0658f025b4b22300298c7bc2506d,Steven,2022-08-03 17:09:03+00:00,GitHub,2022-08-03 17:09:03+00:00,"[python] Fix error message for discontinued Python 3.6 (#8300)

This fixes the error message when a discontinued version of python (for example, Python 3.6) is detected.

https://vercel.com/changelog/python-3-6-is-being-deprecated"
21ff4a58c3ac183afdf4dec658046cf6d6715f06,JJ Kasper,2022-08-03 14:03:15+00:00,GitHub,2022-08-03 14:03:15+00:00,"[next] Ensure we resolve _next/data dynamic routes correctly with i18n (#8297)

* Ensure we resolve _next/data dynamic routes correctly with i18n

* remove test version"
2b9eb02b8c093f30937049b5bc03a772f8f6aae5,JJ Kasper,2022-08-02 22:41:06+00:00,GitHub,2022-08-02 22:41:06+00:00,"[next] Fix _next/data resolving priority for dynamic routes (#8278)

* Fix _next/data resolving priority for dynamic routes

* Apply suggestions from code review

* Ensure we match middleware for _next/data without header

* fix nested middleware case

* Update data routes generating

* Add version lock for non-nested middleware

* use path.posix"
4ef4722460291743530252c08e4c0487c1426085,JJ Kasper,2022-08-02 22:09:09+00:00,GitHub,2022-08-02 22:09:09+00:00,"[next] Fix priority for notFound preview routes (#7902)

Fix priority for notFound preview routes"
be5308b1379f5107ff0ac33d872aab47c941db18,Sean Massa,2022-08-02 20:01:42+00:00,GitHub,2022-08-02 20:01:42+00:00,"[dev] log middleware errors in vc dev (#8267)

Middleware server setup wasn't logging errors the same way that dev server setup was. This meant that middleware instantiation errors (like invalid config) would cause requests to 500, but no errors to be logged to the console.

This PR updates the invalid config error, makes sure errors in this area are logged out, and adds a test for this behavior.

**It may be appropriate to fail the deploy (and crash `vc dev`) in this case instead, though. What do others think?**

---

During `vc dev` with middleware that has an invalid `config.matcher` value...

Before: You see a 500 response in the browser and no output in the terminal.

After: You see a 500 response in the browser and this output in the terminal:

```
Error! Middleware's `config.matcher` values must start with ""/"". Received: not-a-valid-matcher
```

---

Related Issue: https://github.com/vercel/edge-functions/issues/220"
08a83a94f8310cfc3cdfeadced9af77c63d20436,Steven,2022-08-02 16:35:36+00:00,GitHub,2022-08-02 16:35:36+00:00,"[docs] Link to Build Output API docs (#8292)

* [docs] Link to Build Output API docs

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
543ffdfe5ccfb59c9c455fc50df3bb8ed1eaf567,Steven,2022-08-02 13:29:15+00:00,Steven,2022-08-02 13:29:15+00:00,"Publish Stable

 - @vercel/build-utils@5.0.8
 - vercel@27.3.4
 - @vercel/client@12.1.7
 - @vercel/fs-detectors@2.0.3
 - @vercel/go@2.0.12
 - @vercel/hydrogen@0.0.9
 - @vercel/next@3.1.12
 - @vercel/node@2.5.3
 - @vercel/python@3.1.4
 - @vercel/redwood@1.0.13
 - @vercel/remix@1.0.14
 - @vercel/ruby@1.3.20
 - @vercel/static-build@1.0.13"
c11527e904e95fd7ca464dd50ce527c56d89857d,Steven,2022-08-01 23:35:24+00:00,GitHub,2022-08-01 23:35:24+00:00,"[build-utils] Fix symlink on download (#8288)

Some builders, such as `@vercel/next`, return both the symlinked directory and the resolved file.

When `vc build` iterates over the files to recreate them in `.vercel/output`, it fails with `EEXIST: file already exists` when creating the symlink because it first creates the file `node_modules/<symlink>/package.json` and then attempts to create the symlink `node_modules/<symlink>`.

This happened to work before `vc build` because yazl would accept the symlinked directory instead of the package.json file, so this PR is created to match that behavior."
d2960643862e04a23f4bc15d07c7db82761646f8,Sean Massa,2022-08-01 19:52:34+00:00,GitHub,2022-08-01 19:52:34+00:00,"[go] remove `meta.isDev` references and restore partial tests (#8287)

Remove `meta.isDev` checks inside the `build` function because it's never set there. Instead, `startDevServer` would be used.

Also restored the Go tests in a partial form. Will fix the Go builder issues and make sure those features are tested completely in follow-up PRs."
400a6c42bddb1528f5ee72b86e3ebe07169e6592,Lee Robinson,2022-08-01 18:48:24+00:00,GitHub,2022-08-01 18:48:24+00:00,[examples] Update Docusaurus 2 template for stable (#8286)
71b3ded39881e3fe40d93e578082b390231c97dd,Seiya Nuta,2022-08-01 12:18:29+00:00,GitHub,2022-08-01 12:18:29+00:00,[fs-detectors] Exclude the middleware builder if it's a Next.js app (#8239)
fc3fa61b593265ae0d1519761142bc79154746b5,Sean Massa,2022-07-29 21:11:37+00:00,GitHub,2022-07-29 21:11:37+00:00,"update edge-runtime to allow `instanceof` to work with primitives (#8242)

* update edge-runtime to allow `instanceof` to work with primitives

* finishin upgrading edge-runtime

* update to latest

* fix merge

* remove dev only from test"
1f98c4fee75eb43bcf79bcb7a8a5f83aa917fb9b,Sean Massa,2022-07-29 19:20:13+00:00,Sean Massa,2022-07-29 19:20:13+00:00,"Publish Stable

 - vercel@27.3.3"
1cb5a9172712f129b54a53bde1ebc0ce0787ae00,Matthew Stanciu,2022-07-29 19:18:55+00:00,GitHub,2022-07-29 19:18:55+00:00,"[cli] Fix env delta message (#8271)

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
e8c7db59cf2746422f1f7e14cc6b7f901c243d50,Sean Massa,2022-07-29 18:45:48+00:00,Sean Massa,2022-07-29 18:45:48+00:00,"Publish Stable

 - @vercel/build-utils@5.0.7
 - vercel@27.3.2
 - @vercel/client@12.1.6
 - @vercel/go@2.0.11
 - @vercel/hydrogen@0.0.8
 - @vercel/next@3.1.11
 - @vercel/node@2.5.2
 - @vercel/python@3.1.3
 - @vercel/redwood@1.0.12
 - @vercel/remix@1.0.13
 - @vercel/ruby@1.3.19
 - @vercel/static-build@1.0.12"
57b230e25f4b14c6b38e4ee38ce600828d59b97d,Steven,2022-07-29 18:44:09+00:00,GitHub,2022-07-29 18:44:09+00:00,[all] Revert ncc back to 0.24.0 (#8276)
ab3fb25790f636cd52b02a3dddb737a4bd914c6b,Steven,2022-07-29 17:19:36+00:00,GitHub,2022-07-29 17:19:36+00:00,"[tests] Run dev e2e against same cli version (#8274)

The dev integration tests compare `vc dev` with a real deployment to make sure the results are the same. This PR ensures the deployment uses the same version of Vercel CLI as the local `vc dev` instance.

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
88d98f74970967dbabe1c08f81292f764babe5e7,Steven,2022-07-29 15:40:09+00:00,GitHub,2022-07-29 15:40:09+00:00,"[cli] Fix `vc build` with legacy `@now/static` (#8273)

There was a special case for `@vercel/static` but vc build was missing a special case for the legacy `@now/static`, which should work the same way."
90c18959498cfa852bc56adffcdd16a8bbcbcce6,Sean Massa,2022-07-28 21:01:36+00:00,Sean Massa,2022-07-28 21:01:36+00:00,"Publish Stable

 - @vercel/build-utils@5.0.6
 - vercel@27.3.1
 - @vercel/client@12.1.5
 - @vercel/fs-detectors@2.0.2
 - @vercel/go@2.0.10
 - @vercel/hydrogen@0.0.7
 - @vercel/next@3.1.10
 - @vercel/node@2.5.1
 - @vercel/python@3.1.2
 - @vercel/redwood@1.0.11
 - @vercel/remix@1.0.12
 - @vercel/ruby@1.3.18
 - @vercel/static-build@1.0.11"
46a1f3670bd257e3c4612e0affc43d277a932099,Steven,2022-07-28 18:59:50+00:00,GitHub,2022-07-28 18:59:50+00:00,"[tests] Remove turbo's `dependsOn` to speed up tests (#8264)

Since CI is already setup to run Build and then Test, we don't need to add it as an explicit turbo dependency so this PR removes `dependsOn: ['build']` from each test task.

In fact, the `test-unit` step doesn't need `build` in most cases now that jest is configured to run the TS sources directly. 

This PR will also improve the time it takes to run the ""Find Changes"" job since it can ask jest for relevant files that changed without waiting for a build. This drops the time down from 2 minutes to 8 seconds."
4b025fee92c45d71bf70098d8786c57a9440c023,Nathan Rajlich,2022-07-28 17:37:35+00:00,GitHub,2022-07-28 17:37:35+00:00,"[node] Consider ""browser"" and ""module"" fields in `package.json` when tracing Edge Functions (#8262)

For Edge Functions, we are now considering the `""browser""` and `""module""` fields of packages to find the proper entrypoint. This PR updates `@vercel/node` to consider those same fields when using the node-file-trace tracing, so that the proper files get included in the output Edge Function."
dc8293dc13da28a04b03b920df29a98517e95c07,Chris Barber,2022-07-28 01:07:14+00:00,GitHub,2022-07-28 01:07:14+00:00,"[cli] Add 'alias' command to help screen and alphabetize commands (#8256)

The `alias` command has been added to the `vercel --help` screen.

### Related Issues

> https://linear.app/vercel/issue/VCCLI-221/alias-command-missing-on-vc-h-help-screen

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
78883dea235898c9fe90594b51012aef4de9680f,Nathan Rajlich,2022-07-27 22:26:40+00:00,GitHub,2022-07-27 22:26:40+00:00,"[node] Remove `.toString()` in nft `readFile()` hook (#8263)

The nft `readFile()` hook accepts `Buffer` type so there's no reason to `.toString()` here."
b5b792e42f0ef4bfe2fdad894c211294d41d40aa,Steven,2022-07-27 21:56:03+00:00,GitHub,2022-07-27 21:56:03+00:00,"[tests] Update tests to run with vercel cli tarball (#8257)

This PR update the tests suite to wait for Vercel CLI tarball and then use that tarball to run E2E tests.

This is valuable because it will package all the packages in this monorepo to make the tests follow more closely what will happen in production once merged.

Since the current ""Find Changes"" step takes about 2 minutes, we run that first (it happens concurrently with the tarball preparation). Then once we complete ""Find Changes"" we wait for the tarball but it will likely be ready by that point since it also takes about 2 minutes. After both of those steps, the E2E tests continue as usual but with the `VERCEL_CLI_VERSION` set to the tarball.

- Related to #7967 
- Closes #8245 
- Closes #8227"
8993a3c4afc217516812563e77530129eb962fc8,Sean Massa,2022-07-27 20:15:00+00:00,GitHub,2022-07-27 20:15:00+00:00,"[node] trim down values to only what is required for esbuild wrapping logic (#8260)

The edge runtime context we were providing was necessary to  have `ncc`-bundled code run, but after switching to `esbuild`, we didn't update this list.

This PR trims the values down to only what's necessary for `esbuild`-bundled code to run. It also adds comments about why these values are necessary."
57241aad8166fe9bc595049d83bca1ddde06de62,Steven,2022-07-27 19:41:48+00:00,GitHub,2022-07-27 19:41:48+00:00,"[tests] Speed up vc tarball (#8261)

This updates the API that generates tarballs so that it doesn't need to generate tarballs for every Serverless Function and instead generates it one time. This cuts the time in half."
4773ff5efd84a6dbf698c6f1f0a08718110ffa2d,Sean Massa,2022-07-27 18:33:34+00:00,Sean Massa,2022-07-27 18:33:34+00:00,"Publish Stable

 - @vercel/build-utils@5.0.5
 - vercel@27.3.0
 - @vercel/client@12.1.4
 - @vercel/go@2.0.9
 - @vercel/hydrogen@0.0.6
 - @vercel/next@3.1.9
 - @vercel/node@2.5.0
 - @vercel/python@3.1.1
 - @vercel/redwood@1.0.10
 - @vercel/remix@1.0.11
 - @vercel/ruby@1.3.17
 - @vercel/static-build@1.0.10"
d8c7308eb6ac5b19661d313684b02584a8b7898b,Gal Schlezinger,2022-07-27 18:17:32+00:00,GitHub,2022-07-27 18:17:32+00:00,"[node] Add WebAssembly importing support for the @vercel/node builder (#8204)

* [node] Add WebAssembly importing support for the @vercel/node builder

* add comment about the original source

* trim down values to only what is required for esbuild wrapping logic

* Revert ""trim down values to only what is required for esbuild wrapping logic""

This reverts commit c04dacad99f25156938dccdf2f29aac6e8282564.

Co-authored-by: Sean Massa <EndangeredMassa@gmail.com>"
5df1c891385e7eb9857dea0e8b609eaf2344304f,Steven,2022-07-27 02:51:43+00:00,GitHub,2022-07-27 02:51:43+00:00,"[tests] Fix next runtime test (#8258)

This test fails with `vc build`"
f5d879143c5da37158a6f207aa298b55b62777e5,Ethan Arrowood,2022-07-26 22:04:25+00:00,GitHub,2022-07-26 22:04:25+00:00,"[static-build] Add .vercel to static-build ignore list regardless of config (#8255)

### Related Issues

Adds `.vercel` path to the ignore list regardless if `zeroConfig` is enabled. This fixes a bug where the `.vercel` folder was being copied into the resulting `.vercel/output/static` directory after running `vc build` with `distDir: "".""` configured for static-build.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
9a558095157d98a0b629fee85e13d78d15238d54,Matthew Stanciu,2022-07-26 18:15:38+00:00,GitHub,2022-07-26 18:15:38+00:00,"[cli] Minor `vc inspect` visual updates (#8160)

Featuring:

- Aliases are now shown
- `readyState` > `status` in ""General"" section
- `createdAt` > `created` in ""General"" section
- Update `stateString` to support more states & be more visually appealing

### Before

<img width=""754"" alt=""Screen Shot 2022-07-14 at 3 10 40 PM"" src=""https://user-images.githubusercontent.com/14811170/179097164-df7acd8a-d677-4e75-b7d5-b8ec6cf9bb12.png"">

### After

<img width=""748"" alt=""Screen Shot 2022-07-14 at 3 10 29 PM"" src=""https://user-images.githubusercontent.com/14811170/179097170-137d8977-60d6-402d-825e-8b0fb3025969.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
56adf158233ea460b52738720939745244185839,Nathan Rajlich,2022-07-26 08:24:01+00:00,GitHub,2022-07-26 08:24:01+00:00,"[all] Update `@vercel/ncc` to v0.34.0 (#8248)

The version of `@vercel/ncc` that was being used in this repo is rather old. Let's update to the latest version. Specifically, this is a baby step towards allowing CLI to become ESM format."
1acab3d06c6c1b840da8e234f869f67437a53e99,Steven,2022-07-26 00:06:59+00:00,GitHub,2022-07-26 00:06:59+00:00,"[tests] Update node tests to run concurrently (#8247)

This applies the same chunking algorithm from `@vercel/static-build` tests to `@vercel/node` tests that we can run up to 5 integration tests concurrently."
081b38466b561fd4fbb3e7abf8dbbafcd4a203ef,Nathan Rajlich,2022-07-25 23:08:14+00:00,GitHub,2022-07-25 23:08:14+00:00,[cli] Update to TypeScript v4.7.4 (#8232)
c397fd18562ae5759cf5510dee9f392add0d0f18,Nathan Rajlich,2022-07-25 23:04:49+00:00,GitHub,2022-07-25 23:04:49+00:00,"[cli] Apply `functions` configuration to Serverless Functions in ""vc build"" (#8243)"
afd303b94a3201c9bb6e11fe7d2c6f5825b4cb47,Steven,2022-07-25 21:14:33+00:00,GitHub,2022-07-25 21:14:33+00:00,"[tests] Fix turbo cache for test changes (#8246)

When we make changes in `test/lib/**`, it should run all the E2E tests again for every package.

https://turborepo.org/docs/reference/configuration"
b12387034a4fc6c545a95f14896cf83aa6b41460,Ethan Arrowood,2022-07-25 19:27:12+00:00,GitHub,2022-07-25 19:27:12+00:00,"[cli] fix zero config resolution in `vc build` (#8244)

### Related Issues

Adds a `isZeroConfig` check to static-build so that when `""zeroConfig"": true` is enabled the correct settings are resolved.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5af65d5a2438ac6170f9a5e96c1744ffec9a9a75,Steven,2022-07-25 17:40:21+00:00,GitHub,2022-07-25 17:40:21+00:00,"Revert ""[python] support Sanic >=21 and python >= 3.10"" (#8241)

- Reverts vercel/vercel#8045
- Fixes vercel/vercel#8231"
1ee9a96a62735d576123db1a78fc6d3cb00f670f,Steven,2022-07-25 16:29:24+00:00,GitHub,2022-07-25 16:29:24+00:00,"[build-utils] Fix package.json and lockfile detection (#8230)

This PR fixes a couple issues where `vercel build` was not correctly detecting the package.json files

```
Error: @vercel/node:test: ERROR: frontend/index.ts(1,12): error TS2580: Cannot find name 'require'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
```

It also fixes an issue where all deployments were incorrectly detecting the lock file because the lock file doesn't always live in the same directory as the package.json file. So we need to do 2 passes: one to find the nearest package.json and one to find the nearest lock file."
76130faf2638024e2551a9dd8a0e70ffabf141a3,Nathan Rajlich,2022-07-24 05:08:13+00:00,GitHub,2022-07-24 05:08:13+00:00,"[cli] Do not load `.env` in ""vercel build"" command (#8228)

Only consider the `.vercel/.env.${target}.local` file when loading env vars at the beginning of `vercel build`.

If a project-level `.env` (or `.env.production` or whatever) file needs to be loaded then it is the responsibility of the frontend framework's build command to consider those files (i.e. CRA build, `next build`, etc.)"
fb3601d1782da6eabf0071872bd98925e01d077d,Nathan Rajlich,2022-07-22 22:39:10+00:00,GitHub,2022-07-22 22:39:10+00:00,"[cli] Add ""dev"" script, remove ""build-dev"" script (#8222)

I don't think anyone is using this command anymore in the world of M1.

Anyways, we should be using `ts-node` to execute the CLI from source code instead of skipping steps at build-time to iterate quickly."
aebfb6812d8c70f241b8ad87ab5b4746761137cc,Steven,2022-07-22 22:08:51+00:00,GitHub,2022-07-22 22:08:51+00:00,"[cli][build-utils] Fix dependencies for `boxen` (#8210)

The `boxen` package was incorrectly listed as a dependency of build-utils so I moved it to cli, which is only used by the [`vercel bisect`](https://github.com/vercel/vercel/blob/3d3774ee7e3d344b3292d2166d485bdf41a68d4c/packages/cli/src/commands/bisect/index.ts#L2) command."
73999e7253bbec9fdb1675a874f27e3253657b54,Matthew Stanciu,2022-07-22 19:16:56+00:00,GitHub,2022-07-22 19:16:56+00:00,"[cli] Log delta in `vc env pull` (#8170)

This PR adds a new message to the end of `vc env pull` which shows delta of what was added, changed, and removed.

Example: you have a local `.env` file in a directory linked to a Vercel project. You change `TEST_1`, remove `TEST_2` via `vc env rm TEST_2`, and add `TEST_3` via `vc env add`. Then you run `vc env pull`. Here's what you will see:

```
> Updating existing .env file
> Downloading `development` Environment Variables for Project name
  Updated .env file

+ TEST_3
~ TEST_1
- TEST_2
```

<img width=""562"" alt=""Screen Shot 2022-07-20 at 11 09 56 AM"" src=""https://user-images.githubusercontent.com/14811170/180064534-2ff5facb-95cb-4712-aaad-cbb47490cebe.png"">

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
989dad557053127a522e87ffc9c5013aad2dbce7,Nathan Rajlich,2022-07-22 17:53:15+00:00,GitHub,2022-07-22 17:53:15+00:00,"[cli] Use `ts-node` with SWC instead of `ts-eager` (#8224)

`ts-eager` isn't really maintained anymore and doesn't support ESM packages.

`ts-node` with SWC is more or less just as fast, so let's use that instead since it's well maintained any we can dogfood SWC more."
68c2dea601df6d6c6b47d72a4b0cd1986d19603a,Nathan Rajlich,2022-07-22 17:23:29+00:00,GitHub,2022-07-22 17:23:29+00:00,"[cli] Add support for Vercel Analytics in ""vercel build"" command (#8220)

Pull the Vercel Analytics ID in the `vercel pull` command, so that `vercel build` can set the `VERCEL_ANALYTICS_ID` environment variable at build-time for the frontend framework to utilize."
63f2da2f68b0710eb851b763655eb67cbb81936d,JJ Kasper,2022-07-22 15:05:53+00:00,GitHub,2022-07-22 15:05:53+00:00,"[next] Update size limit test (#8226)

This test is failing due to a decrease in the server layer so it is no longer over the limit as expected so this adds some more data to the specific route to ensure it does hit the limit. 

Fixes: https://github.com/vercel/vercel/runs/7469021922?check_suite_focus=true#step:9:6800"
57e5f81361d4b38d0687a1e00a75d0959ca05ea4,,2022-07-22 13:07:29+00:00,GitHub,2022-07-22 13:07:29+00:00,"[docs] Fix CONTRIBUTING file local development guideline, change dir after git clone (#8225)

Update CONTRIBUTING.md"
fd5e44053375fd83cdce5a3832d5400a7ba0dc8e,Mosaad,2022-07-22 12:44:48+00:00,GitHub,2022-07-22 12:44:48+00:00,"[next] Fix error message typo (#8218)

User the correct indefinite articles.

Co-authored-by: Steven <steven@ceriously.com>"
2a45805b26b2314c208f7bbea80a43c911435a38,Sean Massa,2022-07-22 08:52:28+00:00,GitHub,2022-07-22 08:52:28+00:00,"[tests] increase timeout for test that's failing on windows (#8221)

This test sometimes times out on Windows. When it succeeds, it takes ~6 seconds. When it fails, we don't know how long it would have taken, but the current timeout is 7 seconds. Let's try 10 seconds and see if that's better."
5523383e501326ffb1502ad0d188e1075fee1925,Nathan Rajlich,2022-07-22 07:31:52+00:00,GitHub,2022-07-22 07:31:52+00:00,"[cli] Prevent `vc deploy --prebuilt` when `vc build` failed (#8194)

If `vc build` failed then don't allow a deployment to be created with `vc deploy --prebuilt`."
0ecbb24cab2973022fd1a47de194c2bdb0c1c586,Sean Massa,2022-07-22 06:14:59+00:00,GitHub,2022-07-22 06:14:59+00:00,"[utils] allow a github PAT token to get past rate limit (#8209)

If you run `yarn changelog` when your IP is already rate limited by github, you'll get an error. This allows you to set a [Github PAT](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token) to get past the generic rate limit.

Given a PAT with value `MY_PAT_TOKEN`, you can run:

```
$ GITHUB_TOKEN=MY_PAT_TOKEN yarn changelog
```

If you do get an error, it now actually shows up in the output:

```
$  yarn changelog
yarn run v1.22.18
$ node utils/changelog.js
Error: Failed to fetch releases from github: API rate limit exceeded for 98.139.180.149. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.)
```"
922223bd19704c130dc332f2b486cad03f4c27de,Nathan Rajlich,2022-07-22 04:02:26+00:00,GitHub,2022-07-22 04:02:26+00:00,"[cli] Lazy-load ""metrics"" object to fix jest reporting open handle (#7866)

Jest was saying that there's an open handle in the unit tests due to the `crypto.pbkdf2Sync()` call in this metrics file, so lazy-load that object in the case when metrics should not be collected."
0ad7fd34f416773223faf1a79084227f3f679733,JJ Kasper,2022-07-22 00:45:53+00:00,GitHub,2022-07-22 00:45:53+00:00,"[next][node][redwood][remix] Update `@vercel/nft` to 0.21.0 (#8208)

### Related Issues

Updates to the latest version of `@vercel/nft` which adds fs concurrency limits to help alleviate memory usage. 

x-ref: https://github.com/vercel/nft/pull/301

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
3d3774ee7e3d344b3292d2166d485bdf41a68d4c,Sean Massa,2022-07-21 20:03:11+00:00,Sean Massa,2022-07-21 20:03:11+00:00,"Publish Stable

 - @vercel/build-utils@5.0.4
 - vercel@27.2.0
 - @vercel/client@12.1.3
 - @vercel/go@2.0.8
 - @vercel/hydrogen@0.0.5
 - @vercel/next@3.1.8
 - @vercel/node@2.4.5
 - @vercel/python@3.1.0
 - @vercel/redwood@1.0.9
 - @vercel/remix@1.0.10
 - @vercel/ruby@1.3.16
 - @vercel/static-build@1.0.9"
50f8eec7cbebe6b413f31a8b4e5de411d781248e,Sean Massa,2022-07-21 17:53:52+00:00,GitHub,2022-07-21 17:53:52+00:00,"[cli][dev] support environment variables in edge functions during `vc dev` (#8207)

Edge Function support in `vc dev` was not passing through the environment variables, which is supported by [production Edge Functions](https://vercel.com/docs/concepts/functions/edge-functions/edge-functions-api#environment-variables).

This PR passes those through. I updated a test for it and manually tested on a separate project."
45374e2f908d472d67501f11758a1d3498db5c46,Sean Massa,2022-07-21 15:45:29+00:00,GitHub,2022-07-21 15:45:29+00:00,"[cli] improve `isBundledBuilder` logic (#8086)

The logic that determines if a builder needs to be installed has a check to see if the builder should already be bundled: `isBundledBuilder`. This was looking for specific conditions that made it (1) a bit hard to follow and (2) very sensitive to `canary` tags (and having ""canary"" in the version specifier).

This causes general development problems because local changes weren't always used by local CLI builds. Depedendant packages (like `@vercel/node`) would be installed from the latest `canary` release instead.

This caused problems in CI and released CLI versions where the latest `canary` of dependant packages might be rather old, causing that old code to be used instead of the latest non-canary releases.

The issue was mitigated for now by publishing canary releases for all packages.

---

Paired with @styfle @MatthewStanciu.

@TooTallNate: Is this change too broad? Are there cases where we wouldn't want to do this?"
fd9142b6f301625b14730e70b98e5bd3eb15bf0c,Steven,2022-07-21 00:00:03+00:00,GitHub,2022-07-21 00:00:03+00:00,"[cli] Bump `@vercel/fun` to 1.0.4 (#8198)

Bump `@vercel/fun` to [1.0.4](https://github.com/vercel/fun/releases/tag/1.0.4)"
8cf67b549b5d0cbba9fa6e949ea333e878c3ebd6,JJ Kasper,2022-07-20 23:06:44+00:00,GitHub,2022-07-20 23:06:44+00:00,"[next] Ensure manifests are specific to the included pages (#8172)

### Related Issues

This updates to filter the `routes-manifest` and `pages-manifest` to only include entries for the pages that are being included in the specific serverless function. This fixes the case where multiple dynamic routes could match a path but one is configured with `fallback: false` so shouldn't match when executing for a different dynamic route. 

A regression test for this specific scenario has been added in the `00-mixed-dynamic-routes` fixture. 

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5dc6f48e442836a53a88fe82b82be47d90b5ee0b,Sean Massa,2022-07-20 20:09:29+00:00,GitHub,2022-07-20 20:09:29+00:00,"[cli][dev] handle no response from edge functions (#8095)

When an edge function has no response during `vc dev`, we were seeing an unhelpful error message:

> The event listener did not respond.

Now, we'll see a much more specific error message:

> Unhandled rejection: Edge Function ""api/edge-no-response.ts"" did not return a response.
> Error! Failed to complete request to /api/edge-no-response: Error: socket hang up"
66c8544e8fb7b8eb77106d8b428ef6736b9ecb45,Kevin Tan,2022-07-20 13:50:53+00:00,GitHub,2022-07-20 13:50:53+00:00,"[python] support Sanic >=21 and python >= 3.10 (#8045)

### Related Issues

1. exception from python 3.10:
```
TypeError: As of 3.10, the *loop* parameter was removed from Queue() since it is no longer necessary`
```

Remove the deprecated argument `loop` from `Queue`, which can also be omitted in python version < 3.10

2. exception from Sanic > 21.3:
```
File ""C:\Users\Kevin\AppData\Local\Temp\zeit-fun-03f18b2d2c7d7\sanic\signals.py"", line 93, in get
    group, param_basket = self.find_route(
TypeError: 'NoneType' object is not callable
```
As of Sanic > 21.3, it cannot serve requests immediately after initializing, instead, we need implement the [ASGI lifespan protocol](https://asgi.readthedocs.io/en/latest/specs/lifespan.html) and wait for the startup event completed.  

here I complemented the protocol copied from (same source of the previous HTTP procotol): <https://github.com/jordaneremieff/mangum/blob/main/mangum/protocols/lifespan.py>


### Related link:
https://github.com/encode/uvicorn/pull/498

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR


Co-authored-by: Steven <steven@ceriously.com>"
0140db38fab39f4f4cb18d22271b42c6b5a4a46a,Matthew Stanciu,2022-07-20 07:17:53+00:00,GitHub,2022-07-20 07:17:53+00:00,"[cli] Support multiple remote URLs in Git config (#8145)

Two features that handle a user's local Git config have been shipped:

- #8100 
- #7910 

Both of these features currently pull only from the user's remote origin URL. This covers 90% of cases, but there are cases in which the user has more than one remote URL, and may want to use one other than the origin URL, especially in `vc git connect`. This PR:

- Adds support for multiple remote URLs in a user's Git config
- Updates `vc git connect` to prompt the user to select a URL if they have multiple remote URLs
- Updates `createGitMeta` to send the connected Git repository url by default, origin url otherwise

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e5421c27e88ec72a00fd080683b60723a8b472cb,Chris Barber,2022-07-19 22:15:09+00:00,GitHub,2022-07-19 22:15:09+00:00,"[cli][client][build-utils][node][static-build] updated node-fetch to fix high severity security vulnerability (#8180)

Update `node-fetch 2.6.1 -> 2.6.7` to fix high severity security vulnerability: Exposure of Sensitive Information to an Unauthorized Actor (https://github.com/advisories/GHSA-r683-j2x4-v87g).

`node-fetch` was updated in the root, `api`, `build-utils`, `cli`, `client`, `node`, and `static-build`.

### Related Issues

> https://linear.app/vercel/issue/VCCLI-196/update-vercelnode-dep-node-fetch-261-267

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5afc527233d962f1b116236038f152b48a647393,Matthew Stanciu,2022-07-19 20:02:13+00:00,GitHub,2022-07-19 20:02:13+00:00,"[cli] Add `--environment` flag to `vc env pull` (#8162)

Right now, `vc env pull` only pulls development environment variables. This PR adds a new flag, `--environment,` which allows users to specify which environment to pull from.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
de9518b01031a171607730e7833a28f2f26dfab0,Nathan Rajlich,2022-07-19 19:30:17+00:00,GitHub,2022-07-19 19:30:17+00:00,"[cli] Write top-level error to `builds.json` file in ""vc build"" (#8193)

If an error happens outside of a Builder (i.e. `detectBuilders()` function fails), then write the serialized error into the `builds.json` file at the top-level of the file (there is no `builds[]` when an error happens at the top-level)."
c322d1dbba036a2a760d717b06195db8b813e41d,Nathan Rajlich,2022-07-19 18:52:33+00:00,GitHub,2022-07-19 18:52:33+00:00,"[cli] Set `ignoreBuildScript: true` option in ""vc build"" command (#8184)

This matches the behavior in production and prevents the error:

```
> Error! Your `package.json` file is missing a `build` property inside the `scripts` property.
```"
18c19ead76e55f44eba6e80b14cb86055fb47547,Steven,2022-07-19 17:43:20+00:00,GitHub,2022-07-19 17:43:20+00:00,"[tests] Upgrade python tests to 3.9 (#8181)

New python 3.6 deployments will fail today per the previous announcement https://vercel.com/changelog/python-3-6-is-being-deprecated

This PR updates the tests to use python 3.9 instead."
9d80c27382776042530e87784e3e2c57e3a35486,Steven,2022-07-18 14:40:09+00:00,GitHub,2022-07-18 14:40:09+00:00,"[cli] Print full error when unknown/unexpected (#8059)

If we dont know the error, we should not assume it has a stack prop and instead print the whole thing to avoid accidentally printing `undefined`. 

- related to https://github.com/vercel/vercel/discussions/8043"
bef1aec76609ae661f084dcc391edd66f891f0b4,Steven,2022-07-15 19:40:37+00:00,Steven,2022-07-15 19:40:37+00:00,"Publish Stable

 - @vercel/build-utils@5.0.3
 - vercel@27.1.5
 - @vercel/client@12.1.2
 - @vercel/frameworks@1.1.1
 - @vercel/fs-detectors@2.0.1
 - @vercel/go@2.0.7
 - @vercel/hydrogen@0.0.4
 - @vercel/next@3.1.7
 - @vercel/node@2.4.4
 - @vercel/python@3.0.7
 - @vercel/redwood@1.0.8
 - @vercel/remix@1.0.9
 - @vercel/routing-utils@2.0.0
 - @vercel/ruby@1.3.15
 - @vercel/static-build@1.0.8"
4f4a42813f7a94b560c955df5b2f9831f96c663c,Steven,2022-07-15 19:38:38+00:00,GitHub,2022-07-15 19:38:38+00:00,"[build-utils][node][python][ruby] Update error message for EOL runtimes (#8167)

This PR updates the error message when the runtime version detected is EOL"
181a492d912b4c11970f824afc43638519a5ef7f,Steven,2022-07-15 18:05:08+00:00,GitHub,2022-07-15 18:05:08+00:00,"[routing-utils] MAJOR refactor getTransformedRoutes and types (#8155)

This is a semver major change to the public API for `@vercel/routing-utils` which includes the following breaking changes.

1. `getTransformedRoutes({ nowConfig })` props changed to `getTransformedRoutes(nowConfig)`
2. `type Source` renamed `type RouteWithSrc`
3. `type Handler` renamed `type RouteWithHandle`
4. `interface VercelConfig` removed
5. `type NowConfig` removed
6. `type NowRewrite` removed
7. `type NowRedirect` removed
8. `type NowHeader` removed
9. `type NowHeaderKeyValue` removed"
1be7a80bb8688cd3567fd1f2dacf9ab4b8c4149e,Sean Massa,2022-07-15 16:20:56+00:00,Sean Massa,2022-07-15 16:20:56+00:00,"Publish Stable

 - vercel@27.1.4
 - @vercel/next@3.1.6"
0428d4744e8aacea32b406c15ef76a9af0c34ebc,Sean Massa,2022-07-15 16:16:31+00:00,GitHub,2022-07-15 16:16:31+00:00,"[cli] write config.json when exiting because of error in builder (#8163)

Co-authored-by: Steven <steven@ceriously.com>"
2a929a4bb906d08158a09d8a954993790f4ac175,JJ Kasper,2022-07-15 15:37:05+00:00,GitHub,2022-07-15 15:37:05+00:00,"[next] Update allowQuery for prerendered paths (#8158)

This updates our `allowQuery` generating to ignore all query values for build-time prerender paths as these will match before dynamic routes since they are filesystem routes and the query values will not be overridden properly like they are for fallback prerender paths. This also adds testing for both prerender path types with on-demand ISR to ensure the cache is updated as expected regardless of the query.  

Deployment with patch can be seen here https://nextjs-issue-odr-simple-hrjt2dagm-ijjk-testing.vercel.app/

### Related Issues

x-ref: https://github.com/vercel/next.js/issues/38306
x-ref: https://github.com/vercel/next.js/issues/38653"
accd308dc569bc6b71b8793aa39288d42da475b6,JJ Kasper,2022-07-15 02:16:51+00:00,GitHub,2022-07-15 02:16:51+00:00,"[tests] Update log for update-canary-tag script (#8156)

### Related Issues

Noticed this log was not being converted to a string so we're losing some context so this corrects in case we have a failure on this step in the future. 

Fixes: https://github.com/vercel/vercel/runs/7344626478?check_suite_focus=true#step:8:258

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e2d4efab08e15a9f9177672e1591ba92ba1b7090,Sean Massa,2022-07-14 17:04:05+00:00,Sean Massa,2022-07-14 17:04:05+00:00,"Publish Stable

 - vercel@27.1.3"
7e0dd6f8087b574b09d796c5660e80df6e25afaa,JJ Kasper,2022-07-14 12:41:28+00:00,GitHub,2022-07-14 12:41:28+00:00,"[tests] Update to latest version of turbo (#8152)

### Related Issues

Updates to latest turbo which includes patches for cached files. 

x-ref: [slack thread](https://vercel.slack.com/archives/C02CDC2ALJH/p1657767763630359?thread_ts=1657757803.039099&cid=C02CDC2ALJH)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
8971e02e49a374a30365ba70d8e71dda4a5fab79,Nathan Rajlich,2022-07-14 07:58:20+00:00,GitHub,2022-07-14 07:58:20+00:00,"[cli] Normalize output file paths in `vercel build` (#8149)

When a Builder returns an output asset that contains irregular slashes (multiple slashes or leading/trailing slashes), then have them be removed from the file path before creating the output asset.

This fixes an edge case where `@vercel/next` could end up outputting a Serverless Function with a trailing slash (i.e. `en-US/`). Before this PR, that would be serialized to the filesystem at `en-US/.func`, but after this fix it's saved in the correct `en-US.func` directory."
10c91c85790a0f7b74fb7ee44926f0905193e65c,Nathan Rajlich,2022-07-14 01:05:00+00:00,GitHub,2022-07-14 01:05:00+00:00,"[cli] Store build error in ""builds.json"" file in `vc build` (#8148)

When a build fails, store the serialized Error in the ""builds.json"" file under the ""build"" object of the Builder that failed.

Example:

```json
{
  ""//"": ""This file was generated by the `vercel build` command. It is not part of the Build Output API."",
  ""target"": ""preview"",
  ""argv"": [
    ""/usr/local/bin/node"",
    ""/Users/nrajlich/Code/vercel/vercel/packages/cli/src/index.ts"",
    ""build"",
    ""--cwd"",
    ""/Users/nrajlich/Downloads/vc-build-next-repro/""
  ],
  ""builds"": [
    {
      ""require"": ""@vercel/next"",
      ""requirePath"": ""/Users/nrajlich/Code/vercel/vercel/packages/next/dist/index"",
      ""apiVersion"": 2,
      ""src"": ""package.json"",
      ""use"": ""@vercel/next"",
      ""config"": {
        ""zeroConfig"": true,
        ""framework"": ""nextjs""
      },
      ""error"": {
        ""name"": ""Error"",
        ""message"": ""Command \""pnpm run build\"" exited with 1"",
        ""stack"": ""Error: Command \""pnpm run build\"" exited with 1\n    at ChildProcess.<anonymous> (/Users/nrajlich/Code/vercel/vercel/packages/build-utils/dist/index.js:20591:20)\n    at ChildProcess.emit (node:events:527:28)\n    at ChildProcess.emit (node:domain:475:12)\n    at maybeClose (node:internal/child_process:1092:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:302:5)"",
        ""hideStackTrace"": true,
        ""code"": ""BUILD_UTILS_SPAWN_1""
      }
    }
  ]
}
```"
bfdbe586757a8870eae36cbf39e17889dd8f747a,Nathan Rajlich,2022-07-13 20:51:02+00:00,Nathan Rajlich,2022-07-13 20:51:02+00:00,"Publish Stable

 - vercel@27.1.2
 - @vercel/static-build@1.0.7"
7bdaf107b72107caffc869f520af93faa8a56005,Matthew Stanciu,2022-07-13 20:32:21+00:00,GitHub,2022-07-13 20:32:21+00:00,"[cli] Consume `--no-clipboard` (#8147)

#8085 removed the clipboard copy feature in `vc deploy`, along with the `--no-clipboard` flag. Right now, the CLI exits and returns an error when someone includes the `--no-clipboard` flag. This PR instead consumes the flag and warns the user that the flag is deprecated.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
8de100f0e1155a651542fe56bdf3c9b6522dab2f,Nathan Rajlich,2022-07-13 18:17:53+00:00,GitHub,2022-07-13 18:17:53+00:00,"[static-build] Return BOA v3 result without `vercel build` (#8146)

This will allow Build Output API v3 to be produced by a build script without the `ENABLE_VC_BUILD=1` env var being necessary."
38a67858595897b54299500d432071a98a8f153a,Steven,2022-07-13 16:00:03+00:00,Steven,2022-07-13 16:00:03+00:00,"Publish Stable

 - vercel@27.1.1"
c67d1a8525df916932181d6cc3e60a2acd83785e,Steven,2022-07-13 15:58:56+00:00,GitHub,2022-07-13 15:58:56+00:00,"[cli] Fix `vercel build` sort order (#8144)

- Fixes #8063"
c5a7c574a29b9cae6af63ddad46ef255ddffeb35,Matthew Stanciu,2022-07-12 21:35:27+00:00,GitHub,2022-07-12 21:35:27+00:00,"[tests] Add missing function import in Project mock (#8143)

A function `formatProvider` wasn't imported in the `Project` mock endpoint. This wasn't caught before #8100 was merged, and dodged CI.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
d2f8d178f77e15cb490cce73f5766537d892f763,Sean Massa,2022-07-12 20:34:28+00:00,Sean Massa,2022-07-12 20:34:28+00:00,"Publish Stable

 - @vercel/build-utils@5.0.2
 - vercel@27.1.0
 - @vercel/client@12.1.1
 - @vercel/fs-detectors@2.0.0
 - @vercel/go@2.0.6
 - @vercel/hydrogen@0.0.3
 - @vercel/next@3.1.5
 - @vercel/node@2.4.3
 - @vercel/python@3.0.6
 - @vercel/redwood@1.0.7
 - @vercel/remix@1.0.8
 - @vercel/ruby@1.3.14
 - @vercel/static-build@1.0.6"
f9a747764c294addcc3e54f520b4ae687af40246,Nathan Rajlich,2022-07-12 20:10:51+00:00,GitHub,2022-07-12 20:10:51+00:00,"[remix] Fix `isMonorepo` check (#8142)

`config.projectSettings` is not available when running `@vercel/remix` directly (i.e. when not using `vc build`), so calculate the correct root directory value based on the `workPath` relative to the `repoRootPath` value."
27d80f13cd8dba0dd121dc963434ea6a9a699935,Matthew Stanciu,2022-07-12 17:55:40+00:00,GitHub,2022-07-12 17:55:40+00:00,"[cli] Add ability to connect Git provider repo (#8100)

This PR adds a new subcommand `vc git`, which allows you to create a Git provider repository from your local `.git` config to your Vercel project.

Usage:

- `vc git connect`  connects a Git provider repository
- `vc git disconnect`  disconnects a Git provider repository

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
8c668c925df102bbd2bdb37f266156d56b194297,Nathan Rajlich,2022-07-12 17:03:00+00:00,GitHub,2022-07-12 17:03:00+00:00,"[fs-detectors] Remove ""solidstart"" framework from FS API v2 detection (#8134)

""solidstart"" framework doesn't need to use the FS API v2 Builder anymore since:

  1) Newer versions output Build Output API v3
  2) Older versions that output FS API v2 will be handled by the compatbility shim that was added in https://github.com/vercel/vercel/pull/7690"
4b1b33c1430b0d76fb65565708b2bfa12e2eec5a,Nathan Rajlich,2022-07-12 08:12:32+00:00,GitHub,2022-07-12 08:12:32+00:00,"[cli] Add `createdAt` to project settings in `vc pull` (#8138)

The `createdAt` property is checked in the `detectBuilders()` function, so it needs to be present in the local copy of the project settings."
a8d414755454eaa50e031b8067bc43dadfc72726,Gal Schlezinger,2022-07-12 06:33:14+00:00,GitHub,2022-07-12 06:33:14+00:00,"[next] Add EdgeRuntime provider environment variable to the builder (#8130)

This will enable Next.js to compile and set `vercel` as the edge runtime provider (`EdgeRuntime` global),
which can allow different libraries/customers to have different code running depends on the runtime environment (`edge-runtime` vs `vercel`).

### Related Issues

- https://github.com/vercel/next.js/pull/38331

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

The Next.js feature was not merged yet, so it still can't be tested.

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
09339f494d0f709f980722c71b329b68bbcd66e8,Gal Schlezinger,2022-07-11 23:13:21+00:00,GitHub,2022-07-11 23:13:21+00:00,"[next][build-utils] allow to declare assets in EdgeFunction constructor (#8127)

There's a [Next.js PR](https://github.com/vercel/next.js/pull/38492) to include binary assets in Edge Functions. This PR enables to declare assets in the `EdgeFunction` constructor.

This is a configuration level setting, compared to WebAssembly modules which the `middleware-manifest.json` converts into `import` statements. This is because the asset generation is done in Webpack and it is not dynamic, it's a static string. We can use AST to replace it but we're risking in:

* worse performance
* accidentally replacing a string that isn't an asset"
ee4d772ae923855fb9a452f698bfd422751d03d4,Steven,2022-07-11 21:39:10+00:00,GitHub,2022-07-11 21:39:10+00:00,"[tests] Add retry to npm tests (#8133)

These tests fail occasionally on GH Actions due to flakey network IO, so this PR adds retry logic.

https://github.com/vercel/vercel/runs/7289659634?check_suite_focus=true#step:13:328"
61e810340445c709163a7b3215a8c8a64fdd8d91,Matthew Stanciu,2022-07-11 21:01:16+00:00,GitHub,2022-07-11 21:01:16+00:00,"[tests] Fix flaky Git meta test (#8132)

A test I wrote for a previous PR (https://github.com/vercel/vercel/pull/8112) was failing once in ~every 5 runs. This PR makes the test reliable.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
fb4f4773253a6307e385ea582a94b1aa85781dc9,Steven,2022-07-11 20:21:30+00:00,Steven,2022-07-11 20:21:30+00:00,"Publish Stable

 - vercel@27.0.2
 - @vercel/fs-detectors@1.0.2
 - @vercel/node@2.4.2"
016bff848e829aad67de7b1bc071770f39780ce2,P.B. To,2022-07-11 20:16:04+00:00,GitHub,2022-07-11 20:16:04+00:00,"[fs-detectors] process detectFramework in parallel (#8128)

The Vercel API's `detect-framework` API contacts GitHub's API using its own file adapter. 

However, currently the `detectFramework` function in the Vercel CLI (on which the API depends) calls the file system adapter in series using a `for` loop. This results in large amounts of lag when in a networked situation such as calling GitHub's API as each API call takes a couple hundred milliseconds.

I propose changing `detectFramework` to process the directories it scans in parallel.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
183e411f7c51ce22a03f2eb355a531ef3c3770bb,Steven,2022-07-11 19:31:04+00:00,GitHub,2022-07-11 19:31:04+00:00,"[cli] Remove `DEBUG=corepack` env var (#8131)

This debug log was originally added in #7871 because corepack has no output by default. In particular, it was nice to see the first deployment was not stalled when the package manager is being installed.

That being said, this gets noisy really fast because cache detections also print a log line.
For example, here's a deployment that prints 3 times:

```
Detected ENABLE_EXPERIMENTAL_COREPACK=1 and ""npm@8.10.0"" in package.json
Running ""install"" command: `npm install --prefix=.. --no-audit --engine-strict=false`...
2022-07-11T18:27:00.696Z corepack Reusing npm@8.10.0
356 packages are looking for funding
Running ""npm run vercel-build""
2022-07-11T18:27:06.664Z corepack Reusing npm@8.10.0
> front@0.0.0 vercel-build
> npm run buildonly && npm run build:rss
2022-07-11T18:27:07.088Z corepack Reusing npm@8.10.0
> front@0.0.0 buildonly
> next build
```

I think its best to let users add this env var themselves if they want to debug what corepack is doing, so this PR removes that environment variable."
070e30014874b898f01c7934bd24a5fee472220d,Sean Massa,2022-07-11 18:50:15+00:00,GitHub,2022-07-11 18:50:15+00:00,"[node] add links to edge error messages (#8048)

Add links to some Edge errors.

---

Follow up to: https://github.com/vercel/vercel/pull/8007"
cbdf9b4a88a91ba0a804b9db080f7ab1d43579ea,Steven,2022-07-11 18:05:36+00:00,GitHub,2022-07-11 18:05:36+00:00,"[cli] Fix beta label (#8129)

This PR is a follow up to #7991 which incorrectly used a the empty string instead of empty array

- Maybe related to #8125"
ec9b55dc8196b650987a505ed24566818566f3cf,Steven,2022-07-10 19:04:09+00:00,Steven,2022-07-10 19:04:09+00:00,"Publish Stable

 - vercel@27.0.1
 - @vercel/remix@1.0.7"
06829bc21ac3b4c179f794fc87e2d105aedfa959,Leon Salsiccia,2022-07-10 17:28:39+00:00,GitHub,2022-07-10 17:28:39+00:00,"[remix] fix monorepo support (#8077)

Co-authored-by: Steven <steven@ceriously.com>"
628071f6599402e6b7d8fb47ae2e0ed8f1ea3b39,Matthew Stanciu,2022-07-08 19:30:28+00:00,GitHub,2022-07-08 19:30:28+00:00,"[cli] Debug log error messages in `create-git-meta` (#8112)

This is a follow-up to #8094 which debug logs errors.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
5a7461dfe3afdb5389db6c39bc924ebb94e69dc9,Matthew Stanciu,2022-07-08 18:56:35+00:00,GitHub,2022-07-08 18:56:35+00:00,"[cli] Explicitly use `vc project` vs. `vc projects` (#8113)

This is a follow-up to #8091 which:

- Makes `vc project` the default command, with `vc projects` aliased to `vc project` (previously it was not clear in the code which one was the ""real"" command)
- Makes some helper names for `ls` more specific

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
599f8f675c0a34b99e2ad0590508849c1d12fd39,Sean Massa,2022-07-08 16:52:55+00:00,GitHub,2022-07-08 16:52:55+00:00,"[tests] remove commented code (#8109)

Removes a leftover commented line."
0a8bc494fcff3ec86ee6f09d3eaa4134ed58de36,Steven,2022-07-08 16:30:03+00:00,GitHub,2022-07-08 16:30:03+00:00,"[tests] Try building with ENABLE_VC_BUILD (#8110)

This will dogfood `vc build` which happens to improve this deployment time from 4 min down to 2 min."
34e008f42ed7167c41d7c8aac0b067b4608d23cc,Lee Robinson,2022-07-08 12:12:22+00:00,GitHub,2022-07-08 12:12:22+00:00,"[cli] Remove beta warning for `vercel build` (#7991)

This removes the `(beta)` output from `vercel build` as we move towards stability.

![image](https://user-images.githubusercontent.com/9113740/174356399-65f3d6bb-a241-49c8-9edb-167b25d6fa44.png)"
037633b3f16f101fb36c38c2b555d07382836616,Matthew Stanciu,2022-07-08 01:34:13+00:00,GitHub,2022-07-08 01:34:13+00:00,"[cli] Refactor `vc project` (#8091)

Since the `vc project` command is about to be expanded with 2 new subcommands, I think it makes sense to do a little bit of refactoring. The current `vc project` command is all in one file, with the logic for subcommands nested within if statements. I think the structure of `vc project` should look more like `vc env`, which is consistent with how commands with subcommands look throughout the rest of the codebase.

This PR moves the logic for the `project` subcommands into their own files.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
1a6f3c0270951f2488f95d815cbbfb29bceccc9e,Matthew Stanciu,2022-07-08 01:07:43+00:00,GitHub,2022-07-08 01:07:43+00:00,"[cli] Fix `vc deploy` erroring when `.git` is corrupt (#8094)

### Related Issues

- Fixes https://github.com/vercel/customer-issues/issues/597

`vc deploy` currently fails with a confusing error if the user has a corrupt `.git` directory. This is caused by `create-git-meta` improperly handling the scenario where it detects a `.git` directory but cannot find git information. This PR handles this error.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
0a2af4fb94d71a7a23ffc72fb68748be1177f345,Nathan Rajlich,2022-07-07 23:31:30+00:00,Nathan Rajlich,2022-07-07 23:31:30+00:00,"Publish Stable

 - @vercel/build-utils@5.0.1
 - vercel@27.0.0
 - @vercel/client@12.1.0
 - @vercel/frameworks@1.1.0
 - @vercel/fs-detectors@1.0.1
 - @vercel/go@2.0.5
 - @vercel/hydrogen@0.0.2
 - @vercel/next@3.1.4
 - @vercel/node@2.4.1
 - @vercel/python@3.0.5
 - @vercel/redwood@1.0.6
 - @vercel/remix@1.0.6
 - @vercel/ruby@1.3.13
 - @vercel/static-build@1.0.5"
3fb1c501423513124815382ba9c01aa44f9e47c3,Nathan Rajlich,2022-07-07 22:25:24+00:00,GitHub,2022-07-07 22:25:24+00:00,"[node] Provide correct `middlewarePath` when using ""Root Directory"" setting (#8097)

The `middlewarePath` property was not correctly stripping
the root directory setting from the value, causing Middleware
to not work correctly with Root Directory."
de033c43fd212b5b27c04443eddb94d3c9662ac6,Nathan Rajlich,2022-07-07 21:30:53+00:00,GitHub,2022-07-07 21:30:53+00:00,"[cli] Support Builders that don't define `version` property (#8099)

`vercel-sapper` is a case of a 3rd party Builder that does not export a `version` property. In this case, we should treat it the same as a `version: 2` Builder since its return value is compatible."
f8e5df749cd33ab585b03533aedd58391c23b808,Nathan Rajlich,2022-07-07 20:52:03+00:00,GitHub,2022-07-07 20:52:03+00:00,"[frameworks] Add ""hydrogen"" framework preset (#8073)

Adds ""hydrogen"" framework preset for Shopify Hydrogen framework to allow for zero-config usage of the `@vercel/hydrogen` Builder."
5670acc2cc2a6a1e15487ae0f7966799f53ee89c,Steven,2022-07-07 20:03:52+00:00,GitHub,2022-07-07 20:03:52+00:00,"Revert ""[cli] Add `vc project connect` command"" (#8096)

Revert ""[cli] Add `vc project connect` command (#8014)""

This reverts commit 32ebcd83a7266a44c179179f887297afde26bb14."
5205047851c136d81424885e967fe1c067dedced,Nathan Rajlich,2022-07-07 13:01:22+00:00,GitHub,2022-07-07 13:01:22+00:00,"[tests] Fix invoke path of `update-canary-tag.js` script (#8092)

See related CI failure: https://github.com/vercel/vercel/runs/7228051741?check_suite_focus=true"
1edc2d06c946103c5e1e7791e3f8e3af37ec64e1,Nathan Rajlich,2022-07-06 20:51:43+00:00,Nathan Rajlich,2022-07-06 20:51:43+00:00,"Publish Stable

 - @vercel/hydrogen@0.0.1"
fdb15b2539bdf3455dcbc17317dbd295d7386bef,Nathan Rajlich,2022-07-06 20:06:45+00:00,GitHub,2022-07-06 20:06:45+00:00,"[hydrogen] Add `@vercel/hydrogen` Builder (#8071)

Adds a new `@vercel/hydrogen` Builder package so that Vercel can support Shopify Hydrogen projects with zero config. It outputs an Edge Function for the server-side render code and includes a catch-all route to invoke that function after a `handle: ""filesystem""` to serve static files that were generated by the build command.

**Examples:**

 * [`hello-world-ts` template](https://hydrogen-hello-world-otm2vmw6w-tootallnate.vercel.app/)
 * [`demo-store-ts` template](https://hydrogen-demo-store-1gko2fst3-tootallnate.vercel.app/)"
32ebcd83a7266a44c179179f887297afde26bb14,Matthew Stanciu,2022-07-06 19:49:08+00:00,GitHub,2022-07-06 19:49:08+00:00,"[cli] Add `vc project connect` command (#8014)

This PR adds a new subcommand, `vc project connect`, which connects a Git provider repository to the current project. Previously, this could only be done via the Dashboard.

This is the first part of a larger projectthe goal is to include this functionality within `vc link`, so that you never have to leave the CLI if you want to set up a new Vercel project that's connected to Git.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
2e43b2b88a906bfd03c2cc7479777b2491c4d3e2,Matthew Stanciu,2022-07-06 19:17:33+00:00,GitHub,2022-07-06 19:17:33+00:00,"[cli] Remove redundant mock project endpoint (#8089)

- https://github.com/vercel/vercel/pull/8053

While writing tests for this PR, I added a mock project endpoint that always returned a default project. This was probably incorrect and no longer needed (tests pass without it). I should have removed it before merging #8053, but I didn't catch this before merging.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
f83d432fcd08c9ebf14e3e0944969a7960a70fb0,Matthew Stanciu,2022-07-06 18:42:51+00:00,GitHub,2022-07-06 18:42:51+00:00,"[cli] MAJOR: Scope `vc ls` to linked project (#8053)

Currently, `vc ls` is scoped to your team, and you have to type out a project name if you want to see deployments for a project. This PR instead scopes it to the linked project.

Under these changes, `vc ls` still works similarly to how it currently works: users can still specify a project name to get the deployments for a project. The difference is that:

1. The selected team is the one that the linked project belongs to, instead of the one that the user has selected.
2. `vc ls` with no arguments displays the latest deployments for the linked project.

This is the first part of a larger effort to change the behavior of `vc ls`, plucked from https://github.com/vercel/vercel/pull/7993. More PRs to follow.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
87fc38e8605c34405a5dd809fc0a48be6a604ba7,Matthew Stanciu,2022-07-06 18:04:13+00:00,GitHub,2022-07-06 18:04:13+00:00,"[cli] MAJOR: remove `vc deploy` clipboard copy feature (#8085)

https://vercel.slack.com/archives/C03F2CMNGKG/p1656971502881949

Right now, `vc deploy` automatically copies the deploy url to your clipboard after the deployment has finished. You can opt out via the `--no-clipboard` flag, but the feature is enabled by default.

This is strange behaviorthere's no indication that the CLI will hijack your clipboard, and you don't know it's been hijacked until after it happens.

This PR removes the clipboard copying feature as well as the `--no-clipboard` flag.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
afc4388fc007047d454b7a3dc53e0a3eeeded1b3,JJ Kasper,2022-07-05 23:45:45+00:00,GitHub,2022-07-05 23:45:45+00:00,"[tests] Update canary dist-tag on publish (#8084)

This ensures we update the canary dist-tag when publishing stable releases as we no longer need to do separate canary publishes.  

### Related Issues

x-ref: [slack thread](https://vercel.slack.com/archives/C65QW9PN1/p1657049930618119?thread_ts=1656362480.574099&cid=C65QW9PN1)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
3c48b40b43e3357c4c06bfe05e1192b1434b691f,Steven,2022-07-05 21:44:26+00:00,Steven,2022-07-05 21:44:26+00:00,"Publish Canary

 - @vercel/build-utils@5.0.1-canary.0
 - vercel@26.0.1-canary.1
 - @vercel/client@12.0.5-canary.0
 - @vercel/go@2.0.5-canary.0
 - @vercel/next@3.1.4-canary.1
 - @vercel/node@2.4.1-canary.0
 - @vercel/python@3.0.5-canary.0
 - @vercel/redwood@1.0.6-canary.0
 - @vercel/remix@1.0.6-canary.0
 - @vercel/ruby@1.3.13-canary.0
 - @vercel/static-build@1.0.5-canary.0"
ce89f00328af2c601317a919db81a4227f62c78e,JJ Kasper,2022-07-05 19:17:51+00:00,JJ Kasper,2022-07-05 19:17:51+00:00,"Publish Canary

 - vercel@26.0.1-canary.0
 - @vercel/next@3.1.4-canary.0"
621b53bc49a1ac4aaf6ab986f9bbbdd517af01f5,Steven,2022-07-05 12:47:49+00:00,Steven,2022-07-05 12:47:49+00:00,"Publish Stable

 - @vercel/build-utils@5.0.0
 - vercel@26.0.0
 - @vercel/client@12.0.4
 - @vercel/fs-detectors@1.0.0
 - @vercel/go@2.0.4
 - @vercel/next@3.1.3
 - @vercel/node@2.4.0
 - @vercel/python@3.0.4
 - @vercel/redwood@1.0.5
 - @vercel/remix@1.0.5
 - @vercel/ruby@1.3.12
 - @vercel/static-build@1.0.4"
728b62035550007e06caa99fb2a6e2fd8855c7ef,JJ Kasper,2022-07-04 14:52:08+00:00,GitHub,2022-07-04 14:52:08+00:00,Update trailing slash handling for _next/data resolving (#8080)
7d1639503879fe4c91ca447f016dcca7a250b801,Luc Leray,2022-07-04 13:22:35+00:00,GitHub,2022-07-04 13:22:35+00:00,"[build-utils] Stricter `getNodeBinPath` return type (#8082)

In https://github.com/vercel/vercel/pull/8058, I made `getNodeBinPath` return type too broad. The function can never return `undefined` so we can make it more strict."
59e12596884f9e017308c22d72e1ce509465de38,Lee Robinson,2022-07-01 22:47:36+00:00,GitHub,2022-07-01 22:47:36+00:00,[examples] Remove stray `console.log`. (#8070)
169242157e5036eaa54b86350d50184a759a8557,Nathan Rajlich,2022-07-01 20:38:02+00:00,GitHub,2022-07-01 20:38:02+00:00,"[cli] Fix Middleware ""matchers"" with query string in `vc dev` (#8069)

`matchers` config in Middleware was not being properly matched in `vc dev` when a query string was present."
db10ffd679696bd7da88e027a63188741d8f9db8,Steven,2022-07-01 19:33:21+00:00,GitHub,2022-07-01 19:33:21+00:00,"[build-utils][next][redwood][remix][static-build] Fix corepack path prepend (#8065)

This PR fixes a bug where corepack (#7871) was not correctly setup because the lockfile autodetection and node version autodetection was overriding the PATH.

It also fixes a bug where the log output was printed twice because we incorrectly prepended the PATH twice."
c0d0744c4edd2021be31aa452518c44768bec3a6,Steven,2022-07-01 19:04:44+00:00,GitHub,2022-07-01 19:04:44+00:00,"[tests] Add yarn.lock to saber test fixture (#8068)

The Saber example had a lock file but the test did not.

This PR copies the lock file since the latest version of Saber doesn't work with the latest Vue.

```
Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: Package subpath './package' is not defined by ""exports"" in /vercel/path0/node_modules/vue/package.json
  at new NodeError (node:internal/errors:372:5)
  at throwExportsNotFound (node:internal/modules/esm/resolve:472:9)
  at packageExportsResolve (node:internal/modules/esm/resolve:753:3)
  at resolveExports (node:internal/modules/cjs/loader:482:36)
  at Function.Module._findPath (node:internal/modules/cjs/loader:522:31)
  at Function.Module._resolveFilename (node:internal/modules/cjs/loader:919:27)
  at Function.resolve (node:internal/modules/cjs/helpers:108:19)
  at module.exports (/vercel/path0/node_modules/saber/dist/webpack/webpack.config.js:30:58)
  at Saber.getWebpackConfig (/vercel/path0/node_modules/saber/dist/index.js:195:58)
  at VueRenderer.build (/vercel/path0/node_modules/saber/dist/vue-renderer/index.js:232:39)
```"
9da67423a5119571dc333962d4d34655cba717e1,Steven,2022-06-30 22:45:49+00:00,GitHub,2022-06-30 22:45:49+00:00,"[node] Fix public TypeScript types (#8064)

There was a regression some time between [1.12.2-canary.6](https://unpkg.com/browse/@vercel/node@1.12.2-canary.6/dist/index.d.ts) and [1.12.2-canary.7](https://unpkg.com/browse/@vercel/node@1.12.2-canary.7/dist/index.d.ts) where the `index.d.ts` types changed.

This PR reverts back to the old behavior so users can properly use

```ts
import { VercelRequest, VercelResponse } from '@vercel/node';
```

The existing test was also changed to use the result of the build rather than copy at the beginning

https://github.com/vercel/vercel/blob/cfae7ec3c291d1802fb6eec6642a0ebf792fb71d/packages/node/test/fixtures/15-helpers/ts/index.ts#L1

- Fixes https://github.com/vercel/vercel/issues/7951"
51fe09d5e96df72877e5daf21929aa7ec43cd382,Steven,2022-06-30 21:14:07+00:00,GitHub,2022-06-30 21:14:07+00:00,"[build-utils][fs-detectors][cli] MAJOR: move some of `build-utils` into new `fs-detectors` (#8054)

The `@vercel/build-utils` package was meant be shared functions necessary for writing a Vercel Builder (aka Runtime).

This package has since bloated into the catch-all package for anything that wasn't a Builder.

This PR removes the bloat in favor of a new package, `@vercel/fs-detectors`. It also removes the need for `@vercel/build-utils` to have a dependency on `@vercel/frameworks`.

- Related to #7951"
695bfbdd60a97030457ea1861c5bb89bcfe92353,Nathan Rajlich,2022-06-30 20:17:22+00:00,GitHub,2022-06-30 20:17:22+00:00,"[cli] Add full stdio mockability for unit tests (#8052)

This PR is a follow-up to #8039, which provides an intuitive syntax for writing unit tests for interactive CLI commands.

The heart of this is the new `await expect(stream).toOutput(test)` custom Jest matcher, which is intended for use with the mock Client `stdout` and `stderr` stream properties. The `test` is a string that will wait for the stream to output via ""data"" events until a match is found, or it will timeout (after 3 seconds by default). The timeout error has nice Jest-style formatting so that you can easily identify what was output:

<img width=""553"" alt=""Screen Shot 2022-06-29 at 10 33 06 PM"" src=""https://user-images.githubusercontent.com/71256/176600324-cb1ebecb-e891-42d9-bdc9-4864d3594a8c.png"">

Below is an example of a unit test that was added for an interactive `vc login` session:

```typescript
it('should allow login via email', async () => {
  const user = useUser();

  const exitCodePromise = login(client);

  // Wait for login interactive prompt
  await expect(client.stderr).toOutput(`> Log in to Vercel`);

  // Move down to ""Email"" option
  client.stdin.write('\x1B[B'); // Down arrow
  client.stdin.write('\x1B[B'); // Down arrow
  client.stdin.write('\x1B[B'); // Down arrow
  client.stdin.write('\r'); // Return key

  // Wait for email input prompt
  await expect(client.stderr).toOutput('> Enter your email address:');

  // Write user email address into prompt
  client.stdin.write(`${user.email}\n`);

  // Wait for login success message
  await expect(client.stderr).toOutput(
    `Success! Email authentication complete for ${user.email}`
  );

  // Assert that the `login()` command returned 0 exit code
  await expect(exitCodePromise).resolves.toEqual(0);
});
```

**Note:**  as a consequence of this PR, prompts are now written to stderr instead of stdout, so this change _may_ be considered a breaking change, in which case we should tag it for major release."
547e88228e180e883e5f07ab815a16960767bbf5,Nathan Rajlich,2022-06-30 19:24:13+00:00,Nathan Rajlich,2022-06-30 19:24:13+00:00,"Publish Stable

 - @vercel/build-utils@4.2.1
 - vercel@25.2.3
 - @vercel/client@12.0.3
 - @vercel/go@2.0.3
 - @vercel/next@3.1.2
 - @vercel/node@2.3.3
 - @vercel/python@3.0.3
 - @vercel/redwood@1.0.4
 - @vercel/remix@1.0.4
 - @vercel/ruby@1.3.11
 - @vercel/static-build@1.0.3"
9bfb5dd535e6ba692815403083fa393161e7edc0,Luc Leray,2022-06-30 17:27:52+00:00,GitHub,2022-06-30 17:27:52+00:00,"[build-utils] Handle `npm bin` exit code 7 (#8058)

In some rare cases, `npm bin` exits with code 7, but still outputs the right bin path.

To reproduce, try:
```
npm init -y
echo ""//registry.npmjs.org/:_authToken=${NPM_TOKEN}"" > .npmrc
vc
# enter ""echo build"" for the build command, leave the other configuration as default
```

The build will fail with `Error: Command exited with 7` because `npm bin` fails with code 7, for some reason.

In this PR, we do 2 things:
(1) Ignore exit codes from `npm bin`. It still outputs the right path when it exits with code 7 so we just read the output and check if it's a valid path.
(2) Throw a more specific error message when `npm bin` fails to give us the bin path. The current error was hard to debug because it looked like it was coming from the install commmand. We can do better by emitting a custom error.

Alternative considered for (2): Do not throw errors. If `npm bin` fails, emit a warning and let the build continue.

Related Issues:
- https://github.com/vercel/customer-issues/issues/585 (internal)"
81ea84fae849fd794963853706ea68bc162a59ff,Nathan Rajlich,2022-06-29 23:04:31+00:00,GitHub,2022-06-29 23:04:31+00:00,"[cli] Fix `vc build` lambda serialization when there's a broken symlink (#8050)

There's some cleanup directory walking logic that was choking when
a Lambda outputs a file with a broken symlink. We shouldn't need to
traverse into those directories in the case of a symlink anyways, so use
`lstat()` instead of `stat()` to prevent that filesystem call from
throwing an error."
fa8bf07be41cf768b23a7c5782ff4622184d21f2,Nathan Rajlich,2022-06-29 23:03:56+00:00,GitHub,2022-06-29 23:03:56+00:00,"[cli] Add `Client#stdin` / `Client#stdout` (#8039)

This will allow for mockability of the input streams (i.e. prompts)
for CLI commands in unit tests.

**Example:**

```typescript
import confirm from '../../src/util/input/confirm';
import { client } from '../mocks/client';

describe('MockClient', () => {
  it('should mock `confirm()`', async () => {
    const confirmedPromise = confirm(client, 'Do the thing?', false);

    client.stdin.write('yes\n');

    const confirmed = await confirmedPromise;
    expect(confirmed).toEqual(true);
  });
});
```"
cc9dce73ad62cb0062727f12e15ffe3f51561313,JJ Kasper,2022-06-29 20:13:15+00:00,GitHub,2022-06-29 20:13:15+00:00,"[next] Ensure uncompressed limit is correct (#8049)

* Revert ""Revert ""[next] Update max size warning to handle initial layer better"" (#8047)""

This reverts commit 8c62de16cedf48be16f98c0d9197085e0b151f93.

* Ensure uncompressed limit is correct

* apply suggestion"
bba7cbd411a3bf5bf43e268b58cfe9ab4cd8df58,Sean Massa,2022-06-29 18:37:48+00:00,GitHub,2022-06-29 18:37:48+00:00,"[cli][dev] fix: creating ""api/some-func.js"" after ""vc dev"" now works (#8041)

If there is no `api` directory, then you run `vc dev`, then you create a new function `api/some-func.js`, then this file would not be served as a new function.

This was being caused by incomplete ""new file"" handling logic. This PR ensures that the proper detection is done in each new file (`getVercelConfig`) that populates key properties (`apiDir`, `apiExtensions`, and extensionless `files`) for determining when a file is used to serve a request."
9a3739bebdbd45ad17e949236893b2b58777012a,Steven,2022-06-29 13:27:34+00:00,Steven,2022-06-29 13:27:34+00:00,"Publish Stable

 - vercel@25.2.2
 - @vercel/next@3.1.1
 - @vercel/node@2.3.2
 - @vercel/redwood@1.0.3
 - @vercel/remix@1.0.3"
8c62de16cedf48be16f98c0d9197085e0b151f93,Gal Schlezinger,2022-06-29 13:26:29+00:00,GitHub,2022-06-29 13:26:29+00:00,"Revert ""[next] Update max size warning to handle initial layer better"" (#8047)

Revert ""[next] Update max size warning to handle initial layer better (#8013)""

This reverts commit f20703b15d37ad6d6995df01dd71eccd7b1dffee."
e9333988d730eeb6aa1d929c1a79a550f32ee23f,Steven,2022-06-29 00:21:14+00:00,GitHub,2022-06-29 00:21:14+00:00,"[next][node][redwood][remix] Bump `@vercel/nft` to 0.20.1 (#8042)

- https://github.com/vercel/nft/releases/tag/0.20.0
- https://github.com/vercel/nft/releases/tag/0.20.1"
fb001ce7ebd1d3ad056186bf553c418e8fd5554a,Nathan Rajlich,2022-06-28 18:26:56+00:00,GitHub,2022-06-28 18:26:56+00:00,[tests] Remove TODO comments from Middleware matchers vc dev test (#8037)
b399fe7037eb3e4c42167ba28e82c9ce0332f7a0,Sean Massa,2022-06-28 17:04:57+00:00,Sean Massa,2022-06-28 17:04:57+00:00,"Publish Stable

 - vercel@25.2.1
 - @vercel/node@2.3.1"
88385b3c84741ffafa96128dfbb18ec3636dfc53,Sean Massa,2022-06-28 16:27:56+00:00,GitHub,2022-06-28 16:27:56+00:00,[cli][node] switch to esbuild for compiling edge functions (#8032)
eed39913e1394477b224c38efe29429b17eeada6,Steven,2022-06-28 14:15:33+00:00,Steven,2022-06-28 14:15:33+00:00,"Publish Stable

 - @vercel/build-utils@4.2.0
 - vercel@25.2.0
 - @vercel/client@12.0.2
 - @vercel/edge@0.0.1
 - @vercel/frameworks@1.0.2
 - @vercel/go@2.0.2
 - @vercel/next@3.1.0
 - @vercel/node@2.3.0
 - @vercel/python@3.0.2
 - @vercel/redwood@1.0.2
 - @vercel/remix@1.0.2
 - @vercel/routing-utils@1.13.5
 - @vercel/ruby@1.3.10
 - @vercel/static-build@1.0.2"
03e9047bc9f9dd7be97196920638a34e83d82e7d,Gal Schlezinger,2022-06-28 09:26:18+00:00,GitHub,2022-06-28 09:26:18+00:00,"[@vercel/edge] add header helpers (#8036)

* [@vercel/edge] add header helpers

* rename getIp => ipAddress, getGeo => geolocation, as suggested by @kikobeats"
0e35205bf1b2b2f1764e5ceb4c27df03e47d7670,Nathan Rajlich,2022-06-28 08:34:48+00:00,GitHub,2022-06-28 08:34:48+00:00,"[cli][dev][node] Support `matchers` config for Middleware in `vc dev` (#8033)

Adds support for `config.matchers` exported property in Middleware during `vc dev`."
e42fe34c4a689d59dc4872553e542bc0bb36cda7,Steven,2022-06-28 04:48:35+00:00,GitHub,2022-06-28 04:48:35+00:00,"[tests] Bump turbo to 1.3.1 (#8011)

https://turborepo.org/blog/turbo-1-3-0"
3ece7ac9698f0d3055d93f74852684740459fb21,Sean Massa,2022-06-28 04:12:21+00:00,GitHub,2022-06-28 04:12:21+00:00,"[cli][node] make error handling of edge functions consistent with serverless functions in `vc dev` (#8007)

When edge functions error, they were showing a basic text response instead of the error template. They were also sending a 502 status code instead of a 500.

This PR makes the error handling of Edge Functions consistent with Serverless Functions when executed through `vc dev`. If we want to update the error templates themselves, we can do that in a separate PR.

**Note:** Production currently treats Edge Function errors differently from Serverless Function errors, but that's a known issue that will be resolved.

---

*I deleted the original outputs (terminal and browser screenshots) because they are out of date and added a lot of content to this page. See my latest comment for updated examples.*"
4f832acf9083bf1ce13c7d7c527c5a9c5ff0d0ed,Nathan Rajlich,2022-06-28 03:29:50+00:00,GitHub,2022-06-28 03:29:50+00:00,"[remix] Don't depend on `@remix-run/vercel` (#8029)

Instead, just add it to the project's `package.json` file before installing the dependencies.

Fixes warning about missing peer dependencies when installing CLI.

<img width=""409"" alt=""CleanShot 2022-05-22 at 09 40 09@2x"" src=""https://user-images.githubusercontent.com/71256/176084428-79e964b3-8b20-416d-bf3f-c5bd36f4b0ff.png"">

Now, a warning is shown in the Deployment build logs, saying that the dep was added, but that the user should commit the change:

<img width=""931"" alt=""Screen Shot 2022-06-27 at 8 15 19 PM"" src=""https://user-images.githubusercontent.com/71256/176084377-dab5f7d3-4e9f-4bf6-baee-63708b65f218.png"">"
918726e01d03ad6487a3176025cb985d30426029,Matthew Stanciu,2022-06-28 02:15:59+00:00,GitHub,2022-06-28 02:15:59+00:00,"[cli] Support ""http:"" scheme in `vc bisect` (#8023)

`vc bisect` currently prepends `https://` to a passed-in url if it doesn't begin with httpswhich means that if someone passes in a url that begins with `http://`, it'll turn the url into `https://http://url.com`. This PR fixes this.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
dc2ddf867be91beb8c1d0ab18371545c6b973e44,JJ Kasper,2022-06-27 20:37:09+00:00,JJ Kasper,2022-06-27 20:37:09+00:00,"Publish Stable

- @vercel/next@3.0.5"
ee1211416f50ac04e2644b24e89403414179a3e9,Nathan Rajlich,2022-06-27 19:56:32+00:00,GitHub,2022-06-27 19:56:32+00:00,"[cli] Support root-level Middleware file in `vc dev` (#7973)

Adds initial support for a root-level `middleware.js` / `middleware.ts` file in the `vercel dev` CLI command. This leverages the existing Edge Function invoking logic in `@vercel/node`'s `startDevServer()` function and applies the necessary response / rewrites / mutations to the HTTP request based on the result of the middleware invocation."
570fd24e29f5e8abb9e01e0ddb2a6c751dd4adfe,JJ Kasper,2022-06-27 17:35:09+00:00,JJ Kasper,2022-06-27 17:35:09+00:00,"Publish Canary

 - vercel@25.1.1-canary.11
 - @vercel/edge@0.0.1-canary.0
 - @vercel/next@3.0.5-canary.1"
40681ad0f40847956d98635c97d604f0a66b75c6,Gal Schlezinger,2022-06-27 16:55:39+00:00,GitHub,2022-06-27 16:55:39+00:00,[next] allow to declare edge functions outside of /api/ in Next.js (#7997)
f20703b15d37ad6d6995df01dd71eccd7b1dffee,JJ Kasper,2022-06-27 15:22:48+00:00,GitHub,2022-06-27 15:22:48+00:00,"[next] Update max size warning to handle initial layer better (#8013)

* Update max size warning to handle initial layer better

* update test"
68eb1971128ebb027de0812a2e92f259027ce37f,Gal Schlezinger,2022-06-27 14:37:46+00:00,GitHub,2022-06-27 14:37:46+00:00,Add @vercel/edge with helpers for Middleware (#8022)
b8b87b96da49fff38435d1e6ae123a721c8d7a4b,JJ Kasper,2022-06-25 20:04:32+00:00,JJ Kasper,2022-06-25 20:04:32+00:00,"Publish Canary

 - vercel@25.1.1-canary.10
 - @vercel/next@3.0.5-canary.0"
967c24f1bb8966580a6975ad1b6df0b3e222b49a,JJ Kasper,2022-06-25 17:39:30+00:00,GitHub,2022-06-25 17:39:30+00:00,"[next] Ensure trailing slash is handled while resolving _next/data rewrites (#8015)

* Ensure trailing slash is handled while resolving _next/data rewrites

* update regex"
609f781234cf95981aedcb876057f9ea3a77c0ec,JJ Kasper,2022-06-25 04:16:40+00:00,JJ Kasper,2022-06-25 04:16:40+00:00,"Publish Stable

- @vercel/next@3.0.4"
998f6bf6e65301a19a400886bcc37b2dbbcdabe3,JJ Kasper,2022-06-23 20:45:31+00:00,JJ Kasper,2022-06-23 20:45:31+00:00,"Publish Canary

 - vercel@25.1.1-canary.9
 - @vercel/next@3.0.4-canary.3
 - @vercel/node@2.2.1-canary.1"
7511c2ef8532cd76dce19b8eaa215851000aea72,JJ Kasper,2022-06-23 19:57:07+00:00,GitHub,2022-06-23 19:57:07+00:00,"[next] Fix normalizing for _next/data/index.json route with middleware (#8005)

* Fix normalizing for _next/data/index.json route with middleware

* ensure / -> /index.json denormalizes as well

* add continue/override"
71425fac1fa620ac90c8bfb1da816fd826011a7c,Michal De Boey,2022-06-21 19:20:01+00:00,GitHub,2022-06-21 19:20:01+00:00,[examples] Update `remix` template (#7917)
6973cd59894127f6b0856d1731eacd9036138340,Lee Robinson,2022-06-21 19:10:55+00:00,GitHub,2022-06-21 19:10:55+00:00,[examples] Address follow up from SvelteKit example update (#8002)
24785ff50a718e228a1ec2b60a0474e1c0d73e6d,Nathan Rajlich,2022-06-21 19:10:13+00:00,GitHub,2022-06-21 19:10:13+00:00,"[node] Implement `matcher` config support for Middleware (#8001)

Allows to specify a string or array of paths/globs for when a root-level
Middleware should be invoked.

```javascript
export const config = {
  matcher: ['/about/:path*', '/dashboard/:path*'],
}
```"
aa3ad4478c448ac0c714f527e0da15894e5838d1,Nathan Rajlich,2022-06-21 19:04:24+00:00,GitHub,2022-06-21 19:04:24+00:00,"[cli] Only show ""Removing `.vercel/output`"" log when directory exists in `vc dev` (#8004)

Conditionally show the ""Removing"" message, instead of always rendering it."
f0d73049caa004b87307fb9038ef30c593ab9108,JJ Kasper,2022-06-21 15:09:24+00:00,JJ Kasper,2022-06-21 15:09:24+00:00,"Publish Canary

 - vercel@25.1.1-canary.8
 - @vercel/next@3.0.4-canary.2"
6cef07354a2dcc2e89d47b61b7f3983b5c9a640f,JJ Kasper,2022-06-20 22:29:01+00:00,GitHub,2022-06-20 22:29:01+00:00,"[next] Ensure basePath is matched correctly for _next/data resolving (#7999)

This ensures we correctly match `basePath` for the `_next/data` resolving routes. The tests in the below referenced PR already cover this change so no new fixtures have been added here as they would rely on those changes landing first. 

### Related Issues

x-ref: https://github.com/vercel/next.js/pull/37854

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
50af9f5b75e518379bbba2b6dcba0330710b0425,Nathan Rajlich,2022-06-20 07:19:54+00:00,Nathan Rajlich,2022-06-20 07:19:54+00:00,"Publish Canary

 - vercel@25.1.1-canary.7
 - @vercel/next@3.0.4-canary.1"
af76b134d8bff0c190c292e2a992621de16bb744,Seiya Nuta,2022-06-20 04:58:36+00:00,GitHub,2022-06-20 04:58:36+00:00,"[next] Check the size of WASM files in the Edge Functions size validation (#7936)

This is the last missing piece in the size validation of edge functions. Since WASM binaries are not bundled in the user JavaScript file, we also need to count their sizes in the validation.

### Related Issues

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
c7640005fd2b810611e828a6bbf34ed49e352288,Nathan Rajlich,2022-06-18 23:10:33+00:00,GitHub,2022-06-18 23:10:33+00:00,"[cli] Implement `vc build --output` parameter (#7995)

Use `--output` parameter to output the Build Output API build artifacts to a different location than the default `.vercel/output` directory."
3deed977ba531b8c158efbec30c1466ab54b8003,Nathan Rajlich,2022-06-18 15:07:46+00:00,GitHub,2022-06-18 15:07:46+00:00,"[cli] Add `requirePath` to ""builds.json"" in `vc build` (#7990)

Include a `requirePath` property to each ""build"" in the `builds.json` file which is the absolute path to the Builder entrypoint that was executed.

This gives context as to which Builder was invoked by `vc build` which helps with introspection / debugging."
b38c360e36a2dcb073fa026b19100966d0b1c736,Nathan Rajlich,2022-06-17 22:18:33+00:00,GitHub,2022-06-17 22:18:33+00:00,"[cli] Include ""argv"" in `builds.json` produced by `vc build` (#7988)

It will be useful for debugging purposes to have access to the arguments that were passed to `vc build`."
1595e484148bcce35c4ae4501068e50b0cce34fb,JJ Kasper,2022-06-17 21:32:59+00:00,JJ Kasper,2022-06-17 21:32:59+00:00,"Publish Canary

 - vercel@25.1.1-canary.6
 - @vercel/next@3.0.4-canary.0"
e6b0ee3e3c1702d55c3946cfbb429d94d4ba126a,JJ Kasper,2022-06-17 21:32:33+00:00,GitHub,2022-06-17 21:32:33+00:00,"[next] Update data regex to be less specific (#7994)

Update data regex to be less specific"
a247e316889ea3c938804386b0399ffb74f1273c,JJ Kasper,2022-06-17 19:49:54+00:00,JJ Kasper,2022-06-17 19:49:54+00:00,"Publish Stable

- @vercel/next@3.0.3"
dc02e763a459fb2f73b15bb7f1accb2b4963f21a,JJ Kasper,2022-06-17 19:24:39+00:00,JJ Kasper,2022-06-17 19:24:39+00:00,"Publish Canary

 - vercel@25.1.1-canary.5
 - @vercel/next@3.0.3-canary.2"
8567fc0de612b1404fc3cce0a7c0a15b65f926dc,JJ Kasper,2022-06-17 19:19:37+00:00,GitHub,2022-06-17 19:19:37+00:00,"[next] Optimize _next/data route regex (#7992)

Optimize _next/data route regex"
4f8f3d373f4e42fe1afecd16a4cfc4fe57835be7,JJ Kasper,2022-06-16 23:00:29+00:00,JJ Kasper,2022-06-16 23:00:29+00:00,"Publish Canary

 - vercel@25.1.1-canary.4
 - @vercel/next@3.0.3-canary.1
 - @vercel/node@2.2.1-canary.0"
debb85b690bf4622ee0b97ebecf4123257aebfc1,JJ Kasper,2022-06-16 21:44:12+00:00,GitHub,2022-06-16 21:44:12+00:00,"[next] Update error for internal missing page (#7987)

Update error for internal missing page"
bfef989adae7340a853b02f00ba0a60d42d5bb2f,Thai Pangsakulyanont,2022-06-16 17:24:18+00:00,GitHub,2022-06-16 17:24:18+00:00,"[examples] Delete `pnpm-lock.yaml` from `examples/sveltekit` because it already contains `yarn.lock` (#7983)

Delete pnpm-lock.yaml

Co-authored-by: Lee Robinson <lrobinson2011@gmail.com>"
4e0b6c5eafc43046de5bd4c29ef6ae246d3d9bfb,JJ Kasper,2022-06-16 16:23:30+00:00,GitHub,2022-06-16 16:23:30+00:00,"[next] Update to skip middleware for on-demand revalidate (#7978)

Update to skip middleware for on-demand revalidate"
0ace69ef754fd37a2df043e02a2278570c87ea32,Nathan Rajlich,2022-06-15 20:01:57+00:00,Nathan Rajlich,2022-06-15 20:01:57+00:00,"Publish Stable

- @vercel/node@2.2.0"
b7b7923f92b370c5ef44bde3ced2dbc550f547e4,Nathan Rajlich,2022-06-15 18:56:32+00:00,Nathan Rajlich,2022-06-15 18:56:32+00:00,"Publish Canary

 - vercel@25.1.1-canary.3
 - @vercel/next@3.0.3-canary.0
 - @vercel/node@2.1.1-canary.2"
8167233c56ab3466f66ac47016e68c0eea110530,Nathan Rajlich,2022-06-15 17:44:23+00:00,GitHub,2022-06-15 17:44:23+00:00,"[tests] Create tarballs of all packages in Vercel deployment (#7967)

For the Vercel deployment, run `yarn pack` in each of the packages in the monorepo and place them in the ""public/tarballs"" directory so that we can have npm-installable URLs of each package for every commit. The `package.json` of each package is also updated to reference the tarball when a package depends on other packages within the monorepo.

Try it out like:

```
$ npm i -g https://vercel-biww73ffq.vercel.sh/tarballs/vercel.tgz

# Notice how the package.json has the monorepo dependencies
# updated to point to the related tarballs from the same deployment:

$ cat /usr/local/lib/node_modules/vercel/package.json | grep biww
    ""@vercel/build-utils"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/build-utils.tgz"",
    ""@vercel/go"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/go.tgz"",
    ""@vercel/next"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/next.tgz"",
    ""@vercel/node"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/node.tgz"",
    ""@vercel/python"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/python.tgz"",
    ""@vercel/redwood"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/redwood.tgz"",
    ""@vercel/remix"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/remix.tgz"",
    ""@vercel/ruby"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/ruby.tgz"",
    ""@vercel/static-build"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/static-build.tgz"",
    ""@vercel/client"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/client.tgz"",
    ""@vercel/frameworks"": ""https://vercel-biww73ffq.vercel.sh/tarballs/@vercel/frameworks.tgz"",

# Also notice that the ""version"" in `package.json` gets updated to include the commit
# SHA so that we can easily identify which commit a given tarball was generated from:

$ vercel --version
25.1.1-canary.1-727b290
```"
32ee6aba9288ff3463ac42ea66fee946e0eb4882,Michal De Boey,2022-06-15 17:18:02+00:00,GitHub,2022-06-15 17:18:02+00:00,"[node] Move `@vercel/build-utils` to ""dependencies"" (#7934)

fix(node): move `@vercel/build-utils` to `dependencies`

Co-authored-by: Steven <steven@ceriously.com>"
b48f7a7e6ecdcc5d992493b3a268f4153f510bb6,Nathan Rajlich,2022-06-15 01:38:17+00:00,GitHub,2022-06-15 01:38:17+00:00,"[node] Add missing dependencies for `dev-server.ts` (#7969)

Some new imports were introduced recently but are missing from the `""dependencies""` object, so they were missing when the package was installed from the npm registry."
a961c9b992f35ef1b174d03ebc51d5c36e986d01,JJ Kasper,2022-06-14 22:35:24+00:00,JJ Kasper,2022-06-14 22:35:24+00:00,"Publish Stable

- @vercel/next@3.0.2"
cf7c50d69178cd090daf00146828b310f34f4961,JJ Kasper,2022-06-14 19:57:54+00:00,JJ Kasper,2022-06-14 19:57:54+00:00,"Publish Canary

 - vercel@25.1.1-canary.2
 - @vercel/next@3.0.2-canary.2"
f4be388a1f6f0e86b23f580e41c01d249a55fc3a,JJ Kasper,2022-06-14 19:52:49+00:00,GitHub,2022-06-14 19:52:49+00:00,"[next] Fix _next/data resolving priority with afterFiles (#7968)

* Fix _next/data resolving priority with afterFiles

* ensure x-nextjs-matched-path header is set"
c1bc53dea872955b95e428b8e972cda1acaaab38,Nathan Rajlich,2022-06-14 16:15:20+00:00,Nathan Rajlich,2022-06-14 16:15:20+00:00,"Publish Canary

 - @vercel/build-utils@4.1.1-canary.1
 - vercel@25.1.1-canary.1
 - @vercel/client@12.0.2-canary.1
 - @vercel/frameworks@1.0.2-canary.0
 - @vercel/go@2.0.2-canary.1
 - @vercel/next@3.0.2-canary.1
 - @vercel/node@2.1.1-canary.1
 - @vercel/python@3.0.2-canary.1
 - @vercel/redwood@1.0.2-canary.1
 - @vercel/remix@1.0.2-canary.1
 - @vercel/routing-utils@1.13.5-canary.0
 - @vercel/ruby@1.3.10-canary.1
 - @vercel/static-build@1.0.2-canary.1"
6855e3df541ffe15c8c0c7cd8167661e5cb6b629,Nathan Rajlich,2022-06-14 06:54:16+00:00,GitHub,2022-06-14 06:54:16+00:00,"[tests] Allow for multiple probes (#7957)

The `probes` in the vercel.json files in tests fixtures weren't allowing both `mustContain` _and_ `responseHeaders` probes due to an `else` block. This PR allows to combine those checks into the same probe test."
0d39dbd1d925575ad06cab368ada6053401c0be8,Nathan Rajlich,2022-06-14 06:29:00+00:00,GitHub,2022-06-14 06:29:00+00:00,"[routing-utils] Convert tests to TypeScript (#7959)

Allows for the tests to be run without rebuilding the source code."
509c85182a1faa5ffbfdb58c25cf336cad6cf84b,Nathan Rajlich,2022-06-14 06:18:23+00:00,GitHub,2022-06-14 06:18:23+00:00,"[tests] Update `ts-jest` to v28.0.5 (#7962)

Gets rid of the annoying ts-jest update warning:

```
ts-jest[ts-jest-transformer] (WARN) Use 'ts-jest' entry point in v28 will resolve in refactored transformer. If you wish to use legacy transformer, please adjust your Jest 'transform' config. For example:
     module.exports = {
        transform: {
           '^.+\\.tsx?$': 'ts-jest/legacy'
        }
     }
```"
ae801e563d52c720fb951efe0b3b148028e41859,Sean Massa,2022-06-13 22:50:16+00:00,GitHub,2022-06-13 22:50:16+00:00,"[cli] add support for Edge Functions in `vercel dev` (#7925)

Add support for Edge Functions when using `vercel dev`. This uses the [`edge-runtime`](https://edge-runtime.vercel.app/) to emulate the proper environment, [`ncc`](https://github.com/vercel/ncc) to parse the entrypoint (supporting TypeScript and importing node modules), and some custom marshaling to pass the request/response values through."
0e8278f49029b10f7a583ac4966c80ff0523848a,Steven,2022-06-13 21:04:00+00:00,GitHub,2022-06-13 21:04:00+00:00,"[cli] Fix `vc dev` when user has ipv6 configured (#7956)

Running tests from #7455 

- Fixes #7306
- Closes #7455"
0d302a6f48539683ee445d107068a2fd9fdd3ba4,Steven,2022-06-13 17:01:46+00:00,GitHub,2022-06-13 17:01:46+00:00,"[cli] Add alias for `vc develop` => `vc dev` (#7955)

This will make it easier for users who are used to `gatsby develop` or other CLIs that abbreviate to [`develop`](https://twitter.com/DiverseCauses/status/1536358138676486146).

Fixes this:
![image](https://user-images.githubusercontent.com/229881/173387083-7afd01db-00ab-4670-a07d-fa6c8cecea5d.png)"
4e4f5f28a24f7fc8b29e669c07a683520daa5331,Lee Robinson,2022-06-13 16:30:14+00:00,GitHub,2022-06-13 16:30:14+00:00,"[examples] Add Vercel Analytics for CRA/SvelteKit templates. (#7894)

Successfully tested with:

- [CRA](https://front-git-analytics-for-all-frameworks.vercel.sh/now-examples/create-react-app/analytics?device=desktop&timePeriod=1d&percentile=75&timeInterval=3h&sort=datapoints&search=)
- [SvelteKit](https://front-git-analytics-for-all-frameworks.vercel.sh/now-examples/sveltekit/analytics?device=desktop&timePeriod=1d&percentile=75&timeInterval=3h&sort=datapoints&search=)

Dependencies have also been updated "
5205a4ec4b4d39f1526c01bd8a5e48c62bf3382d,Steven,2022-06-12 17:54:21+00:00,GitHub,2022-06-12 17:54:21+00:00,"[cli] Fix `vc dev` with dynamic paths and ESM (#7946)

In a previous PR, the entrypoint path extension was stripped in `vc dev` to match the behavior of production deployments (`/api/user.js` => `/api/user`). However, it was supposed to map back to the original file extension before invoking the matching builder. This PR fixes the mapping for dynamic paths with ESM, such as `/api/[id].mjs` => `/api/[id]`."
2c15e496ed565cafd1c0b5effc691ffe7ac3eb6f,Nathan Rajlich,2022-06-10 22:30:51+00:00,GitHub,2022-06-10 22:30:51+00:00,"[tests] Remove `as any` casting in unit tests (#7945)

Maybe this casting was necessary at some point, but it doesn't seem to be anymore."
1f0ca46626b497ee3d8e9a33bb8d665d345c0ef3,Matthew Stanciu,2022-06-10 20:53:47+00:00,GitHub,2022-06-10 20:53:47+00:00,"[cli] Add git metadata to `vc deploy` (#7910)

Currently, git metadata is not included on the Vercel dashboard when a project is deployed via the CLI. This PR populates the git metadata.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
17cb5f1bc65518c591478a10b1c38aabc2188360,Steven,2022-06-10 20:28:00+00:00,GitHub,2022-06-10 20:28:00+00:00,"[cli] Remove boxen for warnings (#7944)

This never worked correctly and its too verbose. Lets remove boxen in favor of yellow text.

## Before

<img width=""1432"" alt=""before"" src=""https://user-images.githubusercontent.com/229881/173138338-1cd1c81c-f294-4752-a08f-f80466fbd21c.png"" />

## After

<img width=""1432"" alt=""after"" src=""https://user-images.githubusercontent.com/229881/173138813-f9ff4de1-5bb7-4b60-8609-6abdd0e86fa0.png"">"
b0950312922b80e6c962ed3736dc2ad1e069e23c,Nathan Rajlich,2022-06-10 18:53:01+00:00,GitHub,2022-06-10 18:53:01+00:00,"[cli] Normalize ""src"" property in `vc build` (#7943)

This matches the production behavior."
f50bcbc0ba615a2bfc68d1d2eb119296b218f793,Ethan Arrowood,2022-06-10 16:46:46+00:00,GitHub,2022-06-10 16:46:46+00:00,"[cli] Implement `vercel.json` configuration overrides (#7811)

### Related Issues

This PR adds vercel.json configuration overrides support for both new and existing project flows through the CLI. It includes integration and unit tests.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
4bf6295d7a1d6544f195d76a2a4aedb476fa7dc1,JJ Kasper,2022-06-10 14:37:52+00:00,JJ Kasper,2022-06-10 14:37:52+00:00,"Publish Canary

 - @vercel/build-utils@4.1.1-canary.0
 - vercel@25.1.1-canary.0
 - @vercel/client@12.0.2-canary.0
 - @vercel/go@2.0.2-canary.0
 - @vercel/next@3.0.2-canary.0
 - @vercel/node@2.1.1-canary.0
 - @vercel/python@3.0.2-canary.0
 - @vercel/redwood@1.0.2-canary.0
 - @vercel/remix@1.0.2-canary.0
 - @vercel/ruby@1.3.10-canary.0
 - @vercel/static-build@1.0.2-canary.0"
a4001ce10b15ccbc9b2534c24a3bf5e4668798e1,JJ Kasper,2022-06-10 13:50:59+00:00,GitHub,2022-06-10 13:50:59+00:00,"[next] Add handling for resolving _next/data URLs (#7935)

* Add handling for resolving _next/data URLs

* update check

* update routes

* remove extra routes

* Update resolving"
2df3432d88070379a0e1a1bd7909c82289f1563d,Nathan Rajlich,2022-06-09 23:04:39+00:00,GitHub,2022-06-09 23:04:39+00:00,"[node] Add zero-config support for root-level `middleware.js`/`middleware.ts` file (#7928)

Adds support for `config.middleware` property in `@vercel/node` to output an Edge Middleware (by including a catch-all route in the output).

Also updates the zero-config detection logic to schedule a build of root-level `middleware.js`/`middleware.ts` files with `@vercel/node` with this middleware option enabled."
bcfc19de128f04f8c05ed8b03d47924cb0c9a7b2,chloetedder,2022-06-09 15:15:25+00:00,GitHub,2022-06-09 15:15:25+00:00,"[build-utils] Add getProjectPaths that will evaluate if there is a monorepo (#7826)

<img width=""1174"" alt=""Screen Shot 2022-05-19 at 3 53 55 PM"" src=""https://user-images.githubusercontent.com/35947020/169402845-4eb70a24-9954-44ac-8726-a6b56161d58c.png"">

If there is no workspace detected, we still want to check if there are potential projects in the monorepo. An example of this case would be:

<img width=""202"" alt=""Screen Shot 2022-05-19 at 10 29 12 AM"" src=""https://user-images.githubusercontent.com/35947020/169336400-e69845e3-616e-4857-80fe-c2614a65352a.png"">

The directories `backend/app-three`, `frontend/app-one`, `frontend/app-two` all have definitions within their `package.json` files that define a framework assosiated with the project. This is what distinguishes them from the `package.json` files within `backend` and `frontend`

`getProjectPaths` loops through a depth of 3 (this can be changed but in most cases of this it won't be more than 3). For each directory it recursively calls itself until it finds a `package.json` file. It then checks if the directory has a framework defined and if so it adds the path to the final return value of all projects.

If any `skipPaths` are sent into the function, no projects will be looked for within those path(s). This would include the case for a hybrid monorepo where a workspace has already been detected

### Related Issues

> Fixes #1
> Related to #2

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
04381c669ba65914e32c75c05cc50b1e7b7ee356,Matthew Stanciu,2022-06-09 06:15:30+00:00,GitHub,2022-06-09 06:15:30+00:00,"[cli] Pull correct env variables in `vc build` command (#7933)

`vc build` runs `vc pull` if no project settings are found locally. By default, `vc pull` pulls development environment variables, but we want either preview or production environment variables in the context of `vc build`. This PR adds a flag to the internal `vc pull` call to pull the correct environment variables.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
0c7b54edad6adf48505abf2cbec01691b85963bb,Steven,2022-06-08 14:44:17+00:00,Steven,2022-06-08 14:44:17+00:00,"Publish Stable

 - @vercel/build-utils@4.1.0
 - vercel@25.1.0
 - @vercel/client@12.0.1
 - @vercel/go@2.0.1
 - @vercel/next@3.0.1
 - @vercel/node@2.1.0
 - @vercel/python@3.0.1
 - @vercel/redwood@1.0.1
 - @vercel/remix@1.0.1
 - @vercel/ruby@1.3.9
 - @vercel/static-build@1.0.1
 - @vercel/static-config@2.0.1"
6d42816395b5c37c44f14e5c42af5b458a029c03,Steven,2022-06-08 12:48:04+00:00,Steven,2022-06-08 12:48:04+00:00,"Publish Canary

 - vercel@25.0.2-canary.1
 - @vercel/next@3.0.1-canary.1
 - @vercel/static-build@1.0.1-canary.1"
6fe6d05a42ad1ef9673b9b646656cab5b2c5caa1,Seiya Nuta,2022-06-08 07:30:49+00:00,GitHub,2022-06-08 07:30:49+00:00,Increase the maximum size of an edge function to 1MiB (#7903)
50a201f145ae9998da64a9063fb781d3e3ca0398,Steven,2022-06-07 21:31:43+00:00,GitHub,2022-06-07 21:31:43+00:00,"[cli][static-build] Fix case when `vc dev` is throwing the wrong error w/ BOAv3 (#7927)

Fixes an issue brought up in https://github.com/vercel/og-image/issues/207

The problem is that we allow a corner case with `vc dev` to run the build script, but this can break if the user ran `vc build` first due to the BOA V3 detection.

The workaround is to delete the BOA V3 directory when there is no Development Command provided since that will run the Build Command during development.

We also add a nicer error in the case when someone actually intended to emit BOA V3."
701a02ae9dc9a40d8edb97c95a5b53175b08bbf9,Gal Schlezinger,2022-06-07 20:36:46+00:00,GitHub,2022-06-07 20:36:46+00:00,"[next] Support Edge API Endpoints (#7905)

* Add regression test for nested middleware

* [next] Allow edge api endpoints in Next.js

This reverts commit d4cef69cc92b4f5878fa88a7b63b6c7e25d2505b (#7898)

* delete `functions`, not `middleware`

* Add an assertion

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
39f758662131ec37c467ebba5d5b618cba0c753f,agadzik,2022-06-07 16:33:07+00:00,agadzik,2022-06-07 16:33:07+00:00,"Publish Canary

 - @vercel/build-utils@4.0.1-canary.0
 - vercel@25.0.2-canary.0
 - @vercel/client@12.0.1-canary.0
 - @vercel/go@2.0.1-canary.0
 - @vercel/next@3.0.1-canary.0
 - @vercel/node@2.0.2-canary.0
 - @vercel/python@3.0.1-canary.0
 - @vercel/redwood@1.0.1-canary.0
 - @vercel/remix@1.0.1-canary.0
 - @vercel/ruby@1.3.9-canary.0
 - @vercel/static-build@1.0.1-canary.0
 - @vercel/static-config@2.0.1-canary.0"
c4a39c8d29a5ec537e84caa4845a073d59eafa95,Andrew Gadzik,2022-06-07 15:55:23+00:00,GitHub,2022-06-07 15:55:23+00:00,"[build-utils] Add getWorkspacePackagePaths function (#7859)

Gets the package paths from the workspace definition for a given git repository

```ts
/** 
 *  Gets the list of workspace package paths based on the configuration 
 * 
 * @example
 *
 * my-repo
 * |-- packages
 * |    |-- api-1
 * |    |-- api-2
 * |-- package.json
 * |-- pnpm-workspaces.yaml // packages: [""packages/*""]
 *
 * const fs = new ... // based on 'my-repo'
 * const workspace = { ..., type: ""pnpm"" }
 * getWorkspacePackagePaths({ fs, workspace }) => [
 *   ""my-repo/packages/api-1"",
 *   ""my-repo/packages/api-2""
 * ]
 */
function getWorkspacePackagePaths(fs: DetectorFilesystem, workspace: Workspace): string[]
```

### Related Issues

Closes https://github.com/vercel/vercel/issues/7749

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
3ac238cf0840faa0a2ea5714b8a1c3eeda357dfa,Nathan Rajlich,2022-06-07 02:20:08+00:00,GitHub,2022-06-07 02:20:08+00:00,"[node] Add support for `EdgeFunction` output type (#7877)

Adds support for `@vercel/node` to return an `EdgeFunction` output when it detects `runtime: 'experimental-edge'` from the static `config` object. This is implemented in `@vercel/node` so that it can share the same file extension (`.js`/`.ts`) as Node.js Serverless Functions without modifying the zero-config detection logic.

**Example:**

```js
export const config = {
  runtime: 'experimental-edge',
};

export default req => {
  return new Response(`Hi, from an Edge Function!`);
};
```"
8384813a0db221c9320d89250f868942e77e5634,Nathan Rajlich,2022-06-07 01:42:33+00:00,GitHub,2022-06-07 01:42:33+00:00,"[cli] Output `EdgeFunctions` from version 3 Builders in `vc build` (#7924)

Serializes `EdgeFunction` outputs in `vc build` when provided by a version 3 Builder."
c4587de439898e69f209b2c73b776f0a3fdfad46,Nathan Rajlich,2022-06-06 22:16:18+00:00,GitHub,2022-06-06 22:16:18+00:00,"[cli] Add initial `vc build` unit tests (#7869)

Adds some initial unit tests for the `vc build` command which includes some fixes for Windows."
d997dc4fbc746954accb9f1767a046f9827dfef5,Nathan Rajlich,2022-06-06 19:02:32+00:00,GitHub,2022-06-06 19:02:32+00:00,"[static-config] Use ""runtime"" instead of ""use"" (#7922)

The static configuration property name has been decided to be `runtime`.

This is a precursor for #7877."
d15b90bd4d67d38d425ebdea62e7f4bb1921962e,Nathan Rajlich,2022-06-06 18:42:14+00:00,GitHub,2022-06-06 18:42:14+00:00,"[build-utils] Allow `EdgeFunction` as a valid output type for version 3 Builders (#7923)

A version 3 Builder is allowed to output an `EdgeFunction` output type. This already is handled correctly by the Vercel build infrastructure."
5b31297f0c2e45fb2573a33382b8680db8f118c6,JJ Kasper,2022-06-06 17:03:31+00:00,GitHub,2022-06-06 17:03:31+00:00,"[next] Ensure middleware route comes before beforeFiles rewrites (#7912)

* Ensure middleware route comes before beforeFiles rewrites

* update test

* add version lock and more tests

* update nested middleware test for version lock"
e232566cbec464511088ee65e61e52e037b128b1,Steven,2022-06-06 01:38:44+00:00,Steven,2022-06-06 01:38:44+00:00,"Publish Stable

 - vercel@25.0.1
 - @vercel/node@2.0.1"
592689cad1bda30b3d87db41ff7a550bdc8cc478,Steven,2022-06-06 00:58:34+00:00,Steven,2022-06-06 00:58:34+00:00,"Publish Canary

 - vercel@25.0.1-canary.0
 - @vercel/node@2.0.1-canary.0"
9b08e72f763a8636eb34667b48b7de9729cda689,Steven,2022-06-06 00:36:41+00:00,GitHub,2022-06-06 00:36:41+00:00,"[node] Skip TS compile for `.d.ts` assets (#7918)

Fixes an issue where `.d.ts` assets were incorrectly being compiled after a fix to nft in https://github.com/vercel/nft/pull/289

- [Repro Steps](https://github.com/cheapsteak/repro-vercel-cli-build-dts-error)
- [Incident](https://app.kintaba.com/incident/755531679765890512)
- [Slack](https://vercel.slack.com/archives/C03JNHA844R/p1654334373086879)

<img src=""https://user-images.githubusercontent.com/229881/172055403-d2edfe1d-3a60-459f-bf40-506fea1d1ca4.png"" height=500 />"
bd0e10cfe7f2d5af37a90a0c67cd3521702cd83e,Sean Massa,2022-06-05 21:22:32+00:00,GitHub,2022-06-05 21:22:32+00:00,"[cli] update `vc env pull --help` (#7911)

* update `vc env pull --help`

* update `vc env pull` help documentation

* try longer timeout

* remove dupe ""env""

* remove unused --env option

* Update packages/cli/src/commands/env/index.ts

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
28436ade60a01f1dc0b0ea45c98208b38a82c3cd,Sean Massa,2022-06-03 15:06:36+00:00,GitHub,2022-06-03 15:06:36+00:00,[tests] increase test timeout; it has been failing recently (#7913)
de0d2fba0b32588726a2799015eaff4e6bb65ffb,Sean Massa,2022-06-02 19:17:21+00:00,Sean Massa,2022-06-02 19:17:21+00:00,"Publish Stable

 - @vercel/build-utils@4.0.0
 - vercel@25.0.0
 - @vercel/client@12.0.0
 - @vercel/frameworks@1.0.1
 - @vercel/go@2.0.0
 - @vercel/next@3.0.0
 - @vercel/node-bridge@3.0.0
 - @vercel/node@2.0.0
 - @vercel/python@3.0.0
 - @vercel/redwood@1.0.0
 - @vercel/remix@1.0.0
 - @vercel/routing-utils@1.13.4
 - @vercel/ruby@1.3.8
 - @vercel/static-build@1.0.0
 - @vercel/static-config@2.0.0"
e0900128d66d64705baefade8303125a8d447d01,Sean Massa,2022-06-02 19:01:34+00:00,GitHub,2022-06-02 19:01:34+00:00,"[cli][client][tests] update to node14-compatible target (drop support for node12) (#7865)

Node 12 is EOL and we're starting to reference packages that don't install on node lower than 14, such as nuxt@3 and remix. Let's update to 14 for now.

---

Reimplements: https://github.com/vercel/vercel/pull/7819"
8d15f30579d207c7c199800be15c4c5f1dceeb3c,Nathan Rajlich,2022-06-01 21:14:01+00:00,GitHub,2022-06-01 21:14:01+00:00,"[tests] Remove ava `compileEnhancements` property from package.json (#7904)

VS Code was complaining about this property, so I guess it's not doing anything:

> Property `compileEnhancements` is not allowed."
960c66584c58ad1e88176796db829514f5db6b15,Nathan Rajlich,2022-06-01 19:39:45+00:00,GitHub,2022-06-01 19:39:45+00:00,"[build-utils] Make `repoRootPath` non-optional (#7909)

This value is always set in the Vercel build infra, so mark the type as non-optional."
1c8f91031a31fd6c08b8f298c9592c4478cec4c5,JJ Kasper,2022-06-01 15:04:16+00:00,GitHub,2022-06-01 15:04:16+00:00,"[next] Add regression test for nested middleware (#7901)

Add regression test for nested middleware"
68cb23c3cc04e280d0cd06982bdbac19a20decbe,Steven,2022-06-01 14:31:33+00:00,GitHub,2022-06-01 14:31:33+00:00,"[cli] Add experimental corepack support (#7871)

This PR adds support for experimental [corepack](https://nodejs.org/api/corepack.html) to `vc build`.

Since this is still experimental, we only enable if the env var `ENABLE_EXPERIMENTAL_COREPACK=1` is set.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`"
94f6ae2595e544f254f2d37b763d7ee214abac2d,Nathan Rajlich,2022-06-01 01:16:24+00:00,GitHub,2022-06-01 01:16:24+00:00,"[examples] Remove `ENABLE_FILE_SYSTEM_API` env var from ""remix"" template (#7886)

Since the `@vercel/remix` Builder is now being used, this environment variable is no longer necessary."
b92aeac84d855169a9eeb93f9aef936c639b77ed,Steven,2022-06-01 00:15:00+00:00,GitHub,2022-06-01 00:15:00+00:00,"[build-utils] Fix warning for package.json engines (#7900)

This PR updates the way we handle warning for engines.node in `package.json`.

- should not warn when the engines version satisfies the project settings (previously it was an exact match)
- should warn when engines version is exact instead of range since it cannot be satisfied exactly
- should warn when engines version is greater than since it might introduce breaking changes for a future node.js version"
00420b7a0124b0a0b622f031b1afd9a4e8bfffbd,JJ Kasper,2022-05-31 23:52:50+00:00,JJ Kasper,2022-05-31 23:52:50+00:00,"Publish Canary

 - vercel@24.2.6-canary.0
 - @vercel/next@2.9.1-canary.0
 - @vercel/static-config@1.0.2-canary.0"
a5128790d0d271538741d2db529a9338ff72f594,Steven,2022-05-31 22:42:26+00:00,GitHub,2022-05-31 22:42:26+00:00,"[tests] Fix turbo cache invalidation for GH Actions `RUNNER_OS` (#7899)

This PR fixes an issue where turbo was caching the result regardless of OS by adding the env var `RUNNER_OS` to the cache key.

https://docs.github.com/en/actions/learn-github-actions/environment-variables#detecting-the-operating-system"
ae9aa91f4f558df998fb25a2eaeb5733ef0a0e10,Seiya Nuta,2022-05-31 20:44:29+00:00,GitHub,2022-05-31 20:44:29+00:00,"[static-config] Support extracting `export const config` from swc's AST (#7791)

This PR adds support for extracting `config` from swc's AST. `static-config` supports parsing from the source program but in some cases we already have parsed an AST to do other static code analysis.

### Related Issues

None

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
d4cef69cc92b4f5878fa88a7b63b6c7e25d2505b,JJ Kasper,2022-05-31 20:07:46+00:00,GitHub,2022-05-31 20:07:46+00:00,"Revert ""[next] Allow edge api endpoints in Next.js"" (#7898)

Reverts vercel/vercel#7855

We can re-land after we ensure the cases we have found failing are resolved."
323f67c31a3e0e7c23b3f241a9ed6d9dd9144b27,Sean Massa,2022-05-31 19:14:39+00:00,GitHub,2022-05-31 19:14:39+00:00,"[cli] update update-notifier to fix notification of non-latest (#7897)

Looks like this is a bug in update-notifier, but they [smoothed it over](https://github.com/yeoman/update-notifier/pull/192) with a change that was deployed in [`5.0.0`](https://github.com/yeoman/update-notifier/releases/tag/v5.0.0). Were currently on `4.1.0`.

This can cause an update notification for a PREVIOUS version, like so:

```
$  vc --version
> UPDATE AVAILABLE Run `npm i -g vercel@latest` to install Vercel CLI 24.2.5-canary.3
> Changelog: https://github.com/vercel/vercel/releases/tag/vercel@24.2.5-canary.3
Vercel CLI 24.2.5
24.2.5
```

While we're here, also sets the [`updatecheckinterval`](https://github.com/yeoman/update-notifier#updatecheckinterval) to 1 week.

---

Previous PR: https://github.com/vercel/vercel/pull/4896"
63c499a8265fc96ef446ab2ed05bc3fe3b5d0f4b,Steven,2022-05-31 18:07:25+00:00,GitHub,2022-05-31 18:07:25+00:00,"[tests] Update domain tests from .org to .com (#7896)

Use a regex matcher and change the .org to .com"
ad436313e155b0e07cb14475e11c5c12e1b36f75,Steven,2022-05-31 14:44:36+00:00,Steven,2022-05-31 14:44:36+00:00,"Publish Stable

 - @vercel/build-utils@3.1.1
 - vercel@24.2.5
 - @vercel/client@11.0.4
 - @vercel/frameworks@1.0.0
 - @vercel/go@1.4.4
 - @vercel/next@2.9.0
 - @vercel/node@1.15.4
 - @vercel/python@2.3.4
 - @vercel/redwood@0.8.4
 - @vercel/remix@0.0.2
 - @vercel/ruby@1.3.7
 - @vercel/static-build@0.26.0"
c414288b2f3c463463d68d9281341e07ae8940bd,Lee Robinson,2022-05-30 07:57:46+00:00,GitHub,2022-05-30 07:57:46+00:00,"[examples] Update SvelteKit example with latest boilerplate (#7892)

Replaces https://github.com/vercel/vercel/pull/7674 with the latest SvelteKit boilerplate."
b07ff7431f9c2e1b60afb260b112d578d71c03a8,Steven,2022-05-27 23:46:38+00:00,GitHub,2022-05-27 23:46:38+00:00,"[tests] Bump turbo to 1.2.14 (#7887)

This should fix the caching problem

https://github.com/vercel/turborepo/releases/tag/v1.2.14"
79fde4475c477d4fc669bdb490254948ffdab7a6,Steven,2022-05-27 22:59:28+00:00,GitHub,2022-05-27 22:59:28+00:00,"[build-utils][go][next][redwood][static-build] Fix path delimiter on windows (#7881)

This PR fixes an issue where the path delimiter was incorrect for windows and caused yarn (and other global CLIs) to no longer be found.

https://github.com/vercel/vercel/runs/6602572000?check_suite_focus=true#step:13:1357"
855197c699a697ea25f71f8da62d3bb95ae49d28,Nathan Rajlich,2022-05-26 19:07:09+00:00,GitHub,2022-05-26 19:07:09+00:00,"[node] Remove `mkdirp-promise` dependency (#7878)

There's no need to use this module since Node.js has `recursive: true` since Node v10.

Co-authored-by: Steven <steven@ceriously.com>"
fbd9080859cdaf42c0346ef55ffae9c358efae70,Nathan Rajlich,2022-05-26 19:05:31+00:00,GitHub,2022-05-26 19:05:31+00:00,"[tests] Add `vc build` integration test (#7876)

[cli] Add `vc build` integration test

Adds a `vc build` integration test to ensure the ncc'd CLI works as
expected to supplement the unit tests from #7869.

Co-authored-by: Steven <steven@ceriously.com>"
b5c5b7b82c1263f404f226b365b75458381de31a,Steven,2022-05-26 14:28:49+00:00,GitHub,2022-05-26 14:28:49+00:00,"[tests] Fix tests with promises (#7880)

These tests are asynchronous and would sometimes fail if the second call started before the first call finished. This PR fixes the usage since the function returns a promise."
0a072ee8504ec6de9be9fe51b1659d67f56ec875,Gal Schlezinger,2022-05-26 06:20:12+00:00,Gal Schlezinger,2022-05-26 06:20:12+00:00,"Publish Canary

 - vercel@24.2.5-canary.3
 - @vercel/next@2.8.67-canary.3"
0b56caba45c4ab0a74e7ae0a451cda033db2db04,Dalpat Rathore,2022-05-25 21:44:41+00:00,GitHub,2022-05-25 21:44:41+00:00,"[docs] Fix CONTRIBUTING.md grammar (#7575)

Fix: CONTRIBUTING.md grammar

Co-authored-by: Steven <steven@ceriously.com>"
ab3db608243abe09dd3cc201f5faa6c8669ffaae,Steven,2022-05-25 21:36:20+00:00,GitHub,2022-05-25 21:36:20+00:00,"[tests] Conditionally set env vars (#7874)

This PR is a follow up to #7873 which didn't work as intended"
f2f2ff2c67c5b50eb5af02ef1c36fb5186e89351,Steven,2022-05-25 20:54:35+00:00,GitHub,2022-05-25 20:54:35+00:00,"[tests] Skip env vars for forks (#7873)

This fixes an issue when an external contributor submits a PR and the remote cache is not accessible 

```
$ turbo run build
 ERROR No caches are enabled. You can try ""turbo login"", ""turbo link"", or ensuring you are not passing --remote-only to enable caching:  <nil>
 Packages in scope: @vercel/build-utils, @vercel/client, @vercel/frameworks, @vercel/go, @vercel/next, @vercel/node, @vercel/node-bridge, @vercel/python, @vercel/redwood, @vercel/remix, @vercel/routing-utils, @vercel/ruby, @vercel/static-build, @vercel/static-config, vercel
```"
ba7dafff71d387aba20031b5178ec47b121ebaff,Gal Schlezinger,2022-05-25 12:19:14+00:00,GitHub,2022-05-25 12:19:14+00:00,"[next] Allow edge api endpoints in Next.js (#7855)

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
987fb4d4f76086a5784747a94692ded2f4c1749c,JJ Kasper,2022-05-24 19:22:40+00:00,GitHub,2022-05-24 19:22:40+00:00,"[next] Ensure test-next-local is run in CI (#7868)

* Ensure test-next-local is run in CI

* update turbo config

* update timeout

* update flakey test"
be74f79fa06e3252519a9c0a8fd8564ab5676bae,Nathan Rajlich,2022-05-24 16:14:29+00:00,Nathan Rajlich,2022-05-24 16:14:29+00:00,"Publish Canary

 - @vercel/build-utils@3.1.1-canary.2
 - vercel@24.2.5-canary.2
 - @vercel/client@11.0.4-canary.2
 - @vercel/go@1.4.4-canary.2
 - @vercel/next@2.8.67-canary.2
 - @vercel/node@1.15.4-canary.2
 - @vercel/python@2.3.4-canary.2
 - @vercel/redwood@0.8.4-canary.2
 - @vercel/remix@0.0.2-canary.2
 - @vercel/ruby@1.3.7-canary.2
 - @vercel/static-build@0.25.3-canary.2"
86886e6b6005c84bc39afd20fa2603da03fe74a3,Andrew Gadzik,2022-05-24 14:28:32+00:00,GitHub,2022-05-24 14:28:32+00:00,"[build-utils] Add getWorkspaces helper function (#7775)

```ts
/*

  Example 1:
	
  my-repo
    |-- packages
    |    |-- api-1
    |    |-- api-2
    |-- package.json
    |-- pnpm-workspaces.yaml // packages: [""packages/*""]
	
  getWorkspaces(""my-repo"") => [
    {
      implementation: ""pnpm"",
      rootPath: ""https://github.com/.../my-repo""
    }
  ]
  
  Example 2:
	
  my-repo
    |-- backend
    |    |-- api-1
    |    |-- api-2
    |    |-- package.json // workspaces: [""api-1"", ""api-2""]
    |-- frontend
    |    |-- nextjs-app
    |    |-- gatsby-app
    |    |-- package.json
    |    |-- pnpm-workspaces.yaml // packages: [""nextjs-app"", ""gatsby-app""]
	
  getWorkspaces(""my-repo"") => [
    {
      implementation: ""yarn"",
      rootPath: ""https://github.com/.../my-repo/backend""
    }, 
    {
      implementation: ""pnpm"",
      rootPath: ""https://github.com/.../my-repo/frontend""
    }
  ]

 */
type Workspace = {
  implementation: ""yarn"" | ""npm"" | ""pnpm"" 
  rootPath: string // the path to the root of the workspace
}

function getWorkspaces(fs: DetectorFilesystem): Workspace[]
```

### Related Issues

> Closes https://github.com/vercel/vercel/issues/7730

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
e8a9000137e8c8fc7bd53d00f7cc7f1a69c00ae7,Nathan Rajlich,2022-05-24 05:36:34+00:00,GitHub,2022-05-24 05:36:34+00:00,"[cli] Symlink `@now/build-utils` when installing builders in ""vc build"" (#7844)

To support legacy Builders like `@frontity/now` which still depends on the old `@now/build-utils` package name, create a symlink to `@vercel/build-utils` to make import the package work transparently.

Depends on #7842 being merged first."
75ea68d445b9727a96c0d1d36e168d79c9b6571f,Nathan Rajlich,2022-05-23 23:38:02+00:00,GitHub,2022-05-23 23:38:02+00:00,"[cli] Convert `DevServer` ""Unit"" suite tests to ""Dev"" suite tests (#7845)

The `DevServer` class as it's currently implement is not really suitable for unit testing, since it calls `process.exit()` when shutting down the server. This causes Jest to exit prematurely, and prevents tests after these one from running. This was in fact hiding some failing tests. So these tests were ported over to be ""Dev"" suite tests which spawn a child process of `vc dev` rather than running them in-process, so that the `process.exit()` doesn't exit Jest."
a5a990995ce9dbc639959278cee370cd09777e9f,Sean Massa,2022-05-23 22:02:29+00:00,GitHub,2022-05-23 22:02:29+00:00,"[tests] improve error message when a deploy fails (#7864)

improve error message"
cd7dcc67310625359b10d77c8f9d9a5b37e1c901,Sean Massa,2022-05-23 21:00:03+00:00,GitHub,2022-05-23 21:00:03+00:00,[tests] bump node version to 14 (#7863)
c4bd462b8580df8b44669158ec5ace13cf4440de,Sean Massa,2022-05-23 20:31:24+00:00,GitHub,2022-05-23 20:31:24+00:00,"[tests] update fixture path (#7862)

It looks like the fixture location was shifted and these references to it were not updated. The crashing `dev` tests were hiding these failures."
5fc266bd8aedee83d8f138c1b6a55c705f26a0b0,Steven,2022-05-23 17:30:29+00:00,GitHub,2022-05-23 17:30:29+00:00,"[next][node] Bump `@vercel/nft` to 0.19.1 (#7860)

Bump `@vercel/nft` to 0.19.1 https://github.com/vercel/nft/releases/tag/0.19.1"
08b04d0bda5e50b0dbce6f2595207e96271fc11e,JJ Kasper,2022-05-23 15:38:42+00:00,JJ Kasper,2022-05-23 15:38:42+00:00,"Publish Canary

 - @vercel/build-utils@3.1.1-canary.1
 - vercel@24.2.5-canary.1
 - @vercel/client@11.0.4-canary.1
 - @vercel/frameworks@0.9.2-canary.0
 - @vercel/go@1.4.4-canary.1
 - @vercel/next@2.8.67-canary.1
 - @vercel/node@1.15.4-canary.1
 - @vercel/python@2.3.4-canary.1
 - @vercel/redwood@0.8.4-canary.1
 - @vercel/remix@0.0.2-canary.1
 - @vercel/ruby@1.3.7-canary.1
 - @vercel/static-build@0.25.3-canary.1"
92ae51c6a6be94b9a4aaab5b4b4d00fcedf25994,Nathan Rajlich,2022-05-23 00:24:45+00:00,GitHub,2022-05-23 00:24:45+00:00,"[examples] Add missing semi to ""solidstart"" vite config (#7858)"
909c493d1ef8fbb91bb1dbfdfa86f4ee5c556eae,JJ Kasper,2022-05-22 21:11:33+00:00,GitHub,2022-05-22 21:11:33+00:00,"[next][build-utils] Update to re-use build result type from build-utils (#7857)

### Related Issues

We were previously using a custom type in Next.js for the build result although there is an existing type for this in the build-utils package which we can centralize around. 

x-ref: https://github.com/vercel/vercel/pull/7854#issuecomment-1133934764

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
98b54ff61fa990ee22df2713816670b87a0efb0a,Gal Schlezinger,2022-05-22 17:46:49+00:00,GitHub,2022-05-22 17:46:49+00:00,"[next] Remove unused middleware definition (#7854)

Remove unused middleware definition in Next.js builder

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
3defd0b2fd7520e4c6dfda34f63466e339989ad2,JJ Kasper,2022-05-22 16:25:56+00:00,GitHub,2022-05-22 16:25:56+00:00,"[next] Fix middleware order and add e2e test (#7847)

Fix middleware order and add e2e test"
5a7851a7f7d4fdf3e99119f059fa34b897736780,Nathan Rajlich,2022-05-22 03:11:08+00:00,GitHub,2022-05-22 03:11:08+00:00,"[tests] Revert ""update CI to use node@14 and drop support for node@12 (#7819)"" (#7853)

Revert ""[tests] update CI to use node@14 and drop support for node@12 (#7819)""

This reverts commit 89b5aad36775eb897339ad79dc6d9502b7f5e28b."
7f0caa7dec8ea909442968ce430e732e7a6a148d,Nathan Rajlich,2022-05-22 03:03:06+00:00,GitHub,2022-05-22 03:03:06+00:00,"[examples] Add `vercel.json` file back to ""remix"" template for now (#7851)

This file was removed prematurely in #7831."
89b5aad36775eb897339ad79dc6d9502b7f5e28b,Sean Massa,2022-05-21 05:20:43+00:00,GitHub,2022-05-21 05:20:43+00:00,"[tests] update CI to use node@14 and drop support for node@12 (#7819)

Node 12 is EOL and we're starting to reference packages that don't install on node lower than 14, such as nuxt@3 and remix. Let's update to 14 for now."
c13775ba07cc7a6ed2470b2899ed75cadf790358,Nathan Rajlich,2022-05-20 20:24:51+00:00,GitHub,2022-05-20 20:24:51+00:00,"[frameworks] Remove `defaultHeaders` / `defaultRedirects` / `defaultRewrites` / `getFsOutputDir()` (#7832)

These properties are leftover from the previous iteration of `vc build` / File System API v2, and are no longer in use."
cc3c1d1eeb3e02c5425a06b9bdab21d81e4cf69e,Nathan Rajlich,2022-05-20 19:53:54+00:00,GitHub,2022-05-20 19:53:54+00:00,"[cli] Refactor vc build `installBuilders()` logic to not use a loop (#7842)

This will prevent the possibility of an infinite loop occurring when importing builders that throw a `MODULE_NOT_FOUND` error. Instead, we'll just try to import the builders, then run yarn if necessary, and then try to import the builders a second time when needed. If that fails then we'll throw the original error."
3aa2fbbb535068ae5111fd9b8b5f9337d1828bac,Sean Massa,2022-05-20 19:27:14+00:00,GitHub,2022-05-20 19:27:14+00:00,"[static-build] Support subset of Build Output API v2 (#7808)

* Revert ""Revert ""[static-build] Support subset of Build Output API v2"" (#7803)""

This reverts commit dfb6ef949b35acdc11d0e57d45d4c2b8eb8a9ff4.

* more specific v2 detection

* use nuxt@3.0.0-rc.3 to make sure the incident is resolved

* set test timeout to see if this works in CI

* update CI node version to 14

* add node_modules because it was taking too long to install in CI

* remove timeout

* remove node modules

* remove the nuxt@3 dependency

* finish update to node 14

* blank yarn.lock

* revert node version update

* fix revert

* remove newline"
3a8b8aa03aea11e9945b45825f45b3b8c2fd542a,Nathan Rajlich,2022-05-20 18:53:55+00:00,GitHub,2022-05-20 18:53:55+00:00,"[cli] Hard-code `VERCEL: 1` env var for ""vc build"" (#7843)

This env var should normally come from the `.env` file that is created from `vc pull`, but let's just be extra sure and hard-code it directly in to `vc build` command as well.

SvelteKit `adapter-vercel` depends on this env var being set for its detection logic."
d008617c0b6984156c41710d0ba78349ce6e9d64,Nathan Rajlich,2022-05-20 16:41:36+00:00,GitHub,2022-05-20 16:41:36+00:00,"[frameworks] Use `@vercel/remix` Builder for ""remix"" preset (#7831)

Specify the `useRuntimes` property for the ""remix"" framework
to use the `@vercel/remix` Builder.

The `ENABLE_FILE_SYSTEM_API` env var is no longer necessary so the
`vercel.json` file from the Remix template has also been deleted."
8aecb99447ca99086612ac96d217e941d3ce579c,Steven,2022-05-20 15:43:20+00:00,GitHub,2022-05-20 15:43:20+00:00,"[cli] Recommend `vc env` instead of `vc secrets` (#6217)

We no longer need `vercel secrets` command. The former use cases can be solved with `vercel env`.

This adds a note recommending to use `vc env` as an alternative.

<img width=""544"" alt=""Screen Shot 2021-08-11 at 1 38 18 PM"" src=""https://user-images.githubusercontent.com/71256/129101031-73e915dd-8253-4901-8e34-4b37d9516100.png"">
<img width=""565"" alt=""Screen Shot 2021-08-11 at 1 41 06 PM"" src=""https://user-images.githubusercontent.com/71256/129101036-2ed053dc-3de6-4fc1-8071-1bf9206323c9.png"">"
1793fa643fc5616c9f8ba16f270ff6acf6bce78f,Andrew Gadzik,2022-05-20 15:20:50+00:00,GitHub,2022-05-20 15:20:50+00:00,"Add list of supported monorepo managers (#7760)

This file will mimic the structure of `vercel/frameworks/frameworks.ts` in the sense that it defines the list of supported monorepo managers.  These are the ones were targeting for the initial launch,

- Turborepo

```ts
export const monorepoManagers = [
  {
    name: ""Turborepo"",
    slug: ""turbo"",
    detectors: {
      every: [
        {
          path: 'turbo.json'
        },
      ],
    },
  },
]
```

### Related Issues

> Closes https://github.com/vercel/vercel/issues/7757

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
913683a8e622806f6886fef55e4b163bb104f54c,Nathan Rajlich,2022-05-20 14:58:39+00:00,GitHub,2022-05-20 14:58:39+00:00,"[next] Use `substring()` instead of `substr()` (#7839)

Fixes linting warnings, i.e.:

> packages/next/src/server-build.ts#L858
>
> substr() is deprecated, use slice() or substring() instead"
0d1dc23d0dc692963dc01c68b5f5b52827de8127,Nathan Rajlich,2022-05-20 01:16:09+00:00,GitHub,2022-05-20 01:16:09+00:00,"[cli] Don't use `tree-kill` for shutting down `startDevServer()` process in `vc dev` (#7830)

Follow-up to #7824 since using `tree-kill` here seems to make a CLI test hang forever."
e829ce47c356a06564551349e771b457ea95ac74,Nathan Rajlich,2022-05-19 23:56:36+00:00,Nathan Rajlich,2022-05-19 23:56:36+00:00,"Publish Canary

 - @vercel/build-utils@3.1.1-canary.0
 - vercel@24.2.5-canary.0
 - @vercel/client@11.0.4-canary.0
 - @vercel/go@1.4.4-canary.0
 - @vercel/next@2.8.67-canary.0
 - @vercel/node@1.15.4-canary.0
 - @vercel/python@2.3.4-canary.0
 - @vercel/redwood@0.8.4-canary.0
 - @vercel/remix@0.0.2-canary.0
 - @vercel/ruby@1.3.7-canary.0
 - @vercel/static-build@0.25.3-canary.0"
474770e9b002c9a63790142c1bac7fbcc6a2c65e,Nathan Rajlich,2022-05-19 22:54:00+00:00,GitHub,2022-05-19 22:54:00+00:00,"[remix] Add `@vercel/remix` Builder (#7814)

Adds a new Builder for the Remix framework. This Builder has support for a few different configurations of Remix including the ""just the basics"" Remix server as well as the ""vercel"" server build target configuration. If the project does not have the `@remix-run/vercel` runtime adapter as a dependency in package.json then this Builder will implicitly add it when generating the SSR serverless function.

In a follow-up PR, we can make this Builder be used in the frameworks configuration so that it is executed when `remix` framework is selected for the project, and we can update the remix example template in this repo to no longer require the `ENABLE_FILE_SYSTEM_API` env var."
e762d8d4e80f1322ed6e604b56ad4814bbc3b1d3,Nathan Rajlich,2022-05-19 22:11:07+00:00,GitHub,2022-05-19 22:11:07+00:00,"[cli] Add `vercel build` command (#7673)

This PR adds the latest iteration of the `vc build` command which invokes the Builders that a Project depends on locally and serializes the output into the `.vercel/output` directory."
6e8935883b874d68499283e7a3081a1e2824cbee,Steven,2022-05-19 20:30:30+00:00,Steven,2022-05-19 20:30:30+00:00,"Publish Stable

 - @vercel/build-utils@3.1.0
 - vercel@24.2.4
 - @vercel/client@11.0.3
 - @vercel/frameworks@0.9.1
 - @vercel/go@1.4.3
 - @vercel/next@2.8.66
 - @vercel/node-bridge@2.2.2
 - @vercel/node@1.15.3
 - @vercel/python@2.3.3
 - @vercel/redwood@0.8.3
 - @vercel/routing-utils@1.13.3
 - @vercel/ruby@1.3.6
 - @vercel/static-build@0.25.2
 - @vercel/static-config@1.0.1"
1c3497dc746ffef7a16747b25f3fc8c99f2294f2,Steven,2022-05-19 20:18:29+00:00,Steven,2022-05-19 20:18:29+00:00,"Publish Canary

 - vercel@24.2.4-canary.1
 - @vercel/next@2.8.66-canary.1
 - @vercel/node@1.15.3-canary.1
 - @vercel/redwood@0.8.3-canary.1"
9836fdb5ca8ff428c9c8fac82efb77aa956bf640,JJ Kasper,2022-05-19 19:49:48+00:00,GitHub,2022-05-19 19:49:48+00:00,"[next][node][redwood] Update to latest version of @vercel/nft (#7827)

### Related Issues

x-ref: https://github.com/vercel/nft/releases/tag/0.19.0

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
d6f88f019f03eb7e39896a5272e7ab7db896138b,JJ Kasper,2022-05-19 19:23:29+00:00,GitHub,2022-05-19 19:23:29+00:00,"[next] Fix loading next launcher with type: module in package.json (#7828)

### Related Issues

Currently if you have a `package.json` with `type: 'module'` the launcher will fail to load as it is not using ESM and isn't using the `.cjs` extension. This corrects the extension per the below error message. 

```sh
ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/var/task/package.json' contains ""type"": ""module"". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
```

x-ref: https://github.com/vercel/next.js/issues/36903

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
0f720472c4ead9350bc57a190cc5390ee5823d52,JJ Kasper,2022-05-19 19:01:13+00:00,GitHub,2022-05-19 19:01:13+00:00,"[cli] Migrate Dev tests from `ava` to `jest` (#7822)

* Migrate ava cli dev tests to jest

* remove outdated test

* update tests

* Update utils

* update stdio to fix stalling

* test stdio tests

* add debug logs

* more logs

* use strip ansi

* update

* add exit flag and fix next dev test

* update timeout for mac ci

* update cancel

* update cancel tests.yml -> test.yml

* update other ids -> names

* remove outdated test

* de-dupe scripts

* remove redwood dev test due to size"
8d0c5114e4f45f93272495ec9ea1b10e4bc0d282,JJ Kasper,2022-05-19 18:35:26+00:00,GitHub,2022-05-19 18:35:26+00:00,Update to latest version of turbo (#7829)
e3c4435606bf0e3708b2cd7eeb4cb2be0b84009a,Nathan Rajlich,2022-05-19 16:27:51+00:00,GitHub,2022-05-19 16:27:51+00:00,"[cli] Fix ""now-dev-next"" and ""now-dev-static-build-routing"" unit tests (#7824)

These two tests have been problematic on MacOS for a long time,
but now that we've re-introduced `@vercel/next` into this repo,
they've started to fail on Linux/Windows as well.

So the idea is to use the `devCommand` property so that
`@vercel/next` Builder doesn't get invoked at all.

Since the `devCommand` property was not yet being unit tested,
some logic in `vc build` needed to be adjusted in order to properly
shut down the dev command (via `tree-kill` module) when the
process was being stopped in order to cleanly shut down."
234c4dfa844a102cc2165b768bb93ff41695d522,Steven,2022-05-19 15:43:27+00:00,GitHub,2022-05-19 15:43:27+00:00,[tests] Update codeowners (#7825)
acd756436cfc0ce6fb66f741c673f29cd6fd7e6a,Nathan Rajlich,2022-05-19 05:04:58+00:00,GitHub,2022-05-19 05:04:58+00:00,"[node] Fix `11-symlinks` integration test fixture (#7823)

The `symlink` symlink wasn't being persisted through Turbo's cache,
so this test was failing. So move the symlink directly into the git repo
since there's no need to create it at build-time (git can store symlinks
just fine).

Additionally, the test itself was not testing that the symlink was indeed
re-created as a symlink from within the lambda environment (it actually
wasn't, due to the upload code not considering symlinks), so the test
has been updated to test for that as well."
f26858b735ad5d54e01afa67133b9f9456fbe72f,Nathan Rajlich,2022-05-18 23:54:08+00:00,Nathan Rajlich,2022-05-18 23:54:08+00:00,"Publish Canary

 - @vercel/build-utils@3.0.2-canary.0
 - vercel@24.2.4-canary.0
 - @vercel/client@11.0.3-canary.0
 - @vercel/frameworks@0.9.1-canary.0
 - @vercel/go@1.4.3-canary.0
 - @vercel/next@2.8.66-canary.0
 - @vercel/node-bridge@2.2.2-canary.0
 - @vercel/node@1.15.3-canary.0
 - @vercel/python@2.3.3-canary.0
 - @vercel/redwood@0.8.3-canary.0
 - @vercel/routing-utils@1.13.3-canary.0
 - @vercel/ruby@1.3.6-canary.0
 - @vercel/static-build@0.25.2-canary.0
 - @vercel/static-config@1.0.1-canary.0"
623e43f865e927406200849aa3d7b6a9e9c2dcfc,Nathan Rajlich,2022-05-18 23:51:48+00:00,GitHub,2022-05-18 23:51:48+00:00,[next] Add `@vercel/next` Builder (#7793)
3e696513a27cd4a5a54d44a7a0e229fe068e92c6,Sean Massa,2022-05-18 21:35:15+00:00,GitHub,2022-05-18 21:35:15+00:00,"[examples] add `.output` to `.vercelignore` (#7817)

When running `nuxi build` locally, you'll end up with a `.output` directory. This is not used to produce a vercel deployment and can cause confusion with Build Output API v2 (which also expects a `.output` directory). It's better to leave this ignored."
285f62c9d0f2cb7c9104e0c777643322ee084b8a,JJ Kasper,2022-05-18 21:02:36+00:00,GitHub,2022-05-18 21:02:36+00:00,"Remove un-needed use of secret for team as it mangles logs (#7818)

### Related Issues

This removes the secret for turbo team as it filters anywhere vercel is printed in the logs and it doesn't really need to be secret. 

x-ref: https://github.com/vercel/vercel/runs/6496893033?check_suite_focus=true

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
c43db1788c9c1f2a47c4b1c809520e48a4951669,JJ Kasper,2022-05-18 20:27:20+00:00,GitHub,2022-05-18 20:27:20+00:00,"[tests] Add cross platform chunked testing and leverage turbo more (#7795)

* [tests] Use `turbo` for unit tests

* .

* .

* Revert "".""

This reverts commit 3d6204fef3fda3c7b4bf08955a186fe806d7c597.

* Add ""src/util/constants.ts"" to outputs

* .

* Add `@vercel/node-bridge` outputs

* .

* Mac and Windows

* .

* Node 14

* .

* .

* Add templates to CLI output

* Run only selected test files

* Add cross platform testing

* make test paths relative and have minimum per chunk

* add install arg

* update shell

* bump cache key

* use backslashes on windows

* pass tests as arg

* update script name

* update turbo config

* forward turbo args correctly

* dont use backslashes

* chunk integration tests instead

* update env

* separate static-build tests

* ensure unit test turbo cache is saved

* ensure turbo cache is saved for dev/cli

* fix cache key and update timeout

* Increase static-build unit test timeout

* Leverage turbo remote caching instead of actions/cache

* apply suggestions and test chunking itself

* update other ci jobs

* fix test collecting

Co-authored-by: Nathan Rajlich <n@n8.io>"
fc2eb1a30d334309bcc0debe4be78a6d4272b7c8,haitrungle,2022-05-18 17:42:24+00:00,GitHub,2022-05-18 17:42:24+00:00,[examples] Fix typo in SolidStart link (#7589)
ecf194b7c1d3714085088e5eb7b1a39bbfbea379,Sean Massa,2022-05-17 17:12:47+00:00,GitHub,2022-05-17 17:12:47+00:00,"[tests] improve platform-based skips (#7802)

Co-authored-by: Steven <steven@ceriously.com>"
c14e5689f1d09e145dc377ef7f81c46458b1cc1f,Steven,2022-05-16 18:44:09+00:00,GitHub,2022-05-16 18:44:09+00:00,"[tests] Skip broken go test (#7809)

This test was added several years ago, before the monorepo in https://github.com/vercel/vercel/pull/2812 but it was never working correctly due to the way zero config behaves differently than the test with `builds` in vercel.json

We can fix it in a follow up PR"
54dfe747e2254f57e092c5b426d6efed3542bfa9,Steven,2022-05-16 16:06:39+00:00,GitHub,2022-05-16 16:06:39+00:00,"[build-utils] Deprecate Node.js 12.x with warning (#7779)

Node.js 12 reached EOL April 2022 so its time to notify customers.

This PR will warn starting today and then error once the discontinue date is reached in a couple months."
2afc8db8e77faeea502069cc88e01fbab7e0a715,Steven,2022-05-13 22:30:15+00:00,Steven,2022-05-13 22:30:15+00:00,"Publish Stable

 - vercel@24.2.3
 - @vercel/static-build@0.25.1"
cc628dd9fbd32e4e0e4b242fc9bcb619f3030619,Steven,2022-05-13 22:20:41+00:00,Steven,2022-05-13 22:20:41+00:00,"Publish Canary

 - vercel@24.2.3-canary.0
 - @vercel/static-build@0.25.1-canary.0"
dfb6ef949b35acdc11d0e57d45d4c2b8eb8a9ff4,Steven,2022-05-13 22:19:38+00:00,GitHub,2022-05-13 22:19:38+00:00,"Revert ""[static-build] Support subset of Build Output API v2"" (#7803)

Revert ""[static-build] Support subset of Build Output API v2 (#7690)""

This reverts commit 05243fb6e9e44fd65c8e7cac574ab5dfccad0eb7."
cd4799b5d58980fda9ecd9f996187d52b768a621,Sean Massa,2022-05-13 17:49:36+00:00,GitHub,2022-05-13 17:49:36+00:00,"[cli] distinguish error messages (#7794)

* distinguish error messages

* use correct response and assertion

* remove check for APIError because getUser does not always throw those"
5e66d4b2ccd80a7e6a21d53cf4be3b11f2861513,Steven,2022-05-12 21:19:06+00:00,Steven,2022-05-12 21:19:06+00:00,"Publish Stable

 - @vercel/build-utils@3.0.1
 - vercel@24.2.2
 - @vercel/client@11.0.2
 - @vercel/go@1.4.2
 - @vercel/node@1.15.2
 - @vercel/python@2.3.2
 - @vercel/redwood@0.8.2
 - @vercel/ruby@1.3.5
 - @vercel/static-build@0.25.0"
44d7473e7c8daf2ab99135e154e27e9aa50e574d,Ethan Arrowood,2022-05-12 19:48:21+00:00,Ethan Arrowood,2022-05-12 19:48:21+00:00,"Publish Canary

 - @vercel/redwood@0.8.2-canary.2
 - @vercel/static-build@0.24.2-canary.2"
fddec1286c7cb5e8ad5ba0473dc80087bedd06f2,Ethan Arrowood,2022-05-12 19:47:09+00:00,GitHub,2022-05-12 19:47:09+00:00,"[redwood][static-build] move path logic up so both commands get pnpm7 (#7792)

move path logic up so both commands get pnpm7"
6e5e700e8d967914574bf7952ed3995a25022f50,Ethan Arrowood,2022-05-12 15:04:20+00:00,Ethan Arrowood,2022-05-12 15:04:20+00:00,"Publish Canary

 - vercel@24.2.2-canary.2
 - @vercel/node@1.15.2-canary.1
 - @vercel/redwood@0.8.2-canary.1
 - @vercel/static-build@0.24.2-canary.1"
b6e8609b83e490b58940f370eb0e3db526a3f598,Ryan Carniato,2022-05-12 06:12:53+00:00,GitHub,2022-05-12 06:12:53+00:00,[examples] Update SolidStart to Build Output API v3 (#7790)
78b7bd5ec82f0bacadc6a6be8cb26ab8e3901d43,Ethan Arrowood,2022-05-11 23:37:01+00:00,GitHub,2022-05-11 23:37:01+00:00,"[redwood][static-build] add pnpm7 detection logic to builders (#7787)

add pnpm7 detection logic to builders"
4104a45c2dcac7af481ba0e6a20b3ff6c369a2ae,Steven,2022-05-11 23:36:18+00:00,GitHub,2022-05-11 23:36:18+00:00,"[tests] Fix node tests (#7786)

Since we released Node.js 16, these tests now resolve `engines` differently"
4c20218e05122c439e5fa4f4997e9c5a5c7a93e2,Ethan Arrowood,2022-05-11 21:47:48+00:00,Ethan Arrowood,2022-05-11 21:47:48+00:00,"Publish Canary

 - @vercel/build-utils@3.0.1-canary.1
 - vercel@24.2.2-canary.1
 - @vercel/client@11.0.2-canary.0
 - @vercel/go@1.4.2-canary.0
 - @vercel/node@1.15.2-canary.0
 - @vercel/python@2.3.2-canary.0
 - @vercel/redwood@0.8.2-canary.0
 - @vercel/ruby@1.3.5-canary.0
 - @vercel/static-build@0.24.2-canary.0"
02a0004719138ceb2d3bbdcd3c061cd1d0edbc96,Ethan Arrowood,2022-05-11 21:37:44+00:00,GitHub,2022-05-11 21:37:44+00:00,"[build-utils] Fix pnpm 7 path setting (#7785)

### Related Issues

Fixes pnpm 7 support. Now uses a yarn installed version and drops an unnecessary check for node version.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
123bffb77600467cf05a5b916f9adad97517e9a9,Steven,2022-05-10 18:34:46+00:00,GitHub,2022-05-10 18:34:46+00:00,[examples] Pin Ember to 14.x (#7782)
074535f27c3ee03e1e15fe04a9ec85236e4f121f,Steven,2022-05-10 17:20:07+00:00,GitHub,2022-05-10 17:20:07+00:00,"[build-utils] Downgrade remix and solidstart to Node.js 14 (fsapi) (#7781)

These frameworks (remix and solidstart) use the legacy file system api (v2) so they can't support Node.js 16.x so we change engines to pin to Node.js 14.x

I also added the missing `ENABLE_FILE_SYSTEM_API=1` env var to solidstart to match remix.

https://vercel.com/docs/file-system-api/v2"
05243fb6e9e44fd65c8e7cac574ab5dfccad0eb7,Sean Massa,2022-05-09 21:01:26+00:00,GitHub,2022-05-09 21:01:26+00:00,[static-build] Support subset of Build Output API v2 (#7690)
097725580cc7a555a2780e3885e3c89ef8dbf35d,Sean Massa,2022-05-09 21:00:49+00:00,GitHub,2022-05-09 21:00:49+00:00,"[tests] skip flakey test (#7777)

Skips two flakey tests on Mac OS only. The error often looks like:

<img width=""1453"" alt=""Screen Shot 2022-05-09 at 2 26 52 PM"" src=""https://user-images.githubusercontent.com/41545/167483088-49498f69-5470-4c1a-98f5-96ca811b838b.png"">

Created internal tracking card to dig deeper. Skipping this for now will unclog other work."
4b09c89e7d09b245e58b0a2c4693f83fe8f7d71f,Andrew Gadzik,2022-05-09 18:51:04+00:00,GitHub,2022-05-09 18:51:04+00:00,"[build-utils] Fix version mismatch (#7776)

Fixes https://github.com/vercel/vercel/commit/3a1eede63bb70b897697e68c018d034c1dc5dc20"
3a1eede63bb70b897697e68c018d034c1dc5dc20,agadzik,2022-05-09 17:51:37+00:00,agadzik,2022-05-09 17:51:37+00:00,"Publish Canary

 - @vercel/build-utils@3.0.1-canary.0
 - vercel@24.2.2-canary.0"
9cee0dd5d79e5ca123c7381839894ad25f100994,agadzik,2022-05-09 17:47:11+00:00,agadzik,2022-05-09 17:47:11+00:00,BREAKING CHANGE: updating build-utils to version 3 for DetectorFilesystem changes
b801c6e5938be12ba0842b50affde6be1680de7f,John Pham,2022-05-09 17:24:43+00:00,GitHub,2022-05-09 17:24:43+00:00,"[cli] Track source of getting decrypted environment variables (#7754)

* Track source of getting decrypted environment variables

* Add source as a query param

* Revert lock file changes

* Change source from strings to type

* Differential between pull and env pull"
505050b92313265adde6ae6041fe9cd29dd6168d,Andrew Gadzik,2022-05-09 17:12:30+00:00,GitHub,2022-05-09 17:12:30+00:00,"[build-utils] Add readdir and chdir functions to DetectorFilesystem (#7751)

In order to support various `fs` operations for monorepo detection, the team needs to add two new abstract functions to `DetectorFilesystem` in order to traverse down into children directories

* readdir
* chdir

```ts
interface Stat {
  name: string
  path: string
  type: ""file"" | ""dir""
}

export abstract class DetectorFilesystem {
  ...
  /**
   * Returns a list of Stat objects from the current working directory.
   * 
   * @example
   * 
   * const url = ""https://github.com/vercel/front""
   * const fs = new GitDetectorFilesystem(...) // based on url
   *
   * // calls ""https://api.github.com/repos/vercel/front/contents"" behind the scenes
   * await fs.readdir() => [
   *    { name: ""docs"", path: ""docs"", type: ""dir"" },
   *    { name: ""front"", path: ""front"", type: ""dir"" },
   *    ...,
   *    { name: ""package.json"", path: ""package.json"", type: ""file"" },
   * ]
   */
   protected abstract _readdir(name: string): Promise<Stat[]>;

 /**
   * Changes the current directory to the specified path and returns a new instance of DetectorFilesystem.
   * 
   * @example
   * 
   * my-repo
   * |-- backend
   * |    |-- api-1
   * |    |-- api-2
   * |    |-- package.json // workspaces: [""api-1"", ""api-2""]
   * |    |-- yarn.lock
   * |-- frontend
   * |    |-- nextjs-app
   * |    |-- gatsby-app
   * |    |-- package.json
   * |    |-- pnpm-workspaces.yaml // packages: [""nextjs-app"", ""gatsby-app""]
   * 
   * const fs = new (...) // based on ""my-repo"" as the root
   * const backendFs = fs.chdir(""backend"")
   * const frontendFs = fs.chdir(""frontend"")
   * 
   * const backendWorkspaceManager = detectFramework({ fs: backendFs, frameworkList: workspaceManagers }) // ""yarn""
   * const frontendWorkspaceManager = detectFramework({ fs: frontendFs, frameworkList: workspaceManagers }) // ""pnpm""
   */
   protected abstract _chdir(name: string): DetectorFilesystem
   ...
}
```

### Related Issues

> Related to https://github.com/vercel/vercel/issues/7750

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
15c7ad241a44d037ceed0101b89e3a73f09fab2b,Steven,2022-05-09 14:41:56+00:00,Steven,2022-05-09 14:41:56+00:00,"Publish Stable

 - @vercel/build-utils@2.17.0
 - vercel@24.2.1
 - @vercel/client@11.0.1
 - @vercel/frameworks@0.9.0
 - @vercel/go@1.4.1
 - @vercel/node@1.15.1
 - @vercel/python@2.3.1
 - @vercel/redwood@0.8.1
 - @vercel/ruby@1.3.4
 - @vercel/static-build@0.24.1"
ec57654b5bb44bca26ed665ec68995cca0948825,Steven,2022-05-09 14:13:58+00:00,Steven,2022-05-09 14:13:58+00:00,"Publish Canary

 - @vercel/build-utils@2.16.1-canary.4
 - vercel@24.2.1-canary.4
 - @vercel/client@11.0.1-canary.4
 - @vercel/go@1.4.1-canary.4
 - @vercel/node@1.15.1-canary.4
 - @vercel/python@2.3.1-canary.4
 - @vercel/redwood@0.8.1-canary.4
 - @vercel/ruby@1.3.4-canary.4
 - @vercel/static-build@0.24.1-canary.4"
3b9a9878bc841aa972b3d60223f38ae7f1b2c48e,Steven,2022-05-09 14:13:11+00:00,GitHub,2022-05-09 14:13:11+00:00,"[build-utils] Add Node.js 16.x (#7772)

Add support for Node.js 16

- Related to https://github.com/aws/aws-lambda-base-images/issues/14#issuecomment-1120864028"
70b7db1a153efdf707d674b66b2ca97afc152046,Nathan Rajlich,2022-05-09 13:23:10+00:00,GitHub,2022-05-09 13:23:10+00:00,"[node] Move `@types/jest` to ""devDependencies"" (#7768)

This should be a dev dep."
41d66661399754aed76a655c92f28c19afd0e8f1,Nathan Rajlich,2022-05-07 23:08:08+00:00,Nathan Rajlich,2022-05-07 23:08:08+00:00,"Publish Canary

 - @vercel/build-utils@2.16.1-canary.3
 - vercel@24.2.1-canary.3
 - @vercel/client@11.0.1-canary.3
 - @vercel/frameworks@0.8.1-canary.1
 - @vercel/go@1.4.1-canary.3
 - @vercel/node@1.15.1-canary.3
 - @vercel/python@2.3.1-canary.3
 - @vercel/redwood@0.8.1-canary.3
 - @vercel/ruby@1.3.4-canary.3
 - @vercel/static-build@0.24.1-canary.3"
2857219f8938a92baaaa80fb9e3afea67838ac97,Nathan Rajlich,2022-05-07 18:57:14+00:00,Nathan Rajlich,2022-05-07 18:57:14+00:00,"Fix ""astro"" slug"
246c2a0f5d43272df7625d31f31fed09c73471e0,Tony Sullivan,2022-05-06 23:51:42+00:00,GitHub,2022-05-06 23:51:42+00:00,[frameworks] Add Astro (#7747)
d91bca7d6bc8066690c0db4b11990a354d13ebbd,Ethan Arrowood,2022-05-06 20:16:00+00:00,Ethan Arrowood,2022-05-06 20:16:00+00:00,"Publish Canary

 - @vercel/build-utils@2.16.1-canary.2
 - vercel@24.2.1-canary.2
 - @vercel/client@11.0.1-canary.2
 - @vercel/frameworks@0.8.1-canary.0
 - @vercel/go@1.4.1-canary.2
 - @vercel/node@1.15.1-canary.2
 - @vercel/python@2.3.1-canary.2
 - @vercel/redwood@0.8.1-canary.2
 - @vercel/ruby@1.3.4-canary.2
 - @vercel/static-build@0.24.1-canary.2"
be54fce67bb820f5ce63f88eab02e6539ff7f381,Ethan Arrowood,2022-05-06 19:47:41+00:00,GitHub,2022-05-06 19:47:41+00:00,"[build-utils] add pnpm7 to path when lockfile v5.4 is detected (#7758)

### Related Issues

Adds support for `pnpm@7` using a similar lock file detection and path setting method that `npm@7` uses

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
7753bb8d89ea63e766333e4b9176fb5ef8662c7a,Sean Massa,2022-05-06 07:06:07+00:00,GitHub,2022-05-06 07:06:07+00:00,"[cli] check prebuilt target env against deploy target env (#7748)

This check prevents a user from creating a build output targeting one environment (like `preview`) and deploying targeting another environment (like `production`). It checks `.vercel/output/builds.json` for the `target` property to decide this. If that file is missing, the check is not run."
ce17ac5c353edabc007131e900469b116dea97aa,Logan McAnsh,2022-05-06 02:13:44+00:00,GitHub,2022-05-06 02:13:44+00:00,"[frameworks] Update Remix detection to check for ""remix.config.js"" (#7761)

The ""remix"" magic package is no longer preferred by Remix,
so anyone who is using a modern template won't have it installed.

Checking for `remix.config.js` is safer detection logic."
8006fc32b83bd236a01be03a08e583599a58aa6c,Sean Massa,2022-05-05 22:40:26+00:00,GitHub,2022-05-05 22:40:26+00:00,"[cli] require non-TTY uses of `pull` to also pass `--yes` (#7700)

Checks for `TTY` input to decide to handle the command or not. If the input is not TTY and the user did not pass the `--yes` option, the CLi will exit with the message:

> Command `vercel pull` requires confirmation. Use option ""--yes"" to confirm."
8038a90db192b87d2f8799090d8eb92fd15af25b,Nathan Rajlich,2022-05-05 19:13:01+00:00,GitHub,2022-05-05 19:13:01+00:00,"[node] Use TypeScript for unit tests (#7756)

Random change I had in my working directory."
f88c862e9d9d4ad385e54d5fecaa0306a6ed5612,agadzik,2022-05-05 18:11:13+00:00,agadzik,2022-05-05 18:11:13+00:00,"Publish Canary

 - @vercel/build-utils@2.16.1-canary.1
 - vercel@24.2.1-canary.1
 - @vercel/client@11.0.1-canary.1
 - @vercel/go@1.4.1-canary.1
 - @vercel/node@1.15.1-canary.1
 - @vercel/python@2.3.1-canary.1
 - @vercel/redwood@0.8.1-canary.1
 - @vercel/ruby@1.3.4-canary.1
 - @vercel/static-build@0.24.1-canary.1"
91708203719d6be3c29808784fd08f36a12b6223,Nathan Rajlich,2022-05-05 17:06:20+00:00,GitHub,2022-05-05 17:06:20+00:00,"[build-utils] Add `ShouldServe` type (#7755)

Version 3 Builders can define a `shouldServe()` function that is used in `vercel dev`, so add the proper type for that."
c881546e0efdcf5c0707de47822001f887c00b4f,Andrew Gadzik,2022-05-05 14:44:34+00:00,GitHub,2022-05-05 14:44:34+00:00,"[build-utils] Add supported list of workspace managers (#7737)

In order to support monorepo detection, we need to build out the list of supported workspace managers so that our helper functions and API endpoints can utilize the same `detectFramework` function / logic to detect a workspace manager for a given git repository.

### Related Issues

- Closes https://github.com/vercel/vercel/issues/7731

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
fa21db98e4925517935bf1d59ecc836e7621542c,Nathan Rajlich,2022-05-04 17:15:54+00:00,GitHub,2022-05-04 17:15:54+00:00,"[cli] Revert ""Use `@vercel/fetch-retry` in CLI integration tests"" (#7738)

This reverts commit 03a8fbd3a738604e03f81a0f906f998a2114f744 (#7360)."
8eabbfc6667399fce2a9060fd48a0d7c635a2a62,Ethan Arrowood,2022-05-02 17:33:22+00:00,Ethan Arrowood,2022-05-02 17:33:22+00:00,"Publish Canary

 - @vercel/build-utils@2.16.1-canary.0
 - vercel@24.2.1-canary.0
 - @vercel/client@11.0.1-canary.0
 - @vercel/go@1.4.1-canary.0
 - @vercel/node@1.15.1-canary.0
 - @vercel/python@2.3.1-canary.0
 - @vercel/redwood@0.8.1-canary.0
 - @vercel/ruby@1.3.4-canary.0
 - @vercel/static-build@0.24.1-canary.0"
6783f7afc9b5673956abc0de395a27c987355392,Ethan Arrowood,2022-05-02 17:22:01+00:00,GitHub,2022-05-02 17:22:01+00:00,"[build-utils] Fix package manager auto detection precedence (#7733)

### Related Issues

improves package manager auto detection so that when multiple lock files are found, the highest priority one is selected rather than defaulting to yarn. 

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
a400b9b29d171232f4649e67e1fdcf4fb8d6a4c8,Steven,2022-04-29 18:11:32+00:00,Steven,2022-04-29 18:11:32+00:00,"Publish Stable

 - @vercel/build-utils@2.16.0
 - vercel@24.2.0
 - @vercel/client@11.0.0
 - @vercel/frameworks@0.8.0
 - @vercel/go@1.4.0
 - @vercel/node-bridge@2.2.1
 - @vercel/node@1.15.0
 - @vercel/python@2.3.0
 - @vercel/redwood@0.8.0
 - @vercel/routing-utils@1.13.2
 - @vercel/ruby@1.3.3
 - @vercel/static-build@0.24.0
 - @vercel/static-config@1.0.0"
b549c371492206857c78f1e1e7e0d3e3d246b033,Steven,2022-04-29 02:25:24+00:00,GitHub,2022-04-29 02:25:24+00:00,[build-utils][static-build] Replace 00a0 with space (#7732)
30d5e64291c8a82be9de7d32e3df4860ecc63b5c,Nathan Rajlich,2022-04-29 00:50:59+00:00,Nathan Rajlich,2022-04-29 00:50:59+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.6
 - vercel@24.1.1-canary.8
 - @vercel/client@10.4.2-canary.7
 - @vercel/go@1.3.3-canary.6
 - @vercel/node@1.14.2-canary.7
 - @vercel/python@2.2.3-canary.6
 - @vercel/redwood@0.7.1-canary.6
 - @vercel/ruby@1.3.3-canary.6
 - @vercel/static-build@0.23.2-canary.6"
47c2c361d2da176ad89d0722e45f3a10eb5b7fa9,Nathan Rajlich,2022-04-29 00:47:10+00:00,GitHub,2022-04-29 00:47:10+00:00,"[build-utils] Update ""yazl"" dependency (#7734)

The older version of ""yazl"" was using `new Buffer()` which causes
deprecation warnings to be printed. The latest version avoids that."
438576fc7c392e754d1fc85fc1d9f3122e80d015,Nathan Rajlich,2022-04-28 18:53:39+00:00,Nathan Rajlich,2022-04-28 18:53:39+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.5
 - vercel@24.1.1-canary.7
 - @vercel/client@10.4.2-canary.6
 - @vercel/frameworks@0.7.2-canary.1
 - @vercel/go@1.3.3-canary.5
 - @vercel/node@1.14.2-canary.6
 - @vercel/python@2.2.3-canary.5
 - @vercel/redwood@0.7.1-canary.5
 - @vercel/ruby@1.3.3-canary.5
 - @vercel/static-build@0.23.2-canary.5
 - @vercel/static-config@1.0.0-canary.1"
b30343ef7ba929bd7aaa7a4ce7a9ed84af185294,Steven,2022-04-28 18:52:46+00:00,GitHub,2022-04-28 18:52:46+00:00,[tests] Bump dependencies for jest/eslint/prettier/turbo/etc (#7727)
2dc0dfa572c7d02b8ca3cbf7401df7dbeb7f93f6,Ethan Arrowood,2022-04-28 04:17:44+00:00,GitHub,2022-04-28 04:17:44+00:00,[node][static-build][redwood] Add root path pattern to `prepareCache()` (#7710)
9ee54b3dd6b26a9ef53283ff1b34c7d5aaaf49f0,Steven,2022-04-27 01:57:12+00:00,GitHub,2022-04-27 01:57:12+00:00,"[static-build] Resolve git.io links (#7722)

https://github.blog/changelog/2022-04-25-git-io-deprecation/"
9d67e0bc06f163164c7f3430f57ca93b7e40762e,Steven,2022-04-26 19:49:19+00:00,GitHub,2022-04-26 19:49:19+00:00,"[python] Add discontinue date for Python 3.6 (#7709)

This PR does a few things:
- Changes the existing warning message for Python 3.6 to print a discontinue date
- Will automatically fail new Python 3.6 deployments created after that date
- Consolidates logic to make Python version selection work in a similar manner to Node.js version selection
- Changes tests from JS to TS"
466135cf84d0346294645251034ad6aaf89928b8,Steven,2022-04-25 16:49:34+00:00,Steven,2022-04-25 16:49:34+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.4
 - vercel@24.1.1-canary.6
 - @vercel/client@10.4.2-canary.5
 - @vercel/go@1.3.3-canary.4
 - @vercel/node@1.14.2-canary.5
 - @vercel/python@2.2.3-canary.4
 - @vercel/redwood@0.7.1-canary.4
 - @vercel/ruby@1.3.3-canary.4
 - @vercel/static-build@0.23.2-canary.4"
eab2e229dcb02ef896d146c249e8f8bb4fb83347,Steven,2022-04-25 16:49:04+00:00,GitHub,2022-04-25 16:49:04+00:00,[build-utils] Add warning for experimental Node.js (#7717)
698b89a2ba83d98b5fa0773142e4f5df3a2c4a9a,Steven,2022-04-25 16:02:13+00:00,Steven,2022-04-25 16:02:13+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.3
 - vercel@24.1.1-canary.5
 - @vercel/client@10.4.2-canary.4
 - @vercel/frameworks@0.7.2-canary.0
 - @vercel/go@1.3.3-canary.3
 - @vercel/node@1.14.2-canary.4
 - @vercel/python@2.2.3-canary.3
 - @vercel/redwood@0.7.1-canary.3
 - @vercel/ruby@1.3.3-canary.3
 - @vercel/static-build@0.23.2-canary.3"
bae2a2e4df1918d0a3906685335bc102a4f9ff95,Steven,2022-04-25 16:01:49+00:00,GitHub,2022-04-25 16:01:49+00:00,"[python] Upgrade tests (#7711)

* [python] Upgrade tests

* Fix latest sanic asgi

* Bump flask

* Change requirements.txt to Pipfile

* Fix dev test

* Use verbose requirements.txt

* Flip requirements"
57916bb712091b09cbcec1229d6b8a678937e020,Steven,2022-04-25 15:07:16+00:00,GitHub,2022-04-25 15:07:16+00:00,"[build-utils] Add env var ENABLE_EXPERIMENTAL_NODE16 (#7489)

This PR uses an environment variable since this feature is not available to all accounts yet."
12bbd4e8ebaeeef10d8c1928ac3af74ea54fef6b,Sean Massa,2022-04-22 16:55:27+00:00,GitHub,2022-04-22 16:55:27+00:00,[cli] Update language of prebuilt error (#7702)
4e4c7023dcdcec45431f6bfc2022a631d687a214,Aaron Morris,2022-04-22 16:49:39+00:00,GitHub,2022-04-22 16:49:39+00:00,"[frameworks] Add opt-in darkModeLogo to `Framework` in packages/frameworks (#7693)

Supply light mode logos over the frameworks API to be consumed by front

### Related Issues

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
41805790e786580f074192893b6d28fa77758fb4,Nathan Rajlich,2022-04-22 01:04:21+00:00,GitHub,2022-04-22 01:04:21+00:00,"[static-build] Support Build Output API v3 `cache` property in `prepareCache()` (#7704)

When a framework that outputs Build Output API v3 specifies the `cache`
property in the `config.json` file then static-build will include those
files in the `prepareCache()` function result."
6ad77ae8e1bed6e90397e08d66b712f9a109d7a9,Ethan Arrowood,2022-04-21 22:01:41+00:00,Ethan Arrowood,2022-04-21 22:01:41+00:00,"Publish Canary

 - vercel@24.1.1-canary.4
 - @vercel/client@10.4.2-canary.3"
e8daf36cd7834bd08c0c8d640982263cc06c526a,Ethan Arrowood,2022-04-21 21:59:55+00:00,GitHub,2022-04-21 21:59:55+00:00,only revert override feature (#7701)
c319a2c49937e53bd526e4918e6ddae044b2cf3f,Nathan Rajlich,2022-04-21 00:35:25+00:00,GitHub,2022-04-21 00:35:25+00:00,"[client] Remove single file deployment root path `/` route (#7699)

This is strange behavior, and also inconsistent compared to how a Git deployment is created. Let's remove it."
a410baa79700e24942fdd155466696d876f340b5,Sean Massa,2022-04-20 19:54:47+00:00,GitHub,2022-04-20 19:54:47+00:00,"[cli] check for prebuilt directory (#7697)

When using `vc deploy --prebuilt`, we need to check for an actual "".vercel/output"" before attempting to deploy. This PR adds a a check for that. Now...

In a directory without `.vercel/output`:

```
$ vc deploy --prebuilt
Error! Option `--prebuilt` was used, but no prebuilt deploy found in "".vercel/output""
```

In a direcotry with `.vercel/output` (where I've not linked it yet):

```
$ vc deploy --prebuilt
? Set up and deploy ~/source/vercel/examples/build-output-api/serverless-function? [Y/n]
```"
625568e659fbcf8cf6870a5defdf63653a0031f7,Dominik Ferber,2022-04-20 17:30:48+00:00,GitHub,2022-04-20 17:30:48+00:00,"fix ts-eager (#7677)

Switches await import() to require().default so that ts-eager understands them.

closes #7676"
41868c1fe02f351880e95f0a62895ce5d611eb07,Nathan Rajlich,2022-04-20 03:49:44+00:00,GitHub,2022-04-20 03:49:44+00:00,"[cli] Ensure `.vercel` directory is created in `vc pull` (#7695)

When the `.vercel` directory does not exist and the env vars
(`VERCEL_PROJECT_ID`/`VERCEL_ORG_ID`) are used for project
linking, the `vercel pull` command was throwing an error:

```
$ VERCEL_PROJECT_ID=xxxxxxxx VERCEL_ORG_ID=xxxxxxxxxx vercel pull
Vercel CLI 24.1.1-canary.3  https://vercel.com/feedback
Downloading ""development"" Environment Variables for Project t
Error! ENOENT: no such file or directory, open '/Code/t/.vercel/.env.development.local'
```"
1b644f1218a7abfa5b9dc218c1407c18194af67c,Steven,2022-04-19 16:08:46+00:00,GitHub,2022-04-19 16:08:46+00:00,[docs] Update available runtimes (#7692)
29ea0fb06b5b278aa9e389e928ed244521101224,Sean Massa,2022-04-17 23:29:56+00:00,GitHub,2022-04-17 23:29:56+00:00,[examples] Remove amp example (#7686)
b61f049f1186ccc804cea35bcf61d16583ed6ca2,Ethan Arrowood,2022-04-15 21:26:55+00:00,Ethan Arrowood,2022-04-15 21:26:55+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.2
 - vercel@24.1.1-canary.3
 - @vercel/client@10.4.2-canary.2
 - @vercel/go@1.3.3-canary.2
 - @vercel/node@1.14.2-canary.3
 - @vercel/python@2.2.3-canary.2
 - @vercel/redwood@0.7.1-canary.2
 - @vercel/ruby@1.3.3-canary.2
 - @vercel/static-build@0.23.2-canary.2"
16e28f326bcf7b3f37d6a1b6557388fdbc4f37b3,Ethan Arrowood,2022-04-15 21:20:00+00:00,GitHub,2022-04-15 21:20:00+00:00,"[cli] Allow projectSettings override in vercel.json (#7619)

This PR adds the required changes to the CLI to support overridable `vercel.json` `projectSettings` values. This PR is linked with changes on the API side too.

- The core changes are in `packages/cli/src/commands/deploy/index.ts`
- An unused code path was removed from `packages/client/src/create-deployment.ts`, `packages/cli/src/util/deploy/process-deployment.ts` and `packages/cli/src/util/index.ts`.

This will only work for *existing* deployment (not *new* ones). This is implemented by checking the `status` of the deployment (is it linked or not). An error is thrown if the user attempts to send overrided settings to a new project. 

A warning is outputted when overrided settings are discovered and shares what settings are being overridden.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
276397c940647a58b8a4f783afb75e82949296e1,Sean Massa,2022-04-15 18:55:42+00:00,GitHub,2022-04-15 18:55:42+00:00,[examples] fixed vercel deploy link (#7684)
85d7311199cf4a6d42e3832631f6845251833816,Nathan Rajlich,2022-04-15 16:42:32+00:00,GitHub,2022-04-15 16:42:32+00:00,"[static-build] Misc TypeScript cleanup (#7682)

This was just sitting on my local checkout so might as well push it."
b8114b8b39dd6067e68dee49a556dcc3320a31d8,Sean Massa,2022-04-15 04:41:29+00:00,GitHub,2022-04-15 04:41:29+00:00,"[cli] set environment properly in `vc pull` (#7656)

This PR sets environment properly in `vc pull`. The system env vars were not respecting the target `--environment`.

Adds tests for related `vc env` logic."
d63e8d318748ee464f8a0fdf62b2f156223856ca,QianyuPan,2022-04-14 23:37:01+00:00,GitHub,2022-04-14 23:37:01+00:00,"[go] Add support for version 1.18 (#7590)

Go 1.18 has been released, but I find that I can't deploy my project on Vercel when `go.mod` has `go 1.18` in it.

1.18 adds some very useful features. It would be very valuable for developers to have Vercel support 1.18."
11d3dd04aaf02aba271483d64d805cc5820b7776,JJ Kasper,2022-04-14 22:04:05+00:00,JJ Kasper,2022-04-14 22:04:05+00:00,"Publish Canary

 - vercel@24.1.1-canary.2
 - @vercel/node-bridge@2.2.1-canary.0
 - @vercel/node@1.14.2-canary.2"
46bf95ee36af3d60b4d9a4fc1077e8b67826ec30,JJ Kasper,2022-04-14 22:00:10+00:00,GitHub,2022-04-14 22:00:10+00:00,"[node-bridge] Ensure content-type is always set with multi-payloads (#7681)

### Related Issues

This ensures a content-type is always set inside of each part of the multi-part payload as it's needed for proper parsing. This also ensures non-200 status codes/headers are passed back separate when they differ so that they can be handled independently without assuming they all match. 

x-ref: https://vercel.slack.com/archives/C03AYHB6MA9
x-ref: https://github.com/vercel/vercel/pull/7507

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
92252468c2d67715809772d225a03e50dcecf1f3,Nathan Rajlich,2022-04-13 15:09:47+00:00,GitHub,2022-04-13 15:09:47+00:00,"[tests] Add `turbo.json` and bump to turbo 1.2.2 (#7620)

* Add `turbo.json`

Ran `npx @turbo/codemod create-turbo-config` like the warnings have been telling us to.

* [tests] Bump `turbo` and allow `turbo.json` in `.vercelignore` (#7623)

Co-authored-by: Jared Palmer <jared@jaredpalmer.com>
Co-authored-by: Steven <steven@ceriously.com>"
71b83d5587b549a1458697b50596a5534cb783d3,Nathan Rajlich,2022-04-12 22:57:36+00:00,Nathan Rajlich,2022-04-12 22:57:36+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.1
 - vercel@24.1.1-canary.1
 - @vercel/client@10.4.2-canary.1
 - @vercel/go@1.3.3-canary.1
 - @vercel/node@1.14.2-canary.1
 - @vercel/python@2.2.3-canary.1
 - @vercel/redwood@0.7.1-canary.1
 - @vercel/ruby@1.3.3-canary.1
 - @vercel/static-build@0.23.2-canary.1"
d9e5fdc5e4fc83fdf77a170692380309ed7b09f0,Nathan Rajlich,2022-04-12 20:23:01+00:00,GitHub,2022-04-12 20:23:01+00:00,"[build-utils] Move ""Installing dependencies..."" log to `runNpmInstall()` (#7672)

Follow-up to #7671. Since `runNpmInstall()` might now be de-duped, only
print ""Installing dependencies..."" when the dependencies are actually
being installed. This avoids printing the log message unnecessarily when
the command won't actually be run, and also removes some duplication in
the Builders' code."
58f479c60328c9f23b05bb6369ee6e34003826e9,Nathan Rajlich,2022-04-12 16:09:50+00:00,GitHub,2022-04-12 16:09:50+00:00,"[static-build] Add support for Build Output v3 detection (#7669)

Adds detection logic for a framework / build script outputting Build Output v3
format to the filesystem. In this case, `static-build` will simply stop processing
after the Build Command since deserialization happens in the build-container side
of things (this is different compared to the v1 output which gets handled in this
Builder. The reason for that is because the v3 output matches what `vc build`
outputs vs. v1 which is a different format)."
d62461d9520fd6247d0adc822049e3eaf26c0e10,Nathan Rajlich,2022-04-12 16:09:10+00:00,GitHub,2022-04-12 16:09:10+00:00,"[build-utils] Only allow `runNpmInstall()` to run once per `package.json` (#7671)

Adds a best-effort optimization to only run `npm install` once per
`pacakge.json` file. This will save a lot of time in the single-sandbox
build world (i.e. `vc build`)."
e7f524defba3bbf2db750dea3235e6699584c424,Steven,2022-04-12 12:58:38+00:00,Steven,2022-04-12 12:58:38+00:00,"Publish Canary

 - @vercel/build-utils@2.15.2-canary.0
 - vercel@24.1.1-canary.0
 - @vercel/client@10.4.2-canary.0
 - @vercel/go@1.3.3-canary.0
 - @vercel/node@1.14.2-canary.0
 - @vercel/python@2.2.3-canary.0
 - @vercel/redwood@0.7.1-canary.0
 - @vercel/ruby@1.3.3-canary.0
 - @vercel/static-build@0.23.2-canary.0"
bdefd0d05dec887f59f88cb262aed6bec9e0a955,Steven,2022-04-12 11:52:12+00:00,GitHub,2022-04-12 11:52:12+00:00,[docs] Fix links to docs (#7668)
ca522fc9f1cce9f08af64c409373f895b042bbbf,Ethan Arrowood,2022-04-11 22:07:45+00:00,GitHub,2022-04-11 22:07:45+00:00,"[node][redwood] update `@vercel/nft` to 0.18.1 (#7670)

### Related Issues

Updates the @vercel/nft dependency across the repo to v0.18.1.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
4a8504fc45092dc4a374bf7a518bd9a07f24fd41,Nathan Rajlich,2022-04-11 17:14:53+00:00,Nathan Rajlich,2022-04-11 17:14:53+00:00,"Publish Stable

 - @vercel/build-utils@2.15.1
 - vercel@24.1.0
 - @vercel/client@10.4.1
 - @vercel/frameworks@0.7.1
 - @vercel/go@1.3.2
 - @vercel/node@1.14.1
 - @vercel/python@2.2.2
 - @vercel/redwood@0.7.0
 - @vercel/routing-utils@1.13.1
 - @vercel/ruby@1.3.2
 - @vercel/static-build@0.23.1"
576217b344de24280c78ca2844e1360d31450741,Nathan Rajlich,2022-04-09 20:51:38+00:00,GitHub,2022-04-09 20:51:38+00:00,"[static-build] Fix `prepareCache()` when deploying with `--prebuilt` (#7659)

The `prepareCache()` function was throwing an error when doing `vc deploy --prebuilt` because the `package.json` file is not present.

Also just cleaned up the logic a bit."
f03129ac7a2b204a5581c9ba65bde25344c603b9,Steven,2022-04-09 18:24:26+00:00,GitHub,2022-04-09 18:24:26+00:00,"[tests] Bump mkdocs test fixture (#7660)

* [tests] Bump mkdocs test fixture

* Bump pelican"
3eaad1fd5299f5feb120e7db2afb24b5f142771d,Sean Massa,2022-04-08 23:46:11+00:00,GitHub,2022-04-08 23:46:11+00:00,"[cli] remove deprecation warning for `vc env` (#7654)

Removes the deprecation warning in the CLI for `vc env`. This command will coexist with `vc pull` for a slightly different purpose."
4e471491d8912f3010c2230ce59fd6ce8d2f36e1,Nathan Rajlich,2022-04-08 20:39:47+00:00,GitHub,2022-04-08 20:39:47+00:00,"[build-utils] Add `repoRootPath` to `PrepareCacheOptions` (#7658)

`repoRootPath` is provided to the `prepareCache()` function and is the same value as provided to the `build()` function.

Also remove `cachePath` since it's no longer used."
99395fd9fe334d7bd925b2a1d58891363b72df23,Sean Massa,2022-04-08 18:14:23+00:00,GitHub,2022-04-08 18:14:23+00:00,[cli] trim env file path output (#7653)
4980fe65138fb1912b9bf8394e8d1d4da319c178,Sean Massa,2022-04-05 20:30:41+00:00,GitHub,2022-04-05 20:30:41+00:00,[cli] remove references to `vc pull --env-file` (#7647)
24676ae0205bcd68d9d4ed727ed52c05c2a15a02,Sean Massa,2022-04-05 18:08:29+00:00,GitHub,2022-04-05 18:08:29+00:00,"[cli] Add `--environment` to `vc pull` (#7624)

* refactor in prep for changes

* pull all target env files

* update `pull` usage

* move .env files into /.vercel

* tighten types in helper functions

* add return type

* remove ""any"" type

* keep original behavior

* only use --env for root-level env file name

* add --target flag

* deprecate --env for --env-file

* rename --target to --environment

* more renaming

* pr feedback

* update `vc pull --help`

* Update pull.ts

* remove env-file logic from `vc pull`

Co-authored-by: Steven <steven@ceriously.com>"
72ada9abd82333b601e6fed504d1d0432da94ac2,Steven,2022-04-04 13:13:20+00:00,GitHub,2022-04-04 13:13:20+00:00,"[examples] Bump Next.js + React (#7644)

Bump Next.js + React + ESLint"
da893e7c573ec35308e542287108a6a80f9896a6,Steven,2022-04-01 14:52:47+00:00,GitHub,2022-04-01 14:52:47+00:00,"[tests] Increase timeout cli tests (#7640)

* [tests] Increase network timeout for GH Actions

* [tests] Increase CLI integration test timeout"
e40eecafc97dbe120f4c95f30b7b9aaf621e4b81,Sean Massa,2022-03-30 21:06:16+00:00,GitHub,2022-03-30 21:06:16+00:00,"[cli] Add support for `vc --cwd <dir>` (#7577)

`vc`'s default command is `deploy`, which can lead to ambiguous cli invocations when running `vc dir-or-command` like:

```
$  vc list
Vercel CLI 23.1.2
Error! The supplied argument ""list"" is ambiguous.
If you wish to deploy the subdirectory ""list"", first run ""cd list"".
```

when run in a directory that contains a subdirectory ""list"". This conflict will happen with any current and future commands, like `vc build`.

In order to make sure the CLI can be invoked either way, this PR deprecates the default behavior. Going forward, a user would see the following.

**Conflicting Command, Run Command**

```bash
$ vc list
# warning: Did you mean to deploy the subdirectory ""list""? Use `vc --cwd list` instead.
# ... runs the `list` command
```

**Conflicting Command, Deploy Directory**

```bash
$ vc --cwd list
# ... deploy as normal
```

---

Card: https://linear.app/vercel/issue/BUI-33/prevent-ambiguous-vc-command-oror-dir"
d9e5342ebad46876aec77460294c0fce9d6496d4,Steven,2022-03-30 16:53:42+00:00,GitHub,2022-03-30 16:53:42+00:00,[examples] Fix angular demo url (#7635)
b0ab13778dc907650d743839d4b1053abd7e2ed1,Steven,2022-03-30 14:14:03+00:00,GitHub,2022-03-30 14:14:03+00:00,"[frameworks] Update comments (#7636)

The comments were outdated"
c76dfbe8c9e1055113fe7ced8850bca4a64ad232,Nathan Rajlich,2022-03-30 01:12:23+00:00,Nathan Rajlich,2022-03-30 01:12:23+00:00,"Publish Canary

 - @vercel/build-utils@2.15.1-canary.0
 - vercel@24.0.2-canary.0
 - @vercel/client@10.4.1-canary.0
 - @vercel/frameworks@0.7.1-canary.0
 - @vercel/go@1.3.2-canary.0
 - @vercel/node@1.14.1-canary.0
 - @vercel/python@2.2.2-canary.0
 - @vercel/redwood@0.6.1-canary.0
 - @vercel/routing-utils@1.13.1-canary.0
 - @vercel/ruby@1.3.2-canary.0
 - @vercel/static-build@0.23.1-canary.0"
ed6f3cc27e81c5090a4a5f44cd36967853e5cbb0,Daniel Choudhury,2022-03-30 01:07:49+00:00,Nathan Rajlich,2022-03-30 01:07:49+00:00,"[redwood] Add default rewrites, cleanUrls and nested API function support

Working with @TooTallNate to update the Vercel Redwood builder,
in preparation for the Redwood 1.0 launch.

- Support for nested api functions in dist folder:

This is essentially a change to the glob to pick up functions 1 level deep in the dist folder. In prior version of Redwood, we had a workaround specific to Vercel that we would like to take out. See redwoodjs/redwood#4813.

- ZeroConfig redirects:

Redwood now generates a 200.html file on every build, which is the ""fallback"" page for when a html file cannot be matched with the path. This PR adds support for using this 200.html file, out of the box for Redwood projects on Vercel.

This is to make it easy for users to deploy a partly prerendered project - without having to mess with the vercel.json file.

Closes #7592.
Closes #7630."
7b0186bffe47e99f8c101aeb2f703f9588f1e06d,Nathan Rajlich,2022-03-30 01:06:03+00:00,GitHub,2022-03-30 01:06:03+00:00,"[build-utils] Use `File` instead of `FileBase` for builder output type (#7632)

This allows for the individual `File` subtypes to be properly narrowed."
45e22b6b607fc875c3cd383fd19f1ee42f535bd5,Nathan Rajlich,2022-03-26 21:34:11+00:00,GitHub,2022-03-26 21:34:11+00:00,"[client] Drop ""/now"" prefix from API endpoints (#7616)

This prefix is not necessary for the API endpoints so remove.

Also updated a reference of `NowConfig` to use `VercelConfig` instead."
b2bfae6e2e15237103607ab0f783617a0af1e45e,Nathan Rajlich,2022-03-25 05:26:56+00:00,GitHub,2022-03-25 05:26:56+00:00,"[client] Don't consider `rootDirectory` for --prebuilt buildFileTree() (#7615)

`vc build` outputs to the root-level `.vercel` directory, so no need to consider `rootDirectory` of the Project Settings when collecting this file list."
b6ed718f52ea0c80c2a49cd436a6821f4512ea97,Nathan Rajlich,2022-03-24 23:09:22+00:00,GitHub,2022-03-24 23:09:22+00:00,"[build-utils] Add a few more files to `.npmignore` (#7614)

These files don't need to be in the published npm package,
so added them to the npm ignore file."
a84c4a37e6332f34bd86d0608166d5b4b97acaa4,Steven,2022-03-24 23:08:42+00:00,GitHub,2022-03-24 23:08:42+00:00,"[tests] Add lint rule to prevent substr() (#7618)

Follow up to #7588 so we don't accidentally add substr() again"
d2ba06c6cbc86ff016ec9e1a96511cad2d9f8c08,CommanderRoot,2022-03-24 21:03:40+00:00,GitHub,2022-03-24 21:03:40+00:00,"[examples][cli][routing-utils][static-build] replace deprecated String.prototype.substr() (#7588)

.substr() is deprecated so we replace it with .slice() or substring() which aren't deprecated
Signed-off-by: Tobias Speicher <rootcommander@gmail.com>

Co-authored-by: Steven <steven@ceriously.com>"
06e7753df09206bbc9d86168edb85546b647b1ec,Steven,2022-03-24 15:34:41+00:00,GitHub,2022-03-24 15:34:41+00:00,"[frameworks] Revert default version (#7613)

This is property is used for documentation purposes and must match the default version the the preinstall binary located in the build image."
235a9c3300264218bc921d96b4981eae96a37dbf,Andrew Healey,2022-03-24 13:00:22+00:00,GitHub,2022-03-24 13:00:22+00:00,[examples] Revert Hugo example to a working state (#7611)
1b704023258d0ffbce922d368a6f6728b92c1da7,Nathan Rajlich,2022-03-23 20:27:02+00:00,GitHub,2022-03-23 20:27:02+00:00,[client] Use `.vercel/output` for --prebuilt (#7555)
c76781fac978fee923d8180706103bad13ca33a0,Steven,2022-03-22 19:17:06+00:00,Steven,2022-03-22 19:17:06+00:00,"Publish Stable

 - @vercel/build-utils@2.15.0
 - vercel@24.0.1
 - @vercel/client@10.4.0
 - @vercel/frameworks@0.7.0
 - @vercel/go@1.3.1
 - @vercel/node-bridge@2.2.0
 - @vercel/node@1.14.0
 - @vercel/python@2.2.1
 - @vercel/redwood@0.6.0
 - @vercel/routing-utils@1.13.0
 - @vercel/ruby@1.3.1
 - @vercel/static-build@0.23.0"
451e0b0cfb7f5f3e0e4f37642471b2c7b4284649,Steven,2022-03-22 18:53:04+00:00,Steven,2022-03-22 18:53:04+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.8
 - vercel@24.0.1-canary.9
 - @vercel/client@10.3.1-canary.8
 - @vercel/frameworks@0.6.1-canary.7
 - @vercel/go@1.3.1-canary.8
 - @vercel/node@1.13.1-canary.9
 - @vercel/python@2.2.1-canary.8
 - @vercel/redwood@0.5.2-canary.6
 - @vercel/ruby@1.3.1-canary.8
 - @vercel/static-build@0.22.2-canary.6"
cf477d45b2c23fb37b39ec399eb409d9a636a485,Ethan Arrowood,2022-03-22 18:52:07+00:00,GitHub,2022-03-22 18:52:07+00:00,"[frameworks] add pnpm to framework install placeholders (#7587)

Add `pnpm` commands to framework `installCommand.placeholders` so that it appears in the UI.

Additionally, adds the `pnpm-lock.yaml` file to an ignore list like the other lock files."
cdd2d69e074e5db326c6604d08c24ba85f9f63de,Steven,2022-03-22 17:45:48+00:00,Steven,2022-03-22 17:45:48+00:00,"Publish Canary

 - @vercel/static-build@0.22.2-canary.5"
43f1f8b2570996b2b68991e124e9f2d3817a37fa,Lee Robinson,2022-03-22 16:04:42+00:00,GitHub,2022-03-22 16:04:42+00:00,[static-build] Don't fail CRA builds on warnings (#7584)
34055e3599376144629c1d1efb0ce5b4deb6c675,Steven,2022-03-22 15:32:44+00:00,Steven,2022-03-22 15:32:44+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.7
 - vercel@24.0.1-canary.8
 - @vercel/client@10.3.1-canary.7
 - @vercel/frameworks@0.6.1-canary.6
 - @vercel/go@1.3.1-canary.7
 - @vercel/node@1.13.1-canary.8
 - @vercel/python@2.2.1-canary.7
 - @vercel/redwood@0.5.2-canary.5
 - @vercel/ruby@1.3.1-canary.7
 - @vercel/static-build@0.22.2-canary.4"
26abb0a85aa11f331ec3409eed3db6ba58a0573e,Steven,2022-03-22 15:26:19+00:00,GitHub,2022-03-22 15:26:19+00:00,"[api] Update `/api/examples/list` to be static for `vc init` (#7596)

Previously, this API would download the entire git repository for each request. Instead, we can defer downloading to the `/download` API only and change the list API to be statically generated at build time.

This will improve the time to render the results from `vc init`.


## Before
- `https://vercel-lu6z5kf4s.vercel.sh/api/examples/list` responds in 6200 ms
- `https://vercel-lu6z5kf4s.vercel.sh/api/examples/list-all` responds in 800ms

## After
- `https://vercel-ctsxcwzgc.vercel.sh/api/examples/list` responds in 60 ms 
- `https://vercel-ctsxcwzgc.vercel.sh/api/examples/list-all` responds in 60 ms"
a1e337e0dde5f5961734dddc5c67f319499d988b,Lee Robinson,2022-03-22 13:42:34+00:00,GitHub,2022-03-22 13:42:34+00:00,[examples] Change hugo template to one that works with older version (#7601)
b72ead480f0da8d7f7f51b87f97767dab233ec1c,Steven,2022-03-22 03:15:42+00:00,GitHub,2022-03-22 03:15:42+00:00,"[tests] Bump turborepo to 1.1.9 (#7598)

Bump to latest turborepo"
77cf68105f7e9fb045110c7795f2d9ca81aa5810,Lee Robinson,2022-03-21 23:14:25+00:00,GitHub,2022-03-21 23:14:25+00:00,[Fix Hugo Version. (#7600)
d800f55dfad8a97e1408ded8b4acf65cc2618253,Steven,2022-03-21 20:34:29+00:00,GitHub,2022-03-21 20:34:29+00:00,[cli] Fix `vc init` spinner (#7594)
9dde99f19ef62f7ea8addc19fab9a1ff025aa4ae,Ethan Arrowood,2022-03-21 19:15:51+00:00,Ethan Arrowood,2022-03-21 19:15:51+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.6
 - vercel@24.0.1-canary.7
 - @vercel/client@10.3.1-canary.6
 - @vercel/frameworks@0.6.1-canary.5
 - @vercel/go@1.3.1-canary.6
 - @vercel/node@1.13.1-canary.7
 - @vercel/python@2.2.1-canary.6
 - @vercel/redwood@0.5.2-canary.4
 - @vercel/ruby@1.3.1-canary.6
 - @vercel/static-build@0.22.2-canary.3"
fae7a083fc4b71d5353b88acb3b9ae74e18a514f,Ethan Arrowood,2022-03-21 19:13:16+00:00,GitHub,2022-03-21 19:13:16+00:00,"Revert ""Remove file system environment variable (#7535)"" (#7595)

This reverts commit e9083784864b69b1758202373a49de5820a2d7bc."
cbd651d6ee2fab8ed2bf823215573bb311fddd11,Ethan Arrowood,2022-03-18 21:48:30+00:00,GitHub,2022-03-18 21:48:30+00:00,add exit code check (#7578)
6077a706d13d49f7a87374a0f979ac81f90ab131,Nathan Rajlich,2022-03-18 00:27:42+00:00,GitHub,2022-03-18 00:27:42+00:00,"[build-utils] Allow arbitrary properties on the `Meta` interface (#7582)

`vc build` is going to re-use the `meta` object between Builder
invocations, to allow arbitrary state to be shared between them. So
allow for additional properties to be specified on `Meta` with an
`unknown` type."
cedc82dd9e412b09db7bae4b31d350c2cfb7b9dd,Nathan Rajlich,2022-03-18 00:27:35+00:00,GitHub,2022-03-18 00:27:35+00:00,[build-utils] Mark arbitrary properties on `Config` as `unknown` (#7554)
b4200064010868ec10fd99af2425e7307f0fe79c,Nathan Rajlich,2022-03-18 00:27:26+00:00,GitHub,2022-03-18 00:27:26+00:00,"[build-utils] Remove `AnalyzeOptions` and `analyze()` docs (#7550)

The `analyze()` function on a Builder was removed a long time ago."
8ba604e8fc343c7f843365e0707868c509bdbd5f,Steven,2022-03-18 00:22:03+00:00,GitHub,2022-03-18 00:22:03+00:00,"[tests] Remove unused dep cheerio (#7579)

- Closes #7576
- Closes #7500"
fadeee45689779c3a22332fdcf9aabeffb9b7354,Nathan Rajlich,2022-03-17 23:18:50+00:00,GitHub,2022-03-17 23:18:50+00:00,"[cli] Update `14-svelte-node` fixture to run ""dev"" command (#7583)"
2b15ba7f462bb8ad6019d972ba4bb2787151b025,Lee Robinson,2022-03-16 19:39:06+00:00,GitHub,2022-03-16 19:39:06+00:00,Downgrade Hugo Version (#7562)
4cdfd0e58cef5cb7c09ff7690f896d2ad6614b0b,Ethan Arrowood,2022-03-16 18:49:02+00:00,GitHub,2022-03-16 18:49:02+00:00,"[tests] Fix pnpm integration tests (#7563)

* fix test 24 and add test 25

* move pnp/symlink test to cli and complete hoisted test

* fix execa

* remove unnecessary gitignore

* Update packages/cli/test/integration.js

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/test/integration.js

Co-authored-by: Steven <steven@ceriously.com>

* complete cherry-pick

* remove package.json edit

* use fs-extra remove

* use fs-extra.remove correctly

Co-authored-by: Steven <steven@ceriously.com>"
b3ccb5f3ef354da577eeff6ce63d8ee51cfb3e17,Steven,2022-03-15 20:08:42+00:00,Steven,2022-03-15 20:08:42+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.5
 - vercel@24.0.1-canary.6
 - @vercel/client@10.3.1-canary.5
 - @vercel/frameworks@0.6.1-canary.4
 - @vercel/go@1.3.1-canary.5
 - @vercel/node@1.13.1-canary.6
 - @vercel/python@2.2.1-canary.5
 - @vercel/redwood@0.5.2-canary.3
 - @vercel/ruby@1.3.1-canary.5
 - @vercel/static-build@0.22.2-canary.2"
584acc43b7720882df0718fcfb963dc3521301e1,Steven,2022-03-15 20:03:28+00:00,GitHub,2022-03-15 20:03:28+00:00,"[node] Consolidate dev and prd tsconfig.json (#7549)

In a previous PR (#4254), the behavior of `vercel dev` was added separately without matching how deployments work.

This PR consolidates the `tsconfig.json` options for `vercel` deployments as well as `vercel dev` so they work the same.

Fixes https://github.com/vercel/customer-issues/issues/349"
f64be93b941a0f41f530e6cdf8f0dbfe905f77e7,Adrian Bettridge-Wiese,2022-03-15 19:48:44+00:00,GitHub,2022-03-15 19:48:44+00:00,Add screenshots to frameworks (#7570)
9abd31769e2397a8bcb8deb6981100450cd29ca5,Adrian Bettridge-Wiese,2022-03-15 17:58:44+00:00,GitHub,2022-03-15 17:58:44+00:00,"Revert ""Add screenshot property to frameworks"" (#7569)

This reverts commit 09e3b35e74b739aa2c1b5e7af0dd5e158497c8a4."
09e3b35e74b739aa2c1b5e7af0dd5e158497c8a4,Adrian Bettridge-Wiese,2022-03-15 17:47:40+00:00,Adrian Bettridge-Wiese,2022-03-15 17:47:40+00:00,Add screenshot property to frameworks
8aa9a0ea058f88f3d74e906df3f0ba69520576cb,Nathan Rajlich,2022-03-14 18:04:58+00:00,GitHub,2022-03-14 18:04:58+00:00,"[build-utils] Remove `as` cast in `Lambda` (#7553)

`Files` can now be properly narrowed by checking ""type"", so no need for the `as` cast here anymore."
b2d0ed74c6108f76ce4d4352c743790058759ac8,Nathan Rajlich,2022-03-12 19:22:49+00:00,Nathan Rajlich,2022-03-12 19:22:49+00:00,"Revert ""[ruby] Use `new Lambda()` (#7551)""

This reverts commit 501be936c0b4ce9a98919fa8e84a7f1b2f226d64."
aef936af0ffe768ae446be4cc8da663eca6f8ad3,Nathan Rajlich,2022-03-12 19:22:44+00:00,Nathan Rajlich,2022-03-12 19:22:44+00:00,"Revert ""[python] Use `new Lambda()`""

This reverts commit 7eba282af54a03b94890aef7e05049b09e08cb22."
501be936c0b4ce9a98919fa8e84a7f1b2f226d64,Nathan Rajlich,2022-03-12 05:19:32+00:00,GitHub,2022-03-12 05:19:32+00:00,"[ruby] Use `new Lambda()` (#7551)

`createLambda()` is deprecated."
7eba282af54a03b94890aef7e05049b09e08cb22,Nathan Rajlich,2022-03-12 05:03:42+00:00,Nathan Rajlich,2022-03-12 05:03:42+00:00,"[python] Use `new Lambda()`

`createLambda()` is deprecated."
cf3e4bd726677b566cd8be7ac0dad72ed5bd0451,Nathan Rajlich,2022-03-11 20:44:06+00:00,GitHub,2022-03-11 20:44:06+00:00,"[build-utils] Use `File` type for `Prerender` fallback (#7539)

Tiny follow-up to #7530 since we can now use this union type to express
the same group of File implementation types."
ee5361b00ee7c3ca19dbcfe5ccdbb6705fe92bd5,Ethan Arrowood,2022-03-11 20:30:22+00:00,GitHub,2022-03-11 20:30:22+00:00,"Revert ""pnpm pnp symlinkn integration test (#7543)"" (#7548)

This reverts commit bd929dd5c54b1d80569cb52948bb705be993c119."
bd929dd5c54b1d80569cb52948bb705be993c119,Ethan Arrowood,2022-03-11 17:52:48+00:00,GitHub,2022-03-11 17:52:48+00:00,"pnpm pnp symlinkn integration test (#7543)

* temp commit

* update test case

* check for build cache hit

* Update packages/build-utils/test/integration.test.ts

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
4ee064bb6103532244a675b4dc6f50d898f971b2,Sean Massa,2022-03-10 19:21:24+00:00,GitHub,2022-03-10 19:21:24+00:00,[static-build] Add `@vercel/static-build` Builder (#7536)
312a2090a6a95a76ea3bc1e5e79d8299f98223d0,Sean Massa,2022-03-10 01:54:03+00:00,GitHub,2022-03-10 01:54:03+00:00,"[client] preserve symlinks during deploy upload (#7533)

Ensure that deploy uploads preserve symlinks.

---

Card: https://linear.app/vercel/issue/BUI-23/preserve-symlinks-in-vc-deploy"
a82f1172179b4906b35b005e7a45b27a760fd82f,Sean Massa,2022-03-09 22:41:03+00:00,GitHub,2022-03-09 22:41:03+00:00,"[build-utils] Preserve symlinks for `FileRef` and `FileBlob` types in `download()` (#7534)

Co-authored-by: Nathan Rajlich <n@n8.io>"
e9083784864b69b1758202373a49de5820a2d7bc,Ethan Arrowood,2022-03-09 19:53:23+00:00,GitHub,2022-03-09 19:53:23+00:00,"Remove file system environment variable (#7535)

When running this example using `pnpm`, the filesystem environment variable was causing issues.

This change removes the variable and the file since it no longer serves a purpose. 

Deployment was tested using `pnpm`, `npm`, and `yarn` and all seem to run successfully now"
8cda5263eb107e9390d92d6d0897b6cf453ce45b,Sean Massa,2022-03-08 22:29:33+00:00,GitHub,2022-03-08 22:29:33+00:00,[build-utils] Streamle `File` types for better type narrowing (#7530)
a24fd64bce88d5025c52ac7dfbdc3c0f457de077,Ethan Arrowood,2022-03-08 19:39:54+00:00,Ethan Arrowood,2022-03-08 19:39:54+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.4
 - vercel@24.0.1-canary.5
 - @vercel/client@10.3.1-canary.4
 - @vercel/frameworks@0.6.1-canary.3
 - @vercel/go@1.3.1-canary.4
 - @vercel/node-bridge@2.1.2-canary.1
 - @vercel/node@1.13.1-canary.5
 - @vercel/python@2.2.1-canary.4
 - @vercel/redwood@0.5.2-canary.2
 - @vercel/routing-utils@1.12.1-canary.0
 - @vercel/ruby@1.3.1-canary.4"
0c515a46d537199f995983ccc99a843997905ccd,Ethan Arrowood,2022-03-08 19:24:56+00:00,GitHub,2022-03-08 19:24:56+00:00,[build-utils] Change pretty command to `pnpm run` (#7529)
f19690dc3242d0f83bc387277aa2d6e17613a142,Gal Schlezinger,2022-03-08 16:58:26+00:00,GitHub,2022-03-08 16:58:26+00:00,"[build-utils] Add `EdgeFunction` output type (#7510)

Co-authored-by: Steven <steven@ceriously.com>"
6b2a1c38669fae15d0bf7dc0f3da74b29871278d,JJ Kasper,2022-03-06 08:57:45+00:00,GitHub,2022-03-06 08:57:45+00:00,"[node-bridge][build-utils] Add multi payload lambda handling in node-bridge (#7507)

### Related Issues

x-ref: https://github.com/vercel/next.js/pull/34935

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
1e54d606d7db89711b997e77211b1b5a94263733,Sean Massa,2022-03-04 00:33:45+00:00,GitHub,2022-03-04 00:33:45+00:00,"[cli] fail when local config is missing (#7516)

Currently, when the path is not found in a `vc deploy -A SOME_PATH` command, the fallback config is used, which is unexpected behavior. This PR changes that to throw an error that says the path was not found.

---

Card: https://linear.app/vercel/issue/BUI-32/vc-deploy-a-should-fail-when-path-not-found"
c4ab0ebe9c27a136480757d9fb5e45b9d6c77e45,Nathan Rajlich,2022-03-03 21:49:02+00:00,Nathan Rajlich,2022-03-03 21:49:02+00:00,"Publish Canary

 - vercel@24.0.1-canary.4
 - @vercel/node@1.13.1-canary.4"
321f1232a107fe4fa3954a4c91777316a76c432d,Nathan Rajlich,2022-03-03 21:04:33+00:00,GitHub,2022-03-03 21:04:33+00:00,"[node] Move `@vercel/node-bridge` to dependencies (#7515)

Fixes issue introduced by #7436 when using `vc dev`. Since the dev-server script now imports `@vercel/node-bridge` directly, instead of copying the relevant files into the package, the bridge needs to be a regular dependency otherwise the import will fail.

```
Error: Cannot find module '@vercel/node-bridge/launcher.js'
Require stack:
- /usr/local/lib/node_modules/vercel/node_modules/@vercel/node/dist/dev-server.js
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:902:15)
    at Function.Module._load (internal/modules/cjs/loader.js:746:27)
    at Module.require (internal/modules/cjs/loader.js:974:19)
    at require (internal/modules/cjs/helpers.js:93:18)
    at Object.<anonymous> (/usr/local/lib/node_modules/vercel/node_modules/@vercel/node/dist/dev-server.js:79:23)
    at Module._compile (internal/modules/cjs/loader.js:1085:14)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1114:10)
    at Module.load (internal/modules/cjs/loader.js:950:32)
    at Function.Module._load (internal/modules/cjs/loader.js:790:12)
    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:76:12)
Error! `node api/hello.js` failed with exit code 1
```"
8a8203e149df7767a899d92e0dbad0a4fa892c87,Nathan Rajlich,2022-03-03 01:23:02+00:00,Nathan Rajlich,2022-03-03 01:23:02+00:00,"Publish Canary

 - @vercel/redwood@0.5.2-canary.1"
33527165e71404790eb3a5ecaa1b9de48716127a,Sean Massa,2022-03-03 01:21:08+00:00,GitHub,2022-03-03 01:21:08+00:00,remove outdated comment (#7512)
db10383bc877e52f25178ac0dcbe988b319adb16,Sean Massa,2022-03-02 23:17:29+00:00,GitHub,2022-03-02 23:17:29+00:00,[redwood] Add `@vercel/redwood` Builder (#7503)
56960e506ed31a201ee199cb364cde669c0b9b1c,Sean Massa,2022-03-02 18:22:56+00:00,GitHub,2022-03-02 18:22:56+00:00,"[cli] enhance changelog accuracy and format (#7387)

* refactor and add test to changelog

* group changelog into areas

* remove revert and reverted commits from changelog

* make sure Revert commits that revert a commit in a previous changelog are not filtered

* run ""yarn test"" as part of ""yarn test-unit""

* remove advanced syntax

* remove advanced syntax

* temp changelog

* remove temp changelog

* remove global jest config

* Delete symlink

* scope jest dir to just the test files we care about"
a17f3a96ec12483a28667894dcdc3bb57675ead3,Ethan Arrowood,2022-03-02 15:21:30+00:00,Ethan Arrowood,2022-03-02 15:21:30+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.3
 - vercel@24.0.1-canary.3
 - @vercel/client@10.3.1-canary.3
 - @vercel/go@1.3.1-canary.3
 - @vercel/node@1.13.1-canary.3
 - @vercel/python@2.2.1-canary.3
 - @vercel/ruby@1.3.1-canary.3"
9ff86a896ca52d7a515a489dc47cfc9ea94fc0ef,Sam Ko,2022-03-01 23:50:04+00:00,GitHub,2022-03-01 23:50:04+00:00,"[examples] Update todo functionality in the ""sveltekit"" example (#7506)"
6ccb4354f9b07f4dc493560b24a71da0d7465f1a,Jared Palmer,2022-03-01 22:34:39+00:00,GitHub,2022-03-01 22:34:39+00:00,"Add support for PNPM (#6834)

Add support for `pnpm` as well as new fixtures for `pnpm` with and without workspaces

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit && yarn test-integration-once` 

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
82ba9324471e7bf3f4426793c86694fdeb4530a4,Nathan Rajlich,2022-03-01 03:57:09+00:00,Nathan Rajlich,2022-03-01 03:57:09+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.2
 - vercel@24.0.1-canary.2
 - @vercel/client@10.3.1-canary.2
 - @vercel/frameworks@0.6.1-canary.2
 - @vercel/go@1.3.1-canary.2
 - @vercel/node@1.13.1-canary.2
 - @vercel/python@2.2.1-canary.2
 - @vercel/ruby@1.3.1-canary.2"
b995618afb801e4c3a7ab635e58c564236fdfede,Nathan Rajlich,2022-03-01 03:53:25+00:00,GitHub,2022-03-01 03:53:25+00:00,"[build-utils] Make `files` in Lambda be optional (#7498)

This ensures better backwards compatibility."
c897b244179c9b7b2d148161970e3757e8e0fc39,Nathan Rajlich,2022-03-01 03:52:55+00:00,GitHub,2022-03-01 03:52:55+00:00,[build-utils] Allow `Prerender` type in BuildV2 `output` (#7499)
e64b2e199361725e6e55e6783cc25e864376d34c,Nathan Rajlich,2022-03-01 00:05:17+00:00,GitHub,2022-03-01 00:05:17+00:00,[build-utils] Make Builder `routes` output optional (#7497)
9358a5469e2015dfeabfe412ccb56f456625e31c,Haneen Mahdin,2022-02-25 22:43:45+00:00,GitHub,2022-02-25 22:43:45+00:00,"[docs] Fix wrong test command in CONTRIBUTING (#7392)

* docs: use meaningful word in contributing

I have changed the word `run` to `pass` in the Contributing Guidelines file inside `Verifying your change` documentation.
This provides a better understanding of how to run tests after every change.

* docs: remove `test` command run in local development

Remove guideline to test the code using `yarn test`, the test command does not exist in the project root but the build command automatically runs the tests.

* docs: add info about how tests are run

Add information about tests are run in this repo

* docs: fix testing scripts reference

Fixed some mistakes in the contributing readme
- Added `yarn test-unit` instead of `yarn test`

Co-authored-by: Steven <steven@ceriously.com>"
2a24210b7d3e1412bb6877358bb483c892ad3f72,Ella,2022-02-23 17:26:49+00:00,GitHub,2022-02-23 17:26:49+00:00,"[examples] Fix link to Remix nested routes documentation (#7366)

* Remix example: fix link to nested routes

* Update about.tsx

Co-authored-by: Ella <72365100+eilla1@users.noreply.github.com>
Co-authored-by: Steven <steven@ceriously.com>"
2644a599841d2b8c7a89fc8e90fecca45454831b,Lee Robinson,2022-02-23 16:19:27+00:00,GitHub,2022-02-23 16:19:27+00:00,[examples] Re-add 11ty license and author info (#7476)
4eeb8c298c60cf29270c85d9ee0740437e4632ed,Lee Robinson,2022-02-22 20:23:59+00:00,GitHub,2022-02-22 20:23:59+00:00,Update default Hugo & Zola versions. (#7467)
0351f02dff357a396f581e11dd06a72619dbcfb1,Nathan Rajlich,2022-02-22 20:13:21+00:00,Nathan Rajlich,2022-02-22 20:13:21+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.1
 - vercel@24.0.1-canary.1
 - @vercel/client@10.3.1-canary.1
 - @vercel/frameworks@0.6.1-canary.1
 - @vercel/go@1.3.1-canary.1
 - @vercel/node@1.13.1-canary.1
 - @vercel/python@2.2.1-canary.1
 - @vercel/ruby@1.3.1-canary.1"
0d7fa2f9128f02e3be23851eb2e3d450c79af903,Yuanlin Lin,2022-02-22 18:59:32+00:00,GitHub,2022-02-22 18:59:32+00:00,"[frameworks] Updated Umi.js logo (#7470)

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
3b646880e70341cef861d3798841e676afb7fcb7,Nathan Rajlich,2022-02-22 16:57:11+00:00,GitHub,2022-02-22 16:57:11+00:00,"[node] Use `NodejsLambda` class (#7436)

Updates `@vercel/node` to utilize the `NodejsLambda` class so that it doesn't need to explicitly bundle in the launcher/bridge files into the build result. This reduces the complexity of the Builder and is a cleaner separation of concerns. The `helpers.test.ts` file has been moved to `@vercel/node-bridge` so it's being removed in this PR as well."
350a0e5f3603d941fcf3953b201f34c07d15486d,Steven,2022-02-18 23:53:26+00:00,GitHub,2022-02-18 23:53:26+00:00,[examples] Bump Next.js to 12.1.0 (#7458)
5c21d400bd729822d6f65f8515b9424d88a5308f,Steven,2022-02-18 16:37:59+00:00,GitHub,2022-02-18 16:37:59+00:00,"Update dev test for image optimization with `next@latest` and python flask (#7454)

Related to https://github.com/vercel/next.js/pull/34431"
04029013a60ed96c86ed369990cef6dd284d1724,Nathan Rajlich,2022-02-18 04:40:07+00:00,Nathan Rajlich,2022-02-18 04:40:07+00:00,"Publish Canary

 - @vercel/build-utils@2.14.1-canary.0
 - vercel@24.0.1-canary.0
 - @vercel/client@10.3.1-canary.0
 - @vercel/frameworks@0.6.1-canary.0
 - @vercel/go@1.3.1-canary.0
 - @vercel/node-bridge@2.1.2-canary.0
 - @vercel/node@1.13.1-canary.0
 - @vercel/python@2.2.1-canary.0
 - @vercel/ruby@1.3.1-canary.0"
c65e7fa88361ff6740b12a87363cd2f77dfc8f08,Nathan Rajlich,2022-02-18 04:36:37+00:00,GitHub,2022-02-18 04:36:37+00:00,[node-bridge] Move helpers to node-bridge (#7451)
27b68be93f2ac61625d71bae7d4096439d44b46b,Knut Melvr,2022-02-16 22:26:39+00:00,GitHub,2022-02-16 22:26:39+00:00,"[frameworks] Add Sanity Studio (#7350)

Adds the default config and detector for a Sanity Studio project."
99fa729966c4334aa2d64c592421cc65e1644bdb,Nathan Rajlich,2022-02-16 19:01:47+00:00,Nathan Rajlich,2022-02-16 19:01:47+00:00,"Publish Stable

 - @vercel/build-utils@2.14.0
 - vercel@24.0.0
 - @vercel/client@10.3.0
 - @vercel/frameworks@0.6.0
 - @vercel/go@1.3.0
 - @vercel/node-bridge@2.1.1
 - @vercel/node@1.13.0
 - @vercel/python@2.2.0
 - @vercel/routing-utils@1.12.0
 - @vercel/ruby@1.3.0
 - @vercel/static-config@1.0.0-canary.0"
2bb3da80e070cf4994df03635ad3d26eb5f417e6,Nathan Rajlich,2022-02-16 09:54:47+00:00,GitHub,2022-02-16 09:54:47+00:00,"[cli] Remove timestamp based lookback in `vc bisect --help` (#7442)

Looking up a deployment via timestamp is not implemented in the `vc
bisect` command, so remove it from the `--help` output."
b852f34a2771cffa08b65fc2ba47a254ce6c43dc,Nathan Rajlich,2022-02-16 08:33:25+00:00,GitHub,2022-02-16 08:33:25+00:00,"[build-utils] Add Builder TypeScript types (#7386)

Adds formal type interfaces for Builders into `@vercel/build-utils`, and
updates the serverless functions runtimes to utilize them. This provides
type safety for the args/return values in i.e. the `build()` functions,
where previously they were not using any explicit return type."
ce8e6e3806cdd6f5af920f67371011faf8d22758,Nathan Rajlich,2022-02-15 22:17:12+00:00,GitHub,2022-02-15 22:17:12+00:00,"[build-utils] Add `NodejsLambda` class (#7423)

When an instance of this class is returned in a Builder's `output`, it is a signal to the build system that it needs to add additional files to the final Lambda before creating the zip file."
983946650e9170b4d3e6f861fce83113148008dc,Nathan Rajlich,2022-02-15 03:00:15+00:00,GitHub,2022-02-15 03:00:15+00:00,"[cli] Remove initial iteration of `vc build` and Plugins (#7390)

* [cli] Remove initial iteration of `vc build` and Plugins

The `vercel build` command is being restructured, so we'll remove it for
now so that this initial iteration isn't included as part of the stable
CLI release.

* Update packages/cli/src/commands/init/init.ts

Co-authored-by: Steven <steven@ceriously.com>

* Remove more `.output` references

* Remove unnecessary space

* Fix test

* Remove vc dev middleware tests for now

Co-authored-by: Steven <steven@ceriously.com>"
59e4572e7698656676561ad60cc358272697f64c,Steven,2022-02-13 01:51:14+00:00,Steven,2022-02-13 01:51:14+00:00,"Publish Canary

 - vercel@23.1.3-canary.76
 - @vercel/node@1.12.2-canary.11
 - vercel-plugin-node@1.12.2-canary.43"
5c297122cbd32d0b117a769f207f17692d410f8d,Steven,2022-02-12 22:39:18+00:00,GitHub,2022-02-12 22:39:18+00:00,"[cli][node] Bump nft to 0.17.5 (#7349)

- Fixes #7287"
28f3bf9ef6e492156eb127c7cbdcbfcfeafdf7e4,Nathan Rajlich,2022-02-10 21:44:22+00:00,Nathan Rajlich,2022-02-10 21:44:22+00:00,"Publish Canary

 - @vercel/build-utils@2.13.1-canary.2
 - vercel@23.1.3-canary.75
 - @vercel/client@10.2.3-canary.53
 - @vercel/go@1.2.4-canary.7
 - vercel-plugin-middleware@0.0.0-canary.27
 - @vercel/node@1.12.2-canary.10
 - vercel-plugin-go@1.0.0-canary.38
 - vercel-plugin-node@1.12.2-canary.42
 - vercel-plugin-python@1.0.0-canary.39
 - vercel-plugin-ruby@1.0.0-canary.38
 - @vercel/python@2.1.2-canary.5
 - @vercel/ruby@1.2.10-canary.3"
a936e92b8bdaaf2fe0c4efdf883d4820780761c8,Nathan Rajlich,2022-02-10 21:44:02+00:00,GitHub,2022-02-10 21:44:02+00:00,[build-utils] Retain support for passing in a `zipBuffer` directly to `new Lambda()` (#7422)
ab1decf79da76e85f7f562d1c4ee5e5dcf4c2a17,Nathan Rajlich,2022-02-10 19:51:31+00:00,Nathan Rajlich,2022-02-10 19:51:31+00:00,"Publish Canary

 - @vercel/build-utils@2.13.1-canary.1
 - vercel@23.1.3-canary.74
 - @vercel/client@10.2.3-canary.52
 - @vercel/frameworks@0.5.1-canary.21
 - @vercel/go@1.2.4-canary.6
 - vercel-plugin-middleware@0.0.0-canary.26
 - @vercel/node@1.12.2-canary.9
 - vercel-plugin-go@1.0.0-canary.37
 - vercel-plugin-node@1.12.2-canary.41
 - vercel-plugin-python@1.0.0-canary.38
 - vercel-plugin-ruby@1.0.0-canary.37
 - @vercel/python@2.1.2-canary.4
 - @vercel/ruby@1.2.10-canary.2"
34408a7902c977f7518e0e8de8e14fe1ba5cfa08,Nathan Rajlich,2022-02-10 19:45:05+00:00,GitHub,2022-02-10 19:45:05+00:00,"[build-utils] De-couple zip file creation from `Lambda` class (#7417)

Makes the `Lambda` class itself just a reference of the files that are
needed to produce a zip file, and adds a `createZip()` function that
does the actual zip file creation. This will allow the zip file creation
to be done in the Vercel build container instead of directly in the
Builder itself.

* Adds `files` property to `Lambda` class
* Adds `createZip()` function to `Lambda` class
* Deprecates the `createLambda()` function
* Deprecates the `zipBuffer` property (only populated when `createLambda()` is used)
* Removes the private `FILES_SYMBOL` symbol, since `files` is the same thing"
dc2d814d0f75aa19f2422ce747121b73507e9514,Dominik Ferber,2022-02-08 08:56:42+00:00,GitHub,2022-02-08 08:56:42+00:00,Add `$schema` property to `vercel.json` (#7394)
2402db92ebc37a4421940176b92eb2e7db16cf10,Nathan Rajlich,2022-02-01 18:39:10+00:00,GitHub,2022-02-01 18:39:10+00:00,"[cli] Add `vercel bisect` command (#5778)

This PR adds a new `vercel bisect` command which is inspired by `git bisect`. This command takes two deployment URLs as its input (one ""bad"" deployment that exhibits a bug, and one ""good"" deployment where the bug does not occur) and steps through the deployments using a binary search. The command is useful for finding a deployment (and commit if the project is connected to a Git repo) where a bug has been introduced.

<img width=""582"" alt=""Screen Shot 2022-01-26 at 12 46 29 PM"" src=""https://user-images.githubusercontent.com/71256/151244295-8e90c493-c45f-40b4-8e43-f39e7fcac262.png"">"
a1787c740de0d9004e11f7666b6014f820d3c523,Lee Robinson,2022-01-31 18:16:11+00:00,GitHub,2022-01-31 18:16:11+00:00,Add  --port $PORT for Vite. (#7378)
17fd88e044a807adf4ee6ed662cdb7c7556e912d,Mark Glagola,2022-01-27 18:03:46+00:00,GitHub,2022-01-27 18:03:46+00:00,"[cli] Remove legacy verification handling in `alias` command (#7305)

* [cli] Remove legacy verification handling in `alias` command

* Update get-domain.ts

Co-authored-by: Nathan Rajlich <n@n8.io>"
03a8fbd3a738604e03f81a0f906f998a2114f744,Nathan Rajlich,2022-01-27 01:42:04+00:00,GitHub,2022-01-27 01:42:04+00:00,"[cli] Use `@vercel/fetch-retry` in CLI integration tests (#7360)

These integration tests have started consistently failing with
`ECONNRESET` errors and after some debugging it's been
difficult to point the finger at anything related to Vercel
infrastructure. So possibly it's related to GitHub actions infra
changes, but either way retrying seems to help."
8d37c1045f420b322015f35745b8f81b1cd614b8,Lee Robinson,2022-01-24 05:02:29+00:00,GitHub,2022-01-24 05:02:29+00:00,[docs] Update README. (#7356)
30c433d24892f5a8da77ff39773d28f9c5b8f516,Jared Palmer,2022-01-21 23:07:50+00:00,GitHub,2022-01-21 23:07:50+00:00,Add runCustomInstallCommand build-util (#7345)
d89a79601c3377d86b64d4a55bb2767e3ddba1ea,Jiachi Liu,2022-01-20 21:59:33+00:00,GitHub,2022-01-20 21:59:33+00:00,[examples] Update Next.js example CSS styling. (#7337)
9bbb2cdcbd39846f4a7c97c3cf8838eee130eec4,Mark Glagola,2022-01-20 15:27:31+00:00,Mark Glagola,2022-01-20 15:27:31+00:00,"Publish Canary

 - @vercel/build-utils@2.13.1-canary.0
 - vercel@23.1.3-canary.73
 - @vercel/client@10.2.3-canary.51
 - @vercel/frameworks@0.5.1-canary.20
 - @vercel/go@1.2.4-canary.5
 - vercel-plugin-middleware@0.0.0-canary.25
 - @vercel/node@1.12.2-canary.8
 - vercel-plugin-go@1.0.0-canary.36
 - vercel-plugin-node@1.12.2-canary.40
 - vercel-plugin-python@1.0.0-canary.37
 - vercel-plugin-ruby@1.0.0-canary.36
 - @vercel/python@2.1.2-canary.3
 - @vercel/ruby@1.2.10-canary.1"
00fa5e4d3e919bce1b52669057e96be6218cd276,Lee Robinson,2022-01-18 16:06:34+00:00,GitHub,2022-01-18 16:06:34+00:00,Update frameworks.ts (#7323)
8ed55c66425bf2e7fb776badcaf3132b4f6adba7,Lee Robinson,2022-01-18 14:56:31+00:00,GitHub,2022-01-18 14:56:31+00:00,[examples] Update all examples to use `.vercel.app` instead of `.vercel.com` (#7320)
59ae99bcfff0373f970fa66f7a5e1a50f66bfd82,Lee Robinson,2022-01-18 07:17:54+00:00,GitHub,2022-01-18 07:17:54+00:00,"Remove (beta) for `vc dev`. (#7322)

Closes https://github.com/vercel/vercel/issues/7297.

Specifically for `dev` and not `build`."
897ccce744e1f30bf7d363e9e1cb4652318c4f5b,Lee Robinson,2022-01-18 02:10:52+00:00,GitHub,2022-01-18 02:10:52+00:00,Update Preact example to v10. (#7319)
d9e4696e5ae5705a85b1199c8967ccf98df1f06a,Lee Robinson,2022-01-18 02:01:28+00:00,GitHub,2022-01-18 02:01:28+00:00,Update Angular example to v13. (#7318)
7ae875c8bda4509d3a7f9e6f91e9a2145ce6d0fe,Lee Robinson,2022-01-18 01:50:31+00:00,GitHub,2022-01-18 01:50:31+00:00,Update Gatsby example to v4. (#7317)
914424d4627d569d914ffb6b382ddc66eec64b2b,Lee Robinson,2022-01-18 01:15:39+00:00,GitHub,2022-01-18 01:15:39+00:00,Update dependencies of Next.js example. (#7316)
3674250921c019be4a127c55d6411ca7f6553080,Lee Robinson,2022-01-18 01:11:32+00:00,GitHub,2022-01-18 01:11:32+00:00,Update Svelte example dependencies. (#7315)
ec6a645d3f231db81e48d5266c3d4bb01c5621d7,Lee Robinson,2022-01-18 01:06:51+00:00,GitHub,2022-01-18 01:06:51+00:00,Update example to Vue 3. (#7314)
5bd0e0f6ca003febea88c9158e41aa9a7c6077c3,Lee Robinson,2022-01-18 00:54:21+00:00,GitHub,2022-01-18 00:54:21+00:00,Update example to Eleventy 1.0. (#7313)
bd88a555802a607c9cee67b69aa5aa287cd3351e,Stephanie Dietz,2022-01-18 00:17:03+00:00,GitHub,2022-01-18 00:17:03+00:00,Updated SvelteKit example. (#7301)
fc420c9e216565a89112b4449a7d2fcee3d06c09,Lee Robinson,2022-01-17 16:42:34+00:00,GitHub,2022-01-17 16:42:34+00:00,Update CRA template for v5. (#7312)
aa5005e19fa58fd7c5c4c3dfbac929b784db9b33, F A I S A L ,2022-01-13 21:33:31+00:00,GitHub,2022-01-13 21:33:31+00:00,"[examples] Update live example URL for ""angular"" (#7238)"
06a157c72193f520411bcea9d647df38c7098dea,Mark Glagola,2022-01-13 17:41:12+00:00,GitHub,2022-01-13 17:41:12+00:00,Bump cert by id endpoint to v6 (#7307)
c2a19872953445775a95dc50da149abbcd59c905,Lee Robinson,2022-01-10 22:21:17+00:00,GitHub,2022-01-10 22:21:17+00:00,[examples] Update Nuxt template for Nuxt 3 (#7298)
bae26cc0178ff49c3050ceaf5db00969e510cc6b,Steven,2021-12-20 17:29:50+00:00,GitHub,2021-12-20 17:29:50+00:00,[ci] Bump turbo to 1.0.18 (#7202)
cecdd15b788f3867814b7a6f67e8e7d935eb1795,Steven,2021-12-16 01:53:14+00:00,GitHub,2021-12-16 01:53:14+00:00,"[ci] Add turborepo for faster builds (#7193)

* [ci] Add turborepo for faster builds

* Replace yarn run with turbo run

* Fix typo

* Add `@vercel/build-utils` as explicit dev dep

* Remove unused --clean argument

* Only turbo the ""build"" script, leave tests as-is

* Bump turbo to 1.0.13

* Add back test-unit

* Revert ""Add back test-unit""

This reverts commit 469868c5c06f6c6f15da7ef0a440587d41419fd8."
7039771ec9d90c61219701b5557297d23d428617,Steven,2021-12-15 14:21:03+00:00,Steven,2021-12-15 14:21:03+00:00,"Publish Stable

 - @vercel/build-utils@2.13.0"
38d643a8e68ad0c71433788f3b770e4b4c1378ee,Steven,2021-12-15 00:16:20+00:00,Steven,2021-12-15 00:16:20+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.47
 - vercel@23.1.3-canary.72
 - @vercel/client@10.2.3-canary.50
 - vercel-plugin-middleware@0.0.0-canary.24
 - vercel-plugin-go@1.0.0-canary.35
 - vercel-plugin-node@1.12.2-canary.39
 - vercel-plugin-python@1.0.0-canary.36
 - vercel-plugin-ruby@1.0.0-canary.35"
9c171c413b33d0a8b2e7f6e2eac2b2ec5985c43d,Steven,2021-12-15 00:15:43+00:00,GitHub,2021-12-15 00:15:43+00:00,[build-utils] Add `_experimental_` prefix to exported experimental functions (#7190)
b620c5343a60039f86188d4667e4dc71baf4f505,Steven,2021-12-14 14:02:29+00:00,Steven,2021-12-14 14:02:29+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.46
 - vercel@23.1.3-canary.71
 - @vercel/client@10.2.3-canary.49
 - @vercel/frameworks@0.5.1-canary.19
 - vercel-plugin-middleware@0.0.0-canary.23
 - vercel-plugin-go@1.0.0-canary.34
 - vercel-plugin-node@1.12.2-canary.38
 - vercel-plugin-python@1.0.0-canary.35
 - vercel-plugin-ruby@1.0.0-canary.34"
f42391a1f5015e2f94d4809e5e97fde983295af6,Dom Eccleston,2021-12-14 03:12:56+00:00,GitHub,2021-12-14 03:12:56+00:00,Add 'VITE_' prefix to SvelteKit framework (#6821)
0505f4e8bd3101b3e7ca88e6681f9fb121bef3fc,Steven,2021-12-14 00:10:42+00:00,GitHub,2021-12-14 00:10:42+00:00,"[cli] Major: remove ""now"" prop from package.json (#7186)"
ca433a467956e29b3e206034b68bd9de681145fe,Steven,2021-12-13 21:31:46+00:00,Steven,2021-12-13 21:31:46+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.45
 - vercel@23.1.3-canary.70
 - @vercel/client@10.2.3-canary.48
 - @vercel/frameworks@0.5.1-canary.18
 - vercel-plugin-middleware@0.0.0-canary.22
 - vercel-plugin-go@1.0.0-canary.33
 - vercel-plugin-node@1.12.2-canary.37
 - vercel-plugin-python@1.0.0-canary.34
 - vercel-plugin-ruby@1.0.0-canary.33"
204b481c56adfb41eaf489243abe6f0dd65a9aef,Steven,2021-12-13 21:30:58+00:00,GitHub,2021-12-13 21:30:58+00:00,[examples] Rename master to main (#7184)
9265f78c52eb24725c609fc6bc4305c88887951c,Ryan Carniato,2021-12-13 20:38:28+00:00,GitHub,2021-12-13 20:38:28+00:00,"[frameworks][examples] Add solidstart template (#6984)

* add solid/solidstart templates

* remove solid entry, add readme logos

* remove legacy config, add yarn.lock, fix gitignore

* remove solid example

* update deps, remove FS dir

Co-authored-by: Steven <steven@ceriously.com>"
783144e0d653140739e589a182e1a7bc4cce7d91,Steven,2021-12-10 23:37:49+00:00,GitHub,2021-12-10 23:37:49+00:00,"[test] Skip `runPackageJsonScript()` on windows and macOS (#7176)

This test is flaky on windows and macOS but its never actually run on those OS's so there is no need to test it there."
d563b96ff072c392848cffc90921d5e8966df7b7,Steven,2021-12-10 23:34:19+00:00,GitHub,2021-12-10 23:34:19+00:00,"[ci] Speed up GH publish skip (#7175)

This is following a similar pattern to Next.js workflows so that the publish step is skipped and reduces the time it takes GH Actions to run since we don't need to build to know that it should be skipped."
ecb44812263a03803157ad258c2f0f3cd0fc83ef,Steven,2021-12-10 19:45:46+00:00,Steven,2021-12-10 19:45:46+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.44
 - vercel@23.1.3-canary.69
 - @vercel/client@10.2.3-canary.47
 - vercel-plugin-middleware@0.0.0-canary.21
 - vercel-plugin-go@1.0.0-canary.32
 - vercel-plugin-node@1.12.2-canary.36
 - vercel-plugin-python@1.0.0-canary.33
 - vercel-plugin-ruby@1.0.0-canary.32"
347407b24417ff3c90561eaf567a991f69124b19,Steven,2021-12-10 19:43:31+00:00,GitHub,2021-12-10 19:43:31+00:00,"[build-utils] Add exclusion condition for vercel cli version (#7174)

Fixes https://github.com/vercel/runtimes/issues/295"
01ea7b4b2a4acb47b6de5f593d9c33856caf4403,Steven,2021-12-10 00:56:30+00:00,Steven,2021-12-10 00:56:30+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.43
 - vercel@23.1.3-canary.68
 - @vercel/client@10.2.3-canary.46
 - vercel-plugin-middleware@0.0.0-canary.20
 - vercel-plugin-go@1.0.0-canary.31
 - vercel-plugin-node@1.12.2-canary.35
 - vercel-plugin-python@1.0.0-canary.32
 - vercel-plugin-ruby@1.0.0-canary.31"
475a227ba90ffbf2356bd2dae1d17583c029da16,Steven,2021-12-10 00:54:39+00:00,GitHub,2021-12-10 00:54:39+00:00,"[build-utils][cli] Detect file system api usage, abort on ""Exclusion Conditions"" (#7158)"
40ca92f2e96aa90c611230cb7912bf60f3d1b6af,Nathan Rajlich,2021-12-09 03:10:48+00:00,GitHub,2021-12-09 03:10:48+00:00,"[client] Use a Set to prevent duplicates in `hashes()` function (#7159)

Follow-up to #7150 to use a Set instead of assuming the conflicting entry is at index 0, which is not always the case."
465129e62e61d2dd58e5063f5ff59f09fcf0a104,Nathan Rajlich,2021-12-08 19:45:06+00:00,GitHub,2021-12-08 19:45:06+00:00,"[cli] Remove support for single file deployments (#6652)

Deploying a single file has printed a deprecation warning for a long time. Let's finally remove that behavior."
bf0d5a7f299db7f7ef813e2df6264a32dca5ca4f,Steven,2021-12-08 15:17:20+00:00,GitHub,2021-12-08 15:17:20+00:00,[cli] Add `@vercel/client` as a devDependency (#7154)
d3ef240f6e01fff3d11d0499c9aaf892968748e3,Leo Lamprecht,2021-12-08 14:53:14+00:00,Leo Lamprecht,2021-12-08 14:53:14+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.42
 - vercel@23.1.3-canary.67
 - @vercel/client@10.2.3-canary.45
 - vercel-plugin-middleware@0.0.0-canary.19
 - vercel-plugin-go@1.0.0-canary.30
 - vercel-plugin-node@1.12.2-canary.34
 - vercel-plugin-python@1.0.0-canary.31
 - vercel-plugin-ruby@1.0.0-canary.30
 - @vercel/python@2.1.2-canary.2"
5b26ebc7b8f1037e66cba009430e2e8e97c71e1d,Leo Lamprecht,2021-12-08 14:52:43+00:00,GitHub,2021-12-08 14:52:43+00:00,Make Python CLI Plugin work (#7155)
3427ad6ce01843ffa0fe6906b9541effb64d2087,Leo Lamprecht,2021-12-08 11:50:58+00:00,Leo Lamprecht,2021-12-08 11:50:58+00:00,"Publish Canary

 - vercel@23.1.3-canary.66"
4ab5e4326b6e9ece4f75db8906836438de72dbde,Leo Lamprecht,2021-12-08 11:50:27+00:00,GitHub,2021-12-08 11:50:27+00:00,Improved Vercel CLI link (#7151)
d24a3ce3ab23114bfa8647b75792f33bd4af0e6a,Leo Lamprecht,2021-12-08 11:10:44+00:00,Leo Lamprecht,2021-12-08 11:10:44+00:00,"Publish Canary

 - @vercel/client@10.2.3-canary.44"
29a44db8d9377d7f16146817aded57ebfbcff752,Steven,2021-12-08 01:40:49+00:00,GitHub,2021-12-08 01:40:49+00:00,"[client] Fix duplicate files when analyzing `nft.json` (#7150)

This PR fixes a regression from #7144 where a duplicate file was added if `nft.json` referenced an existing file.

I also refactored the prepared files logic to avoid cloning the array in every loop iteration.

Review [without whitespace](https://github.com/vercel/vercel/pull/7150/files?diff=split&w=1) will make it easier to understand.

- Related to https://github.com/vercel/runtimes/issues/304"
695f3a921220310a924c0af7dffed4eee306e060,Steven,2021-12-07 23:25:02+00:00,Steven,2021-12-07 23:25:02+00:00,"Publish Canary

 - vercel@23.1.3-canary.65
 - @vercel/client@10.2.3-canary.43
 - vercel-plugin-middleware@0.0.0-canary.18"
3ff777b8ede7ab9a76c5b9ccfcb0e2799ca21957,Steven,2021-12-07 23:17:58+00:00,GitHub,2021-12-07 23:17:58+00:00,"[client] Resolve `.nft.json` files when `vc deploy --prebuilt` (#7144)

This ensures that using `vc deploy --prebuilt` will also upload any files that `.output/**/.nft.json` points to and also handle the Root Directory correctly since `vc build` emits `rootdir/.output`.

- Related to https://github.com/vercel/runtimes/issues/304."
d94b9806ab9ff1d8f19ab7153784a53060f0c96a,Tommaso De Rossi,2021-12-07 22:16:46+00:00,GitHub,2021-12-07 22:16:46+00:00,"[middleware] Define env vars when building `_middleware.js` with esbuild (#7087)

### Related Issues

> Fixes #7086
> Related to #7086

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
35c8fc272905524eeb83268bdc09edb165d3382a,Leo Lamprecht,2021-12-07 20:13:41+00:00,Leo Lamprecht,2021-12-07 20:13:41+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.41
 - vercel@23.1.3-canary.64
 - @vercel/client@10.2.3-canary.42
 - vercel-plugin-middleware@0.0.0-canary.17
 - vercel-plugin-go@1.0.0-canary.29
 - vercel-plugin-node@1.12.2-canary.33
 - vercel-plugin-python@1.0.0-canary.30
 - vercel-plugin-ruby@1.0.0-canary.29"
0a468fd6d7c7c803d555c15aab5439ac78d64b71,Leo Lamprecht,2021-12-07 20:13:29+00:00,GitHub,2021-12-07 20:13:29+00:00,"Correctly clean up files for CLI Plugins (#7149)

* Correctly clean up files for CLI Plugins

* Cleaned up the code"
d31ebbabe4d9533d0e98137d76eb319b01ac8b13,Leo Lamprecht,2021-12-07 16:46:08+00:00,Leo Lamprecht,2021-12-07 16:46:08+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.40
 - vercel@23.1.3-canary.63
 - @vercel/client@10.2.3-canary.41
 - vercel-plugin-middleware@0.0.0-canary.16
 - vercel-plugin-go@1.0.0-canary.28
 - vercel-plugin-node@1.12.2-canary.32
 - vercel-plugin-python@1.0.0-canary.29
 - vercel-plugin-ruby@1.0.0-canary.28"
09c9b71adbb1098ed94383dbb93b1eb31a1bb430,Leo Lamprecht,2021-12-07 16:44:59+00:00,GitHub,2021-12-07 16:44:59+00:00,"Adjust import statements inside Runtime launchers (#7148)

* Added basic logic

* Polished basic logic

* Made logic actually replace content

* Perfected the logic

* Added comment

* Simplified logic

* Added another comment

* Added debug log

* More detailed debug log

* Update packages/build-utils/src/convert-runtime-to-plugin.ts

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

* Update packages/build-utils/src/convert-runtime-to-plugin.ts

Co-authored-by: Steven <steven@ceriously.com>

* Simpler logic

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Steven <steven@ceriously.com>"
5975db4d66221a89adf5a360a00efb428ff7e10e,Leo Lamprecht,2021-12-07 00:10:58+00:00,GitHub,2021-12-07 00:10:58+00:00,Fixed middleware tests (#7146)
2c86ac654ccde97426127fd0a6ffd04253227c50,Leo Lamprecht,2021-12-06 22:37:05+00:00,Leo Lamprecht,2021-12-06 22:37:05+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.39
 - vercel@23.1.3-canary.62
 - @vercel/client@10.2.3-canary.40
 - vercel-plugin-middleware@0.0.0-canary.15
 - vercel-plugin-go@1.0.0-canary.27
 - vercel-plugin-node@1.12.2-canary.31
 - vercel-plugin-python@1.0.0-canary.28
 - vercel-plugin-ruby@1.0.0-canary.27"
ca5f066eb96320f1d8ce60aa21ca4d9ffb4c1854,Leo Lamprecht,2021-12-06 22:35:07+00:00,GitHub,2021-12-06 22:35:07+00:00,"Simplify NFT output logic for CLI and CLI Plugins (#7143)

* Simplify NFT output logic for CLI Plugins

* Made tests pass

* Remove useless logic from Vercel CLI

* Update packages/build-utils/src/convert-runtime-to-plugin.ts

Co-authored-by: Steven <steven@ceriously.com>

* Simplified CLI code

* Removed useless file

Co-authored-by: Steven <steven@ceriously.com>"
410ef8610278275939d8de1c082c15f2743ca2f7,Leo Lamprecht,2021-12-06 20:53:07+00:00,GitHub,2021-12-06 20:53:07+00:00,"Support nested API Routes and fix handler for CLI Plugins (#7141)

We have identified that the `handler` for Lambdas does not support a dot-preceded path for Ruby, Python, and probably other languages, so we're adjusting the File System API to change `.output` inside the Lambda to something else, which requires version `2` of `functions-manifest.json`.

Furthermore, we're also bumping the `.nft.json` files to version `2`, which allows `output` to be relative to the NFT file itself, so that, inside the Lambda, the behavior mentioned at the top can be applied by the File System API.

As a nice side effect, this will also support nested API Routes, because it'll place all the dependencies next to every API Route, meaning that the launcher will have access to all of them (bundling multiple API Routes or Pages into the same Lambda currently doesn't work for non-Next.js anyways, because of https://github.com/vercel/runtimes/issues/305).

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
6792edf32a1a81f240cc1b5c9f9cc756a9a2b83b,Steven,2021-12-06 19:36:06+00:00,Steven,2021-12-06 19:36:06+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.38
 - vercel@23.1.3-canary.61
 - @vercel/client@10.2.3-canary.39
 - @vercel/frameworks@0.5.1-canary.17
 - vercel-plugin-middleware@0.0.0-canary.14
 - vercel-plugin-go@1.0.0-canary.26
 - vercel-plugin-node@1.12.2-canary.30
 - vercel-plugin-python@1.0.0-canary.27
 - vercel-plugin-ruby@1.0.0-canary.26"
67de167a7eeda97da2656c598e9bc7c1798592b1,Steven,2021-12-06 19:34:30+00:00,GitHub,2021-12-06 19:34:30+00:00,[frameworks][cli] Remove duplicate `getFsOutputDir()` definitions (#7124)
0c5c05d90b04b6e2d0eafc637119743c93ae0984,Leo Lamprecht,2021-12-06 16:22:55+00:00,GitHub,2021-12-06 16:22:55+00:00,"Prevent CLI Plugins from overwriting files (#7140)

* Prevent CLI Plugins from overwriting files

* Revert ""Temporarily remove CLI Plugin linking (#7138)""

This reverts commit d6a5aa4f6d2d5552f3b00b3e22c1a07db9a69179."
fe43c9c4b2e8fdefbc4b35778e4593a55feddac0,Leo Lamprecht,2021-12-06 13:28:12+00:00,Leo Lamprecht,2021-12-06 13:28:12+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.37
 - vercel@23.1.3-canary.60
 - @vercel/client@10.2.3-canary.38
 - vercel-plugin-middleware@0.0.0-canary.13
 - vercel-plugin-go@1.0.0-canary.25
 - vercel-plugin-node@1.12.2-canary.29
 - vercel-plugin-python@1.0.0-canary.26
 - vercel-plugin-ruby@1.0.0-canary.25"
d6a5aa4f6d2d5552f3b00b3e22c1a07db9a69179,Leo Lamprecht,2021-12-06 13:25:22+00:00,GitHub,2021-12-06 13:25:22+00:00,Temporarily remove CLI Plugin linking (#7138)
1c3701628d88e82f6e0535ecdba2c5e91ce61976,Leo Lamprecht,2021-12-04 16:01:20+00:00,Leo Lamprecht,2021-12-04 16:01:20+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.36
 - vercel@23.1.3-canary.59
 - @vercel/client@10.2.3-canary.37
 - vercel-plugin-middleware@0.0.0-canary.12
 - vercel-plugin-go@1.0.0-canary.24
 - vercel-plugin-node@1.12.2-canary.28
 - vercel-plugin-python@1.0.0-canary.25
 - vercel-plugin-ruby@1.0.0-canary.24"
45689f22ab3d671ccb616ad97bbfd08ca142bf9b,Leo Lamprecht,2021-12-04 16:00:15+00:00,GitHub,2021-12-04 16:00:15+00:00,"Correctly position dependencies for CLI Plugins (#7133)

Previously, CLI Plugins would try to mount the user-provided request handler (e.g. `api/test.rb`) at the same position inside the Lambda at which the launcher was located (e.g. `api/test.rb`), which would cause the launcher to be overwritten.

With this change, all the destination mounting points for NFT input files are becoming relative to the `.output/server/pages/api` directory instead of `.output/server/pages`, so they should no longer overwrite the launcher, and instead be loaded from the launcher, like normal.

This PR might have two problems:

- If imports in Ruby/Python/etc are relative to `cwd` and not the file from which the import is executed (which I doubt), this would fail.
- We might have to replace `api` with the exact sub folder of the API Route within `.output/server/pages/api` if the current change doesn't yet work for nested paths. Although that also means repeating all of the other dependencies (not just the user-provided request handler) in a different location for every single API Route.

The two above will be tested after this PR was merged, as there currently isn't a way to test `vercel-plugin-go`, `vercel-plugin-python`, and `vercel-plugin-ruby` without publishing a canary, because they don't bundle `@vercel/build-utils`, which was the package that was just updated.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
2c3ddffaacb370eb4c0893815b3bc7417f92d432,Leo Lamprecht,2021-12-04 00:30:37+00:00,Leo Lamprecht,2021-12-04 00:30:37+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.35
 - vercel@23.1.3-canary.58
 - @vercel/client@10.2.3-canary.36
 - vercel-plugin-middleware@0.0.0-canary.11
 - vercel-plugin-go@1.0.0-canary.23
 - vercel-plugin-node@1.12.2-canary.27
 - vercel-plugin-python@1.0.0-canary.24
 - vercel-plugin-ruby@1.0.0-canary.23
 - @vercel/ruby@1.2.10-canary.0"
c3ea0195c27e870c6b3407f288546cb9bdfae0b7,Leo Lamprecht,2021-12-04 00:29:46+00:00,GitHub,2021-12-04 00:29:46+00:00,"Fixed Lambda handler for compiled languages (#7129)

* Use correct Lambda handler for compiled languages

* Use the correct entrypoint

* Fixed the logic

* Perfected it

* Simpler code

* Update packages/build-utils/src/convert-runtime-to-plugin.ts

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

* Handle edge cases and simplify logic

* Fixed the logic yet again to work perfectly

* Normalize Page path

* Simplified everything

* Fixed the tests

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
5f5e50cff093a9c9acf8d9042876133c43748ae1,Gary Borton,2021-12-03 23:22:21+00:00,GitHub,2021-12-03 23:22:21+00:00,"[middleware] Make edge functions be in ""strict mode"" (#7118)

Co-authored-by: Leo Lamprecht <leo@vercel.com>
Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: Nathan Rajlich <n@n8.io>"
160f4d46d906c8b7614a9aa63a60d3c79c3f0093,Steven,2021-12-03 21:39:00+00:00,Steven,2021-12-03 21:39:00+00:00,"Publish Stable

 - @vercel/ruby@1.2.9"
8d619bd7cccbcd0d25c9a75133a24eaedcf72474,Steven,2021-12-03 20:43:53+00:00,Steven,2021-12-03 20:43:53+00:00,"Publish Canary

 - vercel@23.1.3-canary.57
 - vercel-plugin-ruby@1.0.0-canary.22
 - @vercel/ruby@1.2.8-canary.7"
b94337d8422330458a6d2cf26cf35ad8dd7b622e,Steven,2021-12-03 19:34:01+00:00,GitHub,2021-12-03 19:34:01+00:00,"[ruby] Show error when Ruby 2.5.x detected (#7126)

* [ruby] Show error when Ruby 2.5.x detected

* Add test with ruby 2.5.x"
34f4222ca2d3cc5134469daa355a7f67c2054c9b,Leo Lamprecht,2021-12-03 19:15:25+00:00,Leo Lamprecht,2021-12-03 19:15:25+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.34
 - vercel@23.1.3-canary.56
 - @vercel/client@10.2.3-canary.35
 - vercel-plugin-middleware@0.0.0-canary.10
 - vercel-plugin-go@1.0.0-canary.22
 - vercel-plugin-node@1.12.2-canary.26
 - vercel-plugin-python@1.0.0-canary.23
 - vercel-plugin-ruby@1.0.0-canary.21"
5de045edd7a1c09c626c536fff1a6405e67e8cee,Leo Lamprecht,2021-12-03 19:15:05+00:00,GitHub,2021-12-03 19:15:05+00:00,"Use correct Lambda handler for CLI Plugins (#7128)

* Use correct Lambda handler for CLI Plugins

* Tweaked comment

* Fixed tests"
5efd3b98deb33029180ac40b0e30df1155c1ea5d,Leo Lamprecht,2021-12-03 18:10:29+00:00,Leo Lamprecht,2021-12-03 18:10:29+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.33
 - vercel@23.1.3-canary.55
 - @vercel/client@10.2.3-canary.34
 - vercel-plugin-middleware@0.0.0-canary.9
 - vercel-plugin-go@1.0.0-canary.21
 - vercel-plugin-node@1.12.2-canary.25
 - vercel-plugin-python@1.0.0-canary.22
 - vercel-plugin-ruby@1.0.0-canary.20"
82c83312c78daf160b4ea320c5afcdedb42ec966,Leo Lamprecht,2021-12-03 18:09:59+00:00,GitHub,2021-12-03 18:09:59+00:00,"Fixed Legacy Runtime output generation (#7127)

* Corrected CLI Plugin output creation

* Wait for the linking to be done before removing anything

* Make it work

* Renamed variables

* Made everything work

* Removed debugging

* Fixed comment typos"
5ccb98300786813cb17201a25854b365889fbb6d,Andy Bitz,2021-12-03 11:12:03+00:00,Andy Bitz,2021-12-03 11:12:03+00:00,"Publish Canary

 - vercel@23.1.3-canary.54
 - vercel-plugin-middleware@0.0.0-canary.8"
7a921399befc91c72ab6dc9c3936a7c50c1c5b94,Steven,2021-12-03 01:38:07+00:00,GitHub,2021-12-03 01:38:07+00:00,[middleware] Fix dependencies (#7125)
3900f2f982bb0a046369e5b637a0c7ed19194ed5,Andy,2021-12-03 01:31:17+00:00,GitHub,2021-12-03 01:31:17+00:00,"[cli] Support for `next export` with `vercel build` (#7122)

* [cli] Support `next export` in `vercel build`

* Add debug line

* Remove unused import

* Ensure file is copied

* Return in `getNextExportStatus`

* Include dotNextDir

Co-authored-by: Steven <steven@ceriously.com>"
09939f1e07d979e58cbb82b8a71f31925f747fa7,Steven,2021-12-03 00:20:18+00:00,GitHub,2021-12-03 00:20:18+00:00,"Update github codeowners (#7123)

* Add gary and javi

* Remove timothy and coetry

* Remove rdev

* Add jaredpalmer

Co-authored-by: Nathan Rajlich <n@n8.io>"
fc3a3ca81f72a44e6de5213c1c727f5fadb21e90,Leo Lamprecht,2021-12-03 00:12:01+00:00,GitHub,2021-12-03 00:12:01+00:00,"Use Functions Manifest for Middleware (#7119)

### Related Issues

This fixes https://github.com/vercel/runtimes/issues/299.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
ba7bf2e4a60bc4c9fd35ad33a11d94f1dae2ac81,Leo Lamprecht,2021-12-02 22:51:51+00:00,Leo Lamprecht,2021-12-02 22:51:51+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.32
 - vercel@23.1.3-canary.53
 - @vercel/client@10.2.3-canary.33
 - vercel-plugin-go@1.0.0-canary.20
 - vercel-plugin-node@1.12.2-canary.24
 - vercel-plugin-python@1.0.0-canary.21
 - vercel-plugin-ruby@1.0.0-canary.19"
00641037fce327f2fc5c9823b34e714b68af2fa8,Leo Lamprecht,2021-12-02 22:51:39+00:00,GitHub,2021-12-02 22:51:39+00:00,"Corrected input paths for CLI Plugins (#7121)

* Use correct paths for outputs

* Fixed tests

This reverts commit 7c4baeaafaf41609f47c97a09f5e9647fd8b89ee.

* Revert ""Fixed tests""

This reverts commit 59c10d18c63f8404c3b0c361c3769b62524316f1.

* Revert ""Use correct paths for outputs""

This reverts commit 23a0b34fad1e4932755a39975ae1dfa07acb2dd9.

* Corrected input paths for CLI Plugins

* Fixed tests

This reverts commit 7c4baeaafaf41609f47c97a09f5e9647fd8b89ee.

* Revert ""Fixed tests""

This reverts commit 9612d2a9eb19240a5a4489406ada17a6a5bb3806.

* Fixed tests

* Delete vc__handler__python.py"
6f4a1b527ba01973490e1fb2e4c48ccb2841cd86,Leo Lamprecht,2021-12-02 21:41:17+00:00,Leo Lamprecht,2021-12-02 21:41:17+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.31
 - vercel@23.1.3-canary.52
 - @vercel/client@10.2.3-canary.32
 - vercel-plugin-go@1.0.0-canary.19
 - vercel-plugin-node@1.12.2-canary.23
 - vercel-plugin-python@1.0.0-canary.20
 - vercel-plugin-ruby@1.0.0-canary.18"
1b95576dd21eb1cda30b69e58b4d495f13a5a4d9,Leo Lamprecht,2021-12-02 21:18:43+00:00,GitHub,2021-12-02 21:18:43+00:00,"Fixed Go, Ruby, and Python CLI Plugin output generation (#7117)

* Fixed error with API directory

* Made output work

* Use handler as API Route

* Correctly find the handler

* Fixed a missing instance

* Made handler logic work

* Made it work as expected

* Exclude unnecessary files

* Use a method that always works

* Additional comment

* Made everything work

* Cleaner tests

* Clean up all the useless files

* Fixed missing instance

* Speed up the code

* Removed useless lines

* Update packages/build-utils/src/convert-runtime-to-plugin.ts

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

* Clarified comment

* Use relative logic again

* Fixed tests

* Deleted useless file

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
9227471acaa7102c0e37b338c6ebcc05cbc95486,Leo Lamprecht,2021-12-02 14:24:34+00:00,Leo Lamprecht,2021-12-02 14:24:34+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.30
 - vercel@23.1.3-canary.51
 - @vercel/client@10.2.3-canary.31
 - vercel-plugin-go@1.0.0-canary.18
 - vercel-plugin-node@1.12.2-canary.22
 - vercel-plugin-python@1.0.0-canary.19
 - vercel-plugin-ruby@1.0.0-canary.17"
bf060296eb4ca10fe98c820fbd6589221a2a4bf9,Leo Lamprecht,2021-12-02 14:19:32+00:00,GitHub,2021-12-02 14:19:32+00:00,Fixed typo (#7115)
9b3aa41f2e8d40b560969305af8cf26dcd6da8c9,Leo Lamprecht,2021-12-02 14:02:00+00:00,Leo Lamprecht,2021-12-02 14:02:00+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.29
 - vercel@23.1.3-canary.50
 - @vercel/client@10.2.3-canary.30
 - vercel-plugin-go@1.0.0-canary.17
 - vercel-plugin-node@1.12.2-canary.21
 - vercel-plugin-python@1.0.0-canary.18
 - vercel-plugin-ruby@1.0.0-canary.16"
ae36585cdb6310e24441451202c4e5cd975d430e,Leo Lamprecht,2021-12-02 14:01:17+00:00,GitHub,2021-12-02 14:01:17+00:00,"Filter CLI Plugin output (#7114)

* Filter CLI Plugin output

* Only apply ignorefile check in the beginning"
e4c636ddd214fcc716672db701df967ef75fada9,Leo Lamprecht,2021-12-02 13:14:14+00:00,Leo Lamprecht,2021-12-02 13:14:14+00:00,"Publish Canary

 - vercel-plugin-go@1.0.0-canary.16
 - vercel-plugin-python@1.0.0-canary.17
 - vercel-plugin-ruby@1.0.0-canary.15"
ae3b25be4be55b3ea150e933096c96e13eb74af9,Leo Lamprecht,2021-12-02 13:10:23+00:00,GitHub,2021-12-02 13:10:23+00:00,Made CLI Plugin publishing work (#7113)
a64ed13a4041b1abc156731ee6f37a09f7ebb7c8,Andy Bitz,2021-12-02 11:55:04+00:00,Andy Bitz,2021-12-02 11:55:04+00:00,"Publish Canary

 - vercel@23.1.3-canary.49"
6c1c0e66766251fb1a03d0837799ff68b513a7ec,Andy,2021-12-02 11:54:30+00:00,GitHub,2021-12-02 11:54:30+00:00,[cli] Ignore `required-server-files.json` if it does not exist (#7111)
82fdd5d121457c4b1ab8254eb8b88c77375ffa4b,Leo Lamprecht,2021-12-02 10:46:28+00:00,Leo Lamprecht,2021-12-02 10:46:28+00:00,"Publish Canary

 - vercel@23.1.3-canary.48
 - vercel-plugin-go@1.0.0-canary.15
 - vercel-plugin-node@1.12.2-canary.20
 - vercel-plugin-python@1.0.0-canary.16
 - vercel-plugin-ruby@1.0.0-canary.14
 - @vercel/static-config@0.0.1-canary.1"
8b40f4435ea82ab482dd9b46c027113a68312d12,Nathan Rajlich,2021-12-02 10:45:57+00:00,GitHub,2021-12-02 10:45:57+00:00,"[api] Use the new File System API (#7108)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
38c87602bb32f0feacb9a63e7708380185cb1247,Leo Lamprecht,2021-12-02 00:37:09+00:00,GitHub,2021-12-02 00:37:09+00:00,"Renamed `runtime` to `use` in static JS config (#7106)

### Related Issues

This applies what was mentioned in https://github.com/vercel/runtimes/issues/288#issuecomment-984101750.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
7aef3013e7aff30153716535fcf2bb96574e15df,Nathan Rajlich,2021-12-01 23:29:26+00:00,GitHub,2021-12-01 23:29:26+00:00,"[cli] Use ""127.0.0.1"" instead of ""localhost"" in `vc dev` (#7094)

Node.js doesn't like when a hostname resolves to an IPv6 address (https://stackoverflow.com/a/15244890/376773) so use the IPv4 localhost IP address instead. Specifically this fixes vc dev on Node.js 17 which now prefers IPv6 by default.

Slack thread: https://vercel.slack.com/archives/C01A2M9R8RZ/p1638330248263400"
c18676ab4d506a8bdf6d53d773cfc10063b266df,Nathan Rajlich,2021-12-01 22:28:40+00:00,Nathan Rajlich,2021-12-01 22:28:40+00:00,"Publish Canary

 - vercel-plugin-go@1.0.0-canary.14
 - vercel-plugin-python@1.0.0-canary.15
 - vercel-plugin-ruby@1.0.0-canary.13"
df450c815d283d605aa9299da5e5f9dc5951a20b,Leo Lamprecht,2021-12-01 20:59:46+00:00,GitHub,2021-12-01 20:59:46+00:00,"Properly publish CLI Plugins (#7103)

After https://github.com/vercel/vercel/pull/7088, `dist` now contains `package.json`, which made `tsc` move `index.js` a level deeper, effectively breaking the `main` property of all of the affected CLI Plugins.

This change makes them work again. 

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
792ab38760eca4543a7ac02dd05eda280b5328a1,Andy Bitz,2021-12-01 14:32:05+00:00,Andy Bitz,2021-12-01 14:32:05+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.28
 - vercel@23.1.3-canary.47
 - @vercel/client@10.2.3-canary.29
 - vercel-plugin-go@1.0.0-canary.13
 - vercel-plugin-node@1.12.2-canary.19
 - vercel-plugin-python@1.0.0-canary.14
 - vercel-plugin-ruby@1.0.0-canary.12
 - @vercel/ruby@1.2.8-canary.6"
0bba3e76c17d3158c4cc801b6a4dc0c7ca3a8d3b,Leo Lamprecht,2021-12-01 14:31:27+00:00,GitHub,2021-12-01 14:31:27+00:00,"Corrected dependency installation systems (#7088)

* Avoid unnecessary Gemfile installations

* Do not bundle `.output` or `.vercel` into Lambdas

* Use the same input hash format for all CLI Plugins and `vercel build`

* Fixed unit tests

* Fixed the unit tests again

* Fixed the unit tests

* Fixed all the tests

* Exclude useless files

* Consider `.vercelignore` and `.nowignore`

* Fixed error

* Reverted changes

* Deleted useless file

* Fixed tests

* Share input hash format with `vercel-plugin-node`

* Make output inspectable

* Fixed build error

* Extended comment

* Bump Ruby version

* Update Gemfiles

* Update bundles

* Fixed tests

Co-authored-by: Andy Bitz <artzbitz@gmail.com>"
3d961ffbb9666b7db5af1456d8f196f1d0f67557,Andy Bitz,2021-11-30 18:25:13+00:00,Andy Bitz,2021-11-30 18:25:13+00:00,"Publish Canary

 - vercel@23.1.3-canary.46"
a3039f57bb4d94912fa701ff9e045967b7361f85,Andy,2021-11-30 17:30:51+00:00,GitHub,2021-11-30 17:30:51+00:00,"[cli] Fix `vc build` with nested app dir (#7083)

* [cli] Fix `vc build` with nested app dir

* Set NEXT_PRIVATE_OUTPUT_TRACE_ROOT"
5499fa9a042ef4f44cd4a48f2a168bf5c6d164f5,Andy Bitz,2021-11-30 15:17:47+00:00,Andy Bitz,2021-11-30 15:17:47+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.27
 - vercel@23.1.3-canary.45
 - @vercel/client@10.2.3-canary.28
 - vercel-plugin-go@1.0.0-canary.12
 - vercel-plugin-node@1.12.2-canary.18
 - vercel-plugin-python@1.0.0-canary.13
 - vercel-plugin-ruby@1.0.0-canary.11"
b9fd64faff4d1a8e51bfca2aaf980ab2aba89f0e,Leo Lamprecht,2021-11-30 15:16:53+00:00,GitHub,2021-11-30 15:16:53+00:00,"Stop passing `functions` and `regions` to Runtimes (#7085)

* Stop passing `functions` and `regions` to Runtimes

* Added required types back

* Removed `vercelConfig` from `vercel-plugin-node`

* Fixed unit test

* Fixed test"
1202ff7b2b8a821c6404a86baa12996f3078ed36,Andy Bitz,2021-11-30 13:37:53+00:00,Andy Bitz,2021-11-30 13:37:53+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.26
 - vercel@23.1.3-canary.44
 - @vercel/client@10.2.3-canary.27
 - @vercel/frameworks@0.5.1-canary.16
 - vercel-plugin-go@1.0.0-canary.11
 - vercel-plugin-node@1.12.2-canary.17
 - vercel-plugin-python@1.0.0-canary.12
 - vercel-plugin-ruby@1.0.0-canary.10
 - @vercel/python@2.1.2-canary.1
 - @vercel/ruby@1.2.8-canary.5"
abd9f019f14b62b9b5cc580d4cab9fa67c8eac81,Leo Lamprecht,2021-11-30 13:36:27+00:00,GitHub,2021-11-30 13:36:27+00:00,"Don't install Ruby or Python dependencies unnecessarily (#7084)

* Don't install Ruby or Python dependencies unnecessarily

* Less repeated code

* Cleaner code"
edb5eead8115ad5ca144a046e10cdcd6d9bdb9eb,Leo Lamprecht,2021-11-29 15:01:23+00:00,GitHub,2021-11-29 15:01:23+00:00,"Speed up Remix Template (#7077)

* Replaced Remix Template

* Added npm lockfile for Remix Template

* Added npm lockfile for Next.js Template

* Added Remix logo"
6b865ff753ad0e51b284dac173e7e32953de3298,Andy Bitz,2021-11-29 13:26:12+00:00,Andy Bitz,2021-11-29 13:26:12+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.25
 - vercel@23.1.3-canary.43
 - @vercel/client@10.2.3-canary.26
 - @vercel/frameworks@0.5.1-canary.15
 - vercel-plugin-go@1.0.0-canary.10
 - vercel-plugin-node@1.12.2-canary.16
 - vercel-plugin-python@1.0.0-canary.11
 - vercel-plugin-ruby@1.0.0-canary.9"
4fd0734c48c28c7749a4da5c802d89cd5cdb184e,Andy,2021-11-29 13:23:10+00:00,GitHub,2021-11-29 13:23:10+00:00,"[cli] Consider `envPrefix` and `outputDirectory` for `vercel build` (#7069)

* [cli] Consider `envPrefix` for the framework

* Fix env

* Remove type

* Resolve .nft.json files correctly

* Fix public and static directory handling

* Do not use .replace

* Consider the output directory"
f815421acb5ed72aa43c01c30c1af6cfd21eca4d,Leo Lamprecht,2021-11-29 11:14:09+00:00,GitHub,2021-11-29 11:14:09+00:00,Renamed the Remix logo file (#7074)
5da926fee1ecaadcf20c8575ec7471739c4d29d5,Logan McAnsh,2021-11-29 10:37:46+00:00,GitHub,2021-11-29 10:37:46+00:00,chore: update remix logo (#7070)
3559531e4c14875a275059e3f43aeba38deda275,Andy Bitz,2021-11-25 11:01:09+00:00,Andy Bitz,2021-11-25 11:01:09+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.24
 - vercel@23.1.3-canary.42
 - @vercel/client@10.2.3-canary.25
 - @vercel/frameworks@0.5.1-canary.14
 - vercel-plugin-go@1.0.0-canary.9
 - vercel-plugin-node@1.12.2-canary.15
 - vercel-plugin-python@1.0.0-canary.10
 - vercel-plugin-ruby@1.0.0-canary.8"
449a3b364861efe54fd14c3f1f70f43a7f67396a,Leo Lamprecht,2021-11-25 10:57:57+00:00,GitHub,2021-11-25 10:57:57+00:00,"Updated Remix template and ensured correct headers (#7064)

* Updated Remix Example

* Adjusted config as necessary

* Updated gitignore

* Fixed default Remix headers

* Removed useless files

* Fixed README

* Added newline"
7bd338618c80681a09cd8d4c482f1038f8676f7f,Steven,2021-11-25 03:03:54+00:00,Steven,2021-11-25 03:03:54+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.23
 - vercel@23.1.3-canary.41
 - @vercel/client@10.2.3-canary.24
 - vercel-plugin-go@1.0.0-canary.8
 - vercel-plugin-node@1.12.2-canary.14
 - vercel-plugin-python@1.0.0-canary.9
 - vercel-plugin-ruby@1.0.0-canary.7"
9048a6f5848dcbfd35dc1b8926766fc409646348,Steven,2021-11-25 03:00:49+00:00,GitHub,2021-11-25 03:00:49+00:00,[build-utils] Fix zero config routes for `vercel build` (#7063)
0cacb1bdace342133fad4bd7a98354e5b2948df0,Steven,2021-11-24 23:12:26+00:00,Steven,2021-11-24 23:12:26+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.22
 - vercel@23.1.3-canary.40
 - @vercel/client@10.2.3-canary.23
 - vercel-plugin-go@1.0.0-canary.7
 - vercel-plugin-node@1.12.2-canary.13
 - vercel-plugin-python@1.0.0-canary.8
 - vercel-plugin-ruby@1.0.0-canary.6"
318bf35f82900283540cacc8fa5f134de49491ef,Steven,2021-11-24 23:00:12+00:00,GitHub,2021-11-24 23:00:12+00:00,"[build-utils] Add support for writing routes-manifest.json (#7062)

* [build-utils] Add support for writing routes-manifest.json

* Add support for dynamicRoutes

* Add another test with multiple named params"
cc7b2691c1d43ecb19f1dd6e88f29137d85da61a,Andy Bitz,2021-11-24 16:41:53+00:00,Andy Bitz,2021-11-24 16:41:53+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.21
 - vercel@23.1.3-canary.39
 - @vercel/client@10.2.3-canary.22
 - @vercel/frameworks@0.5.1-canary.13
 - vercel-plugin-go@1.0.0-canary.6
 - vercel-plugin-node@1.12.2-canary.12
 - vercel-plugin-python@1.0.0-canary.7
 - vercel-plugin-ruby@1.0.0-canary.5
 - @vercel/python@2.1.2-canary.0"
3a75c37adccb1417c258701d77a4f0ad6d89e8c0,Leo Lamprecht,2021-11-24 16:40:55+00:00,GitHub,2021-11-24 16:40:55+00:00,"Added Remix to the list of frameworks (#7061)

* Added Remix to the list of frameworks

* Replaced Development Command

* Polished config

* Added headers

* Added example

* Fixed logo

* Trigger a Deployment

* Added vercel.json

* Port is automatically parsed through remix.config.js

* Fixed sorting

* Moved it down a bit

* Trigger a Deployment

* Removed useless property

* Reverted readme

* Fully reverted readme"
acd0e84e737098025f6d6b88d0c6c85a3f73ea4b,Steven,2021-11-24 00:12:57+00:00,GitHub,2021-11-24 00:12:57+00:00,"[cli] Pass vercel.json to plugins during `vercel build` (#7059)

* [cli] Pass vercel.json to plugins during `vercel build`

* Add missing `vercelConfig` param

* Add type

* Fix test

* Update test"
49087d5aacf4f62c4514ee61eae7d4421bbd2cba,Jared Palmer,2021-11-23 18:06:36+00:00,GitHub,2021-11-23 18:06:36+00:00,"Change nextjs detection (#7020)

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
7d7f3df9805fc92a8f2ef33fafc2b113775b491c,Steven,2021-11-23 14:04:08+00:00,Steven,2021-11-23 14:04:08+00:00,"Publish Stable

 - @vercel/python@2.1.1"
5cf0c316e9f251e106ee39bf1771f0ca992f1411,Steven,2021-11-23 13:57:58+00:00,Steven,2021-11-23 13:57:58+00:00,"Publish Stable

 - @vercel/python@2.1.0"
f4501433c85f3f16466ef7f450c6b9213d2e1ef7,Steven,2021-11-22 23:43:37+00:00,Steven,2021-11-22 23:43:37+00:00,"Publish Canary

 - vercel@23.1.3-canary.38
 - vercel-plugin-python@1.0.0-canary.6
 - @vercel/python@2.0.6-canary.7"
19831593ce5874e04a29b78a1e14b3d1a671a19b,Steven,2021-11-22 23:36:30+00:00,GitHub,2021-11-22 23:36:30+00:00,"[python] Add warning for deprecated version (#7053)

- Print warning when python 3.6 is selected
- Print warning when invalid python version is selected"
5d85bb1426259f6fe1e6444d5b90a8b44b9fd40b,Steven,2021-11-22 22:24:35+00:00,GitHub,2021-11-22 22:24:35+00:00,[tests] Bump cancel action to 0.9.1 (#7055)
f194d54b0c7a0f4ef7166a8f4668752b0204160e,Andy Bitz,2021-11-22 22:14:32+00:00,Andy Bitz,2021-11-22 22:14:32+00:00,"Publish Canary

 - vercel@23.1.3-canary.37"
65420868431ed68e22eb45f2123f80298ef46e1e,Andy,2021-11-22 22:12:46+00:00,GitHub,2021-11-22 22:12:46+00:00,"Revert ""[cli] Switch from hardlinks to symlinks in vc build"" (#7054)

* Revert ""[cli] Switch from hardlinks to symlinks in vc build (#7026)""

This reverts commit 6dff0875f5f361decdb95ad70a400195006c6bba.

* Keep copy logic"
2721b3449dd3ccd213f9bdd558e61eeba3ba710c,Andy Bitz,2021-11-22 12:22:56+00:00,Andy Bitz,2021-11-22 12:22:56+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.20
 - vercel@23.1.3-canary.36
 - @vercel/client@10.2.3-canary.21
 - @vercel/node@1.12.2-canary.7
 - vercel-plugin-go@1.0.0-canary.5
 - vercel-plugin-node@1.12.2-canary.11
 - vercel-plugin-python@1.0.0-canary.5
 - vercel-plugin-ruby@1.0.0-canary.4"
adb284519ad2b424651d420cd2f46b511173044f,Andy,2021-11-22 12:21:20+00:00,GitHub,2021-11-22 12:21:20+00:00,"[plugin-node][node] Fix dependency installation, handler path, and build script (#7043)

* [plugin-node][node] Fix dependency installation, handler path, and build script

* Use smaller library for testing

* Make test work on windows

* Remove .output before fixture runs and update routes update

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
b2d91f312100077ce32d1dcd72c2ab887c81ffc5,Steven,2021-11-21 01:31:39+00:00,GitHub,2021-11-21 01:31:39+00:00,[cli] Fix metrics crash on some platforms (#7034)
32664cd13b5d7a771d465a091bff2e966eed2f94,Steven,2021-11-20 15:20:05+00:00,Steven,2021-11-20 15:20:05+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.19
 - vercel@23.1.3-canary.35
 - @vercel/client@10.2.3-canary.20
 - @vercel/frameworks@0.5.1-canary.12
 - vercel-plugin-go@1.0.0-canary.4
 - vercel-plugin-node@1.12.2-canary.10
 - vercel-plugin-python@1.0.0-canary.4
 - vercel-plugin-ruby@1.0.0-canary.3"
db468c489a9310692dd09bd1268169ee85462a75,Sam Ko,2021-11-20 01:44:22+00:00,GitHub,2021-11-20 01:44:22+00:00,"[frameworks] Fix Parcel default output directory to dist (#7029)

### Related Issues

The Parcel template via the Project Creating Flow returns a build error because the default output directory for the Parcel **Framework Preset** is searching for `public` instead of `dist`. The default behavior of Parcel's CLI I believe is `dist`.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
edd9bb506c91640dd563e00ae6b95e7132dc43d5,Steven,2021-11-20 00:07:52+00:00,GitHub,2021-11-20 00:07:52+00:00,"[frameworks][cli] Consolidate buildCommand and devCommand (#7032)

* [frameworks] Consolidate buildCommand and devCommand

* Fix default build command when no override or package.json found"
a72549a290b2fbe1e6246c7a2327f0fdc126adf4,Steven,2021-11-19 22:26:32+00:00,GitHub,2021-11-19 22:26:32+00:00,[tests] Make test more reliable for function timeout (#7033)
4aa6a139127e4e57469d4b6785546ccb49ca188b,Steven,2021-11-19 19:42:02+00:00,Steven,2021-11-19 19:42:02+00:00,"Publish Canary

 - vercel@23.1.3-canary.34
 - vercel-plugin-python@1.0.0-canary.3
 - @vercel/python@2.0.6-canary.6"
81ea0082f189dfe0414c0aefefacd4027b60289a,Steven,2021-11-19 18:42:17+00:00,GitHub,2021-11-19 18:42:17+00:00,"[python] Upgrade python 3.9 (#7008)

* [python] Upgrade python 3.9

* Fix python path

* Improve testing

* Add support for version selection via Pipfile

* Parse the ""Pipfile.lock"" instead

* Fix support for Node.js 12"
6dff0875f5f361decdb95ad70a400195006c6bba,Jared Palmer,2021-11-19 17:36:31+00:00,GitHub,2021-11-19 17:36:31+00:00,"[cli] Switch from hardlinks to symlinks in vc build (#7026)

* Switch from hardlinks to symlinks in vc build

* Remove error handling that fs-extra already takes care of

* Add comment

* Put back symlink error handling"
30aa392c0a516936f730a3de9262bd4abd5c92ac,Steven,2021-11-19 14:59:12+00:00,GitHub,2021-11-19 14:59:12+00:00,"[tests] Increase CI duration (#7030)

Seems like macOS sometimes exceeds 60 min so this bumps the timeout.

The build can be between 3 minutes and 5 minutes. The tests can be between 45 minutes and 55 minutes."
c4fc060030490a90906ab764972f4406541ea0d6,Miroslav Simulcik,2021-11-17 13:04:59+00:00,GitHub,2021-11-17 13:04:59+00:00,"[cli] Fix spinner output outside of TTY (#7017)

* Fix spinner output outside of TTY

* Use console.log

* Fix tests

* Revert ""Fix tests""

This reverts commit 44383eea2dc3bb699d943079d77961ed86fe65d6.

* Revert ""Use console.log""

This reverts commit 251bd1d624532e9ecfb4aee5b31538aa4ba740ef."
3fa08bf64fe31a3fb3ecaf86167d2c190799cf38,Steven,2021-11-16 21:07:31+00:00,GitHub,2021-11-16 21:07:31+00:00,[cli] Fix update command to favor npm (#7018)
43056bde1f65ad48c3c1aeeab56eb5f66e2e66f8,Steven,2021-11-15 23:07:17+00:00,Steven,2021-11-15 23:07:17+00:00,"Publish Canary

 - vercel@23.1.3-canary.33"
a49966b9b4eebf3500a899c8a9cd111762873cf7,Steven,2021-11-15 23:06:48+00:00,GitHub,2021-11-15 23:06:48+00:00,[cli] Change `vc build` to use stdout (#7005)
7f55de71bb22bac6ad1a90c8d1356074ecb9731d,Steven,2021-11-15 18:37:04+00:00,Steven,2021-11-15 18:37:04+00:00,"Publish Canary

 - vercel@23.1.3-canary.32
 - @vercel/go@1.2.4-canary.4
 - vercel-plugin-go@1.0.0-canary.3"
db8e36e04ced93f9d64a48c12b14cfb1538270e6,Steven,2021-11-15 18:36:26+00:00,GitHub,2021-11-15 18:36:26+00:00,"[go] Add support for version 1.17 (#7002)

* Support more Go versions

Co-authored-by: Stefan M <StefMa@users.noreply.github.com>"
82924bb5c4e51bbb387dd0f6207d2bff6af90eca,Andy Bitz,2021-11-15 13:11:55+00:00,Andy Bitz,2021-11-15 13:11:55+00:00,"Publish Canary

 - vercel@23.1.3-canary.31
 - vercel-plugin-node@1.12.2-canary.9"
18b5fac93e110f8ebf9d842df2272cdcce1d371f,Andy,2021-11-15 13:08:49+00:00,GitHub,2021-11-15 13:08:49+00:00,"[vercel-plugin-node] Use `.nft.json` files instead of directories. (#6988)

* Ignore install step if package.json does not exist in entrypoint directory

* [plugin-node] Use `.nft.json` files

* Bump @vercel/fun

* Update package.json

* Remove package

* Remove import

* Update paths

* Revert ""Update paths""

This reverts commit fa304e90381f475c64b2333402dca489813522da.

* Update path for windows

* Update handler path"
a6012e600bf5e35299702f775b3f7348a1a22bc8,Miroslav Simulcik,2021-11-12 16:11:21+00:00,GitHub,2021-11-12 16:11:21+00:00,"[cli] Fix updating of gitignore in `vercel link` (#6986)

* Fix updating of gitignore in link

* Fix modification of gitignore file during linking

* Fix empty file case"
c3abf73f581c23c1c39f91249a21fd9f261f7519,Steven,2021-11-11 19:54:33+00:00,Steven,2021-11-11 19:54:33+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.18
 - vercel@23.1.3-canary.30
 - @vercel/client@10.2.3-canary.19
 - vercel-plugin-go@1.0.0-canary.2
 - vercel-plugin-node@1.12.2-canary.8
 - vercel-plugin-python@1.0.0-canary.2
 - vercel-plugin-ruby@1.0.0-canary.2"
4873b8b3793648a2c038bc159da84dfd5f341a3f,Steven,2021-11-11 19:53:43+00:00,GitHub,2021-11-11 19:53:43+00:00,[build-utils][node] Add `updateFunctionsManifest` function (#6971)
6248139281a7a631cc521b68261f38bc54af2e4e,Miroslav Simulcik,2021-11-11 15:51:30+00:00,GitHub,2021-11-11 15:51:30+00:00,"[cli] Prevent recursion of `vercel build` and `vercel dev` (#6960)

* Prevent infinite recursion of vercel build and dev

* Improved text

* Improved the text further

* Add tests

* Debug test

* Add debug log

* Debug test

* debug test

* Debug test

* Fix test

* Debug tests

* Debug test

* Remove only from tests

* Add error documentation

* Improved docs

* Fix other test

* Fixed links to error docs

* Remove legacy error page

* Use nicer error links

Co-authored-by: Leo Lamprecht <leo@vercel.com>"
507a5de3cd4e128c3cf0df7599c262a8f414fcc2,Miroslav Simulcik,2021-11-09 19:34:41+00:00,GitHub,2021-11-09 19:34:41+00:00,"[tests] Fix getting of config paths (#6969)

Co-authored-by: Steven <steven@ceriously.com>"
be1c78e72f1bbb23fbbcecf569049211cdf8bd52,Gary Borton,2021-11-09 19:07:01+00:00,Gary Borton,2021-11-09 19:07:01+00:00,"Publish Canary

 - vercel@23.1.3-canary.29
 - vercel-plugin-middleware@0.0.0-canary.7"
c277c649c62ddfed737e7fc48a387121cbb98fc2,Gary Borton,2021-11-09 19:06:16+00:00,GitHub,2021-11-09 19:06:16+00:00,"Fix middleware build result. Return middleware next when invalid result. (#6963)

* Fix middleware build result. Return middleware next when invalid result.

* Add a unit test that would have failed before previous commit.

* Copy next.js behavior.

* Add a test for invalid responses from middleware.

Co-authored-by: Leo Lamprecht <leo@vercel.com>"
ed1dacd27698f3bb181f32b516af6953655b37e9,Steven,2021-11-09 17:50:34+00:00,Steven,2021-11-09 17:50:34+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.17
 - vercel@23.1.3-canary.28
 - @vercel/client@10.2.3-canary.18
 - vercel-plugin-go@1.0.0-canary.1
 - vercel-plugin-python@1.0.0-canary.1
 - vercel-plugin-ruby@1.0.0-canary.1
 - @vercel/python@2.0.6-canary.5
 - @vercel/ruby@1.2.8-canary.4"
144e890bfa649d69d0df1ce7fccb26aacd8ab531,Steven,2021-11-09 17:48:40+00:00,GitHub,2021-11-09 17:48:40+00:00,"Add plugin packages for go/python/ruby (#6961)

* Add plugin packages

* Fix usage

* Fix build

* Fix workspace linking to build-utils"
af097c2c0631f0e5e981db0e3c8141a566bc18ac,Andy Bitz,2021-11-09 15:44:14+00:00,Andy Bitz,2021-11-09 15:44:14+00:00,"Publish Canary

 - vercel@23.1.3-canary.27"
873a5829862cc99bc2408d031d5e407758d52955,Andy,2021-11-09 15:43:26+00:00,GitHub,2021-11-09 15:43:26+00:00,"[cli] Ignore .next/cache in `vc build` (#6968)

* [cli] Ignore .next/cache in `vc build`

* Handle middleware-manifest.json

* Update manifest update"
986b4c0b1a2790b9d9623abed22e5aa133a31986,Andy Bitz,2021-11-09 00:31:30+00:00,Andy Bitz,2021-11-09 00:31:30+00:00,"Publish Canary

 - vercel@23.1.3-canary.26"
14071819ac903e040a182d694965130768bd8fc4,Andy,2021-11-09 00:30:49+00:00,GitHub,2021-11-09 00:30:49+00:00,"[cli] Fix NFT output path for monorepos (#6965)

* [cli] Fix `output` path for `.output` for `node_modules`

* Use baseDir instead of cwd

* Update comment

* Update output for requiredServerFiles"
2a8588a0c5606d38f7488818e2598d4249b71abc,jj@jjsweb.site,2021-11-08 20:42:18+00:00,jj@jjsweb.site,2021-11-08 20:42:18+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.16
 - vercel@23.1.3-canary.25
 - @vercel/client@10.2.3-canary.17
 - @vercel/frameworks@0.5.1-canary.11
 - @vercel/routing-utils@1.11.4-canary.6"
0f7e89f76cc4f516239ef648bfc8b7a2030b0b43,JJ Kasper,2021-11-08 20:29:31+00:00,GitHub,2021-11-08 20:29:31+00:00,"[routing-utils] Add caseSensitive field to routes schema (#6952)

### Related Issues

x-ref: https://github.com/vercel/customer-issues/issues/34

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e68ed33a882574f0432485a3afb43f2a44ec9de2,Andy Bitz,2021-11-08 18:38:58+00:00,Andy Bitz,2021-11-08 18:38:58+00:00,"Publish Canary

 - vercel@23.1.3-canary.24
 - vercel-plugin-middleware@0.0.0-canary.6"
d3e98cdb73274cc0f92d4c7c86e026721bfffce5,Gary Borton,2021-11-08 18:38:13+00:00,GitHub,2021-11-08 18:38:13+00:00,"[cli] Run middleware as a plugin instead of running directly (#6941)

* Move loadPlugins to a utils file to be shared w/ dev server.

* Update loadCliPlugins to also return startDevServer and runDevMiddleware based plugins.

* Move plugins back to dependencies.

These can't be bundled as it interferes with plugin resolution.

* Hook up middleware plugins to dev server.

* Pass output object to loadCliPlugins instead of a logging function.

* Allow more than one runDevMiddleware defining plugins.

* Bundle esbuild w/ middleware plugin.

* Keep esbuild as an external

* Update middleware's esbuild.

* set old space size

* Revert ""set old space size""

This reverts commit b579194a862949a11769e9087f01c31f2e1f3b60.

* Use --max-old-space-size for CLI unit tests

* Increase memory

* Use `run.js` to set the memory

* Make NODE_OPTIONS optional

Co-authored-by: Leo Lamprecht <leo@vercel.com>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>"
bf4e77110f7a79ead453a4e46dc551b74f9df979,Andy Bitz,2021-11-08 14:00:01+00:00,Andy Bitz,2021-11-08 14:00:01+00:00,"Publish Canary

 - vercel@23.1.3-canary.23
 - @vercel/node@1.12.2-canary.6
 - vercel-plugin-node@1.12.2-canary.7"
5b5197d2c5f9b9a5bb43f6faf2c4e7ab1e68e068,Nathan Rajlich,2021-11-08 13:59:01+00:00,GitHub,2021-11-08 13:59:01+00:00,"[node] Create `vercel-plugin-node` (#6874)

* [node] Refactor to Vercel CLI Plugin

* Enforce ""index"" suffix on output Serverless Functions

So that nesting works properly

* Some cleanup

* Add version

* Use `@vercel/static-config`

* .

* Add support for wildcard routes

* Don't compile dotfiles, underscore prefixed files, files within `node_modules`, nor TypeScript definition files

Matches the logic from `maybeGetBuilder()` in `@vercel/build-utils`.

* Bump version

* Introduce testing framework

* Debug

* Add test without any deps

* Longer timeout to install Node.js for vercel/fun

* Install deps

* Add legacy Node.js server interface test

* More tests

* Test ""assets"" fixture

* Test ""helpers"" fixture

* fix

* Support AWS native API

* Remove debugging `console.log()` calls

* Use plugin-node for new plugin instead

* Revert ""Use plugin-node for new plugin instead""

This reverts commit f317b8c6ecdc67a74d5f2b12a2e7567a27d4b6b8.

* Move to `plugin-node` directory

* Update plugin-node version in package.json

* Checkout node from main

* Add yarn.lock files for tests

* Update node-bridge

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>"
a6ccf6c180c88f0d606a2fd932bbf558ab78ddeb,Steven,2021-11-05 22:40:08+00:00,Steven,2021-11-05 22:40:08+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.15
 - vercel@23.1.3-canary.22
 - @vercel/client@10.2.3-canary.16
 - @vercel/node-bridge@2.1.1-canary.2
 - @vercel/node@1.12.2-canary.5"
8d848ebe8be9a29f8f7752e8c12471f2f8ff7c85,Steven,2021-11-05 22:38:55+00:00,GitHub,2021-11-05 22:38:55+00:00,[node] Fix launcher ESM on Windows dev (#6953)
6ef2c16d631c28e6282df473faefa44165031ef5,Steven,2021-11-05 20:12:21+00:00,GitHub,2021-11-05 20:12:21+00:00,[build-utils] Add `convertRuntimeToPlugin()` (#6942)
6c71ceaaebd80d32a788c65a38b5eb6ee985f78f,Andy Bitz,2021-11-05 09:26:15+00:00,Andy Bitz,2021-11-05 09:26:15+00:00,"Publish Canary

 - vercel@23.1.3-canary.21"
1dcb6dfc6f18aea5e4642514ccf89f3197899c05,Andy,2021-11-05 09:24:49+00:00,GitHub,2021-11-05 09:24:49+00:00,[cli] Rename certain outputs in `vercel build` (#6948)
4fd24575e5fb2e1055b7c684143367e5dfedb40b,Steven,2021-11-03 13:06:27+00:00,Steven,2021-11-03 13:06:27+00:00,"Publish Canary

 - vercel@23.1.3-canary.20
 - vercel-plugin-middleware@0.0.0-canary.5"
8714f1905ed02740327c6c3938ceecabee27e08e,Gary Borton,2021-11-02 23:57:46+00:00,GitHub,2021-11-02 23:57:46+00:00,"[cli] Render an error page when middleware explodes. (#6934)

### Related Issues

This adds error handling for middleware in `vc dev`

Local looks a little different than production:
Local
![image](https://user-images.githubusercontent.com/4172067/139951848-efa08a88-aeee-446f-8319-35c8bb0b1d75.png)

Production
![image](https://user-images.githubusercontent.com/4172067/139951580-33a4ad0f-18a5-4aa1-bfb0-5e1da646a4b8.png)


###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
2e69f2513dd99fa55a1cc510d196e3e2ba51bad2,Jared Palmer,2021-11-02 23:07:28+00:00,GitHub,2021-11-02 23:07:28+00:00,"[cli] Make sure `vc pull` properly sets `currentTeam` (#6936)

### Related Issues

> Fixes https://github.com/vercel/runtimes/issues/219

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
979e4b674ac7be7c16838cef1636bb70c76d1aca,Gary Borton,2021-11-02 21:08:02+00:00,GitHub,2021-11-02 21:08:02+00:00,"[cli] Bundle middleware deps (#6932)

* Use ncc to bundle middleware plugin, move dependencies to devDependencies, remove querystring

* Switch from globby (deprecated dependencies) to glob in middleware plugin.

* Bundle the node-plugin and middleware-plugin into cli."
07fa47bcfbf10df483d5aaa087e07df9e4f302ce,Nathan Rajlich,2021-10-30 01:17:08+00:00,Nathan Rajlich,2021-10-30 01:17:08+00:00,"Publish Canary

 - vercel@23.1.3-canary.19
 - vercel-plugin-middleware@0.0.0-canary.4"
307c4fc377fad7ede28dffe8ed86a8ad541b1d43,Nathan Rajlich,2021-10-30 01:16:16+00:00,Nathan Rajlich,2021-10-30 01:16:16+00:00,[cli] Bump `vercel-plugin-node` to latest
44868d79b61c5b5eebb5d23dd888e3b635023ed3,Nathan Rajlich,2021-10-30 00:15:20+00:00,GitHub,2021-10-30 00:15:20+00:00,"Add initial `vercel-plugin-middleware` (#6892)

* Add initial `vercel-plugin-middleware`

* Ignore `entries.js` from ESLint

* Add `runDevMiddleware()` stub

* Add test

* Add support for ""_middleware.{js,ts}"" to `vercel dev` (#6880)

* Add websandbox from next.js codebase.

* Use node-fetch instead of next's polyfilled fetch.

* Handle middleware rewrites.

* Add response, headers, and request to websandbox context.

* Move websandbox dependency to middleware plugin.

* Add integration tests, update websandbox to support ts files and json imports.

* commit yarn.lock changes after rebasing

* Clean up left over console.logs, fix some tsc issues, and rebase issue.

* Fix failing test and eslint.

* Fix middleware test on windows.

* [examples] Update Vercel Next.js example template to 12.0.1 (#6905)

* Mark the Plugins as external to CLI's ncc build

* [cli] Improve tracing in vc build (#6898)

* [cli] Fix tracing for `vc build`

* Ignore object when there are no changes

* Make Next < 12 work with FS API w/ nft

* Update packages/cli/src/commands/build.ts

Co-authored-by: Nathan Rajlich <n@n8.io>

* Document how Next.js processing works in build

* [cli] Fix static assets (#6906)

* Make sure output path is .next

* Fix up require-server-files for processing

* Fix typo

* Move static

* Update static rename

Co-authored-by: Andy Bitz <artzbitz@gmail.com>
Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

* Publish Canary

 - vercel@23.1.3-canary.17
 - @vercel/client@10.2.3-canary.15
 - @vercel/static-config@0.0.1-canary.0

* [cli] Ignore `.env` and `.gitignore` in ""vc build"" (#6910)

* Publish Canary

 - vercel@23.1.3-canary.18

* Pass workPath to plugins.

The new plugin architecture doesn't pass a full BuildOptions object, previous
to this commit it wasn't passing any options at all. I've added workingPath to
support running dev/build from directories other than the project root.

* Remove error state when package.json exists, but no build script

This allows vercel build to continue working for projects that are not using
frameworks, but use package.json to manage dependencies.

* Fix types, pull in middleware header fix from next.js

Next js PR w/ the header fix:
https://github.com/vercel/next.js/pull/30560

* Fix missing entries file for vc build.

* Update call signature of middleware when using vc build.

Co-authored-by: Drew Bredvick <dbredvick@gmail.com>
Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Jared Palmer <jared@jaredpalmer.com>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

Co-authored-by: Gary Borton <gdborton@gmail.com>
Co-authored-by: Drew Bredvick <dbredvick@gmail.com>
Co-authored-by: Jared Palmer <jared@jaredpalmer.com>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
df9a4afa5cd3b82b12ee7baf9bd1585dd81de439,Nathan Rajlich,2021-10-29 19:22:35+00:00,Nathan Rajlich,2021-10-29 19:22:35+00:00,"Publish Canary

 - vercel@23.1.3-canary.18"
8a6869bae22b1af852f221fe59430d9bebd30f05,Nathan Rajlich,2021-10-29 19:21:46+00:00,GitHub,2021-10-29 19:21:46+00:00,"[cli] Ignore `.env` and `.gitignore` in ""vc build"" (#6910)"
a3fc3c1ca7925fea7727d2ed705ca2181127bd55,Andy Bitz,2021-10-29 18:49:54+00:00,Andy Bitz,2021-10-29 18:49:54+00:00,"Publish Canary

 - vercel@23.1.3-canary.17
 - @vercel/client@10.2.3-canary.15
 - @vercel/static-config@0.0.1-canary.0"
44037c58be7d84c4e42a14357a7e82072b596659,Jared Palmer,2021-10-29 18:49:21+00:00,GitHub,2021-10-29 18:49:21+00:00,"[cli] Improve tracing in vc build (#6898)

* [cli] Fix tracing for `vc build`

* Ignore object when there are no changes

* Make Next < 12 work with FS API w/ nft

* Update packages/cli/src/commands/build.ts

Co-authored-by: Nathan Rajlich <n@n8.io>

* Document how Next.js processing works in build

* [cli] Fix static assets (#6906)

* Make sure output path is .next

* Fix up require-server-files for processing

* Fix typo

* Move static

* Update static rename

Co-authored-by: Andy Bitz <artzbitz@gmail.com>
Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
1a9419b690aa0e677b0e8160bbeb66b7bcc64c3f,Drew Bredvick,2021-10-29 17:03:31+00:00,GitHub,2021-10-29 17:03:31+00:00,[examples] Update Vercel Next.js example template to 12.0.1 (#6905)
93d0e5966c27ef37ef3a510b95e2e11c7001926a,Nathan Rajlich,2021-10-28 19:37:39+00:00,GitHub,2021-10-28 19:37:39+00:00,[cli] Fix integration tests that check `.gitignore` (#6904)
306f3a1312c02b4df9dcdf4389df5c1ce7d8f5bf,Nathan Rajlich,2021-10-28 00:04:10+00:00,Nathan Rajlich,2021-10-28 00:36:32+00:00,"Add to ""static-config"" to `run.js` script"
9c67e8115eeb9220f46c108f383549109e8d4d01,Nathan Rajlich,2021-10-28 00:03:12+00:00,GitHub,2021-10-28 00:03:12+00:00,Add `@vercel/static-config` (#6897)
b890ac1e447db6a3dc9a5a4c32c846084a4d2e35,Andy,2021-10-27 22:20:44+00:00,GitHub,2021-10-27 22:20:44+00:00,"[cli] Fix tracing for `vc build` (#6896)

* [cli] Fix tracing for `vc build`

* Ignore object when there are no changes"
28e71ff1095c69db03a7c97173bb1d5d2100d015,Andy,2021-10-27 18:22:35+00:00,GitHub,2021-10-27 18:22:35+00:00,"[cli][client] Add step for checks (#6889)

* [cli][client] Add step for checks

* Update output

* Remove skipped message

* Correctly use `finishedEvents`

* Update packages/cli/src/commands/deploy/index.ts

Co-authored-by: Chris <7249920+chriswdmr@users.noreply.github.com>

* Add back deleted files

Co-authored-by: Chris <7249920+chriswdmr@users.noreply.github.com>"
2bf060c70880ac71e50606719a77f2b456e354bc,Andy Bitz,2021-10-26 12:10:32+00:00,Andy Bitz,2021-10-26 12:10:32+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.14
 - vercel@23.1.3-canary.16
 - @vercel/client@10.2.3-canary.14
 - @vercel/frameworks@0.5.1-canary.10"
c8ef1d71d11d83f8cb015fc8e06508c12405e940,Jared Palmer,2021-10-26 12:04:52+00:00,GitHub,2021-10-26 12:04:52+00:00,"[cli] Add `vercel build` (#6861)

* Add PoC pull command

* Improve pull's linking logic

* Remove `__VERCEL_SKIP_PULL_CMD` env var and unneeded type narrowing

* Improve pull's link logic

* Fix team mock

* Add smoke test for vc pull

* Add setupFixture helper

* Remove debug duplicate

* Use a fixture in pull test

* Put back debug

* Fix unit test

* Fix test on windows

* Remove mock-stdin

* Pass cwd to link and pull

* Add help command for `vc pull`

* Organize imports

* Update packages/cli/src/commands/deploy/args.ts

Co-authored-by: Steven <steven@ceriously.com>

* Use tmp-promise instead of tmp

* Update packages/cli/src/commands/pull.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/pull.ts

Co-authored-by: Steven <steven@ceriously.com>

* Clean up pull comments and variable declarations

* Remove graceful tmp directory cleanup

* Put back graceful cleanup

* Print output for debugging

* Moar debug

* Set 10s timeout for `vc pull` test

* Change fixture to now-pull-next

* Fix pull test name

* Switch project mock to use encrypted env

* Add --env flag

* Update fixtures

* Remove now- from everywhere

* Remove instrumentation

* Rename setupFixture to setup-fixture

* Add deprecation warning to `vc env pull`

* Update packages/cli/src/commands/deploy/args.ts

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

* Update packages/cli/src/commands/env/pull.ts

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

* Fix pull and update imports

* Revamped build command

* printConfig -> renderConfig

* Remove frameworks

* Add build state unit test for gatsby

* Update packages/cli/src/commands/pull.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/commands/env/index.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/cli/src/util/projects/write-project-settings.ts

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

* Update packages/cli/src/commands/pull.ts

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

* Don't writeProjectSettings in env pull

* Cleanup fixtures once afterAll

* Add help text for --env and -y

* Add output for pull

* Write project settings output after env output

* Pushing for Nate

* Add todo about handling Other's build output directory

* Add support for plugins

* Improve prompt logic loop

* Pluralize plugin output

* Better plugin failure handling

* Refactor away from BuildState class

* Remove unused file

* Correct framework detection logic, smart copy w/hardlinks

* Generate build manifest

* Generate routes-manifest.json

* Remove ambiguity when calling vc build

* Make sure manifests have all keys

* Ensure that .output is added to .gitignore in vc link

* Remove directoryListing from project settings

* Add support for default cli plugins

* Remove directory listing

* Install vercel-plugin-node

* Patch console.log and console.error for plugins

* Improve build output

* Remove unused unit tests

* Allow build without token

* Add vercel plugin middleware

* Bump vercel-plugin-middleware

* Bump middleware plugin

* Tweak require.resolve

* Tweak require.resolve to __dirname

* Update `vercel-plugin-node`

* Fix prefixed logs when using formatters i.e. `%j`

* Pretty print the manifest files

* Get unique CLI deps

For the case where the local project has one of the CLI default plugins
specified.

* Update packages/cli/package.json

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

* Add help output

* Remove p-limit properly

* Confirm before pull in build

* Bump `vercel-plugin-node`

* [cli] Make Next.js move files into .output (#6885)

* Use OUTPUT_DIR

* Return properly if no package.json exists and no build command

* Invert logic for runPackageJsonScript

* Bump `vercel-plugin-middleware`

* Fix defaultHeaders in frameworks

* Fix build when nft files is object

* Update `yarn.lock`

* 2nd attempt at --prebuilt (#6888)

Co-authored-by: Andy Bitz <artzbitz@gmail.com>

* Add beta and feedback to vc build

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>"
3d2efc7dcdd9fc182e748d87d7ae46517e61c9cc,Nathan Rajlich,2021-10-23 14:56:22+00:00,GitHub,2021-10-23 14:56:22+00:00,"[frameworks] Fix small typo in ""Other"" preset description (#6882)"
cd7185a872a5767cfc010b849a4064cbc4e9f679,jj@jjsweb.site,2021-10-21 22:58:50+00:00,jj@jjsweb.site,2021-10-21 22:58:50+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.13
 - vercel@23.1.3-canary.15
 - @vercel/client@10.2.3-canary.13
 - @vercel/frameworks@0.5.1-canary.9
 - @vercel/routing-utils@1.11.4-canary.5"
981a76fbe22658d22f75bb749af05fe53a8d3a75,Kiko Beats,2021-10-21 22:57:48+00:00,GitHub,2021-10-21 22:57:48+00:00,"[routing-utils] Add `missing` fields (#6872)

* chore: add missing fields

* Update types.ts

* Update types.ts

* chore add missing as part of the schema

* test: add missing case"
c35c05446b0c56b8414a13d59ffad0e5f4aeae07,Nathan Rajlich,2021-10-19 20:38:29+00:00,GitHub,2021-10-19 20:38:29+00:00,"[cli] Add CLI login unit test (#6866)

This has just been sitting in my working tree for a while, might as well push it up."
b88e65c4adea0f6e4f6a0e29c6860b5e34e674e4,Jared Palmer,2021-10-19 19:10:31+00:00,GitHub,2021-10-19 19:10:31+00:00,"[cli] Add `vercel pull` command (#6822)

Add `vercel pull` command. Closes https://github.com/vercel/runtimes/issues/142. 

![CleanShot 2021-10-19 at 08 50 07](https://user-images.githubusercontent.com/4060187/137946853-860204ba-afaa-42da-be8a-d35bec97c808.png)

It does the following:
- Pull the `.env` file (it calls `pull` internally)
- Adds the following to `.vercel/project.json` (which will then be used by `vercel build`):
   ```tsx
   interface ProjectLink {
        projectId: string
        orgId: string
        settings: {
          buildCommand: string | null,
          devCommand:  string | null,
          directoryListing:  string | null,
          outputDirectory:  string | null,
          rootDirectory:  string | null,
          framework: string | null,
        }
    }
   ```
This PR also deprecates `vc env pull` with a warning:

![CleanShot 2021-10-19 at 08 50 21](https://user-images.githubusercontent.com/4060187/137946847-e102bd99-943a-4f07-b457-fe886007c044.png)

###  Checklist

- [x] Help output
- [x] Flags (need to combine flags from `env pull`)

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
9e16ce750b285b8f5bc9a01aa8b99028287ad147,Javi Velasco,2021-10-19 12:52:11+00:00,Javi Velasco,2021-10-19 12:52:11+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.12
 - vercel@23.1.3-canary.14
 - @vercel/client@10.2.3-canary.12
 - @vercel/frameworks@0.5.1-canary.8
 - @vercel/routing-utils@1.11.4-canary.4"
2105d3173078f6c3ec18e2cf5000c9691dad1367,Javi Velasco,2021-10-19 12:50:41+00:00,GitHub,2021-10-19 12:50:41+00:00,Update middleware route (#6863)
3d7e01ebf032a5e391b3ad8df674437db23c622a,jj@jjsweb.site,2021-10-18 21:50:01+00:00,jj@jjsweb.site,2021-10-18 21:50:01+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.11
 - vercel@23.1.3-canary.13
 - @vercel/client@10.2.3-canary.11
 - @vercel/frameworks@0.5.1-canary.7
 - @vercel/routing-utils@1.11.4-canary.3"
dccacc4ca058d144098b4a0c9777343725060b1c,JJ Kasper,2021-10-18 21:45:42+00:00,GitHub,2021-10-18 21:45:42+00:00,"[routing-utils] Update routes schema for new property (#6860)

Adds an additional property for the `routes` schema. 

### Related Issues

N/A

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
be5c0da52162d951c9d8e333eb8e6f3196c3543e,Devon Govett,2021-10-14 21:53:57+00:00,GitHub,2021-10-14 21:53:57+00:00,[example][frameworks] Add support for Parcel framework (#6836)
f985d953ed39e107bacceedda6a20222176ac8a5,Katie Byers,2021-10-14 21:31:02+00:00,GitHub,2021-10-14 21:31:02+00:00, [cli] Fix swapped error messages in `executeBuild()`  (#6724)
b8f8289afe931f2d1f70048a5f68c04c87f6739b,Nathan Rajlich,2021-10-13 22:40:06+00:00,GitHub,2021-10-13 22:40:06+00:00,"[cli] Use getters for `Now` props that mirror `Client` (#6838)

This will prevent any issues where the `Now` instance is out-of-sync with the `Client` instance, for example, during a re-auth where a new auth token is issued. Also reduces a bit of code which is nice."
e01a1cebfd35e6faca256c7a1943c0558c89f4cc,Nathan Rajlich,2021-10-13 21:39:24+00:00,GitHub,2021-10-13 21:39:24+00:00,"[cli] Don't pass `teamId` query param to `/verify` token endpoint (#6841)

Fixes an issue where the token would not be properly upgraded while
a Team scope was currently active, causing a new auth token to be issued
and lose the previous access scope(s)."
2515d522a335c12914e08dc414b90bf6d77af603,Matt Netkow,2021-10-13 18:32:26+00:00,GitHub,2021-10-13 18:32:26+00:00,"[frameworks] Make ""vercel dev"" work with Ionic Angular projects (#6658)"
32e935d632bd145a9caef7578178075ab6c24832,Nathan Rajlich,2021-10-13 17:20:54+00:00,GitHub,2021-10-13 17:20:54+00:00,"[cli] Use `GET /v2/user` endpoint (#6828)

The `/www/user` endpoint is deprecated."
e6818dd3f9519ce17b396ef8d271faa79820daa6,Miroslav Simulcik,2021-10-13 14:52:12+00:00,Miroslav Simulcik,2021-10-13 14:52:12+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.10
 - vercel@23.1.3-canary.12
 - @vercel/client@10.2.3-canary.10"
e510415a66834a292f33224f59f22883642881be,Miroslav Simulcik,2021-10-13 14:47:18+00:00,GitHub,2021-10-13 14:47:18+00:00,Add regions to lambda options (#6829)
1be75712e0b375c49b957d7ed414c82d9777399c,Nathan Rajlich,2021-10-12 23:16:55+00:00,GitHub,2021-10-12 23:16:55+00:00,"[cli] Add `outputBuffer` getter and mutable `isTTY` for tests (#6827)

These changes originally from #6652, but pulled out to be merged
separately.

`outputBuffer` is a simpler way of asserting tests against the CLI
output instead of working directly withe Jest mock function.

`output.isTTY` is also now mutable, so that we can write tests for both
cases when the output is different based on TTY-ness (for example,
see the updated `vc whoami` tests in this PR)."
f682aefc9defee9e44773f9cf866a3e2cab0d012,Andy Bitz,2021-10-12 10:56:49+00:00,Andy Bitz,2021-10-12 10:56:49+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.9
 - vercel@23.1.3-canary.11
 - @vercel/client@10.2.3-canary.9
 - @vercel/frameworks@0.5.1-canary.6"
cd485c18663293cce20b0f63fde908e8f3694833,Andy,2021-10-12 10:43:40+00:00,GitHub,2021-10-12 10:43:40+00:00,[frameworks] Add Nuxt 3 to framework detection (#6823)
f7de7227b437b6cd6cb98bdb1c04c5f75483bd9f,Steven,2021-09-23 18:28:52+00:00,Steven,2021-09-23 18:28:52+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.8
 - vercel@23.1.3-canary.10
 - @vercel/client@10.2.3-canary.8"
abea2171776a45977654d9ccc00a27835ef26c3e,Steven,2021-09-23 18:25:44+00:00,GitHub,2021-09-23 18:25:44+00:00,[build-utils] Add `allowQuery` to Prerender (#6766)
4e52f8532baada6d9c2e9c537784abcd8f9fd65b,Steven,2021-09-22 02:20:00+00:00,Steven,2021-09-22 02:20:00+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.7
 - vercel@23.1.3-canary.9
 - @vercel/client@10.2.3-canary.7
 - @vercel/go@1.2.4-canary.3
 - @vercel/node@1.12.2-canary.4
 - @vercel/python@2.0.6-canary.4
 - @vercel/ruby@1.2.8-canary.3"
702cb9e29c410cd32fdf390241f1a6ff8082c9df,Steven,2021-09-22 02:17:06+00:00,GitHub,2021-09-22 02:17:06+00:00,[all] Revert to `@vercel/ncc@0.24.0` (#6749)
d3d5555d792f3d206c106199e1b9976cf6bc4ac2,jj@jjsweb.site,2021-09-21 00:35:05+00:00,jj@jjsweb.site,2021-09-21 00:35:05+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.6
 - vercel@23.1.3-canary.8
 - @vercel/client@10.2.3-canary.6
 - @vercel/frameworks@0.5.1-canary.5
 - @vercel/routing-utils@1.11.4-canary.2"
2fd3fc73e5ae8a322cadebb76ab4d52eca9a1ffb,JJ Kasper,2021-09-21 00:15:29+00:00,GitHub,2021-09-21 00:15:29+00:00,"[routing-utils] Allow passing internal params to convertRewrites (#6742)

This adds an argument to allow passing internal param names that should be ignored when considering whether params should be auto-added to a rewrite's destination query. After adding this we should be able to resolve https://github.com/vercel/next.js/issues/27563 in the runtime where `convertRewrites` is called. 

This matches Next.js' handling for internal params which can be seen [here](https://github.com/vercel/next.js/blob/e90825ad88c6f8191bed1dcc43e03465afba32ed/packages/next/shared/lib/router/utils/prepare-destination.ts#L203)

### Related Issues

x-ref: https://github.com/vercel/next.js/issues/27563

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
de0b13a46e79d8a8234ce43384169e325c4d30c1,Steven,2021-09-16 16:54:47+00:00,Steven,2021-09-16 16:54:47+00:00,"Publish Canary

 - vercel@23.1.3-canary.7
 - @vercel/node@1.12.2-canary.3"
d0fe85db92ee7905699d0d7436491efc921b9c9a,Steven,2021-09-16 16:49:04+00:00,GitHub,2021-09-16 16:49:04+00:00,[node] Bump nft to 0.14.0 (#6727)
bfbd92732080d9cf944205f17273504cc06cbf07,jj@jjsweb.site,2021-09-14 20:02:32+00:00,jj@jjsweb.site,2021-09-14 20:02:32+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.5
 - vercel@23.1.3-canary.6
 - @vercel/client@10.2.3-canary.5
 - @vercel/frameworks@0.5.1-canary.4
 - @vercel/routing-utils@1.11.4-canary.1"
90bacf88b8190f25b93b48021c4768e33fddba28,JJ Kasper,2021-09-14 18:20:35+00:00,GitHub,2021-09-14 18:20:35+00:00,"[routing-utils] Fix host segment replacing (#6713)

* Fix host segment replacing

* Add additional check"
07c369c542913c3625c5e6a5d22807e3cf384401,Steven,2021-09-13 20:32:45+00:00,Steven,2021-09-13 20:32:45+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.4
 - vercel@23.1.3-canary.5
 - @vercel/client@10.2.3-canary.4
 - @vercel/go@1.2.4-canary.2
 - @vercel/node@1.12.2-canary.2
 - @vercel/python@2.0.6-canary.3
 - @vercel/ruby@1.2.8-canary.2"
a2e4186ccb70c8566667ac4a6aabf99169f6fb7e,Steven,2021-09-13 20:20:48+00:00,GitHub,2021-09-13 20:20:48+00:00,"[all] Bump ncc to 0.31.1 (#6700)

https://github.com/vercel/ncc/releases/tag/0.31.0

https://github.com/vercel/ncc/releases/tag/0.31.1"
6e1d708e3f58d1e9cb3f5afe93f0f622269cc5aa,Steven,2021-09-08 17:56:20+00:00,Steven,2021-09-08 17:56:20+00:00,"Publish Canary

 - vercel@23.1.3-canary.4
 - @vercel/python@2.0.6-canary.2"
38503103c3ba5f8e162730fa8aa12d77c79a4915,Noa,2021-09-08 17:54:03+00:00,GitHub,2021-09-08 17:54:03+00:00,"[python] Use pip `--upgrade` when installing function dependencies (#6683)


Co-authored-by: Steven <steven@ceriously.com>"
e8fec4b69c60739204334cfb910572776ef25fcd,jj@jjsweb.site,2021-09-07 16:52:01+00:00,jj@jjsweb.site,2021-09-07 16:52:01+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.3
 - vercel@23.1.3-canary.3
 - @vercel/client@10.2.3-canary.3
 - @vercel/frameworks@0.5.1-canary.3
 - @vercel/routing-utils@1.11.4-canary.0"
b3ffcdf80d234b79fd8ef7c8000a78dca6ede07f,JJ Kasper,2021-09-07 16:17:01+00:00,GitHub,2021-09-07 16:17:01+00:00,"[routing-utils] Ensure headers with only has items are replaced correctly (#6686)

This ensures we replace header values correctly when no named segments are used and only has items are used. 

### Related Issues

Fixes: https://vercel.slack.com/archives/CHTTGQYQ4/p1631023974185700

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
43c1a93c1d3f0425896784304f79133fe8dae017,Leo Lamprecht,2021-09-06 16:24:53+00:00,GitHub,2021-09-06 16:24:53+00:00,Enabled blank issues temporarily
5b118fd4e68501c317aa549bf5457516a1a4226d,Leo Lamprecht,2021-09-06 12:47:15+00:00,GitHub,2021-09-06 12:47:15+00:00,Disable blank issues again
8916b674afba4561dab025515d88068460b22464,Leo Lamprecht,2021-09-06 12:41:32+00:00,GitHub,2021-09-06 12:41:32+00:00,Temporarily enable blank issues
1807f83c692458ffd9a217d8d33ac846db8ff441,Brody McKee,2021-09-03 16:44:59+00:00,GitHub,2021-09-03 16:44:59+00:00,Update NPM publish token (#6672)
74e8ec7c64de4fddbd02112dce74abfaa1a34eae,Steven,2021-09-03 00:20:20+00:00,GitHub,2021-09-03 00:20:20+00:00,"Fix lerna publish for automation token (#6666)

Related to https://github.com/lerna/lerna/issues/2788"
2644e3127b9ea65ec50b89dc774d243f4c2c3941,Steven,2021-09-02 12:42:33+00:00,Steven,2021-09-02 12:42:33+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.2
 - vercel@23.1.3-canary.2
 - @vercel/client@10.2.3-canary.2"
d77ac04b0c99d5e5e7af08c746a6de1c67084e14,Leo Lamprecht,2021-09-02 11:52:18+00:00,GitHub,2021-09-02 11:52:18+00:00,Disable blank issues again
0ef9c8df4d2686834aa620b62c942b265ec1e9d8,Leo Lamprecht,2021-09-02 11:45:20+00:00,GitHub,2021-09-02 11:45:20+00:00,Temporarily enable issues
dfc4c98820b30f686fff64675e62e5e008641e06,Steven,2021-09-02 00:12:45+00:00,GitHub,2021-09-02 00:12:45+00:00,"[build-utils] Fix custom 404 route (#6657)

The Custom 404 feature was originally implemented in #4563 but was matching too broadly (see [gist](https://gist.github.com/kjk/4dc57da62d7e715c687cc7914847ffb2))

This PR fixes the custom 404 route and updates the tests."
0e51884725ac2e3b09830fae0eab2dc50da9b33e,Steven,2021-08-31 21:18:35+00:00,Steven,2021-08-31 21:18:35+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.1
 - vercel@23.1.3-canary.1
 - @vercel/client@10.2.3-canary.1
 - @vercel/frameworks@0.5.1-canary.2
 - @vercel/go@1.2.4-canary.1
 - @vercel/node-bridge@2.1.1-canary.1
 - @vercel/node@1.12.2-canary.1
 - @vercel/python@2.0.6-canary.1
 - @vercel/ruby@1.2.8-canary.1"
1b264fe60e7685a280080492b19ddcbc3f8fd5a7,Steven,2021-08-31 21:17:31+00:00,GitHub,2021-08-31 21:17:31+00:00,[build-utils] Add `allowQuery` to Lambda (#6651)
f18bca97187d17c050695a7a348b8ae02c244ce9,Nathan Rajlich,2021-08-31 19:47:17+00:00,GitHub,2021-08-31 19:47:17+00:00,[cli] Refactor legacy `Now` client to TypeScript (#6650)
c23dc73f410592debc56cd9ce640e48541eceb01,Steven,2021-08-31 14:53:18+00:00,GitHub,2021-08-31 14:53:18+00:00,"[examples] Bump Next.js to 11.1.2 (#6648)

* Bump Next.js to 11.1.1

* Bump Next.js to 11.1.2"
273718e0b78447bbd5b6092df720877099a18752,Nathan Rajlich,2021-08-30 22:07:09+00:00,GitHub,2021-08-30 22:07:09+00:00,"[cli] Rewrite Unit tests to TypeScript + Jest (#6638)

* Rewrites the CLI unit tests to be TypeScript and use Jest (consistent with the unit tests in the other packages in this repo).
* The file structure of the new test files mirrors that of the `src` directory, so that it's easy to find the relevant tests.
* Code coverage is also properly set up through Jest - you can already see a big increase in coverage from this PR.
* Adds a mock API server framework, with the intention of making it possible to write granular tests of the CLI commands. Using mocks also has the benefit of not requiring `VERCEL_TOKEN` env var to be set, so 3rd party PRs will be able to have their tests run. Ultimately this will also help with test coverage, since we will be writing unit tests that test the commands' code directly.
* Converts `Output` into a proper class (which is subclassed for the mocks)."
230b88bf9bcc2471bab864e5c18854de857f572b,Nathan Rajlich,2021-08-28 18:01:31+00:00,GitHub,2021-08-28 18:01:31+00:00,"[cli] Remove broken `vc downgrade` command (#6643)

It maps to an ""upgrade"" command, which does not exist.

Fixes:

```
$ vc downgrade
Vercel CLI 23.1.2
Error! Cannot find module './upgrade'
```"
676a3d2568d7a236b713f74432caeedb61378244,Nathan Rajlich,2021-08-27 19:48:31+00:00,GitHub,2021-08-27 19:48:31+00:00,"[cli] Refactor `src/index` to TypeScript (#6602)

Refactors the CLI entrypoint `src/index.js` to TypeScript."
f221f041d0f87becbbd8fb3877ae102648a1af78,Nathan Rajlich,2021-08-27 17:03:36+00:00,GitHub,2021-08-27 17:03:36+00:00,Update `@vercel/ncc` to v0.29.2 (#6605)
aca42b2aac26d2744db66fe04001268474b4b361,Kaitlyn,2021-08-26 00:24:37+00:00,GitHub,2021-08-26 00:24:37+00:00,[examples] Update `angular` example to npm 7 (#6636)
cf11a8efb536bdfb860e5b41299256232c1dfb20,Kaitlyn Carter,2021-08-25 22:43:29+00:00,Kaitlyn Carter,2021-08-25 22:43:29+00:00,"Revert ""delete yarn.lock""

This reverts commit b941715d7bca691c36f95b28b57e42e33b68d629."
be09349dafb526f4a2241dddde7f99a126a9fbf5,Kaitlyn Carter,2021-08-25 22:34:21+00:00,Kaitlyn Carter,2021-08-25 22:34:21+00:00,"Revert ""update npm peer dependencies""

This reverts commit a01372bcbb8afc8344634649747e8c82200e5466."
a01372bcbb8afc8344634649747e8c82200e5466,Kaitlyn Carter,2021-08-25 21:51:22+00:00,Kaitlyn Carter,2021-08-25 21:51:22+00:00,update npm peer dependencies
b941715d7bca691c36f95b28b57e42e33b68d629,Kaitlyn Carter,2021-08-25 21:48:44+00:00,Kaitlyn Carter,2021-08-25 21:48:44+00:00,delete yarn.lock
ee9a8a0415e218903a7bceeb6652e2b4a789561a,Nathan Rajlich,2021-08-24 18:08:30+00:00,GitHub,2021-08-24 18:08:30+00:00,[cli] Refactor `vc teams` to TypeScript (#6610)
2ad27eefb09d7c3c1628d87ac830747b2393a577,jj@jjsweb.site,2021-08-24 14:36:40+00:00,jj@jjsweb.site,2021-08-24 14:36:40+00:00,"Publish Canary

 - @vercel/build-utils@2.12.3-canary.0
 - vercel@23.1.3-canary.0
 - @vercel/client@10.2.3-canary.0
 - @vercel/frameworks@0.5.1-canary.1
 - @vercel/go@1.2.4-canary.0
 - @vercel/node-bridge@2.1.1-canary.0
 - @vercel/node@1.12.2-canary.0
 - @vercel/python@2.0.6-canary.0
 - @vercel/ruby@1.2.8-canary.0"
578fe8a93016d76ac9c7b9709ee010b8779d03ed,Nathan Rajlich,2021-08-23 23:22:57+00:00,GitHub,2021-08-23 23:22:57+00:00,"[cli] Support `--project` flag in `vc link` command (#6614)

To make setting up local dev README instructions easier for new users being introduced to a Vercel project, support flags to make the `vc link` command be non-interactive, in the case where the project name does not match the name of the directory where the code is located:

```
$ vc link --scope acme --project docs
```

Related to https://github.com/vercel/front/pull/10732."
04ea3bb88daf7018d3615406731a2cbf4bb6ea40,JJ Kasper,2021-08-23 19:50:18+00:00,GitHub,2021-08-23 19:50:18+00:00,"[node-bridge] Fix error in node-bridge from decoded path (#6583)

* Fix error in node-bridge from decoded path

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>"
46116022b740fb10acce80aedd336e7b8bb9494d,Steven,2021-08-23 16:04:38+00:00,GitHub,2021-08-23 16:04:38+00:00,[cli] Update readme (#6622)
f80539df82890dad2df27977f2299aa164a6a755,Lee Robinson,2021-08-22 23:39:04+00:00,GitHub,2021-08-22 23:39:04+00:00,Update README (#6618)
daf06307b4db18c6380b38e3e5e9959a3a6f136f,Johan Eliasson,2021-08-20 19:58:47+00:00,GitHub,2021-08-20 19:58:47+00:00,Fix deprecation message for `NowRequestBody` (#6613)
0bd028cd846d5159f26df06f513928120af338ba,Nathan Rajlich,2021-08-18 01:28:56+00:00,GitHub,2021-08-18 01:28:56+00:00,"[cli] Show server-side `errorMessage` upon deployment `UNEXPECTED_ERROR` (#6606)

Before:

```
Error! Unexpected error. Please try again later. ()
```

After:

```
Error! An unexpected error happened when running this build. We have been notified of the problem. If you have any questions, please contact support@vercel.com.
```"
1c48030e1e4fd26867b2e334ff63d088b75abbdf,Nathan Rajlich,2021-08-17 17:35:55+00:00,GitHub,2021-08-17 17:35:55+00:00,"[cli] Stop installing `@now/build-utils` for `vc dev` (#6604)

Users should not be using any legacy Runtimes that depend on `@now/build-utils` at this point, since those have not received updates in a long time."
1dc05428d7bff7a4f911db5bc4f8758c1b957008,Nathan Rajlich,2021-08-17 15:29:52+00:00,GitHub,2021-08-17 15:29:52+00:00,"[go][node][python][ruby] Remove `@now/build-utils` backwards compat hack (#6603)

`@now/build-utils` has not been published in a long time, so let's remove this logic."
288dca045c0ab80cb4080a7a35c16b747f042d4f,Nathan Rajlich,2021-08-13 20:26:02+00:00,GitHub,2021-08-13 20:26:02+00:00,[cli] Refactor a handful of util modules to TypeScript (#6584)
8c5bc04fdebdce279574c62ca14aa335a92414f8,Steven,2021-08-13 16:03:54+00:00,GitHub,2021-08-13 16:03:54+00:00,"Fix publish script for Windows (#6591)

* Fix publish script for Windows

* Update changelog.js"
a07e6fc103d964b0e5910de7a2c3bb5d0d3b84de,Steven,2021-08-11 19:41:38+00:00,GitHub,2021-08-11 19:41:38+00:00,[examples] Bump Next.js to 11.1.0 (#6582)
9af3054d41541ba7d836102747a8bb8457ec51bc,Nathan Rajlich,2021-08-11 19:04:01+00:00,GitHub,2021-08-11 19:04:01+00:00,"[cli] Use `client.fetch()` in `vc init` (#6575)

Gives us debug logging and retries, etc."
9fb254e14a16d03132dbebf389ad668b7b1002ac,Nathan Rajlich,2021-08-11 07:50:57+00:00,GitHub,2021-08-11 07:50:57+00:00,"[cli] Attempt to fix the ""lambda-with-3-second-timeout"" E2E test (#6579)"
3616bdf17a1f9f4df3fe4277244b28073a6211ff,William Li,2021-08-11 03:11:43+00:00,GitHub,2021-08-11 03:11:43+00:00,bump react-scripts to @latest (#6577)
52a89fd4b7c90d9bcb9a2ee56347528ac0d1846d,Nathan Rajlich,2021-08-10 17:41:44+00:00,GitHub,2021-08-10 17:41:44+00:00,"[cli] Remove `withSpinner()` helper (#6576)

It's not really necessary and doesn't use the common `Output` instance."
d4db6635f157ab4c1b18dd009951ba4e80263fdb,Nathan Rajlich,2021-08-10 09:01:56+00:00,GitHub,2021-08-10 09:01:56+00:00,"[cli] Remove unnecessary `await` in Dev tests (#6572)

This is the result of VS Code's ""remove all unneeded await calls"" formatter."
f1009a80cd5e82b508855b2f6bf8690c27fd9c46,Nathan Rajlich,2021-08-10 05:24:17+00:00,GitHub,2021-08-10 05:24:17+00:00,"[api] Fix `GET /api/examples/list` output (#6574)

A regression from #6554 caused the return value to contain a nested
object with a `name` property for the `name` key of the response in the
list."
2756d1e323eec35ae053207beaba86d0452d2918,Steven,2021-08-09 21:27:50+00:00,GitHub,2021-08-09 21:27:50+00:00,"[client][frameworks][api] Update `readdir()` call with `withFileTypes` (#6554)

Avoids running unnecessary code such as `stat().isDirectory()`."
5b61b16bd169b05bb386f5562a233e463fac0949,Nathan Rajlich,2021-08-09 18:21:40+00:00,Nathan Rajlich,2021-08-09 18:21:40+00:00,"Publish Stable

 - @vercel/build-utils@2.12.2
 - vercel@23.1.2
 - @vercel/client@10.2.2
 - @vercel/node@1.12.1"
41c61f8f8b1c606d297a16cb06aa96fa01588f8c,Nathan Rajlich,2021-08-09 17:00:43+00:00,Nathan Rajlich,2021-08-09 17:00:43+00:00,"Publish Canary

 - vercel@23.1.2-canary.1"
6c52e1fad73146828bc7ba3b289870ba8b3fca4c,Nathan Rajlich,2021-08-09 16:58:30+00:00,GitHub,2021-08-09 16:58:30+00:00,"[cli] Add ""outDir"" to `tsconfig.json` (#6566)

Fixes TypeScript errors."
d2e82fdc3a3eab6a2d1cddae5229c2f6faf6f2a7,Nathan Rajlich,2021-08-08 07:57:23+00:00,GitHub,2021-08-08 07:57:23+00:00,[cli] Fix in-flight re-login when there are no existing credentials (#6565)
a60b1b225be5ac13e4f1149ab5f3e8e9cb07c50b,Nathan Rajlich,2021-08-07 00:15:13+00:00,Nathan Rajlich,2021-08-07 00:15:13+00:00,"Publish Canary

 - @vercel/build-utils@2.12.2-canary.0
 - vercel@23.1.2-canary.0
 - @vercel/client@10.2.2-canary.0
 - @vercel/node@1.12.1-canary.0"
18bec983aefbe2a77bd14eda6fca59ff7e956d8b,Kaitlyn,2021-08-07 00:14:21+00:00,GitHub,2021-08-07 00:14:21+00:00,"[build-utils] check to see that the node version is less then 16 befo (#6553)

### Related Issues

Check the project's nodeVersion setting for when we release Node 16 and later

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e6fb2ffe05605289415776392dca211362bfc7a5,Nathan Rajlich,2021-08-06 20:00:16+00:00,Nathan Rajlich,2021-08-06 20:00:16+00:00,"Publish Stable

 - @vercel/build-utils@2.12.1
 - vercel@23.1.1
 - @vercel/client@10.2.1"
0533cfd566c5a793814cb32abbcfef7ed97a5e0c,Nathan Rajlich,2021-08-06 19:48:58+00:00,Nathan Rajlich,2021-08-06 19:48:58+00:00,[build-utils] Fix test name
3db8618885b86152f52920361a45c6810b258772,Nathan Rajlich,2021-08-06 18:52:56+00:00,Nathan Rajlich,2021-08-06 18:52:56+00:00,"Publish Canary

 - @vercel/build-utils@2.12.1-canary.0
 - vercel@23.1.1-canary.0
 - @vercel/client@10.2.1-canary.0
 - @vercel/frameworks@0.5.1-canary.0"
4722ea5ad67468a8619d0e0f4c1dcb544fc5f4e1,Nathan Rajlich,2021-08-06 18:48:23+00:00,GitHub,2021-08-06 18:48:23+00:00,"[build-utils] Make `scanParentDirs()` work with npm Workspaces (#6559)

Currently, when `scanParentDirs()` finds the closest `package.json` file, it stops iteration regardless of whether or not a lockfile was found. For npm Workspaces, this is problematic because if you are deploying a subdirectory of a monorepo, then there will be no lockfile in the subdirectory (the `package-lock.json` file is at the root of the project). So instead of stopping once the `package.json` file is found, instead stop when the first lockfile is found."
c7bd6f32664795397226a6cec27a62671fde275f,Nathan Rajlich,2021-08-05 21:06:18+00:00,GitHub,2021-08-05 21:06:18+00:00,"[tests] Define `jest`/`ts-jest` deps at the root level (#6556)

And remove `jest`/`ts-jest` from the individual packages. It is important to have a consistent version of `jest` being used throughout the monorepo, otherwise bizarre errors surface that cause jest to crash, such as [here](https://github.com/vercel/vercel/runs/3255999061?check_suite_focus=true):

```
TypeError: this._environment.runScript is not a function

  at Runtime._execModule (../../node_modules/jest-runner/node_modules/jest-runtime/build/index.js:856:41)
```"
1a776ad3438a435c4ee8cca462b06d09a7d43008,Nathan Rajlich,2021-08-05 19:50:38+00:00,Nathan Rajlich,2021-08-05 19:50:38+00:00,"Publish Stable

 - @vercel/build-utils@2.12.0
 - vercel@23.1.0
 - @vercel/client@10.2.0
 - @vercel/frameworks@0.5.0
 - @vercel/go@1.2.3
 - @vercel/node-bridge@2.1.0
 - @vercel/node@1.12.0
 - @vercel/python@2.0.5
 - @vercel/routing-utils@1.11.3
 - @vercel/ruby@1.2.7"
f0dab7d26d585621cbb6bbaeb8691235ca882d39,Kaitlyn Carter,2021-08-04 20:43:03+00:00,Kaitlyn Carter,2021-08-04 20:43:03+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.7
 - vercel@23.0.2-canary.12
 - @vercel/client@10.1.2-canary.8"
9a5ad5c31fd4da41fd306b116b15466b1860463f,Kaitlyn,2021-08-04 20:41:12+00:00,GitHub,2021-08-04 20:41:12+00:00,[build-utils] Add logging for when npm 7 is used (#6552)
a6243962b89ad8b8b1609e8e009da865142d7c02,Nathan Rajlich,2021-08-03 18:13:36+00:00,Nathan Rajlich,2021-08-03 18:13:36+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.6
 - vercel@23.0.2-canary.11
 - @vercel/client@10.1.2-canary.7
 - @vercel/frameworks@0.4.2-canary.5"
9cb7d315c528571c9f28cf40e066ef1e54ec3cd0,Nathan Rajlich,2021-08-03 16:16:24+00:00,GitHub,2021-08-03 16:16:24+00:00,"[build-utils] Invoke npm 7 when lockfile version 2 is detected (#6532)

As the title suggests, this PR makes it such that npm 7 will be invoked when there is a `package-lock.json` file with `lockfileVersion` 2 or greater, by prepending the the `$PATH` a directory within the build container where npm 7 is located.

The test fixture `20-npm-7` is also enabled for E2E testing, to ensure that the proper npm version is enabled in the production build."
ef37279270bc7b471018453c89a25bdfdf0cb081,Kaitlyn,2021-07-30 22:20:24+00:00,GitHub,2021-07-30 22:20:24+00:00,"[build-utils] Return ""lockfileVersion"" property in `scanParentDirs()` function  (#6533)

### Related Issues
[23112](https://app.clubhouse.io/vercel/story/23112/make-scanparentdirs-function-return-the-lockfileversion-property)

#### Tests

- [* ] The code changed/added as part of this PR has been covered with tests
- [* ] All tests pass locally with `yarn test-unit`

#### Code Review

- [*] This PR has a concise title and thorough description useful to a reviewer
- [* ] Issue from task tracker has a link to this PR"
f9191374430dc0323b85b5793a56b754fe1acf9e,Leo Lamprecht,2021-07-29 11:47:12+00:00,GitHub,2021-07-29 11:47:12+00:00,Fixed links (#6529)
c6f2021d15723d2656c74ed1f0885aeb849db488,Sbastien Chopin,2021-07-29 11:19:52+00:00,GitHub,2021-07-29 11:19:52+00:00,[examples][frameworks][nuxtjs] Update design and starter page (#6290)
3608bcf6f16d48bc1847913f623306bb5a6eb6ef,Nathan Rajlich,2021-07-28 22:08:01+00:00,GitHub,2021-07-28 22:08:01+00:00,[build-utils] Convert integration tests to TypeScript (#6528)
f036162aa3dc0902db4ebaad882d2f57c54b97a9,Nathan Rajlich,2021-07-28 20:49:42+00:00,GitHub,2021-07-28 20:49:42+00:00,"[build-utils] Convert `unit.test` to TypeScript and fix jest types in VS Code (#6527)

Makes the `test/unit.test.ts` file be TypeScript, and import from the source TypeScript code. This way, we don't need to run `yarn build` to test local changes when testing.

Also, VS Code was complaining about the types for jest `describe()`/`it()` not being installed, even though they are. After some digging, I found that TypeScript has a peculiar behavior with types in monorepo setups. [This solution](https://github.com/microsoft/TypeScript-Node-Starter/issues/196#issuecomment-771988960) describing adding a `tsconfig.json` inside of the `tests` dir seems to do the trick."
e271c2598e43d08c3eea7fe88dcf9f6a64d15a66,Ana Trajkovska,2021-07-28 14:42:09+00:00,GitHub,2021-07-28 14:42:09+00:00,[examples] Update Deploy button URLs in examples (#6523)
c857ad7f659af4794853a6f353937106f2093bec,Leo Lamprecht,2021-07-27 13:06:47+00:00,GitHub,2021-07-27 13:06:47+00:00,"Don't render SvelteKits port flag in the UI (#6522)

Like this, we can avoid that the dashboard will ask people to pass `--port` when running SvelteKit's Development Command.

Only `vercel dev` will make use of it."
8f7c2f638539e25385f83beb056305c42294289d,JJ Kasper,2021-07-26 18:02:53+00:00,JJ Kasper,2021-07-26 18:02:53+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.5
 - vercel@23.0.2-canary.10
 - @vercel/client@10.1.2-canary.6
 - @vercel/frameworks@0.4.2-canary.4
 - @vercel/routing-utils@1.11.3-canary.1"
232f55df2203692559d6dbe7d2cf475b2611af96,JJ Kasper,2021-07-26 17:22:27+00:00,GitHub,2021-07-26 17:22:27+00:00,"Fix has segment validation in destination (#6521)

This ensures we validate segments being used from `has` in the `destination` correctly

### Related Issues

x-ref: https://vercel.slack.com/archives/CLDDX2Y0G/p1627285500281300

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
43d365c73dac8edb5f90af7dff2453df5f91c7a3,Lee Robinson,2021-07-23 14:21:24+00:00,Lee Robinson,2021-07-23 14:21:24+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.4
 - vercel@23.0.2-canary.9
 - @vercel/client@10.1.2-canary.5
 - @vercel/frameworks@0.4.2-canary.3"
8950cd9685f7ab02b3ea0d377e40fc6e60d42961,Lee Robinson,2021-07-23 14:17:22+00:00,GitHub,2021-07-23 14:17:22+00:00,"[frameworks][examples] Add support for zero-config SvelteKit (#6482)

While we already have support for [SvelteKit](https://sveltekit-delta.vercel.app) on Vercel with the [File System API](https://vercel.com/docs/more/adding-your-framework), this makes the Svelte logo show up and adds an example. I also updated the Svelte example to match their default template and guide the user to use SvelteKit if they want functions.

https://sveltekit.examples.vercel.com"
868fc6159c8e5b9ced73d26488414f9dec67c341,Nathan Rajlich,2021-07-23 00:33:30+00:00,Nathan Rajlich,2021-07-23 00:33:30+00:00,"Publish Canary

 - vercel@23.0.2-canary.8"
7cadbc3989892cd6c570cdfd8edcec66d0385b16,Nathan Rajlich,2021-07-22 22:36:01+00:00,GitHub,2021-07-22 22:36:01+00:00,"[cli] Add request counter to `--debug` logs (#6510)

Follow up to #6508. Adds a request ""counter"" that increments for every API request, matching how `front` does it.

Also tweaks the `output.time()` output a bit by rendering the timestamp in gray, and with `[]` brackets. If the time diff is < 1000ms then the full milliseconds will be printed intstead of the seconds.

<img width=""710"" alt=""Screen Shot 2021-07-22 at 2 45 39 PM"" src=""https://user-images.githubusercontent.com/71256/126713843-db70ed9c-4752-4ca9-8f54-313c4cb44914.png"">"
89553e601519f5c572c04b87a5d9ce229a41059e,Kaitlyn,2021-07-22 21:26:21+00:00,GitHub,2021-07-22 21:26:21+00:00,"[cli] Add ""x-vercel-id"" response header to `--debug` logs (#6508)"
181f1d60b62c2b3f5f8eca1b5ad1c6819bb009d9,Nathan Rajlich,2021-07-19 20:48:02+00:00,GitHub,2021-07-19 20:48:02+00:00,"[cli] Allow dynamic label in `output.time()` function (#6492)

Updates the `output.time()` function to accept a function as the ""label"" parameter. When a function is passed, it will be invoked twice, once at the beginning of the promise being executed, and a second time after the promise has resolved. The second time, the return value of the promise is passed to the label function, so that the resolved value may be used to create the label.

Drops usage of Node's `console.time()` and `console.timeEnd()` since we were using it in a hacky and unnecessary way."
8cc72a68721d6c990b522f7a561f095dd82421f2,Nathan Rajlich,2021-07-19 17:32:21+00:00,GitHub,2021-07-19 17:32:21+00:00,"[cli] Remove ""now"" from variable names in `vc dev` (#6483)"
e37e55867411daaccf327bf50513de178c367032,Nathan Rajlich,2021-07-16 16:35:15+00:00,Nathan Rajlich,2021-07-16 16:35:15+00:00,"Publish Canary

 - vercel@23.0.2-canary.7"
e0a62dabaa485fde7284d48e9c941fa653c680af,Markoz Pea,2021-07-15 08:33:15+00:00,GitHub,2021-07-15 08:33:15+00:00,[cli] Convert `vc ls` and `vc rm` commands to TypeScript (#6460)
c23473df49beb94d4b2eae668a1c40d38a0a5ac8,Nathan Rajlich,2021-07-14 18:58:36+00:00,GitHub,2021-07-14 18:58:36+00:00,"[cli] Handle the `ssoUserId` being pasted in ""out-of-band"" login mode (#6476)

Handles the edge case where a SAML login is executed for an unconnected user, so they have to complete a two-step login."
0569b268e653a1e34abe5781e6e80a65dd44c4a6,Nathan Rajlich,2021-07-14 07:24:57+00:00,GitHub,2021-07-14 07:24:57+00:00,"[cli] Add ""Local Development"" section to README (#6472)

Adds a section to the CLI readme explaining how to check out the source code and use `ts-eager` for local development."
db955473d98b8ccea382053c38bb57ed26457562,ernestd,2021-07-13 18:15:56+00:00,GitHub,2021-07-13 18:15:56+00:00,Add billing to list of commands (#6471)
311ef26f60ece3c4a7ed3ee1bc6783f54036589b,Steven,2021-07-13 16:34:37+00:00,Steven,2021-07-13 16:34:37+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.3
 - vercel@23.0.2-canary.6
 - @vercel/client@10.1.2-canary.4
 - @vercel/frameworks@0.4.2-canary.2"
c08462a46b197b9b403f84b4e7c66ade499e5e91,Stephanie Dietz,2021-07-13 16:33:57+00:00,GitHub,2021-07-13 16:33:57+00:00,"[examples][frameworks] Add support for `vite` (#6445)



Co-authored-by: Lee Robinson <me@leerob.io>
Co-authored-by: Steven <steven@ceriously.com>"
24b2f16afb4e50fb243270569f735c03683f34fa,Nathan Rajlich,2021-07-12 22:00:14+00:00,Nathan Rajlich,2021-07-12 22:00:14+00:00,"Publish Canary

 - vercel@23.0.2-canary.5
 - @vercel/client@10.1.2-canary.3"
919c667ff1b478ee606e32bc67d048632b62a2bd,Nathan Rajlich,2021-07-12 20:29:54+00:00,GitHub,2021-07-12 20:29:54+00:00,"[cli] Add ""out-of-band"" mode to `vc login` (#6455)

Adds an ""out-of-band"" login mode to the `vc login` command, for use in headless environments like inside a Docker container or an SSH session. In these situations, spawning a localhost HTTP server won't work, because the HTTP server will not be accessible to the web browser that is doing the authentication.

In ""out-of-band"" mode, the login URL is simply presented to the user, and they must visit the login URL in their web browser and complete the authentication. The callback URL is a page on front that shows the verification token to the user and instructs them to copy + paste the token back into the CLI, at which point the login can complete.

Docker/SSH sessions are attempted to be automatically detected, and ""out-of-band"" mode is enabled implicitly. But there is also an `--oob` flag in case that detection logic were to fail (or if you'd like to run OOB mode locally).

This PR also adds shortcut flags for the Git provider login mechanisms, i.e. `vc login --github`.


https://user-images.githubusercontent.com/71256/125129304-1f5f3380-e0b4-11eb-8139-d1109811bd86.mov"
ab3f99bfea6931d3fda18c8db0093386439fe2cf,Mark Glagola,2021-07-08 23:58:22+00:00,GitHub,2021-07-08 23:58:22+00:00,"[cli][client] Printable `link` from `deployment.aliasWarning` (#6454)

* Ability to print `links` from `aliasWarning`

* Update latest.ts

* Add link style"
a8615d3c34fc643d29d4e8eb73ad939a849dce07,Markoz Pea,2021-07-08 21:46:37+00:00,GitHub,2021-07-08 21:46:37+00:00,[cli] Convert `vc projects` to TypeScript (#6452)
0a09a5232c9ffddcc68475bf05fccd56ebe946d1,Nathan Rajlich,2021-07-08 02:35:35+00:00,Nathan Rajlich,2021-07-08 02:35:35+00:00,"Publish Canary

 - vercel@23.0.2-canary.4
 - @vercel/node-bridge@2.0.1-canary.2
 - @vercel/node@1.11.2-canary.4"
f3190b7f7485b5d3db9acc87a2186918df15fd74,Nathan Rajlich,2021-07-08 02:33:45+00:00,GitHub,2021-07-08 02:33:45+00:00,[node] Use `require()` when source is TypeScript in `vc dev` (#6448)
cf827a8b919ff6eed383863af39c26d51b2aa16e,JJ Kasper,2021-07-07 03:43:13+00:00,JJ Kasper,2021-07-07 03:43:13+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.2
 - vercel@23.0.2-canary.3
 - @vercel/client@10.1.2-canary.2
 - @vercel/frameworks@0.4.2-canary.1
 - @vercel/go@1.2.3-canary.0
 - @vercel/node-bridge@2.0.1-canary.1
 - @vercel/node@1.11.2-canary.3
 - @vercel/python@2.0.5-canary.0
 - @vercel/routing-utils@1.11.3-canary.0
 - @vercel/ruby@1.2.7-canary.0"
bed83e829c418b00a0cda6886e046227e4c74833,Steven,2021-07-06 22:24:40+00:00,GitHub,2021-07-06 22:24:40+00:00,"[routing-utils] Fix `rewrites` with query string array in destination (#6441)

Related to https://github.com/vercel/next.js/pull/26619"
0f0ee4e8459f107fbbb1c6637e3ceb4e041473bc,Markoz Pea,2021-07-06 19:10:00+00:00,GitHub,2021-07-06 19:10:00+00:00,[cli] Convert `vc whoami` to TypeScript  (#6435)
2d70c6c811789408d7981182a146f6d1f61a44e4,Steven,2021-07-02 15:54:53+00:00,GitHub,2021-07-02 15:54:53+00:00,[test] Update `publish-canary` script (#6432)
887309f0a5dab6bda9bf02a611e202c7700cbcc9,Nathan Rajlich,2021-06-30 18:26:29+00:00,GitHub,2021-06-30 18:26:29+00:00,"[cli] Convert `vc deploy` to TypeScript (#6413)

This is a continuation of https://github.com/vercel/vercel/pull/6382 (thank you @markozxuu!) with merge conflicts addressed and pushed to a local branch, so that CI tests run."
8a7657c80bc6c699c0c140b143fe19b9727648de,Nathan Rajlich,2021-06-30 01:48:50+00:00,GitHub,2021-06-30 01:48:50+00:00,[cli] Use `output.spinner()` instead of `wait()` (#6414)
279d0bf988ed5f74281c4ff729792832fa756550,Nathan Rajlich,2021-06-29 23:42:40+00:00,GitHub,2021-06-29 23:42:40+00:00,[cli] Set current scope to proper team after SSO login (#6415)
d2b31d03da1429bd9ab4a59f10a9e5043d45d202,Nathan Rajlich,2021-06-29 08:48:36+00:00,GitHub,2021-06-29 08:48:36+00:00,"[cli] Use `Client` instead of `LoginParams` for login (#6409)

* [cli] Use `Client` instead of `LoginParams`

* Use `client.fetch()`

* Fix email verify

* Remove redundant ""user-agent"" header

* Fix test"
16acf906fc5e59f79476cb846ee17c9c0bb1d1ed,Nathan Rajlich,2021-06-25 23:45:53+00:00,GitHub,2021-06-25 23:45:53+00:00,"Update to TypeScript 4.3.4 (#6397)

Also updates eslint and related packages to work with the new TypeScript version."
0127d177037f5ce34a9ea26cee7a42129529e3f6,Nathan Rajlich,2021-06-25 21:41:52+00:00,GitHub,2021-06-25 21:41:52+00:00,"Fix Ruby E2E tests (#6401)

Currently the `06-rails` test is failing at build time with:

```
16:27:09.550  	    'Your bundle is locked to mimemagic (0.3.3) from rubygems repository\n' +
16:27:09.550  	    'https://rubygems.org/ or installed locally, but that version can no longer be\n' +
16:27:09.550  	    'found in that source. That means the author of mimemagic (0.3.3) has removed it.\n' +
16:27:09.550  	    ""You'll need to update your bundle to a version other than mimemagic (0.3.3) that\n"" +
16:27:09.550  	    ""hasn't been removed in order to install."",
```

So I ran `bundler update` in the ""06-rails"" Ruby test fixture to update the deps in the Gemfile.lock file."
0bfc2a369319b66f5b9158c8de8fdf2ef35cb334,Steven,2021-06-25 15:22:56+00:00,Steven,2021-06-25 15:22:56+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.1
 - vercel@23.0.2-canary.2
 - @vercel/client@10.1.2-canary.1
 - @vercel/frameworks@0.4.2-canary.0
 - @vercel/node@1.11.2-canary.2"
b9809b140c408b1c2bbe0345ca799d2fa5795ca8,Steven,2021-06-25 15:14:05+00:00,GitHub,2021-06-25 15:14:05+00:00,"[node] Fix ESM when package.json `type: module` (#6399)

* [node] Fix ESM when package.json `type: module`

* Fix cjs and add test fixture"
faaccc1f9f66c5ad98e173fadf8d3f64f7cf1ebc,Steven,2021-06-24 19:31:16+00:00,GitHub,2021-06-24 19:31:16+00:00,[frameworks] Add missing cachePattern to Next.js (#6396)
4b61f1dd61cc698839405600e3740dc2fadf5dc8,Nathan Rajlich,2021-06-24 19:06:27+00:00,GitHub,2021-06-24 19:06:27+00:00,"[cli] Set proper `currentTeam` in `vc deploy` (#6394)

Fixes an edge case bug when the user has a current scope that is
different than the owner of the project that is being deployed.

When this was the case, the API call to get the certs for a domain at
the end of the `vc deploy` command was using the incorrect `teamId`,
potentially causing a 403 error (when the current auth token does not
have access to the selected scope)."
cdd417455f819ce080e9a6011f5fb913d468e331,Steven,2021-06-24 18:44:38+00:00,GitHub,2021-06-24 18:44:38+00:00,[frameworks] Add cachePattern to API response (#6395)
fe671f56c5c6b69824a90bcc0b40778b9eba6da9,Leonardo Merlin,2021-06-24 02:19:04+00:00,GitHub,2021-06-24 02:19:04+00:00,"chore(examples): update nuxtjs (#6383)

* chore: update nuxtjs example

* fix: remove @nuxtjs/pwa

Co-authored-by: Leonardo Merlin <lmerlin@schubergphilis.com>"
ddf9e6cf3f36c396376851497c1a3105f0c5a45d,Nathan Rajlich,2021-06-23 19:32:43+00:00,GitHub,2021-06-23 19:32:43+00:00,"[cli] Make `vc deploy` not load current ""scope"" (#6388)

`vc deploy` doesn't care about the current ""scope"" that the CLI has selected, since it uses the `.vercel` directory to determine the ownerId and projectId.

Therefore, it should not be fetching the team details of the selected scope during `vc deploy`, since it's possible that the token might not have access to the current scope and returns a 403, even though that API call is unnecessary for the `vc deploy` command to complete."
13b03c6abdf290cc5f8b913d1c8bc9a9b76d042d,Steven,2021-06-23 14:54:17+00:00,Steven,2021-06-23 14:54:17+00:00,"Publish Canary

 - @vercel/build-utils@2.11.2-canary.0
 - vercel@23.0.2-canary.1
 - @vercel/client@10.1.2-canary.0
 - @vercel/node@1.11.2-canary.1"
7dd4c629adc34c27a13e3ffaad7462741899d3dc,Steven,2021-06-23 14:48:47+00:00,GitHub,2021-06-23 14:48:47+00:00,"[node] Add support for ESM to `vc dev` (#6385)

Follow up to #6121"
81b3d7f5f1b64e8d03d47a847e7baa3cc4cd3147,Nathan Rajlich,2021-06-23 03:57:15+00:00,GitHub,2021-06-23 03:57:15+00:00,"[cli] Fix `vc login` hanging for a few seconds before exiting (#6387)

Closing keep-alive HTTP connections was causing the `server.close()` call
to take a few seconds before completing, so set the `Connection: close`
response header in order to make the connections close immediately,
so that `server.close()` is fast."
3566c32209494a25ded4e97e49dae60c2daa458c,Steven,2021-06-23 02:21:16+00:00,GitHub,2021-06-23 02:21:16+00:00,"[build-utils] Add support for `.mjs` with zero config (#6386)

Follow up to #6121"
267ca7b379a22fcba370d3eca96d06b2cc884903,Nathan Rajlich,2021-06-22 23:46:03+00:00,GitHub,2021-06-22 23:46:03+00:00,[cli] Print timestamp for each line for multi-line log entries (#6384)
7b9d9954b8b4e57c173d426656244262707971ca,Steven,2021-06-22 19:46:21+00:00,Steven,2021-06-22 19:46:21+00:00,"Publish Canary

 - vercel@23.0.2-canary.0
 - @vercel/node-bridge@2.0.1-canary.0
 - @vercel/node@1.11.2-canary.0"
79675db24192a4e3734929211d2fcd2737acb006,Steven,2021-06-22 19:44:30+00:00,GitHub,2021-06-22 19:44:30+00:00,[node][node-bridge] Add support for ESM (#6121)
3ac8a3f67f1c41e3a4ed08bb98bd18675cb9afef,Nathan Rajlich,2021-06-18 23:33:37+00:00,GitHub,2021-06-18 23:33:37+00:00,"[cli] Make `vercel dev` command exit quickly (#6365)

Considering that it's a development environment, it's not important to wait for ongoing HTTP request connections to complete. Sometimes it takes a long time for all the shutdown operations to complete, which makes the command feel sluggish. So let's just `process.exit()` and exit quickly."
2f19949133a3b2f3b1165ac4ab7bf0661565f5a5,Nathan Rajlich,2021-06-18 20:10:30+00:00,GitHub,2021-06-18 20:10:30+00:00,[cli] Finish executing the original command after login with no credentials (#6364)
85fd2aed7e7921494ee68ce02741719f43d5e56e,Paco,2021-06-18 19:35:01+00:00,GitHub,2021-06-18 19:35:01+00:00,Update Next.js example favicon (#6367)
e659eecf485f395478d8820ce1af2d3618068cb0,Steven,2021-06-15 21:29:53+00:00,Steven,2021-06-15 21:29:53+00:00,"Publish Stable

 - @vercel/build-utils@2.11.1
 - vercel@23.0.1
 - @vercel/client@10.1.1
 - @vercel/frameworks@0.4.1
 - @vercel/node@1.11.1
 - @vercel/python@2.0.4
 - @vercel/routing-utils@1.11.2"
b428f7ff83428b0d63e13195182eb395dfc9ccbd,Steven,2021-06-15 20:37:28+00:00,Steven,2021-06-15 20:37:28+00:00,"Publish Canary

 - vercel@23.0.1-canary.4"
5eb133283d318625c690c6a59beda81548c81a1b,Nathan Rajlich,2021-06-15 12:49:18+00:00,GitHub,2021-06-15 12:49:18+00:00,"Remove `utils/go` (#6362)

This code now lives in its own repository, so the code in this repo is not being used.

https://github.com/vercel/go-bridge"
646c29600e72733cf3c53a260aa0827c81592c6a,Nathan Rajlich,2021-06-15 03:49:05+00:00,GitHub,2021-06-15 03:49:05+00:00,"[cgi] Remove `@vercel/cgi` Runtime (#6361)

This Runtime is very old, outdated, unmaintained, and has never been documented.

Additionally, it no longer compiles with the latest version of Go. So
rather than fixing it, let's just remove it since we don't want to
invest any more time into it."
469eb4315d7e665e9242a5c38daeb6daf8783921,Nathan Rajlich,2021-06-11 02:14:57+00:00,GitHub,2021-06-11 02:14:57+00:00,"[cli] Update ""open"" to v8.2.0 (#6348)

Fixes an issue where the bundled `xdg-open` script would not be used."
6dc54d0d64d07508fc0f34e3572f6e82f88b7cd3,JJ Kasper,2021-06-08 16:38:01+00:00,JJ Kasper,2021-06-08 16:38:01+00:00,"Publish Canary

 - @vercel/build-utils@2.11.1-canary.1
 - vercel@23.0.1-canary.3
 - @vercel/client@10.1.1-canary.1
 - @vercel/frameworks@0.4.1-canary.1
 - @vercel/routing-utils@1.11.2-canary.1"
adc84d5148ffeda4dbb65788eb87b0f8c271f661,JJ Kasper,2021-06-08 16:35:31+00:00,GitHub,2021-06-08 16:35:31+00:00,Fix check: true beforeFiles order (#6337)
88642b1ce8793f69c9e6ea373825ce187532e6d6,Nathan Rajlich,2021-06-07 22:13:58+00:00,GitHub,2021-06-07 22:13:58+00:00,"[cli] Print login URL to terminal (#6336)

In some cases (i.e. when SSH'd to a remote machine) the `open` command will not work reliably. So we need to print the URL to the user as a fallback for those cases when the web browser is not automatically opened.

This also moves where `tokenName` is specified to be in the ""verify"" endpoint, so that it does not need to be part of the URL that gets printed to the user.

<img width=""738"" alt=""Screen Shot 2021-06-07 at 2 12 47 PM"" src=""https://user-images.githubusercontent.com/71256/121089239-b5452d00-c79b-11eb-85b2-0e45b817dff0.png"">"
4b8d2075338ef842d98fddbb07b2cbd85472c4ad,Steven,2021-06-07 18:45:36+00:00,GitHub,2021-06-07 18:45:36+00:00,[cli] Warn when vercel.json uses `has` (#6327)
36fe5cc4d16c6f3fd555b2f38a7bbdaa2ee96152,Steven,2021-06-07 13:31:51+00:00,GitHub,2021-06-07 13:31:51+00:00,[test] Fix corrupt bmp test (#6328)
370b0dbed283d9b30b465f17269f71d6a6e1decb,JJ Kasper,2021-06-06 20:24:50+00:00,JJ Kasper,2021-06-06 20:24:50+00:00,"Publish Canary

 - vercel@23.0.1-canary.2
 - @vercel/node@1.11.1-canary.0"
cc7a82fb0a76defd78d3d3cb947377d698cde9b5,JJ Kasper,2021-06-06 20:22:56+00:00,GitHub,2021-06-06 20:22:56+00:00,[node] Update nft to 0.13.1 (#6333)
6eea26c39edd8ac911c9a74096b584854a280bf4,Markoz Pea,2021-06-04 20:43:39+00:00,GitHub,2021-06-04 20:43:39+00:00,"[cli] Convert `vc alias` to TS (#6325)

* refactor: Remove unncessary file

* feat(cli/alias): Migration to TS

* refactor(cli/alias): Add a line break

* refactor(cli/alias): Remove unnecesary code

* feat(cli): Add `Paginationoptions` type to `pagination`

* feat(cli/commands): Rewrite th `alias ls` command to TS

* refactor: Remove unncessary code

* feat: Create helper function for `getSafeAlias`

* refactor: Remove unnecessary code

* feat: Remove parameter generic, ""null"" for the fetch

* feat(cli/alias): Rewritten in full TS

* feat: Add Partial to opts

* refactor: Remove comment @ts-ignore

* feat: Add Partial to opts

* feat: Only should be return `alias.uid`

* refactor: Remove `Alias` type from of the parameter `id`

* refactor: Remove destructuring from alias object

* refactor: Remove unnecessary code

* feat: Rename `created` property to `createdAt` of number type

* refactor: Move getSafeAlias function in the same file

* refactor: Simplifying code

* refactor: Intentation did not affect diff on git

* Add null back to type

Co-authored-by: Steven <steven@ceriously.com>"
b8bfae7840b7e2e1cd2ddc0640836b0639c0032d,Nathan Rajlich,2021-06-04 19:48:03+00:00,GitHub,2021-06-04 19:48:03+00:00,"[cli] Fix `vc logout` command when using Team scope (#6322)

Fixes logout command not working when switched to a Team scope:

```
$ vc login
$ vc switch $some_team
$ vc logout
Failed during logout
```"
dc6a0a1cbb9953d62d3f40d5b44d9f3b2b3339a0,Nathan Rajlich,2021-06-04 18:33:49+00:00,GitHub,2021-06-04 18:33:49+00:00,"[cli] Upgrade token scopes in `vc switch` command (#6323)

Pass the `Authorization` request header to the verify endpoint so that the current auth token will be upgraded with the new scope.

[ch22273]"
a6807c9d212ce8cd0a4205d559b534de34636161,Steven,2021-06-01 18:35:09+00:00,Steven,2021-06-01 18:35:09+00:00,"Publish Canary

 - vercel@23.0.1-canary.1
 - @vercel/python@2.0.4-canary.0"
c628090d084fc9e033d154b4792757102d933666,Steven,2021-06-01 18:31:20+00:00,GitHub,2021-06-01 18:31:20+00:00,"[cli] Fix `vc projects rm` race condition (#6306)

The call to `GET /projects/info` is used to check existence but it can cause a race condition if the project was removed before the `DELETE /v2/projects` is called.

Instead, we rely on the response from `DELETE /v2/projects` to determine if the project exists or not.

This will also allow us to remove a legacy API endpoint in the future (see related API PR)"
4e0b291ed13335d1d0bc5a43351320eeb76beb67,Hydrophobefireman,2021-06-01 13:15:06+00:00,GitHub,2021-06-01 13:15:06+00:00,[python] Remove imports from werkzeug._compat (#6283)
ee0bc9b0c86b2d840d8afb7a318bf4e2aa17b61e,JJ Kasper,2021-05-26 18:44:39+00:00,JJ Kasper,2021-05-26 18:44:39+00:00,"Publish Canary

 - @vercel/build-utils@2.11.1-canary.0
 - vercel@23.0.1-canary.0
 - @vercel/client@10.1.1-canary.0
 - @vercel/frameworks@0.4.1-canary.0
 - @vercel/routing-utils@1.11.2-canary.0"
e516c1f49f4008fd89c7165feaf707ee0fb320d0,JJ Kasper,2021-05-26 17:50:51+00:00,GitHub,2021-05-26 17:50:51+00:00,Ensure beforeFiles rewrites come after redirects when continuing (#6289)
01f53f36fcb844eacd70ce2f500161f334b26489,JJ Kasper,2021-05-25 22:46:28+00:00,GitHub,2021-05-25 22:46:28+00:00,"[routing-utils] Ensure header key value casing is normalized (#6284)

This ensures we normalize header `key` values in `has` items to be lower-case as the proxy currently only matches against the lower-case variant. Updated superstatic tests to ensure the header key is normalized correctly. 

### Related Issues

[related thread](https://vercel.slack.com/archives/C01N3RWTE5V/p1621937306006400)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
f2d396caae02969f2520c08ff6504ddaec24c83d,Nathan Rajlich,2021-05-25 21:56:11+00:00,Nathan Rajlich,2021-05-25 21:56:11+00:00,"Publish Stable

 - @vercel/build-utils@2.11.0
 - vercel@23.0.0
 - @vercel/client@10.1.0
 - @vercel/frameworks@0.4.0
 - @vercel/node@1.11.0
 - @vercel/python@2.0.3
 - @vercel/routing-utils@1.11.1"
001f2f60b8ddcd01699d2aeb96fc98ba077b780e,Matheus Fernandes,2021-05-25 20:27:32+00:00,GitHub,2021-05-25 20:27:32+00:00,"Use proper Apache License format (#6189)

The existing LICENSE file was missing the Appendix, and also
used weird formatting. Now it's an exact copy of the original:

https://www.apache.org/licenses/LICENSE-2.0.txt."
78ca930287e11473d9f3351036d051021db0b6e2,Nathan Rajlich,2021-05-25 20:18:14+00:00,GitHub,2021-05-25 20:18:14+00:00,"[cli] Show user's name in `vc switch` command (#6288)

This more closely matches the Team picker on vercel.com.

Will still show ""email"" if no ""name"" is defined."
b03e18df12a7673b0016aff432a0fcac1b523ebe,Nathan Rajlich,2021-05-25 18:07:16+00:00,Nathan Rajlich,2021-05-25 18:07:16+00:00,"Publish Canary

 - vercel@22.0.2-canary.7
 - @vercel/python@2.0.3-canary.0"
3a6b8b072ce3532f7ecfd46f2e634378de54089c,Nathan Rajlich,2021-05-25 18:03:06+00:00,GitHub,2021-05-25 18:03:06+00:00,"[cli] Reauthenticate scopes with limited access in `vc switch` (#6280)

In the `vc switch` command, if your current access token results in
""limited"" Team information being returned, then show a lock emoji
next to the team/user name in the select input.

When a locked scope is selected, then pre-emptively prompt the
user to re-authenticate using a valid login method in relation to
the desired scope.

https://user-images.githubusercontent.com/71256/119441172-87abae80-bcda-11eb-801a-cb6837bae353.mov

[ch21964]"
d480cd6bbd378290db1be38373a4971b902faad2,Steven,2021-05-24 23:16:02+00:00,GitHub,2021-05-24 23:16:02+00:00,"[cli] Bump codecov to 3.8.2 (#6279)

Closes #5814"
181b624bf4f4753cf52027148f0321253670e253,Nathan Rajlich,2021-05-24 22:16:24+00:00,GitHub,2021-05-24 22:16:24+00:00,"[cli] Add SAML reauthentication logic when using different scope (#6263)

When the API returns a SAML error, then show the proper reauthentication prompt depending on the scope being requested:

Team with SAML enforced, shows only SSO login option:

<img width=""476"" alt=""Screen Shot 2021-05-24 at 1 50 29 PM"" src=""https://user-images.githubusercontent.com/71256/119406131-31694c00-bc97-11eb-858a-52e5fe7052d1.png"">

Team with SAML enabled, but not enforced, prompts with all login methods:

<img width=""352"" alt=""Screen Shot 2021-05-24 at 1 50 36 PM"" src=""https://user-images.githubusercontent.com/71256/119406134-3201e280-bc97-11eb-9166-60fbfec47ee0.png"">

Team without SAML enabled, or User scope, shows prompt with SSO option removed:

<img width=""366"" alt=""Screen Shot 2021-05-24 at 1 50 44 PM"" src=""https://user-images.githubusercontent.com/71256/119406137-3201e280-bc97-11eb-8c5c-b88eb9983500.png"">

[ch21964]"
200495e4ce8a1a71168f34d6aacc4782a3330907,Nathan Rajlich,2021-05-24 22:14:55+00:00,GitHub,2021-05-24 22:14:55+00:00,"[cli] Use `ts-eager` to execute build script (#6278)

* [cli] Use `ts-eager` to execute build script

* Use `node -r ts-eager/register` to workaround Windows issue"
9178f14c40f0bfa54590f5bc560c599ba4549220,Steven,2021-05-24 20:46:49+00:00,Steven,2021-05-24 20:46:49+00:00,"Publish Stable

 - @vercel/python@2.0.2"
9a790f53526d59849d75a668cdfb02a5b8b578a9,Nathan Rajlich,2021-05-24 20:38:55+00:00,GitHub,2021-05-24 20:38:55+00:00,"[cli] Set `tokenName` query param for Git provider login methods (#6277)

We're not currently setting the `tokenName` when logging in via a
Git provider, so the name becomes the default ""Website"" one which
is confusing / incorrect."
33d8be7f8f412a1a1b850db06dee11543aef001e,Steven,2021-05-24 20:26:01+00:00,GitHub,2021-05-24 20:26:01+00:00,"[cli] Fix `vc logout` retry (#6276)

* [cli] Fix `vc logout` retry

* Fix logout message"
82aa86b786d71698282509df3ef43c63ea45747b,JJ Kasper,2021-05-24 19:49:31+00:00,GitHub,2021-05-24 19:49:31+00:00,"Apply dependabot changes (#6275)

* Bump elliptic in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [elliptic](https://github.com/indutny/elliptic) from 6.5.2 to 6.5.4.
- [Release notes](https://github.com/indutny/elliptic/releases)
- [Commits](https://github.com/indutny/elliptic/compare/v6.5.2...v6.5.4)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump node-fetch from 2.6.0 to 2.6.1 in /api

Bumps [node-fetch](https://github.com/bitinn/node-fetch) from 2.6.0 to 2.6.1.
- [Release notes](https://github.com/bitinn/node-fetch/releases)
- [Changelog](https://github.com/node-fetch/node-fetch/blob/master/docs/CHANGELOG.md)
- [Commits](https://github.com/bitinn/node-fetch/compare/v2.6.0...v2.6.1)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump ssri from 6.0.1 to 6.0.2 in /examples/blitzjs

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump hosted-git-info from 2.8.8 to 2.8.9 in /examples/angular

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump hosted-git-info from 2.8.8 to 2.8.9 in /examples/blitzjs

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump ssri in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump ssri in /packages/cli/test/dev/fixtures/04-create-react-app

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump ssri in /packages/cli/test/dev/fixtures/03-aurelia

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump hosted-git-info in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump url-parse in /packages/cli/test/dev/fixtures/04-create-react-app

Bumps [url-parse](https://github.com/unshiftio/url-parse) from 1.4.7 to 1.5.1.
- [Release notes](https://github.com/unshiftio/url-parse/releases)
- [Commits](https://github.com/unshiftio/url-parse/compare/1.4.7...1.5.1)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump url-parse in /packages/cli/test/dev/fixtures/03-aurelia

Bumps [url-parse](https://github.com/unshiftio/url-parse) from 1.4.7 to 1.5.1.
- [Release notes](https://github.com/unshiftio/url-parse/releases)
- [Commits](https://github.com/unshiftio/url-parse/compare/1.4.7...1.5.1)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump handlebars in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [handlebars](https://github.com/wycats/handlebars.js) from 4.7.6 to 4.7.7.
- [Release notes](https://github.com/wycats/handlebars.js/releases)
- [Changelog](https://github.com/handlebars-lang/handlebars.js/blob/master/release-notes.md)
- [Commits](https://github.com/wycats/handlebars.js/compare/v4.7.6...v4.7.7)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump lodash in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [lodash](https://github.com/lodash/lodash) from 4.17.15 to 4.17.21.
- [Release notes](https://github.com/lodash/lodash/releases)
- [Commits](https://github.com/lodash/lodash/compare/4.17.15...4.17.21)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump hosted-git-info in /packages/cli/test/dev/fixtures/03-aurelia

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump hosted-git-info

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump lodash in /packages/cli/test/dev/fixtures/03-aurelia

Bumps [lodash](https://github.com/lodash/lodash) from 4.17.15 to 4.17.21.
- [Release notes](https://github.com/lodash/lodash/releases)
- [Commits](https://github.com/lodash/lodash/compare/4.17.15...4.17.21)

Signed-off-by: dependabot[bot] <support@github.com>

* Bump url-parse in /packages/cli/test/dev/fixtures/02-angular-node

Bumps [url-parse](https://github.com/unshiftio/url-parse) from 1.4.7 to 1.5.1.
- [Release notes](https://github.com/unshiftio/url-parse/releases)
- [Commits](https://github.com/unshiftio/url-parse/compare/1.4.7...1.5.1)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Co-authored-by: Steven <steven@ceriously.com>"
6288d5ef434558c37cf242b4e842ee8444f74f89,Steven,2021-05-24 17:37:57+00:00,Steven,2021-05-24 17:37:57+00:00,"Publish Canary

 - vercel@22.0.2-canary.6
 - @vercel/client@10.0.1-canary.5
 - @vercel/node@1.10.1-canary.2
 - @vercel/python@2.0.2-canary.0"
00a97b7ae24e5dbd3ef53d1ce850da0be3fc2e22,Steven,2021-05-24 17:34:28+00:00,GitHub,2021-05-24 17:34:28+00:00,[node] Bump nft to 0.12.2 (#6274)
a19fb3aa0ffc028a64fae6e10bc4ee0489dd0da1,Steven,2021-05-24 15:41:57+00:00,GitHub,2021-05-24 15:41:57+00:00,"[python] Fix installRequirement to use explicit version (#6272)

* [python] Fix installRequirement to use explicit version

* Remove `--upgrade`"
93fae76f9c76b7cd0e050570be09c491d889c38b,Nathan Rajlich,2021-05-21 20:53:13+00:00,GitHub,2021-05-21 20:53:13+00:00,[cli] Simplify `emoji` module (#6260)
e5131d55575096beb764e11ae2ff5e19ecaf940e,Nathan Rajlich,2021-05-21 19:21:38+00:00,GitHub,2021-05-21 19:21:38+00:00,"[cli] Update `NowConfig` references to `VercelConfig` (#6256)

The `NowConfig` interface is deprecated."
930063638c4ddeb5ed475269a5133d39e040a182,Nathan Rajlich,2021-05-21 18:36:58+00:00,GitHub,2021-05-21 18:36:58+00:00,[cli] Refactor `vc logs` command (#6259)
7b509ae6728cf5470ec961a1984da8a5c4a6644c,Nathan Rajlich,2021-05-20 18:19:38+00:00,GitHub,2021-05-20 18:19:38+00:00,"[cli] Refactor `vc switch` command (#6257)

Refactors the `vc switch` command to more closely match how the team picker works on the Vercel dashboard:

 * Converts to TypeScript
 * Adds separator between user scope and team scopes
 * Sorts teams by name
 * No longer places the current scope at the top of the list (but the current scope is still selected by default)"
711da37771c688a1c2c63d9ec43c8963db24089e,Nathan Rajlich,2021-05-20 17:30:33+00:00,GitHub,2021-05-20 17:30:33+00:00,[cli] Refactor `vc inspect` command (#6258)
5e50b9699447a3a13707aa3577b6b7200e6ec2c5,Steven,2021-05-13 20:40:36+00:00,Steven,2021-05-13 20:40:36+00:00,"Publish Canary

 - vercel@22.0.2-canary.5
 - @vercel/node@1.10.1-canary.1"
35d2f5950f7c5d180f13bf07dc0ef5c51bef02de,Steven,2021-05-13 20:22:58+00:00,GitHub,2021-05-13 20:22:58+00:00,[node] Bump nft to 0.12.0 (#6229)
37f969416ce0aa4b5c85539c1d7b19973fa846c4,Steven,2021-05-10 18:01:41+00:00,Steven,2021-05-10 18:01:41+00:00,"Publish Canary

 - @vercel/build-utils@2.10.3-canary.4
 - vercel@22.0.2-canary.4
 - @vercel/client@10.0.1-canary.4
 - @vercel/node@1.10.1-canary.0"
75630e09825658760fb3ee6bfafcaa8d1112a3a6,Steven,2021-05-10 18:01:02+00:00,GitHub,2021-05-10 18:01:02+00:00,"[node] Bump nft to 0.11.2 (#6211)

* [node] Bump nft to 0.11.2

* Fix tests since node 10.x is discontinued"
038c228af412eb2aa9c3ec2eb05f0fac40fe89df,dependabot[bot],2021-05-07 20:48:18+00:00,GitHub,2021-05-07 20:48:18+00:00,"Bump hosted-git-info from 2.8.8 to 2.8.9 (#6200)

Bumps [hosted-git-info](https://github.com/npm/hosted-git-info) from 2.8.8 to 2.8.9.
- [Release notes](https://github.com/npm/hosted-git-info/releases)
- [Changelog](https://github.com/npm/hosted-git-info/blob/v2.8.9/CHANGELOG.md)
- [Commits](https://github.com/npm/hosted-git-info/compare/v2.8.8...v2.8.9)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
a17aaebba39bd73e925e586673bc813b6fbc3aee,dependabot[bot],2021-05-07 20:40:35+00:00,GitHub,2021-05-07 20:40:35+00:00,"Bump lodash from 4.17.19 to 4.17.21 (#6195)

Bumps [lodash](https://github.com/lodash/lodash) from 4.17.19 to 4.17.21.
- [Release notes](https://github.com/lodash/lodash/releases)
- [Commits](https://github.com/lodash/lodash/compare/4.17.19...4.17.21)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
c39ba31b4bb17f9a85b388cfd611a930963a40c7,dependabot[bot],2021-05-07 20:31:07+00:00,GitHub,2021-05-07 20:31:07+00:00,"Bump handlebars from 4.7.6 to 4.7.7 (#6196)

Bumps [handlebars](https://github.com/wycats/handlebars.js) from 4.7.6 to 4.7.7.
- [Release notes](https://github.com/wycats/handlebars.js/releases)
- [Changelog](https://github.com/handlebars-lang/handlebars.js/blob/master/release-notes.md)
- [Commits](https://github.com/wycats/handlebars.js/compare/v4.7.6...v4.7.7)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
91414d6f38bce7ffb3af105d0456201182502525,Nathan Rajlich,2021-05-06 22:43:22+00:00,GitHub,2021-05-06 22:43:22+00:00,"[build-utils] Remove `15-yarn-ignore-engines` test fixture (#6193)

It's failing during runtime, like here: https://github.com/vercel/vercel/runs/2520732314

With an error like so:

```
[GET] / 2021-05-06T20:02:55.411Z	undefined	ERROR	The gRPC
binary module was not installed. This may be fixed by running ""npm rebuild""
Original error: Cannot find module
'/var/task/node_modules/grpc/src/node/extension_binary/node-v83-linux-x64-glibc/grpc_node.node'
Require stack:
- /var/task/node_modules/grpc/src/grpc_extension.js
- /var/task/node_modules/grpc/src/client_interceptors.js
- /var/task/node_modules/grpc/src/client.js
- /var/task/node_modules/grpc/index.js
- /var/task/node_modules/google-gax/build/src/grpc.js
- /var/task/node_modules/google-gax/build/src/index.js
-
/var/task/node_modules/@google-cloud/scheduler/src/v1beta1/cloud_scheduler_client.js
- /var/task/node_modules/@google-cloud/scheduler/src/v1beta1/index.js
- /var/task/node_modules/@google-cloud/scheduler/src/index.js
- /var/task/index.js
- /var/task/___vc_launcher.js
- /var/runtime/UserFunction.js
- /var/runtime/index.js 2021-05-06T20:02:55.411Z	undefined	ERROR
Did you forget to add it to ""dependencies"" in `package.json`? RequestId:
2cdba37e-4bf4-4a2f-b443-4ebcc99fe308 Error: Runtime exited with error: exit
status 1 Runtime.ExitError
```

Because grpc is failing with NFT.

But also, the test is no longer necessary because we no longer support Node 8 which was what the original test intended https://github.com/vercel/now-builders/pull/463"
00bb723db3eb13c9c34c6d6fde9cb878b9c09394,Nathan Rajlich,2021-05-05 20:09:43+00:00,Nathan Rajlich,2021-05-05 20:09:43+00:00,"Publish Canary

 - @vercel/build-utils@2.10.3-canary.3
 - vercel@22.0.2-canary.3
 - @vercel/client@10.0.1-canary.3
 - @vercel/frameworks@0.3.3-canary.3"
65a97720b39d2db1e5f037ac7d5d4ea4455e5604,Nathan Rajlich,2021-05-05 20:08:26+00:00,GitHub,2021-05-05 20:08:26+00:00,"[cli] Refactor `vc login` command (#6185)

Refactors the CLI `vc login` command with the following features:

* Adds GitHub, GitLab and Bitbucket as login options
* Uses a ""list"" input to select which login method to use (same list as `vc init`)
* Support connecting SAML Profile to Vercel user during login"
88eaf6efab773e94790c5319c35bd09aa0d09155,Steven,2021-05-04 15:55:40+00:00,GitHub,2021-05-04 15:55:40+00:00,[examples] Update pusher example to use deploy button (#6183)
abf159d5e08164b88caa31cdb25d6843faade91a,Sam Ko,2021-05-04 14:48:14+00:00,GitHub,2021-05-04 14:48:14+00:00,"Update @ionic/angular devCommand (#6158)

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
a23879b507fc5daeb81710109c32467805336958,luc,2021-05-04 07:33:09+00:00,luc,2021-05-04 07:33:09+00:00,"Publish Canary

 - @vercel/build-utils@2.10.3-canary.2
 - vercel@22.0.2-canary.2
 - @vercel/client@10.0.1-canary.2
 - @vercel/frameworks@0.3.3-canary.2"
a713b9170b465b5f4510658227be2b780d024359,Luc Leray,2021-05-03 15:26:27+00:00,GitHub,2021-05-03 15:26:27+00:00,"[frameworks] Add placeholder to frameworks' dev command (#6168)

* adjust type

* add placeholders

* adjust unit test"
8fd57459a14f054749e157ea0becfa602d44d430,dependabot[bot],2021-05-02 00:29:19+00:00,GitHub,2021-05-02 00:29:19+00:00,"Bump ssri from 6.0.1 to 6.0.2 (#6132)

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
9a3dc8ed5f0addb1cceb4ff06774925cb17391d1,Markoz Pea,2021-05-02 00:28:34+00:00,GitHub,2021-05-02 00:28:34+00:00,"[dependencies] Bump husky from v3 to v6  (#6157)


Co-authored-by: Steven <steven@ceriously.com>"
c46dd8c556813444c65cec00515a83c3844fb897,dependabot[bot],2021-04-30 16:07:03+00:00,GitHub,2021-04-30 16:07:03+00:00,"Bump ssri from 6.0.1 to 6.0.2 in /examples/angular (#6131)

Bumps [ssri](https://github.com/npm/ssri) from 6.0.1 to 6.0.2.
- [Release notes](https://github.com/npm/ssri/releases)
- [Changelog](https://github.com/npm/ssri/blob/v6.0.2/CHANGELOG.md)
- [Commits](https://github.com/npm/ssri/compare/v6.0.1...v6.0.2)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
e28edc5c93418bd65f675dc841a2bf0cf52b4572,JJ Kasper,2021-04-29 16:03:01+00:00,JJ Kasper,2021-04-29 16:03:01+00:00,"Publish Canary

 - @vercel/build-utils@2.10.3-canary.1
 - vercel@22.0.2-canary.1
 - @vercel/client@10.0.1-canary.1
 - @vercel/frameworks@0.3.3-canary.1
 - @vercel/routing-utils@1.11.1-canary.1"
3fc4f64824eb566b6558316d39a7ae9ec5590b4f,JJ Kasper,2021-04-29 16:01:39+00:00,GitHub,2021-04-29 16:01:39+00:00,Replace regex lexer with minimal regex for named groups (#6171)
90e51287e985cbda77f6281e578d28e29805789e,Steven,2021-04-26 18:54:56+00:00,GitHub,2021-04-26 18:54:56+00:00,"[build-utils] Fix unit tests for Node.js version check (#6155)

Fixes unit tests since we throw now for Node.js 10 since April 20th.

https://vercel.com/changelog/node-js-10-is-being-deprecated"
6d8b10802c8e577a20762c8fb6e0f7b18991712d,JJ Kasper,2021-04-23 19:48:09+00:00,JJ Kasper,2021-04-23 19:48:09+00:00,"Publish Canary

 - @vercel/build-utils@2.10.3-canary.0
 - vercel@22.0.2-canary.0
 - @vercel/client@10.0.1-canary.0
 - @vercel/frameworks@0.3.3-canary.0
 - @vercel/routing-utils@1.11.1-canary.0"
1dd2ffd895b2f6ffd01b67c43220361d55c8e733,JJ Kasper,2021-04-23 18:20:49+00:00,GitHub,2021-04-23 18:20:49+00:00,"Ensure segments from only `has` are replaced (#6142)

This ensures that when segments are coming from only `has` items we still replace them correctly as they currently don't get replaced if the `source` doesn't have any segments as well. 

### Related Issues

x-ref: https://vercel.slack.com/archives/CLDDX2Y0G/p1619061783470000

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
e4d422a2d72c367ca14b5318404189ff29467b10,Steven,2021-04-22 19:07:42+00:00,Steven,2021-04-22 19:07:42+00:00,"Publish Stable

 - vercel@22.0.1"
bd55ad82123e722ac2c2df977b46e5f38eea8f50,Steven,2021-04-22 18:50:59+00:00,Steven,2021-04-22 18:50:59+00:00,"Publish Canary

 - vercel@22.0.1-canary.0"
6591dae1525d3c3fe26ebc95b2a62c5ee503fdb0,Nathan Rajlich,2021-04-22 18:40:11+00:00,GitHub,2021-04-22 18:40:11+00:00,"[cli] Update default auth config comment to say ""Vercel"" (#6140)"
a490faa496d8877e403d2edd69a4e8a6e70df283,Steven,2021-04-22 18:39:51+00:00,GitHub,2021-04-22 18:39:51+00:00,[cli] Fix SAML usage with `--token` (#6139)
8fe16f1b0a7b9488e2f7529cf6ab58e72383dda4,Steven,2021-04-22 17:35:07+00:00,GitHub,2021-04-22 17:35:07+00:00,"[cli] Fix `vercel login` command (#6138)

* Revert file symbol usage for login

* Add missing remove() to test"
bac19b66af163dd3fe90e29307f8069b2d21e45a,Steven,2021-04-21 20:57:38+00:00,Steven,2021-04-21 20:57:38+00:00,"Publish Stable

 - @vercel/build-utils@2.10.2
 - vercel@22.0.0
 - @vercel/client@10.0.0
 - @vercel/frameworks@0.3.2
 - @vercel/node@1.10.0
 - @vercel/routing-utils@1.11.0"
b58090a181f4722be0bbab50b41eed0de81653c9,Steven,2021-04-21 20:37:16+00:00,GitHub,2021-04-21 20:37:16+00:00,"[examples] Update deploy URL to use `main` (#6133)

CH-21338"
8c1b707f38ec360a989fdb177d9d4551f949a933,Steven,2021-04-21 19:18:08+00:00,Steven,2021-04-21 19:18:08+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.6
 - vercel@21.3.4-canary.13
 - @vercel/client@9.0.9-canary.7
 - @vercel/frameworks@0.3.2-canary.6"
4b4caccb3d790c891234c3a089b96dd980e94d0f,Steven,2021-04-21 19:07:39+00:00,GitHub,2021-04-21 19:07:39+00:00,"[cli] (Major) Remove deprecated `vc domains verify` command (#6130)

The command `vc domains verify` was deprecated in #4959 so we can remove it for the next major version."
102dc042213dcae24ff42f072bdfacb70b7d94c4,Steven,2021-04-15 14:50:25+00:00,GitHub,2021-04-15 14:50:25+00:00,Update CI badge (#6116)
8d96a57117ff3ce43fe8f37d322d84874d25f7ef,Nathan Rajlich,2021-04-15 14:11:13+00:00,GitHub,2021-04-15 14:11:13+00:00,"Update references of default branch to ""main"" (#6114)"
bf3a1fc832f0d131772f1728950c20c9ce2b6275,JJ Kasper,2021-04-14 18:34:55+00:00,JJ Kasper,2021-04-14 18:34:55+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.5
 - vercel@21.3.4-canary.12
 - @vercel/client@9.0.9-canary.6
 - @vercel/frameworks@0.3.2-canary.5
 - @vercel/routing-utils@1.10.2-canary.3"
d4db04207b19be0a2506c5cead707d8da9ce8f66,JJ Kasper,2021-04-14 16:24:33+00:00,GitHub,2021-04-14 16:24:33+00:00,"Ensure has segments are replaced in destination (#6059)

* Ensure has segments are replaced in destination

* update type

* Use regex lexar for gathering named groups from has

* Update to use shared repo for regex lexer

* apply suggestions

* remove regexr from .eslintignore"
9e5edd6c513d21356c1dea9b370cae03c78fc18e,Steven,2021-04-14 13:34:38+00:00,Steven,2021-04-14 13:34:38+00:00,"Publish Canary

 - vercel@21.3.4-canary.11
 - @vercel/node@1.9.2-canary.1"
09db5cc2a9d916633e0d92e8d6202da4e668d422,Steven,2021-04-13 23:25:41+00:00,GitHub,2021-04-13 23:25:41+00:00,"[node] Bump nft to 0.10.0 (#6109)

Bump nft to version [0.10.0](https://github.com/vercel/nft/releases/tag/0.10.0)"
b2653c457b7e979c9bcb2a09ccad94464814efd8,Steven,2021-04-13 20:04:20+00:00,Steven,2021-04-13 20:04:20+00:00,"Publish Canary

 - vercel@21.3.4-canary.10
 - @vercel/client@9.0.9-canary.5
 - @vercel/node@1.9.2-canary.0"
6617ace64779e79cb24d567214bbed4769931a5d,Steven,2021-04-13 19:26:29+00:00,GitHub,2021-04-13 19:26:29+00:00,"[cli] Replace ""mri"" with ""arg"" (#6108)

Replace a few usages of [mri](https://www.npmjs.com/package/mri) with [arg](https://www.npmjs.com/package/arg) which will ensure that unknown flags will throw instead of skip silently.

This also bumps `arg` to version 5.0.0 which has support for TS types."
b4bebb41bea34ac47d5124476dbbdc934ec6ee7d,Steven,2021-04-12 19:34:51+00:00,GitHub,2021-04-12 19:34:51+00:00,"[cli][client] Drop support for Node.js 10 (#6101)

Node.js 10 is about to reach EOL so we can drop CLI support in the next major release. We'll support 12+ going forward.

Node.js 12 needs `es2019` because it doesn't support the `es2020` features of optional chaining and nullish coalescing as seen from the [compatibility table](https://kangax.github.io/compat-table/es2016plus/#node12_11)."
40aaa0952fd0415f3317e79220db46d6b72b4838,Steven,2021-04-12 16:52:43+00:00,GitHub,2021-04-12 16:52:43+00:00,"[cli] Fix error usage before defined (#6099)

This PR fixes a couple regressions from #6016:

- Using `error` before its imported. [See index.js](https://github.com/vercel/vercel/pull/6016/files#diff-032eb615f83c504bbb0ec2dfae005b7cea1748c905270acfffe6be0ee3fef7acL3)
- Passing the incorrect params to `add()`. [See add.js](https://github.com/vercel/vercel/pull/6016/files#diff-ee72a76cd216b786bc71a05d76a1b3c760a73248e5b8363ec2f83dd1d46b63d7R39)

We should eventually move these files to TS to catch these types of bugs."
af6344209ca0939049a81079dce9c99a08c41ac4,Joe Haddad,2021-04-12 08:42:05+00:00,GitHub,2021-04-12 08:42:05+00:00,"[examples] Upgrade Next.js example (#6097)

This PR upgrades the Next.js example to resolve noisy install warnings, plus, it's quicker!"
7ccdc7baacc886f23807689f85bd5005649cbd54,Steven,2021-04-09 15:32:02+00:00,Steven,2021-04-09 15:32:02+00:00,"Publish Canary

 - vercel@21.3.4-canary.9"
363922dd1111d7b64692f43251bcd24da745c652,Steven,2021-04-08 22:21:56+00:00,GitHub,2021-04-08 22:21:56+00:00,[cli] Add `vc link` to `vc help` output (#6086)
a8aa08600b26551a3f389e6a63cb543003d2d307,Steven,2021-04-08 22:21:12+00:00,GitHub,2021-04-08 22:21:12+00:00,[cli] Improve error docs for `--scope` (#6085)
ea798e40af9e9074ebcab362e305bc6df923e167,Steven,2021-04-08 22:00:59+00:00,GitHub,2021-04-08 22:00:59+00:00,"[cli] Bump chalk and change ""update available"" color (#6084)

- Bump `chalk` to latest version https://github.com/chalk/chalk/releases
- Use black text instead of white text
- Use cyan background instead of red background


### Before
![before](https://user-images.githubusercontent.com/229881/114088378-f3e56680-9882-11eb-90e9-e628d4c1a397.png)

### After
![after](https://user-images.githubusercontent.com/229881/114088526-19727000-9883-11eb-870f-b8b7d45e7cc2.png)"
d9e0c44d3a0a0348e6abbe5162cd7910784aad7a,Steven,2021-04-08 19:24:37+00:00,Steven,2021-04-08 19:24:37+00:00,"Publish Canary

 - vercel@21.3.4-canary.8"
0a2d55d83d771fd534a7517357bdbcb207c3f552,Steven,2021-04-08 19:17:39+00:00,GitHub,2021-04-08 19:17:39+00:00,[cli] Update `vc env` messages (#6081)
b4cb2fc39102ab317425f0170de7149371d4fdba,Steven,2021-04-03 21:00:51+00:00,Steven,2021-04-03 21:00:51+00:00,"Publish Canary

 - vercel@21.3.4-canary.7"
ada5b35966b0193b7a6e534a02a80c9a318cbce2,Nathan Rajlich,2021-04-02 23:17:48+00:00,GitHub,2021-04-02 23:17:48+00:00,"[cli] Use updated SSO auth URL for login (#6063)

The `/registration` prefix is no longer necessary."
cc54d260a78680c715f2c2a00ca119a7dcd5deab,Steven,2021-04-02 16:05:55+00:00,Steven,2021-04-02 16:05:55+00:00,"Publish Canary

 - vercel@21.3.4-canary.6"
8147e75d89a34a99c7708cc22695ae52684507a1,Steven,2021-04-02 16:05:01+00:00,GitHub,2021-04-02 16:05:01+00:00,"[cli] (Major) Update `vc env` command (#6049)

### Changes

- Add support for Git Branch
- Use a single env type: ""encrypted""
- Remove unnecessary questions during `vc env add`


#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
c0bcc15d286b3d3c522c723e1416a8082b2e8826,Steven,2021-04-02 00:53:36+00:00,GitHub,2021-04-02 00:53:36+00:00,[examples] Update CRA go.mod (#6051)
43d42687590f6a39cec46419cd09c7ac43bc78b0,Nathan Rajlich,2021-04-01 19:36:09+00:00,GitHub,2021-04-01 19:36:09+00:00,"[cli] Make `vc whoami` not require team context (#6057)

If the user is signed in to a team with SAML enforced, but the
current token is not a SAML token, then `getScope()` will fail.

So add the option to opt-out of team information in `getScope()`
and use that new option in `vc whoami` since it doesn't require
team information."
3e91f446b468f9b39964c58a19e8033bfa08a2c4,Nathan Rajlich,2021-04-01 18:46:34+00:00,Nathan Rajlich,2021-04-01 18:46:34+00:00,"Publish Canary

 - vercel@21.3.4-canary.5"
bdb6e33b4127bcfc98938507bb2f22861badff57,Nathan Rajlich,2021-04-01 18:43:28+00:00,GitHub,2021-04-01 18:43:28+00:00,"[cli] Re-trigger SSO auth when a SAML error is encountered (#6053)

When the API returns a `saml: true` error, CLI will re-trigger the SSO
auth browser window so that the user can sign into their identity
provider again. Once the new token is received, it is saved to the
`auth.json` file (unless the token was specified via `--token`) for
future use."
2eb3d7ac5723cdbed72891488384354df53cc64c,Nathan Rajlich,2021-03-31 20:55:13+00:00,GitHub,2021-03-31 20:55:13+00:00,"[cli] Refactor to merge `NowContext` into `Client` (#6016)

This is a rather large refactor of the CLI codebase that merges the
`NowContext` object into the `Client` class.

There's a few reasons to do this:

  1. Nearly every sub-command was creating its own `Client` instance, leading to a lot of duplicated code. It makes more sense to create one instance and pass it to every sub-command, which deletes a lot of code as well.
  2. There's a lot of overlap between `NowContext` and the props on the `Client` class, so it was a relatively easy transition.
  3. The main reason is so the same `authConfig` is used throughout the program lifecycle. This paves the way for updating the token mid-flight when i.e. a SAML token has expired. In a follow-up PR, CLI will handle that scenario gracefully by re-triggering the SAML auth flow."
ec24d0f39a55661a6dab22cfeed317234a082f48,dependabot[bot],2021-03-30 00:08:10+00:00,GitHub,2021-03-30 00:08:10+00:00,"Bump elliptic in /packages/cli/test/dev/fixtures/03-aurelia (#5943)

Bumps [elliptic](https://github.com/indutny/elliptic) from 6.5.2 to 6.5.4.
- [Release notes](https://github.com/indutny/elliptic/releases)
- [Commits](https://github.com/indutny/elliptic/compare/v6.5.2...v6.5.4)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: Steven <steven@ceriously.com>"
75976a441d27ec02408d54c97e10e44773e4d2c0,dependabot[bot],2021-03-29 23:26:38+00:00,GitHub,2021-03-29 23:26:38+00:00,"Bump y18n in /packages/cli/test/dev/fixtures/03-aurelia (#6048)

Bumps [y18n](https://github.com/yargs/y18n) from 3.2.1 to 3.2.2.
- [Release notes](https://github.com/yargs/y18n/releases)
- [Changelog](https://github.com/yargs/y18n/blob/master/CHANGELOG.md)
- [Commits](https://github.com/yargs/y18n/commits)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
905b67512cfa0c0ce25b514555def88cd8f43226,Paco,2021-03-29 22:15:36+00:00,GitHub,2021-03-29 22:15:36+00:00,"[examples] Commit yarn.lock for all package.json frameworks (#6036)

* Add yarn.lock to all examples

* Add missing yarn lock

* Deploy all examples after yarn.lock changes

* Remove package-lock

* Update ionic angular to working version

* Skip libCheck to make ionic-angular build

* Rename nowignore to vercelignore, remove yarn.lock from ignore

* Revert zola changes"
0564690f4906ac413daaddf3e9228ca1e2fe2f25,Steven,2021-03-26 23:49:43+00:00,GitHub,2021-03-26 23:49:43+00:00,[examples] Add yarn.lock to blitz (#6037)
364b832565c72316c191cfdcc05e6db6d505b605,Steven,2021-03-23 18:33:55+00:00,GitHub,2021-03-23 18:33:55+00:00,"[test] Add next image bmp test (#6024)

This was fixed in proxy PR 1963 so we can add a test here to confirm `next dev` and the deployment work the same way."
41ce96a2db4a28392e66b12188e2a493a526ebf3,Nathan Rajlich,2021-03-23 00:52:18+00:00,Nathan Rajlich,2021-03-23 00:52:18+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.4
 - vercel@21.3.4-canary.4
 - @vercel/client@9.0.9-canary.4
 - @vercel/frameworks@0.3.2-canary.4
 - @vercel/routing-utils@1.10.2-canary.2"
a4b439715136cf313c955f158a30f52e521ae290,Connor Davis,2021-03-23 00:51:30+00:00,GitHub,2021-03-23 00:51:30+00:00,"[routing-utils] Add schema descriptions to routing schema (#6023)

Our automated documentation requires descriptions in the schema

#### Tests

- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer"
473159f1da1792badc8e87d6deef28db3ffbbdd8,dav-is,2021-03-22 20:45:42+00:00,dav-is,2021-03-22 20:45:42+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.3
 - vercel@21.3.4-canary.3
 - @vercel/client@9.0.9-canary.3
 - @vercel/frameworks@0.3.2-canary.3
 - @vercel/routing-utils@1.10.2-canary.1"
c6267b5accd9144d51f7e71d6e7c23591155c2e0,Connor Davis,2021-03-22 20:37:27+00:00,GitHub,2021-03-22 20:37:27+00:00,"[routing-utils] Add has type host to schema (#6022)

We need to support `{ ""source"": ""/"", ""has"": { ""type"", ""host"", ""value"": ""vercel.com"" }, ""destination"": ""/prod"" }`

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR

CH-19565"
8a919043a209aacf21ce866d34401fc528a23860,Steven,2021-03-19 22:21:46+00:00,GitHub,2021-03-19 22:21:46+00:00,"[frameworks] Fix ""svelte"" detection and Dev Command (#6014)

- We were matching any project using [sirv](https://www.npmjs.com/package/sirv) which was too broad.
- Hot reloading didn't work because default dev command was incorrect.

This PR updates the framework detection and default dev command to match the example:

https://github.com/vercel/vercel/blob/c2e7be80e869137d3dd482e017c9e65a1431225a/examples/svelte/package.json#L6"
c2e7be80e869137d3dd482e017c9e65a1431225a,Steven,2021-03-18 16:12:43+00:00,Steven,2021-03-18 16:12:43+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.2
 - vercel@21.3.4-canary.2
 - @vercel/client@9.0.9-canary.2
 - @vercel/frameworks@0.3.2-canary.2"
d95175253afcb1298029fb203db06a924e29e4c0,Steven,2021-03-18 16:11:30+00:00,GitHub,2021-03-18 16:11:30+00:00,[frameworks] Add envPrefix property (#6007)
e2106d12f605a9bdaa2ebef54f182ef150deecb9,Steven,2021-03-12 16:14:27+00:00,Steven,2021-03-12 16:14:27+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.1
 - vercel@21.3.4-canary.1
 - @vercel/client@9.0.9-canary.1
 - @vercel/frameworks@0.3.2-canary.1"
84f95465f7b3f17307098006c949b9ea1dbe53ff,Steven,2021-03-12 16:10:44+00:00,GitHub,2021-03-12 16:10:44+00:00,"[frameworks] Add static 404 route to CRA (#5972)

Since CRA is an SPA (all routes fallback to index.html), we can't do a proper custom 404.

But we can do a custom 404 when accessing the static directory, for example `/static/foo.html`.

To handle something like `/foo`, the user needs to do a client-side routing 404 like this example: https://reactrouter.com/web/example/no-match


###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
0ae74546a6cc62bf0d85f90347ceb82da0f380c8,Nathan Rajlich,2021-03-11 23:29:07+00:00,GitHub,2021-03-11 23:29:07+00:00,[cli] Add SAML Single Sign-On to `vercel login` (#5957)
be2ae2c5390f5478ffcb186d85c1bb4f73a74c15,JJ Kasper,2021-03-11 20:00:10+00:00,JJ Kasper,2021-03-11 20:00:10+00:00,"Publish Canary

 - @vercel/build-utils@2.10.2-canary.0
 - vercel@21.3.4-canary.0
 - @vercel/client@9.0.9-canary.0
 - @vercel/frameworks@0.3.2-canary.0
 - @vercel/routing-utils@1.10.2-canary.0"
4969a65209e44b24c7810fc08a60447234960583,JJ Kasper,2021-03-11 19:44:15+00:00,GitHub,2021-03-11 19:44:15+00:00,"[routing-utils] Add has route field to schema (#5919)

### Related Issues

x-ref: https://github.com/vercel/next.js/pull/22341
x-ref: https://github.com/vercel/next.js/issues/22345

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
7275878b2bd1ecbaca6e2b6264fc71017eb78924,ernestd,2021-03-10 19:45:52+00:00,GitHub,2021-03-10 19:45:52+00:00,[frameworks] Update demo URLs to use `*.examples.vercel.com` (#5960)
53d429e3f502419769835af5f4ecc223399a8998,Nathan Rajlich,2021-03-08 23:59:42+00:00,GitHub,2021-03-08 23:59:42+00:00,"[cli] Convert `vercel login` command to TypeScript (#5951)

* WIP convert `vc login` command to TypeScript

* Fix build"
3f1384bd1a80305f05d1f2b9ad46027960b85ea8,Nathan Rajlich,2021-03-08 21:48:18+00:00,GitHub,2021-03-08 21:48:18+00:00,"[cli] Remove ""micro"" dependency (#5950)"
703b2649bc041b0be002db9599301f1a04ffba38,Steven,2021-03-08 21:08:16+00:00,Steven,2021-03-08 21:08:16+00:00,"Publish Stable

 - @vercel/build-utils@2.10.1
 - @vercel/cgi@1.0.7
 - vercel@21.3.3
 - @vercel/client@9.0.8
 - @vercel/frameworks@0.3.1
 - @vercel/go@1.2.2
 - @vercel/node-bridge@1.3.3
 - @vercel/node@1.9.1
 - @vercel/python@2.0.1
 - @vercel/routing-utils@1.10.1
 - @vercel/ruby@1.2.6"
2497909d9b3442affc96083d2470e6957c5f7487,Steven,2021-03-08 18:40:30+00:00,Steven,2021-03-08 18:40:30+00:00,"Publish Canary

 - vercel@21.3.3-canary.3
 - @vercel/node@1.9.1-canary.4"
0ad45c8b13c301aee0031a3a4c91b4c7bb9c7a8e,Steven,2021-03-08 18:11:51+00:00,GitHub,2021-03-08 18:11:51+00:00,"[node] Fix `tsCompile` uninitialized error (#4275)

This PR fixes an error that happens when `includeFiles` has `.ts` files:

```
ReferenceError: Cannot access 'tsCompile' before initialization
```

~~However its not clear what the expected behavior is. Should the `.ts` files be compiled to `.js` or should they be considered assets and included as-is?~~

We will assume that `includeFiles` is only for assets and thus `.ts` files should not be compiled, they're included as-is.

[ch20529]"
9acf8e17377dd8050f7ea5c2752e1aa368068e59,Steven,2021-03-08 15:15:42+00:00,Steven,2021-03-08 15:15:42+00:00,"Publish Canary

 - @vercel/build-utils@2.10.1-canary.0
 - @vercel/cgi@1.0.7-canary.1
 - vercel@21.3.3-canary.2
 - @vercel/client@9.0.8-canary.0
 - @vercel/frameworks@0.3.1-canary.0
 - @vercel/go@1.2.2-canary.0
 - @vercel/node-bridge@1.3.3-canary.0
 - @vercel/node@1.9.1-canary.3
 - @vercel/python@2.0.1-canary.0
 - @vercel/routing-utils@1.10.1-canary.0
 - @vercel/ruby@1.2.6-canary.1"
f5f07c5d1597b7f9b9c00d3aa330d56b77de2969,Steven,2021-03-08 15:08:09+00:00,GitHub,2021-03-08 15:08:09+00:00,"[all] Remove more ""now"" references (#5944)

Follow up to #5928 to remove a few more ""now"" references and replace with ""vercel"" where appropriate."
c0d22cf78d034c4acd01cde942e645fd4d1f5a97,dependabot[bot],2021-03-07 18:43:02+00:00,GitHub,2021-03-07 18:43:02+00:00,"Bump websocket-extensions (#5933)

Bumps [websocket-extensions](https://github.com/faye/websocket-extensions-node) from 0.1.3 to 0.1.4.
- [Release notes](https://github.com/faye/websocket-extensions-node/releases)
- [Changelog](https://github.com/faye/websocket-extensions-node/blob/master/CHANGELOG.md)
- [Commits](https://github.com/faye/websocket-extensions-node/compare/0.1.3...0.1.4)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
c9811225ad66e0a53e10761715751ae0b5e5c6fa,dependabot[bot],2021-03-07 04:52:06+00:00,GitHub,2021-03-07 04:52:06+00:00,"Bump ini in /packages/cli/test/dev/fixtures/04-create-react-app (#5934)

Bumps [ini](https://github.com/isaacs/ini) from 1.3.5 to 1.3.8.
- [Release notes](https://github.com/isaacs/ini/releases)
- [Commits](https://github.com/isaacs/ini/compare/v1.3.5...v1.3.8)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
68eeb6a5bda30cbb39a1c34b2f64f2c8c2c20bd3,dependabot[bot],2021-03-07 04:49:01+00:00,GitHub,2021-03-07 04:49:01+00:00,"Bump elliptic in /packages/cli/test/dev/fixtures/04-create-react-app (#5935)

Bumps [elliptic](https://github.com/indutny/elliptic) from 6.5.2 to 6.5.4.
- [Release notes](https://github.com/indutny/elliptic/releases)
- [Commits](https://github.com/indutny/elliptic/compare/v6.5.2...v6.5.4)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
ec10f326c1bbde0b0f7040d17107fba8d8e30ef0,dependabot[bot],2021-03-07 04:48:22+00:00,GitHub,2021-03-07 04:48:22+00:00,"Bump ini in /packages/cli/test/dev/fixtures/03-aurelia (#5936)

Bumps [ini](https://github.com/isaacs/ini) from 1.3.5 to 1.3.8.
- [Release notes](https://github.com/isaacs/ini/releases)
- [Commits](https://github.com/isaacs/ini/compare/v1.3.5...v1.3.8)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
cfae7ec3c291d1802fb6eec6642a0ebf792fb71d,ernestd,2021-03-06 00:55:30+00:00,GitHub,2021-03-06 00:55:30+00:00,"[all] Remove now prefix in packages (#5928)

* remove prefix from codeowners

* remove references from ignore files

* Remove prefix from package json and tests

* Add run js without prefixes

* Rename package folders

* Delete auto generated test files

* Remove now-node in integration test

* Put back deleted vercel json files

* Remove eol

* Add styfle suggestion to comment in utils/run.js

Co-authored-by: Steven <steven@ceriously.com>"
85b253cdd063f2d00c4742a9650ecc760619fd40,Steven,2021-03-05 21:58:30+00:00,Steven,2021-03-05 21:58:30+00:00,"Publish Canary

 - vercel@21.3.3-canary.1
 - @vercel/node@1.9.1-canary.2"
a6e4f8d8bbe89b77be6503de3800a70b4aa4e057,Steven,2021-03-05 21:56:04+00:00,GitHub,2021-03-05 21:56:04+00:00,"[node] Bump nft to 0.9.6 (#5932)

Bump nft to version [0.9.6](https://github.com/vercel/nft/releases/tag/0.9.6)"
9c7e27b55104953d77c8cab4b4399bb60244ad5a,Steven,2021-03-05 19:41:47+00:00,GitHub,2021-03-05 19:41:47+00:00,"[tests] Install Go in GH Actions Workflows (#5931)

We need to make CI explicit about the lowest common denominator for Go Version like we do with the Node.js Version.

This will add about 10 seconds to CI which is negligible to the 8 min+ CI currently."
60b882c493d3301c95d1ba2d29b6d482f37758f4,Mark Glagola,2021-03-04 22:20:22+00:00,GitHub,2021-03-04 22:20:22+00:00,use vercel.app instead of now.sh for integration test (#5929)
21072b1f1f942955dc34eaca311b1df9e402cfb9,Steven,2021-03-03 22:28:21+00:00,Steven,2021-03-03 22:28:21+00:00,"Publish Canary

 - vercel@21.3.3-canary.0
 - @vercel/node@1.9.1-canary.1"
a186ad643a13e507fe824319498a523b9c9daf71,Steven,2021-03-03 22:27:21+00:00,GitHub,2021-03-03 22:27:21+00:00,[node] Update tests for Node.js 14 (#5925)
4c0055eaf0464c133fbff2f7c19bbafc1743a9c9,Nathan Rajlich,2021-03-02 19:03:53+00:00,Nathan Rajlich,2021-03-02 19:03:53+00:00,"Publish Stable

 - vercel@21.3.2
 - @vercel/python@2.0.0"
910a905192efe73eba293e8a27c4cd5368318431,Nathan Rajlich,2021-03-02 19:01:02+00:00,GitHub,2021-03-02 19:01:02+00:00,Remove `@vercel/python` stable publish blacklist (#5920)
156a9be06ea585760f1c46d4d4e96a612719b151,Steven,2021-02-26 21:21:51+00:00,Steven,2021-02-26 21:21:51+00:00,"Publish Stable

 - vercel@21.3.1
 - @vercel/go@1.2.1"
e2132ee36d08eaf1683ebacf3e2ab52e3c8bc507,Steven,2021-02-26 20:22:59+00:00,Steven,2021-02-26 20:22:59+00:00,"Publish Canary

 - vercel@21.3.1-canary.0
 - @vercel/go@1.2.1-canary.0"
4572230c1dc062dbbae7a5941e2dedd853d6e8d2,Steven,2021-02-26 20:15:34+00:00,GitHub,2021-02-26 20:15:34+00:00,"[go] Fix analyze ignore list (#5906)

A regression was introduced in #5873 that caused the analyze step to parse Go's internal source files (eg `golang/test/bombad.go`) instead of only parsing the user's source code (eg `api/users.go`).

This resulted in the error:

```
Failed to parse AST for ""api/users.go""
Error: Command failed: /vercel/1ab928d537d26157/.build-utils/.builder/node_modules/@vercel/go/dist/analyze -modpath=/vercel/workpath1 /vercel/workpath1/api/users.go
2021/02/26 14:26:42 Could not parse Go file ""/vercel/workpath1/.vercel/cache/golang/test/bombad.go""
```"
8cfac4cf86bd7d57eabb1a24ab6bc9672fbcbfdb,Steven,2021-02-26 00:53:07+00:00,Steven,2021-02-26 00:53:07+00:00,"Publish Stable

 - @vercel/frameworks@0.3.0
 - @vercel/build-utils@2.10.0
 - vercel@21.3.0
 - @vercel/client@9.0.7
 - @vercel/go@1.2.0
 - @vercel/routing-utils@1.10.0"
4f2078300056493e24f1ea0f5c8db641034a8201,Steven,2021-02-25 22:47:42+00:00,Steven,2021-02-25 22:47:42+00:00,"Publish Canary

 - vercel@21.2.4-canary.14"
968b7c3fb5bdbfaa520493b8e7b99c7c69301aa9,Mark Glagola,2021-02-25 22:29:19+00:00,GitHub,2021-02-25 22:29:19+00:00,"[cli] Use inspectorUrl from api (#5904)

Uses inspector url from api rather than generating one locally.

###  Checklist

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
407c4ec5f44f3c5abe70106786c51c55ff98b8f1,Steven,2021-02-24 22:52:33+00:00,Steven,2021-02-24 22:52:33+00:00,"Publish Canary

 - @vercel/build-utils@2.9.1-canary.10
 - vercel@21.2.4-canary.13
 - @vercel/client@9.0.7-canary.10"
bcf393d12541c16def14db04ea78ca22314c0bc1,Steven,2021-02-24 22:52:03+00:00,GitHub,2021-02-24 22:52:03+00:00,"[build-utils] Fix warning for canary (#5892)

### Related Issues

Follow up to #5888

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
115ae0a2291d9a4b6f8319acca24680fb187772c,Steven,2021-02-24 13:43:24+00:00,Steven,2021-02-24 13:43:24+00:00,"Publish Canary

 - @vercel/build-utils@2.9.1-canary.9
 - vercel@21.2.4-canary.12
 - @vercel/client@9.0.7-canary.9"
d149489c9e127f90a16d00c34c4e439cd461ddf7,Steven,2021-02-24 01:12:14+00:00,GitHub,2021-02-24 01:12:14+00:00,"[build-utils] Update warning for `api` + `pages/api` (#5888)

This PR updates the warning for `api` + `pages/api` to only be printed when Next.js is mixed with `@vercel/node` functions. It should not print the warning with `@vercel/go` functions for example.

###  Checklist

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
5b2e6052fc8419cd036bbbfb2e45c9a8d508cfb3,Steven,2021-02-23 22:45:14+00:00,Steven,2021-02-23 22:45:14+00:00,"Publish Canary

 - vercel@21.2.4-canary.11
 - @vercel/go@1.1.9-canary.1"
38cb5a3b99b91480744f072d516fbfc690cc122e,Steven,2021-02-23 21:41:59+00:00,GitHub,2021-02-23 21:41:59+00:00,"[go] Add Go version selection via `go.mod` (#5873)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
84e828a0ca542f370bb0932dc62c0e0330d8d589,Steven,2021-02-23 18:13:43+00:00,Steven,2021-02-23 18:13:43+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.7
 - @vercel/build-utils@2.9.1-canary.8
 - vercel@21.2.4-canary.10
 - @vercel/client@9.0.7-canary.8"
157ce5346dcefea7f73e38eb34d1c65baa97ac64,Steven,2021-02-23 18:12:43+00:00,GitHub,2021-02-23 18:12:43+00:00,"[build-utils] Update Node.js 10 deprecation message (#5881)

This PR updates the discontinued date according to the changelog.

It also conditionally prints a hint to update `engines` if present or update Project Settings.

https://vercel.com/changelog/node-js-10-is-being-deprecated"
0256157391c41522a801741569b1003b7c7ee0a9,Nathan Rajlich,2021-02-23 02:03:50+00:00,GitHub,2021-02-23 02:03:50+00:00,"[examples] Fix ""nuxtjs"" example by adding a `yarn.lock` file (#5882)

`@babel/preset-env` shipped a change that broke Nuxt.js usage of the
module, so here we add a `yarn.lock` file that pins the preset-env
version to 7.12.17.

See: https://github.com/nuxt/nuxt.js/issues/8882"
a45b3d09824129183cb9b7b43b722d84970ffffd,Steven,2021-02-22 15:14:32+00:00,GitHub,2021-02-22 15:14:32+00:00,"[examples] Update jekyll and middleman (#5871)

This PR updates the examples for jekyll and middleman to use the latest version.

I confirmed these examples work with both stable and canary."
26af6dbc032bea1504db5ddac51fb326170ba891,Connor Davis,2021-02-20 17:04:29+00:00,GitHub,2021-02-20 17:04:29+00:00,"[tests] Update 502 to 504 for Serverless Function timeout (#5874)

We now return a 504 for lambda timeouts

### Related Issues

Related to https://github.com/vercel/now-proxy/pull/1970

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer"
38130103a0eff2e9fff8e80ea3fa3abafa564e36,Mark Glagola,2021-02-20 00:22:51+00:00,GitHub,2021-02-20 00:22:51+00:00,[cli] Replace now.sh tests with vercel.app
978485818a3ca5f8de401bded9172028e0332984,Steven,2021-02-19 19:38:17+00:00,Steven,2021-02-19 19:38:17+00:00,"Publish Canary

 - @vercel/build-utils@2.9.1-canary.7
 - vercel@21.2.4-canary.9
 - @vercel/client@9.0.7-canary.7"
0270784cbb757d46731cb5770a1eafe566d91eae,Steven,2021-02-19 19:37:39+00:00,GitHub,2021-02-19 19:37:39+00:00,"[build-utils] Remove flags from bundle install (#5865)

This PR removes the flags from `bundle install` which fixes the deprecated warnings such as 

```
[DEPRECATED] The `--no-prune` flag is deprecated because it relies on being remembered across bundler invocations, which bundler will no longer do in future versions. Instead please use `bundle config set --local no_prune 'true'`, and stop using this flag
```

These flags already represent the defaults for `bundle install` anyway and we can pass environment variables in the spawn options instead."
345e5149248c030c93ca09168a7e883104dab7fa,Naoyuki Kanezawa,2021-02-19 17:43:52+00:00,GitHub,2021-02-19 17:43:52+00:00,"[build-utils] Fix glob to find symlinks pointing to a directory (#5870)

https://app.clubhouse.io/vercel/story/16876

This will fix the issue that symlinks pointing to a directory is not returned on `prepareCache` and node modules linked to local files don't work.

### Related Issues

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR

Co-authored-by: Steven <steven@ceriously.com>"
df62ec6ed0cc037d0b810f477e795a3a76fd4fc9,Steven,2021-02-19 16:20:35+00:00,GitHub,2021-02-19 16:20:35+00:00,"[cli] Disable Next.js gif test and Node.js 10 tests (#5867)

* Disable gif optimization test

* Disable Node 10 tests"
f7f81fb89665f535a421cfb6c3fcc59527c0d6ad,Steven,2021-02-18 14:53:11+00:00,Steven,2021-02-18 14:53:11+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.6
 - @vercel/build-utils@2.9.1-canary.6
 - vercel@21.2.4-canary.8
 - @vercel/client@9.0.7-canary.6"
a210c6e4f008d87e3092cfb33341b9beb91200a1,Steven,2021-02-18 14:52:22+00:00,GitHub,2021-02-18 14:52:22+00:00,"[frameworks] Add cachePattern to jekyll and middleman (#5862)

Cache the results of `bundle install`.

Related to #3908"
50080e4b92cf3dca2addf30fbd51847285409993,Steven,2021-02-18 00:48:18+00:00,Steven,2021-02-18 00:48:18+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.5
 - @vercel/build-utils@2.9.1-canary.5
 - vercel@21.2.4-canary.7
 - @vercel/client@9.0.7-canary.5
 - @vercel/go@1.1.9-canary.0"
5845bebe2db762cd3b885be79db5b38418586127,Steven,2021-02-18 00:39:09+00:00,GitHub,2021-02-18 00:39:09+00:00,"[go] Update to version 1.16 (#5858)

https://blog.golang.org/go1.16

[ch19891]"
3e18146846aa48bc662e72b6755f8e1245b9e0f5,Steven,2021-02-17 21:02:53+00:00,GitHub,2021-02-17 21:02:53+00:00,"[frameworks][examples] Update RedwoodJS to 0.25.0 (#5842)

RedwoodJS [v0.25.0](https://github.com/redwoodjs/redwood/releases/tag/v0.25.0) changed to a different build command: [yarn rw deploy vercel](https://redwoodjs.com/docs/cli-commands#vercel)

This also updates the example to use the latest template from `created-redwood-app`."
dbde60f47fa6b7823a38584a14d7a1b1fa11caa2,Steven,2021-02-16 17:16:45+00:00,GitHub,2021-02-16 17:16:45+00:00,"[tests] Add test for animated gif bypass (#5851)

Animated gif should bypass (serve as-is).

This is to avoid the time it takes to optimize animated images which can sometimes take minutes.

It also matches how `next dev` works so we want to stay consistent (this tests both dev and a deployment)."
aa3db23cad52be16faa7488f33e96c6374a8e78a,luc,2021-02-16 14:45:00+00:00,luc,2021-02-16 14:45:00+00:00,"Publish Canary

 - vercel@21.2.4-canary.6"
60a5b0a586079da57aef5b9a9d3f26a7c2f5c24b,Luc Leray,2021-02-15 20:29:23+00:00,GitHub,2021-02-15 20:29:23+00:00,"[cli] Use `POST /projects` for `vc projects add` (#5824)

* replace ""ensure project"" with ""create project""

* Revert ""replace ""ensure project"" with ""create project""""

This reverts commit c6955d5abda5eb9e1140d5d1d76ec7a4b193fe90.

* add test

* upsert project"
8b682ccc415eaa3d1f7cb6f60e52a8a757e80ef5,Nathan Rajlich,2021-02-13 02:08:29+00:00,Nathan Rajlich,2021-02-13 02:08:29+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.4
 - @vercel/build-utils@2.9.1-canary.4
 - vercel@21.2.4-canary.5
 - @vercel/client@9.0.7-canary.4"
50055963af1559798686addcd02c2a4911e81649,Nathan Rajlich,2021-02-13 02:07:53+00:00,GitHub,2021-02-13 02:07:53+00:00,"[frameworks] Fix ""zola"" framework detection (#5844)

`""hugo""` was a false-positive."
43fa6e6d97224886945d1c300f3a6cad39b1c9f7,Nathan Rajlich,2021-02-13 00:08:49+00:00,Nathan Rajlich,2021-02-13 00:08:49+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.3
 - @vercel/build-utils@2.9.1-canary.3
 - vercel@21.2.4-canary.4
 - @vercel/client@9.0.7-canary.3"
98c0b9b573240c1dee8507ae26dc26b79d56b082,Nathan Rajlich,2021-02-13 00:04:25+00:00,GitHub,2021-02-13 00:04:25+00:00,"[frameworks] Add ""detectors"" for Zola framework (#5843)"
8b8541f4aa16a124cad112eb1b3bc576718a467f,Nathan Rajlich,2021-02-12 22:22:16+00:00,Nathan Rajlich,2021-02-12 22:22:16+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.2
 - @vercel/build-utils@2.9.1-canary.2
 - vercel@21.2.4-canary.3
 - @vercel/client@9.0.7-canary.2"
59cc2bf0f27b93d86cf13e7d67b973c1f0165e46,Nathan Rajlich,2021-02-12 22:17:59+00:00,GitHub,2021-02-12 22:17:59+00:00,"[build-utils] Inherit `process.env` when `runPackageJsonScript()` is invoking yarn (#5841)

This is a more proper fix for #5825."
30e078062f34e6e83d173883f9877f45d8b495c3,Nathan Rajlich,2021-02-12 20:21:05+00:00,GitHub,2021-02-12 20:21:05+00:00,"[frameworks] Add `defaultVersion` field (#5839)

This will be used on the docs page to render the default version that is
included in the build image."
4d015a60ef772e9097d515b7eef8e7199843163a,Nathan Rajlich,2021-02-12 20:20:48+00:00,GitHub,2021-02-12 20:20:48+00:00,"[tests] Add `--network-timeout 1000000` to yarn install (#5840)

Seems like this might help with the networking issues in CI.
See https://github.com/yarnpkg/yarn/issues/4890#issuecomment-358179301"
ad0e66242d5ae57a95533c919a4b630ae345d1f2,Nathan Rajlich,2021-02-12 15:51:34+00:00,GitHub,2021-02-12 15:51:34+00:00,"[build-utils] Fix unit tests from `@vercel/frameworks` type change (#5829)

Fixes TypeScript error:

```
test/unit.framework-detector.test.ts:52:40 - error TS4104: The type 'readonly Framework[]' is 'readonly' and cannot be assigned to the mutable type 'Framework[]'.

52     expect(await detectFramework({ fs, frameworkList })).toBe(null);
                                          ~~~~~~~~~~~~~
```"
044f956de24c472a2c92d2b1a788f36628021b05,Ana Jovanova,2021-02-12 10:38:39+00:00,Ana Jovanova,2021-02-12 10:38:39+00:00,"Publish Canary

 - vercel@21.2.4-canary.2"
d26ed43d26eda9c4c0f063000607e89e0a3802d6,Ana Trajkovska,2021-02-12 09:28:47+00:00,GitHub,2021-02-12 09:28:47+00:00,"[cli] Implement generic announcement system (#5697)

This PR improves the CLI in a way that if the API from any request returns a response which contains a header with the prefix `x-vercel-warning-*`, `x-vercel-notice-*` or `x-vercel-tip-*`, it will print out the message to the output to let the user know.

This new feature also supports additional headers which improve the message, so that a link can be printed out for more information. Those are `x-vercel-link-*`, where we specify a link, and `x-vercel-action`, where we specify the text before the link.

Here's an example for a warning message which warns the user if they add a DNS record for a domain which does not use Vercel Nameservers:

<img width=""719"" alt=""Screenshot 2021-01-18 at 17 49 14"" src=""https://user-images.githubusercontent.com/35507539/104943788-8da12400-59b6-11eb-8e54-77a3c517e56d.png"">

The API request from above which creates a DNS record has the following HTTP response headers set:

```
x-vercel-warning-create-domain-record: Your Domain isn't using Vercel nameservers. In order for the changes to your DNS Records to get applied, however, it needs to.
x-vercel-link-create-domain-record: https://vercel.link/configure-vercel-nameservers
```

If `x-vercel-action` is not specified, it defaults to `Learn More`.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
84d859a016fdbb8d039dd16309717ddc7e31411a,Nathan Rajlich,2021-02-11 22:42:07+00:00,Nathan Rajlich,2021-02-11 22:42:07+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.1
 - @vercel/build-utils@2.9.1-canary.1
 - vercel@21.2.4-canary.1
 - @vercel/client@9.0.7-canary.1
 - @vercel/routing-utils@1.9.3-canary.0"
9238687089749a7a7624da3f88ec435d5b1e0433,Nathan Rajlich,2021-02-11 22:41:20+00:00,GitHub,2021-02-11 22:41:20+00:00,[frameworks] Restore correct order of frameworks for detection (#5828)
212c91cf32952e2c9fa3d0c8504e3b24facb70df,Nathan Rajlich,2021-02-11 19:42:13+00:00,GitHub,2021-02-11 19:42:13+00:00,"[frameworks] Add type annotations (#5819)

* [frameworks] Add type annotations

This will be necessary for static type analysis in our API docs generator.

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>

* Add quotes to @examples

Co-authored-by: Steven <steven@ceriously.com>"
48b34f5b02ba45f1ab60197b1ae2300de481c538,Nathan Rajlich,2021-02-10 22:35:08+00:00,GitHub,2021-02-10 22:35:08+00:00,"[frameworks] Add test case to ensure all ""demo"" URLs are public Vercel deployments (#5818)

All demo URLs must be public for the template import flow, so this test case ensures that we don't accidentally publish a demo URL that is not public."
b2c72538a393f44b44bf42e3e3d3cf0f0990ac29,Nathan Rajlich,2021-02-10 21:40:05+00:00,GitHub,2021-02-10 21:40:05+00:00,"[frameworks] Export `frameworks` array with `as const` (#5817)

This will be necessary for static type analysis in our API docs generator.

The default export is still typed as `Framework[]` for backwards-compat purposes, but the `frameworks` export is the statically typed array."
57d87021886de0a41d9eb6f5119a30a561ecb8df,Nathan Rajlich,2021-02-10 04:14:02+00:00,GitHub,2021-02-10 04:14:02+00:00,"[build-utils][cli] Fix frameworks usage (#5811)

Fixes unit test failures like: https://github.com/vercel/vercel/runs/1867209532#step:11:191 from PR #5740"
9a72195d8a3c730ab04da19cf30d715492865750,Allen Hai,2021-02-10 01:42:50+00:00,GitHub,2021-02-10 01:42:50+00:00,"[routing-utils] add user boolean prop to route schema (#5788)

This PR adds a boolean `user` property to help determine which routes where added by the user and which routes were added by the platform."
29ab7f7cfb64cf088d0828726492d509a6339973,Nathan Rajlich,2021-02-09 23:13:16+00:00,Nathan Rajlich,2021-02-09 23:13:16+00:00,"Publish Canary

 - @vercel/frameworks@0.2.1-canary.0
 - @vercel/build-utils@2.9.1-canary.0
 - vercel@21.2.4-canary.0
 - @vercel/client@9.0.7-canary.0"
ffa36c12d5db4f3116f0dc7457b1423b1c255dde,Nathan Rajlich,2021-02-09 22:55:49+00:00,GitHub,2021-02-09 22:55:49+00:00,"[frameworks] Convert to TypeScript (#5740)

This PR converts the `frameworks.json` file to TypeScript, and extends the values with the detection logic from `@vercel/static-build`, so that it's publicly editable. You also don't need to do the type casting downstream anymore.

As a consequence, it also makes Zola a 1st-class framework, as it was previously missing from the `frameworks.json` file, but present in the static-build frameworks. An example has been included based on their ""Getting Started"" tutorial.

CH-3808
CH-18771"
d1fc729d31c520faef681ebcbcdac65764ac6356,Nathan Rajlich,2021-02-09 01:20:47+00:00,GitHub,2021-02-09 01:20:47+00:00,[cli] Use `sleep()` util function in `vc dev` (#5784)
ba47ad00f97bb810ebe1a25172c1e2588ba63062,Nathan Rajlich,2021-02-09 00:02:39+00:00,GitHub,2021-02-09 00:02:39+00:00,"[examples][tests] Update ""gridsome"" and ""hexo"" for Node 14 (#5802)

The version of `sharp` used in gridsome 0.6.0 does not compile on Node 14."
2b62de803fd161dc1eaf9df923203a47bedeb876,Steven,2021-02-04 20:43:26+00:00,Steven,2021-02-04 20:43:26+00:00,"Publish Stable

 - @vercel/build-utils@2.9.0
 - vercel@21.2.3
 - @vercel/client@9.0.6"
196433ec9d462407eee54f2908415918f8f6fb8f,Steven,2021-02-04 19:26:59+00:00,Steven,2021-02-04 19:26:59+00:00,"Publish Canary

 - @vercel/build-utils@2.8.1-canary.1
 - vercel@21.2.3-canary.0
 - @vercel/client@9.0.6-canary.4"
0cdd5710877b4819cd40e454fb3fa5c99b4de36a,Steven,2021-02-04 19:25:16+00:00,GitHub,2021-02-04 19:25:16+00:00,"[build-utils] Add support for Node.js 14, warn for Node.js 10 (#5761)

### Related

Related to #4754 

### Upstream

https://aws.amazon.com/blogs/compute/node-js-14-x-runtime-now-available-in-aws-lambda/

###  Checklist


#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
5e2227507de2ff3b70b02212280e5fa27c700574,Steven,2021-02-01 17:08:57+00:00,GitHub,2021-02-01 17:08:57+00:00,[docs] Fix links to GH Discussion categories (#5777)
e3d478a4712efb439cba10ae3f4719e15c7c9b97,Nathan Rajlich,2021-01-30 00:57:35+00:00,Nathan Rajlich,2021-01-30 00:57:35+00:00,"Publish Stable

 - vercel@21.2.2
 - @vercel/go@1.1.8"
187d41434a489d766ed01647104c4c5eb4e7855f,Steven,2021-01-29 23:55:54+00:00,Steven,2021-01-29 23:55:54+00:00,"Publish Canary

 - vercel@21.2.2-canary.1"
f6fde2d3519dd6c197da365bd24ba7d25cc5f0fb,Steven,2021-01-29 23:54:30+00:00,GitHub,2021-01-29 23:54:30+00:00,"[cli] Update error message when project is not found (#5770)

Both `vc` and `vc dev` already ask to link/setup when the project is not found, so this will update the error message to mention the possible reasons why a project was not found.

### Before

```
$ vc
Vercel CLI 21.2.1
 Your project was either removed from Vercel or youre not a member of it anymore.
? Set up and deploy ~/Code/myproject? [Y/n]
```

### After

```
$ vc
Vercel CLI 21.2.1
 Your Project was either deleted, transferred to a new Team, or you dont have access to it anymore.
? Set up and deploy ~/Code/myproject? [Y/n]
```


###  Checklist



#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
e09ceca95ddfb64c7704d8753147bc05f7c7657c,Steven,2021-01-29 17:40:38+00:00,Steven,2021-01-29 17:40:38+00:00,"Publish Canary

 - @vercel/build-utils@2.8.1-canary.0
 - @vercel/cgi@1.0.7-canary.0
 - vercel@21.2.2-canary.0
 - @vercel/client@9.0.6-canary.3
 - @vercel/go@1.1.8-canary.0
 - @vercel/node@1.9.1-canary.0
 - @vercel/python@1.2.5-canary.1
 - @vercel/ruby@1.2.6-canary.0"
d9318af654bee33da17b9ff999423838bcc585eb,Igor Klopov,2021-01-29 17:37:06+00:00,GitHub,2021-01-29 17:37:06+00:00,[go] support skipDownload flag (#5767)
679cd6f14e91ebfab0cf92e4afc156fca9d23131,Nathan Rajlich,2021-01-28 22:16:17+00:00,GitHub,2021-01-28 22:16:17+00:00,"[cli] Use `output.stopSpinner()` interface consistently (#5762)

There was an issue with `output.spinner()` spinner if the old-style
interface was used (invoking the return value to stop the spinner),
which caused the internal spinner instance in `output` to be defined,
but in a ""stopped"" state. Then later the `text` gets updated to a
different value but the spinner is still stopped and nothing gets
rendered.

The fix is to ensure that `output.stopSpinner()` is called rather
than directly invoking the cancel function. In fact, the return
value of `output.spinner()` has been removed completely."
47c7a133243a29d9d70a270835800601777ccf34,Nathan Rajlich,2021-01-28 19:20:07+00:00,GitHub,2021-01-28 19:20:07+00:00,"[all] Rewrite build scripts in JavaScript (#5763)

Fixes these strange Windows failures that randomly started happening:

https://github.com/vercel/vercel/pull/5761/checks?check_run_id=1780742477"
f498d25d8bd654b578716203be73084b31130cd7,Nathan Rajlich,2021-01-27 22:26:52+00:00,Nathan Rajlich,2021-01-27 22:26:52+00:00,"Publish Stable

 - vercel@21.2.1"
726d3924aee69cbc5a6755b2e97f4ae90de22bc3,Nathan Rajlich,2021-01-27 02:31:12+00:00,Nathan Rajlich,2021-01-27 02:31:12+00:00,"Publish Canary

 - vercel@21.2.1-canary.0
 - @vercel/python@1.2.5-canary.0"
d3e6c2d335110f737c4714500cda6419ae541bd0,Nathan Rajlich,2021-01-26 20:37:15+00:00,GitHub,2021-01-26 20:37:15+00:00,"[python] Fix request URL path encoding for basic, WSGI and ASGI interfaces (#5739)

`@vercel/python` has been incorrectly ""unquoting"" the incoming request
URL for all Python interfaces (basic, WSGI, ASGI). The proper behavior is
to pass along the request URL to the serverless function handler unmodified.

This is proven by the additional test that is added in this PR, which actually
fires up the corresponding Python server via i.e. `python3 api/asgi.py`,
and executes the test probes defined in the
`test/fixtures/00-request-path/vercel.json` file. Adding this test ensures
that the request URL behavior of `@vercel/python` matches the behavior
as compared to executing via `python` directly."
f9ed84a5c9a1573c425508e3382df742eddada50,Nathan Rajlich,2021-01-26 20:34:08+00:00,GitHub,2021-01-26 20:34:08+00:00,"[cli] Pass the `output` object to `vercel switch` command (#5756)

Fixes error: `Cannot read property 'spinner' of undefined`"
88a815b5f053ac0a5f631bf85bf2b782d16698bf,Nathan Rajlich,2021-01-25 22:44:41+00:00,Nathan Rajlich,2021-01-25 22:44:41+00:00,"Publish Stable

 - vercel@21.2.0"
9f49743ea4ff2606c0922b82fa0130b5bc965ca0,Steven,2021-01-22 23:53:38+00:00,Steven,2021-01-22 23:53:38+00:00,"Publish Stable

 - @vercel/build-utils@2.8.0"
0ac3ae19c0495b0251854f1759da871d65875f07,Steven,2021-01-22 23:48:09+00:00,Steven,2021-01-22 23:48:09+00:00,"Publish Canary

 - @vercel/build-utils@2.7.1-canary.2
 - vercel@21.1.1-canary.3
 - @vercel/client@9.0.6-canary.2"
e7920fd78340a82a18f0dba98fea912734c12319,Steven,2021-01-22 23:47:33+00:00,GitHub,2021-01-22 23:47:33+00:00,[build-utils] Fix warning message (#5741)
b4c13470dfe40d0fac895749832b165985ed5e8e,Steven,2021-01-22 16:59:09+00:00,Steven,2021-01-22 16:59:09+00:00,"Publish Canary

 - @vercel/build-utils@2.7.1-canary.1
 - vercel@21.1.1-canary.2
 - @vercel/client@9.0.6-canary.1"
2a797b77b9c7e9a1ebfea096f11fcffefeeadd63,Steven,2021-01-22 16:57:55+00:00,GitHub,2021-01-22 16:57:55+00:00,"[build-utils] Add support for `config.nodeVersion` (#5729)

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
85a34126dfcecc2f29a7cdd0a7db712a5bde0db1,Nathan Rajlich,2021-01-22 06:48:10+00:00,Nathan Rajlich,2021-01-22 06:48:10+00:00,"Publish Canary

 - vercel@21.1.1-canary.1"
92889c5376d2d1adb51ff3fe089316a60011b771,Nathan Rajlich,2021-01-22 03:57:08+00:00,GitHub,2021-01-22 03:57:08+00:00,"[cli] Re-use a single `Output` instance throughout the codebase (#5722)

Previously every command implementation was invoking `createOutput()` individually, causing multiple instances of `Output` to be created, which was unnecessary, and causes issues with the shared `spinner` instance introduced by #5717.

Now, the `Output` instance created in `src/index.js` is passed down to the sub-command being executed and therefore re-used."
66a7fa30b8879e851c6a43e7336936bdfdd80953,Nathan Rajlich,2021-01-22 03:56:35+00:00,GitHub,2021-01-22 03:56:35+00:00,"[cli] Show login prompt for `vercel dev` (#5718)

`vercel dev` requires the user to be logged in ever since the project needs to be queried from the database.

**Before:**

<img width=""682"" alt=""Screen Shot 2021-01-18 at 7 58 56 PM"" src=""https://user-images.githubusercontent.com/71256/104986545-14aac800-59c8-11eb-8302-836a5481ce5f.png"">

**After:**

<img width=""497"" alt=""Screen Shot 2021-01-18 at 7 59 01 PM"" src=""https://user-images.githubusercontent.com/71256/104986547-15dbf500-59c8-11eb-85f6-d0ad628c8e8d.png"">"
a7ba405503ea5e02e541ce1d2e98b874cb5f78d0,Nathan Rajlich,2021-01-19 19:38:29+00:00,GitHub,2021-01-19 19:38:29+00:00,"[cli] Make `Output` class a singleton and have reusable `Spinner` (#5717)

This is a refactor of the `ora` Spinner usage to make the preferred usage be via the `output.spinner()` and `output.stopSpinner()` functions.

* The `Output` instance has a local spinner instance that can be updated via multiple calls to `output.spinner()`.
* `output.print()` and friends call `output.stopSpinner()` implicitly, so `output.stopSpinner()` doesn't need to be called unless it is desired to immediately remove the spinner before rendering the next text.
* Because there's meant to be a shared `spinner` for the `output` instance, it means that the same `output` instance needs to be used throughout the CLI lifecycle. Therefore, the `createOutput()` function now returns a singleton so that it's guaranteed to be the same instance.

https://user-images.githubusercontent.com/71256/105009979-0670a200-59f0-11eb-9853-232f92eae536.mov

https://user-images.githubusercontent.com/71256/105010034-17211800-59f0-11eb-918d-b15f457e9640.mov

In the ""before"" video above, note how there's a brief second where the spinner is cleared, but the deployment URL has not yet been printed. In the ""after"" video, this is fixed and the spinner is only cleared once the CLI is ready to render the deployment URL."
84145245bae3f7fd0d41b9da1d5941da4950a5ff,luc,2021-01-19 08:29:20+00:00,luc,2021-01-19 08:29:20+00:00,"Publish Canary

 - @vercel/build-utils@2.7.1-canary.0
 - vercel@21.1.1-canary.0
 - @vercel/client@9.0.6-canary.0"
90d2e8b63b4532f29cad2fe0b4b2247a7af14f31,Luc Leray,2021-01-19 08:27:42+00:00,GitHub,2021-01-19 08:27:42+00:00,"[cli] Hide ""Development"" for secret env variables (#5710)"
0d31fe801834013f6d69f8e407d4bf5d4b67df27,Nathan Rajlich,2021-01-18 20:03:34+00:00,GitHub,2021-01-18 20:03:34+00:00,"[cli] Fix `cleanUrls: true` when using `outputDirectory` (#5701)

This is essentially a refactor of the `@vercel/static` builder that
simplifies the code a lot and fixes a bug where `cleanUrls: true`
was not working correctly when using an `outputDirectory`."
37d747c241565716654402a1a4e7bc582fde3e47,Mark Glagola,2021-01-15 19:13:37+00:00,GitHub,2021-01-15 19:13:37+00:00,"[cli] Add auto renew prompt to domains buy (#5663)

Add auto renew prompt to `domains buy`

```diff
 > The domain ""example.com"" is available to buy under <username>!
 > Buy now for $20 (1yr)? [y|N] 
+ > Auto renew yearly for $20? [Y|n] 
```

###  Checklist

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
3f052d905f9c781226938517c06c10323da88e27,Nathan Rajlich,2021-01-14 13:50:19+00:00,GitHub,2021-01-14 13:50:19+00:00,"[build-utils] Remove `now-next` and `now-static-build` tests (#5695)

These directories are no longer in this repository, so the tests were failing."
0b60467d2f00a03f452596057665f4d1f9f2bc9e,Nathan Rajlich,2021-01-14 01:18:43+00:00,Nathan Rajlich,2021-01-14 01:18:43+00:00,"Publish Stable

 - @vercel/build-utils@2.7.0
 - vercel@21.1.0
 - @vercel/client@9.0.5
 - @vercel/go@1.1.7
 - @vercel/node-bridge@1.3.2
 - @vercel/node@1.9.0
 - @vercel/python@1.2.4
 - @vercel/routing-utils@1.9.2
 - @vercel/ruby@1.2.5"
4384a6104f70f9b3d7c630f89dcd3487ffe2dcbe,Nathan Rajlich,2021-01-13 19:42:54+00:00,Nathan Rajlich,2021-01-13 19:42:54+00:00,"Publish Canary

 - vercel@21.0.2-canary.10"
f40f95ff37402dfd3643ff7002344f06f5042a36,Nathan Rajlich,2021-01-13 15:36:12+00:00,GitHub,2021-01-13 15:36:12+00:00,"[cli] Respect the `directoryListing` Project setting in `vc dev` (#5690)

Implements the [""Directory Listing"" Project setting](https://vercel.com/changelog/listing-the-content-of-directories-can-now-be-toggled) in `vercel dev`.

The Dev integration test file has been updated to allow specifying custom Project settings that will be `PATCH`'d to the project document before running `vc deploy` / `vc dev`."
90c05250b0bc6b99fb8448f389d158ea13c73c1d,Nathan Rajlich,2021-01-13 01:47:24+00:00,Nathan Rajlich,2021-01-13 01:47:24+00:00,"Publish Canary

 - vercel@21.0.2-canary.9
 - @vercel/go@1.1.7-canary.1
 - @vercel/node@1.8.6-canary.5"
030880fe7417f60b286364d5dbdac9ecd7045ab4,Nathan Rajlich,2021-01-13 01:02:55+00:00,GitHub,2021-01-13 01:02:55+00:00,[node][go] Fix order of exit code in `startDevServer()` error reason (#5688)
02bc88f33bc71b3ced1700336f90bd6ff2b3d3e5,Nathan Rajlich,2021-01-13 01:02:36+00:00,GitHub,2021-01-13 01:02:36+00:00,"[cli] Use `cmd()` formatting for ""npm not installed"" message (#5687)

* [cli] Use `cmd()` formatting for ""npm not installed"" message

* Fix build"
38ff557cade32bcb22522dd5e4a00f81f356eb6a,Nathan Rajlich,2021-01-13 01:01:56+00:00,GitHub,2021-01-13 01:01:56+00:00,"[cli] Skip ""00-list-directory"" and ""temporary directory listing"" tests temporarily (#5689)

* [cli] Skip ""now-dev-directory-listing"" test temporarily

* Disable correct tests

* Fix `vc env` test"
47c34842d5d3d6a38405b2b6a8f64c9d293315b4,Nathan Rajlich,2021-01-12 22:51:30+00:00,Nathan Rajlich,2021-01-12 22:51:30+00:00,"Publish Canary

 - vercel@21.0.2-canary.8
 - @vercel/go@1.1.7-canary.0
 - @vercel/node@1.8.6-canary.4
 - @vercel/python@1.2.4-canary.0
 - @vercel/ruby@1.2.5-canary.0"
d21b215ad0755bfa15635f74e15e180843e19be4,Nathan Rajlich,2021-01-12 22:47:11+00:00,GitHub,2021-01-12 22:47:11+00:00,"[cli] Add error link when `startDevServer()` throws, and make `npm` not installed formatting consistent (#5684)"
5827737fd54981fa8a39ffcfdf43c917f38b0564,Nathan Rajlich,2021-01-11 23:55:58+00:00,GitHub,2021-01-11 23:55:58+00:00,"[node][go] Better `startDevServer()` error message (#5674)

* [go] Better `startDevServer()` error message

* [node] Better `startDevServer()` error message

Co-authored-by: Steven <steven@ceriously.com>"
a9e078d410d8d5ce8834253d23e0707f83f1ec18,Steven,2021-01-11 20:38:03+00:00,GitHub,2021-01-11 20:38:03+00:00,"[all] Rename init files to `vc_` prefix (#5675)

These files show up in error logs, so its confusing to see the [legacy now terminology](https://vercel.com/blog/zeit-is-now-vercel)."
b4d9b17fb85df998c8a77a352c027c8562699a4d,Lee Robinson,2021-01-11 01:52:18+00:00,GitHub,2021-01-11 01:52:18+00:00,Update to latest Create Next App example. (#5655)
02c55bf6342dac41953859c7a2ca49c4345dd74f,Steven,2021-01-07 20:28:48+00:00,GitHub,2021-01-07 20:28:48+00:00,"[cli] Remove legacy example from vc ls --help (#5651)

`vc ls --help` was still listing an example using `--all` which was removed with Now 1.0 in PR #5011.

This PR removes that legacy example."
08af15055f3738443aabb75b6d58dda7676f28ad,Nathan Rajlich,2021-01-07 02:33:16+00:00,Nathan Rajlich,2021-01-07 02:33:16+00:00,"Publish Canary

 - vercel@21.0.2-canary.7"
0597aaa5e4000751b5474fa83301fae632355449,Nathan Rajlich,2021-01-06 21:48:55+00:00,GitHub,2021-01-06 21:48:55+00:00,"[cli] Print better message upon `ENOENT` error when invoking `startDevServer()` (#5643)

When `spawn()` emits an ""ENOENT"" error, meaning that the command was not
found, the error would only be visible if `--debug` was enabled for vc
dev.

Now we will always render any error from `startDevServer()`, as well as
special-case the ""ENOENT"" error informing the user to double check their
installation of the command."
176856a1eaa1b7f5610674469e69e134d3709da9,Nathan Rajlich,2021-01-06 01:59:25+00:00,GitHub,2021-01-06 01:59:25+00:00,"Stop publishing legacy `@now` scoped packages (#5641)

These `@now` scoped packages have been published and deprecated with the following warning since May 2020:

```
DEPRECATED   - ""@now/node"" is deprecated and will stop receiving updates on December 31, 2020. Please use ""@vercel/node"" instead.
```

Since it is now 2021, the time has come to stop publishing.

### Related Issues

[[ch3378]]"
375a55ebed9d5cfbca2433c0c1352de0a45881b3,Nathan Rajlich,2021-01-05 22:11:55+00:00,GitHub,2021-01-05 22:11:55+00:00,[next][redwood][static-build] Remove frontend runtimes (#5640)
7d33a055816a94b02bbf1b74d5dfc7521db7c8ef,JJ Kasper,2021-01-05 15:58:19+00:00,JJ Kasper,2021-01-05 15:58:19+00:00,"Publish Stable

 - @vercel/next@2.7.8"
0377c8b7372d09fc55e755d9088b0204523166eb,JJ Kasper,2021-01-05 04:59:16+00:00,GitHub,2021-01-05 04:59:16+00:00,"[next] Add tests for optional catch-all fallback true page params (#5247)

This adds tests for optional catch-all `fallback: true` pages to ensure the params are normalized correctly. These should be failing initially until the PR with the normalizing fix in Next.js is released to canary. 

x-ref: https://github.com/vercel/next.js/issues/17220"
662d546388e2cec36a836f1566f0f969e46a0c36,Nathan Rajlich,2021-01-05 00:37:52+00:00,Nathan Rajlich,2021-01-05 00:37:52+00:00,"Publish Canary

 - @vercel/node-bridge@1.3.2-canary.1"
8c514b5608786fd7454c4cee82f090b3350bb4aa,Nathan Rajlich,2021-01-05 00:37:22+00:00,GitHub,2021-01-05 00:37:22+00:00,[node-bridge] Publish `launcher.*` files to npm (#5636)
a6ec53d9d38edddbbd4dd4753464d08997d6d598,Nathan Rajlich,2021-01-05 00:27:14+00:00,Nathan Rajlich,2021-01-05 00:27:14+00:00,"Publish Canary

 - vercel@21.0.2-canary.6
 - @vercel/node-bridge@1.3.2-canary.0
 - @vercel/node@1.8.6-canary.3
 - @vercel/static-build@0.18.1-canary.1
 - @vercel/redwood@0.2.1-canary.0"
3ad5903f705b2ba80ebb4ae35452f05007849089,Nathan Rajlich,2021-01-05 00:25:27+00:00,GitHub,2021-01-05 00:25:27+00:00,"[node-bridge] Move `launcher.ts` to `@vercel/node-bridge` (#5634)

The `launcher.ts` file is more closely aligned to the node bridge package, as it's used by other runtimes as well."
3cf155e999f9d3795dafa8b51fc43f160b57309f,Nathan Rajlich,2021-01-05 00:06:28+00:00,GitHub,2021-01-05 00:06:28+00:00,"[tests] Retry fetch upon ""ECONNREFUSED"" (#5635)

CI failed due to this error code, which can be retried."
d9a298d97cd85b174e30417f1024e6ae335a3dff,JJ Kasper,2021-01-04 21:15:21+00:00,JJ Kasper,2021-01-04 21:15:21+00:00,"Publish Canary

 - @vercel/next@2.7.8-canary.0"
487d3c85542198131e24c012a030f739bbaa3343,JJ Kasper,2021-01-04 20:53:29+00:00,GitHub,2021-01-04 20:53:29+00:00,"[next] Ensure 404 route is correct for GSP/GIP 404 (#5632)

This is a follow-up to https://github.com/vercel/vercel/pull/5618 ensuring the 404 route is pointing to the static 404 output correctly when `_app.gip` and getStaticProps in `/404.js` is used

### Related Issues

Fixes: https://github.com/vercel/next.js/issues/19849

#### Tests

- [ ] The code changed/added as part of this PR has been covered with tests
- [ ] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
9d0bfd36562f0a7f7601234e63442257a8434bb4,JJ Kasper,2021-01-02 18:24:18+00:00,JJ Kasper,2021-01-02 18:24:18+00:00,"Publish Stable

 - @vercel/next@2.7.7"
ec75333569e8155c74d2f0e2bc769870067d3c48,JJ Kasper,2020-12-31 23:10:52+00:00,GitHub,2020-12-31 23:10:52+00:00,[next] Fix next test files lint (#5619)
51aab912a2884db0917bb152839388a291db29bc,JJ Kasper,2020-12-31 22:01:02+00:00,JJ Kasper,2020-12-31 22:01:02+00:00,"Publish Canary

 - @vercel/next@2.7.7-canary.2"
670b2653c0f7eb9fea2ef137310736bd6cf448e4,JJ Kasper,2020-12-31 21:47:18+00:00,GitHub,2020-12-31 21:47:18+00:00,[next] Ensure 404 is static with _app.GIP and 404 GSP (#5618)
f71686fdad64fdfcaacbe144ad69fb2d292d4097,JJ Kasper,2020-12-30 00:26:39+00:00,JJ Kasper,2020-12-30 00:26:39+00:00,"Publish Canary

 - vercel@21.0.2-canary.5
 - @vercel/next@2.7.7-canary.1
 - @vercel/node@1.8.6-canary.2"
ec9c8ce150e57afed3a6632fa0b4bb1a168b2f33,Joe Haddad,2020-12-30 00:04:47+00:00,GitHub,2020-12-30 00:04:47+00:00,"[next] share cache between `nft` runs (#5614)

This should result in faster Lambda tracing, as it avoids duplicate work."
a2048fc6d36eba08cb1a453d9001a2889a5d2b0b,Steven,2020-12-28 17:23:03+00:00,GitHub,2020-12-28 17:23:03+00:00,"[node][next] Bump nft to 0.9.5 (#5581)

This PR bumps nft from version 0.9.4 to [0.9.5](https://github.com/vercel/nft/releases/tag/0.9.5)."
09ff9cda9faaf0b28e863a2a06aa593fc056d6f4,Steven,2020-12-21 20:12:32+00:00,GitHub,2020-12-21 20:12:32+00:00,[docs] Fix error message when credentials are missing (#5590)
3a4d6f78488888e7c282d727da22223fdbab5839,Nathan Rajlich,2020-12-21 18:11:14+00:00,Nathan Rajlich,2020-12-21 18:11:14+00:00,"Publish Canary

 - vercel@21.0.2-canary.4
 - @vercel/node@1.8.6-canary.1"
9a0d676c0d4e030f5ce57203a96fa46895b30af5,Andy,2020-12-18 20:34:50+00:00,GitHub,2020-12-18 20:34:50+00:00,"Remove ""Add a new framework"" CONTRIBUTING.md (#5583)"
25cd7b9e6ebcc65af900057263f587183730a708,Nathan Rajlich,2020-12-17 00:16:36+00:00,GitHub,2020-12-17 00:16:36+00:00,"[cli] Fix `vc logs -o raw` and add test (#5571)

There are events (i.e. with `type: ""deployment-event""`) that do not
contain a `text` property, so check that it's a string before invoking
`.replace()` on it.

Fixes this stack trace:

```
Error! An unexpected error occurred in logs: TypeError: Cannot read property 'replace' of undefined
    at Object.printLogRaw [as raw] (/home/me/nextjs-site/node_modules/vercel/dist/index.js:203803:10)
    at printEvent (/home/me/nextjs-site/node_modules/vercel/dist/index.js:203688:35)
    at Array.forEach (<anonymous>)
    at main (/home/me/nextjs-site/node_modules/vercel/dist/index.js:203690:31)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
    at main (/home/me/nextjs-site/node_modules/vercel/dist/index.js:207173:16)
```"
f926d5516cba51a511fbe0bf1e1443686168c957,Steven,2020-12-14 23:29:10+00:00,GitHub,2020-12-14 23:29:10+00:00,"[examples] Update gatsby to use @vercel/node (#5567)

[`@now/node`](https://www.npmjs.com/package/@now/node) is deprecated in favor of [`@vercel/node`](https://www.npmjs.com/package/@vercel/node)"
4603383850fc55a773b309d61f4a293ea3aaacdd,Nathan Rajlich,2020-12-14 23:26:22+00:00,GitHub,2020-12-14 23:26:22+00:00,"[node] Add `Vercel` prefixed TypeScript types (#5568)

The `Now` prefixed types remain as aliases for backwards-compat purposes.

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer"
c0c57889c84058257cb7a36c7ec01943ef5bfce1,Nathan Rajlich,2020-12-14 17:59:43+00:00,Nathan Rajlich,2020-12-14 17:59:43+00:00,"Publish Canary

 - @vercel/build-utils@2.6.1-canary.2
 - vercel@21.0.2-canary.3
 - @vercel/client@9.0.5-canary.2
 - @vercel/next@2.7.7-canary.0
 - @vercel/static-build@0.18.1-canary.0"
85908a0524167ea1ddf09efd4f85bb6958c1d44b,Nathan Rajlich,2020-12-14 04:27:59+00:00,GitHub,2020-12-14 04:27:59+00:00,"[build-utils][static-build][next] Force `YARN_NODE_LINKER=""node-modules""` env var when executing `yarn` (#5552)

### Related Issues

* https://vercel.com/knowledge/does-vercel-support-yarn-2
* https://github.com/vercel/vercel/discussions/4223
* https://github.com/vercel/vercel/discussions/4910
* https://github.com/vercel/vercel/issues/5136
* https://github.com/vercel/vercel/issues/5280

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [ ] This PR has a concise title and thorough description useful to a reviewer
- [ ] Issue from task tracker has a link to this PR"
503b9a242976c20c48d691c72de6017da65f387a,Andy Bitz,2020-12-11 18:02:19+00:00,Andy Bitz,2020-12-11 18:02:19+00:00,"Publish Canary

 - @vercel/build-utils@2.6.1-canary.1
 - vercel@21.0.2-canary.2
 - @vercel/client@9.0.5-canary.1"
eac8f32ae7a9728a884df66d8aa49fc373e6aac9,Andy,2020-12-11 18:00:49+00:00,GitHub,2020-12-11 18:00:49+00:00,"[cli][build-utils] Change type to handle builds without a `src` property (#5553)

* [cli][build-utils] Change type to handle builds without a `src` property

* Add test

* Update unit tests

* Update test

* Undo test changes"
3f76fefde6bef7833b45cb52796f6a17819697ea,dependabot[bot],2020-12-10 22:09:11+00:00,GitHub,2020-12-10 22:09:11+00:00,"Bump ini from 1.3.5 to 1.3.7 (#5550)

Bumps [ini](https://github.com/isaacs/ini) from 1.3.5 to 1.3.7.
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/npm/ini/commit/c74c8af35f32b801a7e82a8309eab792a95932f6""><code>c74c8af</code></a> 1.3.7</li>
<li><a href=""https://github.com/npm/ini/commit/024b8b55ac1c980c6225607b007714c54eb501ba""><code>024b8b5</code></a> update deps, add linting</li>
<li><a href=""https://github.com/npm/ini/commit/032fbaf5f0b98fce70c8cc380e0d05177a9c9073""><code>032fbaf</code></a> Use Object.create(null) to avoid default object property hazards</li>
<li><a href=""https://github.com/npm/ini/commit/2da90391ef70db41d10f013e3a87f9a8c5d01a72""><code>2da9039</code></a> 1.3.6</li>
<li><a href=""https://github.com/npm/ini/commit/cfea636f534b5ca7550d2c28b7d1a95d936d56c6""><code>cfea636</code></a> better git push script, before publish instead of after</li>
<li><a href=""https://github.com/npm/ini/commit/56d2805e07ccd94e2ba0984ac9240ff02d44b6f1""><code>56d2805</code></a> do not allow invalid hazardous string as section name</li>
<li>See full diff in <a href=""https://github.com/isaacs/ini/compare/v1.3.5...v1.3.7"">compare view</a></li>
</ul>
</details>
<details>
<summary>Maintainer changes</summary>
<p>This version was pushed to npm by <a href=""https://www.npmjs.com/~isaacs"">isaacs</a>, a new releaser for ini since your current version.</p>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=ini&package-manager=npm_and_yarn&previous-version=1.3.5&new-version=1.3.7)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/vercel/vercel/network/alerts).

</details>"
79ddc5746bbce2b02e12166a111bca6c748f25fe,Steven,2020-12-10 20:14:12+00:00,Steven,2020-12-10 20:14:12+00:00,"Publish Canary

 - @vercel/routing-utils@1.9.2-canary.4"
9a14615b43d56d420c96ad3c696d439e559c6f95,Javi Velasco,2020-12-10 20:10:57+00:00,GitHub,2020-12-10 20:10:57+00:00,"[routing-utils] More accurate schema (#5477)

This PR completes the routes schema to be more accurate for the provided type.
This will allow us to generate the type dynamically from the JSON Schema"
6d6ccbdc2532ca21c2e7dd5b39274d4f4b053521,JJ Kasper,2020-12-09 21:11:01+00:00,GitHub,2020-12-09 21:11:01+00:00,"[tests] Add retrying for GitHub actions connection error (#5533)

Follow-up to https://github.com/vercel/vercel/pull/5526 this also adds retrying for fetch connection issues in GitHub Actions to prevent false test failures.

x-ref: https://github.com/vercel/vercel/runs/1518604380"
704424ec5857d68f22e1844b7fd96481babb0b8b,JJ Kasper,2020-12-08 16:49:48+00:00,JJ Kasper,2020-12-08 16:49:48+00:00,"Publish Stable

 - @vercel/next@2.7.6"
c471127c691d6e2a577f524b625c786b3ed31746,JJ Kasper,2020-12-08 16:33:13+00:00,JJ Kasper,2020-12-08 16:33:13+00:00,"Publish Canary

 - @vercel/next@2.7.6-canary.1"
c02dc9ac4991b36de0f1353fcfed447e18ba7544,JJ Kasper,2020-12-08 15:25:55+00:00,GitHub,2020-12-08 15:25:55+00:00,"[next] Add public dir check and update tests (#5526)

* Add public dir check and update tests

* De-dupe test checks a bit"
dd10e8cc7764e6dc8efa548351a34f6464f3682f,JJ Kasper,2020-12-01 22:11:08+00:00,JJ Kasper,2020-12-01 22:11:08+00:00,"Publish Canary

 - @vercel/next@2.7.6-canary.0
 - @vercel/routing-utils@1.9.2-canary.3"
cf69c2398ca55a288507a295e86bc87759444e08,Connor Davis,2020-12-01 22:08:50+00:00,GitHub,2020-12-01 22:08:50+00:00,"[next] Add Important Headers to Avoid Users Overriding Cache Headers (#5452)

We want to ensure users cannot override Next.js' cache-control headers

### Related Issues

https://app.clubhouse.io/vercel/story/14921/add-important-headers-to-routes
https://app.clubhouse.io/vercel/story/15528/add-important-to-cache-control-headers-in-next-js

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR


Fixes: https://github.com/vercel/vercel/pull/5452"
e48707571f56cbe8e47eb009a42bdca306981d8d,JJ Kasper,2020-11-30 17:06:59+00:00,JJ Kasper,2020-11-30 17:06:59+00:00,"Publish Stable

 - @vercel/next@2.7.5"
6051fe6f0c4f9a12ef3498cdaf2aaec4fcd7fa91,JJ Kasper,2020-11-30 17:00:43+00:00,JJ Kasper,2020-11-30 17:00:43+00:00,"Publish Canary

 - @vercel/next@2.7.5-canary.1"
2b3ba8a14f13cc2d91da24b2d3c5e00ff9799f70,JJ Kasper,2020-11-30 16:57:56+00:00,GitHub,2020-11-30 16:57:56+00:00,"[next] Make sure to use outputDirectory when loading prerenderManifest (#5487)

* Make sure to use outputDirectory when loading prerenderManifest

* Add test case"
25bea3f83e581cb36adb60c3111bd07d32731c3d,Steven,2020-11-24 20:24:52+00:00,Steven,2020-11-24 20:24:52+00:00,"Publish Canary

 - vercel@21.0.2-canary.1
 - @vercel/next@2.7.5-canary.0
 - @vercel/node@1.8.6-canary.0"
b3e1828ebe67919c9a6cad61374a81822e62ffd9,Steven,2020-11-24 19:32:46+00:00,GitHub,2020-11-24 19:32:46+00:00,"[node][next] Bump nft to 0.9.4 (#5455)

This PR bumps nft to [0.9.4](https://github.com/vercel/nft/releases/tag/0.9.4)"
e0e2a8e87eaa984f57b9c14d6b06ad1039497c50,Andy Bitz,2020-11-24 18:52:19+00:00,Andy Bitz,2020-11-24 18:52:19+00:00,"Publish Canary

 - @vercel/routing-utils@1.9.2-canary.2"
37ec89796d0b85ed8465647e6ab534e28d79e084,Andy,2020-11-24 18:51:06+00:00,GitHub,2020-11-24 18:51:06+00:00,"[routing-utils] Handle `null` phase at the beginning (#5470)

* [routing-utils] Handle `null` phase at the beginning

* Add fixed list

* Add tests

* Change hit and miss order

* Put null at the start

* Undo order changes

Co-authored-by: Steven <steven@ceriously.com>"
d3e2a4c4db980c48d86fd39896c2f63bdfbad9bf,JJ Kasper,2020-11-24 17:14:03+00:00,JJ Kasper,2020-11-24 17:14:03+00:00,"Publish Stable

 - @vercel/next@2.7.4"
ece3645914c95bad2e4a992246ae47b6a62b0d3e,JJ Kasper,2020-11-24 16:53:50+00:00,JJ Kasper,2020-11-24 16:53:50+00:00,"Publish Canary

 - vercel@21.0.2-canary.0
 - @vercel/next@2.7.4-canary.0"
fee386493b32e16a7f9227db8d6cb229c6ba8d57,JJ Kasper,2020-11-24 16:38:43+00:00,GitHub,2020-11-24 16:38:43+00:00,"[next] Add handle: resource to ensure 404 page (#5454)

This adds `handle: resource` to ensure the 404 page is shown instead of a directory listing when there isn't an index route for an output directory. This also removes the `.well-known` route added in https://github.com/vercel/vercel/pull/5447 in favor of adding it in Next.js itself here https://github.com/vercel/next.js/pull/19364 and revalidate tests wait times are increased in this PR due to [this thread](https://vercel.slack.com/archives/C9MMK4674/p1605821738156200)

x-ref: https://github.com/vercel/next.js/pull/19364
Fixes: https://github.com/vercel/next.js/issues/16555"
d95ed184ab87be2474d253e6d4447a3e13f7e7c7,Luc Leray,2020-11-23 09:38:29+00:00,GitHub,2020-11-23 09:38:29+00:00,"[tests] Add test for secrets decryption in `vc env pull` and `vc dev` (#5461)

* add test for env with decryptable secret

* Apply suggestions from code review

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>

Co-authored-by: Nathan Rajlich <nathan@tootallnate.net>"
aef8e6388e6842d93582c1a80e625d2bd210f89e,luc,2020-11-22 23:48:10+00:00,luc,2020-11-22 23:48:10+00:00,"Publish Stable

 - vercel@21.0.1"
ba43e88603945772824dd86a4f2f7239f4948f98,luc,2020-11-22 23:39:59+00:00,luc,2020-11-22 23:39:59+00:00,"Publish Canary

 - vercel@21.0.1-canary.0"
e61f9740c427faea28b6115dea11426620323c17,Igor Klopov,2020-11-22 23:39:17+00:00,GitHub,2020-11-22 23:39:17+00:00,[cli] Fix secrets decryption when running `vc env pull` and `vc dev` (#5460)
c4b010fe8b1b107168b0588a1e04fe7b87e66a7e,luc,2020-11-20 22:10:15+00:00,luc,2020-11-20 22:10:15+00:00,"Publish Stable

 - vercel@21.0.0"
db18eb091fcec4d45329184737cf86ca236fab63,luc,2020-11-20 16:33:55+00:00,luc,2020-11-20 16:33:55+00:00,"Publish Canary

 - vercel@20.1.5-canary.6"
360e62d1726e7a25df788dd58c119660081be06f,Luc Leray,2020-11-20 16:33:16+00:00,GitHub,2020-11-20 16:33:16+00:00,"[cli] Download automatically exposed System Environment Variables when running `vercel env pull` (#5451)

* fix VERCEL_REGION and NOW_REGION

* remove VERCEL_REGION from exposeSystemEnvs

* refactor exposeSystemEnvs

* refactor getDecryptedEnvRecords

* consider project envs in exposeSystemEnvs

* simplify exposeSystemEnvs

* correctly set value of VERCEL_URL system envs

* make exposeSystemEnvs return all envs object

* parse url in server

* simplify

* refactor getDecryptedEnvRecords

* add comment

* remove unnecessary code

* add test

* fix test

* fix dev server unit tests

* always expose NOW_REGION

* fix dev test

* fix dev test

* only retrieve system env values when autoExposeSystemEnvs is true"
8c3cd0332de204ced87251deab0df345c741be5e,JJ Kasper,2020-11-19 20:47:12+00:00,JJ Kasper,2020-11-19 20:47:12+00:00,"Publish Stable

 - @vercel/next@2.7.3"
f5f276021e83f27722f1d8540ee7edca18593b7b,JJ Kasper,2020-11-19 20:30:56+00:00,JJ Kasper,2020-11-19 20:30:56+00:00,"Publish Canary

 - @vercel/next@2.7.3-canary.0"
9fbec823f31ff3fcb8c3e2c17d307d3b4c30c497,JJ Kasper,2020-11-19 20:24:46+00:00,GitHub,2020-11-19 20:24:46+00:00,"[next] Ensure public files are matched with i18n domains (#5447)

This makes sure we strip all locales during the `handle: 'miss'` phase to allow locale domains to match public files correctly. This also updates the trailing slash redirect handling to match the behavior for `.well-known` added in https://github.com/vercel/vercel/pull/5407

We aren't able to add tests for locale domains with the current test flow yet since they require domains be assigned although the changes in this PR was tested manually against http://i18n-support.vercel.app/ with `@ijjk/now-next@0.1.3-i18n`

x-ref: https://github.com/vercel/vercel/pull/5407
Fixes: https://github.com/vercel/next.js/issues/19324"
18c3dd3a63c1b5943681cfcc13638d1aa01333f1,luc,2020-11-19 15:01:27+00:00,luc,2020-11-19 15:01:27+00:00,"Publish Canary

 - vercel@20.1.5-canary.5"
5a4a20b33f68f59bfec3798823013c0ebfacc75d,Ana Trajkovska,2020-11-19 15:00:57+00:00,GitHub,2020-11-19 15:00:57+00:00,Remove code which removes auto-generated secrets (#5440)
4489ed0c8508b479d001dab5ec91d63a3da95ea4,luc,2020-11-18 15:11:28+00:00,luc,2020-11-18 15:11:28+00:00,"Publish Canary

 - vercel@20.1.5-canary.4"
359f23daf196ec9b4a55ccf3da2a886f0f34446f,Luc Leray,2020-11-18 15:00:20+00:00,GitHub,2020-11-18 15:00:20+00:00,"[cli] Expose VERCEL_REGION when `autoExposeSystemEnvs` is true (#5437)

* auto expose VERCEL_REGION

* add test"
4ef92e85db13cf4d9e504f383a03da6dbf648d0e,luc,2020-11-17 23:27:15+00:00,luc,2020-11-17 23:27:15+00:00,"Publish Canary

 - vercel@20.1.5-canary.3"
659c4d6ccd6db7640d7f40cef7276d3c4872ad0b,Naoyuki Kanezawa,2020-11-17 23:21:40+00:00,GitHub,2020-11-17 23:21:40+00:00,"[cli] Expose system envs when autoExposeSystemEnvs is enabled on vc dev (#5434)

Ref: https://app.clubhouse.io/vercel/story/15112

We added a property called `autoExposeSystemEnvs` to projects. If that property is `true`, we automatically expose system env variables such as `VERCEL=1`, `VERCEL_ENV=<production | preview>`, ... to the runtime and build time.

This PR makes sure we mirror this behavior when running `vc dev` locally.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
e93d477df815fdef85dcfaac8a996309f7830c5c,JJ Kasper,2020-11-17 20:49:04+00:00,JJ Kasper,2020-11-17 20:49:04+00:00,"Publish Stable

 - @vercel/next@2.7.2"
f64625655b9fbbd4cc0082ac5398e3f613ab135a,JJ Kasper,2020-11-17 20:11:32+00:00,JJ Kasper,2020-11-17 20:11:32+00:00,"Publish Canary

 - @vercel/next@2.7.2-canary.0"
25a81899976df5f88e4805887a901adfa11e9f31,JJ Kasper,2020-11-17 20:09:56+00:00,GitHub,2020-11-17 20:09:56+00:00,"[next] Correct non-dynamic index SSG data route output (#5435)

Co-authored-by: Joe Haddad <joe.haddad@zeit.co>"
25c3e627cfcfebd2f2b33e3aadfa53a8a60c7304,Andy Bitz,2020-11-17 17:13:30+00:00,Andy Bitz,2020-11-17 17:13:30+00:00,"Publish Canary

 - @vercel/build-utils@2.6.1-canary.0
 - vercel@20.1.5-canary.2
 - @vercel/client@9.0.5-canary.0"
1d6d8b530f40a0ff54b7272f334873a18b9c465c,Andy,2020-11-17 17:08:29+00:00,GitHub,2020-11-17 17:08:29+00:00,"[build-utils] Remove `continue: true` from 404 route (#5432)

* [build-utils] Remove `continue: true` from 404 route

* Update tests"
e821cc0ae7e831d3ba490e43f2d98bda5501ac44,Steven,2020-11-16 20:20:27+00:00,GitHub,2020-11-16 20:20:27+00:00,"[cli] Add tests to compare dev/prd image optimization (#5428)

Add E2E test for to test image optimization against `vc dev` as well as a prod deployment.

###  Checklist

<!--
  Please keep your PR as a Draft until the checklist is complete
-->

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR (CH13104)"
8ecbdc5d03600a67e4522e51c886793ce612143d,JJ Kasper,2020-11-14 22:48:35+00:00,JJ Kasper,2020-11-14 22:48:35+00:00,"Publish Stable

 - @vercel/next@2.7.1"
895224985b4ff80f8c83b154c5b5c589b53a2c28,JJ Kasper,2020-11-14 22:23:24+00:00,JJ Kasper,2020-11-14 22:23:24+00:00,"Publish Canary

 - @vercel/next@2.7.1-canary.0"
0f42a63c03522ceda620c17958ec40292b338170,JJ Kasper,2020-11-14 22:13:08+00:00,GitHub,2020-11-14 22:13:08+00:00,"[next] Ensure correct route order for i18n + custom-routes (#5421)

Co-authored-by: Steven <steven@ceriously.com>"
81e4c9e6feb780125f012f96f82066ed2e6f8508,dav-is,2020-11-13 18:48:28+00:00,dav-is,2020-11-13 18:48:28+00:00,"Publish Canary

 - @vercel/routing-utils@1.9.2-canary.1"
a0a29dc8363d61bce3cedfea8822dfbd64376ff2,Connor Davis,2020-11-12 22:38:01+00:00,GitHub,2020-11-12 22:38:01+00:00,"[routing-utils] Exclude /.well-known from trailing slash redirect (#5407)

`/.well-known` files shouldn't have trailing slashes added as these clients likely do not follow redirects

Specifically, `/.well-known/apple-developer-merchantid-domain-association` cannot have trailing slash.

### Related Issues

https://vercel.slack.com/archives/CLDDX2Y0G/p1605127589058800

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR"
c1f9d51d7af9e35d5c7e052fbf02ebf5487e3b4e,luc,2020-11-12 21:06:16+00:00,luc,2020-11-12 21:06:16+00:00,"Publish Canary

 - vercel@20.1.5-canary.1"
422f0558c129aaa9b4bf277b812937b0330e5588,Luc Leray,2020-11-12 21:05:24+00:00,GitHub,2020-11-12 21:05:24+00:00,"[cli] Rename ""Provided by system"" to ""Reference ..."" (#5415)

* Revert ""Revert ""[cli] (major) Update `vercel env` (#5372)"" (#5410)""

This reverts commit 2d24a75ca6f6cd020d4dde74e1a2725c2cb96ca5.

* fetch system env values from dedicated endpoint

* rename ""Provided by System"""
f064ae2908b170254c44eac44cfd24d6e65de799,luc,2020-11-12 20:07:28+00:00,luc,2020-11-12 20:07:28+00:00,"Publish Canary

 - vercel@20.1.5-canary.0
 - @vercel/routing-utils@1.9.2-canary.0"
58c3e636f03318baa5e0be6398b53745a546a2c9,Luc Leray,2020-11-12 20:06:25+00:00,GitHub,2020-11-12 20:06:25+00:00,"[cli] (Major) Update `vc env` (#5413)

* Revert ""Revert ""[cli] (major) Update `vercel env` (#5372)"" (#5410)""

This reverts commit 2d24a75ca6f6cd020d4dde74e1a2725c2cb96ca5.

* fetch system env values from dedicated endpoint"
d5081367f381defc4b0b0104be43705f1bfc3c67,Connor Davis,2020-11-12 17:45:33+00:00,GitHub,2020-11-12 17:45:33+00:00,"[routing-utils] Add important headers to disallow users from overriding (#5409)

If a builder wants to set a header that isn't allowed to be overridden by users, it should use `important: true`

#### Tests

- [x] The code changed/added as part of this PR has been covered with tests
- [x] All tests pass locally with `yarn test-unit`

#### Code Review

- [x] This PR has a concise title and thorough description useful to a reviewer
- [x] Issue from task tracker has a link to this PR: CH-14921"
0ee88366ff0078a2f27217ef1cdf7a11ffccd37b,luc,2020-11-12 16:16:29+00:00,luc,2020-11-12 16:16:29+00:00,"Publish Stable

 - vercel@20.1.4"
9ae42c9e92918d14ff30291e4966d07e9588264f,luc,2020-11-12 15:59:28+00:00,luc,2020-11-12 15:59:28+00:00,"Publish Canary

 - vercel@20.1.4-canary.1"
62b8df4a8d831d897dc2a8bbd27b55019fba2db3,Luc Leray,2020-11-12 15:58:41+00:00,GitHub,2020-11-12 15:58:41+00:00,[cli] Fix `vc env rm` with advanced env variables (#5411)
73ec7f3018bdd8c60d4294d7bc51a4d53797ec00,luc,2020-11-12 14:31:54+00:00,luc,2020-11-12 14:31:54+00:00,"Publish Canary

 - vercel@20.1.4-canary.0"
2d24a75ca6f6cd020d4dde74e1a2725c2cb96ca5,Luc Leray,2020-11-12 14:30:47+00:00,GitHub,2020-11-12 14:30:47+00:00,"Revert ""[cli] (major) Update `vercel env` (#5372)"" (#5410)

* Revert ""[cli] (major) Update `vercel env` (#5372)""

This reverts commit 9a57cc72dda600c47bcdf4979b706b7885cc0ed2.

* fix test

* do not change prompt UI"
3f92c42ad6af8b914a15ab36706f75773dd2b877,Nathan Rajlich,2020-11-12 00:01:46+00:00,Nathan Rajlich,2020-11-12 00:01:46+00:00,"Publish Stable

 - @vercel/frameworks@0.2.0
 - @vercel/build-utils@2.6.0
 - vercel@20.1.3
 - @vercel/client@9.0.4
 - @vercel/next@2.7.0
 - @vercel/node@1.8.5
 - @vercel/routing-utils@1.9.1
 - @vercel/static-build@0.18.0
 - @vercel/redwood@0.2.0"
d824f79d5a5c9fe42c96c1dbc2b5a2704669c8e3,Andy Bitz,2020-11-11 23:36:43+00:00,Andy Bitz,2020-11-11 23:36:43+00:00,"Publish Canary

 - @vercel/static-build@0.17.16-canary.1"
eefbf3a52d3235c7bfdb5e44f49697db643ba8ed,Andy,2020-11-11 23:36:02+00:00,GitHub,2020-11-11 23:36:02+00:00,"[static-build] Fix order of applying routes (#5408)

* [static-build] Fix order of applying routes

* Add test

* Fix 11-svelte"
dda793018b092cbd729d4a1b9ccb930b08b7f7e9,Nathan Rajlich,2020-11-11 22:30:14+00:00,Nathan Rajlich,2020-11-11 22:30:14+00:00,"Publish Canary

 - @vercel/build-utils@2.5.5-canary.4
 - vercel@20.1.3-canary.9
 - @vercel/client@9.0.4-canary.5"
9e588068eaba0a89d966971e3726e1dc14144a93,Nathan Rajlich,2020-11-11 22:14:57+00:00,GitHub,2020-11-11 22:14:57+00:00,"[build-utils] Include `installCommand` when empty string (#5406)

* [build-utils] Include `installCommand` when empty string

An empty string for the Project's `installCommand` setting has different
behavior than `null`, so properly provide the empty string to the
Runtime.

* Move tests to proper section"
76a7a51bdc1707722c93eeea426b64ca4c5d7267,Chris Leishman,2020-11-11 19:43:20+00:00,GitHub,2020-11-11 19:43:20+00:00,[docs] Add required information for pull requests (#5282)
5f5b5b034020eebe5d124170db00157a4138c43e,Nathan Rajlich,2020-11-11 18:31:14+00:00,Nathan Rajlich,2020-11-11 18:31:14+00:00,"Publish Canary

 - vercel@20.1.3-canary.8
 - @vercel/next@2.6.39-canary.1
 - @vercel/node@1.8.5-canary.0
 - @vercel/static-build@0.17.16-canary.0
 - @vercel/redwood@0.1.2-canary.3"
a0ce373dc9d69af32fe67581e607c2d356941757,Nathan Rajlich,2020-11-11 18:26:57+00:00,GitHub,2020-11-11 18:26:57+00:00,"[static-build][next][node][redwood] Invoke `installCommand` from Project settings (#5393)

* [static-build] Invoke `installCommand` from Project settings

* [next] Invoke `installCommand` from Project settings

* [redwood] Invoke `installCommand` from Project settings

* [node] Remove `--prefer-offline` npm flag

* [static-build] Remove `--prefer-offline` npm flag

* [next] Remove extra console.log()

* Move `installTime` to inside else branch

* Use `as keyof Config`

* [static-build] Add `installCommand` integration test

* [next] Add `installCommand` integration test

* Use `.`

* [redwood] Add `installCommand` integration test

* Skip `installCommand` if string is empty

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
049ffb268b39c3da2daa5393dbcf82f874242372,Steven,2020-11-11 14:44:06+00:00,GitHub,2020-11-11 14:44:06+00:00,"[examples] Update svelte example with latest rollup (#5404)

Updated the template using `npx degit sveltejs/template my-svelte-project`

I also added a `yarn.lock` file so dependencies don't break for future deployments.

Related to https://github.com/Samuel-Martineau/generator-svelte/issues/7"
94483c8b368d71f1d646592c46069d7abe00bf55,Andy Bitz,2020-11-10 20:32:13+00:00,Andy Bitz,2020-11-10 20:32:13+00:00,"Publish Stable

 - @vercel/static-build@0.17.15"
078f9de44ea718b47b4d2a2f5d0f75e8b41f86ae,Andy Bitz,2020-11-10 20:18:48+00:00,Andy Bitz,2020-11-10 20:18:48+00:00,"Publish Canary

 - @vercel/frameworks@0.1.2-canary.2
 - @vercel/build-utils@2.5.5-canary.3
 - vercel@20.1.3-canary.7
 - @vercel/client@9.0.4-canary.4
 - @vercel/static-build@0.17.15-canary.0
 - @vercel/redwood@0.1.2-canary.2"
0ae41f97a4915fa561d94818a9f490c24847e534,Andy,2020-11-10 20:17:45+00:00,GitHub,2020-11-10 20:17:45+00:00,[static-build] Ignore framework routes if config/routes.json is present (#5401)
9fb6a1ec4c8ca5b7f9d46cf3fa9cef50fc082b1e,Nathan Rajlich,2020-11-10 19:25:16+00:00,GitHub,2020-11-10 19:25:16+00:00,"[frameworks] Use ""value"" instead of ""placeholder"" for frameworks with known `installCommand` (#5400)"
21be46c8bb84680bd0a9e17f944b3e0084f49cfe,Andy Bitz,2020-11-10 17:51:06+00:00,Andy Bitz,2020-11-10 17:51:06+00:00,"Publish Stable

 - @vercel/static-build@0.17.14"
91942fc4d2e69407d3a8bc1ae45708d335b8aca0,Andy,2020-11-10 17:49:51+00:00,GitHub,2020-11-10 17:49:51+00:00,[static-build] Expect routes array directly (#5399)
8e02f2289fd8275867d3d505713a695a027b9686,Andy Bitz,2020-11-10 15:21:58+00:00,Andy Bitz,2020-11-10 15:21:58+00:00,"Publish Stable

 - @vercel/static-build@0.17.13"
4205d643a17d1b717b6dad6430462ae5196df591,Andy Bitz,2020-11-10 15:19:08+00:00,Andy Bitz,2020-11-10 15:19:08+00:00,"Publish Canary

 - @vercel/next@2.6.39-canary.0
 - @vercel/static-build@0.17.13-canary.0"
b2dda4dbb92a5dd637307c370807e134408da7e3,Andy,2020-11-10 15:18:07+00:00,GitHub,2020-11-10 15:18:07+00:00,"[static-build] Support static and config directory in .vercel_build_output (#5396)

* Handle routes and static files from the build output directory

* Add logging

* Move comment"
f36eac3d0ad11db752e17e6fc8e064d0f503e169,Joe Haddad,2020-11-10 14:19:26+00:00,GitHub,2020-11-10 14:19:26+00:00,"[next] files within the buildId directory are immutable (#5386)

Co-authored-by: Tim Neutkens <tim@timneutkens.nl>"
a2c56425f426272364bc39abde6e8cb82267b3ad,Andy Bitz,2020-11-09 23:41:45+00:00,Andy Bitz,2020-11-09 23:43:05+00:00,"Publish Stable

 - @vercel/static-build@0.17.12"
c759bfda9c622562eab8ab35765c65f8845ac371,Andy Bitz,2020-11-09 23:14:31+00:00,Andy Bitz,2020-11-09 23:14:31+00:00,"Publish Canary

 - @vercel/client@9.0.4-canary.3
 - @vercel/static-build@0.17.12-canary.0"
57995001acf5843a55b0a9fb3dd75b43e4e05622,Andy,2020-11-09 23:09:23+00:00,GitHub,2020-11-09 23:09:23+00:00,"[static-build] Add directory for Serverless Functions (#5390)

* [@vercel/static-build] Add directory for Serverless Functions

* Update tests and only consider index.js files

* Import only once

* Only change for zeroConfig

* Update packages/now-static-build/src/utils/_shared.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/now-static-build/test/fixtures/62-function-output-directory-with-static/now.json

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/now-static-build/test/fixtures/61-function-output-directory/now.json

Co-authored-by: Steven <steven@ceriously.com>

* Update build

* Fix type

* Remove line

* Add to .vercelignore

* Fix paths in test

* Move more files

* Remove special case for test

Co-authored-by: Steven <steven@ceriously.com>"
e5553d8ec21be2840bcadbb8acbd64e8d90a1832,Nathan Rajlich,2020-11-09 23:02:17+00:00,Nathan Rajlich,2020-11-09 23:02:17+00:00,"Publish Canary

 - @vercel/build-utils@2.5.5-canary.2
 - vercel@20.1.3-canary.6
 - @vercel/client@9.0.4-canary.2"
dcee5b16c706f797a678398dd0b724be33c0635e,Nathan Rajlich,2020-11-09 22:27:29+00:00,GitHub,2020-11-09 22:27:29+00:00,[build-utils] Add `installCommand` to Config object (#5391)
b190f2e11802bd521fbd5700bc8854aa96cb3aa1,JJ Kasper,2020-11-07 18:11:05+00:00,JJ Kasper,2020-11-07 18:11:05+00:00,"Publish Stable

 - @vercel/next@2.6.38"
2389d3e9360c9ae08dfd1218f014806331043df9,JJ Kasper,2020-11-07 17:55:08+00:00,JJ Kasper,2020-11-07 17:55:08+00:00,"Publish Canary

 - @vercel/next@2.6.38-canary.0"
0f4ed1965a5572e2d7c17b52d45366b5cea31003,JJ Kasper,2020-11-07 04:40:32+00:00,GitHub,2020-11-07 04:40:32+00:00,[next] Correct data routes with basePath (#5381)
e1e38ee5366b1a7f353c9b4829a9482dae3d1b10,luc,2020-11-06 15:50:13+00:00,luc,2020-11-06 15:50:13+00:00,"Publish Canary

 - vercel@20.1.3-canary.5"
dc1ff00610f1b17e093c52162b91621bca276895,Luc Leray,2020-11-06 15:49:34+00:00,GitHub,2020-11-06 15:49:34+00:00,"[cli] Show error when removing env variable from no target environment (#5378)

* error if no env target is selected

* improve prompt ui

* add test"
5f317366034f14960b885a943c6f273d64849821,luc,2020-11-05 22:17:08+00:00,luc,2020-11-05 22:17:08+00:00,"Publish Canary

 - vercel@20.1.3-canary.4"
9a57cc72dda600c47bcdf4979b706b7885cc0ed2,Luc Leray,2020-11-05 21:58:58+00:00,GitHub,2020-11-05 21:58:58+00:00,"[cli] (major) Update `vercel env` (#5372)

* prompt to select env type

* improve copy

* create env variable with type

* remove nanoid dependency

* use encodeURIComponent

* refactor envType -> type

* refactor envName -> key

* do not hide value input

* adjust value prompt depending on type

* handle std input for plaintext env variables

* show custom error when secret is not found

* handle secret name input starting with `@`

* fix system env value question

* improve ui of prompts

* expand env list in vc rm

* adjust tests

* environment -> environments

* list multiple targets in vc env ls

* show value for system env vars

* adjust tests

* capitalize targets

* add <type> to arguments

* always use stdInput for envValue

* fix number of arguments error

* adjust tests

* refactor ProjectEnvType

* refactor SYSTEM_ENV_VALUES

* fix typo for typePlaceholder

* use getCommandName

* use title

* remove @ts-ignore

* improve types

* show key controls for checkbox prompt"
9d9c5f3753965872caede57be51e8486db8edf79,JJ Kasper,2020-11-05 18:44:43+00:00,JJ Kasper,2020-11-05 18:44:43+00:00,"Publish Stable

 - @vercel/next@2.6.37"
deeefc0c93c859466c664cf44b53de5b2731933f,JJ Kasper,2020-11-05 17:50:05+00:00,JJ Kasper,2020-11-05 17:50:05+00:00,"Publish Canary

 - @vercel/next@2.6.37-canary.0"
5c23b08bc13d7be711a121fb330f601ee5db26e7,JJ Kasper,2020-11-05 17:48:29+00:00,GitHub,2020-11-05 17:48:29+00:00,Ensure auto-export dynamic routes are routed properly (#5377)
7c4e25ccce0368bf6a4ef606860c3f5468cb3ebc,dependabot[bot],2020-11-05 15:24:17+00:00,GitHub,2020-11-05 15:24:17+00:00,"Bump bl from 1.2.2 to 1.2.3 (#5363)

Bumps [bl](https://github.com/rvagg/bl) from 1.2.2 to 1.2.3.
- [Release notes](https://github.com/rvagg/bl/releases)
- [Commits](https://github.com/rvagg/bl/compare/v1.2.2...v1.2.3)

Signed-off-by: dependabot[bot] <support@github.com>"
1bfa310945831e9d1204122557bae16d0c6bfe5a,Joe Haddad,2020-11-05 04:29:30+00:00,Joe Haddad,2020-11-05 04:29:30+00:00,"Publish Stable

 - @vercel/static-build@0.17.11"
c96062266baad0d61df900811ecddac3b3cfe69f,Joe Haddad,2020-11-05 04:12:46+00:00,Joe Haddad,2020-11-05 04:12:46+00:00,"Publish Canary

 - @vercel/frameworks@0.1.2-canary.1
 - @vercel/build-utils@2.5.5-canary.1
 - vercel@20.1.3-canary.3
 - @vercel/client@9.0.4-canary.1
 - @vercel/static-build@0.17.11-canary.0
 - @vercel/redwood@0.1.2-canary.1"
5bea99c1d9817cbfa3983f2386bd3083f5129d73,Joe Haddad,2020-11-05 04:11:40+00:00,GitHub,2020-11-05 04:11:40+00:00,[static-build] zero-config gatsby should support export default (#5375)
358be773a21c09051f109e882d4c7ff740114153,Luc Leray,2020-11-05 01:09:36+00:00,GitHub,2020-11-05 01:09:36+00:00,[tests] Cleanup fixture folder before running CLI test (#5374)
9ebf4e531d32742d12bc30f884cda1379fcd3cb5,Nathan Rajlich,2020-11-05 00:24:06+00:00,GitHub,2020-11-05 00:24:06+00:00,[frameworks] Add `installCommand` placeholders (#5373)
b69196ab38d649ee12951e214e46d826116283bc,Lee Robinson,2020-11-04 20:00:08+00:00,Lee Robinson,2020-11-04 20:00:08+00:00,docs: update README
71e79258b7853cb4ae61128aa0c6e1398de9a4b7,Joe Haddad,2020-11-03 15:49:41+00:00,Joe Haddad,2020-11-03 15:49:41+00:00,"Publish Stable

 - @vercel/next@2.6.36
 - @vercel/static-build@0.17.10"
1dfafe70402e4e0ec53bc01c1070d283ef6943f0,Joe Haddad,2020-11-03 15:40:07+00:00,Joe Haddad,2020-11-03 15:40:07+00:00,"Publish Canary

 - @vercel/next@2.6.36-canary.0"
78ed452a998b62ea7a4e4925016c18baecd19c41,JJ Kasper,2020-11-03 01:58:40+00:00,GitHub,2020-11-03 01:58:40+00:00,"[next] Ensure localeDetection: false is honored (#5365)

This disables adding the locale redirects when `localeDetection` is set to `false` 

x-ref: https://github.com/vercel/next.js/issues/18482"
109b676fdd8cf56ab7f522082e9bac3695d0d979,Lee Robinson,2020-11-02 22:49:27+00:00,Lee Robinson,2020-11-02 22:49:27+00:00,docs: update README
d408e2ef1a7ab9b22cbd69738ca30a629a289ea9,Joe Haddad,2020-11-02 20:04:48+00:00,Joe Haddad,2020-11-02 20:04:48+00:00,"Publish Canary

 - @vercel/static-build@0.17.10-canary.0"
8ebb1fd9ce236f5d96ddd73a844c4f652994a832,Joe Haddad,2020-11-02 20:03:45+00:00,GitHub,2020-11-02 20:03:45+00:00,[static-build] add Vercel Analytics Support for Gatsby (#5366)
4685d8f8ebcfb7387a23428f83c334271dc61a0f,Joe Haddad,2020-11-02 17:21:49+00:00,GitHub,2020-11-02 17:21:49+00:00,fix: correctly extract page name from initial markup (#2)
c854cd923c1da32cfb1a87345aa873996f773843,Lee Robinson,2020-11-02 17:09:43+00:00,GitHub,2020-11-02 17:09:43+00:00,"Merge pull request #1 from vercel/feat/read-env

fix: automatically configure analyticsId on Vercel"
5a5b76e94a436367fa0c3840fbfbfed74bc5029c,Joe Haddad,2020-11-02 17:07:53+00:00,Joe Haddad,2020-11-02 17:08:08+00:00,fix: automatically configure analyticsId on Vercel
4eb5ad625cab62d1eea46ec60a1b336ce592598f,JJ Kasper,2020-11-02 16:26:52+00:00,JJ Kasper,2020-11-02 16:26:52+00:00,"Publish Stable

 - @vercel/next@2.6.35"
7164f6e58e948f047cdbd1c68a73104415ebf0b8,luc,2020-11-02 14:43:54+00:00,luc,2020-11-02 14:43:54+00:00,"Publish Canary

 - vercel@20.1.3-canary.2"
a36d084b3e09ee6a20a68363b4c7b810edf6b64c,Naoyuki Kanezawa,2020-11-02 14:42:28+00:00,GitHub,2020-11-02 14:42:28+00:00,"[cli] Add support for plaintext env variables (#5345)

* fix plain envs can not be retrieved

* add test

* add test for `vc dev`

* use v6 to retrieve env variables

* fix v6 return type

* use v6 to display env vars

* add test for vc env ls

* expand env vars with multiple targets

* minor type fixes

* always use v6 for getEnvVariables

Co-authored-by: luc <luc.leray@gmail.com>"
8a16447fed97ac01e87ef04f8abe070e8f4414f1,JJ Kasper,2020-11-01 18:24:51+00:00,JJ Kasper,2020-11-01 18:24:51+00:00,"Publish Canary

 - vercel@20.1.3-canary.1
 - @vercel/next@2.6.35-canary.1"
efda4ab6b99bc31659db27cd54297d7478c2919f,Leo Lamprecht,2020-11-01 16:13:16+00:00,GitHub,2020-11-01 16:13:16+00:00,Updated Next.js Template to use latest version of Next.js and React (#5358)
16060a71a97b64f81bdf8644d15ff780eb8dfc61,JJ Kasper,2020-11-01 14:15:20+00:00,GitHub,2020-11-01 14:15:20+00:00,[next] Add additional tests for i18n revalidate params (#5356)
b18e0a7415fe768e0112c195d3c381ad3afeb281,Luc Leray,2020-10-31 21:07:35+00:00,GitHub,2020-10-31 21:07:35+00:00,[cli] Replace `util/prompt-bool` by `util/input/confirm` (#5359)
9d89ce7dc27a454d6f005844b7c27b1f8f63940e,Lee Robinson,2020-10-31 16:30:20+00:00,Lee Robinson,2020-10-31 16:30:20+00:00,fix: require forwarding the project ID in the config
47ea7b4063ac0fada12856c3af2776e602794853,Joe Haddad,2020-10-31 16:08:20+00:00,Joe Haddad,2020-10-31 16:08:20+00:00,fix: metrics should still be sent when debug is enabled
be7a40231bef605dadd331ccdfe892fe798686a9,Joe Haddad,2020-10-31 16:03:23+00:00,Joe Haddad,2020-10-31 16:03:23+00:00,ci: configure semantic-release branch
03d424dc1266e30992a87ebc84e2de88de766710,Joe Haddad,2020-10-31 16:00:34+00:00,Joe Haddad,2020-10-31 16:00:34+00:00,ci: fix action branch name
2f65e9fd456f556299f23e2586cb7f2c84a8886d,Joe Haddad,2020-10-31 15:58:45+00:00,Joe Haddad,2020-10-31 15:58:45+00:00,ci: configure automatic publishes
9ad6d466289fe343a6258560001bf788ccc1056a,Lee Robinson,2020-10-31 15:43:23+00:00,Lee Robinson,2020-10-31 15:43:23+00:00,0.0.0-canary.0
9b0b84ed8a1b7d4a076341ab10a938168ed61de8,Lee Robinson,2020-10-31 15:43:09+00:00,Lee Robinson,2020-10-31 15:43:09+00:00,Reset version.
3bb4d28e8d280e7dec56250b0ed0328163d354d4,Lee Robinson,2020-10-31 14:21:39+00:00,Lee Robinson,2020-10-31 14:21:39+00:00,Update keywords.
88de719932ed85b786ab49678c299397ff086919,Lee Robinson,2020-10-31 14:21:18+00:00,Lee Robinson,2020-10-31 14:21:18+00:00,Update keywords.
9d0868a0b9a8047d588b53911abebbd00eab9c54,Lee Robinson,2020-10-31 14:14:56+00:00,Lee Robinson,2020-10-31 14:14:56+00:00,Add keywords.
3e40438c81eca0903852c26ada95f39461789f47,Lee Robinson,2020-10-31 13:40:51+00:00,Lee Robinson,2020-10-31 13:40:51+00:00,Update README.
ecb5455dba303f3298541225ba29566456c3a751,Lee Robinson,2020-10-31 13:40:09+00:00,Lee Robinson,2020-10-31 13:40:09+00:00,Add inspiration.
1251f11a974c8f0fdfe2a38efcf358846e7b4ae6,JJ Kasper,2020-10-31 05:34:03+00:00,JJ Kasper,2020-10-31 05:34:03+00:00,"Publish Canary

 - @vercel/next@2.6.35-canary.0"
a5f53466ea1d74dd2321e46000a577d5eeeb8275,Lee Robinson,2020-10-30 22:55:07+00:00,Lee Robinson,2020-10-30 22:55:07+00:00,Default project ID to env var.
07235e22f6a4691efe7d1646aa8b48083bd4f03c,JJ Kasper,2020-10-30 22:40:39+00:00,GitHub,2020-10-30 22:40:39+00:00,"[next] Fix root-most optional-catchall with i18n (#5354)

* Fix root-most optional-catchall with i18n

* Ensure dynamic prerenders revalidation

* Add test delay"
d3fbddeae7ce450bd35764fea8bbd1fe41dfa10c,Lee Robinson,2020-10-30 22:35:57+00:00,Lee Robinson,2020-10-30 22:35:57+00:00,Start plugin.
0ef927878578c5506f6d2aaf8a920ce1c1c3fa16,Lee Robinson,2020-10-30 22:04:54+00:00,Lee Robinson,2020-10-30 22:04:54+00:00,First commit.
81011df816927236653fcbd06e425c9a5986cd4e,JJ Kasper,2020-10-30 15:50:03+00:00,JJ Kasper,2020-10-30 15:50:03+00:00,"Publish Stable

 - @vercel/next@2.6.34"
c8d31bdcf7f7d70bab07e9b9b7d50fad407df9ae,JJ Kasper,2020-10-30 15:16:20+00:00,JJ Kasper,2020-10-30 15:16:20+00:00,"Publish Canary

 - @vercel/next@2.6.34-canary.0"
5e7f1158ad9a9f75f1b053bfc60b6d419c5a2848,JJ Kasper,2020-10-30 14:59:47+00:00,GitHub,2020-10-30 14:59:47+00:00,"[next] Ensure revalidation works with i18n (#5350)

This corrects some i18n pages being considered staticPages instead of prerender items which was breaking revalidate behavior. This also adds more verbose tests for i18n ensuring revalidation is working correctly

x-ref: https://github.com/vercel/next.js/discussions/18443
Fixes: https://github.com/vercel/next.js/issues/18503"
df5aa1f10d3e9882e104f0ac996f6001403e0a70,JJ Kasper,2020-10-27 18:41:00+00:00,JJ Kasper,2020-10-27 18:41:00+00:00,"Publish Stable

 - @vercel/next@2.6.33"
eb1ba97309bcd833f9d0c51d3455f649f0048f83,JJ Kasper,2020-10-27 18:33:33+00:00,JJ Kasper,2020-10-27 18:33:33+00:00,"Publish Canary

 - @vercel/next@2.6.33-canary.0"
8047d6de497ef52154a4a1a1e3b3caf3eb932b5a,JJ Kasper,2020-10-27 18:33:02+00:00,GitHub,2020-10-27 18:33:02+00:00,"[next] Fix index data path for non-locale path (#5339)

* Fix index data path for non-locale path

* Add index SSG test

* Update tests for canary

* Correct logic check to handle default locale"
7470ff3724c3404cf19ea99ee642f6550cd53c19,JJ Kasper,2020-10-27 14:30:43+00:00,JJ Kasper,2020-10-27 14:30:43+00:00,"Publish Stable

 - @vercel/next@2.6.32"
8340d9327cf6b30e8053658e359e32085ab2a44b,JJ Kasper,2020-10-27 14:11:04+00:00,JJ Kasper,2020-10-27 14:11:04+00:00,"Publish Canary

 - @vercel/next@2.6.32-canary.1"
d278425810dfbe80c60b5ef08fdc7228a2914591,JJ Kasper,2020-10-27 14:05:39+00:00,GitHub,2020-10-27 14:05:39+00:00,Update tests for stabilized field (#5337)
8b26bbe643cbc2ce7d451cb32ef4ddac3de3f2e3,JJ Kasper,2020-10-27 10:32:08+00:00,GitHub,2020-10-27 10:32:08+00:00,"[next] Add redirecting domain specific locales (#5333)

Co-authored-by: Joe Haddad <joe.haddad@zeit.co>"
fa8e1e73c8390808dcb0e026185ebd9353d0b22e,JJ Kasper,2020-10-27 06:51:58+00:00,GitHub,2020-10-27 06:51:58+00:00,Ensure index GSP data is available at correct path (#5336)
f8abcbcd9fbb064948d61e2f018526f91d6286bc,JJ Kasper,2020-10-27 05:42:11+00:00,GitHub,2020-10-27 05:42:11+00:00,Remove unstable_ prefix from unstable_blocking (#5334)
e18ff683b26b3a3aada69fd17c3e21ce2b04c9f3,Andy Bitz,2020-10-26 15:22:53+00:00,Andy Bitz,2020-10-26 15:22:53+00:00,"Publish Canary

 - @vercel/frameworks@0.1.2-canary.0
 - @vercel/build-utils@2.5.5-canary.0
 - vercel@20.1.3-canary.0
 - @vercel/client@9.0.4-canary.0
 - @vercel/redwood@0.1.2-canary.0"
f28293a5a87af064a7478bc799a7397f97ac08ce,Andy,2020-10-26 15:10:40+00:00,GitHub,2020-10-26 15:10:40+00:00,"[frameworks] Add recommended integrations and related dependencies (#5330)

Adds the `recommendedIntegrations` property to the frameworks list with related dependencies.

Story https://app.clubhouse.io/vercel/story/13391"
a4963a89c7cab9816b5088acacf646d6cd621da6,Steven,2020-10-25 20:58:01+00:00,Steven,2020-10-25 20:58:01+00:00,"Publish Canary

 - @vercel/next@2.6.32-canary.0"
21df39fe8ca482b2f02cdacbb186c86558ab9529,Steven,2020-10-24 12:55:53+00:00,GitHub,2020-10-24 12:55:53+00:00,"[next] Image Optimization for default loader (#5321)

We currently pass through `images` whenever its defined, but this is enabling Image Optimization in the Proxy for every Next.js project.

Instead, we should check to see if the default loader is used (the same use for `next dev`) as a signal to enable this feature in the deployment.

Related to https://github.com/vercel/next.js/issues/18122"
5ad9d6145180294de1adde5f01e2e3cf303214e5,JJ Kasper,2020-10-23 20:48:21+00:00,JJ Kasper,2020-10-23 20:48:21+00:00,"Publish Stable

 - @vercel/next@2.6.31"
8b5a2aa44f4ccca617e416bb33a242d5f000d274,JJ Kasper,2020-10-23 20:17:30+00:00,JJ Kasper,2020-10-23 20:17:30+00:00,"Publish Canary

 - @vercel/next@2.6.31-canary.0"
d0da1ce195d2845a5c0838345fb88c5248afb018,JJ Kasper,2020-10-23 19:34:17+00:00,GitHub,2020-10-23 19:34:17+00:00,"[next] Add handling for not found routes with i18n (#5313)

* Add handling for not found routes with i18n

* Update prerender lambda check"
fd5d3b2921f1d26ffff782e975e01fff209adf47,JJ Kasper,2020-10-20 18:11:20+00:00,JJ Kasper,2020-10-20 18:11:20+00:00,"Publish Stable

 - @vercel/next@2.6.30"
d22bdeb8d00d3f040e58141a35c5dc384a9f508c,JJ Kasper,2020-10-20 17:59:12+00:00,JJ Kasper,2020-10-20 17:59:12+00:00,"Publish Canary

 - @vercel/next@2.6.30-canary.0"
c120fd82f9dbc38a3225254f29ab6b232ecf89a0,JJ Kasper,2020-10-20 17:58:18+00:00,GitHub,2020-10-20 17:58:18+00:00,[next] Ensure root-most index GSP page is located correctly (#5309)
2474a80ff12ebed434b9362ae34451829beda122,JJ Kasper,2020-10-20 16:01:31+00:00,GitHub,2020-10-20 16:01:31+00:00,Correct i18n trailing slash redirect priority (#5306)
cc1cdbe610d5d4b0d6d82bfcd8186a6ec75ba603,JJ Kasper,2020-10-20 11:15:03+00:00,JJ Kasper,2020-10-20 11:15:03+00:00,"Publish Stable

 - @vercel/next@2.6.29"
0b92f8ceee19397429d32f1ff83ccbfb1697b4c4,JJ Kasper,2020-10-20 10:08:26+00:00,JJ Kasper,2020-10-20 10:08:26+00:00,"Publish Canary

 - @vercel/next@2.6.29-canary.0
 - @vercel/routing-utils@1.9.1-canary.1"
be82a88d1a88d0623afd5af85fa6c0f47926e16d,JJ Kasper,2020-10-20 10:05:06+00:00,GitHub,2020-10-20 10:05:06+00:00,"[next] Add i18n support handling  (#5298)

* Add initial locale output mapping

* Add additional probes

* Add locale specific 404 handling

* Add locale specific 404s, locale redirects, and more tests

* Update wildcard value

* Fix wildcard handling and update route type

* Update addLocale util

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>

* Remove redundant console.error

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: Leo Lamprecht <leo@zeit.co>"
64da08f0f2c050a15db02272bdd515d29a5e56b8,JJ Kasper,2020-10-20 10:00:10+00:00,JJ Kasper,2020-10-20 10:00:10+00:00,"Publish Stable

 - @vercel/next@2.6.28"
2e957fce550897711425e3a24caa75c827a277bf,Steven,2020-10-16 22:19:07+00:00,Steven,2020-10-16 22:19:07+00:00,"Publish Canary

 - @vercel/next@2.6.28-canary.0"
c7ead151f55247df23ca0611130c2907a1332d77,Steven,2020-10-16 21:56:14+00:00,GitHub,2020-10-16 21:56:14+00:00,"[next] Add support for Image Optimization (#5296)

This PR sends the results of the image optimization config from next.config.js to the build output.

x-ref: https://github.com/vercel/next.js/pull/17749"
e2baf9b00ffe508c052c457704d62ffb5350cdd4,dav-is,2020-10-14 20:48:04+00:00,dav-is,2020-10-14 20:48:04+00:00,"Publish Canary

 - @vercel/routing-utils@1.9.1-canary.0"
ba8ef7bc985d42b19c0067d62febf885b5291ee0,Connor Davis,2020-10-14 20:46:40+00:00,GitHub,2020-10-14 20:46:40+00:00,Add custom locale cookie (#5293)
c5d04e0d4f37c5466bfc0e8ba1529ae23028acb0,JJ Kasper,2020-10-13 19:40:53+00:00,JJ Kasper,2020-10-13 19:40:53+00:00,"Publish Stable

 - @vercel/next@2.6.27"
b4f849418d151aeaa2aed9bfa7e96b09b64d6b3e,JJ Kasper,2020-10-13 05:17:38+00:00,JJ Kasper,2020-10-13 05:17:38+00:00,"Publish Canary

 - @vercel/next@2.6.27-canary.0"
b37c4f211eb21658f15475011cabda468d59ee30,JJ Kasper,2020-10-13 05:13:40+00:00,GitHub,2020-10-13 05:13:40+00:00,[next] Update next.config backup name to be deterministic (#5288)
f06efe167c831cea9b275f864cdf5a511d38ced1,Daniel Roe,2020-10-12 19:01:27+00:00,GitHub,2020-10-12 19:01:27+00:00,[docs] Update contributing example of `@vercel/nft` (#5284)
296d8da676421786c6a44a44cd9a26e187cbf859,dependabot[bot],2020-10-09 14:32:15+00:00,GitHub,2020-10-09 14:32:15+00:00,"Bump next from 9.5.1 to 9.5.4 in /examples/nextjs (#5278)

Bumps [next](https://github.com/vercel/next.js) from 9.5.1 to 9.5.4.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/vercel/next.js/releases"">next's releases</a>.</em></p>
<blockquote>
<h2>v9.5.4</h2>
<p><strong>This upgrade is <em>completely backwards compatible and recommended for all users on versions below 9.5.4.</em> For future security related communications of our OSS projects, please <a href=""https://vercel.com/security"">join this mailing list</a>.</strong></p>
<p>A security team from one of our partners noticed an issue in Next.js that allowed for open redirects to occur.</p>
<p>Specially encoded paths could be used with the trailing slash redirect to allow an open redirect to occur to an external site.</p>
<p>In general, this redirect does not directly harm users although can allow for phishing attacks by redirecting to an attackers domain from a trusted domain.</p>
<p>We recommend upgrading to the latest version of Next.js to improve the overall security of your application.</p>
<h2>How to Upgrade</h2>
<ul>
<li>We have released patch versions for both the stable and canary channels of Next.js.</li>
<li>To upgrade run <code>npm install next@latest --save</code></li>
</ul>
<h2>Impact</h2>
<ul>
<li><strong>Affected</strong>: Users of Next.js between 9.5.0 and 9.5.3</li>
<li><strong>Not affected</strong>: Deployments on Vercel (<a href=""https://vercel.com"">https://vercel.com</a>) are not affected</li>
<li><strong>Not affected</strong>: Deployments using <code>next export</code></li>
</ul>
<p>We recommend everyone to upgrade regardless of whether you can reproduce the issue or not.</p>
<h3>How to Assess Impact</h3>
<p>If you think users could have been affected, you can filter logs of affected sites by <code>%2F</code> with a 308 response.</p>
<h2>What is Being Done</h2>
<p>As Next.js has grown in popularity, it has received the attention of security teams and auditors. We are thankful to those that reached out for their investigation and discovery of the original bug and subsequent responsible disclosure.</p>
<p>We've landed a patch that ensures encoding is handled properly for these types of redirects so the open redirect can no longer occur.</p>
<p>Regression tests for this attack were added to the <a href=""https://github.com/vercel/next.js/blob/canary/test/integration/production/test/security.js"">security</a> integration test suite.</p>
<ul>
<li>We have notified known Next.js users in advance of this publication.</li>
<li>A public CVE was released.</li>
<li>If you want to stay on top of our security related news impacting Next.js or other Vercel projects, please <a href=""https://zeit.co/security"">join this mailing list</a>.</li>
<li>We encourage responsible disclosure of future issues. Please email us at <strong><a href=""https://github.com/vercel/next.js/blob/HEAD/mailto:security@zeit.co"">security@vercel.com</a>.</strong> We are actively monitoring this mailbox.</li>
</ul>
<hr />
<h3>Core Changes</h3>
<ul>
<li>Make the image post-processor ignore SVG images: <a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/16732"">#16732</a></li>
<li>Only update lookups for dev overlay if mounted: <a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/16776"">#16776</a></li>
<li>Ensure interpolating dynamic href values works correctly: <a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/16774"">#16774</a></li>
<li>Add automatic reloading when editing GS(S)P methods: <a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/16744"">#16744</a></li>
<li>Update to show build indicator while re-fetching GS(S)P data in dev: <a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/16789"">#16789</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/vercel/next.js/commit/658810815035e55a7031f27c5a6f3c01baa31ccf""><code>6588108</code></a> v9.5.4</li>
<li><a href=""https://github.com/vercel/next.js/commit/7108567b06bba6586296fe2bb7e6957410147c8f""><code>7108567</code></a> v9.5.4-canary.25</li>
<li><a href=""https://github.com/vercel/next.js/commit/5d79a8c0c4928d718e71707cf3305a51c9a5adc4""><code>5d79a8c</code></a> Update workflow step to restore cache (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17656"">#17656</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/4c38e3ed8ec402862ea6b42b02297f8c28ab9b53""><code>4c38e3e</code></a> fix typo (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17653"">#17653</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/241f38eaa8aa2199360dc28d76759c936f16cdd6""><code>241f38e</code></a> v9.5.4-canary.24</li>
<li><a href=""https://github.com/vercel/next.js/commit/7dec91175cb69f773fa623417e0e497acc606dc2""><code>7dec911</code></a> change anonymous functions to named in docs examples (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17510"">#17510</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/1659e4da617db3effc63f1dd919ce628eb59e135""><code>1659e4d</code></a> Update migrating from Gatsby docs. (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17636"">#17636</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/06a8b1ad67b07ffae68cba7863ba31b53fc8b95d""><code>06a8b1a</code></a> Add docs on how to migrate from Gatsby. (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17491"">#17491</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/04234cc312b7b780a52ba6f9f63490d5699da4a3""><code>04234cc</code></a> Update to use hasNextSupport for custom-routes in next export check (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17630"">#17630</a>)</li>
<li><a href=""https://github.com/vercel/next.js/commit/742f5d9a46ed5244409ea0389d019fce375f28e3""><code>742f5d9</code></a> test(create-next-app): increase coverage (<a href=""https://github-redirect.dependabot.com/vercel/next.js/issues/17507"">#17507</a>)</li>
<li>Additional commits viewable in <a href=""https://github.com/vercel/next.js/compare/v9.5.1...v9.5.4"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=next&package-manager=npm_and_yarn&previous-version=9.5.1&new-version=9.5.4)](https://docs.github.com/en/github/managing-security-vulnerabilities/configuring-github-dependabot-security-updates)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/vercel/vercel/network/alerts).

</details>"
981e4183c61fa98206fe0414a7991395def5c301,Steven,2020-10-08 13:10:16+00:00,Steven,2020-10-08 13:10:16+00:00,"Publish Stable

 - @vercel/build-utils@2.5.4
 - vercel@20.1.2
 - @vercel/client@9.0.3
 - @vercel/node@1.8.4
 - @vercel/routing-utils@1.9.0"
1706a00cb9d0053992f7c0dc1cac5a7f7c4e6a54,Steven,2020-10-06 13:10:41+00:00,Steven,2020-10-06 13:10:41+00:00,"Publish Canary

 - @vercel/build-utils@2.5.4-canary.0
 - vercel@20.1.2-canary.5
 - @vercel/client@9.0.3-canary.0"
d7bd03cf1d0ff75f53ef29f1ac801271d8f2e218,Steven,2020-10-06 13:09:02+00:00,GitHub,2020-10-06 13:09:02+00:00,"[build-utils] Fix framework ""CRA"" when Next.js is dependency (#5246)

Fixes https://github.com/vercel/vercel/discussions/4288#discussioncomment-88998

This was fixed when ""Framework: Other"" in #5009 but this PR fixes it when ""Framework: CRA"" or any framework selection."
e27ff8d2e04fbf1d648c1c6c6e0f0c6589a6ef83,dav-is,2020-10-05 22:14:54+00:00,dav-is,2020-10-05 22:14:54+00:00,"Publish Canary

 - vercel@20.1.2-canary.4"
bc6da39cc24b298ff17d244965ca53da90ac2d7d,RAJPRAKASH,2020-10-05 22:08:29+00:00,GitHub,2020-10-05 22:08:29+00:00,"[examples] Fix link to gatsby live example  (#5205)

Fixes the link in the gatsby example back to the repo.

Co-authored-by: Steven <steven@ceriously.com>"
727109c64a5cd8989cc94019986b0cee28b718b7,dav-is,2020-10-05 22:03:21+00:00,dav-is,2020-10-05 22:03:21+00:00,"Publish Canary

 - @vercel/routing-utils@1.8.5-canary.0"
817410a8e2135c26e3e6b2cc0e27cc259b63d181,Connor Davis,2020-10-05 21:25:21+00:00,GitHub,2020-10-05 21:25:21+00:00,"[routing-utils] Add locale to routes schema (#5259)

We need to add a `locale` property to `routes`: CH-12345, CH-12349"
e022e7b79c02e289dbfbceefa804371a133a5293,Steven,2020-10-05 19:20:29+00:00,Steven,2020-10-05 19:20:29+00:00,"Publish Canary

 - vercel@20.1.2-canary.3"
dda6c24a3da57e077b9d7b6d58be7156be0da9f3,Steven,2020-10-05 19:10:20+00:00,GitHub,2020-10-05 19:10:20+00:00,"[cli] Fix progress bar completion (#5260)

In some rare cases, the progress bar will still be in progress when the deployment completes, which causes the  ""Inspect"" URL to print on the same line as the progress bar instead of a new line.

This PR fixes that corner case."
7c922a4092a77c6587bedc13d7ce2934a9687080,Steven,2020-10-05 17:48:37+00:00,GitHub,2020-10-05 17:48:37+00:00,"[cli] Remove 1.0 path alias rules (#5258)

We don't support routing path aliases anymore, now that we've completely shut down the ZEIT Now 1.0 infrastructure. This PR removes path alias rules from Vercel CLI."
376dec8f33d78ce911b72962fd8fd58d0d2bb0a2,Steven,2020-10-02 23:18:35+00:00,Steven,2020-10-02 23:18:35+00:00,"Publish Canary

 - vercel@20.1.2-canary.2"
16e101d26264aa26a1f90bc96cc8f71b3f602d1d,Steven,2020-10-02 22:46:53+00:00,GitHub,2020-10-02 22:46:53+00:00,"[cli] Fix dev routing when using `routes` with a frontend framework (#5253)

There was a regression when introducing multiple phases such as `hit` and `miss` which caused `routes` to stop working because the transition from `null` phase to the `filesystem` phase resets any dest rewrites.

The workaround is to detect when we don't have a `filesystem` phase and exit early."
41ce1a4291db29437f0511fb35f03e2ec02f7bdb,Nathan Rajlich,2020-09-25 17:00:24+00:00,Nathan Rajlich,2020-09-25 17:00:24+00:00,"Publish Canary

 - vercel@20.1.2-canary.1
 - @vercel/node@1.8.4-canary.0"
449f35cf33cf04b65d5c136a24b0ee486a3af11a,Nathan Rajlich,2020-09-24 22:18:09+00:00,GitHub,2020-09-24 22:18:09+00:00,"[node] Only use the project's local ""typescript"" when it has compatible `ScriptTarget` (#5220)

https://app.clubhouse.io/vercel/story/8304"
d683402bbaeee553d294a94bcedbfb5358c51e72,Nathan Rajlich,2020-09-23 20:23:44+00:00,Nathan Rajlich,2020-09-23 20:23:44+00:00,"Publish Canary

 - vercel@20.1.2-canary.0"
2051a1cd9b1e9460c902229d3c51746d80d570c1,Nathan Rajlich,2020-09-23 20:16:51+00:00,GitHub,2020-09-23 20:16:51+00:00,"[cli] Ensure the `devProcessPort` is set during ""upgrade"" events (#5226)

Related to: https://twitter.com/raymondcamden/status/1308838251902521348"
1eeeaf23a175150eddfa8676054abd89e5db8bf1,Steven,2020-09-21 19:12:38+00:00,Steven,2020-09-21 19:12:38+00:00,"Publish Stable

 - @vercel/build-utils@2.5.3
 - vercel@20.1.1
 - @vercel/client@9.0.2
 - @vercel/next@2.6.26
 - @vercel/node@1.8.3
 - @vercel/static-build@0.17.9"
f347164b6c676acfdc45d6ebbd0e0c40284a3808,Steven,2020-09-18 21:51:03+00:00,Steven,2020-09-18 21:51:03+00:00,"Publish Canary

 - vercel@20.1.1-canary.8"
ea4be8a0014367c969ab614d7e0a16648e48a140,Steven,2020-09-18 20:02:35+00:00,GitHub,2020-09-18 20:02:35+00:00,"[tests] Delay deprecation message (#5210)

Follow up to #5158 to add longer delay.

There is an issue with npm consistency after publishing so we wait longer before deprecating the `now` package because its a little larger than the others."
19ac74d59ebf8fd6388090051894b695f1fc9504,JJ Kasper,2020-09-16 00:21:01+00:00,JJ Kasper,2020-09-16 00:21:01+00:00,"Publish Canary

 - vercel@20.1.1-canary.7
 - @vercel/client@9.0.2-canary.5
 - @vercel/next@2.6.26-canary.3
 - @vercel/node@1.8.3-canary.2
 - @vercel/static-build@0.17.9-canary.1"
9a87d4ea8e15387ffa91ac1e15028cdbc0a4e2f6,JJ Kasper,2020-09-15 15:28:19+00:00,GitHub,2020-09-15 15:28:19+00:00,"[next] Fix API page check (#5196)

This corrects the `isApiPage` check to not incorrectly detect `/api-docs` as an API route. 

Note: tests won't pass until a new canary with the below Next.js PR has been landed

x-ref: https://github.com/vercel/next.js/pull/17092
Closes: https://github.com/vercel/next.js/issues/17091"
35fd7b5f9c628f9304cd9d2dcce9446ec4a2c1c7,Albert Martin,2020-09-14 13:08:15+00:00,GitHub,2020-09-14 13:08:15+00:00,"[static-build] Fix `immutable` cache header for Vue assets (#5070)

We have started migrating our projects to use Vue CLI with the Vercel zero-config builders. One particularly bug we ran into was due to the `Cache-Control` headers automatically applied on these resources that [differ from the documentation](https://vercel.com/docs/edge-network/caching#static-files):

> By default we return a `Cache-Control` header containing `public, max-age=0, must-revalidate` to prevent clients (e.g. browsers) from caching the file locally.

Instead of these headers, we were seeing `immutable` on all our resources. This is a good assumption for a vanilla Vue CLI setup because by default a content hash is used on every chunk, even the entry, which will change as soon as the file contents change. However, this may not always be the case, particularly on Vue CLI projects with any modifications to the build process, custom plugins, etc. that may exclude one or more files from the hash.

In our case this was breaking things in dramatic ways every time we deployed (and we deploy quite often!). Since the resources were being sent with the `immutable` header, the client browser was persisting these in cache and subsequent deployments with potentially breaking changes caused errors that were only resolved by clearing the client browser cache.

Example:

```
dist
 css
    app.db598b39.css
    common.css
 js
    app.ac201ece.js
    chunk-587c608b.7d4361a1.js
    chunk-vendors.00676d62.js
    common.js
 index.html
```

In the above example, `common.css` and `common.js` are not hashed, but still have an `immutable` header preventing them from being re-validated by the client browser when a new deployment modifies their content.

To solve for this, I've updated the RegExp for Vue CLI to only apply the `immutable` caching header on files which have a content hash. This should solve for both vanilla Vue CLI setups and more advanced ones in which there may exist both files with and without a content hash.

Co-authored-by: Steven <steven@ceriously.com>"
eb8db258458438a75d8ef275b14ad755a607b541,Steven,2020-09-11 22:46:32+00:00,GitHub,2020-09-11 22:46:32+00:00,"[cli] Remove v1 messages and docs (#5183)

We removed v1 support in [20.0.0](https://github.com/vercel/vercel/releases/tag/vercel%4020.0.0) so this PR removes the unused documentation, warning messages, etc."
5c3cd1707436bf2bae9467c3facc617871c5db90,Steven,2020-09-11 14:02:07+00:00,GitHub,2020-09-11 14:02:07+00:00,"[tests] Cache token when possible (#5179)

This PR solves an issue where tests would sometimes be rate limited when generating a token. This can be solved by caching the token like we do for E2E tests.

Example failure: https://github.com/vercel/vercel/runs/1098030228#step:11:9376

I also update the `@vercel/node` tests to compare the error message, exactly like how we do it with `@vercel/static-build`."
72572ba6be3e3de8a630bc0e9745406af4c4a565,Nathan Rajlich,2020-09-11 00:20:10+00:00,Nathan Rajlich,2020-09-11 00:20:10+00:00,"Publish Canary

 - @vercel/build-utils@2.5.3-canary.1
 - vercel@20.1.1-canary.6
 - @vercel/client@9.0.2-canary.4
 - @vercel/node@1.8.3-canary.1
 - @vercel/static-build@0.17.9-canary.0"
b69a41a0aa6184c48eea2bc26299e6b7369fdab5,Nathan Rajlich,2020-09-11 00:18:30+00:00,GitHub,2020-09-11 00:18:30+00:00,"[node] Use `ts.readConfigFile()` to parse user's `tsconfig.json` file (#5180)

TypeScript supports comments in the `tsconfig.json` file, which is not
compatible with `JSON.parse()` so we have to use the built-in function
to parse the config file.

Fixes #4835."
7c35d7992b9262deee49317f791af66eb87b65cc,dependabot[bot],2020-09-10 22:50:00+00:00,GitHub,2020-09-10 22:50:00+00:00,"Bump node-fetch from 2.6.0 to 2.6.1 (#5176)

Bumps [node-fetch](https://github.com/bitinn/node-fetch) from 2.6.0 to 2.6.1.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href=""https://github.com/bitinn/node-fetch/releases"">node-fetch's releases</a>.</em></p>
<blockquote>
<h2>v2.6.1</h2>
<p><strong>This is an important security release. It is strongly recommended to update as soon as possible.</strong></p>
<p>See <a href=""https://github.com/node-fetch/node-fetch/blob/master/docs/CHANGELOG.md#v261"">CHANGELOG</a> for details.</p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a href=""https://github.com/node-fetch/node-fetch/blob/master/docs/CHANGELOG.md"">node-fetch's changelog</a>.</em></p>
<blockquote>
<h2>v2.6.1</h2>
<p><strong>This is an important security release. It is strongly recommended to update as soon as possible.</strong></p>
<ul>
<li>Fix: honor the <code>size</code> option after following a redirect.</li>
</ul>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/b5e2e41b2b50bf2997720d6125accaf0dd68c0ab""><code>b5e2e41</code></a> update version number</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/2358a6c2563d1730a0cdaccc197c611949f6a334""><code>2358a6c</code></a> Honor the <code>size</code> option after following a redirect and revert data uri support</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/8c197f8982a238b3c345c64b17bfa92e16b4f7c4""><code>8c197f8</code></a> docs: Fix typos and grammatical errors in README.md (<a href=""https://github-redirect.dependabot.com/bitinn/node-fetch/issues/686"">#686</a>)</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/1e99050f944ac435fce26a9549eadcc2419a968a""><code>1e99050</code></a> fix: Change error message thrown with redirect mode set to error (<a href=""https://github-redirect.dependabot.com/bitinn/node-fetch/issues/653"">#653</a>)</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/244e6f63d42025465796e3ca4ce813bf2c31fc5b""><code>244e6f6</code></a> docs: Show backers in README</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/6a5d192034a0f438551dffb6d2d8df2c00921d16""><code>6a5d192</code></a> fix: Properly parse meta tag when parameters are reversed (<a href=""https://github-redirect.dependabot.com/bitinn/node-fetch/issues/682"">#682</a>)</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/47a24a03eb49a49d81b768892aee10074ed54a91""><code>47a24a0</code></a> chore: Add opencollective badge</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/7b136627c537cb24430b0310638c9177a85acee1""><code>7b13662</code></a> chore: Add funding link</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/5535c2ed478d418969ecfd60c16453462de2a53f""><code>5535c2e</code></a> fix: Check for global.fetch before binding it (<a href=""https://github-redirect.dependabot.com/bitinn/node-fetch/issues/674"">#674</a>)</li>
<li><a href=""https://github.com/node-fetch/node-fetch/commit/1d5778ad0d910dbd1584fb407a186f5a0bc1ea22""><code>1d5778a</code></a> docs: Add Discord badge</li>
<li>Additional commits viewable in <a href=""https://github.com/bitinn/node-fetch/compare/v2.6.0...v2.6.1"">compare view</a></li>
</ul>
</details>
<details>
<summary>Maintainer changes</summary>
<p>This version was pushed to npm by <a href=""https://www.npmjs.com/~akepinski"">akepinski</a>, a new releaser for node-fetch since your current version.</p>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=node-fetch&package-manager=npm_and_yarn&previous-version=2.6.0&new-version=2.6.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/configuring-github-dependabot-security-updates)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/vercel/vercel/network/alerts).

</details>"
290fdc0506f868851bf49ffd79d5643ce86283bc,JJ Kasper,2020-09-10 18:15:27+00:00,JJ Kasper,2020-09-10 18:15:27+00:00,"Publish Canary

 - @vercel/next@2.6.26-canary.2"
fc2d9f99e612c496055272b753ed5e575d0c08ab,JJ Kasper,2020-09-10 14:24:36+00:00,GitHub,2020-09-10 14:24:36+00:00,"[next] Optimize page loading for shared lambdas (#5156)

This updates to prevent loading all pages at once for shared lambdas and waits to require the page when it's needed

Fixes https://github.com/vercel/next.js/issues/16990"
1fd24fb4fc163ea2bf928b94b8d200abc07f376a,Steven,2020-09-10 00:40:33+00:00,Steven,2020-09-10 00:40:33+00:00,"Publish Canary

 - vercel@20.1.1-canary.5
 - @vercel/next@2.6.26-canary.1"
17c72f1d3552754de42190634865000d28d79408,Steven,2020-09-09 23:41:12+00:00,GitHub,2020-09-09 23:41:12+00:00,"[next] Fix config `functions` src file (#5168)

The [functions](https://vercel.com/docs/configuration#project/functions) property matches source files and it wasn't working for `index.js` or `.ts` files because `next build` converts the source file `pages/api/index.js` to the output `.next/server/pages/api.js`. So this PR fixes the logic to reverse the output page to source file."
9c1154c108bc1d8584a50c9d2949bb1cc767788b,Steven,2020-09-09 22:08:14+00:00,GitHub,2020-09-09 22:08:14+00:00,[tests] Fix test for functions in vercel.json (#5169)
613c384ce8792477631be530689028635d46f964,dav-is,2020-09-09 13:59:50+00:00,dav-is,2020-09-09 13:59:50+00:00,"Publish Canary

 - @vercel/build-utils@2.5.3-canary.0
 - vercel@20.1.1-canary.4
 - @vercel/client@9.0.2-canary.3
 - @vercel/next@2.6.26-canary.0
 - @vercel/node@1.8.3-canary.0"
a9598d14e3afcd2ccb7cd18d5cd8e81e4d745973,Gianmarco,2020-09-08 20:48:52+00:00,GitHub,2020-09-08 20:48:52+00:00,[docs] Fix typo in error message (#5141)
48935e92d8600768e63d406abef03b0bb254bdba,Connor Davis,2020-09-08 15:23:28+00:00,GitHub,2020-09-08 15:23:28+00:00,Remove extra newline in warning (#5165)
1b1e72ab884c02ed9169e34e4076e0e7146539ed,Steven,2020-09-08 13:56:26+00:00,Steven,2020-09-08 13:56:26+00:00,"Publish Stable

 - @vercel/build-utils@2.5.2
 - @vercel/next@2.6.25
 - @vercel/node@1.8.2"
0f574f67f62fa8fb3e76025d8ae5df0cb9a15417,Steven,2020-09-08 13:49:41+00:00,GitHub,2020-09-08 13:49:41+00:00,"[examples] Update Ember with missing robots.txt (#5164)

Fixes https://github.com/emberjs/ember.js/issues/19132

Source: https://github.com/ember-cli/ember-new-output/blob/master/public/robots.txt"
0d4be3f5f223bbaf6602b8754127326d323b00ad,Steven,2020-09-05 19:16:56+00:00,Steven,2020-09-05 19:16:56+00:00,"Publish Canary

 - @vercel/build-utils@2.5.2-canary.2
 - vercel@20.1.1-canary.3
 - @vercel/client@9.0.2-canary.2
 - @vercel/next@2.6.25-canary.2
 - @vercel/node@1.8.2-canary.2"
a971c2aa3ab96e1be92a8ff6b96483edf63c2723,Steven,2020-09-05 19:13:48+00:00,GitHub,2020-09-05 19:13:48+00:00,"[tests] Delay deprecation message (#5158)

This PR is a follow up to #5157 which was unable to deprecate a package immediately after publishing and failed with E405. So this PR adds a delay between publish and deprecate. It also uses the `-f` flag suggested in the error message. https://github.com/vercel/vercel/runs/1076007594#step:6:649"
66414bd65a9cd067cf5c41f1bfab2ea0b05ee806,Steven,2020-09-05 17:54:34+00:00,Steven,2020-09-05 17:54:34+00:00,"Publish Canary

 - @vercel/build-utils@2.5.2-canary.1
 - vercel@20.1.1-canary.2
 - @vercel/client@9.0.2-canary.1
 - @vercel/next@2.6.25-canary.1
 - @vercel/node@1.8.2-canary.1"
3b021993b5dfea7e35bae61f1cc8cdc61754d22c,Steven,2020-09-05 17:49:20+00:00,GitHub,2020-09-05 17:49:20+00:00,"[tests] Fix deprecation message (#5157)

This PR is a follow up to #5119 which had the names backwards.

I fixed the variable names to avoid the confusion since ""new"" and ""old"" were ambiguous.

I also removed the incorrect deprecation message from packages published during commit c9597dc199bb040b5677605fcf6bf57e0356a5e7."
c9597dc199bb040b5677605fcf6bf57e0356a5e7,JJ Kasper,2020-09-05 05:16:18+00:00,JJ Kasper,2020-09-05 05:16:18+00:00,"Publish Canary

 - @vercel/build-utils@2.5.2-canary.0
 - vercel@20.1.1-canary.1
 - @vercel/client@9.0.2-canary.0
 - @vercel/next@2.6.25-canary.0
 - @vercel/node@1.8.2-canary.0"
1b5c94b392acd0c546fbfd01d69acf83dd239dbf,Steven,2020-09-05 05:13:54+00:00,GitHub,2020-09-05 05:13:54+00:00,"[node][next] Fix nft tracing for monorepos (#5143)

Co-authored-by: Joe Haddad <joe.haddad@zeit.co>
Co-authored-by: JJ Kasper <jj@jjsweb.site>"
bd1393a9d64b085f780adf53e0a5de55d39ab110,dav-is,2020-09-04 22:40:25+00:00,dav-is,2020-09-04 22:40:25+00:00,"Publish Canary

 - vercel@20.1.1-canary.0"
47ddd36fec01827eb21a2071a9da53d36e2a62a9,dependabot[bot],2020-09-04 21:33:56+00:00,GitHub,2020-09-04 21:33:56+00:00,"[cli] Update `http-proxy` to v1.18.1 (#5152)

Bumps [http-proxy](https://github.com/http-party/node-http-proxy) from 1.17.0 to 1.18.1.
- [Release notes](https://github.com/http-party/node-http-proxy/releases)
- [Changelog](https://github.com/http-party/node-http-proxy/blob/master/CHANGELOG.md)
- [Commits](https://github.com/http-party/node-http-proxy/compare/1.17.0...1.18.1)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
bd047cdc6a46811d98c092973540a5a03fb8c683,dependabot[bot],2020-09-04 21:33:32+00:00,GitHub,2020-09-04 21:33:32+00:00,"Update `tree-kill` to v1.2.2 (#5151)

Bumps [tree-kill](https://github.com/pkrumins/node-tree-kill) from 1.2.1 to 1.2.2.
- [Release notes](https://github.com/pkrumins/node-tree-kill/releases)
- [Commits](https://github.com/pkrumins/node-tree-kill/compare/v1.2.1...v1.2.2)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
477f9e87537bdad31c41ce22302f056bc77269e5,Connor Davis,2020-09-04 21:25:52+00:00,GitHub,2020-09-04 21:25:52+00:00,"[cli] Fix color and indention in learn more link (#5148)

CH-568

Before:
![image](https://user-images.githubusercontent.com/11590024/92258007-2883e080-eea4-11ea-8c14-af0f3c9e27a6.png)

After:
![Screenshot-2020-09-04-11:44](https://user-images.githubusercontent.com/11590024/92258023-3174b200-eea4-11ea-9170-0acd4d6f883b.png)"
183ea42f94a3ed1b2b2c6392d7ccd035d9ef630a,Mike Hartington,2020-08-31 18:58:52+00:00,GitHub,2020-08-31 18:58:52+00:00,[examples] chore(ionic-angular): remove Google Maps API key (#5130)
57a17eb4162f4da286bb026f7b8c02e15ef3f06c,Steven,2020-08-28 19:39:06+00:00,GitHub,2020-08-28 19:39:06+00:00,"[tests] Deprecate ""now"" npm package in favor of ""vercel"" (#5119)

We deprecated all the `now` scoped packages in favor of the `vercel` equivalents, however the deprecation message disappears after each publish, so we must to run `npm deprecate` after `npm publish` for legacy packages."
be24510f16047610cf5081a2439ec0976c2b60e6,Steven,2020-08-28 00:01:15+00:00,Steven,2020-08-28 00:01:15+00:00,"Publish Stable

 - @vercel/frameworks@0.1.1
 - @vercel/build-utils@2.5.1
 - vercel@20.1.0
 - @vercel/client@9.0.1
 - @vercel/go@1.1.6
 - @vercel/next@2.6.24
 - @vercel/node@1.8.1
 - @vercel/python@1.2.3
 - @vercel/ruby@1.2.4
 - @vercel/static-build@0.17.8
 - @vercel/redwood@0.1.1"
05c534d8555f1665a1c8be0b784a218d23fc3d97,Steven,2020-08-27 23:39:21+00:00,Steven,2020-08-27 23:39:21+00:00,"Publish Canary

 - @vercel/frameworks@0.1.1-canary.0
 - @vercel/build-utils@2.5.1-canary.1
 - vercel@20.0.1-canary.2
 - @vercel/client@9.0.1-canary.1
 - @vercel/go@1.1.6-canary.0
 - @vercel/node@1.8.1-canary.0
 - @vercel/python@1.2.3-canary.0
 - @vercel/ruby@1.2.4-canary.0
 - @vercel/static-build@0.17.8-canary.0
 - @vercel/redwood@0.1.1-canary.0"
910169dba77e33e01fe1402c9dec8753a3170ffd,Shu Ding,2020-08-27 23:37:50+00:00,GitHub,2020-08-27 23:37:50+00:00,"[cli] Add support for the sourceFilesOutsideRootDirectory option (#5113)

If the value is set to `true` in the project settings, we don't cd into `rootDirectory`. 
We default it to `true` for new projects."
0fc74feddcf0a5777ead14738171ad2dfd2e7077,Steven,2020-08-26 15:03:34+00:00,GitHub,2020-08-26 15:03:34+00:00,"[all] Bump ncc to 0.24.0 (#5103)

- Bump ncc to [0.24.0](https://github.com/vercel/ncc/releases/tag/0.24.0)
- Install ncc in each package that depends on it"
a9ea294514d91690c1bf5de269f50acd3c4edc96,Naoyuki Kanezawa,2020-08-26 13:14:39+00:00,GitHub,2020-08-26 13:14:39+00:00,fix framework names (#5104)
42e0450d87d8438594959af76ae4d1462f452113,Steven,2020-08-26 02:13:26+00:00,Steven,2020-08-26 02:13:26+00:00,"Publish Canary

 - vercel@20.0.1-canary.1
 - @vercel/next@2.6.24-canary.0"
08c0feb58aafe1fa41c32b59a3cbb69064c062ef,Guy Bedford,2020-08-26 02:12:25+00:00,GitHub,2020-08-26 02:12:25+00:00,"[cli] Improve startup perf - disable source maps and minification (#5100)

Currently on my machine, vercel --version takes 850ms to run. With this change, that execution time is reduced to ~550ms.

The reason is that source maps seem to significantly slow down Node.js execution, compounded by the size of the source map, even if it is not used.

I believe the benefits of this perf improvement outweigh the direct source maps and minification benefits.

If it is felt that direct per-file source maps are necessary for internal errors, then reducing the source map size should be investigated further to improve the runtime performance here."
60aaf76ed263267e0ae6d43e495d7b685eccf64f,Mark Glagola,2020-08-25 23:39:34+00:00,GitHub,2020-08-25 23:39:34+00:00,"[cli] Fix `vc domains ls` pagination (#5099)

Fixes pagination for vercel cli `domains ls --next <timestamp>`"
bd706beba5c8022a41e78ad6b3c303f3a6726272,Matthew Sweeney,2020-08-25 18:51:46+00:00,GitHub,2020-08-25 18:51:46+00:00,"[examples] Update README Files (#5092)

This PR updates the `README.md` files with the following changes:

- Removal of CLI deployment.
- Amends Blitz.js to be in line with other `README.md` formats."
b85a0a349af988f32f1e6d054c26f648f4e2808e,JJ Kasper,2020-08-24 16:32:30+00:00,GitHub,2020-08-24 16:32:30+00:00,"[next] Add test case for root optional revalidate params (#5072)

This adds test cases from https://github.com/vercel/next.js/pull/16451 which are currently failing and will pass after a new canary of Next.js has been published"
a97bc2af6db03833a2f751e041cf1d969a72b9c1,Steven,2020-08-24 15:19:44+00:00,Steven,2020-08-24 15:19:44+00:00,"Publish Canary

 - @vercel/build-utils@2.5.1-canary.0
 - vercel@20.0.1-canary.0
 - @vercel/client@9.0.1-canary.0"
a5dc90c8cd209aa84f477c2a115b1236c2d42064,Steven,2020-08-24 15:16:32+00:00,GitHub,2020-08-24 15:16:32+00:00,"Revert ""[build-utils] Use `handle: error` for api 404"" (#5088)

* Revert ""[build-utils] Use `handle: error` for api 404 (#5064)""

This reverts commit 02e1c921ace539b4ab4dc94eb2568d8141277ad2.

* Re-enable cli changes

* Re-enable redwood changes

* Minor cleanup"
e90521b5a4c1ddb8f11d4ece60edfbee2c7a2f36,Steven,2020-08-24 12:25:30+00:00,Steven,2020-08-24 12:25:30+00:00,"Publish Stable

 - @vercel/frameworks@0.1.0
 - @vercel/build-utils@2.5.0
 - vercel@20.0.0
 - @vercel/client@9.0.0
 - @vercel/go@1.1.5
 - @vercel/next@2.6.23
 - @vercel/node@1.8.0
 - @vercel/routing-utils@1.8.4
 - @vercel/static-build@0.17.7
 - @vercel/redwood@0.1.0"
10c598834a1bf74ebad2710f47bdc79562916948,Steven,2020-08-21 21:53:14+00:00,Steven,2020-08-21 21:53:14+00:00,"Publish Canary

 - @vercel/build-utils@2.4.3-canary.5
 - vercel@20.0.0-canary.26
 - @vercel/client@8.2.2-canary.10"
e58b34b82c739c54d7d11ab4d076249dbbef7aa6,Steven,2020-08-21 21:51:40+00:00,GitHub,2020-08-21 21:51:40+00:00,"[build-utils] Fix framework ""Other"" with Next.js for old projects (#5074)

Since released PR #5009, we had some users that depend on the broken behavior. This adds an arbitrary date so that old projects will use the old broken behavior, and new projects will use the new behavior from #5009.

The reason for the date is that we don't want to force users to create new projects who noticed this broken behavior months ago like this discussion: https://github.com/vercel/vercel/discussions/4138

Its better to be a bit aggressive and set the date far back because users with that want the old behavior have a workaround: select Next.js in the framework dropdown. However, users that want the new behavior with an old project will be stuck without a solution."
02e1c921ace539b4ab4dc94eb2568d8141277ad2,Steven,2020-08-21 20:29:39+00:00,GitHub,2020-08-21 20:29:39+00:00,"[cli][build-utils] Use `handle: error` for api 404 (#5064)

This PR does a few things:

- Consolidates build-utils to use both 404 routes in `handle: error` phase
- Fixes `vc dev` to process `handle: error` phase after the `handle: filesystem` phase
- Updates `/api` 404 route to be excluded for frameworks like RedwoodJS which use their own functions"
fcb14fa70e800ff2bf387120ebdaf65affea6661,Steven,2020-08-19 22:26:12+00:00,Steven,2020-08-19 22:26:12+00:00,"Publish Canary

 - @vercel/redwood@0.0.2-canary.8"
46e18128c732b5df9d48ff088b3e347584847310,Steven,2020-08-19 22:16:53+00:00,GitHub,2020-08-19 22:16:53+00:00,"[redwood] Add support for `functions` and  `apiProxyPath` config (#5063)

This PR adds two missing features to `@vercel/redwood`:

1. Support for [`functions`](https://vercel.com/docs/configuration#project/functions) in `vercel.json`
2. Support for [`apiProxyPath`](https://redwoodjs.com/docs/app-configuration-redwood-toml#apiproxypath) in `redwood.toml`
3. Support for caching yarn workspaces which has `node_modules` outside the root directory"
e06d5247ef1675d167d081b3cff7422e0a8d1697,dav-is,2020-08-19 20:40:45+00:00,dav-is,2020-08-19 20:40:45+00:00,"Publish Canary

 - vercel@20.0.0-canary.25
 - @vercel/client@8.2.2-canary.9"
02195b92a7767c6c9064f84bfcac881501eb50f7,Connor Davis,2020-08-19 20:19:28+00:00,GitHub,2020-08-19 20:19:28+00:00,"[client][cli] Add Learn More Option to Warnings (#5022)

The deployment API might return a learn more link to address warnings, tips, or notices

CH-568

```
HTTP/2 200
...
x-vercel-warning-bad-error: Something went wrong
x-vercel-link-bad-error: https://vercel.link/bad-error

x-vercel-notice-low-funds: You are low on funds
x-vercel-link-low-funds: https://vercel.link/increase-funds
...
```

Should output as:
```
Warning: Something went wrong
Learn More: https://vercel.link/bad-error

Notice: You are low on funds
Learn More: https://vercel.link/increase-funds
```"
7945155a0f1c3a3df25e1c1185e270c6d564ec73,Andy Bitz,2020-08-19 13:01:35+00:00,Andy Bitz,2020-08-19 13:01:35+00:00,"Publish Canary

 - vercel@20.0.0-canary.24
 - @vercel/next@2.6.23-canary.0
 - @vercel/node@1.7.5-canary.2
 - @vercel/routing-utils@1.8.4-canary.5"
edb6043c2c38b4d5308ba84c96641939acd8f0f7,Andy,2020-08-19 13:00:33+00:00,GitHub,2020-08-19 13:00:33+00:00,"[cli] Always show renewal price for `domains inspect` (#5060)

* [cli] Always show renwal price for `domains inspect`

* Update test"
971481ba51b60112e2c8b4d9764df6ab9954d9a4,Markoz Pea,2020-08-18 22:58:54+00:00,GitHub,2020-08-18 22:58:54+00:00,"[node] Add `res.redirect()` helper method (#4947)

This pull request adds a method redirect, the behavior will be the same as that of Next.js with `pages/api`. This PR takes into account the change that is being made in Next.js with redirect due to the [error that was reported](https://github.com/vercel/next.js/issues/15594) a few hours ago.

Co-authored-by: Steven <steven@ceriously.com>"
db8e456603a6747da0c6e1327ec65488896de07f,JJ Kasper,2020-08-18 17:37:22+00:00,JJ Kasper,2020-08-18 17:37:22+00:00,"Publish canary

- @vercel/routing-utils@1.8.4-canary.4"
d1b4f24a4aacdc72aa6543346c4174163f41737c,JJ Kasper,2020-08-18 17:25:16+00:00,JJ Kasper,2020-08-18 17:25:16+00:00,"Publish Stable

- @vercel/next@2.6.22"
4eb39ed53bb7e845824c0ac306e553afb5b74a96,JJ Kasper,2020-08-18 17:19:58+00:00,JJ Kasper,2020-08-18 17:19:58+00:00,"Publish Canary

- @vercel/next@2.6.22-canary.1
- @vercel/routing-utils@1.8.4-canary.3"
6c7236ffd5920d92433cdf09ea09057594b763d0,JJ Kasper,2020-08-18 16:57:38+00:00,GitHub,2020-08-18 16:57:38+00:00,"[routing-utils] Attempt normal path-to-regexp replacing before custom (#5053)

This corrects behavior that was changed when switching to use `safelyCompile` which caused some `path-to-regexp` replacing behavior to be changed like not removing brackets `{}` around params which are removed in Next.js. This updates to first attempt to use the normal replacing behavior from `path-to-regexp` falling back to the safe compiling logic added when that fails. 

Additional tests have been added to ensure the brackets are stripped as expected when compiling with `path-to-regexp`"
f0def040aca8c3f5d18913e24b3d086edca59285,Steven,2020-08-17 21:32:42+00:00,Steven,2020-08-17 21:32:42+00:00,"Publish Canary

 - vercel@20.0.0-canary.23
 - @vercel/next@2.6.22-canary.0"
ee8dff2dc986002aec318a9c862659b02f381f8b,Steven,2020-08-17 21:28:17+00:00,GitHub,2020-08-17 21:28:17+00:00,"[cli] Remove unused dependencies (#5052)

This PR is a follow up to removing v1 in PR #5011"
df86a6d48cb73eece29d7e50ac3dc333f4725641,Steven,2020-08-17 20:15:12+00:00,GitHub,2020-08-17 20:15:12+00:00,"[cli] Fix update message (#5051)

The update message was sometimes printed when there was no update.

This PR fixes the update check to ensure the that it is only printed when the latest version differs from the current version."
b3958b3d12c1d6eee32cae90a186bc387381cead,JJ Kasper,2020-08-17 14:48:34+00:00,JJ Kasper,2020-08-17 14:48:34+00:00,"Publish Stable

- @vercel/next@2.6.21"
8dd22703a7d0cde1ceec20f2d0fd56e7fe9adcaa,JJ Kasper,2020-08-17 14:36:53+00:00,JJ Kasper,2020-08-17 14:36:53+00:00,"Publish Canary

 - @vercel/next@2.6.21-canary.1"
c7e2280d231443917ecab2fffefdf0aea2a5bb78,JJ Kasper,2020-08-17 14:12:22+00:00,GitHub,2020-08-17 14:12:22+00:00,"[next] Fix trailing slash and 404 with next export (#5048)

This fixes the case where `trailingSlash: true` is used with `next export` causing the `404` page to be output as `404/index.html` and we were previously only checking for the 404 output at `404`. This also adds a regression test for this behavior. 

Closes: https://github.com/vercel/next.js/issues/16218"
2c239a6ee25ba0e29ccfb6462653a02ede48c82a,Steven,2020-08-14 22:32:42+00:00,Steven,2020-08-14 22:32:42+00:00,"Publish Canary

 - vercel@20.0.0-canary.22
 - @vercel/next@2.6.21-canary.0
 - @vercel/routing-utils@1.8.4-canary.2"
43709fbc745d2d7c1ab05c631607e65a9d180ddc,Steven,2020-08-14 22:26:46+00:00,GitHub,2020-08-14 22:26:46+00:00,"Remove unused dependencies (#5042)

The CLI doesn't depend on `@vercel/redwood` for `vc dev` since PR #5036 so we can remove it.

Similarly, zero config does not install `@vercel/next` or `@vercel/static-build` during `vc dev` so these can be removed too.

In the case where the user defines `builds` in vercel.json, the runtimes will be installed during the first run of `vc dev`."
52cd486e1d3ce5b6a6ddfcb67b741c8d8791d9af,JJ Kasper,2020-08-14 21:17:28+00:00,JJ Kasper,2020-08-14 21:17:28+00:00,"Publish Stable

- @vercel/next@2.6.20"
175f302a7fe7c373ebbee0e82c8e23e7deb44f1b,JJ Kasper,2020-08-14 20:36:58+00:00,JJ Kasper,2020-08-14 20:36:58+00:00,"Publish Canary

- @vercel/next@2.6.20-canary.1
- @vercel/routing-utils@1.8.4-canary.1"
070bbd5825b7ec05e41322b8d8ee6b5a61cff875,JJ Kasper,2020-08-14 15:59:21+00:00,GitHub,2020-08-14 15:59:21+00:00,"[routing-utils] Update rewrite params query appending (#5040)

This updates to not automatically append params to the query for rewrites if one or more of the params are already used in the destination's path. No other behavior is being changed and if the user still wants the params in the query after using them in the destination's path they can manually add them like with redirects.

x-ref: https://github.com/vercel/next.js/pull/16189"
cdeb4004c94ed054bf069bc28a10fc0e41748c36,Steven,2020-08-13 23:58:42+00:00,Steven,2020-08-13 23:58:42+00:00,"Publish Canary

 - vercel@20.0.0-canary.21
 - @vercel/redwood@0.0.2-canary.7"
6bb162e5f50702b5787c5a7f573160f632141453,Steven,2020-08-13 23:53:17+00:00,GitHub,2020-08-13 23:53:17+00:00,"[cli][redwood] Update frontend framework detection in `vc dev` (#5036)

This PR uses the the new property added in PR #5034 to determine if a framework has a frontend runtime defined.

It also reverts a couple workarounds add in PR #4937 which was added for RedwoodJS which is no longer necessary since RedwoodJS defines a frontend framework the same way Next.js does."
828244293934439370463b050eec5514323c1c32,Steven,2020-08-13 19:22:15+00:00,Steven,2020-08-13 19:22:15+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.5
 - @vercel/build-utils@2.4.3-canary.4
 - vercel@20.0.0-canary.20
 - @vercel/client@8.2.2-canary.8
 - @vercel/redwood@0.0.2-canary.6"
1f4f2af2f254a3f3a3108f741076f0decde2283f,Steven,2020-08-13 19:18:31+00:00,GitHub,2020-08-13 19:18:31+00:00,"[build-utils][frameworks] Add support for runtime properties (#5034)

This PR adds two properties to `frameworks.json`:

1. `useRuntime` - this moves the special case for non `@vercel/static-build` frontends, so that any framework can do the same as Next.js and RedwoodJS
2. `ignoreRuntimes` - this allows a framework to opt out of api detection such as RedwoodJS which handle's its own `.js` extensions

This also fixes 2 bugs discovered during implementing the feature:

1. `test-unit.yml` was not testing Node 12, it was testing 10 for both runs
2. `sortFilesBySegmentCount()` was non-deterministic causing node 10 and 12 to sort differently"
f1bb0e465aa770c8814899af3761f5bf18a5fbe7,Steven,2020-08-13 13:31:08+00:00,GitHub,2020-08-13 13:31:08+00:00,"[tests] Increase git fetch depth to support git 2.28 (#5032)

This PR fixes the CI error `fatal: origin/master...HEAD: no merge base`.

Git 2.28 change here: https://github.com/git/git/commit/1457886ce2004c49661c8769f3a5246f6a340c8d

More info here: https://github.com/pre-commit/pre-commit/issues/1554"
6dab4399c202341903ab3b348c9bce699633c19f,Steven,2020-08-12 23:25:14+00:00,Steven,2020-08-12 23:25:14+00:00,"Publish Canary

 - vercel@20.0.0-canary.19
 - @vercel/client@8.2.2-canary.7"
e87465d07657ad08c8fbb272736ff9d09d7fc3ea,Max Leiter,2020-08-12 23:22:21+00:00,GitHub,2020-08-12 23:22:21+00:00,"[cli][client] (Major) Remove legacy Now CLI 1.0 code (#5011)

It was easier to make a new PR than re-base the old ones:

https://github.com/zeit/now/pull/4017
https://github.com/vercel/vercel/pull/4602

Story: https://app.clubhouse.io/vercel/story/425/remove-all-the-zeit-now-1-0-code-from-vercel-cli"
2f53b0dcdbf84bfc3ad92d97dfe8a10f223dd88c,Steven,2020-08-12 12:08:57+00:00,Steven,2020-08-12 12:08:57+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.4
 - vercel@20.0.0-canary.18
 - @vercel/redwood@0.0.2-canary.5"
b2e5212d0f21804de18c2812af8a5ba4cd21f2db,Steven,2020-08-11 19:08:18+00:00,GitHub,2020-08-11 19:08:18+00:00,"[redwood] Update default build command (#5020)

This PR updates the default build command per @thedavidprice 

It also uses `@vercel/frameworks` as a source of truth for the build command.

If the user has a `build` script in `package.json`, that will take precedence over the default."
28c9999c10ffba8b12b06cdda5bd67a8db36b089,Steven,2020-08-10 21:54:00+00:00,Steven,2020-08-10 21:54:00+00:00,"Publish Canary

 - vercel@20.0.0-canary.17
 - @vercel/redwood@0.0.2-canary.4"
edb31fb412f42b25a3202b4e21d9c5ddb64a7247,Steven,2020-08-10 21:20:13+00:00,GitHub,2020-08-10 21:20:13+00:00,"[redwood] Fix file permissions and add support for `build` script (#4999)

Some files require execution privileges, such as Prisma, so we must preserve the file mode.

We also want redwood to behave the same as other frameworks and use `yarn build` if available."
2f0ea24552ed7a14d45e7250b11fa9e10496bcf6,Andy Bitz,2020-08-10 20:05:12+00:00,Andy Bitz,2020-08-10 20:05:12+00:00,"Publish Canary

 - vercel@20.0.0-canary.16"
7d09fdc5a438733d9b101d4854294202946e88da,Andy,2020-08-10 20:04:18+00:00,GitHub,2020-08-10 20:04:18+00:00,"[cli] Update `domains` command output (#5018)

* [cli] Update `domain` command output

* Undo debug output

* Empty commit"
23dce48b23ac4dd3f0baac97c83eb63ee9016afc,Steven,2020-08-10 17:00:57+00:00,Steven,2020-08-10 17:00:57+00:00,"Publish Canary

 - @vercel/build-utils@2.4.3-canary.3
 - vercel@20.0.0-canary.15
 - @vercel/client@8.2.2-canary.6
 - @vercel/static-build@0.17.7-canary.3"
d7d308ca0948dcb0a2be5f61d819ba9013f1d0d9,Steven,2020-08-10 16:49:26+00:00,GitHub,2020-08-10 16:49:26+00:00,"[build-utils] Fix framework ""Other"" when Next.js is dependency (#5009)

- Fixes discussion #4138
- Related to issue #3774"
0e412361ad064ba568cd5f79b6052efcc5aac6ed,Steven,2020-08-07 23:37:17+00:00,GitHub,2020-08-07 23:37:17+00:00,"[tests] Fix Github Actions CI (#5010)

We're seeing some strange failures during `git diff` so I added it earlier to see if it fails earlier."
d563a99fb8494ab2d7713bc0d563bf5fbcd04aa2,Yamagishi Kazutoshi,2020-08-07 20:14:55+00:00,GitHub,2020-08-07 20:14:55+00:00,"[static-build] Add Docusaurus v2 default routes for assets (#4973)

Reference: https://v2.docusaurus.io/docs/markdown-features/#assets

Co-authored-by: Steven <steven@ceriously.com>"
6ce4c2e182f49ffecc60f406d1fb243a31aa3364,Steven,2020-08-06 14:10:40+00:00,Steven,2020-08-06 14:10:40+00:00,"Publish Canary

 - vercel@20.0.0-canary.14
 - @vercel/client@8.2.2-canary.5
 - @vercel/next@2.6.20-canary.0
 - @vercel/static-build@0.17.7-canary.2"
e31d6d4062206bf1ad178b602e0200627824d26d,Max Leiter,2020-08-06 03:41:56+00:00,GitHub,2020-08-06 03:41:56+00:00,"[client] Lower upload sempahore size from 700 to 50 connections (#4993)

CH Story:

https://app.clubhouse.io/vercel/story/5291/cli-connection-pooling

(Mac) script for watching count of active connections to API: 
`watch -n 0.1 'netstat -a -n | grep -E \'(13.52.46.156|52.9.164.177)\' | wc -l'`

Limiting the active connections to 50 greatly decreased the amount of active connections but did not noticeably increase the time to upload files. 

For each semaphore size below, I tested uploading 200 files of random size (between 50kb and 100kb) 5 times. More tests on varying file sizes / amounts showed similar results. 

Results:
```
Size: Average time in ms
50  : 25740 ms 
700 : 28763 ms
10  : 29339 ms
```

I also moved the the agent creation outside of the forEach loop when uploading. This is functionally the same (as node would use the same socket for the same hostname) but makes it easier to access the agent object if we need to debug in the future, and it seems unnecessary to create a new object each call."
f2f421b494b49a6bd0c72bed6721792fa2ae2bc8,Nathan Rajlich,2020-08-05 22:57:28+00:00,GitHub,2020-08-05 22:57:28+00:00,"[cli] Default to `os.EOL` when creating `.gitignore` file (#4991)

This fixes the scenario where 1) is Windows and 2) there is no
`.gitignore` file in the project, so `vc link` creates one. Before, it was
defaulting to `\n`. Updated to use `os.EOL` so that `\r\n` is used on
Windows.

Also removed `encoding` option to `writeFile()` since `utf8` is already the
default.

Related to #4965."
46836e12b5b026b36504e81e69ee20e0abb696df,Nathan Rajlich,2020-08-05 20:26:58+00:00,GitHub,2020-08-05 20:26:58+00:00,"[client] (Major) Remove trailing `/` from default ignore list (#4810)

The trailing slash ends up making the root directory be accepted,
causing the ignore logic to traverse one level deep into the directory
that should be ignored. Removing the slash makes the root directory be
correctly ignored so that traversing one level into the ignored
directory is avoided, which is less work to do and thus is faster.

Before:

```
> [debug] [2020-07-07T23:22:05.768Z] Locating files /Users/nrajlich/project
> [debug] [2020-07-07T23:22:05.769Z] Ignoring /Users/nrajlich/project/.editorconfig
> [debug] [2020-07-07T23:22:05.769Z] Ignoring /Users/nrajlich/project/.git
> [debug] [2020-07-07T23:22:05.769Z] Ignoring /Users/nrajlich/project/.gitignore
> [debug] [2020-07-07T23:22:05.769Z] Ignoring /Users/nrajlich/project/.next
> [debug] [2020-07-07T23:22:05.769Z] Ignoring /Users/nrajlich/project/.vercel
> [debug] [2020-07-07T23:22:05.770Z] Ignoring /Users/nrajlich/project/.vercelignore
> [debug] [2020-07-07T23:22:05.770Z] Ignoring /Users/nrajlich/project/README.md
> [debug] [2020-07-07T23:22:05.770Z] Ignoring /Users/nrajlich/project/dist
> [debug] [2020-07-07T23:22:05.774Z] Ignoring /Users/nrajlich/project/node_modules/.bin
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/.yarn-integrity
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@ampproject
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@babel
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@mrmlnc
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@next
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@nodelib
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@tootallnate
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@types
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@typescript-eslint
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@vercel
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@webassemblyjs
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/@xtuc
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/acorn
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/acorn-jsx
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/adjust-sourcemap-loader
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/aggregate-error
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/ajv
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/ajv-errors
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/ajv-keywords
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/ally.js
> [debug] [2020-07-07T23:22:05.775Z] Ignoring /Users/nrajlich/project/node_modules/alphanum-sort
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/anser
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/ansi-escapes
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/ansi-regex
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/ansi-styles
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/anymatch
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/aproba
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/argparse
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/aria-query
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/arity-n
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/arr-diff
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/arr-flatten
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/arr-union
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/array-find-index
> [debug] [2020-07-07T23:22:05.776Z] Ignoring /Users/nrajlich/project/node_modules/array-includes

many more

> [debug] [2020-07-07T23:25:19.854Z] Locating files /Users/nrajlich/project: 20.117ms
```

After:

```
> [debug] [2020-07-07T23:24:37.403Z] Locating files /Users/nrajlich/project
> [debug] [2020-07-07T23:24:37.413Z] Ignoring /Users/nrajlich/project/.editorconfig
> [debug] [2020-07-07T23:24:37.414Z] Ignoring /Users/nrajlich/project/.git
> [debug] [2020-07-07T23:24:37.414Z] Ignoring /Users/nrajlich/project/.gitignore
> [debug] [2020-07-07T23:24:37.414Z] Ignoring /Users/nrajlich/project/.next
> [debug] [2020-07-07T23:24:37.414Z] Ignoring /Users/nrajlich/project/.vercel
> [debug] [2020-07-07T23:24:37.415Z] Ignoring /Users/nrajlich/project/.vercelignore
> [debug] [2020-07-07T23:24:37.415Z] Ignoring /Users/nrajlich/project/README.md
> [debug] [2020-07-07T23:24:37.415Z] Ignoring /Users/nrajlich/project/dist
> [debug] [2020-07-07T23:24:37.416Z] Ignoring /Users/nrajlich/project/node_modules
> [debug] [2020-07-07T23:25:19.854Z] Locating files /Users/nrajlich/project: 2.117ms
```

- Related to #3980
- Related to #3747
- Related to #4325 
- Related to #4627"
3fc2611bf05b888f8098d3d912488de3c029443a,Luis Alvarez D,2020-08-05 19:11:12+00:00,GitHub,2020-08-05 19:11:12+00:00,"[examples] Update Next.js Example (#4984)

Related to https://github.com/vercel/docs/pull/2047 - The Next.js docs page will mention features from 9.5, but the current starter is quite outdated."
b4d8c411bd95658c790c1a573db7f834d75144a9,Steven,2020-08-05 17:53:29+00:00,GitHub,2020-08-05 17:53:29+00:00,"[examples][static-build] Update ionic-angular to 5.1.1 (#4986)

This PR adds the missing `package-lock.json` file and updates to latest `ionic-angular` boilerplate."
82b7d6980c14ba50855f2256e7dffb3df54720a7,JJ Kasper,2020-08-05 16:31:59+00:00,JJ Kasper,2020-08-05 16:31:59+00:00,"Publish Stable

- @vercel/next@2.6.19"
895b23360568ae77e63dcb6cf297461f52ba0004,JJ Kasper,2020-08-05 16:31:00+00:00,JJ Kasper,2020-08-05 16:31:00+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.3
 - vercel@20.0.0-canary.13
 - @vercel/next@2.6.19-canary.1"
d9e6b5348b32ef97923da186f7fdeb322fd67c60,Joe Haddad,2020-08-05 15:49:45+00:00,GitHub,2020-08-05 15:49:45+00:00,[next] Blocking Fallback (ISG) Support (#4985)
1934a64864e0814e36490fc9bb4f0a292e2f6b4f,Mark Glagola,2020-08-04 23:38:53+00:00,GitHub,2020-08-04 23:38:53+00:00,"[cli][certs rm] (Major) Bump to v5 certs API (#4943)

Bumps certs API from `/v3` to  `/v5`.

_Removing auto generated certs will be blocked in `/v5`_"
c4126426687211e89254f314d47cecf5b7e2f6d8,Steven,2020-08-04 22:34:55+00:00,GitHub,2020-08-04 22:34:55+00:00,"[cli] Handle unauthorized errors when user is not logged in (#4975)

We don't need to report these errors to Sentry because the user attempted a command that requires them to login.

https://sentry.io/organizations/vercel/issues/1498276418/?project=1323225

This will print:
- `NOT_AUTHORIZED`: ""The specified token is not valid. Use vc login to generate a new token.""
- `TEAM_DELETED`: ""Your team was deleted. You can switch to a different one using vc switch""

### Related 
- Related to #4082 
- Related to #3857"
793fe9aee13c0fb5bd70bb339186027e48547f7f,Steven,2020-08-04 21:15:25+00:00,GitHub,2020-08-04 21:15:25+00:00,"[tests] Update cancel action to 0.4.1 (#4980)

Bump `cancel-workflow-action` to [0.4.1](https://github.com/styfle/cancel-workflow-action/releases/tag/0.4.1) to fix a bug where the wrong branch was cancelled."
ddc54d2ca404a2f22a94d788f49a73fd8fa969e9,Joe Haddad,2020-08-04 21:01:33+00:00,GitHub,2020-08-04 21:01:33+00:00,[next] Run `prettier` (#4979)
39e5f0a3649e944029cea03f379b479610fd79e8,Steven,2020-08-04 19:49:09+00:00,GitHub,2020-08-04 19:49:09+00:00,"[frameworks][examples] Adjust redwood logo size (#4976)

- Rename redwood logo to redwoodjs to match framework slug
- Update size to 48x48 to match other logos"
43ed9ec8597953761b76b16dc2440d3f9088fd72,Steven,2020-08-04 18:58:22+00:00,GitHub,2020-08-04 18:58:22+00:00,"[cli] Fix tests for `.gitignore` append during project link (#4978)

Fixes tests from #4965"
8ba44fca7926e705506b73deeeef4941460f7291,Kid,2020-08-04 17:29:08+00:00,GitHub,2020-08-04 17:29:08+00:00,"[cli] Fix `.gitignore` append during project link (#4965)

* [cli] fix .gitignore updating check

* Detect file EOL

* Semicolon

* Add trailing newline

Co-authored-by: Nathan Rajlich <n@n8.io>"
27dbefaecfb04020506152a66143621375737874,Andy Bitz,2020-08-04 17:10:28+00:00,Andy Bitz,2020-08-04 17:10:28+00:00,"Publish Canary

 - vercel@20.0.0-canary.12
 - @vercel/next@2.6.19-canary.0"
b4a13913c77eb2237db583234b0d7dd6b329a7da,Andy,2020-08-04 16:49:46+00:00,GitHub,2020-08-04 16:49:46+00:00,"[cli] Adjust output for recently changed domain commands (#4959)

* [cli] Adjust output for recently changed domain commands

* Update the inspect and list page

* Remove test

* Update packages/now-cli/src/commands/domains/inspect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Change output

* Remove workaround

* Update error

* Include contextName

Co-authored-by: Steven <steven@ceriously.com>"
f842266b2e86a7e3bf401ac83a27eca7246136a1,JJ Kasper,2020-08-04 14:27:01+00:00,JJ Kasper,2020-08-04 14:27:01+00:00,"Publish Stable

- @vercel/next@2.6.18"
ad0cc858ed08685d313ccd5d4ac90a3c8ad63b32,JJ Kasper,2020-08-04 14:06:29+00:00,JJ Kasper,2020-08-04 14:06:29+00:00,"Publish Canary

 - vercel@20.0.0-canary.11
 - @vercel/next@2.6.18-canary.0
 - @vercel/node@1.7.5-canary.1"
4bb7180de9350ef1a8b4674ba920da722e73066b,JJ Kasper,2020-08-04 03:35:50+00:00,GitHub,2020-08-04 03:35:50+00:00,"[next] Ensure trailing slash resolves to functions correctly (#4972)

This makes sure the routes mapping to the serverless functions handle the trailing slash being present or not. This also adds additional test cases to ensure it is functioning correctly"
7a4faa480d6680ae9ec4b20690f586a1062864a6,Steven,2020-08-03 15:09:52+00:00,GitHub,2020-08-03 15:09:52+00:00,"[node][next] Bump node-file-trace to 0.8.2 (#4969)

Bump `node-file-trace` to [0.8.2](https://github.com/vercel/node-file-trace/releases/tag/0.8.2)"
421be5d7386c6c7b4da9cf2daf5fa87738b55c0c,JJ Kasper,2020-07-31 15:29:04+00:00,JJ Kasper,2020-07-31 15:29:04+00:00,"Publish Stable

- @vercel/next@2.6.17"
b8eaf10974272cf444a99817ded2975509b1bd75,JJ Kasper,2020-07-31 15:20:59+00:00,JJ Kasper,2020-07-31 15:20:59+00:00,"Publish Canary

 - vercel@20.0.0-canary.10
 - @vercel/next@2.6.17-canary.1"
92a4bf27cfc314e35ac145306d2b5ee2f3026dd8,JJ Kasper,2020-07-31 15:17:14+00:00,GitHub,2020-07-31 15:17:14+00:00,"[next] Fix monorepo build edge case without build script (#4956)

This fixes an edge case where a monorepo Next.js app fails to build due to running `next build` manually instead of via `package.json` scripts like we previously were doing. 

Failing project with current `@vercel/next` running `next build` manually: https://vercel.com/jj4/test2020/15fhg1ko3
Succeeding project running changing back to running `next build` through a `package.json` script: https://vercel.com/jj4/test2020/dths5f1nv

x-ref: https://github.com/vercel/vercel/pull/4863
Fixes: https://github.com/vercel/next.js/issues/15713"
2672838b6431e1ea0bc39518a7af38d1a18089c7,Steven,2020-07-31 13:15:51+00:00,Steven,2020-07-31 13:15:51+00:00,"Publish Canary

 - vercel@20.0.0-canary.9
 - @vercel/next@2.6.17-canary.0
 - @vercel/redwood@0.0.2-canary.3"
1c96071ddc58e05c6a11b20860a3032da7bb3bc9,Steven,2020-07-31 13:14:04+00:00,GitHub,2020-07-31 13:14:04+00:00,"[cli][redwood] Update redwood port detection in `vc dev` (#4937)

Fixes redwood support for `vc dev`"
71cdf759da4c11e6cd1252b341b168db82ad8711,Steven,2020-07-31 00:40:41+00:00,GitHub,2020-07-31 00:40:41+00:00,"[tests] Ignore custom next 404 (#4955)

Commenting out this test assertion until we can fix it in #4946"
93ebd213def6dbb39bed86e972b30cb48e98c007,Torsten Dittmann,2020-07-30 22:44:39+00:00,GitHub,2020-07-30 22:44:39+00:00,[examples] Update deprecated and outdated Svelte example packages (#4706)
a32ba8f21487eb3f9f4935856c16aba7dc43cadf,JJ Kasper,2020-07-30 19:15:29+00:00,JJ Kasper,2020-07-30 19:15:29+00:00,"Publish Stable

- @vercel/next@2.6.16"
d416f70a6e84549be896f0f2450fccd07007803e,JJ Kasper,2020-07-30 18:45:26+00:00,JJ Kasper,2020-07-30 18:45:26+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.2
 - vercel@20.0.0-canary.8
 - @vercel/next@2.6.16-canary.0
 - @vercel/node@1.7.5-canary.0
 - @vercel/routing-utils@1.8.4-canary.0
 - @vercel/redwood@0.0.2-canary.2"
ba9e1dd0bae9a8b418c26204dfd2aa2108892bd9,JJ Kasper,2020-07-30 18:22:30+00:00,GitHub,2020-07-30 18:22:30+00:00,"[routing-utils] Update header replacing to handle more cases (#4942)

This adds handling for more cases while updating header values to make sure to escape any characters that could break compiling with `path-to-regexp`

x-ref: https://github.com/vercel/next.js/pull/15592"
d513f74b701d70cd6e7d5107054202e746848800,Steven,2020-07-30 14:52:04+00:00,GitHub,2020-07-30 14:52:04+00:00,"[frameworks][redwood] Bump to RedwoodJS to 0.15.0 (#4953)

Implements https://github.com/redwoodjs/redwood/pull/904"
47f92f8f142de510d845feccc5ffe638e1aba229,JJ Kasper,2020-07-29 20:43:53+00:00,JJ Kasper,2020-07-29 20:43:53+00:00,"Publish Stable

- @vercel/next@2.6.15
- @vercel/node@1.7.4"
9aa669d735323988aa11d488f8e3f8da53e7f2e4,JJ Kasper,2020-07-29 20:41:14+00:00,JJ Kasper,2020-07-29 20:41:14+00:00,"Publish Canary

 - vercel@20.0.0-canary.7
 - @vercel/next@2.6.15-canary.0"
99cab6f34a5b390f2f0624e98db827678f0e8f3e,JJ Kasper,2020-07-29 20:36:13+00:00,GitHub,2020-07-29 20:36:13+00:00,"[next] Fix lambda opt-out for index page (#4950)

This makes sure we detect a fully static `/index` page correctly since the `prerender-manifest` lists it as `/` and we were expecting `/index` during the lambda building opt-out check

x-ref: https://github.com/vercel/next.js/discussions/15619"
547e7dccf700f49d264acaad912a9f9e7062c504,JJ Kasper,2020-07-29 17:49:28+00:00,GitHub,2020-07-29 17:49:28+00:00,"[next] Add test cases for route /index handling (#4002)

This adds some test cases for `/index` handling to ensure we are being consistent with local development and production"
dce9a8940754757238dfd9837987125f66a8fa7d,JJ Kasper,2020-07-29 13:55:06+00:00,JJ Kasper,2020-07-29 13:55:06+00:00,"Publish Stable

- @vercel/next@2.6.14"
c1cdddd974e18e575d0150f778367b9823cd8df6,Steven,2020-07-28 21:29:59+00:00,Steven,2020-07-28 21:29:59+00:00,"Publish Canary

 - vercel@20.0.0-canary.6"
4bce77dd4b2c599519762d1cabd6168d3780753b,Steven,2020-07-28 21:28:53+00:00,GitHub,2020-07-28 21:28:53+00:00,"[cli] Fix `vercel link` command when `vercel.json` contains `builds` (#4940)

This PR fixes a bug when running `vercel link` command in a directory with `vercel.json` that contains `builds` property. The problem is that framework auto-detection doesn't run when `builds` is used, only for zero config. So we skip the API and instead create the project without auto-detection during `vc link`."
3a798109440fae15524331d752510f014b86acd7,Steven,2020-07-28 00:53:09+00:00,Steven,2020-07-28 00:53:09+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.1
 - vercel@20.0.0-canary.5
 - @vercel/client@8.2.2-canary.4
 - @vercel/next@2.6.14-canary.2
 - @vercel/node@1.7.4-canary.1"
5b3fbdddb346bac72d41470fa3bc9bbdcb2f0f6b,Steven,2020-07-28 00:50:45+00:00,GitHub,2020-07-28 00:50:45+00:00,"[node][next] Bump node-file-trace to 0.8.1 (#4933)

This PR bumps `node-file-trace` to [0.8.1](https://github.com/vercel/node-file-trace/releases/tag/0.8.1) to fix ESM packages used with `require()`.

Fixes https://github.com/vercel/node-file-trace/issues/141"
25e9ecb5a2c4f8be7920180a3775a0ad40e829d8,JJ Kasper,2020-07-27 23:39:25+00:00,GitHub,2020-07-27 23:39:25+00:00,"[next] Update test fixtures to latest canary (#4935)

This updates our Next.js test fixtures to run against canary. 

It looks like the mono-repo fixtures will need to be updated to run against canary separately since there may be a conflict with legacy routes and the trailing slash redirect"
415515840c7a7c766b9de6ffe4d0341850a27e0e,Nathan Rajlich,2020-07-27 21:03:16+00:00,GitHub,2020-07-27 21:03:16+00:00,"[frameworks] Update ""Other"" build command placeholder to use ""vercel-build"" (#4934)"
9ba14be12eae9f0e2101be89bd6b479bddac6627,Nathan Rajlich,2020-07-25 00:11:44+00:00,GitHub,2020-07-25 00:11:44+00:00,"[client] Export `buildFileTree()` and return the ignore list (#4917)

* [client] Export `buildFileTree()` and return the ignore list

The ignore list from this function will be used in production to
render a warning if there are files listed in the `.vercelignore` file
that are being comitted to the project's git repo.

* Tests for `ignoreList`

* Update packages/now-client/src/utils/index.ts

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
f1321946c5cd8e6b786ed0fdf801c3a819b6ec58,Steven,2020-07-24 23:22:19+00:00,GitHub,2020-07-24 23:22:19+00:00,[frameworks] Add link to demo for RedwoodJS (#4921)
230b69abf480f5737f91ff58d18b5c8ca9b3e5eb,Max Leiter,2020-07-24 23:21:52+00:00,GitHub,2020-07-24 23:21:52+00:00,"[cli] Fix external rewrites/redirects in dev (#4914)

Co-authored-by: Steven <steven@ceriously.com>"
0d96f80ac8738844cb0bccef78b8fbeab86e773e,Igor Klopov,2020-07-24 16:38:24+00:00,GitHub,2020-07-24 16:38:24+00:00,"[cli] Print build error message instead of 'Build failed' (#4908)

This PR fixes the `lambda-with-invalid-runtime` CLI test"
178f5e7f002672c519e4140b466f4e131d0e094e,Steven,2020-07-24 01:00:25+00:00,Steven,2020-07-24 01:00:25+00:00,"Publish Canary

 - @vercel/build-utils@2.4.3-canary.2
 - vercel@20.0.0-canary.4
 - @vercel/client@8.2.2-canary.3"
dbfdf20c9d26cabf51459322e1db7b0ef1679289,Steven,2020-07-24 00:33:06+00:00,GitHub,2020-07-24 00:33:06+00:00,"[build-utils] Fix redwood `/api` detection (#4916)

Previously, the zero detection would see js files in the `/api` directory and attempt to use `@vercel/node`. However, this doesn't work with RedwoodJS which uses a different format for [`/api`](https://github.com/vercel/vercel/tree/master/examples/redwoodjs/api) so we must only use `@vercel/redwood` when RedwoodJS is detected."
a80ed4ec9babb6e76aea0ca2e30c623d294f791e,Juan Campa,2020-07-23 23:48:47+00:00,GitHub,2020-07-23 23:48:47+00:00,"[api] Fix api-framework cache header (#4913)

## Problem

`api-frameworks` is not being cached by our edge when used via the fallback-to-front mechanism. That's because the headers are only applied to `/api/frameworks` but not `/api/v1/frameworks` which is the actual path being used.

## Solution

Also apply the caching headers to `/api/<version>/frameworks`"
833c3d7c0169b1f7c47a485f35e9e9315d03cfa6,Steven,2020-07-23 22:29:16+00:00,Steven,2020-07-23 22:29:16+00:00,"Publish Canary

 - @vercel/frameworks@0.0.18-canary.0
 - @vercel/build-utils@2.4.3-canary.1
 - vercel@20.0.0-canary.3
 - @vercel/client@8.2.2-canary.2
 - @vercel/redwood@0.0.2-canary.1"
19d0db7270f11f9ae33a9351c9a45fbb43354e00,Steven,2020-07-23 22:02:50+00:00,GitHub,2020-07-23 22:02:50+00:00,"[frameworks] Add autodetection for RedwoodJS (#4915)

- Supersedes #4539
- Related to #4676

Co-authored-by: Lachlan Campbell <lachlan@hackclub.com>"
041e8cc601befc5e9e745daf7c098fed4914f889,Steven,2020-07-23 20:28:44+00:00,Steven,2020-07-23 20:28:44+00:00,"Publish Canary

 - @vercel/build-utils@2.4.3-canary.0
 - vercel@20.0.0-canary.2
 - @vercel/client@8.2.2-canary.1
 - @vercel/static-build@0.17.7-canary.1
 - @vercel/redwood@0.0.2-canary.0"
b118e461b155c5ffc2ffe124578bba55d56ea42c,Steven,2020-07-23 20:22:48+00:00,GitHub,2020-07-23 20:22:48+00:00,"[redwoood] Add runtime `@vercel/redwood` (#4676)

### Changes
- Add new Runtime: `@vercel/redwood`
- Update `run.js` script to sort packages properly

### Related
- Related to #4539 
- Related to #4535
- Depends on https://github.com/apollographql/apollo-server/pull/4311"
e519d49d7b77611a7fa3cc94f6115cae8c60e816,Andy Bitz,2020-07-23 13:42:46+00:00,Andy Bitz,2020-07-23 13:42:46+00:00,"Publish Canary

 - vercel@20.0.0-canary.1"
27683818ba00fd69eb283484a6aec3dee8c0e135,Andy Bitz,2020-07-23 13:42:30+00:00,Andy Bitz,2020-07-23 13:42:30+00:00,Bump vercel to 20.0.0-canary.0
e016e382296dfa9c674fa8fe128ed1c3009268a1,Andy,2020-07-23 13:41:25+00:00,GitHub,2020-07-23 13:41:25+00:00,"[cli] (Major) Change `vc domains add` workflow to match the dashboard (#3325)

* [now-cli] Change `now domains add` workflow to match dashboard

* Fix error throwing and add --force

* Remove `now domains verify`

* Count projects when removing a domain

* Include projects for `now inspect`

* Updated `now domains ls`

* Fix `now domains ls`

* Use Finally

* Add tests

* Use --force for domain tests

* Adjust tests

* Adjust test and fix output

* Fix padding

* Adjust more tests

* Ensure the project exists

* Log the deployment

* Fix tests again

* Remove project after test

* Fix command

* Fix test

* Change user after a couple of tests

* Add check

* Use random name for domain

* More logging

* Add more logging

* Remove logging

* Remove .now/project.json every time

* Skip test

* Add test to change user

* More logging

* Use now login

* Remove duplicated test

* Consider linked project for `domains add`

* Fix linting

* Remove unused docs

* Undo changes

* Undo more changes

* Fix typo

* Do not sort projects when there is only one record

* Fix loop

* Deploy with `-V 2`

* Remove verification

* Remove outdated link

* Update packages/now-cli/src/commands/domains/add.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/now-cli/src/commands/domains/add.ts

Co-authored-by: Steven <steven@ceriously.com>

* Use utils for public suffix and service type

* Update packages/now-cli/src/commands/domains/ls.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/now-cli/src/commands/domains/add.ts

Co-authored-by: Steven <steven@ceriously.com>

* Change link

* Undo test changes

* Fix type issues

* Update packages/now-cli/src/commands/domains/add.ts

Co-authored-by: Steven <steven@ceriously.com>

* Use domain config to print info

* Check apex domain when removing a domain

* Remove psl

* List projects when removing a domain

* Do not list projects

* Change user earlier

* Update packages/now-cli/src/commands/domains/inspect.ts

Co-authored-by: Steven <steven@ceriously.com>

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>

* Apply suggestions from code review

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Mark Glagola <mark.glagola@gmail.com>
Co-authored-by: Steven <steven@ceriously.com>"
5db1c5e6105633328b80cb9b30c3e4d38e9281d5,Max Leiter,2020-07-23 01:39:05+00:00,GitHub,2020-07-23 01:39:05+00:00,"[tests] Skip `try to purchase a domain` CLI test if a VERCEL_TOKEN is provided (#4909)

I placed the check inside the test because otherwise `test.only` and other test functions break with this test."
24c228569f67b8cf41236afbf27fb2ea5a87f529,Steven,2020-07-22 20:09:26+00:00,Steven,2020-07-22 20:09:26+00:00,"Publish Canary

 - vercel@19.2.1-canary.2
 - @vercel/next@2.6.14-canary.1"
963de9b64f2a06aa7d4aeea565d1bfae3ed147b0,Steven,2020-07-22 19:13:41+00:00,GitHub,2020-07-22 19:13:41+00:00,"[cli] Update ""set up"" message (#4907)

Follow up to #4897 

* `vc link` - Update message to say `Set up ~/proj`
* `vc dev` - Update message  to say `Set up and develop ~/proj`
* `vc link --help` - Updated example message to include `vc link ~/proj` usage"
ab7fd5230571a57d523a62f0ba8b1ae6a9cfaadf,JJ Kasper,2020-07-22 18:14:47+00:00,GitHub,2020-07-22 18:14:47+00:00,"[next] Don't trace pages for lambdas when not needed (#4841)

When pages are fully static and don't leverage preview mode or revalidation we can skip tracing the pages for generating the lambdas since lambdas aren't needed in this case"
0fdb0dac91877b01e5673e199a1d390a0c31129b,Nathan Rajlich,2020-07-22 14:36:15+00:00,GitHub,2020-07-22 14:36:15+00:00,"[cli] Send the Vercel platform proxy request headers to frontend dev server (#4874)

This is a follow up to #4850 that does the same thing when
proxying to the frontend dev server."
bb0b632dcfab830a193c233dbfc668943dfda9c6,Andy Bitz,2020-07-22 11:34:40+00:00,Andy Bitz,2020-07-22 11:34:40+00:00,"Publish Canary

 - vercel@19.2.1-canary.1
 - @vercel/go@1.1.5-canary.0
 - @vercel/next@2.6.14-canary.0
 - @vercel/node@1.7.4-canary.0
 - @vercel/static-build@0.17.7-canary.0"
ced949514365adfe86d621de1b1d52b41fbe53f4,Andy,2020-07-22 11:33:36+00:00,GitHub,2020-07-22 11:33:36+00:00,"Revert ""Revert ""[go] Implement `startDevServer()` function (#4662)"" (#4899)"" (#4906)

This reverts commit 8d1afc026ff0f9e7f299e46c172ad2c4e05978b5."
fadc3f2588b26e7710b29be8b9bf253d7ba0f488,Nathan Rajlich,2020-07-22 03:04:24+00:00,GitHub,2020-07-22 03:04:24+00:00,"[next][node][static-build] Execute ""vercel-build"" script if defined (#4863)

* [build-utils] Make `runPackageJsonScript()` run the `vercel-` or `now-` if defined in `package.json`

* [build-utils] Export `getScriptName()`

* [next] Use `getScriptName()` and `remove()`

* [node] Update for `vercel-`

* [static-build] Update for `vercel-`

* Remove debug

* Add `getScriptName()` unit tests

* Test for `vercel-build` in e2e

* Make platform name behavior be opt-in

So that it's not a breaking behavior change.

* Check for only ""vercel-build"" or ""now-build"", but not ""build""

* Simplify `getScriptName()` to return the first existing script in a possible set

* Revert change

* Fix test

Co-authored-by: Joe Haddad <joe.haddad@zeit.co>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
a1d548dfeffcef5adfc6ff2039297c14abc2e1eb,Steven,2020-07-21 22:56:21+00:00,Steven,2020-07-21 22:56:21+00:00,"Publish Canary

 - vercel@19.2.1-canary.0
 - @vercel/client@8.2.2-canary.0"
754090a8abfe27450af9cc4d951cb4f207b70f7f,Steven,2020-07-21 22:52:46+00:00,GitHub,2020-07-21 22:52:46+00:00,"[cli] Add `vercel link` command (#4897)

- [x] Add `vercel link` command
- [x] Update `vercel dev` to automatically link 
- [x] Updated `vercel env` error message to mention `vercel link`
- [x] Test `vercel link`
- [x] Test `vercel dev`
- [x] Add `--confirm` flag

### Related

- Fixes #3767
- Fixes #4889 
- Fixes #3991 
- Fixes #4534 
- Related to #3989"
8269a48ee062591ddd7819157f174e637acc9921,dependabot[bot],2020-07-21 17:25:56+00:00,GitHub,2020-07-21 17:25:56+00:00,"Bump codecov from 3.6.5 to 3.7.1 (#4900)

Bumps [codecov](https://github.com/codecov/codecov-node) from 3.6.5 to 3.7.1.
<details>
<summary>Commits</summary>
<ul>
<li><a href=""https://github.com/codecov/codecov-node/commit/29dd5b6b039ce03c7bc368855896641441233417""><code>29dd5b6</code></a> 3.7.1</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/c0711c656686e902af2cd92d6aecc8074de4d83d""><code>c0711c6</code></a> Switch from execSync to execFileSync (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/180"">#180</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/5f6cc62d4f83bf3a75c973868259798814cd231e""><code>5f6cc62</code></a> Bump lodash from 4.17.15 to 4.17.19 (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/183"">#183</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/0c4d7f3c6f2950445913e7f8081b26da4b41cbad""><code>0c4d7f3</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/182"">#182</a> from codecov/update-readme-badges</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/cc5e1218426f21beaea94908775342623c27934b""><code>cc5e121</code></a> Update depstat image and urls</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/b44b44e1f8265d8f8b8f27c343283d6d2e8ee668""><code>b44b44e</code></a> Update readme with 400 error info (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/181"">#181</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/bb793357190e1d799da5b5732ef57d1e7968680a""><code>bb79335</code></a> V3.7.0 (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/179"">#179</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/0d7b9b01cbbd2c614e042a8f01cda25593dda4e5""><code>0d7b9b0</code></a> Remove <code>'x-amz-acl': 'public-read'</code> header (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/178"">#178</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/eeff4e1953bffd2a3840322764bd5c8c9d3a91f4""><code>eeff4e1</code></a> Bump acorn from 5.7.3 to 5.7.4 (<a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/174"">#174</a>)</li>
<li><a href=""https://github.com/codecov/codecov-node/commit/eb8a5274707632f821751cfce5b882cf3817ddf8""><code>eb8a527</code></a> Merge pull request <a href=""https://github-redirect.dependabot.com/codecov/codecov-node/issues/172"">#172</a> from RoboCafaz/bugfix/codebuild-pr-parser</li>
<li>Additional commits viewable in <a href=""https://github.com/codecov/codecov-node/compare/v3.6.5...v3.7.1"">compare view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=codecov&package-manager=npm_and_yarn&previous-version=3.6.5&new-version=3.7.1)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/vercel/vercel/network/alerts).

</details>"
9f05a1865c1e1c50c8a4a25b7845600d93cf8825,Andy Bitz,2020-07-21 12:58:27+00:00,Andy Bitz,2020-07-21 12:58:27+00:00,"Publish Stable

 - @vercel/frameworks@0.0.17
 - @vercel/build-utils@2.4.2
 - vercel@19.2.0
 - @vercel/client@8.2.1
 - @vercel/go@1.1.4
 - @vercel/next@2.6.13
 - @vercel/node@1.7.3
 - @vercel/static-build@0.17.6"
8d1afc026ff0f9e7f299e46c172ad2c4e05978b5,Andy,2020-07-21 12:55:59+00:00,GitHub,2020-07-21 12:55:59+00:00,"Revert ""[go] Implement `startDevServer()` function (#4662)"" (#4899)

This reverts commit 04bea1e3cdab4cad52569b7995071a08ec267b12."
130f36aad6010a942679c2f836d2aa457ee7828b,Nathan Rajlich,2020-07-21 06:11:46+00:00,Nathan Rajlich,2020-07-21 06:11:46+00:00,"Publish Canary

 - vercel@19.1.3-canary.6"
dd87c9b0c6d2e319423e13c376c563ab6e837f03,Nathan Rajlich,2020-07-21 02:51:15+00:00,Nathan Rajlich,2020-07-21 02:51:15+00:00,"Publish Canary

 - vercel@19.1.3-canary.5
 - @vercel/next@2.6.13-canary.2"
f813b3340ba891249e4edbd3ea22df5bea577982,Max Leiter,2020-07-21 02:47:13+00:00,GitHub,2020-07-21 02:47:13+00:00,"[cli] Fetch environment variables from Project Settings if `.env` file is not present (#4562)

Previously, users would have to run `vc env pull` to fetch cloud environment
variables into `.env`. After this PR, if no `.env` or `.build.env` file is present,
environment variables will be pulled by `vc dev` from your Vercel Environment
Variables settings, no file necessary."
976b02e8957ebfd92b513f3dd63742fdd06f01f6,Joe Haddad,2020-07-21 02:29:09+00:00,GitHub,2020-07-21 02:29:09+00:00,[next] Add tests for trailing slash behavior (#4894)
843be9658c285fa73a9461d6fa4f9e2324293f03,Nathan Rajlich,2020-07-20 22:31:15+00:00,GitHub,2020-07-20 22:31:15+00:00,"[cli] Use `update-notifier` instead of `update-check` (#4896)

This makes the updating logic be asynchronous instead of synchronous, and as such will make boot-up of CLI be faster.

The actual update notification display is identical to previous, we are not using `update-notifier`'s default boxen rendering."
ad501a4cd0f403d91f9208907dc05f6a73ad182f,dependabot[bot],2020-07-20 18:00:32+00:00,GitHub,2020-07-20 18:00:32+00:00,"Bump lodash from 4.17.15 to 4.17.19 (#4877)

Bumps [lodash](https://github.com/lodash/lodash) from 4.17.15 to 4.17.19.
- [Release notes](https://github.com/lodash/lodash/releases)
- [Commits](https://github.com/lodash/lodash/compare/4.17.15...4.17.19)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
727ae587dbe3582f85e252ff32c57f70c41e7c1c,Steven,2020-07-20 14:27:10+00:00,Steven,2020-07-20 14:27:10+00:00,"Publish Canary

 - @vercel/frameworks@0.0.17-canary.2
 - @vercel/build-utils@2.4.2-canary.1
 - vercel@19.1.3-canary.4
 - @vercel/client@8.2.1-canary.1
 - @vercel/next@2.6.13-canary.1
 - @vercel/node@1.7.3-canary.0"
536b15079bdf420a3526fde5e1011e1b5c642994,Steven,2020-07-20 14:24:05+00:00,GitHub,2020-07-20 14:24:05+00:00,"[node][next] Bump node-file-trace to 0.8.0 (#4814)

Bump `node-file-trace` to version [0.7.0](https://github.com/vercel/node-file-trace/releases/tag/0.7.0) and then [0.8.0](https://github.com/vercel/node-file-trace/releases/tag/0.8.0)

- Add support for `exports`, dynamic import from CJS support, package boundary emission
- Fix trailing slash in `require()`
- Import named instead of default"
887882697b2f3b151a52d4879126ac684ae69ed8,Nathan Rajlich,2020-07-16 23:44:28+00:00,GitHub,2020-07-16 23:44:28+00:00,"[cli] Remove ""npm pack"" logic from `output-is-source` dev test (#4870)

Now that `@vercel/static-build` is being symlinked to CLI due to the
yarn workspace, `vc dev` will always use the latest code for
zero-config, so this ""npm pack"" logic is no longer necessary.

The `vercel.json` also no longer gets created in this test so that
zero-config is used."
e2db7c77347fe7698a76df8f31062b9c3b1490b4,Nathan Rajlich,2020-07-16 23:42:55+00:00,GitHub,2020-07-16 23:42:55+00:00,"[build-utils] Add `getScriptName()` function (#4869)

And allow a set of possible script names to use in `runPackageJsonScript()`.

These are only the changes to `@vercel/build-utils` from #4863."
022504787c913b1134bde24d7f74201a55096942,Steven,2020-07-16 22:16:03+00:00,GitHub,2020-07-16 22:16:03+00:00,"[frameworks][examples] Update blitz new command (#4868)

Updated description per @leo"
0f424de4066236e2016e3be46560bf0bfddedbb2,Nathan Rajlich,2020-07-16 20:23:44+00:00,GitHub,2020-07-16 20:23:44+00:00,"[cli] Set `server: Vercel` header and remove `x-now` response headers in `vercel dev` (#4867)

This matches production."
4819c3ac6119a699a37c773fce918306d32ceae6,Nathan Rajlich,2020-07-15 18:04:16+00:00,Nathan Rajlich,2020-07-15 18:04:16+00:00,"Publish Canary

 - vercel@19.1.3-canary.3"
c28ca7ef2d4eb6e3e9f50acdff17ce4805890f39,Nathan Rajlich,2020-07-15 17:34:27+00:00,GitHub,2020-07-15 17:34:27+00:00,"[cli] Set Vercel platform env vars for `startDevServer()` invocations (#4855)

Ensures that `VERCEL_REGION` is set for API calls when the runtime
implements `startDevServer()`.

Also adds `VERCEL_URL` which was previously not defined."
068ea00615eb70709e3516df7b12cc6a77fb7559,Nathan Rajlich,2020-07-14 21:48:46+00:00,GitHub,2020-07-14 21:48:46+00:00,"[cli] Set Vercel proxy request headers in `startDevServer()` (#4850)

The Vercel proxy request headers (`x-vercel-deployment-url` for example)
were not being sent to the dev server when the Runtime defines
`startDevServer()`. This is now fixed.

Also updates the header names to match production:

 - `now` -> `vercel`
 - 'x-now-trace', 'x-now-id', and 'x-now-log-id' are removed

Fixes #4729."
7f8145ab4048a55e34d22e0b0ae206cddc8221f9,Paco,2020-07-14 13:53:23+00:00,GitHub,2020-07-14 13:53:23+00:00,"[cli] Minor text changes to wrong config error message (#4848)

CH-3242

From review:
- Capitalize ""Project""
- Highlight "".vercel"" in code snippet style

Thanks to @styfle for pointing me to output/code."
1a1271509609ff0e48f947d61f0a267798238cd7,Steven,2020-07-13 22:57:39+00:00,Steven,2020-07-13 22:57:39+00:00,"Publish Canary

 - @vercel/build-utils@2.4.2-canary.0
 - vercel@19.1.3-canary.2
 - @vercel/client@8.2.1-canary.0
 - @vercel/next@2.6.13-canary.0"
5b6d5653608498d8bb08cfc61b7c476ec4cf918f,Steven,2020-07-13 22:55:15+00:00,GitHub,2020-07-13 22:55:15+00:00,"[build-utils] Update error message for unmatched function pattern (#4849)

- [x] Depends on https://github.com/vercel/docs/pull/1985"
07941589062421dde1b1ea8039df4caaa961e515,JJ Kasper,2020-07-12 15:30:51+00:00,JJ Kasper,2020-07-12 15:30:51+00:00,"Publish Stable

- @vercel/next@2.6.12"
02cdb88d3bac9c05ae910170988586b25cb11891,JJ Kasper,2020-07-12 15:25:27+00:00,JJ Kasper,2020-07-12 15:25:27+00:00,"Publish Canary

 - vercel@19.1.3-canary.1
 - @vercel/next@2.6.12-canary.0"
fa5885511419697f6b46065b60a086f58359fd42,Paco,2020-07-11 03:52:02+00:00,GitHub,2020-07-11 03:52:02+00:00,"[cli] Show helpful error when using unauthorized `.vercel` config (#4807)

CH-3242

When a user has project configuration in `.vercel` that corresponds to a team that they are not a part of, we currently throw a 403 error. This adds special handling so that we can show a specific message when this happens.

I didn't want to update the return type of `getProjectByIdOrName` because we only want to handle this 403 in a special case, so I `throw` it instead.

Other changes are linter."
1fac11792fda91f7af17d056c1e43754935afbce,JJ Kasper,2020-07-10 23:52:54+00:00,GitHub,2020-07-10 23:52:54+00:00,"[next] Fix nested public files being renamed incorrectly (#4817)

This corrects the file rename for public files to not incorrectly rename nested `public` files

x-ref: https://github.com/vercel-support/next-nested-public-dir"
05ffc9ce2b1e78b0a9a0033f3fd4c4d629933d3a,Nathan Rajlich,2020-07-10 22:51:19+00:00,Nathan Rajlich,2020-07-10 22:51:19+00:00,"Publish Canary

 - @vercel/frameworks@0.0.17-canary.1
 - vercel@19.1.3-canary.0
 - @vercel/go@1.1.4-canary.0
 - @vercel/static-build@0.17.6-canary.1"
f84855104321e570637fa66d6c2e52e52c12f8cc,Nathan Rajlich,2020-07-10 22:49:35+00:00,GitHub,2020-07-10 22:49:35+00:00,"[cli] Pin `@vercel/static-build` to ""0.17.6-canary.0"" (#4837)

It got de-synced in c68e83f9726e622c3366653aee2674e35ccf4bc9."
9712abc5bf12d6fa7c3539ed28a1c545eb43ea9d,Steven,2020-07-10 20:38:19+00:00,GitHub,2020-07-10 20:38:19+00:00,"[frameworks][api] Move dependency to devdependency (#4836)

Follow up to #4829"
a9ef3cc726a319a7b1f75c827af4db94880cfc93,Nathan Rajlich,2020-07-10 19:55:53+00:00,GitHub,2020-07-10 19:55:53+00:00,"[go] Add filesystem write fallback for `startDevServer()` (#4830)

This is for `@vercel/go` to work on Windows, which currently fails with
this error:

```
panic: write pipe: The handle is invalid.

goroutine 1 [running]:
main.main()
	C:/Users/Nathan/Code/casca/vercel-go-test/.vercel/cache/go/2flefmhra8o/api/vercel-dev-server-main.go:25 +0x1ec
exit status 2
```

So this fallback writes the port number to a temp file that
`startDevServer()` polls for in order to figure out the port number."
e5cc1d643a4d7b598fdd578b648ed32a7ffb6ff9,Steven,2020-07-10 18:09:14+00:00,GitHub,2020-07-10 18:09:14+00:00,"[frameworks][api] Add sort order (#4829)

This PR adds an optional property called `sort` to each framework so that we can change the order returned in the API. 
The reason this is necessary is because the order of the original array determines the precedence of framework detection. So we need another way to indicate the order of templates/examples returned from the API.

In particular, we need ""Next.js"" to be first and ""Other"" to be last.

I also updated the deprecated `@now/node` usage to `@vercel/node` in the API."
c68e83f9726e622c3366653aee2674e35ccf4bc9,Andy Bitz,2020-07-10 16:43:39+00:00,Andy Bitz,2020-07-10 16:45:47+00:00,"Publish Canary

 - @vercel/frameworks@0.0.17-canary.0
 - @vercel/static-build@0.17.6-canary.0"
80118de04028f5cf7e50c558c2725255eb6e2b64,Sbastien Chopin,2020-07-10 16:41:02+00:00,GitHub,2020-07-10 16:41:02+00:00,"[build-utils] Add Nuxt cache and default routes (#4755)

* [@vercel/build-utils] Improve Nuxt build

Need review from @pi0 and @danielroe

* Update packages/now-static-build/src/frameworks.ts

Co-authored-by: Daniel Roe <daniel@roe.dev>

Co-authored-by: Daniel Roe <daniel@roe.dev>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
c69da18e9cc4f0cc0e5c74f8c4e0880c2dec0f3a,Sbastien Chopin,2020-07-10 15:55:29+00:00,GitHub,2020-07-10 15:55:29+00:00,"fix: Also handle nuxt-edge detection (#4756)

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
e19446f89c3461c774b2d545f027766bcb372d05,Steven,2020-07-10 15:20:44+00:00,Steven,2020-07-10 15:20:44+00:00,"Publish Stable

 - @vercel/frameworks@0.0.16
 - @vercel/build-utils@2.4.1
 - vercel@19.1.2
 - @vercel/client@8.2.0
 - @vercel/go@1.1.3
 - @vercel/next@2.6.11
 - @vercel/node@1.7.2
 - @vercel/ruby@1.2.3
 - @vercel/static-build@0.17.5"
ea3233502d780da89cd368018fc3bb148cfa7b11,JJ Kasper,2020-07-10 02:30:31+00:00,JJ Kasper,2020-07-10 02:30:31+00:00,"Publish Stable

- @vercel/next@2.6.10"
0a8810b64fbfc31e9e904b0ead5b5b7a97804a6e,JJ Kasper,2020-07-10 02:29:18+00:00,JJ Kasper,2020-07-10 02:29:18+00:00,"Publish Canary

 - vercel@19.1.2-canary.22
 - @vercel/next@2.6.10-canary.2"
f6b373f0f4005fae89bd1c7ce30bef74b5eb1a3e,JJ Kasper,2020-07-10 02:22:17+00:00,GitHub,2020-07-10 02:22:17+00:00,"[next] Fix preview mode with dynamic routes in shared lambdas (#4812)

This fixes dynamic routes missing inside of shared lambdas for non-revalidate pages that leverage preview mode which causes them to not be able to render. Additional tests have also been added to ensure preview mode is working properly"
7ad2a99cd7bbb57cbda13e9850443d1a67ed5b69,Steven,2020-07-09 23:42:50+00:00,Steven,2020-07-09 23:42:50+00:00,"Publish Canary

 - @vercel/frameworks@0.0.16-canary.2
 - @vercel/build-utils@2.4.1-canary.3
 - vercel@19.1.2-canary.21
 - @vercel/client@8.1.1-canary.3
 - @vercel/next@2.6.10-canary.1
 - @vercel/static-build@0.17.5-canary.1"
0349eea494a28f109a21c16c48fc1252a7f21726,JJ Kasper,2020-07-09 23:37:13+00:00,GitHub,2020-07-09 23:37:13+00:00,"[next] Add pages with invalid route regexes (#4813)

This adds failing page names to our tests which should be resolved once the correct regexes is being generated for the routes-manifest in Next.js

Co-authored-by: Joe Haddad <joe.haddad@zeit.co>
Co-authored-by: Steven <steven@ceriously.com>"
ed4d006fb792dd1c19ab9cc00c0530c8939832a8,Luc,2020-07-09 23:31:04+00:00,GitHub,2020-07-09 23:31:04+00:00,"replace ""more details"" with ""learn more"" (#4828)

Follow up to PR #4825. Replace more ""More details"" with ""Learn More""."
12a9d203e9623ac173bffc067f6cf26b32d87447,Steven,2020-07-09 21:57:18+00:00,GitHub,2020-07-09 21:57:18+00:00,"[cli] Handle 400 errors as user errors (#4827)

When a user performs an action such as trying to add a domain they don't own, the API returns a 400-499 response code.

Previously, we would save this error in Sentry but this PR changes the behavior so that the error is printed locally for the user but not saved in Sentry."
ac1f4cf789f3c3f7bcf09aee62b8a89c9699ad43,Luc,2020-07-09 20:14:30+00:00,GitHub,2020-07-09 20:14:30+00:00,"[cli] Handle API Error `action` property (#4825)

* handle error action

* fix test"
b284ca350a729de31bea87fe7dc5e193459541a1,Steven,2020-07-09 17:28:38+00:00,GitHub,2020-07-09 17:28:38+00:00,"Revert ""[frameworks] Remove blitz demo (#4816)"" (#4826)

This reverts commit f11eb32b2c8d8b6c3bc868d43a84517a6f09deb3.

Reverts PR #4816

This PR adds back the Blitz.js demo now that we confirmed the example works and is deployed to the correct account."
a43bf6c912b6d03405b71dfcb347e76941cb6890,Steven,2020-07-09 15:56:11+00:00,GitHub,2020-07-09 15:56:11+00:00,"[cli][static-build] Use titlecase for ""Project Settings"" (#4820)

""project settings"" should be ""Project Settings"""
62410806bba86d1dc742162db2397c0ced6eba01,Nathan Rajlich,2020-07-08 23:24:18+00:00,Nathan Rajlich,2020-07-08 23:24:18+00:00,"Publish Canary

 - vercel@19.1.2-canary.20
 - @vercel/next@2.6.10-canary.0"
47e3111cabb673a4e2e219678a23e8aab55b25fa,Steven,2020-07-08 22:46:48+00:00,GitHub,2020-07-08 22:46:48+00:00,"[all] Change prettier config `arrowParens: avoid` (#4819)

In PR #4760, Prettier was upgraded to 2.0 which changed the default configuration for `arrowParens` from `avoid` to `always`. This PR changes it back to `avoid` so we don't have PRs changing unnecessary lines during in the commit hook.

See the [Prettier 2.0 Announcement](https://prettier.io/blog/2020/03/21/2.0.0.html#change-default-value-for-arrowparens-to-always-7430httpsgithubcomprettierprettierpull7430-by-kachkaevhttpsgithubcomkachkaev) for more."
135f35002fe5f952565dbc99cbc73f469dcbd0d6,Nathan Rajlich,2020-07-08 22:37:55+00:00,GitHub,2020-07-08 22:37:55+00:00,"[cli] Remove caching of `vercel.json` config in `vc dev` (#4808)

This is a re-introduction of #4697, which was reverted for performance
resons. But now that #4760 and #4793 have landed, we can enable this
behavior again."
ee40052cee923d9f12fbe3c95c268b247bef33c2,Steven,2020-07-08 20:53:18+00:00,Steven,2020-07-08 20:53:18+00:00,"Publish Stable

- @vercel/next@2.6.9"
86b730c1cd814b35e7e286fbf9690c3c76e9b9ac,JJ Kasper,2020-07-08 20:08:29+00:00,JJ Kasper,2020-07-08 20:08:29+00:00,"Publish Canary

 - vercel@19.1.2-canary.19
 - @vercel/next@2.6.9-canary.1"
b440249c2649ffeb26d28b0e9d0989916db07c10,JJ Kasper,2020-07-08 20:05:00+00:00,GitHub,2020-07-08 20:05:00+00:00,"[next] Don't use potentially invalid routeKeys/regexes (#4803)

The first version of `routeKeys` which was Array based could contain invalid named regexes which would break the build during route validation so this disables using them in that version of the manifest instead of trying to leverage them still. It also adds an additional test fixture with this version of the manifest to ensure it is still working properly"
5380c12569579ff1aba0d2aee54e10016cb12a5d,Steven,2020-07-08 18:27:30+00:00,Steven,2020-07-08 18:27:30+00:00,"Publish Canary

 - @vercel/frameworks@0.0.16-canary.1
 - @vercel/build-utils@2.4.1-canary.2
 - vercel@19.1.2-canary.18
 - @vercel/client@8.1.1-canary.2
 - @vercel/next@2.6.9-canary.0"
f11eb32b2c8d8b6c3bc868d43a84517a6f09deb3,Steven,2020-07-08 18:19:55+00:00,GitHub,2020-07-08 18:19:55+00:00,"[frameworks] Remove blitz demo (#4816)

This is not ready yet. We need to confirm Blitz is working before we deploy the demo."
3d40e343ac402f53b15dcfb5606067cebcd71758,Brandon Bayer,2020-07-08 17:18:01+00:00,GitHub,2020-07-08 17:18:01+00:00,"[frameworks][examples] Add Blitz.js (#4465)

This adds [Blitz.js](https://github.com/blitz-js/blitz) to the zero-config frameworks.

Blitz compiles to a Next.js app, so it uses the same `@vercel/next` builder.

The change in `packages/now-build-utils/src/detect-builders.ts` was made according to @styfle's suggestion in Slack.

---

**This is a rerun of #4219 which had to be reverted because of this:**

> It looks like the @vercel/next package still requires next in the dependencies.
>
> When I've deployed the example I've got only a file listing, but when I added next to the dependencies it worked. I'll revert for now.

This new PR fixes that problem with a small refactor to `@vercel/next`.

`@vercel/next` was getting the Next version two different ways:

1. By checking project root package.json for `next` in deps or devDeps
2. By trying to resolve the installed next version and get `version` from its package.json

My refactor consolidates those two approaches by changing the existing `getNextVersion()` function to first try and resolve the real next version. If that fails, fall back to checking the project root.

Blitz bundles Next, so the real next package version should always be resolved."
80f525796fe09ee51a8a7c83dcb42e076db44d8c,Nathan Rajlich,2020-07-07 20:30:21+00:00,GitHub,2020-07-07 20:30:21+00:00,"[cli] Make filesystem globbing faster in `vercel dev` (#4793)

The current code uses `getAllProjectFiles()` which globs for every file
in the project, not considering the `.vercelignore` file and default
ignore list. For example, every file in the `node_modules` directory is
selected, just for `vercel dev` to manually ignore them afterwards,
which is very slow and wasteful. For a simple Next.js project, this
globbing was taking over 3 seconds on my machine !

Solution is to use the `staticFiles()` function which is the same as
`vercel dev` uses at boot-up time. This function properly considers the
ignore list and thus is much faster, and the manual filtering is no
longer necessary by `vercel dev`. For the same simple Next.js project,
this function takes on average 10 milliseconds.

Also did a bit of cleanup and removed the `getAllProjectFiles()`
function since it is no longer used anywhere."
af4ad358f281129f805c7952ab1e58575720dd65,Nathan Rajlich,2020-07-07 19:41:29+00:00,GitHub,2020-07-07 19:41:29+00:00,"[cli] Print a warning if both ""functions"" and ""builds"" are defined in `vercel.json` in `vercel dev` (#4795)

This matches the error message that is used in production when using the
`vercel dev` command."
e6033d7a2decd6fa1187172e8b1eff2ed2d93840,Nathan Rajlich,2020-07-07 18:56:31+00:00,GitHub,2020-07-07 18:56:31+00:00,"[client] Add `@vercel/build-utils` as a ""dependency"" (#4804)

Fixes: https://github.com/philcockfield/sample.vercel.client-error"
d3148dffaae7db80ef23e48ebb95ac7fac70dc58,JJ Kasper,2020-07-06 13:40:44+00:00,JJ Kasper,2020-07-06 13:40:44+00:00,"Publish Stable

- @vercel/next@2.6.8"
30048cf4ff9c078d3ca5109f9e5e257a016dd45d,JJ Kasper,2020-07-06 13:31:35+00:00,JJ Kasper,2020-07-06 13:31:35+00:00,"Publish Canary

 - vercel@19.1.2-canary.17
 - @vercel/next@2.6.8-canary.7"
07c65fa5c8f4c4835f890938bcd1e5369d193c99,JJ Kasper,2020-07-05 21:13:01+00:00,GitHub,2020-07-05 21:13:01+00:00,"[next] Use correct data route regex (#4778)

For `getServerSideProps` routes the non-named data route was being used for routes causing dynamic route params that were being trusted from the proxy to be incorrect. Our tests weren't failing after trusting the values from the proxy was landed in Next.js on canary due to the `21-server-props` test suite not running against the latest canary which is updated in this PR. 

Note: the below Next.js PR is not needed or can be reverted if this PR is landed

x-ref: https://github.com/vercel/next.js/pull/14829"
411ec649863b83e31d9d385e20cda5170068e598,Nathan Rajlich,2020-07-03 00:25:07+00:00,GitHub,2020-07-03 00:25:07+00:00,"[cli] Reduce number of times `getNowConfig()` is invoked in `vercel dev` (#4760)

* [cli] Reduce number of times `getNowConfig()` is invoked in `vercel dev`

When using the `vercel dev` command, the `getNowConfig()` function was
being invoked many times per HTTP-request. It should only be read _once_
per HTTP request as it may be an expensive function depending on the
project size.

This change reduces the number of times the function is called to once
per HTTP request, and passes around the resulting `nowConfig` object to
the functions that require it.

* Fix default values

* Remove unnecessary type narrowing

* Remove one more `getNowConfig()` invocation

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
e4d2cc704c9eaf4d2f5a6d640c422ce0e6a51acd,Joe Haddad,2020-07-02 21:06:44+00:00,GitHub,2020-07-02 21:06:44+00:00,"Add Lockfile to Fix Gatsby Example (#4771)

This adds the Lockfile from Gatsby's official starter to fix deployments.

```
 npx gatsby-cli new ~/Desktop/scratch/test-default
 cp ~/Desktop/scratch/test-default/yarn.lock examples/gatsby
 cd examples/gatsby
 yarn
 git add examples/gatsby/yarn.lock
```"
38db72058668666d598b4828a1d51b87eb67f937,Joe Haddad,2020-07-02 18:20:35+00:00,GitHub,2020-07-02 18:20:35+00:00,Regenerate `yarn.lock` file (#4769)
c26c7886be27aefcc09f79b3a69335aa5bc86fb5,Joe Haddad,2020-07-02 15:51:02+00:00,GitHub,2020-07-02 15:51:02+00:00,[next] Skip Lambda Deployment for Static Sites (#4748)
b0e5d308caf4340aa33a012225872c57b919701c,JJ Kasper,2020-07-02 09:40:15+00:00,GitHub,2020-07-02 09:40:15+00:00,"[next] Add additiontal test cases for basePath support (#4747)

This adds some additional test cases for `basePath` support in Next.js to ensure it is working properly with `@vercel/next`"
609b98cc7341e0d714486dbfd6debd65ffed9809,JJ Kasper,2020-07-01 19:46:28+00:00,JJ Kasper,2020-07-01 19:46:28+00:00,"Publish Canary

 - vercel@19.1.2-canary.16
 - @vercel/next@2.6.8-canary.6"
e0ec6c792b6fa0da0c84be432886fabcfc751a48,JJ Kasper,2020-07-01 19:44:09+00:00,GitHub,2020-07-01 19:44:09+00:00,"[next] Re-enable shared lambdas by default (#4757)

This re-enables the shared lambdas optimization by default and also adds additional tests to ensure that when a `now.json` or `vercel.json` contains either `routes` or `functions` configs the shared lambda optimization is disabled. 

Additional test deployments done:

- minimal `now.json` with `builds` config [deploy](https://shared-lambdas-tests-d646fsqju.vercel.app)
- `now.json` with `functions` config [deploy](https://shared-lambdas-tests-ahnuosp4s.vercel.app)
- `now.json` with `routes` config [deploy](https://shared-lambdas-tests-gulam3jda.vercel.app)
- minimal `vercel.json` with `builds` config [deploy](https://shared-lambdas-tests-7ic7wzirs.vercel.app)
- `vercel.json` with `functions` config [deploy](https://shared-lambdas-tests-7ic7wzirs.vercel.app)
- `vercel.json` with `routes` config [deploy](https://shared-lambdas-tests-rja2391tq.vercel.app)"
b29db2fd1d6b109387c065cc3133d3993ec81870,Nathan Rajlich,2020-07-01 17:59:22+00:00,GitHub,2020-07-01 17:59:22+00:00,"[cli] Pin `@vercel/static-build` to v0.17.5-canary.0 (#4751)

It got de-synced in fa0f1b90b4b42d61332bcdc5b8855d5dd356df8b."
b604ced99d0dc8956e7ee79fa1c3e867d41a35ae,JJ Kasper,2020-07-01 15:53:18+00:00,JJ Kasper,2020-07-01 15:53:18+00:00,"Publish Canary

 - vercel@19.1.2-canary.15
 - @vercel/next@2.6.8-canary.5"
b7fd69517e620ef9c097bbfb582c89895f006833,JJ Kasper,2020-07-01 07:30:41+00:00,GitHub,2020-07-01 07:30:41+00:00,"[next] Fix dynamic route mapping with shared lambdas (#4740)

This fixes mapping dynamic routes to their shared lambdas failing from the `dynamicPageLambdaRoute` not being injected directly after the dynamic route due to dynamic routes now containing a `query` which caused the route lookup to fail. 

This is resolved by making sure to parse the pathname while injecting the `dynamicPageLambdaRoute` so the route can be looked up correctly. This also adds additional test cases to prevent regressing on this along with updating existing fixtures for custom routes being de-experimentalized"
4c821a6fb54cfbd697fb2c638170ed72f3b10b36,Nathan Rajlich,2020-06-30 23:27:46+00:00,Nathan Rajlich,2020-06-30 23:27:46+00:00,"Publish Canary

 - vercel@19.1.2-canary.14
 - @vercel/node@1.7.2-canary.1
 - @vercel/static-build@0.17.5-canary.0"
5c4fb319af6961a028dea63125bbc62a8e99e7d9,Nathan Rajlich,2020-06-30 23:26:56+00:00,GitHub,2020-06-30 23:26:56+00:00,"[cli] Revert ""Remove caching of `vercel.json` config in `vc dev`"" (#4749)

This reverts commit ffb98781f1990201813818a50492e3362e6a4489 (#4697),
because it was realized that `vc dev` reads this configuration file many
times per HTTP request, causing the server to feel extremely slow.

Reverting this optimization for now until the over-reading issue is
addressed."
fbe9ea07504c800849d1de8841f578cc71b8aef5,Nathan Rajlich,2020-06-30 23:07:04+00:00,GitHub,2020-06-30 23:07:04+00:00,"[node] Set the TypeScript ""target"" in `vc dev` (#4728)

Fixes: https://github.com/vercel/vercel/discussions/4724"
fa0f1b90b4b42d61332bcdc5b8855d5dd356df8b,Andy Bitz,2020-06-30 21:33:47+00:00,Andy Bitz,2020-06-30 21:33:47+00:00,Publish Stable
2daa0e28d334761d565d28411516054e7be59ec9,Andy Bitz,2020-06-30 11:21:02+00:00,Andy Bitz,2020-06-30 11:21:02+00:00,"Publish Canary

 - @vercel/frameworks@0.0.16-canary.0
 - vercel@19.1.2-canary.13
 - @vercel/static-build@0.17.4-canary.1"
48358b49865ef5d9893494b19b445b9fd6647ba2,Andy,2020-06-30 10:54:44+00:00,GitHub,2020-06-30 10:54:44+00:00,[@vercel/build-utils] Cache `.cache` for Eleventy (#4743)
c59f44a63b7777a38819e9cb8988c8864fd8056b,Steven,2020-06-29 15:59:34+00:00,GitHub,2020-06-29 15:59:34+00:00,"[frameworks] Fix build command placeholder `nuxt generate` (#4737)

The Nuxt placeholder was wrong, it should be `nuxt generate` like the build command here: https://github.com/vercel/vercel/blob/ca2786420104b4ade9ac46cf7b9776f0ac1ab0ea/packages/now-static-build/src/frameworks.ts#L516"
ca2786420104b4ade9ac46cf7b9776f0ac1ab0ea,Joe Haddad,2020-06-29 05:05:30+00:00,GitHub,2020-06-29 05:05:30+00:00,"Update ""description"" in `package.json` for Vercel (#4735)"
6c81a873384f62ecfc49639d344f3f0aeb3dd558,Steven,2020-06-27 05:02:10+00:00,Steven,2020-06-27 05:02:10+00:00,"Publish Canary

 - vercel@19.1.2-canary.12
 - @vercel/static-build@0.17.4-canary.0"
a7bef9387bb8facc8fe2c910f39628514afbd6ed,Steven,2020-06-27 03:56:45+00:00,GitHub,2020-06-27 03:56:45+00:00,"[static-build] Fix error handling for unexpected output directory (#4727)

This PR improves the error handling when a zero config framework has an unexpected output directory.

Previously, setting a Docusaurus 2.0 build command to `docusaurus build && mv build foo` would fail with the following:

```
Error: ENOENT: no such file or directory, scandir '/vercel/514ce14b/build'
```

With this PR, the error message will show the expected:

```
Error: No Output Directory named ""build"" found after the Build completed. You can configure the Output Directory in your project settings. Learn more: https://vercel.com/docs/v2/platform/frequently-asked-questions#missing-public-directory
```

I also changed the usage of [`promisify(fs)`](https://nodejs.org/docs/latest-v10.x/api/util.html#util_util_promisify_original) to [`fs.promises`](https://nodejs.org/docs/latest-v10.x/api/fs.html#fs_fs_promises_api) which is available in Node 10 or newer.

Lastly, I updated the test suite to check if the correct error message is returned for builds we expect to fail."
65d6c5e1f41f638f81b96963d7b8cf70478721bd,Nathan Rajlich,2020-06-26 23:07:07+00:00,GitHub,2020-06-26 23:07:07+00:00,"[cli] Use the configured ""Output Directory"" from project's settings in `vc dev` (#4715)

Previously, when a project has a specific ""Output Directory"" configured
in the project settings page, it was not being correctly considered when
using `vercel dev`.

The main fix here is passing in the full project settings object
(including the `outputDirectory`) to the `detectBuilders()` function.

Also cleaned up a few types and updated the error message that was
previously being rendered to use a short link."
c09355fdb3235f897992a8feddfb7b2f7cf27b81,Steven,2020-06-26 17:11:05+00:00,Steven,2020-06-26 17:11:05+00:00,"Publish Canary

 - vercel@19.1.2-canary.11
 - @vercel/client@8.1.1-canary.1"
d9ac4c45e1d8357877e5d3cd5473842f758af214,Steven,2020-06-26 17:10:11+00:00,GitHub,2020-06-26 17:10:11+00:00,"[cli] Fix `vc dev` serving pure static dot files (#4714)

Fixes ch1233 and discussion #4475"
c2ff95714f9dba66d022280891363d6ac5927d5e,nkzawa,2020-06-26 04:47:50+00:00,nkzawa,2020-06-26 04:47:50+00:00,"Publish Canary

 - @vercel/build-utils@2.4.1-canary.1
 - vercel@19.1.2-canary.10
 - @vercel/client@8.1.1-canary.0
 - @vercel/go@1.1.3-canary.1
 - @vercel/next@2.6.8-canary.4"
a51feb7a62c843f397a23222836f11e35000cf2e,Naoyuki Kanezawa,2020-06-26 04:44:31+00:00,GitHub,2020-06-26 04:44:31+00:00,add source prop when deploying (#4701)
ff109182303a0add798e287d018373dada15b234,JJ Kasper,2020-06-25 22:55:09+00:00,GitHub,2020-06-25 22:55:09+00:00,"[next] Memoize lstating files (#4712)

Closes: https://github.com/vercel/next.js/issues/14429"
04bea1e3cdab4cad52569b7995071a08ec267b12,Nathan Rajlich,2020-06-24 19:50:00+00:00,GitHub,2020-06-24 19:50:00+00:00,"[go] Implement `startDevServer()` function (#4662)

Due to Go's peculiar package importing structure, there's unfortunately no way to _directly_ invoke a Go serverless file, so the approach for this `startDevServer()` function is:

 * Create a temp directory in `.vercel/cache`
 * Run the `analyze` Go program on the entrypoint file to determine the `functionName`
 * Copy the entrypoint file into the temp directory, while modifying it to use `package main`
 * Copy the `dev-server.go` file into the temp directory, replacing the placeholder function name with the `functionName` retrieved from the analysis step from before
 * Execute `go run $tmp_dir` to spawn the Go HTTP server on an ephemeral port
 * Return the Go process id and port number for `vercel dev` to proxy to
 * After the Go process has exited, delete the temp directory"
bc5e5e8a9c471620ed7b8cb7295358640397f27f,Milan Felix ulc,2020-06-24 18:58:17+00:00,GitHub,2020-06-24 18:58:17+00:00,[tests] Change `now-php` to `vercel-php` (#4710)
2e647175f5887d9c2eed2698d731e3de90381c5f,JJ Kasper,2020-06-24 15:20:04+00:00,JJ Kasper,2020-06-24 15:20:04+00:00,"Publish Canary

 - vercel@19.1.2-canary.9
 - @vercel/next@2.6.8-canary.3"
1a4e1d2fdda785fe777f2d817144bc0de73ee27b,JJ Kasper,2020-06-24 14:53:43+00:00,GitHub,2020-06-24 14:53:43+00:00,"[next] Update revalidate tests and correct shared lambdas revalidate (#4704)

This adds more fine grained tests for our revalidate behavior to ensure pages are actually being updated instead of only checking the headers, it also corrects page lookups failing with shared lambdas enabled for dynamic pages using revalidate. 

Closes: https://github.com/vercel/next.js/issues/14497"
49e2274d81c46a97449eb1c4b50ce30a632681e1,Steven,2020-06-24 13:24:46+00:00,Steven,2020-06-24 13:24:46+00:00,"Publish Canary

 - @vercel/build-utils@2.4.1-canary.0
 - vercel@19.1.2-canary.8"
9af3938544a8fb12a825ee2eff17f711ed6e5ac2,Steven,2020-06-24 13:23:51+00:00,GitHub,2020-06-24 13:23:51+00:00,"[cli][build-utils] Refactor ajv error message (#4705)

This PR is a follow up to #4694 so we can use this same helper function in the API.

I tried to follow the existing error message format so that the API can use a different prefix than the CLI.

The API currently returns a 400 with `Invalid request` when a Git deploy fails validation:

![api-comment](https://user-images.githubusercontent.com/229881/85466548-1c140b00-b578-11ea-9bed-1eb14df2685a.png)"
7b5bf061c208bc322bf039fd5a371b70cc618e43,Nathan Rajlich,2020-06-23 02:12:28+00:00,Nathan Rajlich,2020-06-23 02:12:28+00:00,"Publish Canary

 - vercel@19.1.2-canary.7
 - @vercel/go@1.1.3-canary.0"
ffb98781f1990201813818a50492e3362e6a4489,Nathan Rajlich,2020-06-22 23:45:23+00:00,GitHub,2020-06-22 23:45:23+00:00,"[cli] Remove caching of `vercel.json` config in `vc dev` (#4697)

Since the filesystem watcher may be slow, it's actually faster and more
reliable to simply re-read the `vercel.json` configuration for every
HTTP request. This also simplifies the logic as an added benefit.

Some `sleep()` calls are removed from relevant tests that were
previously necessary due to the lag in the filesystem watcher."
3411fcbb684b7c9298f8c10daefd6445496b0a41,Steven,2020-06-22 22:42:23+00:00,Steven,2020-06-22 22:42:23+00:00,"Publish Canary

 - vercel@19.1.2-canary.6"
55cfd33338d11b26467b008d1cad832c078c4b4d,Steven,2020-06-22 22:38:13+00:00,GitHub,2020-06-22 22:38:13+00:00,"[cli] Improve validation error message for vercel.json (#4694)

This PR improves the validation error message when the user has an invalid `vercel.json` file.

Previously, the error message did not account for nested properties so `{""foo"": ""will error""}` looked fine because it would mention there is an additional property `foo`. However, the error message for `{ ""routes"": [{ ""foo"": ""will error"" }] }` did not mention anything about `routes` when it explaining there was an additional property `foo`. This became more apparent as we added nested properties for `rewrites` and `redirects` (see tests in this PR).

This PR also adds suggestions for common mistakes such as `src` vs `source`."
93a9e5bed36c2db7bb907035b5b372529272f4d5,JJ Kasper,2020-06-22 21:38:23+00:00,JJ Kasper,2020-06-22 21:38:23+00:00,"Publish Canary

 - vercel@19.1.2-canary.5
 - @vercel/next@2.6.8-canary.2"
b454021234599a648587ff519f72969b816d5f50,JJ Kasper,2020-06-22 21:31:37+00:00,GitHub,2020-06-22 21:31:37+00:00,"[next] Update tests to run against latest canary (#4682)

In the latest canary of Next.js pages are no longer nested under the `BUILD_ID` folder and instead are nested under a hash for the page bundle content. To prevent these tests from breaking too often from changes in canary this updates to locate the page bundle using the `buildManifest`. This also updates our latest SSG fixture to test against the latest canary to help ensure the feature doesn't break with a new canary release"
bb705cd091f856ec0937bd55f5808a5870d6a4e1,Nathan Rajlich,2020-06-22 20:41:10+00:00,GitHub,2020-06-22 20:41:10+00:00,"[docs] Refactor ""Developing a Runtime"" docs and add `startDevServer()` (#4675)

Co-authored-by: Steven <steven@ceriously.com>"
0986f4bcb6e6f63a756b45c153479893269052c4,Naoyuki Kanezawa,2020-06-22 18:47:34+00:00,GitHub,2020-06-22 18:47:34+00:00,"[cli] Do not confirm `vc env pull` overwrite if created by CLI (#4678)

Append `# Created by Vercel CLI` to the head of `.env` file and automatically overwrite the file if it's there next time without confirmation.

https://app.clubhouse.io/vercel/story/316"
83f77223aa34d3833981d0401158faab06754ac3,Steven,2020-06-19 20:23:32+00:00,Steven,2020-06-19 20:23:32+00:00,"Publish Canary

 - vercel@19.1.2-canary.4"
effda1fa6c3985d6cd61d2431e59634c67bef2dd,Steven,2020-06-19 19:57:26+00:00,GitHub,2020-06-19 19:57:26+00:00,"[cli] Fix error message when no internet connectivity (#4687)

This PR fixes the error message when the client does not have internet connectivity or perhaps DNS is misconfigured such that the hostname cannot be resolved."
2ab6a7ef0ccb110ac99cd052c748d06f87d204c5,Steven,2020-06-18 23:57:28+00:00,Steven,2020-06-18 23:57:28+00:00,"Publish Canary

 - vercel@19.1.2-canary.3
 - @vercel/next@2.6.8-canary.1"
200bf5e9962aefa041fb9091049c5d76378dd329,Jean Helou,2020-06-18 23:28:53+00:00,GitHub,2020-06-18 23:28:53+00:00,"[next] Fix nextjs routes in `vercel dev` (#4510)

This PR fixes #4239 where using `vercel dev` to work on monorepos where
the Next.js app is not in the topmost directory fails to correctly route
to dynamic pages.
After investigating the devServer router, @styfle prompted me to
investigate the @vercel/next builder. He also suggested restricting
`check` to be false only when running in `now dev`.

Co-authored-by: Steven <steven@ceriously.com>"
94ab2512e93ae21434dd58d1ecbb582900ebe6fc,Steven,2020-06-18 21:19:29+00:00,Steven,2020-06-18 21:19:29+00:00,"Publish Canary

 - vercel@19.1.2-canary.2
 - @vercel/ruby@1.2.3-canary.0"
da3207278e44c7af3521ec494d17611ecdb50d76,Jared White,2020-06-18 21:12:28+00:00,GitHub,2020-06-18 21:12:28+00:00,"[ruby] Fix for UTF-8 responses in Ruby functions (#4593)

There's an unexpected string encoding issue with `Net::HTTP`, so this is a workaround. Further details:
https://bugs.ruby-lang.org/issues/15517

Co-authored-by: Steven <steven@ceriously.com>"
8e10a82b43c9f57d7ab9adcf339a6424a61e8247,nkzawa,2020-06-18 11:24:49+00:00,nkzawa,2020-06-18 11:24:49+00:00,"Publish Canary

 - vercel@19.1.2-canary.1"
d7731d191b0ab808a5b3f25a73349e891857b017,Naoyuki Kanezawa,2020-06-17 17:20:08+00:00,GitHub,2020-06-17 17:20:08+00:00,"Fix to not render no token error, prompt login instead (#4659)

When `auth.json` exists but no `token` property exists in it, we currently render error like the following screenshot.
<img width=""488"" alt=""Screen Shot 2020-06-15 at 21 32 55"" src=""https://user-images.githubusercontent.com/775227/84657782-cd4eeb80-af4f-11ea-901d-2ad4b52b6667.png"">

This PR fixes to prompt login instead.
<img width=""994"" alt=""Screen Shot 2020-06-15 at 21 28 09"" src=""https://user-images.githubusercontent.com/775227/84657706-aa243c00-af4f-11ea-915e-4ada7de9c467.png"">"
0f5f99e6678fd1127947cf43a531d0976bc6bca1,Steven,2020-06-16 21:41:45+00:00,Steven,2020-06-16 21:41:45+00:00,"Publish Canary

 - vercel@19.1.2-canary.0
 - @vercel/next@2.6.8-canary.0
 - @vercel/node@1.7.2-canary.0"
93a7831943c31250a3c38e7185a6b53f114a2c2e,Steven,2020-06-16 21:41:13+00:00,GitHub,2020-06-16 21:41:13+00:00,"[node][next] Bump node-file-trace to 0.6.5 (#4667)

Bump `node-file-trace` to version [0.6.5](https://github.com/vercel/node-file-trace/releases/tag/0.6.5) to fix a webpack wrappers bug"
0eacbeae111dcc869afd848433d99f7aaa84d327,Steven,2020-06-16 17:09:42+00:00,Steven,2020-06-16 17:09:42+00:00,"Publish Stable

 - vercel@19.1.1
 - @vercel/next@2.6.7
 - @vercel/node@1.7.1
 - @vercel/static-build@0.17.3"
e50417dc47ff5de5061b48458b276d2c0081fca6,Steven,2020-06-16 12:55:29+00:00,Steven,2020-06-16 12:55:29+00:00,"Publish Canary

 - vercel@19.1.1-canary.4
 - @vercel/static-build@0.17.3-canary.0"
4840a25d30108db484ede4c5180973ab316bb071,Paco,2020-06-15 22:15:14+00:00,GitHub,2020-06-15 22:15:14+00:00,"[static-build] Apply Gatsby default caching routes automatically (#4645)

CH-702
Fixes #3331

If the file generated by `gatsby-plugin-now` does not exist, we'll set up these routes automatically."
785e91979d4da2d3f88d722f93bc1f00b8679756,Steven,2020-06-15 20:46:03+00:00,Steven,2020-06-15 20:46:03+00:00,"Publish Canary

 - vercel@19.1.1-canary.3
 - @vercel/next@2.6.7-canary.1
 - @vercel/node@1.7.1-canary.1"
7a776c54b8ca517dcda18dd7ac5c6d8f97dacd1e,Steven,2020-06-15 20:45:15+00:00,GitHub,2020-06-15 20:45:15+00:00,"[node][next] Bump node-file-trace to 0.6.4 (#4617)

Bump node-file-trace to fix a webpack tracing bug that looks like the following:


```
TypeError: Cannot read property 'type' of null
    at handleWrappers (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:12763:58)
    at module.exports.447.module.exports (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:14674:3)
    at Job.emitDependency (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:11730:40)
    at /vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:11755:20
    at async Promise.all (index 9)
    at async Job.emitDependency (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:11736:5)
    at async Promise.all (index 1)
    at async Object.module.exports.328.module.exports [as default] (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:11514:3)
    at async Object.module.exports.178.exports.build (/vercel/e77875438c1cd74b/.build-utils/.builder/node_modules/@vercel/next/dist/index.js:6076:69)
    at async buildStep (/var/task/sandbox-worker.js:20407:20)
```

- [0.6.2](https://github.com/vercel/node-file-trace/releases/tag/0.6.2)
- [0.6.3](https://github.com/vercel/node-file-trace/releases/tag/0.6.3) 
- [0.6.4](https://github.com/vercel/node-file-trace/releases/tag/0.6.4)

Depends on #4355"
997031c53bf12ec918125580787651d0aefdedf1,JJ Kasper,2020-06-15 17:43:37+00:00,GitHub,2020-06-15 17:43:37+00:00,"[next] Update handling experimental basePath (#3791)

As mentioned by @dav-is we can prefix the outputs with the `basePath` instead of using a rewrite so that we make sure to 404 when the basePath isn't prefixed on the output. This behavior is also matched in Next.js with [this PR](https://github.com/zeit/next.js/pull/9988). 

x-ref: https://github.com/zeit/now/pull/3478"
fdee03a599fa9a59dee75464de7dffa74d2510df,Steven,2020-06-15 16:38:11+00:00,Steven,2020-06-15 16:38:11+00:00,"Publish Canary

 - vercel@19.1.1-canary.2"
c5a93ecdadd9ecfb2f659a0d7327453d4fbd38de,Steven,2020-06-15 16:37:08+00:00,GitHub,2020-06-15 16:37:08+00:00,"[cli] Fix `vc dev` proxy to upstream frontend dev server (#4644)

This PR fixes a longstanding issue introduced in #3673 that prevents routing properties from applying to the framework's upstream dev server.

This mimic's the older proxy logic used in build matches here: https://github.com/vercel/vercel/blob/5035fa537f82181649d42778c60145d8890f3291/packages/now-cli/src/util/dev/server.ts#L1535-L1539

- Related to #3777
- Related to #4510"
5a9391b7cec4fdb5f4e1d4399e57b8284cc3ee32,JJ Kasper,2020-06-15 15:20:38+00:00,JJ Kasper,2020-06-15 15:20:38+00:00,"Publish Canary

 - vercel@19.1.1-canary.1
 - @vercel/next@2.6.7-canary.0"
99e49473b8c2f399f770f3a6e6f3516b16ea6bff,JJ Kasper,2020-06-15 15:15:38+00:00,GitHub,2020-06-15 15:15:38+00:00,"[next] Update dynamic route named regexes and route keys (#4355)

This updates to leverage changes from https://github.com/zeit/next.js/pull/12801 which resolves invalid named regexes being used when the segments contain non-word characters e.g. `/[hello-world]`. 

Failing page names have also been added to the `23-custom-routes-verbose` fixture. Since the routeKeys aren't applied for dynamic routes in this PR until the routes-manifest version is bumped in the latest canary of Next.js the added test cases will be passing now and should be re-run to ensure passing after a new canary of Next.js is released with the routes-manifest version bump"
de1cc6f9a7ac296cb482e687d36d62daba932b34,Nathan Rajlich,2020-06-14 21:52:33+00:00,GitHub,2020-06-14 21:52:33+00:00,"[cli] Add a test case for resolving default ""typescript"" version in `@vercel/node` (#4656)

Adds a test case for #4655 (it got auto-merged too quickly)."
08eedd8f34cd13e0561151cc29e48b5030f419af,Nathan Rajlich,2020-06-14 21:00:04+00:00,Nathan Rajlich,2020-06-14 21:00:04+00:00,"Publish Canary

 - vercel@19.1.1-canary.0
 - @vercel/node@1.7.1-canary.0"
5021a71a8e724fff740297f2b34908962db7a4de,Nathan Rajlich,2020-06-14 20:47:23+00:00,GitHub,2020-06-14 20:47:23+00:00,"[node] Don't resolve ""typescript"" from the dist dir (#4655)

On Node 10, the `require.resolve()` with ""paths"" does not return the
proper value relative to the `node_modules` directory. To wit:

```
$ node -v
v10.16.3

$ node -p ""require.resolve('typescript', { paths: [process.cwd()] })""
/Users/nrajlich/Code/vercel/vercel/packages/now-node/dist/typescript.js

$ node -v
v14.4.0

$ node -p ""require.resolve('typescript', { paths: [process.cwd()] })""
/Users/nrajlich/Code/vercel/vercel/node_modules/typescript/lib/typescript.js
```

(**Note:** cwd when running these commands is the `dist` dir of `@vercel/node`)

So the solution is to just let `require.resolve()` throw an error so the
default string ""typescript"" is used instead of a resolved absolute path."
56671d7c2f3f5564dc032560c9ae3ee4cdb27ff5,Max Leiter,2020-06-12 22:49:37+00:00,GitHub,2020-06-12 22:49:37+00:00,"[tests] Don't revoke `VERCEL_TOKEN` after tests run (#4643)

`VERCEL_TOKEN` will no longer be invalidated during tests

Story: https://app.clubhouse.io/vercel/story/2281"
5035fa537f82181649d42778c60145d8890f3291,Steven,2020-06-12 20:51:55+00:00,GitHub,2020-06-12 20:51:55+00:00,"[cli] Add test for gatsby cache (#4447)

This PR adds a E2E CLI test to ensure that the Gatsby example deploys correctly and that the second deployment has the proper cached directories.

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Andy <AndyBitz@users.noreply.github.com>"
63cc9009c893612dcfb95f4d8c450523eab270fb,Nathan Rajlich,2020-06-11 23:30:31+00:00,Nathan Rajlich,2020-06-11 23:30:31+00:00,"Publish Stable

 - @vercel/frameworks@0.0.15
 - @vercel/build-utils@2.4.0
 - @vercel/cgi@1.0.6
 - vercel@19.1.0
 - @vercel/client@8.1.0
 - @vercel/go@1.1.2
 - @vercel/next@2.6.6
 - @vercel/node-bridge@1.3.1
 - @vercel/node@1.7.0
 - @vercel/python@1.2.2
 - @vercel/routing-utils@1.8.3
 - @vercel/ruby@1.2.2
 - @vercel/static-build@0.17.2"
ccf6e3c4322be7d20c06240efa02bc60e59034db,Nathan Rajlich,2020-06-11 22:17:05+00:00,Nathan Rajlich,2020-06-11 22:17:05+00:00,"Publish Canary

 - vercel@19.0.2-canary.17
 - @vercel/client@8.0.2-canary.4"
8d015e3138936fd6b692ef0e48764c4fca092c7b,Steven,2020-06-11 22:15:16+00:00,GitHub,2020-06-11 22:15:16+00:00,"[client] Fix `.vercelignore` override default ignore list (#4627)

- Fixes #3747 
- Related to #4325
- Related to [tweet](https://twitter.com/Rich_Harris/status/1270871878018699264) from @Rich-Harris
- Docs updated in https://github.com/vercel/docs/pull/1909

There was an issue that was likely introduced when we started using `@vercel/client`: the [default ignore list](https://vercel.com/docs/v2/build-step#ignored-files-and-folders) could not be overridden. This is because the default `ignores` array was always used instead of the combined `default ignore + user ignore`. The solution was to utilize [`recursive-readdir` ignore function](https://www.npmjs.com/package/recursive-readdir#usage) along with [`ig.ignores` function](https://www.npmjs.com/package/ignore#usage) so that the combined result is used for ignoring files while walking the file tree.

This ensures that the fix from PR #4325 is still effective and also fixes the longstanding bug from Issue #3747."
42f2fa1a203e01ec2576a4ab2d06b479109a6bbd,Nathan Rajlich,2020-06-11 22:06:44+00:00,GitHub,2020-06-11 22:06:44+00:00,"[cli] Invalidate the configuration if `vercel.json` is deleted (#4629)

Before this, if the `vercel.json` file gets deleted while the dev server
is running, then it would still act like the file exists since it would
use the cached version.

Now it properly invalidates to an empty configuration if the
`vercel.json` file does not exist."
8397aac0e3b1b908f6e9de28541cf56a64ddb39d,Steven,2020-06-11 20:59:18+00:00,GitHub,2020-06-11 20:59:18+00:00,"[github] Update codeowners (#4630)

* Update codeowners

* Make TooTallNate taller"
7bcdc144eb3ee4c4faaa9a90465bc3c1e512ee8e,Nathan Rajlich,2020-06-11 19:08:48+00:00,GitHub,2020-06-11 19:08:48+00:00,"[cli] Update ""npm-install-error"" link to ""npm-install-failed-dev"" (#4628)

Depends on https://github.com/vercel/docs/pull/1908."
624da9170d21ec8da474906339b363d618d10c90,Nathan Rajlich,2020-06-10 21:27:18+00:00,Nathan Rajlich,2020-06-10 21:27:18+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.5
 - @vercel/build-utils@2.3.2-canary.6
 - vercel@19.0.2-canary.16
 - @vercel/client@8.0.2-canary.3
 - @vercel/node@1.6.2-canary.6"
fb5b013a03ad8df389a94ceeffa6d6e8a881698f,Nathan Rajlich,2020-06-10 21:26:28+00:00,GitHub,2020-06-10 21:26:28+00:00,"[node] Force `module: ""commonjs""` in `startDevServer()` (#4621)

This is a follow up to #4514 to handle the case where there is no
`tsconfig.json` closer to the entrypoint. This is likely the case when
`.js` files with ES Modules syntax are being used instead of `.ts`."
0a4bb53a581ec64ec6e4f2e50d86ee3897ec9e75,Mark Glagola,2020-06-10 21:00:50+00:00,GitHub,2020-06-10 21:00:50+00:00,"[cli] Handle aliasWarning and bump to v13/now/deployments  (#4605)

* Handle aliasWarning

* Pick best production project domain

* Fix currentTeam assignment

* Adds `https` url check to cli integration tests"
2fbd9c78e3e979a3940fee3e7a2ef1fd0df2526c,Nathan Rajlich,2020-06-10 19:38:02+00:00,GitHub,2020-06-10 19:38:02+00:00,"[cli] Better errors for conflicting configuration files (#4612)

* [cli] Better errors for conflicting configuration files

Renders the link https://vercel.link/combining-old-and-new-config
for all conflicting config errors.

* Fix unit test

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
1ed2b7a57db6b6dd38e8d8b9632654c928139ba9,Nathan Rajlich,2020-06-10 03:37:58+00:00,GitHub,2020-06-10 03:37:58+00:00,"[cli] Update `@vercel/next` to v2.6.5 (#4611)

It got out of sync somehow in 55c60d30e68539b5a687aabec174affc9dfa5115."
88cd9ca3c30afc6375242cd265b9f1ead6852603,Nathan Rajlich,2020-06-09 19:56:55+00:00,GitHub,2020-06-09 19:56:55+00:00,"[cli] Invalidate build match for changes to `config` in builds (#4603)

* Fixes changing a `config` value in the `builds` array (such as `helpers: false` for `@vercel/node`) and having it be reflected in `vc dev` without restarting the dev server.
* Re-validates the env vars configuration when a `.env` file changes or the `env` object is changed in `vercel.json` (same for the builds equivalents).
* Ensures that the `NODEJS_HELPERS` build env var is being properly checked in `startDevServer()`.
* Regenerated the `yarn.lock` file because yarn was erroring when trying to add the `fast-deep-equal` dependency."
ecea2ca4a376b4d77dd690c568cebf6e84fd7ccd,JJ Kasper,2020-06-09 18:02:11+00:00,JJ Kasper,2020-06-09 18:02:11+00:00,"Publish Stable

 - @vercel/next@2.6.5"
3f132bc15b06e5fed762a83e6449b3b41c29e198,JJ Kasper,2020-06-09 16:47:51+00:00,JJ Kasper,2020-06-09 16:47:51+00:00,"Publish Canary

 - @vercel/build-utils@2.3.2-canary.5
 - vercel@19.0.2-canary.15
 - @vercel/next@2.6.5-canary.0
 - @vercel/routing-utils@1.8.3-canary.6"
61d95094c0d1f4de6e6f91f38f667e8ca481503f,JJ Kasper,2020-06-09 16:24:21+00:00,GitHub,2020-06-09 16:24:21+00:00,"[next] Re-disable shared lambdas by default (#4609)

As noticed, `now.json` and `vercel.json` files aren't available during the build currently which makes feature detecting and opting out when `routes` are used not work currently so this re-disables the shared lambdas optimization by default while we investigate detecting this"
f7c47975e3ba3d3b70b356e6ac6ba24298f59699,Steven,2020-06-09 00:51:31+00:00,GitHub,2020-06-09 00:51:31+00:00,[tests] Add log for error response (#4601)
7c96f9f9a51aa6297333ec936f02296e5713efac,Nathan Rajlich,2020-06-08 22:36:47+00:00,GitHub,2020-06-08 22:36:47+00:00,"[cli] Show npm output when failing to install Runtimes in `vc dev` (#4598)

If `npm install` doesn't exit with 0, then log the output to the
termial.

This was already happening with `--debug` due to `stdio: ""inherit""`
when debug is enabled, so this change is really only relevant for the
non-debug case.

### Before

```
$ vc dev
Vercel CLI 19.0.2-canary.13 dev (beta)  https://vercel.com/feedback
Error! Command failed with exit code 1: npm install --save-exact --no-package-lock --no-audit --no-progress @now/build-utils@canary @vercel/build-utils@canary now-php@0.0.0
```

### After

Bad dependency:

<img width=""641"" alt=""Screen Shot 2020-06-08 at 12 22 00 PM"" src=""https://user-images.githubusercontent.com/71256/84071523-b07c4c00-a982-11ea-9200-f18498ae917c.png"">

No `npm` installed:

<img width=""672"" alt=""Screen Shot 2020-06-08 at 12 21 16 PM"" src=""https://user-images.githubusercontent.com/71256/84071456-95114100-a982-11ea-87cc-05ed7fb2cb80.png"">"
a5c805b6eb0365ba17bfdc2c37791fa0391adb83,Nathan Rajlich,2020-06-08 21:05:18+00:00,GitHub,2020-06-08 21:05:18+00:00,"[cli] Use `getArgs()` instead of `mri` to parse arguments in `vc projects` (#4570)

* Ensures that `vc --debug projects ls` properly prints the Projects listing, rather than the usage help info.
 * `vc projects` (without a subcommand) shows the Projects listing (this is consistent with i.e. `vc domains`).
 * Returns with exit code `2` when the usage help info is printed (standard Unix convention)."
ff2a22023dbf171daa91d983ed64162b4713796c,JJ Kasper,2020-06-08 19:56:04+00:00,JJ Kasper,2020-06-08 19:56:04+00:00,"Publish Stable

 - @vercel/next@2.6.4"
c6efc028aa62dd5edab2bba954ec9596d1ba4bee,JJ Kasper,2020-06-08 19:48:59+00:00,JJ Kasper,2020-06-08 19:48:59+00:00,"Publish Canary

 - vercel@19.0.2-canary.14
 - @vercel/next@2.6.4-canary.0"
96565da1cf7eb60592d6f67449620ab8f81c5c4f,JJ Kasper,2020-06-08 19:40:48+00:00,GitHub,2020-06-08 19:40:48+00:00,"[next] Add shared lambdas opt-out for functions config (#4596)

As discussed this adds opting out of the shared lambdas optimization when a user adds a functions config in `now.json` or `vercel.json` since this could potentially be a breaking change. We plan to add new handling to still allow customizing this config for the combined lambdas that are created"
afb5e7fc855891ff058277afbb55033a3c4c442b,Steven,2020-06-08 18:42:45+00:00,GitHub,2020-06-08 18:42:45+00:00,"[cli] Update tests for 404.html (#4597)

Now that we updated api-deployments, we can remove this TODO and run tests agains `vercel dev` and real deployments."
34cc987be895300fe8261311886d723a002fe3ac,Nathan Rajlich,2020-06-08 18:02:05+00:00,GitHub,2020-06-08 18:02:05+00:00,"[cli] Make `proxyPass()` return a 502 if the proxying fails (#4586)

This happens, for example, with a `startDevServer()` process that
crashes (i.e. a syntax error in a Node.js API endpoint) before
responding to the HTTP request."
55c60d30e68539b5a687aabec174affc9dfa5115,JJ Kasper,2020-06-08 14:54:44+00:00,JJ Kasper,2020-06-08 14:54:44+00:00,"Publish Stable

 - @vercel/next@2.6.3"
eb993d47ac6e4bb308731a3d5bc3dfe078d8702d,Nathan Rajlich,2020-06-05 23:20:33+00:00,GitHub,2020-06-05 23:20:33+00:00,"[cli] Update 502 error template for `vc dev` (#4583)

* Fix the ""Developer Documentation"" link.
 * Remove the ""If you're a visitor"" section - doesn't make sense for `vc dev` since there are no ""visitors"".
 * Don't link to `_logs` since it's not supported in `vc dev`. Instead direct the user to look at their terminal window to see error logs.
 * Link to new GH issue for non-app error 502 (I don't think this code path ever happens in `vc dev`, but might as well make it correct in case we do in the future).

<img width=""1077"" alt=""Screen Shot 2020-06-05 at 4 15 16 PM"" src=""https://user-images.githubusercontent.com/71256/83929319-c7832a00-a747-11ea-9cae-b0adac97dfa5.png"">"
d2184628d14f6c127a71336c87834f710ccead25,JJ Kasper,2020-06-05 19:52:45+00:00,JJ Kasper,2020-06-05 19:52:45+00:00,"Publish Canary

 - vercel@19.0.2-canary.13
 - @vercel/go@1.1.2-canary.2
 - @vercel/next@2.6.3-canary.6"
65f0cc67973373565d6fdc104474f6a03ececb35,JJ Kasper,2020-06-05 19:51:21+00:00,GitHub,2020-06-05 19:51:21+00:00,"De-experimentalize shared lambdas optimization by default (#4519)

As discussed this de-experimentalizes the shared lambdas optimization now that we have tested it, it also bails out of the optimization when a `now.json` or `vercel.json` is detected that contains legacy routes"
c628c7b58ebef728424669f18d1bcce768c27988,Nathan Rajlich,2020-06-05 13:09:26+00:00,GitHub,2020-06-05 13:09:26+00:00,"[go] Fix typo in `go-bridge` import (#4578)

Introduced in 56c8af51b."
4e005274f964f0dd384b8f535a0f1fe48503ddf0,Steven,2020-06-04 22:43:42+00:00,Steven,2020-06-04 22:43:42+00:00,"Publish Canary

 - @vercel/build-utils@2.3.2-canary.4
 - vercel@19.0.2-canary.12"
482373f711f632e583c7f837e024424f925ba11a,Steven,2020-06-04 22:36:41+00:00,GitHub,2020-06-04 22:36:41+00:00,"[cli][build-utils] Add support for custom 404.html for zero config deployments (#4563)

Next.js already has support for [customizing the 404 page](https://nextjs.org/docs/advanced-features/custom-error-page#customizing-the-404-page), but many other frameworks do not or they expect a 404.html in the output directory.

This PR adds support for rendering the a `404.html` page for all zero config deployments.

- Implements ch337
- Related to #3491"
c80bb37e8d66eac83da40746cf1a15ba42d216d8,Nathan Rajlich,2020-06-03 20:58:37+00:00,Nathan Rajlich,2020-06-03 20:58:37+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.4
 - @vercel/build-utils@2.3.2-canary.3
 - vercel@19.0.2-canary.11
 - @vercel/client@8.0.2-canary.2
 - @vercel/go@1.1.2-canary.1
 - @vercel/next@2.6.3-canary.5
 - @vercel/node-bridge@1.3.1-canary.2
 - @vercel/node@1.6.2-canary.5
 - @vercel/python@1.2.2-canary.2
 - @vercel/routing-utils@1.8.3-canary.5
 - @vercel/ruby@1.2.2-canary.1
 - @vercel/static-build@0.17.2-canary.1"
a7acd92ffda2ca6c8b0afed4f1e3f0194d4b581c,Nathan Rajlich,2020-06-03 20:51:50+00:00,GitHub,2020-06-03 20:51:50+00:00,"[cli][client] Throw an error if both `vercel.json` and `now.json` exist (#4316)

* [client] Throw an error if both `vercel.json` and `now.json` exist

* Update packages/now-client/src/create-deployment.ts

Co-authored-by: Steven <steven@ceriously.com>

* Check in CLI as well

* Add integration test

* Add logic to `getLocalPathConfig()` as well

* Fix import path

Co-authored-by: Steven <steven@ceriously.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
035720ca82cd5ba3b88928b471ae5469b3ee938f,Max Leiter,2020-06-03 19:56:36+00:00,GitHub,2020-06-03 19:56:36+00:00,"[cli] Prioritize `index.html` over other files named index (#4564)

Mirrors production more closely. Initially reported [on spectrum](https://spectrum.chat/zeit/now/statically-served-default-document-is-the-first-index-file-not-index-html~0ad66f8a-a139-4a0e-94d9-7e5ceb0fa043)"
a6ae923a7a1e69bb14dde26b0a5d448fbcbebdc0,Nathan Rajlich,2020-06-03 16:57:16+00:00,GitHub,2020-06-03 16:57:16+00:00,"[all] Update TypeScript to v3.9.3 and regenerate `yarn.lock` file (#4565)

To fix GitHub Dependabot security alerts. See: https://github.com/vercel/vercel/network/alerts

<img width=""835"" alt=""Screen Shot 2020-06-03 at 1 36 50 AM"" src=""https://user-images.githubusercontent.com/71256/83614929-b7e2c600-a53a-11ea-80b6-190e350283ac.png"">

Also updates ""typescript"" to `3.9.3` for all packages, which is necessary because a downstream dependency is using syntax that requires a newer version of TypeScript."
83c0711d6eef52c7094b8434bfa0535f1310f2b9,Nathan Rajlich,2020-06-03 00:56:44+00:00,GitHub,2020-06-03 00:56:44+00:00,"[node] Pass in the `tsconfig.json` file to `startDevServer()` (#4514)

So that if a `tsconfig.json` exists closer to the entrypoint file,
then that config file will be correctly used (rather than say, the
root-level `tsconfig.json` file, which may be specific to the frontend
configuration in Next.js for example)."
231f18d56bccd4ccaa7369ad2ac8541d74285489,Nathan Rajlich,2020-06-02 13:43:34+00:00,GitHub,2020-06-02 13:43:34+00:00,"[cli] Remove unnecessary build outputs (#4547)

Upon investigation into the `dist` dir, it appears that `ncc` is bundling some assets that don't need to be there. This change is a quick band-aid fix to remove those assets, without addressing the underlying cause of _why_ they're being bundled, which requires further investigation.

Overall about 1mb of disk space is saved."
9d73091d8cd69787de8c8add84668b28c466029a,Steven,2020-06-01 22:07:23+00:00,Steven,2020-06-01 22:07:23+00:00,"Publish Canary

 - vercel@19.0.2-canary.10
 - @vercel/routing-utils@1.8.3-canary.4"
0ca3189f797e39f42c1e9fd8803c5f1fe5a74785,Steven,2020-06-01 22:06:37+00:00,GitHub,2020-06-01 22:06:37+00:00,"[routing-utils] Fix headers with content-security-policy URL (#4550)

Fixes a case when the header value contains a URL which was mistaken for a named segment.

https://sentry.io/organizations/zeithq/issues/1702692084/?project=1351065

The regression was introduced in PR #4484 where unnamed segments were implemented for `redirects` and `rewrites` but not handled properly in `headers`."
9ff5bb9cb32d63bf9fedf7116f29d571b79548e1,Nathan Rajlich,2020-06-01 16:33:19+00:00,GitHub,2020-06-01 16:33:19+00:00,[cli] Throw an error if both `.vercel` and `.now` dirs exist (#4543)
45d05a603b0d883461e5ed6aa5d1bf18d4a3cc55,Steven,2020-06-01 14:59:25+00:00,Steven,2020-06-01 14:59:25+00:00,"Publish Canary

 - @vercel/routing-utils@1.8.3-canary.3"
6ef3b12fde0672f8b9a7e5745b9dc27145a85fa6,Steven,2020-06-01 14:58:27+00:00,GitHub,2020-06-01 14:58:27+00:00,"[build-utils] Revert type of routing errors (#4549)

In PR #4498, the type of the routing error was changed from first error and then the remaining errors. This PR changes the type back such that `error.errors` returns all errors. This will avoid any breaking change."
b16f94098af561ab9ea12597fd019a1ac423cc38,Steven,2020-06-01 12:29:32+00:00,Steven,2020-06-01 12:29:32+00:00,"Publish Canary

 - vercel@19.0.2-canary.9
 - @vercel/routing-utils@1.8.3-canary.2"
be315bebcfa54b67f0503e5afd9da98c499810a0,Steven,2020-05-30 00:07:05+00:00,GitHub,2020-05-30 00:07:05+00:00,"[routing-utils] Fix error when segment in query string (#4532)

This PR fixes an issue where the `destination` property defines a query string with a path segment that is not defined in the `source` property."
5608a4c42cc9257f10ca2287466c6849eb79853b,Steven,2020-05-29 22:15:39+00:00,GitHub,2020-05-29 22:15:39+00:00,"[routing-utils] Improve error messages (#4498)

This PR improves the way we handle routing errors in a few ways:

- The error response is a single error (the first) instead of an array of errors when mixing routing properties
- The error message says which route index has the error
- The error includes `link` and `action` properties to match our API
- The error message for mixed routes with new routing properties has been updated per [ch341](https://app.clubhouse.io/vercel/story/341)

Related to #3491"
66458fe3e075088c170c88211050c7f6d8791075,Steven,2020-05-29 20:46:35+00:00,GitHub,2020-05-29 20:46:35+00:00,"[cli] Update zeit.ink to vercel.link shortener (#4531)

- Update `zeit.ink` to `vercel.link` shortener
- Support for `output.error()` action parameter"
081b3fd3db01ad2252036fb3a2503e14868103fe,Steven,2020-05-28 17:59:24+00:00,Steven,2020-05-28 17:59:24+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.3
 - @vercel/build-utils@2.3.2-canary.2
 - @vercel/cgi@1.0.6-canary.0
 - vercel@19.0.2-canary.8
 - @vercel/client@8.0.2-canary.1
 - @vercel/go@1.1.2-canary.0
 - @vercel/next@2.6.3-canary.4
 - @vercel/node-bridge@1.3.1-canary.1
 - @vercel/node@1.6.2-canary.4
 - @vercel/python@1.2.2-canary.1
 - @vercel/routing-utils@1.8.3-canary.1
 - @vercel/ruby@1.2.2-canary.0
 - @vercel/static-build@0.17.2-canary.0"
56c8af51b23aa8f4a457743a0762b303361d5cfe,Steven,2020-05-28 16:06:42+00:00,GitHub,2020-05-28 16:06:42+00:00,"[all] Rename GitHub repo to vercel/vercel (#4506)

We renamed the GitHub repository from `zeit/now` to `vercel/vercel` so this PR updates all references to the repo URL.

There were also a few remaining references to Now CLI that have been updated to Vercel CLI."
e844a38286e466a50aaf9b74d4338f28f3c1f313,Steven,2020-05-27 21:49:46+00:00,GitHub,2020-05-27 21:49:46+00:00,"[api] Fix download api (#4512)

The list examples api was updated in #4511 but we also need to update the download example api."
cfb84b532804a7280154d0bd98cea5ba09d7ca6a,Andy,2020-05-27 21:19:15+00:00,GitHub,2020-05-27 21:19:15+00:00,"[api] Fix filename and update .vercelignore and vercel.json (#4511)

- Fix a filename in the examples API
- Rename .nowignore to .vercelignore
- Rename now.json to vercel.json"
4c61779d1b6df0d4ce69cfebecd68ff7b6e88805,Steven,2020-05-27 20:57:17+00:00,GitHub,2020-05-27 20:57:17+00:00,"[cli][client] Fix windows unit tests (#4509)

Follow up to #4463 to fix failing windows unit tests in `now-client`.
This also fixes `now-cli` tests that started failing after renaming the repo to `vercel/vercel`."
ee9b3710ec81e0fabe5803153787efdbd9f83720,Steven,2020-05-27 20:10:42+00:00,GitHub,2020-05-27 20:10:42+00:00,"[build-utils] Remove `--ignore-engines` flag (#4508)

Follow up to #4444 that makes sure we run Next.js tests.

This `--ignore-engines` flag was originally added in https://github.com/vercel/now-builders/pull/463 as a workaround. We can remove it to make sure the version of Node selected will work with the dependencies.

Removing the flag also makes sure that Yarn 2 will work properly, see #4444."
719d1ffba936aa64eb7a5f696faa1733fd1ffc46,Leo Lamprecht,2020-05-27 18:54:58+00:00,GitHub,2020-05-27 18:54:58+00:00,Adjusted old company names (#4507)
6849e3aec0d603fc565ec4b7f5f61a594654b95d,Nathan Rajlich,2020-05-27 16:43:34+00:00,GitHub,2020-05-27 16:43:34+00:00,[cli] Add additional logging to debug `ECONNREFUSED` error (#4396)
dd2399f361287a589e441048904deccc014f0fce,Sagnik Pradhan,2020-05-27 16:00:05+00:00,GitHub,2020-05-27 16:00:05+00:00,"[build-utils] Fix Yarn 2 install argument order (#4444)

Fix for Yarn Version 2 install error. Positioned the arguments array in proper order #4436 

Co-authored-by: Steven <steven@ceriously.com>"
684c2299842cb52d7f2ba78a13ed12bd046abb7e,JJ Kasper,2020-05-27 14:50:36+00:00,JJ Kasper,2020-05-27 14:50:36+00:00,"Publish Canary

 - vercel@19.0.2-canary.7
 - @vercel/next@2.6.3-canary.3
 - @vercel/node@1.6.2-canary.3
 - @vercel/routing-utils@1.8.3-canary.0"
e6c50e2efb913443e46de7139365a10e9f6e03e0,JJ Kasper,2020-05-26 23:29:48+00:00,GitHub,2020-05-26 23:29:48+00:00,"[next][routing-utils] Fix unnamed multi-match custom route (#4484)

This adds a failing test for the regex from https://github.com/zeit/next.js/discussions/13347#discussion-4546 

It appears the reason the regex does not work when deployed on Vercel is due to us not indexing the un-named segments and instead we filter them out as noticed by @dav-is. 

This PR adds one approach to resolve this by accounting for the un-named indexes while not allowing them to be used in the destination still."
0b5d38e8628fdee6de384dfb63b3c8e97c7d6ede,Steven,2020-05-26 20:45:21+00:00,GitHub,2020-05-26 20:45:21+00:00,"[cli] Add delay before updating Runtimes in background (#4495)

Similar to #4427 but instead of an option to turn on or off, we delay the background task that updates the Runtimes during development. The idea is that the initial install runs immediately using the bundled Runtimes from the CLI. Then if the user plans to keep developing, we'll check to see if we should update to the latest Runtime version after 30 seconds."
775e6b485601bc2b67f2c9d44d784bcfffb2dad6,Steven,2020-05-26 19:09:24+00:00,GitHub,2020-05-26 19:09:24+00:00,"[test] Fix cli test for handle miss querystring (#4492)

Follow up to #4346 which works fine locally on macOS but hangs in CI.

This PR modifies the test as a workaround."
3a9cf083cbae92486d81adf9185cae7de4e74a08,Steven,2020-05-26 15:58:01+00:00,GitHub,2020-05-26 15:58:01+00:00,"[cli] Fix query string routes in dev (#4346)

This PR fixes an issue where the query string from the route destination was not observed.

Co-authored-by: Nathan Rajlich <n@n8.io>"
6b58b56c493edc0a2aa516903701f306ce9be878,Steven,2020-05-26 15:15:00+00:00,GitHub,2020-05-26 15:15:00+00:00,"[cli] Fix fork child process on dev (#4462)

When debugging the CLI with `--inspect`, the flag was being passed to the child process as well since #4254.

This PR prevents any arguments from being passed to the child process."
212cee19b484f7319c5a98b3687e1d6bce12387c,Nathan Rajlich,2020-05-25 13:32:29+00:00,GitHub,2020-05-25 13:32:29+00:00,"[cli] Rename dev test fixtures to `vercel.json` and use `@vercel` (#4424)

Also regenerates the `yarn.lock` files via `yarn upgrade`."
c9d3ec21c28de241538657deb4c185ad5c14bab5,Andy Bitz,2020-05-23 01:43:13+00:00,Andy Bitz,2020-05-23 01:43:13+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.2"
5fa8ed56a9584b3a9bdd06ffd3a254b32cc87fe5,Andy,2020-05-23 01:40:20+00:00,GitHub,2020-05-23 01:40:20+00:00,"Revert ""[frameworks][examples] Add Blitz.js (#4219)"" (#4464)

This reverts commit 65446b73dad52e08b47bd421a21cbc48d169e64a."
ff80043acf0e9fa2d124478c4e92af6269f8688b,Nathan Rajlich,2020-05-23 00:48:11+00:00,GitHub,2020-05-23 00:48:11+00:00,"[frameworks] Fix unit tests on Windows (#4463)

For some reason, the glob selector was causing problems on Windows:

```
[frameworks] Running yarn test-unit
$ jest --env node --verbose --runInBand --bail test/*unit.*test.*
No tests found, exiting with code 1
Run with `--passWithNoTests` to exit with code 0
In D:\a\now\now\packages\frameworks
  6 files checked.
  testMatch: **/__tests__/**/*.[jt]s?(x), **/?(*.)+(spec|test).[tj]s?(x) - 1 match
  testPathIgnorePatterns: \\node_modules\\ - 6 matches
  testRegex:  - 0 matches
Pattern: test\\*unit.*test.* - 0 matches
error Command failed with exit code 1.
```

Remove the glob pattern fixes the issue, though it's not clear why it
causes an issue in the first place.

See: https://github.com/zeit/now/runs/701043212"
1f0ebcef2421a71c61d1739537298d30ef21dbf1,Nathan Rajlich,2020-05-23 00:39:44+00:00,GitHub,2020-05-23 00:39:44+00:00,"[node] Fix `req.on('data')` events in `startDevServer()` (#4228)

By re-playing the events using `Bridge#launcher()` machinery, so it's
re-using more logic that is used in production, which is a good thing."
c35d0e8408ac37022ae0b38a3573ddd75cfbb1ab,Andy Bitz,2020-05-23 00:02:49+00:00,Andy Bitz,2020-05-23 00:02:49+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.1"
65446b73dad52e08b47bd421a21cbc48d169e64a,Brandon Bayer,2020-05-22 23:55:03+00:00,GitHub,2020-05-22 23:55:03+00:00,"[frameworks][examples] Add Blitz.js (#4219)

* Add Blitz.js to Frameworks

* update blitz example to latest version

* change blitz dependency to be `latest`

* Update packages/frameworks/frameworks.json

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>

* update logo

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Steven <steven@ceriously.com>"
f3c5c607867b581be785851601d929b27599a3fd,JJ Kasper,2020-05-22 17:47:08+00:00,JJ Kasper,2020-05-22 17:47:08+00:00,"Publish Canary

 - vercel@19.0.2-canary.6
 - @vercel/next@2.6.3-canary.2
 - @vercel/python@1.2.2-canary.0"
ca0665efcd007ae094523434dfb6245fbe351c75,JJ Kasper,2020-05-22 17:44:01+00:00,GitHub,2020-05-22 17:44:01+00:00,"[next] Update routes order for shared lambdas (#4428)

* Update routes order for shared lambdas

* Add test case

* update test path

* Update packages/now-next/test/fixtures/23-custom-routes-verbose-shared-lambdas/now.json

* Update headers in probes

Co-authored-by: Tim Neutkens <tim@timneutkens.nl>
Co-authored-by: Joe Haddad <joe.haddad@zeit.co>"
2bc1f9f45ea67125917a28ed143eac60d9caebcc,Steven,2020-05-22 13:17:36+00:00,GitHub,2020-05-22 13:17:36+00:00,"[python] Link to original PR contribution for ASGI (#4448)

This code was contributed by @nathancahill under MIT license but it is likely from the Mangum project, so we'll link to the relevant code as the original source, also MIT License."
820ecc7254607abb38e53e98ec57b17aae19800e,Nathan Rajlich,2020-05-21 16:03:34+00:00,GitHub,2020-05-21 16:03:34+00:00,"[tests] Fix Windows tests filtering logic and branch name detection (#4441)

Currently, CI is printing this:

```
Running ""test-unit"" on branch ""(HEAD"" with the following packages:
now-cli\test\dev-server.unit.js
now-cli\test\fixtures\unit\now-dev-request-body\api\data-events.js
now-cli\test\fixtures\unit\now-dev-request-body\api\req-body.js
now-node-bridge\src\bridge.ts
now-node\src\dev-server.ts
now-node\src\helpers.ts
now-node\src\launcher.ts
now-cli

[now-cli\test\dev-server.unit.js] Skipping since script ""test-unit"" is missing from package.json
[now-cli\test\fixtures\unit\now-dev-request-body\api\data-events.js] Skipping since script ""test-unit"" is missing from package.json
[now-cli\test\fixtures\unit\now-dev-request-body\api\req-body.js] Skipping since script ""test-unit"" is missing from package.json
[now-node-bridge\src\bridge.ts] Skipping since script ""test-unit"" is missing from package.json
[now-node\src\dev-server.ts] Skipping since script ""test-unit"" is missing from package.json
[now-node\src\helpers.ts] Skipping since script ""test-unit"" is missing from package.json
[now-node\src\launcher.ts] Skipping since script ""test-unit"" is missing from package.json
```

So, other than `now-cli` which is hard-coded to always run, no other tests were being selected on Windows. This change uses the proper path separator for the OS to fix this.

Also, the branch name detection command is changed to fix the `""(HEAD""` name that is being detected in CI.

With this change, it looks like:

```
Running ""test-unit"" on branch ""fix/tests-windows"" with the following packages:

 - now-node
 - now-cli

[now-node] Running yarn test-unit

[now-cli] Running yarn test-unit

```"
f41899656bc61771724a70086f960b9272036d9c,Steven,2020-05-20 13:39:32+00:00,GitHub,2020-05-20 13:39:32+00:00,"[cli] Update runtimes in dev should not audit (#4429)

This PR adds two additional flags to `npm install` when updating Runtimes:

- `--no-audit`:  disable sending of audit reports to the configured registries
- `--no-progress`: disable the progress bar"
c4373cdcadd855f93b02cce378c7907ea301b465,Steven,2020-05-19 21:38:43+00:00,Steven,2020-05-19 21:38:43+00:00,"Publish Canary

 - vercel@19.0.2-canary.5
 - @vercel/next@2.6.3-canary.1
 - @vercel/node@1.6.2-canary.2"
28502ee32f6a9d0f7e6f7a8aad2edc88372331a6,Nathan Rajlich,2020-05-19 19:47:09+00:00,GitHub,2020-05-19 19:47:09+00:00,"[cli] Fixes for the `vc dev` Runtime installation logic (#4421)

* Removes the `get-bundled-builders.ts` file, which is no longer relevant, and was causing a false-positive for `@now/build-utils`.
 * Makes the installing of `@vercel/build-utils` and `@now/build-utils` only happen if there is another Runtime to install.
 * `@vercel/build-utils` and `@now/build-utils` will now be properly checked for updates (but again, only if there is another Runtime to update)."
740b18612f5d6f951e6e188481f121b2bf637136,Steven,2020-05-19 18:50:59+00:00,GitHub,2020-05-19 18:50:59+00:00,"[node][next] Bump node-file-trace to 0.6.1 (#4407)

Bumps node-file-trace to version ~~[0.6.0](https://github.com/zeit/node-file-trace/releases/tag/0.6.0)~~ [0.6.1](https://github.com/zeit/node-file-trace/releases/tag/0.6.1) 

Co-authored-by: Nathan Rajlich <n@n8.io>"
8b4dea88700e8b5a762abc8fe1996eeeeee1fe22,Steven,2020-05-19 12:37:51+00:00,GitHub,2020-05-19 12:37:51+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
e98d24ec8bd5bb5f79baaaefc578b09c1f5a302c,Steven,2020-05-19 12:37:37+00:00,GitHub,2020-05-19 12:37:37+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
d4b32ecd6a5c4f56c49033254da711f12992c347,Steven,2020-05-19 12:37:31+00:00,GitHub,2020-05-19 12:37:31+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
0a62cf99ed7741e1f1419e24f9af0b9341697b80,Steven,2020-05-19 12:37:22+00:00,GitHub,2020-05-19 12:37:22+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
51de339a91128e4c7e4bf032ead1501c37bf4857,Steven,2020-05-19 12:37:12+00:00,GitHub,2020-05-19 12:37:12+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
0e3d9045735c36ffd03d9ae6509501e7927e0e9d,Steven,2020-05-19 12:37:03+00:00,GitHub,2020-05-19 12:37:03+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
8c4e43935b9ed9c565a23a71f95875aec4fe1bd1,Steven,2020-05-19 12:36:54+00:00,GitHub,2020-05-19 12:36:54+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
82436a70154d6f10b743c23a8fcc75736cc31fd5,Steven,2020-05-19 12:36:48+00:00,GitHub,2020-05-19 12:36:48+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
70cfdc989e4f2b9bddbf6cbd61987101e7a984c1,Steven,2020-05-19 12:36:36+00:00,GitHub,2020-05-19 12:36:36+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
61c38d6823d8d5bf7c43ba92dcde82c69f98803d,Steven,2020-05-19 12:36:21+00:00,GitHub,2020-05-19 12:36:21+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
af932e9a3e19154f3b2805e28f87c3955c26288f,Steven,2020-05-19 12:36:11+00:00,GitHub,2020-05-19 12:36:11+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
805e92579fe4d0848025756b30f10cedd172614d,Steven,2020-05-19 12:35:56+00:00,GitHub,2020-05-19 12:35:56+00:00,"[cli] Fix `vc env pull` escaping quotes (#4412)

Fixes an issue from discussion #4391 so that quotes are no longer escaped per dotenv conventions.

I tested the behavior and it works correctly with Next.js and Create React App."
548fa56803ace458af0833af8b2ebfdec97bc0d4,Nathan Rajlich,2020-05-18 23:32:17+00:00,GitHub,2020-05-18 23:32:17+00:00,"[cli] Update ""custom runtime"" dev integration test to `vercel-bash@3.0.7` (#4410)

`now-bash@3.0.0` is broken in production because AWS decided to remove
the `which` command from the Lambda environment for some reason. Fixed
in the latest version which uses the updated Vercel name.

Also removes the `skipDeploy: true` flag for this test, and updates the
test names to include ""vercel dev"" intstead of ""now dev""."
c9665b79f11dd86579e7171f55cba7156762ba7c,Steven,2020-05-18 22:33:09+00:00,GitHub,2020-05-18 22:33:09+00:00,"[tests] Bump cancel-workflow-action to 0.3.2 (#4411)

Bumps the `cancel-workflow-action` to version [0.3.2](https://github.com/styfle/cancel-workflow-action/releases/tag/0.3.2)"
df2d56de19cf89cb807dee546415f1b08ec50ff9,Nathan Rajlich,2020-05-18 21:32:13+00:00,GitHub,2020-05-18 21:32:13+00:00,"[cli] Await the FS watcher closing when shutting down `vc dev` (#4409)

This was missing for some reason :thinking_cat:"
b2eb7a0be2733ab12053cd17a58c185e409f119a,Nathan Rajlich,2020-05-18 20:45:40+00:00,GitHub,2020-05-18 20:45:40+00:00,"[cli] Fix dev server unit tests timing out (#4408)

This is a follow-up to #4241, which apparently caused the `vc dev` unit
tests to start timing out. After some digging, it seems the root cause
is that `proxy.close()` callback is never invoked. This makes sense
because we never call `proxy.listen()` or have the `httpProxy` actually
bind to a port."
ce07084184bbd4d99f456644a5810d6c6f10f04e,Steven,2020-05-18 18:45:27+00:00,Steven,2020-05-18 18:45:27+00:00,"Publish Canary

 - vercel@19.0.2-canary.4"
4292a59cc05f868f8d0cd44e1a7a21a81493c4ee,Steven,2020-05-18 18:43:26+00:00,GitHub,2020-05-18 18:43:26+00:00,[docs] Update issue template (#4400)
3fc616d1e27bf837bc23d76887e45df7e8a81f98,Matt Dunn-Rankin,2020-05-18 18:42:55+00:00,GitHub,2020-05-18 18:42:55+00:00,"[cli] Support WebSocket upgrades in dev (#4241)

We were already using `http-proxy`'s WebSockets option, but we were missing a step! In addition to setting `{ws: true}`, you must also forward WebSocket upgrade events from the front-facing server to the proxy. [(See this example.)](https://github.com/http-party/node-http-proxy#proxying-websockets)

Previously, the proxy server and client _would_ mutually agree to ""upgrade"" their connection (because we set `{ws: true}`) but then, when the client would start sending WebSocket data instead of HTTP data, our front-facing server would drop it, because we hadn't configured a place for it to go.

In this change, we configure `this.server` to forward its `upgrade` events to the proxy server.

We also refactor `proxyPass` to use the new shared `this.proxy` instance responsible for the `upgrade` events, instead of creating a new proxy instance for every request. This isn't strictly necessary, but a helpful simplification to clarify that there's no specific reason for the proxy instances to be _different_ than the instance that manages WebSocket upgrades!

This fixes #3451: CRA apps can now auto-refresh when the source code changes, and Firefox can now load the app without crashing on the 6th attempt.

Co-authored-by: Steven <steven@ceriously.com>"
31566b376dcb3d1ba4a218bf83c2752e7016d2cb,Steven,2020-05-18 18:30:41+00:00,GitHub,2020-05-18 18:30:41+00:00,"[cli] Fix login test with mock server (#4401)

This PR adds a mock server so that `vercel login` can be tested without using the real API."
d6b2fb1f31a4b0abf15c950cfac231f3ffac14dd,JJ Kasper,2020-05-16 15:42:05+00:00,JJ Kasper,2020-05-16 15:42:05+00:00,"Publish Canary

 - @vercel/frameworks@0.0.15-canary.0
 - @vercel/build-utils@2.3.2-canary.1
 - vercel@19.0.2-canary.3
 - @vercel/next@2.6.3-canary.0
 - @vercel/node@1.6.2-canary.1"
87f40d98d42354695f45faffc9477cf40ff8ac2e,JJ Kasper,2020-05-16 15:12:41+00:00,GitHub,2020-05-16 15:12:41+00:00,"[next] Update to group pages into shared lambdas (#4102)

* Add initial changes for grouping lambdas

* Handle more cases and clean up some stuff

* Remove logs from debugging

* Remove changes from testing and add page layers

* Update output tests

* Move new behavior behind flag

* Add separate tests for new behavior

* Clean-up style diffs

* Update error

* Update to separate out new behavior more

* Apply suggestions from review

Co-authored-by: Tim Neutkens <tim@timneutkens.nl>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
1b809bc2256e6ec61486e5126295244456ebdf00,Steven,2020-05-15 19:18:17+00:00,GitHub,2020-05-15 19:18:17+00:00,"[examples] Update readme to use Vercel CLI (#4383)

Fixes an issue someone mentioned in discussion #4361"
05539dcae77ef9c23d71bb83892b55f99bd16292,Steven,2020-05-15 18:04:51+00:00,GitHub,2020-05-15 18:04:51+00:00,"[cli] Add logs when installing Runtimes in dev (#4393)

This PR consolidates the `npm install` for Runtimes during `vercel dev` and adds some additional logging."
3ad2efeb74040c9ca60b4a0fafa1f889f053ebed,Joe Haddad,2020-05-15 02:11:10+00:00,GitHub,2020-05-15 02:11:10+00:00,"[next] Update ""Routes Manifest"" Error (#4368)

This provides the user with additional troubleshooting steps."
e4833027bd2320cdbc9cfcc200e788bfa401f543,Sarup Banskota,2020-05-14 23:23:25+00:00,GitHub,2020-05-14 23:23:25+00:00,"[docs] Link to `vercel.com` (#4329)

We should add a link to vercel.com in the header section of the README  it'll direct readers to our website."
34a6a16a1bbfb09fc8802239ef572cd7db3b132d,Steven,2020-05-14 20:55:09+00:00,GitHub,2020-05-14 20:55:09+00:00,"[tests] Update codeowners for mcsdevv (#4385)

Updating codeowners since GitHub username was changed"
b9f7d5b9c831a6af4781519050c067d3ce27c799,Steven,2020-05-14 19:38:43+00:00,GitHub,2020-05-14 19:38:43+00:00,[tests] Fix test tokens (#4386)
44105bd4e925ef91639e497405fa0a7c537dc1f6,Andy,2020-05-14 15:51:44+00:00,GitHub,2020-05-14 15:51:44+00:00,[frameworks] Fix Dojo logo (#4379)
ba09c08ce3a5cd2d8ebd28aa602718933d8cbf61,Andy,2020-05-14 13:43:21+00:00,GitHub,2020-05-14 13:43:21+00:00,"Adds the missing logo for the Dojo framework (#4377)

Adds the missing logo for the Dojo framework."
ef63247fc0da985b5dd2c65e58337704a1fea1c4,Andy,2020-05-14 11:30:11+00:00,GitHub,2020-05-14 11:30:11+00:00,"[examples][frameworks] Add missing examples and add a test to ensure every framework has an example (#4372)

* Add test to frameworks

* Add example for Docusaurus v2

* Add example for ionic-angular

* Update READMEs

* Use existing versions

* Reset yarn.lock

* Add schema validation and add missing Scully.io logo"
3c75f1440dec392463237429cf46317f974b8177,Nathan Rajlich,2020-05-14 01:15:31+00:00,GitHub,2020-05-14 01:15:31+00:00,"[build-utils][cli][node] Write the dev mode `tsconfig.json` files to `.vercel/cache` (#4230)

Write the generated `tsconfig.json` files that are required to do TypeScript type checking on a single file to the dev cache directory (`.vercel/cache`). This way, they are in a location that is gitignored by default, but still has `require()` access to the types that the project uses.

* `StartDevServerOptions` had to be updated to include `meta`, at which point it's identical to `BuildOptions`, so just make it a type alias instead.
* Vercel CLI is updated to pass in the `meta` object to `startDevServer`
* Vercel CLI is updated to create the `.vercel/cache` dir upon startup, if it does not already exist
* `@vercel/node` now creates the tsconfig files in the dev cache directory, using the `wx` write flags. This ensures that the file is only created once and then cached in the dev cache dir.

An example of a generated tsconfig file for endpoint `api/foo.ts`:

```json
{
  ""extends"": ""../../tsconfig.json"",
  ""include"": [""../../api/foo.ts""]
}
```"
8db178a146a036e721f90b71ea08773646cdf121,Nathan Rajlich,2020-05-13 23:32:31+00:00,GitHub,2020-05-13 23:32:31+00:00,"[cli] Pin `@vercel/next` to v2.6.2 (#4373)

To keep the `lerna` monorepo version pinning intact.

It should have been updated in c23b9ccd1d9178652754c8baabcc8c713bdd8fc7, but was not because the commit was created manually instead of with `lerna`."
61f87acaf41e570e335b04660c0b8a4b87c66eb4,Steven,2020-05-13 20:47:39+00:00,GitHub,2020-05-13 20:47:39+00:00,"[cli] Fix api url for `vc env add` (#4371)

This PR fixes a POST request url to match the [api docs](https://vercel.com/docs/api#endpoints/secrets/create-a-new-secret) recommendation so that all data is in the body, not the query string."
406f6901b45d0430f405c5c4ed54cb42147fcbcd,Leo Lamprecht,2020-05-13 12:10:38+00:00,GitHub,2020-05-13 12:10:38+00:00,Removed myself from CODEOWNERS (#4366)
b15b653d91b91a34584d6af0da13650c07fb6a1c,Nathan Rajlich,2020-05-13 01:02:05+00:00,GitHub,2020-05-13 01:02:05+00:00,[cli] Render a note when installing Vercel CLI and Now CLI is installed (#4344)
fc7d6bf6706fdfc8464494a5fd0d7792f7b84404,Steven,2020-05-13 00:23:56+00:00,Steven,2020-05-13 00:23:56+00:00,"Publish Canary

 - vercel@19.0.2-canary.2
 - @vercel/client@8.0.2-canary.0
 - @vercel/node-bridge@1.3.1-canary.0"
e774407e8a72c5e9e7715dcc74013b4a1ff19b61,Vincent Riemer,2020-05-13 00:22:34+00:00,GitHub,2020-05-13 00:22:34+00:00,"[client] Fix file tree walking ignored files (i.e. node_modules) (#4325)

Starting with version 18.0.0, there was a regression from ##3980 causing the deploy command to hang indefinitely at the file tree building stage. I triaged the issue to be that the call of `recursive-readdir` was now walking through my `node_modules` folder. This is an issue in my environment since I have a very intricate monorepo with circular symlinks in my node_modules, which causes `recursive-readdir` to go into an infinite loop.

This PR fixes this in 2 commits:
1) The first commit refactors out the file tree building logic into separate utility functions and adds unit tests to verify the expected behavior of not walking through `node_modules` (this commit's unit test run should fail as seen in checks on this PR). This commit does not change any behavior.
2) The second commit fixes the actual issue (causing the unit tests to pass again). When I was bisecting the issue between the 17.0.0 and 18.0.0 tags I noticed that trailing slashes were added to the default ignore's directory entries in `getVercelIgnore()`. I removed them to bring it back to how it was done in v17.0.0 and it resolved the issue.

Hopefully with the added unit tests this shouldn't regress in the future.

Co-authored-by: Steven <steven@ceriously.com>"
d8fb47436507eabb419c6d9571e5b4e2d246401b,Nathan Rajlich,2020-05-12 23:52:33+00:00,GitHub,2020-05-12 23:52:33+00:00,"[node-bridge] Catch invalid HTTP request headers (#4188)

* [now-node-bridge] Catch invalid HTTP request headers

In some rare cases, the proxy layer passes what Node.js considers an
invalid HTTP request header causing the `http.request()` function to
throw an error, such as:

```
TypeError [ERR_INVALID_HTTP_TOKEN]: Header name must be a valid HTTP token [""cookie""]
```

So instead, use `req.setHeader()` API with try/catch to skip invalid
HTTP headers and print a message for the deployment logs with debugging
information. This way, the HTTP request will still go through, with
a missing header, rather than causing the whole function to 500.

* Add test

* Don't use `typeof`

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
eec778b2444c82cc6976d28b186c059498f8c8c3,Steven,2020-05-12 23:50:29+00:00,GitHub,2020-05-12 23:50:29+00:00,"[cli] Add test for readme.md with now.json and vercel.json (#4357)

This PR adds a E2E test to make sure #4042 works correctly."
c23b9ccd1d9178652754c8baabcc8c713bdd8fc7,JJ Kasper,2020-05-12 23:23:24+00:00,JJ Kasper,2020-05-12 23:23:24+00:00,"Publish Stable

 - @vercel/next@2.6.2"
f61b36495c4c1573ede1835645e43aee0b2cd588,JJ Kasper,2020-05-12 22:43:17+00:00,JJ Kasper,2020-05-12 22:43:17+00:00,"Publish Canary

 - @vercel/build-utils@2.3.2-canary.0
 - vercel@19.0.2-canary.1
 - @vercel/next@2.6.2-canary.0
 - @vercel/node@1.6.2-canary.0"
a1ec28ba36a54f0dac0e3fc3d0295469c3c80558,JJ Kasper,2020-05-12 22:42:38+00:00,GitHub,2020-05-12 22:42:38+00:00,"Revert ""[now-next] Update to pass dynamic page values in the query (#4196)"" (#4358)

This reverts commit dfdef0f6fd1f336f3efd5914fa7b2d565d098ac0.

# Conflicts:
#	packages/now-next/src/index.ts"
97eeddb6acde81f0c53e28a42a6be860979a93d8,Nathan Rajlich,2020-05-12 20:58:05+00:00,GitHub,2020-05-12 20:58:05+00:00,"[cli][node] Re-apply @TooTallNate's `vc dev` updates (#4254)

This reverts commit 099bc6dbf6b3e5cb0cc02acc44786cf87bdc4c60 (#4231)."
69b62b810138ef5c72451bfd1e06f4da4de36e99,Steven,2020-05-12 18:36:01+00:00,GitHub,2020-05-12 18:36:01+00:00,"[build-utils] Detect invalid `engines` pattern in package.json (#4354)

This PR improves the error message when a user provides an invalid pattern in package.json `engines` field.

## Before

```
TypeError: Invalid comparator: => 10
at Comparator.module.exports.Comparator.parse (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10262:11) 
at new Comparator (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10245:8) 
at Range.<anonymous> (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10439:12) 
at Array.map (<anonymous>) 
at Range.module.exports.Range.parseRange (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10438:13) 
at Range.<anonymous> (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10381:17) 
at Array.map (<anonymous>) 
at new Range (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10380:40) 
at Function.intersects (/zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:10998:8) 
at /zeit/9cd49d8c66a9bd43/.build-utils/node_modules/@vercel/build-utils/dist/index.js:25847:29
```

## After

```
Found `engines` in `package.json` with an invalid Node.js version range: ""=> 10"".
Please set ""engines"": { ""node"": ""12.x"" } in your `package.json` file to upgrade to Node.js 12.
More details: https://vercel.com/docs/runtimes#official-runtimes/node-js/node-js-version
```

In this case, the `=>` operator is not valid so the user probably meant `>=` but we only suggest the `10.x` or `12.x` syntax because we can only guarantee a major version."
591c247c4e97bdc7d78b55304a985f32f59354dd,Steven,2020-05-12 15:34:02+00:00,GitHub,2020-05-12 15:34:02+00:00,"[cli] Fix update command (#4353)

The CLI name was updated but not the command.

This PR fixes the command to show the correct package name.

Fixes [PRODUCT-2905](https://vercel.atlassian.net/browse/PRODUCT-2905)"
8dc3744cf3e48078b3943c4f0ff41ccfb4f270a0,Nathan Rajlich,2020-05-12 01:10:17+00:00,GitHub,2020-05-12 01:10:17+00:00,"[build-utils] Use `@vercel/static` for zero-config (#4345)

Now that `@vercel/static` works in production, we can update
to use it for zero-config."
8f108c51fa19abcdc21504cb134beb4b6ed046e5,Steven,2020-05-11 19:56:24+00:00,Steven,2020-05-11 19:56:24+00:00,"Publish Canary

 - vercel@19.0.2-canary.0"
c8e7b266bc056b2d52ab88d525f69c786d5c6a2c,Steven,2020-05-11 19:55:11+00:00,GitHub,2020-05-11 19:55:11+00:00,"[cli] Fix new routing props to be case sensitive (#4341)

This PR fixes a bug where `vc dev` acted differently than real deployments which are supposed to have case sensitive `rewrites` and `redirects`."
378d62083c050c7a453f5cd68211f5a63783f7e1,Steven,2020-05-11 19:15:12+00:00,GitHub,2020-05-11 19:15:12+00:00,"[cli] Fix env commands when secret was deleted (#4340)

This PR fixes the scenario when a user adds an environment variable to a project but then deletes the secret associated with the environment variable.

For example:

```sh
echo 'foo' | vc env add FOO development
vc secrets rm foo-development-v1ln
vc env pull                # would error with 404 every time
vc env rm FOO development  # would error with 404 the first time
```

Now we'll warn for `vc env pull` and we will assume success for `vc env rm`.

Fixes https://sentry.io/organizations/zeithq/issues/1612188511/
Fixes https://sentry.io/organizations/zeithq/issues/1656997656/"
8189fb2373ccdc12e8682f795e05754b468a18b8,Steven,2020-05-11 13:10:40+00:00,Steven,2020-05-11 13:10:40+00:00,"Publish Stable

 - @vercel/build-utils@2.3.1
 - vercel@19.0.1
 - @vercel/client@8.0.1
 - @vercel/go@1.1.1
 - @vercel/next@2.6.1
 - @vercel/node@1.6.1
 - @vercel/python@1.2.1
 - @vercel/ruby@1.2.1
 - @vercel/static-build@0.17.1"
76f544cbea84a7890479fa711ca39f9f3e35616f,Nathan Rajlich,2020-05-09 20:54:05+00:00,Nathan Rajlich,2020-05-09 20:54:05+00:00,"Publish Canary

 - @vercel/build-utils@2.3.1-canary.0
 - vercel@19.0.1-canary.0
 - @vercel/client@8.0.1-canary.0
 - @vercel/go@1.1.1-canary.0
 - @vercel/next@2.6.1-canary.0
 - @vercel/node@1.6.1-canary.0
 - @vercel/python@1.2.1-canary.0
 - @vercel/ruby@1.2.1-canary.0
 - @vercel/static-build@0.17.1-canary.0"
e246d2ed7155f5362e149f72dc3a1ab7c5e63cd1,Nathan Rajlich,2020-05-09 10:02:16+00:00,GitHub,2020-05-09 10:02:16+00:00,"[client] Throw an error if both `.vercelignore` and `.nowignore` exist (#4311)

* [client] Throw an error if both `.vercelignore` and `.nowignore` exist

* Remove `.`

* Add tests

* Update test

* [cli] Properly clear spinner if `createDeployment()` async generator throws an error

* Update packages/now-client/src/utils/index.ts

Co-authored-by: Steven <steven@ceriously.com>

* Update packages/now-client/tests/vercelignore.test.ts

Co-authored-by: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
ed4c759c49aa6de30cc849dee36bbe6b0498baa4,Steven,2020-05-09 04:00:01+00:00,GitHub,2020-05-09 04:00:01+00:00,"[all] Fix runtimes to work with old versions of CLI (#4317)

This PR fixes an issue where old versions of the CLI would update to the latest builder, but not have a copy of `@vercel/build-utils` because they only shipped with `@now/build-utils`. So in this case, we can fallback to the other package. We must be careful to only import types from `@vercel/build-utils` and anything needed at runtime must be imported from `./build-utils` wrapper."
2656647891330509a59b19378c25015eb95e1a40,Steven,2020-05-08 23:45:53+00:00,GitHub,2020-05-08 23:45:53+00:00,"[cli] Fix error message to display correct config name (#4309)

This PR fixes an issue when the error message assumed the config was `vercel.json` even when the user had `now.json`.

### Before

```
Error! The property `foo` is not allowed in vercel.json  please remove it.
```

### After

```
 Error! The property `foo` is not allowed in now.json  please remove it.
```

Co-authored-by: Nathan Rajlich <n@n8.io>"
3b3c468f3a5c08f0c72aff824024afff25785690,Steven,2020-05-08 23:08:05+00:00,GitHub,2020-05-08 23:08:05+00:00,"[cli] Fix deploying v1 with secrets (#4315)

This PR fixes a regression from PR #4084 where secrets were paginated so some v1 deployments that had more than 20 secrets were unable to deploy since CLI version 19."
4214de2ce0c81519c7621c465a0377d92b097520,Nathan Rajlich,2020-05-08 22:17:29+00:00,GitHub,2020-05-08 22:17:29+00:00,"[built-utils] Make `getPlatformEnv()` throw if both NOW_ and VERCEL_ are defined (#4313)

Also adds unit tests."
40b7af434941db7fbb684b5607b93c7c1bdbe1a8,Nathan Rajlich,2020-05-08 20:37:20+00:00,GitHub,2020-05-08 20:37:20+00:00,"[cli] Fix `now dev` infinite loop for yarn workspaces (#4310)

A couple quick fixes to `now dev` to land on stable, before #4254 gets merged for canary."
f4d86cb9df757d1154a43549290b6d4a22b55caf,Steven,2020-05-08 15:41:41+00:00,GitHub,2020-05-08 15:41:41+00:00,"[now-cli] Update `now env add` to skip value if system var (#4306)

This PR updates the CLI to work the same as the dashboard and skip the env var value if the name indicates that it is a [System Environment Variables](https://vercel.com/docs/v2/build-step#system-environment-variables).

Co-authored-by: Luc <luc.leray@gmail.com>"
0492fcb0fcc6e63f1c83b2cb74d703a28304cadb,Nathan Rajlich,2020-05-08 01:47:36+00:00,GitHub,2020-05-08 01:47:36+00:00,"[now-cli] Fix update Changelog URL (#4302)

Incorrect URL: https://github.com/zeit/now/releases/tag/now@19.0.0

Correct URL: https://github.com/zeit/now/releases/tag/vercel@19.0.0"
3a217dc7503cc7e2e26dc66e5e0284a3a825bd99,Nathan Rajlich,2020-05-08 00:02:30+00:00,GitHub,2020-05-08 00:02:30+00:00,"[now-build-utils] Use `@vercel` runtimes for zero-config (#4300)

This reverts commit 8a9b67a3f3e6984f26ab5f6f738a3a02049cc2b3 (#4284),
now that `@vercel` runtimes work in production."
b626f3fe57751dc2c34a0bb8f678bcbbaafae068,Steven,2020-05-07 22:52:35+00:00,Steven,2020-05-07 22:52:35+00:00,"Publish Stable

 - @vercel/frameworks@0.0.14
 - @vercel/build-utils@2.3.0
 - @vercel/cgi@1.0.5
 - vercel@19.0.0
 - @vercel/client@8.0.0
 - @vercel/go@1.1.0
 - @vercel/next@2.6.0
 - @vercel/node-bridge@1.3.0
 - @vercel/node@1.6.0
 - @vercel/python@1.2.0
 - @vercel/routing-utils@1.8.2
 - @vercel/ruby@1.2.0
 - @vercel/static-build@0.17.0"
96bc0c9beea7bd317434872bb742bed447070e80,Steven,2020-05-07 21:56:40+00:00,Steven,2020-05-07 21:56:40+00:00,"Publish Canary

 - vercel@18.0.1-canary.24"
f4ff8c0268c7cf3b0921cef98c0d61e425805a7b,Steven,2020-05-07 21:55:35+00:00,GitHub,2020-05-07 21:55:35+00:00,[now-cli] Change precedence of auth directory (#4299)
1a5681f287e58b0124a2151b5286a793181b84e7,Steven,2020-05-07 21:24:15+00:00,GitHub,2020-05-07 21:24:15+00:00,"[now-cli] Add getTitleName() and update getCommandName() (#4296)

This PR adds two functions:

* `getTitleName()` - used to get the uppercase Vercel or Now package name, for example `vercel --version`
* `getCommandName()` - used to get the `vercel` command followed by subcommands, for example in error suggestions"
88b66ae6462a1cd0ed16d8a56c00bfa0e7360e48,Ana Trajkovska,2020-05-07 20:37:48+00:00,Ana Trajkovska,2020-05-07 20:37:48+00:00,"Publish Canary

 - vercel@18.0.1-canary.23"
db0124782a2b7599da884f8eff79333078c54ae8,Ana Trajkovska,2020-05-07 20:36:54+00:00,GitHub,2020-05-07 20:36:54+00:00,"Implement pagination for `vercel teams ls` (#4294)

* Implement pagination for `now teams ls`

* Set default empty object

* Use output logger

* Trigger build"
a7a5d4d1693ce36e28ff87de8afdb3ebff5e4092,Nathan Rajlich,2020-05-07 19:40:52+00:00,GitHub,2020-05-07 19:40:52+00:00,[now-cli] Special case `@vercel/static` when updating builders (#4295)
4b39e96c2862f51a5acee88d35683558f86c791c,Nathan Rajlich,2020-05-07 19:00:16+00:00,GitHub,2020-05-07 19:00:16+00:00,"Ensure the npm registry is used during ""Publish"" workflow (#4286)

Unset the `npm_config_registry` env var which yarn overwrites to the
yarn registry, which we don't want since the `.npmrc` file that gets
created is configured to the npm registry."
f459db9f839b07cc015746cf2e43d292fe51fac7,Steven,2020-05-07 18:04:37+00:00,GitHub,2020-05-07 18:04:37+00:00,"[now-cli] Add e2e test for `vercel.json` and `.vercelignore` (#4292)

This PR adds a test for a deployment as well as `now dev` to ensure both `vercel.json` and `.vercelignore` are applied.

I also fixed the remaining test helpers to work with `vercel.json`."
ad19021969a1702f4191e74f382fa5de874f72ed,Ana Trajkovska,2020-05-07 16:54:37+00:00,Ana Trajkovska,2020-05-07 16:54:37+00:00,"Publish Canary

 - vercel@18.0.1-canary.22"
95e41874e4eaa32c07b6acc73269fb75d0d64bd9,Ana Trajkovska,2020-05-07 16:49:15+00:00,GitHub,2020-05-07 16:49:15+00:00,Replace `now` with `vercel` in pagination message (#4290)
4d20a1d77bb561dc6e2c2fd17c900fe0424f6b6c,Ana Trajkovska,2020-05-07 12:56:28+00:00,Ana Trajkovska,2020-05-07 12:56:28+00:00,"Publish Canary

 - vercel@18.0.1-canary.21"
325ee261cb6c2dfcfefca51e3433509cb95a35be,Ana Trajkovska,2020-05-07 12:53:08+00:00,GitHub,2020-05-07 12:53:08+00:00,Implement pagination for `now dns ls` (#4257)
2e0cee490d06c582896f2467ddfb422cfe99327d,Nathan Rajlich,2020-05-07 05:16:10+00:00,Nathan Rajlich,2020-05-07 05:16:10+00:00,"Publish Canary

 - @vercel/build-utils@2.2.2-canary.8
 - vercel@18.0.1-canary.20
 - @vercel/client@7.1.1-canary.5
 - @vercel/go@1.0.8-canary.2
 - @vercel/next@2.5.5-canary.7
 - @vercel/node@1.5.2-canary.9
 - @vercel/python@1.1.7-canary.3
 - @vercel/ruby@1.1.1-canary.2
 - @vercel/static-build@0.16.1-canary.6"
8a9b67a3f3e6984f26ab5f6f738a3a02049cc2b3,Nathan Rajlich,2020-05-07 05:09:06+00:00,GitHub,2020-05-07 05:09:06+00:00,"[now-build-utils] Use `@now` runtimes for zero-config (#4284)

* [now-build-utils] Use `@now` runtimes for zero-config

This is a temporary change until the `@vercel` runtimes work in
production.

* Temporary fix to E2E"
f1d9a5da96bc1319654832265b97120251f1e3ea,Nathan Rajlich,2020-05-07 03:33:35+00:00,GitHub,2020-05-07 03:33:35+00:00,"[now-build-utils][now-cli] Fix `isOfficialRuntime()` edge case bug (#4282)

Fixes a bug where `isOfficialRuntime('static', '@now/static-build')` was returning `true` when it should have been `false`.

And use the function from `@vercel/build-utils` in Vercel CLI."
8d9c463e1f3a8841254114a6f1f73a90a2d4661f,Nathan Rajlich,2020-05-07 01:15:20+00:00,GitHub,2020-05-07 01:15:20+00:00,"[now-cli] Update references to Now CLI as Vercel CLI (#4279)

Update references to Now CLI as Vercel CLI 

Co-authored-by: Steven <steven@ceriously.com>"
e07e8f841abece768722722fa39a3ad4495acbd1,Steven,2020-05-07 01:09:21+00:00,GitHub,2020-05-07 01:09:21+00:00,"[now-cli] Add special case for `.vercel.app` (#4281)

There are a few places the CLI needs to know about the special suffix `.now.sh` so we also need to include the upcoming `.vercel.app` suffix."
0b8a2c0dabf9b16a7c5eafd73bab4dc978067386,Steven,2020-05-06 23:44:24+00:00,GitHub,2020-05-06 23:44:24+00:00,"[now-cli] Update README.md image (#4278)

This PR updates the name, logo, and tagline.

This will look correct in both light mode and dark mode and the text is no longer part of the image."
9c2b7132fa689c2b121c84435931baa839e0172f,Shu Ding,2020-05-06 23:40:29+00:00,GitHub,2020-05-06 23:40:29+00:00,add cors headers (#4280)
d4639a51083b8c62ee47c7e7fa3001b4faf0c4eb,Steven,2020-05-06 23:12:06+00:00,GitHub,2020-05-06 23:12:06+00:00,"[now-cli] Rename bin to support `vercel` and `vc` (#4277)

We want to make sure the bin matches the [installed package name](https://docs.npmjs.com/files/package.json#bin).

This means `npm i -g now` will remain `now` and `npm i -g vercel` will use `vercel` as the binary name.

This allows support for different versions on one machine such as `npm i -g now@17 vercel@19` for example.

In addition, we will also install a shorthand `vc` so you can do `vc env pull` for example."
ba25004ea8e69c9adf17b696376a1df9fe97166b,Steven,2020-05-06 22:13:12+00:00,GitHub,2020-05-06 22:13:12+00:00,"[all] Check for `VERCEL_` environment variables with `getPlatformEnv()` (#4274)

Added the following env vars, most are undocumented but its good to be consistent:

- `VERCEL_REGION`
- `VERCEL_DEBUG`
- `VERCEL_BUILDER_DEBUG`
- `VERCEL_TOKEN`
- `__VERCEL_SKIP_DEV_CMD`

I also updated the error code prefixes to remove `NOW_`.
There `code` isn't used anywhere, this is just to make it unique and a little shorter."
639a9b03d28b9ae16874031a1a040bb7bcd3af96,Steven,2020-05-06 19:23:39+00:00,GitHub,2020-05-06 19:23:39+00:00,"[now-cli][now-go][now-python] Use `<project>/.vercel/cache' dir during dev (#4273)

We renamed `.now` to `.vercel` in #4234 but still fallback to `.now` if it exists. This is because we don't want users to have to re-link all their existing projects. So we need to make sure that the Runtimes know which directory to use for caching. This PR introduces the `devCacheDir` for this purpose."
28ffdfbeef26b2df74727cb1d34193975de89682,Nathan Rajlich,2020-05-06 18:22:09+00:00,GitHub,2020-05-06 18:22:09+00:00,"Add logging to debug failed npm publish for legacy package names in CI (#4266)

As you can see in https://github.com/zeit/now/runs/647945621,
the final step for publishing the legacy `@now` packages failed
with a 401 error from npm.

This additional logging an to attempt to debug why that is happening."
5e222d3c037cb98c5298ffb4e5d62063ada2dc4f,Steven,2020-05-06 02:14:55+00:00,GitHub,2020-05-06 02:14:55+00:00,"[tests] Fix cancel workflow pattern (#4264)

Sometimes, the ""Cancel"" workflow wouldn't run because it didn't match the branch name.
This PR will fix the glob to match any branch name.

- `*`: Matches zero or more characters, but does not match the `/` character.
- `**`: Matches zero or more of any character.

https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet"
94c84647287132edf74a8d092b275ae6a0f4d6c4,Steven,2020-05-06 01:14:35+00:00,GitHub,2020-05-06 01:14:35+00:00,"[now-node][now-static-build] Add test for timezone utc (#4265)

This PR adds a couple tests to ensure that the timezone offset is `0` meaning [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)."
898478d1e1712a761c6e87878ef6831c2a793767,Nathan Rajlich,2020-05-06 00:11:39+00:00,Nathan Rajlich,2020-05-06 00:11:39+00:00,"Publish Canary

 - @vercel/frameworks@0.0.14-canary.0
 - @vercel/build-utils@2.2.2-canary.7
 - @vercel/cgi@1.0.5-canary.1
 - vercel@18.0.1-canary.19
 - @vercel/client@7.1.1-canary.4
 - @vercel/go@1.0.8-canary.1
 - @vercel/next@2.5.5-canary.6
 - @vercel/node-bridge@1.2.7-canary.3
 - @vercel/node@1.5.2-canary.8
 - @vercel/python@1.1.7-canary.2
 - @vercel/routing-utils@1.8.2-canary.5
 - @vercel/ruby@1.1.1-canary.1
 - @vercel/static-build@0.16.1-canary.5"
8a68211cad8d2afae02ac1b85184e07d8911d47b,Nathan Rajlich,2020-05-05 23:43:57+00:00,GitHub,2020-05-05 23:43:57+00:00,"[all] Rename packages to `vercel` and add logic to publish legacy package names to npm (#4233)

https://vercel.com/blog/zeit-is-now-vercel

* Updates all org packages from `@now` to `@vercel`
* Updates Now CLI package name from `now` to `vercel`
  * Packages contains `""bin""` entries for _both_ `vercel` and `now` in the package.json
* Updates `now-client` package name to `@vercel/client` (org scoped, for authenticity)

There is also a new `publish-legacy.sh` script which ensures that all the legacy package names (i.e. `now`, `now-client`, `@now/node`, etc.) will still be published as well.

We will remove this legacy publishing logic on Jan 1, 2021."
2765207c93a325f37fab2e445338bd5241d9a793,Steven,2020-05-05 19:06:47+00:00,Steven,2020-05-05 19:06:47+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.6
 - now@18.0.1-canary.18
 - now-client@7.1.1-canary.3
 - @now/routing-utils@1.8.2-canary.4
 - @now/static-build@0.16.1-canary.4"
6b52cfdbc7bf06fd7628a708cf686218ae16be2a,Steven,2020-05-05 18:58:05+00:00,GitHub,2020-05-05 18:58:05+00:00,"[now-cli][now-client] Add support for vercel config files (#4234)

This PR renames the CLI and config files to `vercel`.

https://vercel.com/blog/zeit-is-now-vercel

### Complete
- [x] Help menus and error messages should print cli name from `package.json`
- [x] `now.json` => `vercel.json`
- [x] `.nowignore` => `.vercelignore`
- [x] `~/.now` => `~/.vercel`
- [x] `<project>/.now/project.json` => `<project>/.vercel/project.json`

### TODO
I'm going to do the remaining work in a follow-up PR:
- [ ] `<project>/.now/cache` => `<project>/.vercel/cache` (Runtimes sometimes use this)
- [ ] `NOW_*` special cased environment variables
- [ ] `*.now.sh` special cased url suffix"
f474fa1b8cc8506fd64bdd56dfc2585139640d95,Ana Trajkovska,2020-05-04 23:48:14+00:00,Ana Trajkovska,2020-05-04 23:48:14+00:00,"Publish Canary

 - now@18.0.1-canary.17"
2cdee1980499a7b3f86bb10e8f1094328bfdac34,Ana Trajkovska,2020-05-04 23:47:05+00:00,GitHub,2020-05-04 23:47:05+00:00,"[now-cli] Implement pagination for `now env ls` (#4200)

This PR implements pagination for listing environment variables for a project."
e9066a3eadfad29bc02251813dfbe132095b44f7,Steven,2020-05-04 18:37:51+00:00,Steven,2020-05-04 18:37:51+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.5
 - now@18.0.1-canary.16
 - @now/node@1.5.2-canary.7"
1461fbe331927f0fbdb88a0a7084ade4a9e8841b,Luc,2020-05-02 09:35:49+00:00,GitHub,2020-05-02 09:35:49+00:00,"[tests] add ""no only"" and ""no skip"" eslint rules (#4229)

* add ""no only"" and ""no skip"" eslint rules

* ignore irrelevant eslint error

Co-authored-by: Steven <steven@ceriously.com>"
099bc6dbf6b3e5cb0cc02acc44786cf87bdc4c60,Nathan Rajlich,2020-05-02 00:52:21+00:00,GitHub,2020-05-02 00:52:21+00:00,"Temporarily revert @TooTallNate's `now dev` updates (#4231)

Needs more time for testing, and we are preparing a new stable release.

This will be un-reverted after the stable release is tagged."
fe0d762acae326fca244acba1a34b576b79c781c,Steven,2020-05-01 22:59:53+00:00,GitHub,2020-05-01 22:59:53+00:00,"Revert ""[now-routing-utils] Fix redirect `//` when `cleanUrls` and `trailingSlash` enabled"" (#4232)

Reverts zeit/now#4227

This somehow got merged even though the tests didn't pass. Reverting until it can be merged cleanly."
07c9c0bb6e6ef08a0cfa538ae2bd0f1c9b6e47b5,Steven,2020-05-01 20:44:39+00:00,GitHub,2020-05-01 20:44:39+00:00,"[now-routing-utils] Fix redirect `//` when `cleanUrls` and `trailingSlash` enabled (#4227)

This PR fixed a corner case when the user defined both `cleanUrls: true` and `trailingSlash: true` and then visited `/index.html` which would attempt to redirect to the invalid `//` path."
243018b73666ebc006087896cf9c0a9cbdc4a1d3,Steven,2020-05-01 18:29:36+00:00,GitHub,2020-05-01 18:29:36+00:00,"[now-cli] Fix CORS headers in `now dev` (#4225)

This PR fixes a bug where the headers were not applied when exiting with a status code such as 204.

This is a common pattern for CORS where you want `OPTIONS` method respond with 204 status due to a preflight request.

I also updated the test suite to support the `method` property and ensured a body with empty string is asserted."
99436b986ac142b9a9703127b50d747f8f5271ca,JJ Kasper,2020-05-01 18:23:17+00:00,JJ Kasper,2020-05-01 18:23:17+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.4
 - now@18.0.1-canary.15
 - now-client@7.1.1-canary.2
 - @now/next@2.5.5-canary.5
 - @now/node@1.5.2-canary.6
 - @now/static-build@0.16.1-canary.3"
dfdef0f6fd1f336f3efd5914fa7b2d565d098ac0,JJ Kasper,2020-05-01 18:08:09+00:00,GitHub,2020-05-01 18:08:09+00:00,"[now-next] Update to pass dynamic page values in the query (#4196)

As discussed this updates to leverage the new named regexes and route keys output in the `routes-manifest.json` to pass the dyname page values in the query to ensure we're handling edge cases with the new custom routes support

Note: the `yarnPreferOffline` change is unrelated and was added to make debugging easier as the build can fail when using this option and the cache is invalid for some packages. 

x-ref: https://github.com/zeit/next.js/pull/12250"
921327d87887258861ebe3c6ab582c2013adf127,Steven,2020-05-01 13:42:40+00:00,GitHub,2020-05-01 13:42:40+00:00,"[api] Update build script (#4224)

In PR #3514, we added a `/api` directory for functions and a `/public` directory which was created at build time.

This moves the build script to be `now-build` so we don't don't need to build everything in the repo and also no longer need to special case the git env vars."
c48fd3e891e82d73b2016d6f834c6071cb75e865,Arunoda Susiripala,2020-05-01 06:48:51+00:00,GitHub,2020-05-01 06:48:51+00:00,Update README.md
5142e32bed7fed4d7883a2d295ca938720f658e2,Nathan Rajlich,2020-05-01 00:25:01+00:00,GitHub,2020-05-01 00:25:01+00:00,"[now-cli] Update `now dev` HTML templates to use ""Vercel"" (#4216)"
d360169b060c7bae00c4d11b0fdbd8e02dff93ea,Steven,2020-04-30 23:51:02+00:00,GitHub,2020-04-30 23:51:02+00:00,"[now dev] Fix `handle: miss` override headers (#4217)

Fixes a bug with `now dev` where headers from the `miss` phase were overriding when they shouldn't be.

```json
{
  ""version"": 2,
  ""routes"": [
    {
      ""handle"": ""filesystem""
    },
    {
      ""src"": ""/([^/]+)"",
      ""headers"": { ""override"": ""one"" },
      ""dest"": ""/blog/$1"",
      ""check"": true
    },
    {
      ""handle"": ""miss""
    },
    {
      ""src"": ""/(.*)"",
      ""dest"": ""/src/$1"",
      ""check"": true
    },
    {
      ""src"": ""/src/blog/([^/]+)"",
      ""headers"": { ""test"": ""1"", ""override"": ""two"" },
      ""dest"": ""/src/blog/$1.html"",
      ""check"": true
    }
  ]
}
```"
7b1893b9f78485e002e88057524dcf97784834fb,Nathan Rajlich,2020-04-30 22:12:46+00:00,GitHub,2020-04-30 22:12:46+00:00,"[now-node] Use project env vars in `startDevServer()` and respect `NODEJS_HELPERS` env var (#4211)

Depends on #4210."
fb07360b71772851a90faf94bcb309caf545e24e,Steven,2020-04-30 21:36:32+00:00,GitHub,2020-04-30 21:36:32+00:00,"[tests] Run `now dev` tests agains real deployments (#4183)

This PR makes sure that all the `now dev` tests have a corresponding deployment and each assert is also compared to the deployment.

If you want to opt-out of this behavior, for example a test that is meant for specific dev functionality, then there is an option `skipDeploy: true`.

This also fixes a bug where headers were not assigned during proxying to a dev server."
3a00aed989ac9b4201c338f4e5d2bf3559fa445a,Nathan Rajlich,2020-04-30 21:32:29+00:00,GitHub,2020-04-30 21:32:29+00:00,"[now-cli] Pass in env vars to `startDevServer()` in `now dev` (#4210)

The Runtime is expected to set up these env vars in the dev server
child processes that it spawns."
64944f892687edb2cba4674b9b2aa492287164cc,JJ Kasper,2020-04-30 21:13:53+00:00,GitHub,2020-04-30 21:13:53+00:00,"[now-cli] (Major) Upload `.env` files but ignore `.local` files (#4205)

As discussed this updates to no longer ignore all `.env` files by default and only ignores local env files which matches what we default the `.gitignore` to in our default `create-next-app` [template](https://github.com/zeit/next.js/blob/20b62de8d75dd89d970457162fba20887d99e1a4/packages/create-next-app/templates/default/gitignore#L26-L30)

A separate docs PR has been made here https://github.com/zeit/docs/pull/1808 which can be landed after this PR"
5e4eee4db1be63bb52def2e0e7ce9d15b0b4d56a,Nathan Rajlich,2020-04-30 20:34:30+00:00,GitHub,2020-04-30 20:34:30+00:00,"[now-cli] Only update build matches once per HTTP request (#4212)

Minor optimization since the ""serve"" function sometimes gets invoked
recursively."
a1a5e0ef0d3fb6be8599ae379f69fa265250dc0c,Nathan Rajlich,2020-04-30 17:49:29+00:00,GitHub,2020-04-30 17:49:29+00:00,"[now-node] Make ""without helpers"" config option work as expected in `startDevServer()` (#4208)"
91b9b7f88015281eae0e6a2c2a03f3093cd488f5,Steven,2020-04-30 13:20:16+00:00,Steven,2020-04-30 13:20:16+00:00,"Publish Canary

 - now@18.0.1-canary.14
 - @now/node@1.5.2-canary.5"
8e29924165e1ab4ba53ff45c4d1c388e74b4fe4a,Nathan Rajlich,2020-04-30 13:19:30+00:00,GitHub,2020-04-30 13:19:30+00:00,"[now-node] Add TypeScript support to `startDevServer()` (#4185)

Using `ts-node`, with asynchronous type checking via `tsc --no-emit`.

This also removes `ncc` of `typescript` during the build in favor of
having typescript be a regular npm ""dependency""."
9083b558f0c90a6d440b9df10c44c5b0c5a099f1,Luis Alvarez D,2020-04-29 18:19:16+00:00,GitHub,2020-04-29 18:19:16+00:00,"Switch to Vercel in the command help for now domains (#4193)

Noticed that we still say `Zeit` while using the now cli.

The inspect command still points to zeit.co when I tested it some hours ago but that seems to be fixed already :smile:"
0bf8c3751b73f7c8b2294203376e829eab234c54,Ana Trajkovska,2020-04-29 10:52:06+00:00,Ana Trajkovska,2020-04-29 10:52:06+00:00,"Publish Canary

 - @now/cgi@1.0.5-canary.0
 - now@18.0.1-canary.13
 - now-client@7.1.1-canary.1
 - @now/next@2.5.5-canary.4
 - @now/node-bridge@1.2.7-canary.2
 - @now/node@1.5.2-canary.4
 - @now/python@1.1.7-canary.1"
3ef832fdbee9a2e72e358e4b0b3e46cd4399ef07,Ana Trajkovska,2020-04-29 10:50:05+00:00,GitHub,2020-04-29 10:50:05+00:00,"[now-cli] Implement pagination for `now projects ls` (#4186)

* Implement pagination for `now projects ls`

* Fix spacing"
4bc6ebe286bf35b3fd4a125277d20bfc4203a3d8,Nathan Rajlich,2020-04-28 22:42:25+00:00,GitHub,2020-04-28 22:42:25+00:00,[now-cli] Assert 200 status code in dev server unit tests (#4184)
566047473974bb86074cd7c096725d4dbade85f5,Steven,2020-04-28 19:52:38+00:00,GitHub,2020-04-28 19:52:38+00:00,"[tests] Remove `test.only()` so all tests will execute (#4180)

Fix a regression from #4160, specifically bab5794641acbf2ae3f419faf0b1d3565fbf1de3 that was preventing the CLI tests from running."
e85a62703cf121480e49f0fa7eaa4e4f940273b2,Nathan Rajlich,2020-04-28 19:09:49+00:00,GitHub,2020-04-28 19:09:49+00:00,"[now-cli] Use `yarn` for `now dev` integration tests (#4175)

This was switched to `npm` for debugging purposes in #4124, but at this
point we can switch it back to `yarn` so the tests don't take as long.

Co-authored-by: Leo Lamprecht <leo@zeit.co>"
3a3cfd4d7b2b0384933b514a33a686cba4e26c9f,Steven,2020-04-28 15:37:10+00:00,GitHub,2020-04-28 15:37:10+00:00,"[tests] Fix remaining lint errors (#4179)

As a follow up to #4178, this fixes the final lint errors so we can run in CI.

Since lint is very quick, about 8 seconds, we can run it on the entire repo instead of only changed files.

I also disabled a couple rules that were leading to 500 warnings we would likely never change."
9570d64b679988a78f9a1fb8fd88a60d1cac4549,Nimish Gupta,2020-04-28 13:11:46+00:00,GitHub,2020-04-28 13:11:46+00:00,fix: removed linting errors on yarn lint (#4178)
e77ea00e9d0d975c474d242c36a62bd8fe180c72,Nathan Rajlich,2020-04-28 01:22:41+00:00,Nathan Rajlich,2020-04-28 01:22:41+00:00,"Publish Canary

 - now@18.0.1-canary.12"
aebe77d2229a3ebeb204b260cbc63c1035084875,Nathan Rajlich,2020-04-28 01:21:05+00:00,GitHub,2020-04-28 01:21:05+00:00,"[now-cli] Make `nowCliPkg` parameter non-optional (#4173)

To prevent bugs like https://github.com/zeit/now/pull/4163."
53cb2cc4c5ea58d32038ba064e49c496baca03d4,Nathan Rajlich,2020-04-28 01:20:33+00:00,GitHub,2020-04-28 01:20:33+00:00,"[now-cli] Don't print ""Error starting dev server"" message by default (#4172)

It's not useful information and distracts from whatever the actual error
message was from the dev server, which is what the user is actually
interested in."
4d75ed511773bae3e5b021600ee2caf67ae626ce,Arunoda Susiripala,2020-04-28 00:18:51+00:00,GitHub,2020-04-28 00:18:51+00:00,"[now-cli] Allow to accept equal sign(=) as a value for meta (#4160)

Currently if the value is `=` it will throw an error from the API."
e6c84dd70b4e8ca83052082522494f35fa0a1d0c,Nathan Rajlich,2020-04-27 23:21:50+00:00,GitHub,2020-04-27 23:21:50+00:00,[now-cli] Add 1 minute timeout to `now login` integration tests (#4166)
d51f0d0f064b1f7ae9e55c10aeb5697398be7faf,Nathan Rajlich,2020-04-27 22:01:23+00:00,GitHub,2020-04-27 22:01:23+00:00,"[now-cli] Remove ""Stopping `now dev` server"" message (#4165)"
4cd35c48a2d9120e273bab7d19cac08065910c36,JJ Kasper,2020-04-27 21:48:43+00:00,JJ Kasper,2020-04-27 21:48:43+00:00,"Publish Canary

 - now@18.0.1-canary.11
 - @now/next@2.5.5-canary.3"
69ac4f3eb8c3df447089aa2f9340463ce6d6ffd7,JJ Kasper,2020-04-27 20:40:32+00:00,GitHub,2020-04-27 20:40:32+00:00,"[now-next] Update error throwing to use NowBuildError (#4167)

Per https://github.com/zeit/now/pull/4161#discussion_r416042826 this updates to use `NowBuildError` for our errors instead of the standard `Error` instance"
2c9cbe20f330bbc1fe16d0b73a306ebe332e3791,Nathan Rajlich,2020-04-27 19:21:29+00:00,GitHub,2020-04-27 19:21:29+00:00,[now-cli] Fix logic to not install bundled runtimes into cache dir for `now dev` (#4163)
4ddd2f016cfe8a0e2dec409055db35c9dcc98352,Ana Trajkovska,2020-04-27 18:56:36+00:00,Ana Trajkovska,2020-04-27 18:56:36+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.3
 - now@18.0.1-canary.10
 - @now/next@2.5.5-canary.2
 - @now/routing-utils@1.8.2-canary.3"
76f61cbbf00dbb4b26d2c8d96649dc350a94f6eb,JJ Kasper,2020-04-27 18:05:03+00:00,GitHub,2020-04-27 18:05:03+00:00,"[now-next] Provide a better error when failing to load routes-manifest (#4161)

This updates the error message shown when we fail to load the `routes-manifest` which appears to be happening most often when an incorrect output directory is configured for a Next.js application"
23fe8affec52c9382edf96fb66a2387755991cdc,YuLe,2020-04-27 17:32:33+00:00,GitHub,2020-04-27 17:32:33+00:00,"[now-cli] Use imported `pkg` instead of `require(""../package.json"")` (#4159)"
5334caad5435e26bc8dc82fcf5e47cd42196f534,Steven,2020-04-27 15:38:22+00:00,GitHub,2020-04-27 15:38:22+00:00,"[api] Use 405 method not allowed (#4148)

I was doing a diff and noticed this returns the wrong status code.

This PR changes the unknown method response to [405 Method Not Allowed](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405) status code."
103e4117c3c4f2b341a444a5b11da87d58507981,Steven,2020-04-27 15:37:15+00:00,GitHub,2020-04-27 15:37:15+00:00,"[now-routing-utils] Add support for `permanent` in `redirects` (#4150)

This adds `permanent` for `redirects` defined in Next.js RFC https://github.com/zeit/next.js/issues/9081

```json
{
  ""redirects"": [
    { ""source"": ""/foo"", ""destination"": ""/api/foo"", ""permanent"": true }
  ]
}
```"
3e774d0531609f923d026c20b6b87bd6c12c9358,Ana Trajkovska,2020-04-27 13:26:53+00:00,GitHub,2020-04-27 13:26:53+00:00,"Implement pagination for `now dns ls <domain>` (#4134)

Co-authored-by: Nathan Rajlich <n@n8.io>"
5e2139f4087f416a1cdab239fc995dcfa45516e2,Nathan Rajlich,2020-04-25 00:33:32+00:00,Nathan Rajlich,2020-04-25 00:33:32+00:00,"Publish Canary

 - now@18.0.1-canary.9"
55e4bffcd27defc3630c2b042e3369247b5d82e1,Nathan Rajlich,2020-04-25 00:19:58+00:00,GitHub,2020-04-25 00:19:58+00:00,"[now-cli] Add the core Runtimes as npm `dependencies` for now dev (#4117)

Rather than creating a `builders.tar.gz` file with the core Runtimes and
bundling that tarball with Now CLI, simply have them be regular npm
dependencies so that they are installed into Now CLI's `node_modules`
directory.

When one of the core runtimes is specified for a build, the runtime will be
required as a regular module dependency of Now CLI, and the builders cache
will never touched.

Bundled runtimes are also no longer updated, making the runtime versions
pinned to the version of Now CLI.

Logic for the builders cache directory still remains, but will now only be
used when using a Community Runtime (or development tarball URL)."
de3a06693453e59190482c86c7ab5389216a45a4,Nathan Rajlich,2020-04-24 20:05:25+00:00,GitHub,2020-04-24 20:05:25+00:00,"[now-cli] Use `npx` to invoke `ncc` in build script (#4146)

The previous file path for ncc isn't always reliable during development,
depending on which directory `yarn` is invoked in inside the monorepo.

Using `npx` ensures the version specified in the now-cli `package.json`
is used even if it's installed at the root of the monorepo."
257b0ca5b6ffa45326bd3f93e7acba89040dac7e,Steven,2020-04-24 18:09:01+00:00,Steven,2020-04-24 18:09:01+00:00,"Publish Canary

 - now@18.0.1-canary.8"
e826d48814ee3e697926a3599e43e6f7f8bfb3ca,Nathan Rajlich,2020-04-24 16:06:00+00:00,GitHub,2020-04-24 16:06:00+00:00,"[now-cli] Remove `yarn` as a dev dependency (#4141)

Remove yarn dependency since it is no longer used.

Co-authored-by: Steven <steven@ceriously.com>"
d4ecfb04bb51e1002ff82b2b5abfc125d3e3a932,Nathan Rajlich,2020-04-24 13:25:21+00:00,GitHub,2020-04-24 13:25:21+00:00,"[now-cli] Update `chokidar` to v3.3.1 (#4142)

For Node 14 support:

> npm WARN deprecated chokidar@2.1.8: Chokidar 2 will break on node v14+.
> Upgrade to chokidar 3 with 15x less dependencies."
cad10e191841a7f1a6d7d8b65dd907bf1b571a0a,Steven,2020-04-24 13:06:01+00:00,GitHub,2020-04-24 13:06:01+00:00,"[now-cli] (Major) Change project settings inheritance (#4135)

When Now CLI 17 introduce the `.now` directory with project settings, it started assuming that the current project scope should be used for all commands. This made `now switch` do nothing unless you changed the current directory.

This PR is a _major_ semver change so that the only commands that inherit the project settings are:

- `now deploy`
- `now dev`
- `now env`

For example, `now ls` will not observe project settings and instead observe `now switch`."
1e221c48f9d3ffb012b8b38a17a749c6d46f4a23,Nathan Rajlich,2020-04-23 21:49:20+00:00,GitHub,2020-04-23 21:49:20+00:00,"[now-cli] Ensure the `builders.tar.gz` file is finished extracting (#4124)

`now dev` integration tests have been failing as of recently with failures to require Runtime builders from the builder cache. Upon investigation, it turns out that the `builders.tar.gz` file was not being completely extracted since the integration tests complete quickly and then kill the Now CLI process, which has not yet completed the extraction.

Fix is to ensure the tarball extraction promise is fully resolved before cleanly shutting down.

Also now applying the clean shutdown logic upon `SIGTERM` signal, which is what the integration tests send to shut down the Now CLI process."
15221bf19c8ff86350f9f8d6155897a6dbccb138,Nathan Rajlich,2020-04-23 19:58:25+00:00,GitHub,2020-04-23 19:58:25+00:00,"[now-cli] Add the `x-vercel-id` and `x-vercel-cache` response headers to `now dev` (#4137)

Matches current production."
2513fecaf47cb7ec7842caf562d078038fa8e803,Paco,2020-04-23 19:42:08+00:00,GitHub,2020-04-23 19:42:08+00:00,"[examples] Update vercel.svg in Next.js example (#4128)

* Update vercel.svg in Next.js example

* Update to thinner variant"
d723d985e34055399a4a97b5a1fc1c59b9ea59c6,Nathan Rajlich,2020-04-23 19:41:47+00:00,GitHub,2020-04-23 19:41:47+00:00,"[now-cli] Prevent infinite loop for Runtime ""module not found"" in `now dev` (#4126)"
2d0a71946bb6ef9d58808743504f9aa28b9246a7,Steven,2020-04-22 21:55:24+00:00,Steven,2020-04-22 21:55:24+00:00,"Publish Canary

 - now@18.0.1-canary.7
 - @now/static-build@0.16.1-canary.2"
4b7af4d7d363dd83b9dc778d708222f0f11b968a,Steven,2020-04-22 21:48:47+00:00,GitHub,2020-04-22 21:48:47+00:00,"[now-cli] Fix flicker from file upload progress bar (#4125)

This PR fixes a bug where deploying a new project would flicker between two states: the upload progress bar and ""Setting up Project"" spinner."
8e3f4a1ca2ccd823647326d5c43328e0d2a380b3,Steven,2020-04-22 20:25:44+00:00,GitHub,2020-04-22 20:25:44+00:00,"[now-static-build] Add tests for gem install of native deps (#4123)

These tests ensure we can install native dependencies with `gem install` such as:
- `rmagic`
- `ruby-vips`

Co-authored-by: Nathan Rajlich <n@n8.io>"
2a9e5798a822d5378e084e72ea9a5a02eb71eaaf,Nathan Rajlich,2020-04-22 18:17:47+00:00,Nathan Rajlich,2020-04-22 18:17:47+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.2
 - now@18.0.1-canary.6
 - now-client@7.1.1-canary.0
 - @now/go@1.0.8-canary.0
 - @now/next@2.5.5-canary.1
 - @now/node@1.5.2-canary.3
 - @now/python@1.1.7-canary.0
 - @now/routing-utils@1.8.2-canary.2
 - @now/ruby@1.1.1-canary.0
 - @now/static-build@0.16.1-canary.1"
5b369b385d02bdd8bb5bb46fbdf8ed6b2bb7279f,Nguyn Hng Qun,2020-04-22 14:07:42+00:00,GitHub,2020-04-22 14:07:42+00:00,"[now-python] Fix: Relative imported module not seen in sys.modules (#4097)

After #4024 was merged, I tested and still got the same error. I searched around and found that the lines of code are in wrong order (ref: https://bugs.python.org/issue37521). So this is the proper fix.

Co-authored-by: Steven <steven@ceriously.com>"
28e01528c5ad044de31572985800f5bb43d9f642,Steven,2020-04-21 23:11:12+00:00,GitHub,2020-04-21 23:11:12+00:00,"[all] Rename ZEIT Now to Vercel (#4112)

https://vercel.com/blog/zeit-is-now-vercel

Co-authored-by: Nathan Rajlich <n@n8.io>"
987ce6c26b1c1a214031525045b00e49f46488d9,Nathan Rajlich,2020-04-21 21:31:56+00:00,GitHub,2020-04-21 21:31:56+00:00,"[now-node] Fix dev server `exit` event handling (#4113)

Child process `exit` events have two arguments (`code` and `signal`)
so the `once.spread()` function needs to be used."
21e4d644cf2f6aacb770493d553082f1ebb9c76a,Leo Lamprecht,2020-04-21 21:12:15+00:00,GitHub,2020-04-21 21:12:15+00:00,[now-cli] Use `vercel.com` URL for inspecting deployments (#4111)
282127e3f9983e542da21fb75d3db78459e31dca,Nathan Rajlich,2020-04-21 19:20:32+00:00,GitHub,2020-04-21 19:20:32+00:00,"[now-cli] Use npm instead of yarn for `now dev` Runtimes installation (#4107)

Stop downloading and caching `yarn` from GitHub Releases in `now dev`,
and instead simply rely on the user having `npm` installed. The user is
extremely likely to have `npm`, since Now CLI now requires `node` to be
installed (no longer using `pkg`) which comes with `npm` bundled by
default."
7748f50ca9d144e39fab8215a71bf7d0640d6b39,Nathan Rajlich,2020-04-21 15:25:50+00:00,GitHub,2020-04-21 15:25:50+00:00,"[now-cli] Clean up builder dev server shutdown logic (#4109)

DRY and removes the `pid` from the set immediately so there's no race
condition if the server is shut down shortly after an HTTP request
(like in the tests)."
224757581da9e7741939b642e2abac6a6916abcc,Steven,2020-04-20 21:00:58+00:00,Steven,2020-04-20 21:00:58+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.1"
40e99284c2eec45d2b19ff7ebf09fc9ab956e1ba,Steven,2020-04-20 20:54:09+00:00,GitHub,2020-04-20 20:54:09+00:00,"[now-build-utils] Prefer yarn over npm install when both detected (#4106)

Previously, when `package-lock.json` was detected, we would always use `npm install`.

This PR changes the behavior to the following:
- If only `package-lock.json` is detected, we use `npm install`.
- If both `package-lock.json` and `yarn.lock` are detected, use `yarn install`.

This will avoid npm bugs such as `npm ERR! Cannot read property 'match' of undefined`."
54bae977f0da7d12bf222d36782e0a3d64079740,Steven,2020-04-20 18:04:43+00:00,Steven,2020-04-20 18:04:43+00:00,"Publish Canary

 - @now/routing-utils@1.8.2-canary.1"
867590a6bae422593e875429f083dcacd842cdb0,Steven,2020-04-20 17:54:25+00:00,GitHub,2020-04-20 17:54:25+00:00,"[now-routing-utils] Fix validation for rewrite/redirect `destination` segments (#4105)

- Print an error instead of throwing when `destination` has segment not found in `source`
- Update docs to explain how to fix this error
- Add a couple tests
- Update uncaught `path-to-regexp` error message to print the full route that caused the error"
c89cf6fd57ea83fcfe1d0b28e9fe9e3b47da60d8,Ana Trajkovska,2020-04-20 12:54:32+00:00,Ana Trajkovska,2020-04-20 12:54:32+00:00,"Publish Canary

 - now@18.0.1-canary.5
 - @now/node@1.5.2-canary.2"
b7ad18425f6c2d3e541bae856ee060725d4f78bf,Ana Trajkovska,2020-04-20 12:52:18+00:00,GitHub,2020-04-20 12:52:18+00:00,"[now-cli] Implement pagination for listing secrets (#4084)

* Implement pagination for listing secrets

* Fix tests

* Improvements

* Fix removing a secret"
5554b2d0040e2f5c205cc2a410c678fd34661dcd,Nathan Rajlich,2020-04-18 01:21:55+00:00,Nathan Rajlich,2020-04-18 01:21:55+00:00,"Publish Canary

 - now@18.0.1-canary.4"
e4ce0d6802eb758f94c9edf6c8c84c8492c24ef6,Nathan Rajlich,2020-04-18 01:16:17+00:00,Nathan Rajlich,2020-04-18 01:16:17+00:00,"Publish Canary

 - @now/node@1.5.2-canary.1"
f477ee6e3b2353266ae3bdf219aaa574e5a9543b,Nathan Rajlich,2020-04-18 01:15:43+00:00,GitHub,2020-04-18 01:15:43+00:00,"[now-node] Throw an error if ""exit"" event happens in dev server (#4095)

If the process exits before the ""message"" event is sent, then the dev
server crashed upon bootup. Often times caused by a missing dependency."
59b4029a0ca225a6da15fb78dc39f785a6d55b2e,Nathan Rajlich,2020-04-18 00:51:14+00:00,GitHub,2020-04-18 00:51:14+00:00,[now-cli] Handle errors from `startDevServer()` in `now dev` (#4094)
8411b53fa3b7f941b40dc9c4322ec4aa22acad1b,Nathan Rajlich,2020-04-17 22:01:44+00:00,GitHub,2020-04-17 22:01:44+00:00,"[now-cli] Use `entrypoint` instead of `src` for `startDevServer()` (#4093)

Otherwise the `src` is modified to not have the file extension when used
with zero-config API routes."
7651bcf4a4aa9a7cda148f3b56648b9e2e58beed,Nathan Rajlich,2020-04-17 20:59:52+00:00,Nathan Rajlich,2020-04-17 20:59:52+00:00,"Publish Canary

 - @now/build-utils@2.2.2-canary.0
 - now@18.0.1-canary.3
 - @now/next@2.5.5-canary.0
 - @now/node@1.5.2-canary.0
 - @now/static-build@0.16.1-canary.0"
6fd1b509241a65c3a7d644d378091f5bb3d850de,Nathan Rajlich,2020-04-17 20:55:44+00:00,GitHub,2020-04-17 20:55:44+00:00,"[now dev] Add support for proxying to builder-specific dev servers (#4089)

This is an extension to the Runtime API, where a runtime can optionally define a `startDevServer()` function which is responsible for spawning a single-serve dev server for an individual HTTP request (the dev server is booted up upon receiving an HTTP request, and gets shut down by `now dev` after the HTTP request is completed). For runtimes that define this function, the `build()` function will never be executed, which avoids a lot of unnecessary processing for a dev environment.

Some things this accomplishes:

 * Retains the proper stack trace for errors.
 * Ensures that if a source code file is changed, and then an HTTP request is sent, it's guaranteed to be using the latest code (no file watching, or re-compilations).
 * Avoids creating a Lambda zip file (just to immediately unpack it for dev).
 * Avoids `@zeit/fun` completely, which loses some ""correctness"" (i.e. function is not frozen in between requests).
 * Backwards compatible with older Now CLIs - versions that don't know about `startDevServer()` will just invoke `build()`, and there's no version change required in the Runtime."
a03b8689e9d44a726bcae112953a0abd322c540f,Nathan Rajlich,2020-04-17 02:49:33+00:00,GitHub,2020-04-17 02:49:33+00:00,"[now dev] Remove ""Installing dependencies..."" message (#4090)

The `runNpmInstall()` function is already a no-op when invoked via `now dev` (#2926), however the ""Installing"" message was still being printed, leading to confusion about whether or not they actually are (they're not)."
22c8ed15c74c59e6bfd9383b7e7f09dc13ab972e,Andy,2020-04-16 09:04:56+00:00,GitHub,2020-04-16 09:04:56+00:00,"[now-cli] Fix unhandled unauthorized error and improve `getTeamById` (#4082)

* [now-cli] Fix unhandled unauthorized error

* Make getTeamById more efficient

* Add cache

* Update packages/now-cli/src/util/get-team-by-id.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Update packages/now-cli/src/util/get-team-by-id.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Update packages/now-cli/src/util/get-team-by-id.ts

Co-Authored-By: Steven <steven@ceriously.com>

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Steven <steven@ceriously.com>"
e1f7b859b66d9549eee2133ea7d105cf00e5e8aa,Ana Trajkovska,2020-04-15 22:03:51+00:00,Ana Trajkovska,2020-04-15 22:03:51+00:00,"Publish Canary

 - now@18.0.1-canary.2
 - @now/routing-utils@1.8.2-canary.0"
c75cc99f1e05f4e45d6180bdffadf71466a12201,Ana Trajkovska,2020-04-15 22:02:46+00:00,GitHub,2020-04-15 22:02:46+00:00,"[now-cli] Implement pagination for listing certs (#4075)

* Implement pagination for listing certs

* Remove --after option

* Fix tests"
30ddd2988916ef603fa6bcde4029969b64d43e92,Steven,2020-04-15 21:18:00+00:00,GitHub,2020-04-15 21:18:00+00:00,"[now-routing-utils] Fix error when hash contains question mark (#4080)

This PR fixes a [sentry error](https://sentry.io/organizations/zeithq/issues/1610773321/events/af1d6bee58c9413c81eb250ff0178917/) caused by route `destination` that contains a question mark in the hash."
21337de7cd7a6dafeb0a97f51d4509392d1c913c,JJ Kasper,2020-04-15 20:57:17+00:00,JJ Kasper,2020-04-15 20:57:17+00:00,"Publish Stable

 - @now/next@2.5.4"
a6686f9ff5f294bf17fc98724b33495137efea6b,JJ Kasper,2020-04-15 20:52:16+00:00,JJ Kasper,2020-04-15 20:52:16+00:00,"Publish Canary

 - now@18.0.1-canary.1
 - @now/next@2.5.4-canary.0"
65c621bd550c35c9850b7366ffc4de6eb29ba78a,JJ Kasper,2020-04-15 20:29:12+00:00,GitHub,2020-04-15 20:29:12+00:00,"[now-next] Fix static 404 not being used in mono-repo set-up (#4083)

This fixes the static 404 page not being used when deploying in a mono-repo structure. Before we weren't taking into account the `entryDirectory` where we needed to causing us to deploy `_error` when we didn't need to

x-ref: https://github.com/zeit/now/discussions/4077#discussioncomment-4625"
0827d3514d9d5328a6f4adb3cf28d979e0214ff0,Luc,2020-04-15 17:30:48+00:00,GitHub,2020-04-15 17:30:48+00:00,"[now-cli] Remove custom error when fetching frameworks fail (#4081)

Fix PRODUCT-2364.

Use `Client` instead of `node-fetch` to retrieve frameworks list."
7bc5d9fb5bc10f3d35d9e8eebb3aafe0e712c511,Steven,2020-04-15 16:30:24+00:00,Steven,2020-04-15 16:30:24+00:00,"Publish Canary

 - now@18.0.1-canary.0"
c53106ecee825deda015e4ba75bcc8bf7b940317,Steven,2020-04-15 15:22:30+00:00,GitHub,2020-04-15 15:22:30+00:00,"[now-cli] Fix for RangeError invalid count value (#4074)

This PR fixes a [sentry error](https://sentry.io/organizations/zeithq/issues/1611628097/events/75ed28bc6aef42868721a0912875fdbd/) where `repeat()` is passed a negative number and throws [`RangeError: invalid count value`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Resulting_string_too_large).

This PR ensures `repeat()` is always passed 0 or greater."
91e4d18ab83580a7a2da56c670b569055a9ddc23,Andy,2020-04-15 14:29:59+00:00,GitHub,2020-04-15 14:29:59+00:00,[now-cli] Proxy everything except Lambdas to the dev server (#4079)
33cd78b93ac51fbf3b4603ae965e52fe7cdc4c2c,Steven,2020-04-14 19:35:53+00:00,GitHub,2020-04-14 19:35:53+00:00,"[now-cli] Fix undefined teams and cache result (#4071)

- Fix [sentry error](https://sentry.io/organizations/zeithq/issues/1610513448/events/12bde04e921442a4aae8b7b10a759ecb/) where the `teams` might be undefined.
- Fix regression from #3740 which accidentally removed caching `teams`.
- Fix superflous `console.time()` calls for the same `GET /teams` API call. See below:

```sh
> [debug] [2020-04-14T18:31:00.220Z] GET https://api.zeit.co/www/user
> [debug] [2020-04-14T18:31:00.533Z] GET https://api.zeit.co/www/user : 313.078ms
> [debug] [2020-04-14T18:31:00.543Z] GET https://api.zeit.co/teams
> [debug] [2020-04-14T18:31:00.799Z] GET https://api.zeit.co/teams : 255.459ms
> [debug] #1 GET /teams: 260.198ms
```"
a765d27e5ac83845e7bded6b6d0a6b96b21a133e,Dvid Lvai,2020-04-14 19:06:18+00:00,GitHub,2020-04-14 19:06:18+00:00,"[examples] Fix typo in Gatsby example (#4063)

Co-authored-by: Steven <steven@ceriously.com>"
e65ff4bfd5186e93e9c1b6f3ac000dbf70a518ec,Steven,2020-04-14 16:31:49+00:00,GitHub,2020-04-14 16:31:49+00:00,"[examples] Fix ionic-react missing public directory (#4070)

The `public` directory was missing from the `ionic-react` example because we were ignoring all `public` directories.

This PR adds the public directory back (it is copied from now-static-build test fixtures). I also updated `.gitignore` and `.gitattributes` to be a little more friendly to our test fixtures so this doesn't happen again."
30a47873907010b87d3a98c5fb356205df72f3e4,Steven,2020-04-14 16:00:04+00:00,GitHub,2020-04-14 16:00:04+00:00,"[now-cli] Fix encoding domain names (#4068)

Fixes [sentry error](https://sentry.io/organizations/zeithq/issues/1611174358/events/c3455f32ce1743b58cc248d548538b21/) so that domain name is always encoded because this input comes from the user."
36f6f1db7786219f65fd0e7ae64b3aafa82e29e5,Naoyuki Kanezawa,2020-04-14 15:31:57+00:00,GitHub,2020-04-14 15:31:57+00:00,remove query and all options from log (#4066)
8043e25d6d507f254dc975bc531e57dc2720a809,Steven,2020-04-14 00:19:14+00:00,Steven,2020-04-14 00:19:14+00:00,"Publish Stable

 - @now/frameworks@0.0.13
 - @now/build-utils@2.2.1
 - now@18.0.0
 - now-client@7.1.0
 - @now/go@1.0.7
 - @now/next@2.5.3
 - @now/node@1.5.1
 - @now/python@1.1.6
 - @now/routing-utils@1.8.1
 - @now/static-build@0.16.0"
73b4e7aea4f108d0879f7b07bd6468dda9338c2c,Steven,2020-04-13 23:56:50+00:00,Steven,2020-04-13 23:56:50+00:00,"Publish Canary

 - now@17.1.2-canary.16"
de7e063c9bcfb7b895e99bcc07ab4450f00f67c2,Steven,2020-04-13 23:56:22+00:00,GitHub,2020-04-13 23:56:22+00:00,"[now-cli] Fix `now env` stdin detection and don't throw for known errors (#4060)

- Capitalize `Environment` in all outputs
- Fix stdin detection so there is no need for timeouts
- Dont throw if the error is bad user input, only throw for unexpected errors
- Fix tests so waiting for prompt will throw if expected output is never received"
e7c30deee84378cf8d94015fe3bc72ced82b6dc5,Steven,2020-04-13 19:50:06+00:00,GitHub,2020-04-13 19:50:06+00:00,"[now-cli] Change `now env pull` console output (#4059)

Change from `Created file .env` to `Create .env file` per @leo"
7464fac792cf7dedd3d9c810db832141e78d94dc,Steven,2020-04-13 18:26:03+00:00,Steven,2020-04-13 18:26:03+00:00,"Publish Canary

 - now@17.1.2-canary.15"
252363cce4769351fefd75a0361367c13e83fd2e,Steven,2020-04-13 18:22:21+00:00,GitHub,2020-04-13 18:22:21+00:00,"[now-cli] Prefer `.env` over `.env.build` during `now dev` (#4057)

The latest `now env` subcommand no longer makes the distinction between build time and runtime environment variables so this PR updates `now dev` to no longer make the distinction either.

The only exception is that some builders such as `@now/next` might still rely on the separation so we must preserve the distinction for legacy builders."
d7dceeb2a1de45cd663a41c8a7dea7f54d719812,Steven,2020-04-13 15:21:20+00:00,GitHub,2020-04-13 15:21:20+00:00,"[now-cli] Update `now env` to support empty values (#4046)

This PR adds support for empty values when using `now env add|ls|rm|pull`.

This is necessary when using system environment variables such as `NOW_GITHUB_COMMIT_SHA` which will not receive a value from the user but will instead assign a value automatically during deployment."
6b5b9e8b2f1fa480c3b23c12150bf58c2774e9b2,Ana Trajkovska,2020-04-10 16:51:20+00:00,Ana Trajkovska,2020-04-10 16:51:20+00:00,"Publish Canary

 - @now/build-utils@2.2.1-canary.1
 - now@17.1.2-canary.14"
addd036149071232fc64c65bc1518f22cea3afe3,Ana Trajkovska,2020-04-10 16:46:32+00:00,GitHub,2020-04-10 16:46:32+00:00,Improve pagination message (#4035)
7ca672a470a1cb4114ac0864658ce64ed81accd0,Steven,2020-04-10 16:06:02+00:00,GitHub,2020-04-10 16:06:02+00:00,"[now-build-utils] Exclude `now.json` from fallback build src (#4042)

https://github.com/zeit/now/discussions/4016"
3af0e996892e8bc0a3197e22dced3ef51db437db,Ana Trajkovska,2020-04-10 15:21:15+00:00,Ana Trajkovska,2020-04-10 15:21:15+00:00,"Publish Canary

 - now@17.1.2-canary.13
 - @now/python@1.1.6-canary.0"
b14068de8a356b551e2d26e799d0c73056af813a,Ana Trajkovska,2020-04-10 15:19:48+00:00,GitHub,2020-04-10 15:19:48+00:00,"[now-cli] Fix removing a deployment (#4036)

* Fix removing a deployment

* Add test for removing a deployment

* Add logs

* Fix assertion"
c9437e714a754da2d25ae23160d5ad9cf64e2228,Nguyn Hng Qun,2020-04-10 13:53:24+00:00,GitHub,2020-04-10 13:53:24+00:00,"[now-python] Fix missing sys modules for relative module import (#4024)

Without this fix, Python app which uses [Pydantic](https://pydantic-docs.helpmanual.io/usage/postponed_annotations/) for data validation will crash with log like this:

```py
  File ""pydantic/main.py"", line 175, in pydantic.main.ModelMetaclass.__new__
    annotations = resolve_annotations(namespace.get('__annotations__', {}), namespace.get('__module__', None))
  File ""pydantic/typing.py"", line 136, in pydantic.typing.resolve_annotations
    annotations = resolve_annotations(namespace.get('__annotations__', {}), namespace.get('__module__', None))
  File ""pydantic/typing.py"", line 136, in pydantic.typing.resolve_annotations
    base_globals: Optional[Dict[str, Any]] = sys.modules[module_name].__dict__
KeyError: 'api.main'
```

The added code also follow Python official documentation: https://docs.python.org/3.6/library/importlib.html#importing-a-source-file-directly"
c0aff5cf4a6214af432d7ec131ff03ab7e65d3fc,Steven,2020-04-09 23:30:22+00:00,GitHub,2020-04-09 23:30:22+00:00,"[now-cli] Clean up tests for `now dev` (#4038)

This PR does a few things:

- Change `dev.unref()` when possible and use `testFixtureStdio` instead
- Replace `fetch()` with `fetchWithRetry()` when possible
- Remove commented-out tests"
9110b14bb4ee77759b49214761fa981e01db0caf,Allen Hai,2020-04-09 22:07:06+00:00,Allen Hai,2020-04-09 22:07:06+00:00,"Publish Canary

 - now@17.1.2-canary.12"
40e4b6926756528364a4ed9d4c5a7f871f89c945,Steven,2020-04-09 21:35:13+00:00,GitHub,2020-04-09 21:35:13+00:00,"[now-cli] Fix `now dev` routing for `continue: true` (#4033)

There was a bug preventing `continue: true` from working between (null => filesystem) phases.

This PR fixes that bug and adds a test to ensure users can rewrite to dynamic path segments."
6c4934dcc42b8e1580b7487ad707e64796516958,Ana Trajkovska,2020-04-09 20:26:22+00:00,Ana Trajkovska,2020-04-09 20:26:22+00:00,"Publish Canary

 - @now/frameworks@0.0.13-canary.1
 - now@17.1.2-canary.11
 - @now/static-build@0.15.2-canary.4"
d64e54d61aab0084e66f586d5bda086602ee995a,Ana Trajkovska,2020-04-09 20:24:25+00:00,GitHub,2020-04-09 20:24:25+00:00,Implement pagination for `now ls` (#4027)
0b75bf07f72cdc4051d733b69fd06b95b61f1c88,Allen Hai,2020-04-09 18:44:46+00:00,GitHub,2020-04-09 18:44:46+00:00,"[examples][now-static-build] Add Ionic Angular framework (#3970)

This PR adds framework config for Ionic Angular and also updates a mistake found in the dev script of Ionic React, which mistakenly was using the same dev script as Stencil."
a861a8f3f7879a5768a5402312ae87d45ff51dcb,Ana Trajkovska,2020-04-09 14:45:12+00:00,Ana Trajkovska,2020-04-09 14:45:12+00:00,"Publish Canary

 - now@17.1.2-canary.10"
6407b17b7faa87ae3f48c8fe22974201d222b283,Ana Trajkovska,2020-04-09 14:43:26+00:00,GitHub,2020-04-09 14:43:26+00:00,Improve pagination message (#4026)
558463a988f02055ae6d7200c122663659556f0f,Steven,2020-04-08 12:34:50+00:00,Steven,2020-04-08 12:34:50+00:00,"Publish Canary

 - now@17.1.2-canary.9"
1a133995b8dca501f7039840cce4f62f9571fcde,Steven,2020-04-07 22:49:48+00:00,GitHub,2020-04-07 22:49:48+00:00,"[now-cli] Add `now env` command (#3999)

This PR adds a new command `now env` for managing environment variables for a given project. This will complement the changes in the Dashboard and will provide 3 possible environments: `production`, `preview`, and `development`.

- [x] Add `now env ls`
- [x] Add `now env add`
- [x] Add `now env rm`
- [x] Add `now env pull`
- [x] Add  test for `now env ls`
- [x] Add  test for `now env add`
- [x] Add  test for `now env rm -y`
- [x] Add  test for `now env pull -y`
- [x] Add  test for `now env add FOO preview < secret.txt`
- [x] Add test deployment to verify env var is assigned to both build and runtime
- [x] Test on Windows


```
   now env [options] <command>

  Commands:

    ls      [environment]              List all variables for the specified environment
    add     [name] [environment]       Add an environment variable (see examples below)
    rm      [name] [environment]       Remove an environment variable (see examples below)
    pull    [filename]                 Read development environment from the cloud and write to a file [.env]

  Options:

    -h, --help                     Output usage information
    -A FILE, --local-config=FILE   Path to the local `now.json` file
    -Q DIR, --global-config=DIR    Path to the global `.now` directory
    -d, --debug                    Debug mode [off]
    -t TOKEN, --token=TOKEN        Login token

  Examples:

   Add a new variable to multiple environments

      $ now env add <name>
      $ now env add API_TOKEN

   Add a new variable for a specific environment

      $ now env add <name> <production | preview | development>
      $ now env add DB_CONNECTION production

   Add a new environment variable from stdin

      $ cat <file> | now env add <name> <production | preview | development>
      $ cat ~/.npmrc | now env add NPM_RC preview
      $ now env add DB_PASS production < secret.txt

   Remove a variable from multiple environments

      $ now env rm <name>
      $ now env rm API_TOKEN

   Remove a variable from a specific environment

      $ now env rm <name> <production | preview | development>
      $ now env rm NPM_RC preview
```"
a83eecf674dd48b614788d7f9696781b67f6f305,Steven,2020-04-06 22:42:01+00:00,Steven,2020-04-06 22:42:01+00:00,"Publish Canary

 - @now/routing-utils@1.8.1-canary.1"
a932ed65fa413c22fafadf3afc51db4e92081c9c,Steven,2020-04-06 22:40:30+00:00,GitHub,2020-04-06 22:40:30+00:00,"[now-routing-utils] Catch error from compile route (#4019)

Some inputs cause `compile()` to throw but its not clear which route caused it to fail.

> TypeError: Unexpected MODIFIER at 29, expected END [see source](https://sentry.io/organizations/zeithq/issues/1593291118/?project=1351065)

This PR adds logs so we can see the bad user input and correct accordingly."
e2ae497762aa0c24d54b1f8906cf3e9ed87c0a9c,JJ Kasper,2020-04-06 20:35:12+00:00,JJ Kasper,2020-04-06 20:35:12+00:00,"Publish Stable

 - @now/next@2.5.2"
89989719c23e8c94fc3fcd8b9d1d7ead0bb92903,JJ Kasper,2020-04-06 20:27:03+00:00,JJ Kasper,2020-04-06 20:27:03+00:00,"Publish Canary

 - @now/next@2.5.2-canary.0
 - @now/node@1.5.1-canary.0
 - @now/static-build@0.15.2-canary.3"
8166b8e1e7e1721240a00ef7e8693ec1554038a8,Joe Haddad,2020-04-06 20:19:08+00:00,GitHub,2020-04-06 20:19:08+00:00,"[now-next] Correctly Exclude API Routes from Pages (#4018)

This pull request correctly omits dependencies for API Routes from pages."
1ceeac498c19d00fa14535fc57a3169d4e7af778,Logan McAnsh,2020-04-03 22:29:56+00:00,GitHub,2020-04-03 22:29:56+00:00,"[now-node] Add `NowApiHandler` type (#4001)

* add NowApiHandler type

`now` equivalent of `NextApiHandler` introduced https://github.com/zeit/next.js/pull/10573

* chore: add fixture

Signed-off-by: Logan McAnsh <logan@mcan.sh>"
1c47d1360d5c7b53941529a15f83cfa8c1d95818,Arunoda Susiripala,2020-04-03 13:43:22+00:00,GitHub,2020-04-03 13:43:22+00:00,"[now-next] Fix some typos related to fixtures (#3995)

They should be `probes` I guess."
ddcd0918e9f4fa725323d804a1bc67236941204d,Leo Lamprecht,2020-04-02 23:52:02+00:00,GitHub,2020-04-02 23:52:02+00:00,Removed Environment Variables (#3997)
573b6b81109ae8de417677c2f508ed0f8fd67624,Steven,2020-04-01 14:27:11+00:00,GitHub,2020-04-01 14:27:11+00:00,"[now-static-build] Fix 12-creact-react-app test fixture (#3990)

Since enabling `CI` environment variable for cloud builds, this test fails because it is meant to emit a warning however that warning has turned into an error.

```
05:40:53.148  Treating warnings as errors because process.env.CI = true.
05:40:53.148  Most CI servers set it automatically.
05:40:53.148  Failed to compile.
05:40:53.149  ./src/App.js
05:40:53.149    Line 1:  'useState' is defined but never used  no-unused-vars
05:40:53.172  error Command failed with exit code 1.
```

We can again treat lint errors as warnings by setting `CI=false`."
40039d7f9b69640075758dbf13c838fa55dabd34,Steven,2020-03-31 21:18:32+00:00,Steven,2020-03-31 21:18:32+00:00,"Publish Canary

 - @now/build-utils@2.2.1-canary.0"
dcb37e92f549b582933362f3a88fe4b5069c4ebd,Steven,2020-03-31 21:09:57+00:00,GitHub,2020-03-31 21:09:57+00:00,"[now-build-utils] Hide internal stack trace for errors (#3988)

Example build output given a user's build script named `shouldfail.js`:

## Before

```
/zeit/4af70cdc/shouldfail.js:3
throw new Error('This is my failure')
^
Error: This is my failure
    at Object.<anonymous> (/zeit/4af70cdc/shouldfail.js:3:7)
    at Module._compile (internal/modules/cjs/loader.js:955:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:991:10)
    at Module.load (internal/modules/cjs/loader.js:811:32)
    at Function.Module._load (internal/modules/cjs/loader.js:723:14)
    at Function.Module.runMain (internal/modules/cjs/loader.js:1043:10)
    at internal/main/run_main_module.js:17:11
error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
Error: Exited with 1
    at ChildProcess.<anonymous> (/zeit/687b1c64/.build-utils/node_modules/@now/build-utils/dist/index.js:31350:24)
    at ChildProcess.emit (events.js:223:5)
    at ChildProcess.EventEmitter.emit (domain.js:475:20)
    at maybeClose (internal/child_process.js:1021:16)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:283:5)
worker exited with code 20 and signal null
Done with ""package.json""
```

## After 

```
/zeit/255bfdd/shouldfail.js:3
throw new Error('This is my failure')
^
Error: This is my failure
    at Object.<anonymous> (/zeit/255bfdd/shouldfail.js:3:7)
    at Module._compile (internal/modules/cjs/loader.js:955:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:991:10)
    at Module.load (internal/modules/cjs/loader.js:811:32)
    at Function.Module._load (internal/modules/cjs/loader.js:723:14)
    at Function.Module.runMain (internal/modules/cjs/loader.js:1043:10)
    at internal/main/run_main_module.js:17:11
error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
Error: Command ""yarn run build"" exited with 1
worker exited with code 20 and signal null
Done with ""package.json""
```"
fe7f875549044e8990544821cc9e9a6f82376196,Steven,2020-03-31 16:20:59+00:00,Steven,2020-03-31 16:20:59+00:00,"Publish Canary

 - now@17.1.2-canary.8"
a516ed6fb857d3c3dbf99a4afb285d8216dba2a8,Steven,2020-03-31 16:09:11+00:00,GitHub,2020-03-31 16:09:11+00:00,"[now-cli] Fix error message link to build logs (#3986)

The current error message prints a link that is not clickable from the terminal.

This PR adds the missing `https://` protocol prefix, so that the link is clickable."
ca2c5f85ef67331b1d04fb8ff0c26ef33c1cf8de,Steven,2020-03-31 13:06:46+00:00,GitHub,2020-03-31 13:06:46+00:00,"[now-cli] Fix for adding secret with hyphen prefix (#3983)

Follow up to #3982 which didn't actually fix the secret value. Instead it was adding `true` as the value."
adb5a01cc03c635470236995f2df80f9abbd5522,Tim Neutkens,2020-03-31 10:24:21+00:00,GitHub,2020-03-31 10:24:21+00:00,Upgrade Next.js (#3984)
6b4d39ab4d28fbdcc26fcb4c8d588b0f04e9877d,Steven,2020-03-30 22:27:55+00:00,Steven,2020-03-30 22:27:55+00:00,"Publish Canary

 - now@17.1.2-canary.7"
07ce3d2e3431159c1c097f00811e4a8bfeb91592,Steven,2020-03-30 22:13:00+00:00,GitHub,2020-03-30 22:13:00+00:00,"[now-cli] Bump mri to 1.1.5 (#3982)

This fixes the error when attempting to add a secret with a hyphen and underscore such as the following:

```
$ now secret add name '-foo_bar'
Error! argv._.slice is not a function
```"
93ffcf487b6b87aa9d056b6c6a71f67d71f7c24b,JJ Kasper,2020-03-30 19:18:01+00:00,JJ Kasper,2020-03-30 19:18:01+00:00,"Publish Canary

 - @now/routing-utils@1.8.1-canary.0"
3631f0f4cfdd97d2d6c9adcdb380684f229ae329,JJ Kasper,2020-03-30 18:57:24+00:00,GitHub,2020-03-30 18:57:24+00:00,"[now-routing-utils] Update to not add path segments to redirect query automatically (#3981)

As discussed this removes automatically adding path segments to redirect's destination query and only adds them if manually specified

x-ref: https://github.com/zeit/next.js/pull/11497"
b67b5be8a977de1bf1e311ad7e7fee33a3773fb6,Steven,2020-03-30 18:06:57+00:00,Steven,2020-03-30 18:06:57+00:00,"Publish Canary

 - now@17.1.2-canary.6
 - now-client@7.0.2-canary.2
 - @now/static-build@0.15.2-canary.2"
bf67b1a29e3d755941f57dfb85a403e403b0360a,Steven,2020-03-30 17:53:47+00:00,GitHub,2020-03-30 17:53:47+00:00,"[now-static-build][now-client] Ignore known static outputs (#3980)

We already ignore specific files such as `node_modules` and `.env` during the upload phase so these never make it to the build. However, if those files are generated during the build, that are still emitted.

This PR will ignore these specific files even if they end up in the output directory (for example, when the user assigns `outputDirectory='.'` in project settings)"
ed86473f743e92cd7654e022698c9c61934e24f9,Max Rovensky,2020-03-30 09:57:56+00:00,Max Rovensky,2020-03-30 09:57:56+00:00,"Publish Canary

 - now@17.1.2-canary.5
 - now-client@7.0.2-canary.1"
399a3cd11484929940ab43577408e6eeeeadb056,Max,2020-03-30 09:51:05+00:00,GitHub,2020-03-30 09:51:05+00:00,"[now-cli][now-client] Change `forceNewWithCache` to `withCache` (#3966)

Follow up to https://github.com/zeit/now/pull/3953 that makes the flag composable"
d0fd09810ae4ffd5a947ac1b6d49c80660f95748,Steven,2020-03-28 22:33:40+00:00,Steven,2020-03-28 22:33:40+00:00,"Publish Stable

 - @now/go@1.0.6"
f298f2e8949380d3c8db2189a3ff9482c3109ea4,Steven,2020-03-28 22:21:06+00:00,Steven,2020-03-28 22:21:06+00:00,"Publish Canary

 - @now/go@1.0.6-canary.0"
569200ae0efc3284bb221ffc3b2716cc09e4bb26,Steven,2020-03-28 22:16:42+00:00,GitHub,2020-03-28 22:16:42+00:00,"[now-go] Fix import for go-bridge (#3976)

Somehow, PR #3973 broke Go since the bridge is imported from this repo's master branch.

Go has very strict file name constraints and the file `[...path].js` is not compatible.


Here's what a `@now/go` deployment error message looks like:

```
Error: Command failed: go mod tidy
go: finding github.com/zeit/now latest
go: downloading github.com/zeit/now v0.0.0-20200326223129-c91495338d5e
go: extracting github.com/zeit/now v0.0.0-20200326223129-c91495338d5e
-> unzip /tmp/5a0676f5/pkg/mod/cache/download/github.com/zeit/now/@v/v0.0.0-20200326223129-c91495338d5e.zip: malformed file path ""packages/now-next/test/fixtures/22-ssg-v2-catchall/pages/[...path].js"": double dot
handler imports
github.com/zeit/now/utils/go/bridge: unzip /tmp/5a0676f5/pkg/mod/cache/download/github.com/zeit/now/@v/v0.0.0-20200326223129-c91495338d5e.zip: malformed file path ""packages/now-next/test/fixtures/22-ssg-v2-catchall/pages/[...path].js"": double dot
```

The solution is to move Go Bridge into a separate repository: https://github.com/zeit/now-go-bridge

This will also have the side effect of speeding up Go imports because the repo will be much smaller."
c91495338d5e004a7affb443140b76a1afda3645,Nathan Rajlich,2020-03-26 22:31:29+00:00,GitHub,2020-03-26 22:31:29+00:00,"Update `signal-exit` to v3.0.3 (#3974)

@tootallnate's bug fix for `SIGHUB` on Windows has been merged and
published as `signal-exit@3.0.3`, so no more need for the ""resolutions""
field in `package.json`.

The `yarn.lock` file has been updated accordingly."
7eed5574e09255d432369562d1945a510529e063,JJ Kasper,2020-03-26 21:12:48+00:00,JJ Kasper,2020-03-26 21:12:48+00:00,"Publish Stable

 - @now/next@2.5.1"
91e6b85cecb7bd654a46ca5a2ec60e7f7bed555d,JJ Kasper,2020-03-26 21:01:00+00:00,JJ Kasper,2020-03-26 21:01:00+00:00,"Publish Canary

 - @now/next@2.5.1-canary.0
 - @now/static-build@0.15.2-canary.1"
3ae83172eccea727118baed5c0250bfe45cea385,JJ Kasper,2020-03-26 20:08:51+00:00,GitHub,2020-03-26 20:08:51+00:00,"[now-next] Fix dynamic routes and data routes order (#3973)

When using a catch-all route at the base of the project it would cause it to be prioritized over any GS(S)P `/_next/data` routes. This fixes the order putting `/_next/data` routes first as they have higher specificity and adds tests to ensure we don't regress on this"
7c51446e5eab2aa2b51eed59979eb21a91db84db,Steven,2020-03-25 22:42:37+00:00,GitHub,2020-03-25 22:42:37+00:00,"[tests] Add additional env vars (#3968)

These are used for testing and health checks."
400a5c73e899b21554bbfbffa1fc49ec8c6e72ac,Steven,2020-03-25 19:20:59+00:00,GitHub,2020-03-25 19:20:59+00:00,"[examples][now-static-build] Bump `ionic-react` to latest typescript (#3967)

Fixes an issue with a dependency that was bumped but typescript was pinned in `ionic-react`.


```
$ react-scripts build
Creating an optimized production build...
Failed to compile.
/zeit/333ecfab/node_modules/@types/testing-library__react/node_modules/pretty-format/build/index.d.ts
TypeScript error in /zeit/333ecfab/node_modules/@types/testing-library__react/node_modules/pretty-format/build/index.d.ts(7,13):
'=' expected.  TS1005
     5 |  * LICENSE file in the root directory of this source tree.
     6 |  */
  >  7 | import type * as PrettyFormat from './types';
       |             ^
     8 | /**
     9 |  * Returns a presentation string of your `val` object
    10 |  * @param val any potential JavaScript object
error Command failed with exit code 1.
```"
ec917ace6937da3e1f33d3198fb8af371d76cb46,Steven,2020-03-25 17:41:04+00:00,Steven,2020-03-25 17:41:04+00:00,"Publish Canary

 - @now/frameworks@0.0.13-canary.0
 - now@17.1.2-canary.4
 - @now/static-build@0.15.2-canary.0"
f5e0afdd7eb872de2e50b7aef54d435c795f3b0c,Anthony Gubler,2020-03-25 17:32:33+00:00,GitHub,2020-03-25 17:32:33+00:00,"[examples] Add Dojo Example (#3882)

Adds an example for Dojo applications with ZEIT Now.

Co-Authored-By: Steven <steven@ceriously.com>
Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
c1b4c627143eda19297dd9249b9830aab1ad245e,Steven,2020-03-25 16:05:32+00:00,GitHub,2020-03-25 16:05:32+00:00,"[tests] Cancel previous workflows on push (#3965)

Follow up to #3961

Workflow IDs are found here: from https://api.github.com/repos/zeit/now/actions/workflows"
5e4bdfbe11755ab4706639d06b80d82065e174dd,Steven,2020-03-25 15:40:11+00:00,GitHub,2020-03-25 15:40:11+00:00,"[tests] Separate into workflows (#3961)

This PR does a few things:

- Separate tests into multiple workflows
- Rename a few package.json scripts to make naming consistent
- Rename workflows to be uppercase and jobs to be lowercase

The benefits here are:
- Restart a workflow if it fails, for example only restart `now dev` tests
- Easier to read when we need to understand a workflow or modify env vars

After merging, we'll need to modify the required checks in the repo settings.
We'll also need to update the cancel workflow (that will need to be a separate PR)."
bd4a0cbd32a6474522a0f0597189fd924a00b5df,Andy Bitz,2020-03-25 14:57:19+00:00,Andy Bitz,2020-03-25 14:57:19+00:00,"Publish Stable

 - @now/frameworks@0.0.12
 - @now/static-build@0.15.1"
7ff9adc90eda8e765ef69c34446859665ef0bda9,Andy Bitz,2020-03-25 14:56:44+00:00,Andy Bitz,2020-03-25 14:56:44+00:00,"Publish Canary

 - @now/frameworks@0.0.12-canary.1
 - @now/static-build@0.15.1-canary.1"
b279f1ffaea83dd817d1684ef97cd90690b56518,Andy,2020-03-25 14:42:56+00:00,GitHub,2020-03-25 14:42:56+00:00,"[frameworks][now-static-build] Support Docusaurus v2 and v1 (#3964)

Support Docusaurus v2 and v1"
344cc103eee41f0d082ce7732d44802256e67fac,Ana Trajkovska,2020-03-25 13:11:11+00:00,Ana Trajkovska,2020-03-25 13:11:11+00:00,"Publish Canary

 - now@17.1.2-canary.3"
83249b3685a788f6f2b63fe81c5df5e67f2a045e,Ana Trajkovska,2020-03-25 13:08:26+00:00,GitHub,2020-03-25 13:08:26+00:00,"[now-cli] Add pagination for `now alias ls` (#3915)

* Implement pagination for `now alias ls`

* Fix issue retrieving aliases

* Add help text for pagiting aliases"
79e7a9f477ffef215a7ee9c454aef5366576ba3b,Andy,2020-03-25 12:43:53+00:00,GitHub,2020-03-25 12:43:53+00:00,[now-cli] Update docusaurus test (#3963)
b3dce70271bf132d24920a75272eeda8f85aa666,Steven,2020-03-24 23:24:57+00:00,Steven,2020-03-24 23:24:57+00:00,"Publish Canary

 - @now/frameworks@0.0.12-canary.0
 - now@17.1.2-canary.2
 - @now/static-build@0.15.1-canary.0"
cff8d8b8a08e78de788de3d758e293a27317dabf,Steven,2020-03-24 22:46:42+00:00,GitHub,2020-03-24 22:46:42+00:00,"[tests] Fix test initialize existing directory `--f` -> `-f` (#3960)

Fixes test after PR #3958"
da892100d97fb6be3fcbe3932ac94747cd9fe041,Andy,2020-03-24 22:03:31+00:00,GitHub,2020-03-24 22:03:31+00:00,"[frameworks][now-static-build] Fix Docusaurus build command (#3959)

* [frameworks][now-static-build] Fix Docusaurus build command

* Update dev command"
72e87ee6e4969b99f1c449f6b294105ed101dba8,Max Leiter,2020-03-24 19:51:15+00:00,GitHub,2020-03-24 19:51:15+00:00,Fix slight spelling mistake: `--f` -> `-f` in `now --force` error (#3958)
3f9afad167fd55baf1cc41b6e2706283d3bd067e,Max Rovensky,2020-03-24 19:12:23+00:00,Max Rovensky,2020-03-24 19:12:23+00:00,"Publish Canary

 - now@17.1.2-canary.1
 - now-client@7.0.2-canary.0"
15274479143548f7f8c605a92b1cadc4c17f0ecb,Max,2020-03-24 19:09:10+00:00,GitHub,2020-03-24 19:09:10+00:00,"Add `--force-with-cache` flag support (#3953)

Adds support for an upcoming `forceNewWithCache` API flag"
9ca35df5fb707b858c0bcaa8e46a4becfe123372,Steven,2020-03-24 18:47:25+00:00,GitHub,2020-03-24 18:47:25+00:00,"[tests] Fix coverage checks (#3957)

The CodeCov GitHub integration is confused about the monorepo and started reporting failures recently.

<img src=""https://user-images.githubusercontent.com/229881/77462927-2983f280-6ddb-11ea-9ee2-38b660b2fd2f.png"" height=120 />

We run `codecov` from the CLI so we can disable the integration. 

## References

- https://docs.codecov.io/docs/codecovyml-reference
- https://docs.codecov.io/docs/commit-status#section-disabling-a-status"
05b2e2216ce3bfc06a67265973a913086db89017,Ana Trajkovska,2020-03-24 18:12:47+00:00,Ana Trajkovska,2020-03-24 18:12:47+00:00,"Publish Canary

 - now@17.1.2-canary.0"
167fd5750a6ac302aebdb83571296d1025c3189a,Ana Trajkovska,2020-03-24 18:08:52+00:00,GitHub,2020-03-24 18:08:52+00:00,"[now-cli] Add pagination for `now domains ls` (#3922)

* Implement pagination for listing domains

* Add helpi list for paginating domains"
4a3cd7ec72aa0e09c01f688a9980fa61a31e04e3,Andy,2020-03-24 00:56:13+00:00,GitHub,2020-03-24 00:56:13+00:00,[now-cli] Ignore 404 for aliases and certs when removing a domain (#3955)
9aef718917d938f51cbb031006ff5b943a55f774,Andy Bitz,2020-03-23 23:16:28+00:00,Andy Bitz,2020-03-23 23:16:28+00:00,"Publish Stable

 - now@17.1.1"
3cdc261802097e585d2b0fa9b15afe9c8ee886c7,Ana Trajkovska,2020-03-23 23:14:52+00:00,GitHub,2020-03-23 23:14:52+00:00,"[now-cli] Fix broken message when a deployment is canceled (#3954)

* Fix broken message when a deployment is canceled

* Add \n in the message"
5c71f672b356c72b0f5a201a0ee0c7e18c31bbb7,Steven,2020-03-23 17:59:31+00:00,Steven,2020-03-23 17:59:31+00:00,"Publish Stable

 - @now/frameworks@0.0.11
 - @now/build-utils@2.2.0
 - @now/cgi@1.0.4
 - now@17.1.0
 - now-client@7.0.1
 - @now/go@1.0.5
 - @now/next@2.5.0
 - @now/node@1.5.0
 - @now/python@1.1.5
 - @now/routing-utils@1.8.0
 - @now/ruby@1.1.0
 - @now/static-build@0.15.0"
dbc5f73984e9a6ebf68043ac7741ddeea2fb84c1,Steven,2020-03-23 15:03:05+00:00,Steven,2020-03-23 15:03:05+00:00,"Publish Canary

 - now@17.0.5-canary.15"
1d269fffc87dc5a46d15b2ea8ee44369423cc84c,Steven,2020-03-23 14:57:59+00:00,GitHub,2020-03-23 14:57:59+00:00,"[now-cli] Fix ambiguous argument error (#3952)

This updates the error message to offer action items when an ambiguous argument is provided.

## Before

```
Error! The supplied argument ""secrets"" is ambiguous. Both a directory and a subcommand are known 
```

## After

```
Error! The supplied argument ""secrets"" is ambiguous.
If you wish to deploy the subdirectory ""secrets"", first run ""cd secrets"".
If you wish to use the subcommand ""secrets"", use ""secret"" instead.
```"
cc146ba0f572505fc4cb3e7deee659a5f95e830c,Ana Trajkovska,2020-03-22 23:24:37+00:00,Ana Trajkovska,2020-03-22 23:24:37+00:00,"Publish Canary

 - now@17.0.5-canary.14"
f8a2519838853a48d621609d7073dbb678a2de31,Ana Trajkovska,2020-03-22 23:21:47+00:00,GitHub,2020-03-22 23:21:47+00:00,Add help text for paginating deployments for a project (#3948)
1781376d475ea750ae4d66d11ec945efb556293a,Steven,2020-03-20 19:04:52+00:00,Steven,2020-03-20 19:04:52+00:00,"Publish Canary

 - @now/build-utils@2.1.2-canary.3
 - @now/ruby@1.0.3-canary.4
 - @now/static-build@0.14.13-canary.6"
d9fda1496926e85b3fdcb1660af87349087a67bf,Steven,2020-03-20 18:54:57+00:00,GitHub,2020-03-20 18:54:57+00:00,"[now-ruby] Upgrade to Ruby 2.7 (#3872)

- Change default version to Ruby `2.7.x` to match our static builds such as jekyll
- Detect ruby version in `Gemfile` in case the user wishes to downgrade to Ruby `2.5.x`
- Print nicer error message in `now dev`

cc @nathancahill @m5o"
a4de9272e7ae112816109981499fa8d1e8039a2c,Steven,2020-03-20 15:54:51+00:00,GitHub,2020-03-20 15:54:51+00:00,"[now-static-build] Add test for puppeteer during build (#3911)

We recently updated the build image to add the necessary dependencies so that `puppeteer` can run during the build step.

This PR adds a test that takes a screenshot and prints metrics during a static build.

This is necessary to support `react-snap` (along with a few flags in `package.json`).

```json
{
  ""reactSnap"": {
    ""puppeteerArgs"": [
      ""--no-sandbox"",
      ""--disable-setuid-sandbox""
    ]
  }
}
```

- Fixes https://github.com/zeit/now-builders/issues/517
- Fixes #2357"
9b9037de91bed61a4e283fcccc26451963928beb,Andy Bitz,2020-03-20 14:37:07+00:00,Andy Bitz,2020-03-20 14:37:07+00:00,"Publish Canary

 - @now/build-utils@2.1.2-canary.2
 - @now/next@2.4.1-canary.4
 - @now/static-build@0.14.13-canary.5"
8d18c65e3e52283786020c99a9aeb56df3e8b7ca,Andy,2020-03-20 14:31:53+00:00,GitHub,2020-03-20 14:31:53+00:00,"[now-next][now-static-build][now-build-utils] Use util to get node .bin in path (#3946)

https://zeit.atlassian.net/browse/PRODUCT-1380

This makes `now-next` consider the `node_modules/.bin` path if a custom build command was specified, which makes it work like `now-static-build`."
e7d7de61b6cf1fc81861ccbfbc369cc2bada89e9,Ana Trajkovska,2020-03-20 12:04:29+00:00,Ana Trajkovska,2020-03-20 12:04:29+00:00,"Publish Canary

 - now@17.0.5-canary.13
 - @now/next@2.4.1-canary.3"
11927883c3abb41f206a8cee501c20d743020516,Ana Trajkovska,2020-03-20 12:03:03+00:00,GitHub,2020-03-20 12:03:03+00:00,Fix pagination on `now ls project` (#3945)
57d25b184b63d262240856e40646ba9e1e4125e2,Andy,2020-03-20 10:42:54+00:00,GitHub,2020-03-20 10:42:54+00:00,"[now-next] Add support for the outputDirectory option (#3897)

* [now-next] Add support for the outputDirectory option

* Add test

* Remove build command

* Remove check

* Add build command

* Rename directory

* Rename

* Fix test and output directory"
95f716fb3fd81777f626239cfa5b08c89f09e179,Steven,2020-03-19 20:55:36+00:00,Steven,2020-03-19 20:55:36+00:00,"Publish Canary

 - now@17.0.5-canary.12
 - @now/next@2.4.1-canary.2"
8dd52605be236ec5c686bff96f7d0b236411cbb2,Steven,2020-03-19 20:49:57+00:00,GitHub,2020-03-19 20:49:57+00:00,"[now-cli] Print link to more details on error (#3944)

This PR updates API Errors to support the `error.link` property.

Unlike `error.slug` which is only a path to an error message, `error.link` contains the full URL.


### Example Output

```
$ now
Error! Serverless Functions.........etc
> More details: https://zeit.ink/...etc
```"
4b9c6a2a2acff79ebe993e0b27b0cb2579ef22d5,JJ Kasper,2020-03-19 18:24:20+00:00,GitHub,2020-03-19 18:24:20+00:00,"[now-next] Make sure to set 404 status for /404 route itself (#3924)

As discussed this makes sure to set the `404` status on the `/404` path itself"
17f92a5ad33db0859e0f08c4cc4c133e3591d5ba,Steven,2020-03-19 17:59:08+00:00,Steven,2020-03-19 17:59:08+00:00,"Publish Canary

 - now@17.0.5-canary.11"
0aab7cc509ee402a465d8b9604da8d64fab5f02f,Ana Trajkovska,2020-03-19 17:45:24+00:00,GitHub,2020-03-19 17:45:24+00:00,"Fix error on `now ls` (#3942)

Co-authored-by: Leo Lamprecht <leo@zeit.co>"
b39622b271e021d52538bba12aff689d5dd34c63,Steven,2020-03-19 17:44:59+00:00,GitHub,2020-03-19 17:44:59+00:00,[tests] Fix publish job environment variables (#3943)
1e9aeee8e97c90a8007884ae7f32d72dca79cb03,Ana Trajkovska,2020-03-19 16:37:56+00:00,Ana Trajkovska,2020-03-19 16:37:56+00:00,"Publish Canary

 - now@17.0.5-canary.10"
49fac0dfad5d19768a7f5fb03988ec74b9e49bcd,Ana Trajkovska,2020-03-19 16:21:13+00:00,GitHub,2020-03-19 16:21:13+00:00,Paginate listing deployments for a project (#3933)
a668df829f6b15694ce0424135ce139a4c9eb9fb,Steven,2020-03-19 14:30:33+00:00,Steven,2020-03-19 14:30:33+00:00,"Publish Canary

 - @now/build-utils@2.1.2-canary.1
 - now@17.0.5-canary.9
 - now-client@7.0.1-canary.4
 - @now/static-build@0.14.13-canary.4"
3d4ef1f8259d524377954616dbaea1b749abd58e,Steven,2020-03-19 14:30:07+00:00,Steven,2020-03-19 14:30:07+00:00,[now-cli][now-client] Revert major version per #3939
f986daa1cc77959168d2f1c0d8ea22b28c8f516b,Steven,2020-03-19 13:44:51+00:00,GitHub,2020-03-19 13:44:51+00:00,"[now-client] Fix lint error: forbidden non-null assertion (#3941)

Fixes the following lint error: `Forbidden non-null assertion`.

<img src=""https://user-images.githubusercontent.com/229881/77072131-98b8ab80-69c3-11ea-84f5-e45be43951f9.png"" height=200 />

I realized this logic was somewhat brittle because it relied on `/` path separators so I switched it to use the native file name function `basename()` to determine if a file begins with a dot."
549c8777ba4a30ce5448dd81b19fc538dd925458,Steven,2020-03-19 13:08:46+00:00,GitHub,2020-03-19 13:08:46+00:00,"[tests] Fix test retry and allow local token (#3940)

This PR updates the way we run integration tests (the ones that create test deployments) so that it will be less likely to fail. 

A couple side effects to this PR:

- To run the tests locally, you must set `NOW_TOKEN` env var (can be found in `~/.now/auth.json`).
- PRs from forked repos won't run tests because they now rely on a secret in GH Actions.
- A couple alias tests that require certs need to be disabled because they will fail.

[PRODUCT-2093]

[PRODUCT-2093]: https://zeit.atlassian.net/browse/PRODUCT-2093"
51d7242fdaa5d386563d0d3a19fe7d65605b81c3,Andy,2020-03-18 23:16:51+00:00,GitHub,2020-03-18 23:16:51+00:00,"Revert ""[now-cli][now-client] (Major) Remove legacy code (#3840)"" (#3939)

* Revert ""[now-cli][now-client] (Major) Remove legacy code (#3840)""

* Remove get

* Add projectId to .now/project.json"
36db0e5babf839b9250ae54e7231074f4a967040,Nathan Rajlich,2020-03-18 20:49:22+00:00,GitHub,2020-03-18 20:49:22+00:00,"[now-cli] Catch `process.kill()` for dev process and mute ""ESRCH"" (#3927)

""ESRCH"" error means that the process is no longer running, and thus
already shut down. No need to throw in that case so just ignore the
error.

Fixes: https://sentry.io/organizations/zeithq/issues/1568104652

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
99368b4248f41c8916d846b8f39191b90d6fd6fe,Steven,2020-03-18 20:37:19+00:00,GitHub,2020-03-18 20:37:19+00:00,"[all] Fix test fixture pkg names and increase retry (#3935)

Fixes test warnings from `jest-hast-map`:

```
[now-static-build] Running yarn test-integration-once
$ jest --env node --verbose --runInBand test/integration.test.js
jest-haste-map: Haste module naming collision: 12-create-react-app
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/fixtures/12-create-react-app/package.json
    * <rootDir>/test/fixtures/26-ejected-cra/package.json

jest-haste-map: Haste module naming collision: gatsby-starter-default
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/fixtures/10-gatsby/package.json
    * <rootDir>/test/fixtures/10-gatsby-without-build-script/package.json

jest-haste-map: Haste module naming collision: gohugo-default-theme
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/fixtures/31-hugo/themes/ananke/package.json
    * <rootDir>/test/fixtures/46-hugo-with-framework/themes/ananke/package.json

jest-haste-map: Haste module naming collision: gohugo-default-styles
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/fixtures/31-hugo/themes/ananke/src/package.json
    * <rootDir>/test/fixtures/46-hugo-with-framework/themes/ananke/src/package.json

jest-haste-map: Haste module naming collision: 47-nuxt-with-custom-output
  The following files share their name; please adjust your hasteImpl:
    * <rootDir>/test/fixtures/47-nuxt-with-custom-output/package.json
    * <rootDir>/test/fixtures/48-nuxt-without-framework/package.json
```

Also increased test retry to 5."
95daf0e292aadde4b0bd399d79f639dda4873696,Andy Bitz,2020-03-18 11:53:21+00:00,Andy Bitz,2020-03-18 11:53:21+00:00,"Publish Canary

 - @now/frameworks@0.0.11-canary.2
 - now@18.0.0-canary.12
 - @now/static-build@0.14.13-canary.3"
8bfa9c1a42289bd9d044a5d77682f7b7aa88af14,Andy,2020-03-18 11:51:52+00:00,GitHub,2020-03-18 11:51:52+00:00,"[now-cli] Fix ID check for orgs (#3934)

* [now-cli] Fix ID check for orgs

* Validate project settings

* Fix check"
4208dc0466b1f89e50a7f24085806a72d3dfb2c2,Shu Uesugi,2020-03-17 23:08:07+00:00,GitHub,2020-03-17 23:08:07+00:00,Add missing websites to frameworks (#3814)
00ae011b95e679ecddc8d71c690412e3e40594d0,Leo Lamprecht,2020-03-17 22:02:30+00:00,GitHub,2020-03-17 22:02:30+00:00,Use correct frameworks endpoint (#3932)
a770991a8146f3f99d2b9b13242960bb2eb34543,Andy,2020-03-17 21:57:02+00:00,GitHub,2020-03-17 21:57:02+00:00,"[now-cli] Restore `now alias <domain>` (#3910)

* [now-cli] Restore `now alias <domain>`

* Fix test

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
f80a6d639290e3362a7cf9b2ab9cebae22b3ed86,Leo Lamprecht,2020-03-17 21:37:38+00:00,GitHub,2020-03-17 21:37:38+00:00,"Add support for `/api/v1/frameworks` to the framework API (#3931)

* Add support for `/api/v1/frameworks` to the framework API

* Update now.json

* Add another rewrite

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Andy Bitz <artzbitz@gmail.com>"
30777384ec3d97587df8aad0d21da1cc5e4f10b0,Andy,2020-03-17 21:13:06+00:00,GitHub,2020-03-17 21:13:06+00:00,"Revert ""Rewrite all paths to frameworks API (#3929)"" (#3930)

This reverts commit ff18788b20f064ca960134ac768a218401742994."
0c719b7f6a459b09daf2d50455191fa3d7496795,Yamagishi Kazutoshi,2020-03-17 21:12:06+00:00,GitHub,2020-03-17 21:12:06+00:00,"[now-static-build] Add defaultRoutes for docusaurus v2 (#3909)

Add a default router for Docusaurus v2 to add strong asset caching and 404 page fallback."
ff18788b20f064ca960134ac768a218401742994,Leo Lamprecht,2020-03-17 21:11:22+00:00,GitHub,2020-03-17 21:11:22+00:00,Rewrite all paths to frameworks API (#3929)
752ab39787a5ca8962c3f23fc3f42d18c53b3318,Steven,2020-03-17 20:33:13+00:00,Steven,2020-03-17 20:33:13+00:00,"Publish Canary

 - @now/frameworks@0.0.11-canary.1
 - now@18.0.0-canary.11
 - @now/static-build@0.14.13-canary.2"
c1df8c8bd15c6aa79254fad7fe04bf31851e854c,Steven,2020-03-17 20:29:43+00:00,GitHub,2020-03-17 20:29:43+00:00,"[now-static-build] Update error message to mention project settings (#3926)

This PR improves the error message to make it actionable.

The docs will be updated in https://github.com/zeit/docs/pull/1661 with even more detail."
25fd1df35dc18a3b3cdb5114cfd6e6bec3e6c0b3,Andy,2020-03-17 19:31:19+00:00,GitHub,2020-03-17 19:31:19+00:00,[frameworks] Adjust placeholder for build command (#3928)
d32ab1e0d9b316c6b506d761743a6db7a507c45b,Steven,2020-03-17 15:54:20+00:00,GitHub,2020-03-17 15:54:20+00:00,"[examples] Update jekyll and middleman to use bundler 2.1.4 (#3923)

These examples were using an old version of Bundler which didn't match our tests and would fail with:

```
/ruby27/lib/ruby/2.7.0/rubygems.rb:275:in `find_spec_for_exe': Could not find 'bundler' (1.17.2) required by your /zeit/6f4b9e46/Gemfile.lock. (Gem::GemNotFoundException)
To update to the latest version installed on your system, run `bundle update --bundler`.
To install the missing version, run `gem install bundler:1.17.2`
	from /ruby27/lib/ruby/2.7.0/rubygems.rb:294:in `activate_bin_path'
	from /ruby27/bin/bundle:23:in `<main>'
```

I ran `bundle update --bundler` in each of these directories and it only updated the version in `Gemfile.lock` because 2.x is mostly backwards compatible."
a69c4607602734712cc80c73a6e3a102b23ac185,Steven,2020-03-17 15:23:21+00:00,GitHub,2020-03-17 15:23:21+00:00,"[now-cli] Fix test for username (#3916)

We renamed the CI Bot so this will use the name from the context rather than hardcoding the name."
b985853f153c51fdedeadefe6806b61eb5a165b6,Andy,2020-03-17 14:37:24+00:00,GitHub,2020-03-17 14:37:24+00:00,[frameworks] Remove quotes from placeholder (#3921)
94e607a93a1cc1557d914ba859523f6b218953bf,Andy,2020-03-17 14:31:01+00:00,GitHub,2020-03-17 14:31:01+00:00,"[frameworks] Fix more placeholders (#3920)

* [frameworks] Fix order in build placeholder

* [frameworks] Adjust order for more frameworks"
f97a81fa1459aaaf46aa6c515a18221b919b9418,Andy,2020-03-17 14:20:47+00:00,GitHub,2020-03-17 14:20:47+00:00,[frameworks] Fix order in build placeholder (#3918)
6e28438eb4e4651e406b007794fa289fc68bf151,Andy,2020-03-17 14:08:28+00:00,GitHub,2020-03-17 14:08:28+00:00,[frameworks] Change build placeholder (#3917)
8fcdf3f458d3b6593a3c489d1cd8cddd6e909452,Shu Ding,2020-03-16 16:33:08+00:00,GitHub,2020-03-16 16:33:08+00:00,improve brunch example (#3906)
dbf0cc35627e66498aff3dc91c690f9449602afe,dependabot[bot],2020-03-15 10:55:13+00:00,GitHub,2020-03-15 10:55:13+00:00,"Bump acorn from 5.7.3 to 5.7.4 (#3913)

Bumps [acorn](https://github.com/acornjs/acorn) from 5.7.3 to 5.7.4.
- [Release notes](https://github.com/acornjs/acorn/releases)
- [Commits](https://github.com/acornjs/acorn/compare/5.7.3...5.7.4)

Signed-off-by: dependabot[bot] <support@github.com>

Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>"
27ccfa7e7a2f820f7a381228547a32d9ac0c61a7,Steven,2020-03-13 18:22:52+00:00,Steven,2020-03-13 18:22:52+00:00,"Publish Canary

 - now@18.0.0-canary.10"
f37edbc670c72a651fde3517b162d32fb3343f60,Steven,2020-03-13 00:10:11+00:00,GitHub,2020-03-13 00:10:11+00:00,"[now-cli] Fix invalid token error message during project link (#3907)

This PR improves the error message and prevents ""An unexpected error occurred"" when the token is invalid during a project link step.

I also added the `--token` option to `now dev --help` .

Lastly, I updated `now logout` to work correctly when the token is invalid.

- Fixes #3772 
- Fixes #3786"
b7943e83d278cab4158b7f85ebfd86a8d5a555db,JJ Kasper,2020-03-12 16:45:18+00:00,JJ Kasper,2020-03-12 16:45:18+00:00,"Publish Canary

 - @now/next@2.4.1-canary.1
 - @now/routing-utils@1.7.1-canary.1"
300ed5b9527e9f94cf63d6797de16535f0f21220,JJ Kasper,2020-03-12 03:18:33+00:00,GitHub,2020-03-12 03:18:33+00:00,"[now-next] Implement new handles for custom routes (#3892)

This implements the new handles from https://github.com/zeit/now/pull/3876 to allow us to ensure the proper order for `rewrites`, `redirects`, and `headers` in Next.js. I also added in the tests from the Next.js [custom-routes test suite](https://github.com/zeit/next.js/tree/canary/test/integration/custom-routes) to ensure we're matching behavior. 

To help keep track of what each probe is testing I added support for parsing the `now.json` files in `testDeployment` as [JSON5](https://www.npmjs.com/package/json5) to allow adding comments before each probe. If this is undesired I can remove this specific change even though it makes managing the fixture tests much easier"
9e6ebfb3ec6fe737a8ca20addf47d4285a39372b,Andy Bitz,2020-03-11 22:02:30+00:00,Andy Bitz,2020-03-11 22:02:30+00:00,"Publish Canary

 - now@18.0.0-canary.9"
f49620790cd26adf9c1a88c1d79ddd236d15b5ef,Andy,2020-03-11 21:57:02+00:00,GitHub,2020-03-11 21:57:02+00:00,"[now-cli] Proper error message when `now alias` misses arguments (#3904)

We need to show a proper error message when `now alias` misses arguments."
84065688b5f8fb16c36f94c7915ec36809e1f71b,Steven,2020-03-11 20:15:11+00:00,Steven,2020-03-11 20:15:11+00:00,"Publish Canary

 - now@18.0.0-canary.8"
5a1012fb0fa57e0a1d24ac71eff806ce7b666d45,Steven,2020-03-11 20:11:51+00:00,GitHub,2020-03-11 20:11:51+00:00,"[now-cli] Prevent framework from clearing console in `now dev` (#3903)

When running a framework like Create React App or Gridsome, the console gets cleared. This prevented the user from seeing the message printed from `now dev` which is typically `http://localhost:3000`. Instead the user would see the framework's URL such as `http://localhost:54684`.

See #3497 for an example.

The solution is to change the child process to pipe stdout/stderr. Since most frameworks detect [`process.stdout.isTTY`](https://github.com/facebook/create-react-app/blob/7e6d6cd05f3054723c8b015c813e13761659759e/packages/react-scripts/scripts/start.js#L141-L143) before clearing the console, this will solve the problem. I was also able to intercept stdout to replace the framework's port with the `now dev` port and I think this will also help prevent confusion.

I also had to set `FORCE_COLOR=1` to avoid losing ANSI colors.

- Related to https://github.com/facebook/create-react-app/issues/2495
- Fixes #3497"
4b6143c2933788ebccde2a47d87bb9036a25897b,Nathan Rajlich,2020-03-11 13:03:16+00:00,GitHub,2020-03-11 13:03:16+00:00,"[now-cli] Remove ""Serving all files as static"" message (#3901)"
b6601b0d9a27fbc57c597e4b2370b36fc47a9c8d,Mark Glagola,2020-03-10 18:59:46+00:00,Mark Glagola,2020-03-10 18:59:46+00:00,"Publish Canary

 - now@18.0.0-canary.7"
2870a1dd49470d7dcdc4eb49aa79e610d558d73b,Mark Glagola,2020-03-10 18:35:50+00:00,GitHub,2020-03-10 18:35:50+00:00,Fix setup-domain to use aliasDomain for gets (#3871)
6249f7e2937e0aed2dd5e7b4b7d4dcc8383fa8c1,Steven,2020-03-10 14:50:50+00:00,GitHub,2020-03-10 14:50:50+00:00,"[now-cli] Change suggestion for `rootDirectory` to `./` (#3899)

When we ask the question ""In which directory is your code located?"" we were displaying a prefix  of `cwd/` which is confusing because it seems like you are supposed to type in the current directory. It also doesn't match what is displayed in the Project Settings after it is deployed.

This changes the prefix to `./` so that `rootDirectory` is set to the current directory and the user can type in a subdirectory if they wish such as `./packages/web` for example.

### Before

```
? Set up and deploy ~/Code/app? [Y/n] y
? Which scope do you want to deploy to? Testing
? Link to existing project? [y/N] n
? Whats your projects name? app
? In which directory is your code located? app/
```

### After

```
? Set up and deploy ~/Code/app? [Y/n] y
? Which scope do you want to deploy to? Testing
? Link to existing project? [y/N] n
? Whats your projects name? app
? In which directory is your code located? ./
```"
6f9545e0974bdbf010560993ba86977647752a45,Steven,2020-03-09 20:45:24+00:00,Steven,2020-03-09 20:45:24+00:00,"Publish Canary

 - @now/build-utils@2.1.2-canary.0
 - @now/next@2.4.1-canary.0"
8095ba5cf9d130e7fd83d06e2c0e2d650dea3fba,Steven,2020-03-09 20:41:34+00:00,GitHub,2020-03-09 20:41:34+00:00,"[now-build-utils] Add env var `NPM_ONLY_PRODUCTION` (#3898)

In PR #3847 we fixed a bug that prevented installing `devDependencies` when `NODE_ENV=production` this is typically what users want, but there are some cases where a user may wish to skip installing `devDependencies`. For example, if you have more than 500 MB worth of dependencies.

This PR introduces `NPM_ONLY_PRODUCTION=1` which can be used to skip installing `devDependencies` in these rare cases. It is the equivalent of `npm install --production` or `yarn install --production`. There is also `npm install --only=production` for which this new env var gets its name.

#### References
- https://docs.npmjs.com/cli/install
- https://classic.yarnpkg.com/en/docs/cli/install/#toc-yarn-install-production-true-false"
e02128e5a3dd977d8b69576e515584b094e58cc0,Andy,2020-03-09 13:32:36+00:00,GitHub,2020-03-09 13:32:36+00:00,"[now-next] Consider `buildCommand` from `config` (#3895)

* [now-next] Use build command

* Update packages/now-next/src/index.ts

Co-Authored-By: JJ Kasper <jj@jjsweb.site>

Co-authored-by: JJ Kasper <jj@jjsweb.site>"
2567b8c8b8f68d9a60e47e90d7a680ece0dec141,Paco,2020-03-07 13:40:22+00:00,GitHub,2020-03-07 13:40:22+00:00,[examples] Add ZEIT logo to Next.js example (#3893)
5bfcdec4711941c51cc94613f459721ca824cef5,Andy Bitz,2020-03-07 00:28:48+00:00,Andy Bitz,2020-03-07 00:28:48+00:00,"Publish Canary

 - now@18.0.0-canary.6"
6609686a2b1968ac7bc152b906bda7f6b193f73c,Andy,2020-03-07 00:28:07+00:00,GitHub,2020-03-07 00:28:07+00:00,"[now-cli] Fix `undefined` in error output (#3894)

* [now-cli] Fix undefined in error output

* Revert ""[now-cli] Fix undefined in error output""

This reverts commit afee2eb43f92bac4057d69e3d5cfe6593288401d.

* Add now.url"
709aaf228528f9f42798c81cef6ad7e21cc4466c,Steven,2020-03-06 22:47:04+00:00,Steven,2020-03-06 22:47:04+00:00,"Publish Canary

 - now@18.0.0-canary.5"
6b3908d4dc8dca418e104e9644dc183e569ba390,Steven,2020-03-06 22:43:51+00:00,GitHub,2020-03-06 22:43:51+00:00,"[now-cli] Fix `now dev` env vars in Next.js APIs (#3891)

In Now CLI 17 when Next.js is detected, the `next dev` command is proxied from `now dev`.

This brings Next.js into alignment as other other frameworks such as Gatsby and CRA. But those other frameworks are building static websites, so we were only passing build time env vars. However, Next.js needs runtime env vars for APIs in `/pages/api`.

So the solution is to special case until Next.js can read these files directly. See https://github.com/zeit/next.js/pull/10525

Fixes #3758"
9d19d02a0a430ee40623342dec6a06abdced61a1,m5o,2020-03-06 20:12:44+00:00,GitHub,2020-03-06 20:12:44+00:00,"[tests] Return an empty array if nowJson.builds is empty (#3886)

* return an empty array if nowJson.builds is empty
  * https://github.com/zeit/now/pull/3622#issuecomment-578995344
  * extracted from PR discussion
    * occur after following change https://github.com/zeit/now/pull/3622/commits/a645d4ee882b798c01706f106efd3c5c103ca048
  * kudos to @styfle

/cc @styfle"
533b059947119321dfc20046f87db79808c0eff5,Steven,2020-03-06 18:57:53+00:00,Steven,2020-03-06 18:57:53+00:00,"Publish Canary

 - now@18.0.0-canary.4"
2a7c1dc4e4bca230e1a1cd0ca07c415d3afe476a,Steven,2020-03-06 18:22:24+00:00,GitHub,2020-03-06 18:22:24+00:00,"[now-cli] Print error during install for unsupported Node version (#3869)

Fixes #3866 

### Output
```
> now@18.0.0 preinstall /usr/local/lib/node_modules/now
> node ./scripts/preinstall.js

> Error! Detected unsupported Node.js version.
Expected "">= 10"" but found ""8.10.0"".
Please update to the latest Node.js LTS version to install Now CLI.
```"
07a920ed180f6fffc16a5da13985bfbb170d1f4c,Ana Trajkovska,2020-03-06 12:31:34+00:00,Ana Trajkovska,2020-03-06 12:31:34+00:00,"Publish Canary

 - @now/cgi@1.0.4-canary.0
 - now@18.0.0-canary.3"
db36c874a0ad096e73b22af180b12458d0f89be6,Ana Trajkovska,2020-03-06 12:17:29+00:00,GitHub,2020-03-06 12:17:29+00:00,Add period at the end of cancelation deployment message (#3884)
cc58af74d6e730d36240ddad5e69efb20807843b,Tim Neutkens,2020-03-06 11:46:29+00:00,GitHub,2020-03-06 11:46:29+00:00,"Update Next.js example to latest create-next-app format (#3881)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
1bcb95a9f0f80c89a4d8feb9bf213fbf673e0a9f,kodiakhq[bot],2020-03-05 18:20:11+00:00,GitHub,2020-03-05 18:20:11+00:00,"[now-cgi] Remove unused dependency (#3878)

Removes `@zeit/best` because it is unused and outdated.

We should considered deprecating `@now/cgi` since it only gets [4 downloads per week](https://user-images.githubusercontent.com/229881/75991128-004f0100-5ec4-11ea-9195-bf8019a5a965.png) and has no tests.

I also deleted the nested `yarn.lock` since we only need one at the root for yarn workspaces."
e6a0216faf0a0767e77f3dd8c6c3ec3b74c59360,JJ Kasper,2020-03-05 17:26:21+00:00,JJ Kasper,2020-03-05 17:26:21+00:00,"Publish Canary

 - @now/frameworks@0.0.11-canary.0
 - now@18.0.0-canary.2
 - now-client@8.0.0-canary.2
 - @now/node@1.4.2-canary.1
 - @now/routing-utils@1.7.1-canary.0"
283ef46ac5b4af0dfb55dcc32cfa84328c95972f,kodiakhq[bot],2020-03-05 14:31:14+00:00,GitHub,2020-03-05 14:31:14+00:00,"[now-cli] Bump dot to 1.1.3 (#3877)

Bumps `dot` to the latest version [1.1.3](https://github.com/olado/doT/releases/tag/v1.1.3)."
b4b18575629fdda9c309a420da059ccf21195225,kodiakhq[bot],2020-03-04 23:05:14+00:00,GitHub,2020-03-04 23:05:14+00:00,"[now-routing-utils] Add support for new handle types (#3876)

This adds support for the new internal `handle` types `error` and `rewrite` and also updates the error messages to be more verbose since additional keys are allowed when using `handle: 'error'`. 

This is needed so that we can implement utilize the new handles in `@now/next` for the new custom-routes support"
c46c56bbf9bd5d69c12908e8e8276c0d386f35fe,Matthew Sweeney,2020-03-04 16:50:50+00:00,GitHub,2020-03-04 16:50:50+00:00,"Add Issue Templates (#3873)

This PR adds issue templates for common cases:

- Bug Report - to be submitted through the ZEIT Now support form.
- Feature Request - to be handled as a discussion between the community and ZEIT staff.
- Ask a Question - to be posted in Discussions for all to answer.

In addition to this, the PR also removes the Spectrum link from the README."
62ce2f6cac5418e1a627485c658cda5889ebc073,Nathan Rajlich,2020-03-03 20:38:32+00:00,GitHub,2020-03-03 20:38:32+00:00,"[now-node] Use `url.parse()` for `req.query` helper (#3863)

Given:

```js
module.exports = (req, res) => {
  res.json(req.query)
}
```

Fixes:

```
GET /api/helperparser?a=2&a=1
{""a"":""1""}
```

To be:

```
GET /api/helperparser?a=2&a=1
{""a"":[""2"",""1""]}
```"
631c7befad71a3ca71dd98f8635a8a46d4ec4936,Andy,2020-03-03 13:27:13+00:00,GitHub,2020-03-03 13:27:13+00:00,"[examples] Remove `hasDetectors` from API (#3865)

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
bc18c34d6096e486c209e97eda2fe1c93d138743,Andy,2020-03-03 12:45:27+00:00,GitHub,2020-03-03 12:45:27+00:00,[examples] Remove examples without detectors (#3864)
6b6a1891c1592bc33eded4813076a26436f954a7,Andy Bitz,2020-03-02 21:01:51+00:00,Andy Bitz,2020-03-02 21:01:51+00:00,"Publish Canary

 - now@18.0.0-canary.1
 - now-client@8.0.0-canary.1"
8879b115efbfd59ae9cb518300b55aaced52e4e0,Andy Bitz,2020-03-02 21:01:29+00:00,Andy Bitz,2020-03-02 21:01:29+00:00,[now-cli][now-client] Bump version
99c4c32d6dcc8f4605ec2432b210765d83d65ddd,Andy,2020-03-02 20:59:45+00:00,GitHub,2020-03-02 20:59:45+00:00,"[now-cli][now-client] (Major) Remove legacy code (#3840)

* [now-cli][now-client] Remove legacy code

* Adjust tests

* Adjust more tests

* Remove scale command and --no-scale option from help

* Update packages/now-cli/src/commands/inspect.js

Co-Authored-By: Steven <steven@ceriously.com>

* Remove isBuilds option

* Use Object.entries

* Remove rambda

* Adjust type and remove more unused code

* Use URL instead of url.parse

* Fix linting

* Simplify responseError function

* Remove GNU bash, version 5.0.11(1)-release (x86_64-apple-darwin19.0.0)
These shell commands are defined internally.  Type `help' to see this list.
Type `help name' to find out more about the function `name'.
Use `info bash' to find out more about the shell in general.
Use `man -k' or `info' to find out more about commands not in this list.

A star (*) next to a name means that the command is disabled.

 job_spec [&]                                                                             history [-c] [-d offset] [n] or history -anrw [filename] or history -ps arg [arg...]
 (( expression ))                                                                         if COMMANDS; then COMMANDS; [ elif COMMANDS; then COMMANDS; ]... [ else COMMANDS; ] >
 . filename [arguments]                                                                   jobs [-lnprs] [jobspec ...] or jobs -x command [args]
 :                                                                                        kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
 [ arg... ]                                                                               let arg [arg ...]
 [[ expression ]]                                                                         local [option] name[=value] ...
 alias [-p] [name[=value] ... ]                                                           logout [n]
 bg [job_spec ...]                                                                        mapfile [-d delim] [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callback] [-c q>
 bind [-lpsvPSVX] [-m keymap] [-f filename] [-q name] [-u name] [-r keyseq] [-x keyseq:>  popd [-n] [+N | -N]
 break [n]                                                                                printf [-v var] format [arguments]
 builtin [shell-builtin [arg ...]]                                                        pushd [-n] [+N | -N | dir]
 caller [expr]                                                                            pwd [-LP]
 case WORD in [PATTERN [| PATTERN]...) COMMANDS ;;]... esac                               read [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t t>
 cd [-L|[-P [-e]] [-@]] [dir]                                                             readarray [-d delim] [-n count] [-O origin] [-s count] [-t] [-u fd] [-C callback] [-c>
 command [-pVv] command [arg ...]                                                         readonly [-aAf] [name[=value] ...] or readonly -p
 compgen [-abcdefgjksuv] [-o option] [-A action] [-G globpat] [-W wordlist]  [-F functi>  return [n]
 complete [-abcdefgjksuv] [-pr] [-DEI] [-o option] [-A action] [-G globpat] [-W wordlis>  select NAME [in WORDS ... ;] do COMMANDS; done
 compopt [-o|+o option] [-DEI] [name ...]                                                 set [-abefhkmnptuvxBCHP] [-o option-name] [--] [arg ...]
 continue [n]                                                                             shift [n]
 coproc [NAME] command [redirections]                                                     shopt [-pqsu] [-o] [optname ...]
 declare [-aAfFgilnrtux] [-p] [name[=value] ...]                                          source filename [arguments]
 dirs [-clpv] [+N] [-N]                                                                   suspend [-f]
 disown [-h] [-ar] [jobspec ... | pid ...]                                                test [expr]
 echo [-neE] [arg ...]                                                                    time [-p] pipeline
 enable [-a] [-dnps] [-f filename] [name ...]                                             times
 eval [arg ...]                                                                           trap [-lp] [[arg] signal_spec ...]
 exec [-cl] [-a name] [command [arguments ...]] [redirection ...]                         true
 exit [n]                                                                                 type [-afptP] name [name ...]
 export [-fn] [name[=value] ...] or export -p                                             typeset [-aAfFgilnrtux] [-p] name[=value] ...
 false                                                                                    ulimit [-SHabcdefiklmnpqrstuvxPT] [limit]
 fc [-e ename] [-lnr] [first] [last] or fc -s [pat=rep] [command]                         umask [-p] [-S] [mode]
 fg [job_spec]                                                                            unalias [-a] name [name ...]
 for NAME [in WORDS ... ] ; do COMMANDS; done                                             unset [-f] [-v] [-n] [name ...]
 for (( exp1; exp2; exp3 )); do COMMANDS; done                                            until COMMANDS; do COMMANDS; done
 function name { COMMANDS ; } or name () { COMMANDS ; }                                   variables - Names and meanings of some shell variables
 getopts optstring name [arg]                                                             wait [-fn] [id ...]
 hash [-lr] [-p pathname] [-dt] [name ...]                                                while COMMANDS; do COMMANDS; done
 help [-dms] [pattern ...]                                                                { COMMANDS ; } from subcommand list since it's a global command

* Log errors

Co-authored-by: Steven <steven@ceriously.com>"
857da7774b554f4eabf84bb043f318b68731a491,Steven,2020-02-29 23:44:58+00:00,Steven,2020-02-29 23:44:58+00:00,"Publish Stable

 - @now/build-utils@2.1.1"
3407e6bd1afd01f627a43b742b511ed9be64fadc,Steven,2020-02-29 23:40:49+00:00,Steven,2020-02-29 23:40:49+00:00,"Publish Canary

 - @now/build-utils@2.1.1-canary.0
 - @now/ruby@1.0.3-canary.3"
553ad240f01ba51a685f922f1deff8f018150927,Steven,2020-02-29 23:37:59+00:00,GitHub,2020-02-29 23:37:59+00:00,"[now-build-utils] Fix NODE_ENV assignment (#3862)

Fixes a regression in #3847 which was preventing the user from assigning `NODE_ENV`.

The root cause was that the spread operator (`...`) performs a shallow clone, not a deep clone. So we must perform another spread to clone the user-provided `env` object before deleting `NODE_ENV` during `npm install`."
964ce1bb5a0af59a0037bd8175ee306d6c201d0d,m5o,2020-02-28 23:45:54+00:00,GitHub,2020-02-28 23:45:54+00:00,"[now-ruby] update bundler on ruby rack examples (#3856)

* update bundler on ruby rack examples
  * bundle with latest bundler `v2.1.4`
  * update rack to `v2.2.2`
  :link: https://github.com/zeit/now/pull/3626"
995aa6eddfd3dfc329c38debdd417ff1f500d222,Steven,2020-02-28 22:39:42+00:00,Steven,2020-02-28 22:39:42+00:00,"Publish Canary

 - now@17.0.5-canary.7"
095805e3ad09c277e4aa0a8cc04e0cf672b0c746,Steven,2020-02-28 22:35:02+00:00,GitHub,2020-02-28 22:35:02+00:00,"[tests] Fix missing await (#3860)

Follow up to #3858"
b461ed238ce3de51720b66b111a2172c9d91bbe7,Steven,2020-02-28 22:13:04+00:00,GitHub,2020-02-28 22:13:04+00:00,"[tests] Fix code coverage upload (#3859)

The code coverage report stopped uploading after we switched to GitHub Actions because its not a recognized CI provider.

This PR adds a secret with the code coverage token from [codecov.io](https://codecov.io/gh/zeit/now/settings)."
01e712418928ad04667a4fd4a3491fa8a2648e5e,Steven,2020-02-28 21:21:56+00:00,Steven,2020-02-28 21:21:56+00:00,"Publish Canary

 - now@17.0.5-canary.6
 - @now/ruby@1.0.3-canary.2"
acd3ac2f98138eb5a337e499f0c3d1057d8b9e4f,Steven,2020-02-28 21:20:36+00:00,GitHub,2020-02-28 21:20:36+00:00,"[now-cli] Disable sentry during local development (#3858)

This PR changes the behavior of error reporting and metrics so that developers who build and run Now CLI locally won't accidentally report any metrics. It also prevents errors during CI tests from being reported.

The env vars are only assigned during the publishing step so that the official Now CLI hosted on npm is the only way to report metrics."
b50e4209e1d01150feaf9d87352bbbb2b7b60935,Steven,2020-02-28 19:59:51+00:00,GitHub,2020-02-28 19:59:51+00:00,"[now-cli] Fix ""The specified token is not valid"" (#3857)

Fixes https://sentry.io/organizations/zeithq/issues/1537743736/?project=1323225&referrer=slack"
147b4e870cd3937b9554366e900e1564efd3bf1d,m5o,2020-02-28 17:56:06+00:00,GitHub,2020-02-28 17:56:06+00:00,"[now-ruby] Add test fixture for ActiveSupport gem (#3853)

* add ruby ActiveSupport test fixture
  > ActiveSupport is a Ruby module & a stand-alone component of Rails that includes additional functionality to core Ruby classes, like Array, String & Numeric.
  :link: https://guides.rubyonrails.org/active_support_core_extensions.html

* add `Date.current + 10.years` calculation example"
df8327d14c527370c3d975cd3716ba16c5fa0d57,Steven,2020-02-28 17:53:40+00:00,GitHub,2020-02-28 17:53:40+00:00,"[docs] Update readme (#3855)

Updates the readme to mention the Git Integration and fixes some misinformation."
fb4d4b59532806439d743654ee085df694e068be,Joe Haddad,2020-02-28 15:19:47+00:00,Joe Haddad,2020-02-28 15:19:47+00:00,"Publish Stable

 - @now/build-utils@2.1.0
 - @now/next@2.4.0
 - @now/routing-utils@1.7.0"
de3701c0458ce3b66dac3df2ab3087adf0e1fd68,Joe Haddad,2020-02-28 15:18:46+00:00,Joe Haddad,2020-02-28 15:18:46+00:00,"Publish Canary

 - @now/ruby@1.0.3-canary.1"
9f9b7934cb56a8b83d7af575523f5e7d917a49a9,m5o,2020-02-28 14:34:47+00:00,GitHub,2020-02-28 14:34:47+00:00,"[now-ruby] Fix ruby test indentation (#3854)

* fix ruby indentation example
  *  indent with 2 spaces for consistency"
bcded1dd172a199073aecfb02aeacca178af37aa,Steven,2020-02-28 13:57:36+00:00,Steven,2020-02-28 13:57:36+00:00,"Publish Canary

 - @now/build-utils@2.0.1-canary.3
 - @now/next@2.3.19-canary.2
 - @now/python@1.1.5-canary.1"
8503af75baf94632500d20714c40bf2c623349f9,Steven,2020-02-28 13:35:27+00:00,Steven,2020-02-28 13:35:27+00:00,[now-python] Fix space encoding
158a50f1aa5a3f7ea21378b6e624fe3e21562159,Joe Haddad,2020-02-28 03:00:09+00:00,GitHub,2020-02-28 03:00:09+00:00,"[now-next] Allow Immutable Fallback Artifact (#3850)

* [now-next] Allow Immutable Fallback Artifact

* trigger"
61da552dd6c343b9c42c273b08cca20f84c88e08,Steven,2020-02-27 21:47:27+00:00,GitHub,2020-02-27 21:47:27+00:00,"[now-build-utils] Add test for `NODE_ENV` behavior (#3852)

This PR adds a test for #3847."
fa838eecac80fe0c4f54727c5830ca9da7f05460,Steven,2020-02-27 20:52:36+00:00,Steven,2020-02-27 20:52:36+00:00,"Publish Canary

 - @now/go@1.0.5-canary.0
 - @now/next@2.3.19-canary.1
 - @now/node@1.4.2-canary.0
 - @now/python@1.1.5-canary.0
 - @now/ruby@1.0.3-canary.0
 - @now/static-build@0.14.13-canary.1"
71b6a58783f13150d8905488325c0e307cfc2719,Steven,2020-02-27 20:48:03+00:00,GitHub,2020-02-27 20:48:03+00:00,"[all] Exclude `@now/build-utils` in bundled builder to fix tests (#3848)

This fixes a bug in our `@now/build-utils` tests that pair the current build-utils with a stable builder. Since ncc was bundling `@now/build-utils`, we weren't able to configure a different version and these tests were not actually testing the correct version of build-utils.

A nice side-effect is that each builder will be about 50% smaller (compared by measuring `dist`)."
22dd78e286c910a58a7449f55699d2c25446d7f2,Joe Haddad,2020-02-27 17:35:52+00:00,Joe Haddad,2020-02-27 17:35:52+00:00,"Publish Canary

 - @now/build-utils@2.0.1-canary.2
 - @now/next@2.3.19-canary.0"
e63fcf2630c9b816f427dec2036a7ee39aabe30d,Joe Haddad,2020-02-27 17:33:31+00:00,GitHub,2020-02-27 17:33:31+00:00,"[now-next] Add Support for Prerender v2 (#3845)

* [now-next] Add Support for Prerender v2

* Copy test suite

* Test that fallback doesn't work for fallback: false

* record omitted lambdas

* Improve test case

* improve omitted routes logic

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
98e1553c2eb0573f659ccc62314d4a1bafd3ec19,Steven,2020-02-27 17:14:06+00:00,GitHub,2020-02-27 17:14:06+00:00,"[now-build-utils] Install all deps regardless of NODE_ENV (#3847)

Some build utilities and SSG Frameworks instruct users to set `NODE_ENV=production` which typically means updating `now.json` to the following:

```json
{
  ""build"": {
    ""env"": {
      ""NODE_ENV"": ""production""
    }
  }
}
```

The problem is that this environment variable is assigned during `npm install` or `yarn install` which is the equivalent of running install with the `--production` flag. This flag prevents `devDependencies` from installing. This is almost never what the user intends so they have to remove `now.json` and instead updating their build script to `NODE_ENV=production yarn build`.

This PR improves the experience by deleting `NODE_ENV` during the install step."
4dc506f17a3fce61ef954796b55c2e8bfd3d5bf6,Steven,2020-02-27 13:05:05+00:00,Steven,2020-02-27 13:05:05+00:00,"Publish Canary

 - @now/build-utils@2.0.1-canary.1
 - now@17.0.5-canary.5
 - @now/routing-utils@1.6.1-canary.1"
3b396f29e91ced41d730a3ec1b185784ca40f205,Steven,2020-02-26 23:30:50+00:00,GitHub,2020-02-26 23:30:50+00:00,"[now-build-utils][now-routing-utils] Fix appendRoutesToPhase() when input is null (#3843)

This PR fixes `@now/routing-utils` when the input routes are null. It used to return the empty array but now it will still append.

I also added many more tests to `@now/build-utils` when `featureHandleMiss: true` and refactored the code a bit to make dynamic routes and api routes a little more clear."
1f128e69e6dd902e101afb5685ec4256323836ca,JJ Kasper,2020-02-26 21:56:41+00:00,JJ Kasper,2020-02-26 21:56:41+00:00,"Publish Stable

 - @now/next@2.3.18"
f1487c92cbfe12a095038b3e98ea4d6c47044978,JJ Kasper,2020-02-26 21:51:27+00:00,JJ Kasper,2020-02-26 21:51:27+00:00,"Publish Canary

 - now@17.0.5-canary.4
 - @now/next@2.3.18-canary.0"
45066cdf4483288c914a141972aa8d4e41e0d2e4,JJ Kasper,2020-02-26 21:47:51+00:00,GitHub,2020-02-26 21:47:51+00:00,"[now-next] Add /_next/data routes for getServerProps pages (#3771)

This adds the `/_next/data` routes for `getServerProps` pages if they exist

x-ref: https://github.com/zeit/next.js/pull/10077
x-ref: https://github.com/zeit/next.js/pull/10622"
7dde9c8207ab2bccbb0750cf9709f10aa0999e0a,Ana Trajkovska,2020-02-26 07:00:09+00:00,Ana Trajkovska,2020-02-26 07:00:09+00:00,"Publish Canary

 - now@17.0.5-canary.3
 - now-client@7.0.1-canary.1"
fd964f825d5a65e02b49bbd4fb65bf295cbc12d9,Ana Trajkovska,2020-02-26 06:21:27+00:00,GitHub,2020-02-26 06:21:27+00:00,"Handle deployment cancellation (#3823)

Co-authored-by: Max <8418866+rdev@users.noreply.github.com>"
1656c9874ed42a1307d2cddf5e15eff5c73e6628,Steven,2020-02-25 22:32:37+00:00,Steven,2020-02-25 22:32:37+00:00,"Publish Canary

 - @now/build-utils@2.0.1-canary.0
 - now@17.0.5-canary.2
 - @now/routing-utils@1.6.1-canary.0"
d999a3b2ad44af7c76d89d1f0de57bd7bd757ed9,Steven,2020-02-25 22:30:36+00:00,GitHub,2020-02-25 22:30:36+00:00,"[now-routing-utils][now-build-utils] Refactor zero-config rewrites (#3832)

This PR refactors the rewrites (the dynamic routes as well as the route that prevents directory listing for zero config deployments) so they are not in the `handle: miss` phase.

This is necessary because the behavior of `handle: miss` will change in an upcoming release.

The solution is to separate these into `rewriteRoutes` that can then be merged properly with the user's routes. They will be appended to the `handle: filesystem` phase (or add the phase if it doesn't exist)."
cfb7c9e6322b6e3cc0271610c1ef772c8eba9bdc,Joe Haddad,2020-02-25 20:19:05+00:00,Joe Haddad,2020-02-25 20:19:05+00:00,"Publish Stable

 - @now/next@2.3.17"
06e8472cf773ae2f3bc0b52c98ec9d0edfba32a6,Joe Haddad,2020-02-25 19:57:42+00:00,Joe Haddad,2020-02-25 19:57:42+00:00,"Publish Canary

 - now@17.0.5-canary.1
 - @now/next@2.3.17-canary.0
 - @now/static-build@0.14.13-canary.0"
92404135d8d5dede0aa9c6102a61a0976f252fcc,Joe Haddad,2020-02-25 19:51:07+00:00,GitHub,2020-02-25 19:51:07+00:00,"[now-next] Always Emit Prerenders (#3837)

This ensures we always emit Prerender objects for bypass tokens."
8b5cc23d7c3a098323e3b972153693400cfc88ce,Nathan Rajlich,2020-02-25 01:19:22+00:00,GitHub,2020-02-25 01:19:22+00:00,"[now-cli] Remove v1 ""static build"" integration tests (#3833)

* [now-cli] Remove v1 ""static build"" integration tests

These are the last remaining v1 static type deployments being created.

* Remove from `integration.js` as well

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
e10b42bfdce7c770312d97791e676acaa3bcda60,Shu Uesugi,2020-02-25 00:35:12+00:00,GitHub,2020-02-25 00:35:12+00:00,"Rename zeit.co/new  zeit.co/import (#3834)

* zeit.co/new  zeit.co/import

* Update docs URL"
36f7ec48360524e5ab4422217bf1a4d6b4b70da3,M. Heide,2020-02-24 19:53:15+00:00,GitHub,2020-02-24 19:53:15+00:00,"[examples] Fix Go build if Windows Git is configured to checkout CRLF line endings (#3821)

Fixes #3820"
f89d1c463e873fd5ee015e934118c051e170cb03,Joe Haddad,2020-02-24 19:22:58+00:00,GitHub,2020-02-24 19:22:58+00:00,"Remove Backticks from URL Output (#3830)

![image](https://user-images.githubusercontent.com/616428/75176976-44434880-5703-11ea-8ca5-cb49e4a921cf.png)

![image](https://user-images.githubusercontent.com/616428/75176982-473e3900-5703-11ea-90f6-b31844a486ce.png)"
5dc652eba93e8aedd586c387eec16d2add3b9f69,Steven,2020-02-24 17:53:13+00:00,Steven,2020-02-24 17:53:13+00:00,"Publish Canary

 - now@17.0.5-canary.0
 - now-client@7.0.1-canary.0"
821b2bd50bb18717e127462d59339d39b75b9f4b,Steven,2020-02-24 17:45:10+00:00,GitHub,2020-02-24 17:45:10+00:00,"[now-client] Fix root directory with trailing slash (#3827)

There was a bug in `now-client` when deploying a directory that ends with a slash, for example `/Users/styfle/Code/myapp/` instead of the usual `/Users/styfle/Code/myapp`.

This never affected `now-cli` until we added support for defining the `rootDirectory` which allows the user to type whatever they wish in the Project Settings.

The fix is to use `path.relative()` instead of substring."
8d5f6f1fa391969e650070f9a3a63c293d0f5858,Steven,2020-02-21 23:09:20+00:00,Steven,2020-02-21 23:09:20+00:00,"Publish Stable

 - @now/frameworks@0.0.10
 - @now/build-utils@2.0.0
 - now@17.0.4
 - @now/go@1.0.4
 - @now/next@2.3.16
 - @now/python@1.1.4
 - @now/routing-utils@1.6.0"
617f610c0744c1068f74d98f517f2cbd35441eab,Steven,2020-02-21 23:00:27+00:00,GitHub,2020-02-21 23:00:27+00:00,"[tests] Update cancel workflow (#3817)

Update to latest version, [0.2.0](https://github.com/styfle/cancel-workflow-action/releases/tag/0.2.0), which will fix cancelling on push.

Also this action is available in the [marketplace](https://github.com/marketplace/actions/cancel-workflow-action)."
3229ba0106353e6df9944e9dc970311cbe07a388,Steven,2020-02-21 22:27:20+00:00,Steven,2020-02-21 22:27:20+00:00,"Publish Canary

 - @now/go@1.0.4-canary.3
 - @now/python@1.1.4-canary.1"
d16a6e4716a538be9a431b1ca05c2f273e818c8e,Steven,2020-02-21 22:25:44+00:00,GitHub,2020-02-21 22:25:44+00:00,"[now-go] Fix path segments in `now dev` (#3816)

The combination of file renaming and brackets doesn't work well for go build so we need to add the file extension back before building.

I also simplified the `.now/cache/folder` logic because it should be the same whether `builds` is defined or not (aka zero config)."
4e5156fb0bcc747356aa3e14a77c0ae93ff7e3aa,Steven,2020-02-21 20:45:41+00:00,GitHub,2020-02-21 20:45:41+00:00,"[now-python] Fix path segments in `now dev` (#3815)

The combination of file renaming and brackets doesn't work well for python imports so we need too add the file extension back before importing the python module.

I also simplified the `.now/cache/folder` logic because it should be the same whether `builds` is defined or not (aka zero config)."
3c013cc36b4b8f92a42ebe0ef30f86ac911e7c03,Joe Haddad,2020-02-21 16:06:44+00:00,Joe Haddad,2020-02-21 16:06:44+00:00,"Publish Canary

 - @now/build-utils@2.0.0-canary.2
 - @now/next@2.3.16-canary.1"
1ed83135beb2a3f82afd5cd457e0d8422d84b226,Joe Haddad,2020-02-21 16:05:22+00:00,GitHub,2020-02-21 16:05:22+00:00,"Add Bypass Token to Next.js Builder (#3811)

This pull request adds the bypass token to returned `Prerender` output objects.

There's no tests as this doesn't exist in production yet."
0e71ff2df1601fb4c7b697f57848c78d6bc41507,Joe Haddad,2020-02-20 01:59:45+00:00,GitHub,2020-02-20 01:59:45+00:00,"[now-build-utils] Add `bypassToken` to `Prerender` for iSSG (#3810)

This pull request adds a new `bypassToken` field to the `Prerender` output.

The field is required to be at least 128 bits for security reasons!"
d8e98ee476efb8e85d85b23bb8fcbaa374507169,JJ Kasper,2020-02-19 22:23:25+00:00,JJ Kasper,2020-02-19 22:23:25+00:00,"Publish Canary

 - @now/next@2.3.16-canary.0
 - @now/routing-utils@1.5.4-canary.0"
1bc1e8a9b13a9fda35ca4ff1c690fadc54b243b0,JJ Kasper,2020-02-19 22:13:36+00:00,GitHub,2020-02-19 22:13:36+00:00,"[now-routing-utils] Update to not pass used segments in redirect query (#3809)

This updates to not pass segments already used in a redirect's destination query since these values are most likely unwanted and can still be manually added if desired. This change does not affect rewrites and we still pass through all segments in the query"
274fdeb49a47d5466657c380886ceba5217c1df4,JJ Kasper,2020-02-19 21:02:21+00:00,JJ Kasper,2020-02-19 21:02:21+00:00,"Publish Stable

 - @now/next@2.3.15"
d15c90b42faaac2a622170add2b15df8db74ee0e,JJ Kasper,2020-02-19 20:57:20+00:00,JJ Kasper,2020-02-19 20:57:20+00:00,"Publish Canary

 - now@17.0.4-canary.3
 - @now/next@2.3.15-canary.0"
5be2917c471cfebdedd5da4f3496378d151901d5,JJ Kasper,2020-02-19 20:55:26+00:00,GitHub,2020-02-19 20:55:26+00:00,"[now-next] Update 404 handling for pages/404 (#3697)

This adds handling for treating `pages/404.js` as the custom error page in Next.js to allow for more flexible auto static optimization on the 404 page. This makes sure we handle `pages/404.js` being a lambda due to `_app` having `getInitialProps` and also makes sure that visiting `/404` doesn't respond with a 200 status code

~We can add tests for this behavior after the below PR has been released in a canary of Next.js~

x-ref: https://github.com/zeit/next.js/pull/10329
x-ref: https://github.com/zeit/next.js/pull/10593"
5f08b2454688b01e38c03e3b76eb131e0be99a54,dependabot[bot],2020-02-19 20:19:49+00:00,GitHub,2020-02-19 20:19:49+00:00,"Bump codecov from 3.1.0 to 3.6.5 (#3807)

Bumps [codecov](https://github.com/codecov/codecov-node) from 3.1.0 to 3.6.5.
<details>
<summary>Release notes</summary>

*Sourced from [codecov's releases](https://github.com/codecov/codecov-node/releases).*

> ## v3.6.4
> Fix for Cirrus CI
> 
> ## v3.6.3
> AWS Codebuild fixes + package updates
> 
> ## v3.6.2
> command line args sanitised
> 
> ## v3.6.1
> Fix for Semaphore
> 
> ## v3.6.0
> AWS CodeBuild
> Semaphore v2
> 
> ## v3.3.0
> Added pipe `--pipe`, `-l`
</details>
<details>
<summary>Commits</summary>

- See full diff in [compare view](https://github.com/codecov/codecov-node/commits)
</details>
<details>
<summary>Maintainer changes</summary>

This version was pushed to npm by [drazisil](https://www.npmjs.com/~drazisil), a new releaser for codecov since your current version.
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=codecov&package-manager=npm_and_yarn&previous-version=3.1.0&new-version=3.6.5)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/zeit/now/network/alerts).

</details>"
cc3026ffcb92141921dbc7d7e952c1f8c2cb3c1f,Steven,2020-02-18 22:57:17+00:00,GitHub,2020-02-18 22:57:17+00:00,"[tests] Fix builder debug flag (#3805)

When testing, you can set `NOW_BUILDER_DEBUG=1` to print verbose logs from builders.

However, this was causing some tests to fail that depended on a build environment variable.

This PR fixes the assignment so that it preserves the environment variables from the tests by adding `NOW_BUILDER_DEBUG` instead of replacing."
8cb6e56679f43808211366a117475cfd88f6ce49,JJ Kasper,2020-02-17 20:28:07+00:00,JJ Kasper,2020-02-17 20:28:07+00:00,"Publish Stable

 - @now/next@2.3.14"
7da5ff4b1d6de345be32e1d5cab40269764ca93f,JJ Kasper,2020-02-17 17:45:53+00:00,JJ Kasper,2020-02-17 17:45:53+00:00,"Publish Canary

 - now@17.0.4-canary.2
 - @now/next@2.3.14-canary.1"
5d1069d464799b06ba972c8ff9089fa61c3bc6f3,JJ Kasper,2020-02-17 17:42:51+00:00,GitHub,2020-02-17 17:42:51+00:00,"[now-next] Make sure to 404 and clear cache header for invalid _next requests (#3801)

This handles an edge case where deeply nested dynamic routes were handling `_next` 404s that were cached forever since the immutable header we set isn't cleared after not matching on the filesystem.

I updated our cache-header fixture to check for this edge case also to make sure we don't regress on this"
6e1a72f557a5abcae1e754930c761dd4e568d6b4,Andy,2020-02-17 13:44:35+00:00,GitHub,2020-02-17 13:44:35+00:00,"[examples] Use Full URL for Logos (#3800)

Use Full URL for Logos

[PRODUCT-1193]

[PRODUCT-1193]: https://zeit.atlassian.net/browse/PRODUCT-1193"
6f97a2cc7a63e93fd0440e250fcc068915447abb,dependabot[bot],2020-02-15 01:56:34+00:00,GitHub,2020-02-15 01:56:34+00:00,"Bump yarn from 1.17.3 to 1.22.0 (#3796)

Bumps [yarn](https://github.com/yarnpkg/yarn) from 1.17.3 to 1.22.0.
<details>
<summary>Changelog</summary>

*Sourced from [yarn's changelog](https://github.com/yarnpkg/yarn/blob/master/CHANGELOG.md).*

> # Changelog
> 
> Please add one entry in this file for each change in Yarn's behavior. Use the same format for all entries, including the third-person verb. Make sure you don't add more than one line of text to keep it clean. Thanks!
> 
> ## Master
> 
> - Passes arguments following `--` when running a workspace script (`yarn workspace pkg run command -- arg`)
> 
>   [#7776](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7776) - [**Jeff Valore**](https://twitter.com/rally25rs)
> 
> - Prints workspace names with `yarn workspaces` (silence with `-s`)
> 
>   [#7722](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7722) - [**Orta**](https://twitter.com/orta)
> 
> - Implements `yarn init --install <version>`
> 
>   [#7723](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7723) - [**Mal Nison**](https://twitter.com/arcanis)
>   
> - Implements `yarn init -2`
> 
>   [#7862](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7862) - [**Mal Nison**](https://twitter.com/arcanis)
> 
> - Implements `yarn set version <version>` as an alias for `policies set-version`
> 
>   [#7862](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7862) - [**Mal Nison**](https://twitter.com/arcanis)
> 
> - Fixes an issue where the archive paths were incorrectly sanitized
> 
>   [#7831](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7831) - [**Mal Nison**](https://twitter.com/arcanis)
> 
> - Allows some dots in binary names again
> 
>   [#7811](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7811) - [**Valery Bugakov**](https://github.com/valerybugakov)
>   
> - Better error handling on `yarn set version`
> 
>   [#7848](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7848) - [**Nick Olinger**](https://github.com/olingern)
> 
> ## 1.19.2
> 
> - Folders like `.cache` won't be pruned from the `node_modules` after each install.
> 
>   [#7699](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7699) - [**Mal Nison**](https://twitter.com/arcanis)
> 
> - Correctly installs workspace child dependencies when workspace child not symlinked to root.
> 
>   [#7289](https://github-redirect.dependabot.com/yarnpkg/yarn/pull/7289) - [**Daniel Tschinder**](https://github.com/danez)
> 
> - Makes running scripts with Plug'n Play possible on node 13.
> 
></tr></table> ... (truncated)
</details>
<details>
<summary>Commits</summary>

- [`eee67d0`](https://github.com/yarnpkg/yarn/commit/eee67d02ed09172d5360df0fa0b9c73e23449818) v1.22.0
- [`6971622`](https://github.com/yarnpkg/yarn/commit/69716228e9ee3592eda9c8fa142d59fec511e97c) Update CHANGELOG.md
- [`0e7133c`](https://github.com/yarnpkg/yarn/commit/0e7133ca28618513503b4e1d9063f1c18ea318e5) Fixes arbitrary file write on fetch ([#7831](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7831))
- [`fa613f3`](https://github.com/yarnpkg/yarn/commit/fa613f3a71756a06a24d6c93c6b1fa7231eccd9a) handle failed policy set-version ([#7848](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7848))
- [`f381c5f`](https://github.com/yarnpkg/yarn/commit/f381c5f0ce85a96dc1cba8e4883819ee878c949f) Implements set version ([#7862](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7862))
- [`d2c3a48`](https://github.com/yarnpkg/yarn/commit/d2c3a485e0c52a0bf855611e7065ca533ecf4f2d) Configure bug report issue template ([#7844](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7844))
- [`af4c205`](https://github.com/yarnpkg/yarn/commit/af4c2056a341b7d14ff14b43840f7cbc8a8d2d90) Allow dots in bin names ([#7811](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7811))
- [`1b334e6`](https://github.com/yarnpkg/yarn/commit/1b334e687baa75c84440def211cca0636879d14d) fix(workspaces): Pass args following ""--"" when running workspace scripts ([#7786](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7786))
- [`2c8e97e`](https://github.com/yarnpkg/yarn/commit/2c8e97eaf3047be92c99114b7f08aee044329a05) Fix suggestions for CLI ([#7808](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7808))
- [`039bafd`](https://github.com/yarnpkg/yarn/commit/039bafd74b7b1a88a53a54f8fa6fa872615e90e7) Fixes bin overwrites ([#7755](https://github-redirect.dependabot.com/yarnpkg/yarn/issues/7755))
- Additional commits viewable in [compare view](https://github.com/yarnpkg/yarn/compare/v1.17.3...v1.22.0)
</details>
<details>
<summary>Maintainer changes</summary>

This version was pushed to npm by [daniel15](https://www.npmjs.com/~daniel15), a new releaser for yarn since your current version.
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=yarn&package-manager=npm_and_yarn&previous-version=1.17.3&new-version=1.22.0)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/zeit/now/network/alerts).

</details>"
6e402bffc3d7452fd6e89cf3619bd983aeab1546,Steven,2020-02-14 20:05:00+00:00,Steven,2020-02-14 20:05:00+00:00,"Publish Canary

 - now@17.0.4-canary.1
 - @now/go@1.0.4-canary.2
 - @now/next@2.3.14-canary.0"
e41d0f8e68eca10e1173e96555d24779e4829004,Steven,2020-02-14 19:58:44+00:00,GitHub,2020-02-14 19:58:44+00:00,"[now-go] Fix `/api/go.sum` detection (#3795)

Follow up to #3793 

The `go.mod` and `go.sum` file must both be moved."
1a046744f24551cbd4fc5c0ed528255016935fb9,Steven,2020-02-14 17:32:20+00:00,GitHub,2020-02-14 17:32:20+00:00,"[now-go] Add support for root `go.mod` in api directory (#3793)

Some users wish to put all Go related code in the `/api` directory and the root is reserved for a frontend framework.

This PR adds support for `/api/go.mod` which will act the same as `/go.mod` by moving the file to the root."
a9bf011f2c14b72224ca1bfc63841452cfe876e3,Andy,2020-02-13 23:30:58+00:00,GitHub,2020-02-13 23:30:58+00:00,"[api] Add rewrite to frameworks API (#3794)

* [api] Add rewrite to frameworks API

* Adjust now.json

* Change output file"
60c76b32902a73efaff75368e266ae9efac71eb0,JJ Kasper,2020-02-13 01:06:55+00:00,GitHub,2020-02-13 01:06:55+00:00,"[now-next] Add support for using the fallback file for dynamic SSG pages (#3752)

This adds support for using the fallback file for dynamic (lazy) SSG pages to allow showing a loading state while the cache is populated with data. We can add tests for this behavior once the below referenced PR is shipped on canary

x-ref: https://github.com/zeit/next.js/pull/10424

~Update: added tests now that fallback support has landed in Next.js although it appears `now-proxy` might need to be updated to revalidate the fallback correctly since the initial fallback is always being shown for lazy SSG pages with these changes~

Looks like this is working properly in `now-proxy` and we were overriding the prerender output with the static page output, thanks @juancampa for helping investigate! "
c7ff1e70440547b21f9152667ae836ef61588787,Steven,2020-02-12 15:17:54+00:00,GitHub,2020-02-12 15:17:54+00:00,"[now-cli] Update ZEIT Logo (#3790)

This PR updates the logo to match https://zeit.co/home"
e2deaef54ac99e3d012374924dd7da5cfe22af72,Andy Bitz,2020-02-12 13:46:11+00:00,Andy Bitz,2020-02-12 13:46:11+00:00,"Publish Canary

 - @now/frameworks@0.0.10-canary.0"
b2c7386c83ebe35058779e0b71bf2b99d6064074,Andy,2020-02-12 13:34:09+00:00,GitHub,2020-02-12 13:34:09+00:00,[frameworks] Adjust Next.js build command placeholder (#3788)
3dce84c3cf6467aac9c60c0e1d110b4a047efec0,Steven,2020-02-11 21:46:21+00:00,Steven,2020-02-11 21:46:21+00:00,"Publish Canary

 - @now/go@1.0.4-canary.1"
443b1ac15861249c5a04c86a53ca702eae4a0260,Steven,2020-02-11 21:41:57+00:00,GitHub,2020-02-11 21:41:57+00:00,"[now-go] Fix path segments with square brackets (#3782)

Previously, `@now/go` would fail when using [Path Segments](https://zeit.co/docs/v2/serverless-functions/introduction#path-segments) since `go build` [doesn't support](https://stackoverflow.com/q/60140859/266535) files that begin with square bracket.

This PR changes the build logic so that the entrypoint file is renamed if if begins with a square bracket.

The output file is not renamed because v3 builders can't rename outputs which works great for this feature."
be3dca3d941387e0ff93447aa71393feadb85e48,Andy Bitz,2020-02-11 15:50:13+00:00,Andy Bitz,2020-02-11 15:50:13+00:00,"Publish Canary

 - @now/build-utils@2.0.0-canary.1
 - now@17.0.4-canary.0
 - @now/go@1.0.4-canary.0
 - @now/python@1.1.4-canary.0"
cb135e4329d5ded7b94d2a4209d67ae166a27c5a,Andy Bitz,2020-02-11 15:49:20+00:00,Andy Bitz,2020-02-11 15:50:01+00:00,[now-build-utils] Bump version
55c73b68bb03396f41849426b52e82bc8be0520d,Andy,2020-02-11 15:47:39+00:00,GitHub,2020-02-11 15:47:39+00:00,"[now-build-utils][now-cli] Refactor builds and routes detection (#3784)

* [now-build-utils] Refactor detect builds

* Refactor routes detection

* [now-cli] Adjust `now dev`

* Adjust tests

* Adjust integrations test

* Remove unused file

* Replace reducw with for-loop

* Add cache for absolute paths

* Filter while looping

* Add fallback for entrypoint with buildCommand"
eb793ba13938dc25fbc780495a7f4086c81ca710,Steven,2020-02-11 01:16:14+00:00,GitHub,2020-02-11 01:16:14+00:00,"[tests] Add windows to CI unit tests (#3727)

This adds initial support for Windows in GitHub Actions CI tests.

There is still work to be done to prevent certain tests from hanging in CI so those are skipped for now."
00908e8ebedc8c6499666b91831323bd51a4329b,Steven,2020-02-10 21:01:31+00:00,GitHub,2020-02-10 21:01:31+00:00,"[now-python] Fix path segments with square brackets (#3781)

Previously, python would fail when using [Path Segments](https://zeit.co/docs/v2/serverless-functions/introduction#path-segments) as seen in #3729.

This PR changes the import logic so that the entrypoint file is [imported as a relative file path](https://stackoverflow.com/a/67692/266535) instead of by module name."
5ce7ff86a47e6c94939539f0a39c4e888b141ee0,Leo Lamprecht,2020-02-10 17:34:00+00:00,GitHub,2020-02-10 17:34:00+00:00,"Minor tweaks for CONTRIBUTING.md file (#3778)

* Minor tweaks for CONTRIBUTING.md file

* Update CONTRIBUTING.md

* Update CONTRIBUTING.md"
4b34ee29934f80a3716ec01dd7444f1a4e2753d5,Steven,2020-02-10 15:31:52+00:00,GitHub,2020-02-10 15:31:52+00:00,"[examples] Remove outdated jekyll build section from README (#3780)

We used to require a `package.json` but we have since introduced [Advanced Project Settings](https://zeit.co/blog/advanced-project-settings) which will ask the user for a build command during the first deploy."
646bd288ba84bc29603132ef21246fdac668739d,Andi,2020-02-08 01:47:47+00:00,GitHub,2020-02-08 01:47:47+00:00,"[now-go] Update go to version 1.13.7 (#3750)

Updates go to the latest version 1.13.7 (https://golang.org/doc/devel/release.html#go1.13). This allows users to use the new error functionality that was introduced in go 1.13 (https://blog.golang.org/go1.13-errors) and also includes a couple of security fixes.

Looking at the last PR that updated the version (https://github.com/zeit/now-builders/pull/247/files) this should be as simple as updating the version number.

P.S. I tried to follow the contribution guidelines, but `yarn lint` fails with `exit code 1`/`295 problems (33 errors, 262 warnings)` and `yarn test` returns `error Command ""test"" not found` on master. But `yarn test-unit` shows no errors."
8aba6f1ff895cd60e45d9ac71d9d3fa29a55108f,Steven,2020-02-08 01:01:17+00:00,Steven,2020-02-08 01:01:17+00:00,"Publish Stable

 - now@17.0.3"
35e5e328aa467941196f1c692fda147f8bb7c7ed,Steven,2020-02-08 00:18:47+00:00,Steven,2020-02-08 00:18:47+00:00,"Publish Canary

 - now@17.0.3-canary.1"
bdd4953d62421d9993cd670a28a28403fdf9293e,Andy,2020-02-08 00:04:35+00:00,GitHub,2020-02-08 00:04:34+00:00,"[now-cli] Consider root directory for now.json (#3764)

* [now-cli] Consider root directory for now.json

* Adjust message check in test

* Fallback if config does not exist as well

* Assign localConfig later and add debug

* Prefere now.json from root directory

* Comment

* Adjust test and add warning"
e938b298e20fcf26b2f8505577f7c3b20e8a69a5,Steven,2020-02-08 00:03:56+00:00,GitHub,2020-02-08 00:03:56+00:00,"[now-cli] Fix port assignment for `now dev` (#3769)

This fixes a regression from #3749 where the PORT env var was removed. This is necessary so frameworks like create-react-app and gatsby can proxy to `now dev`.

Fixes #3761"
b67f324e101752eda22bd1e1ed8f40635461b07d,Andy,2020-02-07 23:29:11+00:00,GitHub,2020-02-07 23:29:11+00:00,[api] Add `hasDetectors` property (#3770)
1dfa286af52c168da32e5ad223c0640cbb79e398,Andy Bitz,2020-02-07 20:14:50+00:00,Andy Bitz,2020-02-07 20:14:50+00:00,"Publish Canary

 - now@17.0.3-canary.0"
d4391bd4cc2d13f5353a8882341de1d85b4046cf,Andy,2020-02-07 20:14:11+00:00,GitHub,2020-02-07 20:14:11+00:00,"[now-cli] Fix chalk template for legacy (#3768)

* [now-cli] Fix chalk template for legacy

* Update packages/now-cli/src/commands/deploy/legacy.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

Co-authored-by: Nathan Rajlich <n@n8.io>"
53eb71f26dbfadfacc7f10fa7c615fd7798bbc06,luc,2020-02-06 18:18:35+00:00,luc,2020-02-06 18:18:35+00:00,"Publish Stable

 - now@17.0.2
 - @now/routing-utils@1.5.3"
92ffd654b5abdea3ed7697892c1932a8a909ef1f,luc,2020-02-06 17:53:36+00:00,luc,2020-02-06 17:53:36+00:00,"Publish Canary

 - now@17.0.2-canary.1"
36b83f1606769778dca2e64e20d3d68dc600a4de,Luc,2020-02-06 17:47:39+00:00,GitHub,2020-02-06 17:47:39+00:00,"[now-cli] Use `npx` or `yarn` to execute dev command (#3760)

1. Use bundled yarn to run `yarn bin`
2. Skip `yarn bin` if `npx` is used"
7a79f620c07a4c826b1879c0f32a14ecfed7689f,Steven,2020-02-06 14:35:15+00:00,GitHub,2020-02-06 14:35:15+00:00,"[tests] Fix changelog script (#3751)

Previously, the changelog script was looking for the last ""Publish Stable"" commit, but it should really be looking for the last Stable release of Now CLI.

This PR updates the changelog script so that it fetches the latest GH Release (which should be Now CLI) and then compares that to the HEAD."
f3b286ecf3d02132c364cc9af4a741f881fce6f6,Steven,2020-02-06 14:12:19+00:00,Steven,2020-02-06 14:12:19+00:00,"Publish Canary

 - now@17.0.2-canary.0
 - @now/routing-utils@1.5.3-canary.0"
adf31c3fcc0cdf225f350d7b5d09bd8f90f7fec4,Steven,2020-02-06 14:07:46+00:00,GitHub,2020-02-06 14:07:46+00:00,"[now-routing-utils] Change behavior of `trailingSlash: true` redirects (#3745)

This PR changes the behavior of `trailingSlash: true` after we received feedback that files should not be redirected with a trailing slash. This matches the behavior of `serve` and `serve-handler`.

### Examples 
* `/index.html` => serve
* `/assets/style.css` => serve
* `/assets` => redirect to `/assets/`
* `/assets/style` => redirect to `/assets/style/` 

### Additional

In order to avoid duplicate content, this PR also adds redirects to files without a trailing slash.

* `/about.html/` => redirect to `/about.html`
* `/assets/style.css/` => redirect to `/assets/style.css`


Fixes #3731"
deacdfc47c96450e88ccb77adb6c949b9d8679df,luc,2020-02-06 00:07:15+00:00,luc,2020-02-06 00:07:15+00:00,"Publish Stable

 - now@17.0.1"
ac9badbe9e500342c95d5256c4dac523e8d13af8,Luc,2020-02-05 23:58:24+00:00,GitHub,2020-02-05 23:58:24+00:00,[now-cli] Always output deployment url in stdout (#3753)
62beb0f78d05c0dce40916b69b2b9e55df850281,luc,2020-02-05 22:03:23+00:00,luc,2020-02-05 22:03:23+00:00,"Publish Stable

 - @now/frameworks@0.0.9
 - @now/build-utils@1.3.9
 - @now/cgi@1.0.3
 - now@17.0.0
 - now-client@7.0.0
 - @now/go@1.0.3
 - @now/next@2.3.13
 - @now/node@1.4.1
 - @now/python@1.1.3
 - @now/routing-utils@1.5.2
 - @now/ruby@1.0.2
 - @now/static-build@0.14.12"
5f9777f4af2a9e25799231d27127e9c1fd6a4181,luc,2020-02-05 21:38:39+00:00,luc,2020-02-05 21:38:39+00:00,"Publish Canary

 - now@17.0.0-canary.35"
e00db4437a245f3fca01cb6a8723b9ca37ec6f2d,Luc,2020-02-05 21:37:06+00:00,GitHub,2020-02-05 21:37:06+00:00,"[now-cli] Use npx when available to run dev command (#3749)

* use npx when available

* add --no-install

* replace $PORT and %PORT% in devCommand

* remove PORT from env variables

* replace more than one $PORT or %PORT%

* fix regex"
b0e4f2590d14e79329dbd70a6aeb2b63a244d3c6,Steven,2020-02-05 20:09:14+00:00,Steven,2020-02-05 20:09:14+00:00,"Publish Stable

 - @now/cgi@1.0.2
 - @now/go@1.0.2
 - @now/python@1.1.2"
f0d58eac8c03249148e88d65cbbb834c30b7a215,Leo Lamprecht,2020-02-05 19:50:21+00:00,GitHub,2020-02-05 19:50:21+00:00,Remove `now dev` suggestion (#3748)
dae830d2b69dafac7c2f8768b9bea963fe323888,Steven,2020-02-05 19:30:08+00:00,GitHub,2020-02-05 19:30:08+00:00,"[examples] Fix hugo theme (#3746)

The Hugo theme was lost when transferring from `zeit/now-examples` to `zeit/now`.

This PR fixes the `.gitignore` file to include the `dist` directory and override our root `.gitignore`."
e3071e4e295cdfae349a14cc07c06d39363c2518,dependabot[bot],2020-02-05 14:52:08+00:00,GitHub,2020-02-05 14:52:08+00:00,"Bump mixin-deep from 1.3.1 to 1.3.2 in /packages/now-cgi (#3736)

Bumps [mixin-deep](https://github.com/jonschlinkert/mixin-deep) from 1.3.1 to 1.3.2.
- [Release notes](https://github.com/jonschlinkert/mixin-deep/releases)
- [Commits](https://github.com/jonschlinkert/mixin-deep/compare/1.3.1...1.3.2)

Signed-off-by: dependabot[bot] <support@github.com>"
073d7ece23e7ba2135d1a9e1859ecf595637d4cc,Steven,2020-02-05 13:29:10+00:00,Steven,2020-02-05 13:29:10+00:00,"Publish Canary

 - @now/build-utils@1.3.9-canary.0
 - now@17.0.0-canary.34"
071258ba33b13df8eb40a60133a770e564d2c1a1,Andy Bitz,2020-02-05 02:27:31+00:00,Andy Bitz,2020-02-05 02:27:31+00:00,"Publish Stable

 - @now/build-utils@1.3.8"
c0e00dc69a3d99721ab77c5f0fea6f77eda90678,Andy,2020-02-05 02:27:17+00:00,GitHub,2020-02-05 02:27:17+00:00,[now-build-utils] Fix build script check (#3743)
6e5c136337e69eb879a74acf731604f812390c58,luc,2020-02-05 01:26:53+00:00,luc,2020-02-05 01:26:53+00:00,"Publish Canary

 - now@17.0.0-canary.33"
60428cd4cffd945a828fa47e7f6d866db7d376c7,Steven,2020-02-05 01:20:54+00:00,GitHub,2020-02-05 01:20:54+00:00,"[now-cli] Bump @zeit/fun to 0.11.2 (#3741)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
c6b9d80eecc79121018fd38f91b89af72d49e082,Luc,2020-02-05 01:17:43+00:00,GitHub,2020-02-05 01:17:43+00:00,Fix now cli breaking tests (#3742)
953bdc10e5afc84a3f0dc084557445e7ef179b62,Luc,2020-02-05 00:58:49+00:00,GitHub,2020-02-05 00:58:49+00:00,"[now-cli] Fix prompts and fetch team on windows (#3740)

* fix fetch on windows

* update inquirer

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
becdbd2136f0dde5a7489461b9a465d25e917b17,Andy Bitz,2020-02-05 00:52:02+00:00,Andy Bitz,2020-02-05 00:52:02+00:00,"Publish Stable

 - @now/build-utils@1.3.7"
da9bb31259fe065dba56730a85f62dfaa63c438c,Luc,2020-02-05 00:49:13+00:00,GitHub,2020-02-05 00:49:13+00:00,"[now-cli] Handle no framework detected case (#3738)

* handle no framework detected case

* remove related test

* simplify

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
8cbf0369213b148f16ad9eaa5a494ab3e0475a70,Luc,2020-02-05 00:48:52+00:00,GitHub,2020-02-05 00:48:52+00:00,"[now-cli] Do not prompt for root directory when project is linked (#3737)

* do not prompt for root directory when linked

* run tests

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>
Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
8f66e4a308d1d3afac642a808ce3b5179d5598b7,Andy,2020-02-05 00:47:54+00:00,GitHub,2020-02-05 00:47:54+00:00,"[now-build-utils] Handle empty `buildCommand` and `outputDirectory` (#3739)

* [now-build-utils] Handle empty buildCommand and outputDirectory

* Update comment"
9627b612f2a744c41b2451f2cb251dea26ce813d,Luc,2020-02-04 22:23:37+00:00,GitHub,2020-02-04 22:23:37+00:00,"[now-cli] Do not show spinners with `--debug` (#3732)

* create output.wait and use it

* fix printing ""ended"" multiple times

* update more `wait` -> `output.spinner`

* timeout -> delay"
8a9ded6d61f994545ad0e890ffa45cd15179d41f,Luc,2020-02-04 21:29:07+00:00,GitHub,2020-02-04 21:29:07+00:00,"[now-cli] Slugify suggested project name (#3733)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
d89c772bd58bf0e4b1eab7b03f4e971206a598bb,Steven,2020-02-04 21:11:26+00:00,GitHub,2020-02-04 21:11:26+00:00,"[now-build-utils] Exclude `_test.go` files (#3735)

Typically, Go tests are side-by-side with their source files in a `_test.go`.

The Go documentation says the following:

> To write a new test suite, create a file whose name ends _test.go that contains the TestXxx functions as described here. Put the file in the same package as the one being tested. The file will be excluded from regular package builds but will be included when the go test command is run. [View Docs](https://golang.org/pkg/testing/)

This PR excludes the test files from being turned into Serverless Functions."
32137586b9ff57d05f321689d16bd7b0c0fab05b,Steven,2020-02-04 20:10:33+00:00,Steven,2020-02-04 20:10:33+00:00,"Publish Stable

 - @now/static-build@0.14.11"
9a3e43517564eb25bda91b1de5617af140cb76a1,Andy Bitz,2020-02-04 20:06:30+00:00,Andy Bitz,2020-02-04 20:06:30+00:00,"Publish Stable

 - @now/frameworks@0.0.8"
01d5a10ebde48c2d05b96f5c4712a39b43616167,Andy,2020-02-04 20:03:56+00:00,GitHub,2020-02-04 20:03:56+00:00,"[@now/frameworks] Add Other (#3734)

* [@now/frameworks] Add Other

* Add logo

* Fix typo

* Add description"
040658fbfa08b89647fc3cc5c22557f6c4aca7e2,Steven,2020-02-04 00:43:39+00:00,Steven,2020-02-04 00:43:39+00:00,"Publish Canary

 - now@17.0.0-canary.32
 - @now/go@1.0.2-canary.0"
51c00286a4186ec4e9c42f5a10b32318ef7c99f8,Steven,2020-02-04 00:40:41+00:00,GitHub,2020-02-04 00:40:41+00:00,[now-go] Fix `now dev` on Windows (#3730)
c3e274fc2f368c43227a17bfa5af248d5bc1185e,Steven,2020-02-03 21:30:37+00:00,GitHub,2020-02-03 21:30:37+00:00,"[now-cli] Fix `now dev` when api file is added or removed (#3708)

This PR is a follow up to #3703 which fixes file output renaming on initial boot but not when files are added or removed while `now dev` is running. This PR fixes that behavior."
fe633c528a462e643929e88159b0494c4aae4dac,Steven,2020-02-03 18:28:43+00:00,Steven,2020-02-03 18:28:43+00:00,"Publish Canary

 - now@17.0.0-canary.31
 - @now/static-build@0.14.11-canary.2"
5e306d49f86145872fb43fbddd157ba59e9d1f45,Steven,2020-02-03 18:21:11+00:00,GitHub,2020-02-03 18:21:11+00:00,"[now-static-build] Fix error when `HUGO_VERSION` not found (#3724)

This PR improves the error message when the user specifies a version but that version does not exist.

- HUGO_VERSION
- ZOLA_VERSION
- GUTENBERG_VERSION

Typically this means there is no tag for that particular version. It could also mean there is a tag but no binary is attached to the tag/release.

![image](https://user-images.githubusercontent.com/229881/73673953-900f4e80-467d-11ea-90ed-3317cf83c74e.png)

![image](https://user-images.githubusercontent.com/229881/73673985-9d2c3d80-467d-11ea-8ee4-cc6ecabaac20.png)

Related to [zeit/docs#1624](https://github.com/zeit/docs/pull/1624)"
274259b7dd58053c8e9c76cdd16bcc3bb0e7732e,Steven,2020-02-02 02:47:33+00:00,GitHub,2020-02-02 02:47:33+00:00,"[tests] Update to use github action cancel workflow (#3720)

Removes script and instead uses proper GitHub Action.

This reduces the time to run from 10 seconds to 5 seconds (due to ncc).

https://github.com/styfle/cancel-workflow-action"
230e96c6874c285688cdf0f8bd17f808b67b9fb0,Steven,2020-02-01 00:41:40+00:00,GitHub,2020-02-01 00:41:40+00:00,"[tests] Change warn to error on unsed vars (#3715)

Follow up to #3714 that turns the warning into an error.

![image](https://user-images.githubusercontent.com/229881/73582375-ea7c9500-445a-11ea-9d20-2a17073a068a.png)"
8c0c6e546d5a624c8c5e5dcff8a114166e36f90d,Nathan Rajlich,2020-01-31 23:57:09+00:00,GitHub,2020-01-31 23:57:09+00:00,"[now-cli] Remove unused `fs` import (#3714)

Fixes GH pull request auto-lint:

> #### Check warning on line 2 in `packages/now-cli/src/util/input/input-root-directory.ts`:
>
> ## GitHub Actions / Unit Tests (ubuntu-latest, 12)
>
> `packages/now-cli/src/util/input/input-root-directory.ts#L2`
>
> ```
> 'fs' is defined but never used
> ```"
5e8541b936cd704b8ef5d41e4fe550132383f9a5,Steven,2020-01-31 23:49:56+00:00,GitHub,2020-01-31 23:49:56+00:00,"[tests] Don't run tests in forks (#3713)

There is no need to run the tests in a fork because when the forked repo submits a PR to this repo, the tests will run."
300558f24e515811802e05b8969b58b27ff79657,Simon Hnisch,2020-01-31 23:48:46+00:00,GitHub,2020-01-31 23:48:46+00:00,"[now-static-build] Add caching headers for Stencil (#3493)

/cc @adamdbradley @leo"
829f7d8aeb12b9fe426f97013aba08f898e2e472,Steven,2020-01-31 21:48:34+00:00,Steven,2020-01-31 21:48:34+00:00,"Publish Canary

 - @now/build-utils@1.3.7-canary.2
 - @now/python@1.1.2-canary.0"
340f7db68ac4dc7734d08211e93b734e7945a40d,Steven,2020-01-31 21:47:14+00:00,GitHub,2020-01-31 21:47:14+00:00,"[now-python] Add `excludeFiles` config option (#3712)

This PR adds a `config.excludeFiles` pattern for `@now/python` that defaults to `node_modules/**` for users who are using a Node.js SSG frontend with Python APIs backend.

If the user chooses, they can override to any glob pattern such as `{.cache,node_modules}/**`.

Related to #2830
Related to #3416"
2fe987b5da588693ebc1675c17416542c999e68a,luc,2020-01-31 21:13:11+00:00,luc,2020-01-31 21:13:11+00:00,"Publish Canary

 - now@17.0.0-canary.30"
5b3aa48cd65b15566e2eb10104ae5a98c741330c,Andy,2020-01-31 20:36:06+00:00,GitHub,2020-01-31 20:36:06+00:00,"[now-cli] Adjust error message for Root Directory (#3710)

* [now-cli] Adjust error message for Root Directory

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Luc <luc.leray@gmail.com>

Co-authored-by: Luc <luc.leray@gmail.com>"
080d96bfa14dbceddaeef82b6306dd21670b0ab9,Steven,2020-01-31 16:57:18+00:00,GitHub,2020-01-31 16:57:18+00:00,"[api] Silence github comments (#3709)

Most PRs don't touch the examples api so let's silence the comments and cancel in-progress builds if we push again.

This should reduce the noise in this repository.

Documentation: https://zeit.co/docs/configuration#introduction/configuration-reference"
7d9bf682b49984b4f60bfe829233c8856e634ac5,Luc,2020-01-31 16:16:29+00:00,GitHub,2020-01-31 16:16:29+00:00,[now-cli] Add `[copied to clipboard]` (#3707)
a913a4f59f5c4c71deb2b06bf5e7a5d6abef0be4,Steven,2020-01-31 14:30:09+00:00,GitHub,2020-01-31 14:30:09+00:00,"[tests] Cancel previous CI runs (#3706)

This PR adds an action to cancel previous runs for the current branch using the [github workflow api](https://developer.github.com/v3/actions/workflow_runs/).

This action is ignored for the `master` branch."
2042c96d9852fe08a2226688a17718e4546d289e,Andy Bitz,2020-01-31 12:30:12+00:00,Andy Bitz,2020-01-31 12:30:12+00:00,"Publish Canary

 - now@17.0.0-canary.29"
4ca0ff8426f67bbbecc525fdf99e98bfcf5e6e52,Steven,2020-01-31 12:20:46+00:00,GitHub,2020-01-31 12:20:46+00:00,"[now-cli] Fix `now dev` file output renaming (#3703)

There was a bug where python src files were being renamed when it really should be the output files only.

This is a tricky bug because production deployments build all files first and then perform routing. So we simply rename lambda outputs with prod deployments. But `now dev` matches a request URL to a build before performing the build lazily so we have to rename source files.

The solution is to add both the original file name and the renamed file name in the `files` map so that it matches correctly but `zeit/fun` will still copy the original source files in the output correctly.

Routing will match on the extensionless file, the builder will use the file with extension (it doesn't know about file renaming), then the build results in a lambda output which is renamed to extensionless.

I added a test for `@now/python` and updated the `@now/bash` test.

Fixes #3638"
554cc42d83ae1398e8f2e6ac466055dcc881dc0b,Andy,2020-01-31 11:56:09+00:00,GitHub,2020-01-31 11:56:09+00:00,"[now-cli] Add support for the `rootDirectory` property (#3686)

* [now-cli] Add support for the `rootDirectory` property

* Only check if rootDirectory exists

* Add test

* Support now dev

* Use defaults

* Comment

* Normalize the path input

* Adjust test

* Remove .only

* Adjust more tests

* Adjust test

* Fix test

* Remove unused import

* Update packages/now-cli/src/util/validate-paths.ts

Co-Authored-By: Luc <luc.leray@gmail.com>

* Run check on normalized path

* Add more checks

* Change error message

* Use basename as prefix

* Use correct path when linking

* Update packages/now-cli/src/util/input/input-root-directory.ts

Co-Authored-By: Luc <luc.leray@gmail.com>

Co-authored-by: Luc <luc.leray@gmail.com>"
3f9e30d031abcf80c7c7e70d6192e15ae29db895,Steven,2020-01-30 22:04:33+00:00,GitHub,2020-01-30 22:04:33+00:00,"[docs] Update readme with CI status (#3704)

This repo no longer uses Circle CI since #3660 so this PR updates the badge in the readme."
5a9ca8644c627bd34eb5417f7afda278fc5a996b,luc,2020-01-30 19:07:27+00:00,luc,2020-01-30 19:07:27+00:00,"Publish Canary

 - now@17.0.0-canary.28"
3f362d4b506df82de115802f06c493840c672d34,Luc,2020-01-30 19:01:44+00:00,GitHub,2020-01-30 19:01:44+00:00,"[now-cli] Add scope indication to `now secrets` (#3699)

It looks like this:
![image](https://user-images.githubusercontent.com/6616955/73408935-03bbff00-42fe-11ea-9f1c-70860437c6bc.png)"
7360886c9a04bf3b2dcabf94354e9b07acd8dd5e,Steven,2020-01-30 17:21:16+00:00,GitHub,2020-01-30 17:21:16+00:00,"[tests] Run unit tests on ubuntu and macos (#3702)

* [tests] Run unit tests on ubuntu and macos

* Add back Node 10 for Now CLI Tests

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
5b8a1b47b0744d736c3f764233e9f17e498b7b43,Luc,2020-01-30 17:10:44+00:00,GitHub,2020-01-30 17:10:44+00:00,"[now-cli] Adjust `name` error messages (#3698)

* adjust `name` error messages

* return after outputting error"
0506b262d29be972c749aa628617d546cd026187,luc,2020-01-30 16:38:31+00:00,luc,2020-01-30 16:38:31+00:00,"Publish Canary

 - now@17.0.0-canary.27"
17c4569f419f2eb8ab643e9e1f180eed519aba45,Luc,2020-01-30 16:37:48+00:00,GitHub,2020-01-30 16:37:48+00:00,"[now-cli] Send `framework` to `api-deployments` (#3701)

* send `framework` to api-deployments

* add error message

* Update packages/now-cli/src/util/input/edit-project-settings.ts

Co-Authored-By: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
888ff8330995f80555bfa84e688c2e237bb707ff,Steven,2020-01-30 14:39:59+00:00,Steven,2020-01-30 14:39:59+00:00,"Publish Stable

 - @now/node@1.4.0
 - @now/python@1.1.1"
7191421470fac9151b2ba9d9330b52b9c38e1907,Steven,2020-01-29 21:24:02+00:00,GitHub,2020-01-29 21:24:02+00:00,"[tests] Fix rate limits for integration tests (#3696)

This PR will fix our CI rate limits for the ""Now CLI Tests"" check in GH Actions.

Thanks to @AndyBitz for most of the work in #3325"
e9c9aa5ce1ba10c38f293518ae6541711d80ba7d,luc,2020-01-29 20:10:37+00:00,luc,2020-01-29 20:10:37+00:00,"Publish Canary

 - now@17.0.0-canary.26"
d98f3d8140adf3b90518eda603a2f98b16462f9e,Luc,2020-01-29 20:09:28+00:00,GitHub,2020-01-29 20:09:28+00:00,"[now-cli] Deprecate `--name` and now.json `name` property (#3690)

* remove `--name` from help

* add deprecation warning

* refactor

* deprecated `name` property in now.json

* add tests

* remove .only"
fbf659e4e1cc80bf854f6182606ac0dcca8592e5,Luc,2020-01-29 20:09:08+00:00,GitHub,2020-01-29 20:09:08+00:00,"[now-cli] Add error message when running now dev on an unlinked folder (#3692)

* refactor getLinkedProject

* adjustments

* refactor getLinkedOrg

* refactor linkFolderToProject to skip linking

* fix dev tests

* adjust tests

* print deployment url for files

* fix missing `NOW_PROJECT_ID` check

* `process.status` -> `link.status`"
6f7069aaddc0f7b417889e3dc200c4a7fe307af1,Steven,2020-01-29 18:26:41+00:00,Steven,2020-01-29 18:26:41+00:00,"Publish Canary

 - @now/python@1.1.1-canary.1"
cef2c889f6d654c70b59514e61105c8acde437a9,Steven,2020-01-29 18:24:15+00:00,GitHub,2020-01-29 18:24:15+00:00,"[now-python] Fix dependency detection in now dev (#3695)

Fixes a false positive regression from #3352 where `now dev`  assumed that local dependencies were already installed even when they were not."
e42d6c422a1a8733339efe0bb6eb5c6798a0b3d1,Steven,2020-01-28 23:15:17+00:00,Steven,2020-01-28 23:15:17+00:00,"Publish Canary

 - now@17.0.0-canary.25
 - @now/routing-utils@1.5.2-canary.4"
2e9241b454442f432edc995a94d4e2a8d154c968,Steven,2020-01-28 23:13:57+00:00,GitHub,2020-01-28 23:13:57+00:00,"[now-routing-utils] Enabled case sensitive rewrites and set delimiter (#3688)

This enables case sensitive rewrites and redirects. It also changes the delimiter to `/` to match Next.js.

Unlike `routes` which were case insensitive, `rewrites` and `redirects` are case sensitive.

In the future, we may wish to add an option to toggle the sensitivity."
257a3b07fc9491e852b42ba48be01ee744db6127,Steven,2020-01-28 22:14:05+00:00,GitHub,2020-01-28 22:14:04+00:00,"[now-cli] Remove several v1 tests from CI (#3689)

These 5 tests are available in `integration-v1.js` already which can be executed manually."
df9322b3921d95381673f4996c901b7f09173503,luc,2020-01-28 19:39:44+00:00,luc,2020-01-28 19:39:44+00:00,"Publish Canary

 - now@17.0.0-canary.24"
28b5476bf348c643f809ef44dd5e4955e3ae0eff,Luc,2020-01-28 19:38:50+00:00,GitHub,2020-01-28 19:38:50+00:00,"[now-cli] Add link to ""deploying files is deprecated"" (#3685)"
70a61f045f0804915f36a3cb4816ccbf87921980,Luc,2020-01-28 19:38:27+00:00,GitHub,2020-01-28 19:38:27+00:00,"[now-cli] (Major) Use local `.now` scope for all commands and add scope to `now whoami` (#3643)

* use .now scope for commands

* add cache to getUser

* add cache on getTeams

* add cache for link

* refactor

* add error if NOW_ORG_ID is missing

* remove link cache

* refactor

* fix whoami

* add tests

* move fetching scope/org after subcommand condition

* Update packages/now-cli/src/util/projects/link.ts

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* remove userId from global scope

* show team and user in whoami command

* reset whoami

* Revert ""move fetching scope/org after subcommand condition""

This reverts commit d145e6164074fe2442178cd8fafbeb225c978b9c.

* remove `client` from main scope

* tests adjustments

* adjust tests

* adjust tests (bis)

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
238a8a859328d42d6aabe58833f1cc4175cb2a04,luc,2020-01-28 14:48:36+00:00,luc,2020-01-28 14:48:36+00:00,"Publish Canary

 - now@17.0.0-canary.23
 - now-client@7.0.0-canary.3"
6f2d5c0045ce30c6d58448b9870f4e1658dd47b5,Luc,2020-01-28 14:47:45+00:00,GitHub,2020-01-28 14:47:45+00:00,"[now-cli] Add README.txt when linking project (#3681)

* add README.txt when linking project

* replace ` with ""

* add test

* Apply suggestions from code review

Co-Authored-By: Nathan Rajlich <n@n8.io>

* extract NOW_DIR_README.txt

* Update packages/now-cli/src/util/projects/NOW_DIR_README.txt

Co-Authored-By: Nathan Rajlich <n@n8.io>

Co-authored-by: Nathan Rajlich <n@n8.io>"
fc798da398ea9d7caf13bf11f3fdb066fc2871ec,Luc,2020-01-28 10:42:32+00:00,GitHub,2020-01-28 10:42:32+00:00,"[now-client] Update `@types/node-fetch` (#3682)

* update @types/node-fetch

* fix type error (another)

* add noEmitOnError

* add build test github action to test

* Revert ""fix type error (another)""

This reverts commit 1d0dace70a0bf2dfb2473a48408e560f060e5c50.

* Revert ""add noEmitOnError""

This reverts commit 57286016c69723b625293621f7474882f802521d.

* Revert ""update @types/node-fetch""

This reverts commit 6979b5f866faaa141e5be1b1bda353f01a41349c.

* Revert ""Revert ""update @types/node-fetch""""

This reverts commit 7459fb768cd9574854ac0f9f3d48eca1e5e63821.

* Revert ""Revert ""fix type error (another)""""

This reverts commit 820db234f82d0a624cddb625529196807b571b5e.

* Revert ""Revert ""add noEmitOnError""""

This reverts commit 896fdb9f33c7f5d62fea409a073de5c614d11024.

* Revert ""add build test github action to test""

This reverts commit a2f1c2f914e6c66653dfabad262311ee2a2720b3.

* add noEmitOnError to now-cli

* fix signal-exit in yarn.lock"
0804483316fbefdd16a7d44819e17deaad516aba,luc,2020-01-28 10:36:50+00:00,luc,2020-01-28 10:36:50+00:00,"Publish Canary

 - now@17.0.0-canary.22"
4a087f842e5ba747005196770811ca2e367296bb,Luc,2020-01-28 10:35:57+00:00,GitHub,2020-01-28 10:35:57+00:00,"[now-cli] Use `devCommand` from project settings locally (#3673)

* pull devCommand from cloud

* filter out front end builders with devCommand

* remove unnecessary import

* fix wrong directory listing with devCommand

* fix server not stopping

* Apply suggestions from code review

Co-Authored-By: Nathan Rajlich <n@n8.io>

* remove comment

* remove redundant ""if""

Co-authored-by: Nathan Rajlich <n@n8.io>"
01c7bf005909bae16db20b267085c475cf5f94c5,luc,2020-01-28 10:29:25+00:00,luc,2020-01-28 10:29:25+00:00,"Publish Canary

 - now@17.0.0-canary.21"
6c439516dbc3f6b8a83ea42a21ea449d60bec112,Luc,2020-01-28 10:27:56+00:00,GitHub,2020-01-28 10:27:56+00:00,"[now-cli] Add tip to connect git repositories after now login is successful (#3678)

* add tip after now login is successful

* write success message to stdout"
0db4ee69ef1d29e045d43b9744c0f877b0e8c69e,Steven,2020-01-28 00:25:39+00:00,GitHub,2020-01-28 00:25:39+00:00,"[tests] Add timeout to test jobs (#3683)

Circle CI used to have a max timeout of 10 minutes.

This adds a timeout to each job so that hanging tests are noticed earlier.

For example, these have been ""in progress"" for 4 hours: 

![image](https://user-images.githubusercontent.com/229881/73222438-3a90ea00-4131-11ea-97a7-76651a2cce45.png)"
aec8a7ac9a51b14f1f388f88ee98d573803e1e74,Steven,2020-01-27 22:08:32+00:00,Steven,2020-01-27 22:08:32+00:00,"Publish Canary

 - now@17.0.0-canary.20
 - now-client@7.0.0-canary.2
 - @now/routing-utils@1.5.2-canary.3
 - @now/ruby@1.0.2-canary.0"
882bc8cb99464b07e252f64873f1691073c5faf4,m5o,2020-01-27 21:55:13+00:00,Steven,2020-01-27 21:55:13+00:00,"[now-ruby] Add rack examples to ruby integration tests (#3626)

* add rack examples to ruby integration tests
  * https://github.com/rack/rack

Co-authored-by: Steven <steven@ceriously.com>"
9aad701dfdf7878af80fc2da5fcab887cfa87f58,Steven,2020-01-27 21:24:10+00:00,GitHub,2020-01-27 21:24:10+00:00,"[now-routing-utils] Merge destination query string with path segments (#3679)

This PR changes the behavior so that `:segment` in the `source` is always added to the query string unless the `destination` query string already contains a key with the same name."
f224f574bede59ab5519789120e0cd0a1aa0bf7e,Luc,2020-01-27 19:41:38+00:00,GitHub,2020-01-27 19:41:38+00:00,"[now-cli] Deprecate deploying files with Now CLI (#3650)

* deprecate uploading files instead of erroring

* fix misc bugs

* remove final `.`

* add test

* check .now folder does not exist in test

* clean up after test"
e201eaa3157ac1fb8b5b04083fc53d636e392cc4,Andy,2020-01-27 14:54:29+00:00,GitHub,2020-01-27 14:54:29+00:00,"[frameworks] Extend CONTRIBUTING.md (#3675)

* [frameworks] Extend CONTRIBUTING.md

* Update .github/CONTRIBUTING.md

Co-Authored-By: Steven <steven@ceriously.com>

* Update .github/CONTRIBUTING.md

Co-Authored-By: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
b0ed1f2be0bf38485a264369ec36a8b30caf7cce,Andy,2020-01-27 14:19:41+00:00,GitHub,2020-01-27 14:19:41+00:00,"[now-cli] Remove unused code (#3674)

* [now-cli] Remove unused code

* [now-cli] Remove more unused code"
4ac33e1c036f679c1f5a1738b13f407beaaf41a6,Steven,2020-01-27 13:32:07+00:00,kodiakhq[bot],2020-01-27 13:32:07+00:00,"[now-cli][now-client] Drop support for Node 8 (#3670)

Deployments no longer support Node 8 since reaching EOL so we can also drop all of the special casing used to support Node 8 in Now CLI and Now Client.

The `tsconfig.json` has been updated to ES2018 per [Node-Target-Mapping](https://github.com/microsoft/TypeScript/wiki/Node-Target-Mapping)."
27ca517666a67ef6120a026e3da68a55bd092806,luc,2020-01-25 22:51:36+00:00,luc,2020-01-25 22:51:36+00:00,"Publish Canary

 - @now/static-build@0.14.11-canary.1"
734e9c072de925e4b04fff0cbd1103827d9778c8,Luc,2020-01-25 22:38:36+00:00,GitHub,2020-01-25 22:38:36+00:00,"[now-static-build] Add `public` folder to Gatsby cache (#3669)

* add `public` to gatsby cache

* add test"
8db54f309316c9826b073ffc309ec958b93ceaf3,Forrest Oliphant,2020-01-25 14:41:37+00:00,kodiakhq[bot],2020-01-25 14:41:37+00:00,"[examples] Fix svelte example github link (#3657)

https://svelte.now-examples.now.sh/ currently points to https://github.com/zeit/now-examples/tree/master/svelte-functions ... this should be the right link."
886c0718d69e53a22a551ad9ec920d80cbf77022,Andy,2020-01-25 09:58:13+00:00,GitHub,2020-01-25 09:58:13+00:00,"[tests] Fix GitHub Actions on `master` (#3664)

* Checkout master on master

* Check if checkout works

* Revert ""Check if checkout works""

This reverts commit 66f712a43edfb938c551110c214661e4a920b492.

* Revert ""Checkout master on master""

This reverts commit 41b6eab926474830629e758a51e7cfdd1947bdf2.

* Use --depth=10

* Add another fetch"
e160a2f21f6e227d11d88cfe62c0b24725388eba,Andy,2020-01-24 23:42:55+00:00,GitHub,2020-01-24 23:42:55+00:00,"[tests] Use GitHub Actions for the tests (#3660)

* Initial Build step

* Typo

* Remove circleci config

* Fix command

* Change Node version

* Add unit tests

* Use artifact

* Fix workflow file

* Remove node_modules

* Remove .git

* Do not upload files

* Checkout master branch

* Use git fetch

* Add now-dev tests

* Fix workflow file

* Use node10 for building

* Use node12 for building

* Download Hugo before building

* Fetch master branch

* Do not cancel other jobs when one fails

* Add all tests

* Remove needs

* Add build step

* Move test up

* Use isCanary function and remove tests

* Update Publish workflow

* Update .github/workflows/continuous-integration.yml

Co-Authored-By: Steven <steven@ceriously.com>

* Specify more events

* Add publish.sh script

* Remove Node8

Co-authored-by: Steven <steven@ceriously.com>"
e09a41842317c6a25ad79dd367f30c4596adbcc1,JJ Kasper,2020-01-24 18:33:56+00:00,JJ Kasper,2020-01-24 18:33:56+00:00,"Publish Stable

 - @now/next@2.3.12"
52d44643683770a8ef63333a4a339385408f05f4,JJ Kasper,2020-01-24 18:31:50+00:00,JJ Kasper,2020-01-24 18:31:50+00:00,"Publish Canary

 - @now/next@2.3.12-canary.0"
4dc635e5f2a8cc5ff8de9e1d25ff2693c4e37746,JJ Kasper,2020-01-24 18:22:25+00:00,kodiakhq[bot],2020-01-24 18:22:25+00:00,"[now-next] Revert handle: miss/hit (#3658)

This reverts `handle: miss/hit` as it still needs some things sorted out before we're ready to use it in `@now/next`"
510fb7ee7efe9f514109fc236673abc538eed9f6,Steven,2020-01-24 17:16:13+00:00,Steven,2020-01-24 17:16:13+00:00,"Publish Canary

 - @now/build-utils@1.3.7-canary.1
 - now@17.0.0-canary.19"
243451e94b7dcaa45e58e3dbc7e50b8e45fd6c32,Steven,2020-01-24 17:07:29+00:00,GitHub,2020-01-24 17:07:29+00:00,"[now-build-utils] Add function detectApiExtensions() (#3653)

* [now-routing-utils] Add function detectApiExtensions

* Add more tests, fix broken test

* Add missing check for extensions

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
11bbda977dabe7df982e527a7e13d6f48bc4a1dc,Andy Bitz,2020-01-24 16:20:55+00:00,Andy Bitz,2020-01-24 16:20:55+00:00,"Publish Stable

 - @now/frameworks@0.0.7
 - @now/next@2.3.11"
62c050f394878efed21a91b8b4d9d8447484187d,Andy Bitz,2020-01-24 16:19:27+00:00,Andy Bitz,2020-01-24 16:19:27+00:00,"Publish Canary

 - now@17.0.0-canary.18
 - now-client@7.0.0-canary.1"
bd5a0133124435e2dbf230cc4a44d4d7b8d0edeb,Andy,2020-01-24 16:18:56+00:00,GitHub,2020-01-24 16:18:56+00:00,"[now-client] (Major) Remove builds check from now-client and change events (#3648)

* [now-client][now-cli] Remove builds check from now-client

* [now-client] Adjust README and change version

* Change events and adjust build error

* Use message from error

* Update packages/now-cli/src/util/deploy/process-deployment.ts

Co-Authored-By: Luc <luc.leray@gmail.com>

* [now-cli] Rename event

* Make types more consistent

* Fix type in process-legacy-deployment

* Adjust type in test

* Update type

* Make events type simpler

Co-authored-by: Max <8418866+rdev@users.noreply.github.com>
Co-authored-by: Luc <luc.leray@gmail.com>"
1823cf452ece4ab66307535b0a5ec9c357dc0886,Andy Bitz,2020-01-24 15:09:18+00:00,Andy Bitz,2020-01-24 15:09:18+00:00,"Publish Canary

 - @now/next@2.3.11-canary.4"
c426d72ccfeef215b9977c5a0f47d0368a868fa4,Andy,2020-01-24 15:08:39+00:00,GitHub,2020-01-24 15:08:39+00:00,[now-next] Include file mode for pseudo layers (#3655)
ddf59c052d02c4e54a30ca8b86b1c772f618c636,Alex Grover,2020-01-24 10:03:51+00:00,Tim Neutkens,2020-01-24 10:03:51+00:00,Remove duplicated line from .gitignore (#3651)
1dcf6e7fb18d6caf04a0d273be4475124d98f123,luc,2020-01-23 19:06:18+00:00,luc,2020-01-23 19:06:18+00:00,"Publish Canary

 - now@17.0.0-canary.17"
d4f4792988cf6b01ce8ba1453172c383a032f672,Luc,2020-01-23 19:00:55+00:00,kodiakhq[bot],2020-01-23 19:00:55+00:00,"[now-cli] Add `--confirm` to help (#3625)

```
$ now --help
[...]
  -c, --confirm                  Confirm default options and skip questions
```"
7e1f2bd10e4c864db66097f00933026897849d50,Steven,2020-01-23 17:29:22+00:00,Steven,2020-01-23 17:29:22+00:00,"Publish Canary

 - @now/build-utils@1.3.7-canary.0"
a80a1d0c1d045dfb0486c4f175d8cc9a5571cd2f,Steven,2020-01-23 16:54:34+00:00,kodiakhq[bot],2020-01-23 16:54:34+00:00,"[now-build-utils] Fix api directory detection (#3647)

There was an issue where `@now/next` was emitting an api directory with serverless functions but the functions should not be renamed."
8ff747b4d7e4a60aca9452c42ac96a5ac98d20fc,Steven,2020-01-23 14:37:30+00:00,Steven,2020-01-23 14:37:30+00:00,"Publish Canary

 - @now/next@2.3.11-canary.3
 - @now/routing-utils@1.5.2-canary.2"
aa63b5a58116d432c29e813bb5c0a10e4e849bee,Steven,2020-01-23 00:25:25+00:00,kodiakhq[bot],2020-01-23 00:25:25+00:00,"[github] Update codeowners (#3642)

Added a few more code owners"
2094ec3c992b9fdebc446e4ba88e3422700ae3e9,luc,2020-01-22 23:57:56+00:00,luc,2020-01-22 23:57:56+00:00,"Publish Canary

 - now@17.0.0-canary.16"
bf30d10211f6295466f51b779e73b3d833a1c62a,Luc,2020-01-22 23:53:15+00:00,GitHub,2020-01-22 23:53:15+00:00,"[now-cli] Output error if NOW_PROJECT_ID/NOW_ORG_ID is defined without the other (#3630)

* output error if one of both env is missing

* add test

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
ccc03c9c6e4f77132071a92b73250334c3ca07ba,Luc,2020-01-22 23:27:30+00:00,kodiakhq[bot],2020-01-22 23:27:30+00:00,"[now-cli] Add warning if linked project was deleted or access was removed (#3631)

![image](https://user-images.githubusercontent.com/6616955/72800302-4ff4a880-3c47-11ea-8d74-0ae0c18469da.png)"
4b7367e2dce4d6d1f10568d7eeca35b1b5bf10bd,Steven,2020-01-22 22:46:47+00:00,kodiakhq[bot],2020-01-22 22:46:47+00:00,"[now-routing-utils] Fix segments in query string (#3640)

This PR a regression when path segments are used in the query string.

Take a look at the following ASCII Table for why I had to delete certain parts of the parsed url before formatting again.

https://nodejs.org/api/url.html#url_url_strings_and_url_objects

Related to #3539"
00aa56a095eca3180dd97c105902ef64fd313f61,JJ Kasper,2020-01-22 20:45:36+00:00,kodiakhq[bot],2020-01-22 20:45:36+00:00,"[now-next] Add headers support for custom-routes (#3494)

This adds support for `headers` in custom-routes which was landed in Next.js. 

This also updates `@now/routing-utils` `convertHeaders` to call `sourceToRegex` to match behavior with Next.js and allow using `segments` to match in the header `source` as not being able to use the same syntax for a header `source` as a `redirect` source could get confusing"
56ae93a2a5c0a35b3ed30a26a40a3a68d8d33314,Steven,2020-01-22 18:19:12+00:00,kodiakhq[bot],2020-01-22 18:19:12+00:00,"[examples] Fix jekyll readme build command (#3639)

Fixes #3634"
adb32a09d3e85e9495c87ee54e70af0a98797e0d,JJ Kasper,2020-01-22 17:46:57+00:00,JJ Kasper,2020-01-22 17:46:57+00:00,"Publish Canary

 - @now/next@2.3.11-canary.2
 - @now/routing-utils@1.5.2-canary.1"
3358d8e44c58ce2c8f20163f445263e728583460,JJ Kasper,2020-01-22 17:39:27+00:00,kodiakhq[bot],2020-01-22 17:39:27+00:00,"[now-next] Add `handle: miss` and `handle: hit` for custom-routes (#3489)

This is required to match custom-routes behavior in Next.js by checking dynamic routes after each rewrite although is currently blocked on `now dev` also supporting the feature

This reverts commit 0da98a7f5d25f4c24e0d169bdcf30573859d25ed."
c3bd2698e851e3e6bf43adb40767c91d232692b5,Steven,2020-01-22 17:03:10+00:00,kodiakhq[bot],2020-01-22 17:03:10+00:00,"[now-routing-utils] Disallow ""status"" in hit phase (#3637)

This will prevent any strange behavior since production already ignores status code in the hit phase."
a7baa4761d3191c7ef40574015ee8eb626bd6fc7,Steven,2020-01-22 00:56:55+00:00,Steven,2020-01-22 00:56:55+00:00,"Publish Canary

 - now@17.0.0-canary.15"
5dd2daa97024df89e83ff6cef0f5ad9546cb11fb,Steven,2020-01-22 00:54:24+00:00,kodiakhq[bot],2020-01-22 00:54:24+00:00,"[now dev] Add support for `handle: miss` and `handle: hit` (#3537)

- [x] Add tests from now-proxy for `handle: miss`
- [x] Add tests from now-proxy for `handle: hit`
- [x] Add file output renaming when `featHandleMiss` is true (also assign true for now dev)"
dd36a489ed49a699b699346848f181c99135787b,JJ Kasper,2020-01-20 21:36:58+00:00,JJ Kasper,2020-01-20 21:36:58+00:00,"Publish Canary

 - @now/frameworks@0.0.7-canary.0
 - @now/next@2.3.11-canary.1
 - @now/static-build@0.14.11-canary.0"
2e742209e3cea7eec52c499ac44105f6f846c742,JJ Kasper,2020-01-20 20:55:08+00:00,kodiakhq[bot],2020-01-20 20:55:08+00:00,"[now-next] Add initial support for static 404 (#3628)

This adds initial support for static 404 pages when enabled for Next.js applications > `9.2.1-canary.3` it also disables tracing/logging related to lambdas when there aren't any lambdas besides the `_error` when a static 404 is being used 

Closes: #3368"
8d13464cba56af68fd371390064210af66946ffe,Andy,2020-01-20 18:46:15+00:00,GitHub,2020-01-20 18:46:15+00:00,"[frameworks][now-static-build] Use `hugo -D --gc` as build command (#3624)

* [frameworks][now-static-build] Use `hugo --gc` as build command

* Add -D option"
20fdcfa0af3f6fb27493959ed0e4e210c2b14683,Max Rovensky,2020-01-17 20:00:08+00:00,Max Rovensky,2020-01-17 20:00:08+00:00,"Publish Stable

 - @now/static-build@0.14.10"
fac004f83c75ef6563517d3a941a0b70cbce68e1,Max,2020-01-17 19:59:10+00:00,Leo Lamprecht,2020-01-17 19:59:10+00:00,"[now-static-build] Remove legacy message from static build (#3618)

* Remove legacy message from static build

* Remove unused config

* Remove unused config"
5fee4bbad172de13fe93eee17b2631edac04bf82,Andy Bitz,2020-01-17 19:21:52+00:00,Andy Bitz,2020-01-17 19:21:52+00:00,"Publish Stable

 - @now/static-build@0.14.9"
18e4b188394fc1476fa42678671ec31b56ea2d33,Andy,2020-01-17 19:19:53+00:00,GitHub,2020-01-17 19:19:53+00:00,[now-static-build] Ignore commands for non-zero-config (#3617)
b8627fd384137a80869ed123a5dcc26229f62c92,Max Rovensky,2020-01-17 18:42:30+00:00,Max Rovensky,2020-01-17 18:42:30+00:00,"Publish Stable

 - @now/static-build@0.14.8"
4e2db6f8a56509a2d148c507e0da6db804746db5,Max,2020-01-17 18:36:52+00:00,Leo Lamprecht,2020-01-17 18:36:52+00:00,"[now-static-build] Improve static build errors copy (#3616)

* Improve static build errors copy

* Update packages/now-static-build/src/index.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Update packages/now-static-build/src/index.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
b685a3afdd5f69a0d6354b44285d722713b3671a,Steven,2020-01-17 18:09:32+00:00,Steven,2020-01-17 18:09:32+00:00,"Publish Canary

 - @now/next@2.3.11-canary.0
 - @now/node@1.3.6-canary.0"
aea3f58970797839a0210c150f7a8dca1aa39c05,Steven,2020-01-17 18:08:41+00:00,GitHub,2020-01-17 18:08:41+00:00,"[api] Fix build script (#3615)

I was getting errors when running `yarn build` locally because the public directory already exists.

This will make sure the public directory is deleted before generating it again."
b0bb90dc11cb075ec5bc1c77d505dfbbd8389528,Steven,2020-01-17 18:07:59+00:00,GitHub,2020-01-17 18:07:59+00:00,"Bump node-file-trace to 0.5.1 (#3613)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
2132c2463f3846510da3810e0744972e1d46e2f5,Andy Bitz,2020-01-17 17:09:16+00:00,Andy Bitz,2020-01-17 17:09:16+00:00,"Publish Stable

 - @now/next@2.3.10
 - @now/static-build@0.14.7"
60bf6e2420c81fc5c8ef9fe684798a7115647af8,JJ Kasper,2020-01-17 16:42:55+00:00,kodiakhq[bot],2020-01-17 16:42:55+00:00,"[now-next] Update custom-routes tests (#3614)

This adds `permanent: boolean` to the redirects in the custom-routes tests for `@now/next` since this field is required for redirects in Next.js in the latest version 

unblocks: https://github.com/zeit/now/pull/3613"
9badc9048cc398db937c254700986e3d45ccbf67,Andy Bitz,2020-01-16 23:52:38+00:00,Andy Bitz,2020-01-16 23:52:38+00:00,"Publish Canary

 - @now/static-build@0.14.7-canary.0"
a74c1921f8a6946c7e5395bc91c53e29d398c0ff,Andy,2020-01-16 23:51:55+00:00,GitHub,2020-01-16 23:51:55+00:00,"[now-static-build] Fix package.json command for frameworks (#3611)

* [now-static-build] Fix package.json command for frameworks

* Add test

* Rename function"
e6044f2e8d4414912dabff395e51aaa904875db4,luc,2020-01-16 23:35:54+00:00,luc,2020-01-16 23:35:54+00:00,"Publish Canary

 - now@17.0.0-canary.14"
78d1afa25e5852b5d004b7eae45315853e7abfa5,Luc,2020-01-16 23:30:51+00:00,kodiakhq[bot],2020-01-16 23:30:51+00:00,"[now-cli] Add `NOW_PROJECT_ID` and `NOW_ORG_ID` env variable (#3588)

This PR adds `NOW_PROJECT_ID` and `NOW_ORG_ID` environment variables as a way to specify a project to deploy to when running `now`.

eg.
```
NOW_ORG_ID=abc NOW_PROJECT_ID=123 now
```

When using these environment variables:
- the folder is not linked to the project (ie. no `.now` is created)
- we interrupt the process and show an error message if the project is not found:
![image](https://user-images.githubusercontent.com/6616955/72369004-7a061200-36ff-11ea-8b37-168f5339a2bb.png)"
4792adf524f3622a91d7e0ddc38c4ab3bc62bcf2,luc,2020-01-16 22:38:21+00:00,luc,2020-01-16 22:38:21+00:00,"Publish Canary

 - now@17.0.0-canary.13"
4d8a99141b33a403dcd0f1ba2a5a6a8410dcc134,Luc,2020-01-16 22:24:58+00:00,kodiakhq[bot],2020-01-16 22:24:57+00:00,"[now-cli] Improve formatting of new deploy command prompts (#3607)

- Adjust error prompt
- Add spinner while loading org and project
- Use lighter gray for infos
- Remove `{` in inspector url (was mistakenly added in https://github.com/zeit/now/pull/3599)
- Show error when entering a project name
- Fix bug with spinner not cleared when error is displayed
- ""Finalizing"" -> ""Completing""

![image](https://user-images.githubusercontent.com/6616955/72535453-da6c8f00-3878-11ea-838d-dcb4367e5120.png)"
7954ddc1d0117eacf5c2680491c734d4645ab496,Luc,2020-01-16 22:04:38+00:00,kodiakhq[bot],2020-01-16 22:04:38+00:00,"[now-cli] Create `.gitignore` if it doesn't exist (#3606)

When linking a new project, create `.gitignore` with `.now` if it doesn't exist yet. If it exists, adds `.now` to it.

Also adds a test for that."
216a1fd9d27f3e3f2902374217c5577645ce70f1,Max,2020-01-16 18:41:28+00:00,kodiakhq[bot],2020-01-16 18:41:28+00:00,"[now-static-build] Use NowBuildError for static build errors (#3609)

This PR fixes error messages and uses `NowBuildError ` for static build errors"
e5add6750c4b8acbec9b3dfc9c598e337a86ae47,Luc,2020-01-16 12:40:05+00:00,GitHub,2020-01-16 12:40:05+00:00,[now-cli] Remove `.only` and remove duplicate test (#3605)
b7533650e1a6ea680cdd578bd2cd6ffc560bca7f,Andy Bitz,2020-01-16 12:11:31+00:00,Andy Bitz,2020-01-16 12:11:31+00:00,"Publish Stable

 - @now/frameworks@0.0.6
 - @now/build-utils@1.3.6
 - @now/static-build@0.14.6"
6272f5ce5c416a52a64e3304cd79afbde6310540,luc,2020-01-16 11:03:36+00:00,luc,2020-01-16 11:03:36+00:00,"Publish Canary

 - now@17.0.0-canary.12"
bde0538efe01950cdd738e6c0f8a0e5a165c7d1c,Luc,2020-01-16 00:31:18+00:00,kodiakhq[bot],2020-01-16 00:31:18+00:00,"[now-cli] Fix inspector url with custom domain suffix (#3599)

When the user is using custom domain suffix, the inspector url is a bit different:
```
https://zeit.co/{orgSlug}/{projectName}/{deploymentShortId}/{suffix}
```

This PR adds the necessary logic when constructing the inspector url.

cc @TooTallNate"
5e6775fca01762ce9131c3f3e6a4656d8216b75d,Nathan Rajlich,2020-01-15 23:59:52+00:00,kodiakhq[bot],2020-01-15 23:59:52+00:00,"[now-cli] Display assigned alias for v2 upgraded static legacy deployments (#3601)

Since v2 deployments are auto-assigned aliases, render as such to match more closely to the v2 pipeline when a static deployments was implicitly upgraded to the v2 platform."
e05e0dc40e66f174b9cba32d8b16a17cff49ace3,Andy Bitz,2020-01-15 23:13:35+00:00,Andy Bitz,2020-01-15 23:13:35+00:00,"Publish Canary

 - @now/frameworks@0.0.6-canary.3
 - @now/build-utils@1.3.6-canary.0
 - @now/static-build@0.14.6-canary.0"
96dbc6d3483bd294bdaf55edb681aaa911c5e2b3,Andy,2020-01-15 23:12:55+00:00,GitHub,2020-01-15 23:12:55+00:00,"[now-static-build][frameworks][examples] Fixes examples and adjust frameworks (#3584)

* [examples] Fix ionic-react example

* [examples] Fix vue example

* [examples] Fix mithril example

* [examples] Fix riot example

* Fix readmes

* [now-static-build] Add Zola

* Add tests

* [now-build-utils][frameworks] Adjust detect framework

* Move zola back

* Undo Hugo detection changes

* [examples] Fix Vue logo path

* [now-static-build] Use package.json script if defined instead of framework command

* [now-static-build] Add buildCommand everywhere

* Remove devCommand from frameworks.ts

* Fix type

* Change output directory

* [now-static-build] Remove minNodeRange

* Remove devCommand"
0a63bd47e89455e8b0bbd0529c2f4a1a4adf43eb,luc,2020-01-15 22:27:08+00:00,luc,2020-01-15 22:27:08+00:00,"Publish Canary

 - now@17.0.0-canary.11"
35dd50eb6182cbb0691ced1e1a97be60c87e90d6,Luc,2020-01-15 22:26:23+00:00,GitHub,2020-01-15 22:26:23+00:00,"[now-cli] Pre-fill ""project name"" prompt (#3598)

* pre-fill project name prompt

* add test

* more tests

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
f70ed94c8c32a3de3beaa7de9aa92d39e996072b,Andy,2020-01-15 22:21:03+00:00,GitHub,2020-01-15 22:21:03+00:00,"[api] Add Sentry (#3597)

* [api] Add Sentry

* Use function name

* Add test error

* Revert ""Add test error""

This reverts commit 39cf8a61dad9fcdcb616e418a0deb6ffe9e04ea9.

* Revert ""Revert ""Add test error""""

This reverts commit c718f201da9d80743319ac87e0d4560e718fff53.

* Add logging

* Revert ""Add logging""

This reverts commit 39cd46c8bbeef9024e71fe70478068480a51545b.

* Revert ""Revert ""Revert ""Add test error""""""

This reverts commit e6f63ee21fabb4ac8fc065b74281dbcdf5811216.

* Ignore .env

* Use init function for Sentry inline"
fb0c8600a269670f65f2937983f4a378014eadff,luc,2020-01-15 21:39:11+00:00,luc,2020-01-15 21:39:11+00:00,"Publish Canary

 - now@17.0.0-canary.10"
5023bdd25d8c54ee15b26093d9fffa6151a8b510,Luc,2020-01-15 21:37:57+00:00,kodiakhq[bot],2020-01-15 21:37:57+00:00,"[now-cli] Always add two spaces after emojis and update emojis (#3596)

Updates emojis to fix ""spacing issues"" with previous emojis and always add 2 spaces after emojis.
-  -> 
-  -> 
-  -> 



Also fixes a typo:
```
Linked to <project> (created .now and added it to .nowignore)
->
Linked to <project> (created .now and added it to .gitignore)
```

It looks like this:

![image](https://user-images.githubusercontent.com/6616955/72445323-d590d800-37b1-11ea-92eb-a3b503a95774.png)

![image](https://user-images.githubusercontent.com/6616955/72445618-47692180-37b2-11ea-9aed-3b3268c82ad3.png)


![image](https://user-images.githubusercontent.com/6616955/72445492-11c43880-37b2-11ea-8091-1e1e8ac8b3a0.png)"
bf4917ccf27ad4173d5eb85206be062c660bbb75,Nathan Rajlich,2020-01-15 21:13:44+00:00,kodiakhq[bot],2020-01-15 21:13:44+00:00,"[now-cli] Handle Now v1 to v2 upgrade (#3593)

* Print warnings / notices from the API
* Print `v2` instead of `v1` when upgraded to v2
* Wait for ""alias-assigned"" event in v1 pipeline when upgraded to v2"
64aff3aef4928161a0693fb16c820f2b4084aa45,Luc,2020-01-15 20:54:18+00:00,kodiakhq[bot],2020-01-15 20:54:18+00:00,"[now-cli] Add tests for project linking and framework detection (#3591)

Adds two test cases:
- linking a project and overwriting build settings
- ""overwrite settings"" prompt should not appear when no framework is detected"
62b87d1ed16a96911094b21c87793ce6d67d7ddc,Nathan Rajlich,2020-01-15 14:58:43+00:00,kodiakhq[bot],2020-01-15 14:58:42+00:00,"[now-cli] Remove unnecessary `console.log()` (#3594)

Seems to be a leftover from dd1d9d856."
5872114c8734adfef61634eac026434b5a7c7be1,Andy,2020-01-15 03:11:05+00:00,GitHub,2020-01-15 03:11:05+00:00,Adjust CONTRIBUTING.md for frameworks (#3592)
ce042460515719ab42916a189fe8b83f9120074a,luc,2020-01-14 21:21:00+00:00,luc,2020-01-14 21:21:00+00:00,"Publish Canary

 - now@17.0.0-canary.9"
02b03d45333296a682453dc15e9abc1b1bbf46d6,Luc,2020-01-14 21:09:16+00:00,kodiakhq[bot],2020-01-14 21:09:16+00:00,"[now-cli] Hide ""overwrite project settings?"" prompt if no framework is detected (#3589)

This PR updates the framework auto-detection flow in `deploy` command to not show ""overwrite project settings?"" prompt when the API returns a `framework` property that is `null`."
ea396a2c2029ddc0505f363488f331e6b827f1c9,Steven,2020-01-14 20:29:03+00:00,Steven,2020-01-14 20:29:03+00:00,"Publish Stable

 - @now/build-utils@1.3.5
 - @now/next@2.3.9
 - @now/node@1.3.5
 - @now/static-build@0.14.5"
8c083acf78b749dce07e996779aea8cbd76c510e,Andy,2020-01-14 19:29:52+00:00,GitHub,2020-01-14 19:29:52+00:00,"[now-cli] Change `now dev` log message from `builders` to `Runtimes` (#3590)

* [now-cli] Change `now dev` change log message from `builders` to `runtimes`

* Capitalize

* Capitalize"
4edc1ff2cafa6073b9e8800dddbb409e3f6fcfc6,Steven,2020-01-14 18:41:53+00:00,Steven,2020-01-14 18:41:53+00:00,"Publish Canary

 - @now/build-utils@1.3.5-canary.3
 - now@17.0.0-canary.8
 - @now/next@2.3.9-canary.0
 - @now/node@1.3.5-canary.0
 - @now/static-build@0.14.5-canary.2"
ce76dc980db831ea1cd5af658dbd0c23ba002cc2,Steven,2020-01-14 18:15:17+00:00,kodiakhq[bot],2020-01-14 18:15:17+00:00,"[now-build-utils] Use latest node if no package.json found (#3587)

In a previous release, we pinned the node version to the project so that we could upgrade new projects to a newer version of Node.js while maintaining backwards compatibility with existing projects.

This puts some burden on the user when they're deployment is a year old and their pinned version of Node reaches EOL. Because we currently force the user to add a package.json.

This PR changes the behavior so projects are no longer pinned. Instead, newer deployments get the latest Node unless they opt-in and pin via package.json."
fc4cb9a044b37b41125995767af637e7677cd1df,Andy,2020-01-14 16:39:14+00:00,GitHub,2020-01-14 16:39:14+00:00,[now-cli] Fix certs error message and handling (#3585)
a83eb5e7296f0318152c2a2c6b52e4cc3cc1de10,luc,2020-01-14 15:08:19+00:00,luc,2020-01-14 15:08:19+00:00,"Publish Canary

 - now@17.0.0-canary.7"
1ab6af86c83893af3ac610b4f32a97fe0ca1f2e6,Luc,2020-01-14 12:32:58+00:00,kodiakhq[bot],2020-01-14 12:32:58+00:00,"[now-cli] Fix `now rm -h` (#3581)

Currently, `now rm -h` outputs:
![image](https://user-images.githubusercontent.com/6616955/72279572-b6ba0680-3636-11ea-826a-581ebc59c11c.png)

This PR fixes it:
![image](https://user-images.githubusercontent.com/6616955/72279694-f84ab180-3636-11ea-85e4-360069849748.png)"
b95d2bdcdc53e0598f761d50ea0a2150acb7ddfa,luc,2020-01-14 12:06:22+00:00,luc,2020-01-14 12:06:22+00:00,"Publish Canary

 - now@17.0.0-canary.6"
29222fda9d2e21af216573c17206255753bd7cb1,Luc,2020-01-14 12:04:40+00:00,GitHub,2020-01-14 12:04:40+00:00,"[now-cli] Tackle deploy revamp feedback (#3580)

* fix ""in your organization""

* add feedback link to canary version prompt

* `Detecting framework` -> `Setting up project`

* ""Auto-detect project settings (<framework>)""

* ""Whats your projects name?""

*  ->  

* ""organizations"" -> ""scope""

* always show feedback prompt for `now dev`

* dim feedback prompt"
13b22b38fd880864369ed4bf4a7be3691db874d6,luc,2020-01-14 11:56:07+00:00,luc,2020-01-14 11:56:07+00:00,"Publish Canary

 - now@17.0.0-canary.5"
9f9d5546ef52a8fa2dab8d484022cc88c1f505e1,Luc,2020-01-14 11:54:56+00:00,kodiakhq[bot],2020-01-14 11:54:56+00:00,"[now-cli] Update logo  ->  (#3582)

The old ""ZEIT Now"" logo was displayed here, for example:
![image](https://user-images.githubusercontent.com/6616955/72279805-347e1200-3637-11ea-9eab-9b3050b86b74.png)


This PR updates it to the  symbol. Can someone running Windows/Linux help me check the  character also exists there? (cc @dav-is @marcosnils)"
22d93baf2028a259c0440aec9672226406edf786,luc,2020-01-14 11:02:00+00:00,luc,2020-01-14 11:02:00+00:00,"Publish Canary

 - @now/frameworks@0.0.6-canary.2
 - now@17.0.0-canary.4
 - now-client@6.0.2-canary.2"
a63ea8c884ca704a7eda4d121cf81fe7894fa271,Luc,2020-01-14 10:58:29+00:00,kodiakhq[bot],2020-01-14 10:58:29+00:00,"[tests] Fix now-cli tests (#3576)

- [x] adds `--confirm` to `now deploy` command
- [x] adds `--confirm` to existing tests
- [x] fix settings types in `@now/frameworks`
- [x] write deployment url to stdout (instead of an alias)"
41023c488efe49f3b26965d378090de804a2bae9,Andy Bitz,2020-01-13 20:34:19+00:00,Andy Bitz,2020-01-13 20:34:19+00:00,"Publish Canary

 - @now/static-build@0.14.5-canary.1"
ebffc8af434956668fc32fd8bd91af15390b26fc,Andy,2020-01-13 19:35:18+00:00,GitHub,2020-01-13 19:35:18+00:00,"[now-static-build] Fix Docusaurus output directory (#3583)

* [now-static-build] Fix Docusaurus output directory

* Add tests"
e7cb9fc5e2dbdf4f3274b8a222a9e7ead8eb4a78,Naoyuki Kanezawa,2020-01-13 16:58:10+00:00,Steven,2020-01-13 16:58:10+00:00,"[tests] Revert NOW_TOKEN env for health checks (#3578)

As we discussed, the health checks need to assign `NOW_TOKEN` env var.

Co-authored-by: Steven <steven@ceriously.com>"
bf92ffc1a7fa6a4147bf0fb2d0d6bcee25a03988,Andy Bitz,2020-01-13 16:15:28+00:00,Andy Bitz,2020-01-13 16:15:28+00:00,"Publish Canary

 - @now/build-utils@1.3.5-canary.2"
4f88089cfedb60e6872b1448f8a826596b203f07,Andy,2020-01-13 16:14:41+00:00,GitHub,2020-01-13 16:14:41+00:00,"[now-build-utils] Error for unused `functions` (#3579)

* [now-build-utils] Error for unused `functions`

* Update packages/now-build-utils/src/detect-builders.ts

Co-Authored-By: Steven <steven@ceriously.com>

Co-authored-by: Steven <steven@ceriously.com>"
c0416189eba2f382ae8a19ba14db80fac621820f,Andy Bitz,2020-01-11 00:30:12+00:00,Andy Bitz,2020-01-11 00:30:12+00:00,"Publish Canary

 - now@17.0.0-canary.3"
e2105cec879eff4fee874e1e88aa0a40a2e3b7b0,Andy,2020-01-11 00:29:15+00:00,GitHub,2020-01-11 00:29:15+00:00,[now-cli] Fix emoji spacing (#3574)
6cb89c3cab713acc951f051c61fa7b4fdbffc953,Andy Bitz,2020-01-11 00:14:04+00:00,Andy Bitz,2020-01-11 00:14:04+00:00,"Publish Canary

 - now@17.0.0-canary.2"
9a1877de56ed8eb77343d169d66bfa6419580b35,Andy,2020-01-11 00:13:20+00:00,GitHub,2020-01-11 00:13:20+00:00,[now-cli] Fix emoji width (#3573)
ea36b9e11c6bfc281d61e5a35ee96a0088dc85b8,Andy Bitz,2020-01-10 23:39:34+00:00,Andy Bitz,2020-01-10 23:39:34+00:00,"Publish Canary

 - @now/frameworks@0.0.6-canary.1
 - now@17.0.0-canary.1
 - now-client@6.0.2-canary.1
 - @now/static-build@0.14.5-canary.0"
478104cf99fcbd2957ca234c66677a3d02ae4090,Andy Bitz,2020-01-10 23:38:39+00:00,Andy Bitz,2020-01-10 23:38:39+00:00,Bump Now CLI version
c1dd0cfabaffd9182423533e45a6c65cc1b8c981,Andy,2020-01-10 23:35:34+00:00,Leo Lamprecht,2020-01-10 23:35:34+00:00,"[now-client][now-cli] Revamp Now CLI deploy command (#3467)

* [now-cli] Add support for v12 and new detectors

* first draft

* fix typescript errors

* fix typescript errors (2)

* fix typescript types again

* fix bug in link.ts

* add inspect/preview/production logs

* log now cli version

* adjust copied to clipboard

* print inspector url earlier

* reset stamp when redeploying with project settings

* show ""deploying"" loader

* remove ""...""

* add first prod deployment info logs

* add first prod deployment info logs (2)

* remove console.log

* always set projectName

* fix deploying spinner

* improve project settings edition

* implement flow improvements

* adjust ""linked"" message order

* add ""detecting framework""

* defer printing indications to the end

* remove [in clipboard]

* refactor

* link correct folder when running `now <path>`

* fix incorrect scope when deploying to a team

* fix scope

* add project name in ""linked to"" message

* fix ""project already exists""

* print to stdout

* remove old stdout.write

* remove incorrect `checked`

* remove `--yes`

* add prompts

* add @types/prompts

* try prompts for select org

* roll back to inquirer and add styling to select

* remove nonsense

* format text inputs + patch inquirer

* add confirm input and use for yes/no q

* remove prompts

*  input details

* only copy default projectSettings partially

* adjust multiselect style

* remove console.log

* handle `x-now-tip` headers

* refactor patch-inquirer

* dim default project settings

* add spinners

* use clearTimeout to cancel spinner

* use 1s timeout

* do not apply timeout for deploying spinners

* remove .gitignore from diff

* fix tests

* Remove test

* Revert ""Remove test""

This reverts commit 2dba1a8cc3894220fccd68746d07b198556b7ba8.

Co-authored-by: Luc <luc.leray@gmail.com>
Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
15ce92b9e7bc0ed8e0408bfea5cb7dc69538ceef,Andy,2020-01-10 23:08:20+00:00,Leo Lamprecht,2020-01-10 23:08:20+00:00,"[gatsby-plugin-now] Remove temporarily (#3568)

* [gatsby-plugin-now] Remove temporary

* Remove from now-static-build"
dd1b5f3421571eb79b7a84393044a47d2edc0441,Andy,2020-01-10 22:58:23+00:00,Leo Lamprecht,2020-01-10 22:58:23+00:00,"[now-cli] (Major) Remove `now alias` without arguments (#3318)

* [now-cli] (Major) Remove `now alias` without arguments

* Update packages/now-cli/src/commands/alias/set.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Add URL

Co-authored-by: Nathan Rajlich <n@n8.io>
Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
b8a11be1a553dd1f4610db4d2f1cc06553e6d9d2,Nathan Rajlich,2020-01-10 22:45:27+00:00,Leo Lamprecht,2020-01-10 22:45:27+00:00,"[now-cli] Remove hard-refresh to rebuild for `now dev` (#3328)

This behavior is legacy from the very early days of `now dev`
(before the `files` array was returned from Runtimes) and adds
complexity. We can remove it at this point to simplify dev server.

Co-authored-by: Andy <AndyBitz@users.noreply.github.com>
Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
1e308dc6ce0a96d2b0bcfa839dbf9cb648a13f37,Andy,2020-01-10 22:36:45+00:00,GitHub,2020-01-10 22:36:45+00:00,[examples] Fix scully test (#3572)
117ce28ddc4ae8f104b5a32e8ecc79101281a1f0,Steven,2020-01-10 20:33:24+00:00,Steven,2020-01-10 20:33:24+00:00,"Publish Canary

 - @now/frameworks@0.0.6-canary.0
 - @now/build-utils@1.3.5-canary.1
 - now@16.7.4-canary.0"
85296de51db9e61bd4c9a41fdb39a1bfea33db4c,Steven,2020-01-10 19:56:48+00:00,kodiakhq[bot],2020-01-10 19:56:47+00:00,"[now-build-utils] Add function `detectApiDirectory()` (#3567)

- Add new exported function `detectApiDirectory()`
- Add tests for both `detectApiDirectory()` and `detectOutputDirectory()`"
0b659326d99f930d2b24fc6937a7b8d91cdb4376,Andy,2020-01-10 19:36:17+00:00,GitHub,2020-01-10 19:36:17+00:00,"[frameworks] Revert rename (#3571)

* Revert ""[frameworks] Fix import in test (#3570)""

This reverts commit 9ee86df69d35ffee69e07c301f7b9247916842de.

* Revert ""[frameworks] Rename frameworks to now-frameworks (#3569)""

This reverts commit daa5cbdd4be7f7773a3ed40718e88c6d4f8efaab."
f35f244deb232977def3131f2295d1a81627b506,Andy,2020-01-10 19:22:59+00:00,kodiakhq[bot],2020-01-10 19:22:59+00:00,"[now-build-utils] Only allow Serverless Functions in `api/` (#3566)

Only allow Serverless Functions in `api/`."
9ee86df69d35ffee69e07c301f7b9247916842de,Andy,2020-01-10 19:01:56+00:00,GitHub,2020-01-10 19:01:56+00:00,[frameworks] Fix import in test (#3570)
daa5cbdd4be7f7773a3ed40718e88c6d4f8efaab,Andy,2020-01-10 18:13:27+00:00,GitHub,2020-01-10 18:13:27+00:00,"[frameworks] Rename frameworks to now-frameworks (#3569)

* [frameworks] Rename frameworks to now-frameworks

* Adjust .nowignore"
17b7a7bea9d7746a56cbe3e5a46dcc7b6b68aecf,Andy,2020-01-10 16:44:38+00:00,Leo Lamprecht,2020-01-10 16:44:37+00:00,[examples] Fix Nuxt.js example (#3565)
bcbe0d806059dd53bc9183df17af6b18672587eb,Andy,2020-01-10 16:15:22+00:00,Leo Lamprecht,2020-01-10 16:15:22+00:00,[examples] Fix subdirectory (#3564)
3fdea52ff96bb9410609eadda3b1bb1efd88ae33,Andy,2020-01-10 14:14:58+00:00,GitHub,2020-01-10 14:14:58+00:00,"[examples] Add CODEOWNERS  (#3545)

* Add CODEOWNERS

* Add EXAMPLE_README_TEMPLATE.md

* Add ember"
3cd5a87e2071b68c9f6cde8206063b788f273e9e,Andy,2020-01-10 13:34:20+00:00,GitHub,2020-01-10 13:34:20+00:00,[examples] Add README (#3544)
4625f66ebd55511f12e8d9fca6df72986dcbc2db,Andy,2020-01-10 12:37:33+00:00,GitHub,2020-01-10 12:37:33+00:00,"[examples] Adjust readmes and info endpoint (#3542)

* Adjust README links

* Change example info

* Fix id check"
0c6c6677a7d5705a6907c53008eb94dd7e4334b9,Andy,2020-01-10 11:48:45+00:00,GitHub,2020-01-10 11:48:45+00:00,"[examples] Make `-functions` example the default (#3541)

* Remove now-examples references

* Adjust gatsby example

* Adjust svelte example

* Adjust vanilla example"
2db627b79d9839ec092f11d4510e470fef6539af,Andy,2020-01-09 23:14:51+00:00,GitHub,2020-01-09 23:14:51+00:00,"Adds manifest.json to examples folder (#3536)

* Revert ""Revert ""[examples] Add manifest.json""""

This reverts commit c65336e63b6749b8a1e8088d2e02c0e226d8bbd3.

* Revert ""Revert ""Do not use now-examples anymore""""

This reverts commit ac72e944a76795b1bb46f23fd61f04abf6b1aca8.

* Update nowignore

* Fix join

* Fix JSON

* Fix header

* Replace manifest.json with @now/frameworks

* Adjust readmes

* Adjust .nowignore

* Update scully

* Fix description

* Update examples/create-react-app/src/App.js

Co-Authored-By: Shu Ding <ds303077135@gmail.com>

* Update readme

* Add websites

* Use https

* Adjust example URL

* Change order

Co-authored-by: Shu Ding <ds303077135@gmail.com>"
7064f4ee404d9d8c90dda66aeba340b3df9af043,Steven,2020-01-09 16:52:54+00:00,Steven,2020-01-09 16:52:54+00:00,"Publish Canary

 - @now/build-utils@1.3.5-canary.0
 - @now/routing-utils@1.5.2-canary.0"
bf06e9c63c153f8c4a28bb3b0111374210b2a3d1,Steven,2020-01-09 16:52:03+00:00,GitHub,2020-01-09 16:52:03+00:00,"[now-routing-utils] Add extension to routes (#3534)

Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
c65336e63b6749b8a1e8088d2e02c0e226d8bbd3,Andy Bitz,2020-01-09 16:28:53+00:00,Andy Bitz,2020-01-09 16:28:53+00:00,"Revert ""[examples] Add manifest.json""

This reverts commit b7eca1d069eec3c61b2c3e467b8298a2c06c6063."
ac72e944a76795b1bb46f23fd61f04abf6b1aca8,Andy Bitz,2020-01-09 16:28:49+00:00,Andy Bitz,2020-01-09 16:28:49+00:00,"Revert ""Do not use now-examples anymore""

This reverts commit fdb74b7971e11abe4a447cf1268fb67d91f5ecfc."
fdb74b7971e11abe4a447cf1268fb67d91f5ecfc,Andy Bitz,2020-01-09 16:26:55+00:00,Andy Bitz,2020-01-09 16:26:55+00:00,Do not use now-examples anymore
b7eca1d069eec3c61b2c3e467b8298a2c06c6063,Andy Bitz,2020-01-09 16:24:54+00:00,Andy Bitz,2020-01-09 16:24:54+00:00,[examples] Add manifest.json
4930028674c6e6e30428280acf2bf6def8aa9093,Shu Ding,2020-01-09 16:12:08+00:00,Shu Ding,2020-01-09 16:12:08+00:00,"Publish Stable

 - @now/frameworks@0.0.5
 - @now/build-utils@1.3.4
 - now@16.7.3
 - @now/routing-utils@1.5.1"
14a82717f10c62e79181fd3fdf284b28ecdc08f0,Andy,2020-01-09 16:09:27+00:00,GitHub,2020-01-09 16:09:27+00:00,Fix changelog.js script (#3535)
9a31d49bc9c5c39158e67f8093965b10655c2f59,Andy,2020-01-09 15:55:33+00:00,Leo Lamprecht,2020-01-09 15:55:33+00:00,"Add `prettier` to `package.json` (#3532)

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>
Co-authored-by: kodiakhq[bot] <49736102+kodiakhq[bot]@users.noreply.github.com>"
f8ddda9a4a7a381b2b470da0a3be0a11e45a2e99,Shu Ding,2020-01-09 15:55:12+00:00,Leo Lamprecht,2020-01-09 15:55:12+00:00,fix the name of create-react-app (#3533)
9d0b0c6e410343eead5e43f650c942d4b301f84a,Steven,2020-01-09 15:32:22+00:00,kodiakhq[bot],2020-01-09 15:32:22+00:00,"[now-routing-utils] Fix error handling on path-to-regexp error (#3523)

This PR fixes an issue where certain patterns caused `path-to-regexp` to throw when it should be returning an error object. The fix is to make sure all inputs work properly with `path-to-regexp` before continuing."
7e584be2cd6df1558b767106dda5b9f1aa426fd1,Shu Ding,2020-01-09 14:58:33+00:00,GitHub,2020-01-09 14:58:33+00:00,add back authorization header for github api (#3529)
4dd640636cfe2b1e449d140ce5c4bac978684780,Andy,2020-01-09 14:16:46+00:00,kodiakhq[bot],2020-01-09 14:16:46+00:00,"Clean up files in the repo (#3528)

Clean up files in the repo"
0a3ed02a33f58511ea82e28f770624eb5efca110,Andy Bitz,2020-01-09 13:02:56+00:00,Andy Bitz,2020-01-09 13:02:56+00:00,"Publish Canary

 - @now/build-utils@1.3.4-canary.1
 - now@16.7.3-canary.0
 - @now/routing-utils@1.5.1-canary.0"
97792dbad04148e15332376a21b5fba307ce60fe,Andy Bitz,2020-01-09 13:01:47+00:00,Andy Bitz,2020-01-09 13:01:47+00:00,[now-cli] Bump `@zeit/fun` to `0.11.0`
25ab63c96979dcaa45c9e659ab03d51ffc2137c4,Steven,2020-01-08 23:11:43+00:00,kodiakhq[bot],2020-01-08 23:11:43+00:00,"[tests] Update tests for now-php custom runtime (#3524)

Our tests were failing so the latest `now-php` runtime should work properly."
6e06b13bf38039482bf64031889b9ece14839e8e,JJ Kasper,2020-01-08 19:32:59+00:00,kodiakhq[bot],2020-01-08 19:32:59+00:00,"[now-routing-utils] Make sure to update segments in destination hash (#3517)

While migrating redirects on `/docs` I noticed we don't update segments in the `hash` of the destination. This updates to also handle these segments and adds a test for this behavior"
6cf5892e27d2e3abb57bd21a6489c546d35ff2ff,Steven,2020-01-08 16:21:26+00:00,Steven,2020-01-08 16:21:26+00:00,"Publish Canary

 - @now/build-utils@1.3.4-canary.0"
f65b7ec5467f9cc79ec52b7f044cd5649a5fff04,Steven,2020-01-08 16:15:55+00:00,kodiakhq[bot],2020-01-08 16:15:55+00:00,"[now-build-utils] Add getDiscontinuedNodeVersions() function (#3522)

Add an exported function `getDiscontinuedNodeVersions()` so we can gracefully handle discontinued versions of Node in other parts of the system."
a36c2eabb33a679fd2609cc35b9db9ab2b2ed3dc,Max Rovensky,2020-01-08 13:21:09+00:00,Max Rovensky,2020-01-08 13:21:09+00:00,"Publish Stable

 - @now/frameworks@0.0.4
 - @now/build-utils@1.3.3
 - now@16.7.2
 - @now/next@2.3.8
 - @now/node@1.3.4
 - @now/static-build@0.14.4"
be93c55c0b98a87bde7cb4736fbc5d57be601dfb,Max Rovensky,2020-01-08 12:32:00+00:00,Max Rovensky,2020-01-08 12:32:00+00:00,"Publish Canary

 - now@16.7.2-canary.6"
eeefbeaed4fd63d50e340989a1d61dc936b99844,Andy,2020-01-08 12:23:56+00:00,GitHub,2020-01-08 12:23:56+00:00,"Use `project` in now.json and remove unused file (#3518)

* Remove unused file

* Use project instead

* Remove project"
027bc6ab5a20739f3f1e126b1e6313c3f2ea23c5,Max,2020-01-08 10:03:40+00:00,kodiakhq[bot],2020-01-08 10:03:40+00:00,"Don't render `Synced X files` when everything got deduped (#3520)

This removes `Synced XX files` message if the entire deployment got deduped"
890de6a625e1c27375db81efc21a822aba2cef6e,Andy,2020-01-07 22:55:39+00:00,GitHub,2020-01-07 22:55:39+00:00,"Add API for frameworks and examples (#3514)

* Add API for frameworks and examples

* Adjust headers

* Update frameworks list

* Always use latest

* Add types

* Use now repo for downloading and listing

* Use .existsSync

* Remove unused packages

* Use 307 for redirect

* Add examples

* Update tsconfig.json

Co-Authored-By: Steven <steven@ceriously.com>

* Make examples unique

* Remove detectors from frameworks API

* Use /api instead of Next.js

* Install dependencies

* Rename project

* Change name

* Empty

* Change name

* Update api/tsconfig.json

Co-Authored-By: Steven <steven@ceriously.com>

* Update examples

Co-authored-by: Steven <steven@ceriously.com>"
537d508a1e2b3ae977e12963dcd189a65dcc1493,Steven,2020-01-07 21:14:57+00:00,Steven,2020-01-07 21:14:57+00:00,"Publish Canary

 - @now/build-utils@1.3.3-canary.0
 - now@16.7.2-canary.5
 - @now/next@2.3.8-canary.0
 - @now/node@1.3.4-canary.0
 - @now/static-build@0.14.4-canary.0"
3b98cdac4bb6991e1027e524ad999bc6894325f6,Steven,2020-01-07 21:01:09+00:00,kodiakhq[bot],2020-01-07 21:01:09+00:00,"[now-build-utils] Add property hideStackTrace (#3516)

This adds a few properties to NowBuildError so that we can display in the web interface."
aaf7d6b1cdaa5f3ed5ebae314a3a014a4291eda0,Max Rovensky,2020-01-07 15:18:11+00:00,Max Rovensky,2020-01-07 15:18:11+00:00,"Publish Canary

 - @now/frameworks@0.0.4-canary.0
 - now@16.7.2-canary.4"
d4b6814d40f3a89fec5295306baa918613703400,Luc,2020-01-07 15:12:33+00:00,kodiakhq[bot],2020-01-07 15:12:33+00:00,"[@now/frameworks] Improve `Framework` type (#3515)

Makes types more specific: we want to avoid missing project settings placeholder/value in the UIs that consume frameworks (cli, front-end, ...)."
a85f11aaefd070cfea2f9bfda29b4f2fe50bd161,Max,2020-01-07 12:18:41+00:00,kodiakhq[bot],2020-01-07 12:18:41+00:00,"Store file count on `file_count` event for future use (#3505)

Fixes an undefined length issue introduced by #3502"
090c3ef9fc6ac8c92ba369a3b47b5ac06e690f8c,Luc,2020-01-07 10:38:13+00:00,kodiakhq[bot],2020-01-07 10:38:13+00:00,"[now-cli] Fix `signal-exit` in yarn.lock (#3508)

Fix https://github.com/zeit/now/pull/3490/files#r363418297."
46c8cb1a68905c727b6dcced76281c50f1e32d5a,Steven,2020-01-06 23:44:26+00:00,Steven,2020-01-06 23:44:26+00:00,"Publish Stable

 - @now/build-utils@1.3.2
 - @now/next@2.3.7
 - @now/node@1.3.3
 - @now/static-build@0.14.3"
faeb053ea610d207c80c5461289db014d890aa3f,Steven,2020-01-06 23:30:34+00:00,Steven,2020-01-06 23:30:34+00:00,"Publish Canary

 - @now/build-utils@1.3.2-canary.1
 - now@16.7.2-canary.3
 - @now/next@2.3.7-canary.1
 - @now/node@1.3.3-canary.1
 - @now/static-build@0.14.3-canary.1"
708a09b86a00e21f12947df5ce3dcfaa9e0b2b2c,Steven,2020-01-06 23:29:08+00:00,GitHub,2020-01-06 23:29:08+00:00,"[now-build-utils] Add usage of package.json engines (#3512)

Add a better upgrade message that shows usage of `engines` in the `package.json` file."
89403e93e4b843833ab3c5f42048dd3aa578e8b2,Steven,2020-01-06 22:01:47+00:00,Steven,2020-01-06 22:01:47+00:00,"Publish Canary

 - @now/build-utils@1.3.2-canary.0
 - @now/next@2.3.7-canary.0
 - @now/node@1.3.3-canary.0
 - @now/static-build@0.14.3-canary.0"
ecb0c08fe2b73fd489da2ee4f417c160de755b60,Steven,2020-01-06 22:00:46+00:00,GitHub,2020-01-06 22:00:46+00:00,"[now-build-utils] Fix now dev to use system node (#3509)

This PR will use the system installed version of Node.js and avoid printing a warning or error if a discontinued version is selected.

This optimization was already in `@now/node` but for some reason it was never add to `@now/next`.

The reason why its relevant today is because the warnings turned into errors due to Node 8 deprecation and we don't have the ""Project"" in `now dev` so we don't know which version of node to select.

So instead of determining the version, `now dev` will always use `node` in the PATH and avoid printing warnings or errors. This also results in less FS reads since we no longer need to read package.json."
0b88c158b98150240345f1ef6d638bee46f6fb91,Andy Bitz,2020-01-06 19:15:04+00:00,Andy Bitz,2020-01-06 19:15:04+00:00,"Publish Stable

 - @now/frameworks@0.0.3"
ec3a38107a58a0bc7a802274564ee34f9921dabf,Andy,2020-01-06 19:12:38+00:00,GitHub,2020-01-06 19:12:38+00:00,"[frameworks] Add `settings` to frameworks (#3506)

* [frameworks] Add `settings` to frameworks

* Fix svelte

* Add `outputDirectory`

* Update Next.js outputDirectory placeholder

* Type settings

Co-authored-by: Leo Lamprecht <mindrun@icloud.com>"
0c0f1c6eb5bcbc8c891052963d7378c49d2754d7,Steven,2020-01-06 18:21:41+00:00,Steven,2020-01-06 18:21:41+00:00,"Publish Stable

 - @now/build-utils@1.3.1
 - @now/next@2.3.6
 - @now/node@1.3.2
 - @now/static-build@0.14.2"
ed296ef733373ede471e1e4ce48591fe621281e9,Steven,2020-01-06 18:10:05+00:00,Steven,2020-01-06 18:10:05+00:00,"Publish Canary

 - @now/build-utils@1.3.1-canary.1
 - now@16.7.2-canary.2
 - @now/static-build@0.14.2-canary.0"
246f47ec95461e2bb2cfddbf7b0f6618e4ec6b1a,Steven,2020-01-06 18:07:25+00:00,kodiakhq[bot],2020-01-06 18:07:25+00:00,"[now-static-build] Fix `distDir` when zero config framework is detected (#3507)

There was a regression with framework detection that was preferring the frameworks output directory instead of the `distDir` defined in the `@now/static-build`.

The fix is to only run framework detection when `builds` is not defined (ie zero config).

Related to https://github.com/Ebury/chameleon/pull/63"
9d95b99b72bb407a2ce3927066e56fb1ed07b695,Steven,2020-01-06 16:07:47+00:00,kodiakhq[bot],2020-01-06 16:07:47+00:00,"[now-build-utils] Add support for dynamic `handle: miss` (#3457)

This extends the behavior of `featHandleMiss: true` flag to do the following:

- Reduce zero config API routes so that only dynamic path segment files (`api/[id].js`) get a route.
- Remove zero config out directory route (`public/`)the files will be renamed instead.
- Use redirects for API routes when `cleanUrls: true` and use rewrites when `cleanUrls: false` from extension to the extension-less file.
- Normalize existing routes to begin with `^` and end with `$`."
3de8ae9d7eed5845e136f75c1ede0daded8872e4,Steven,2020-01-06 15:19:23+00:00,Steven,2020-01-06 15:19:23+00:00,"Publish Canary

 - @now/build-utils@1.3.1-canary.0
 - @now/node@1.3.2-canary.0"
44f6e1904ee070b38511996f3bbe539f2603b8c9,Steven,2020-01-06 15:00:27+00:00,kodiakhq[bot],2020-01-06 15:00:27+00:00,"[now-build-utils][now-node] Throw new NowBuildError() (#3496)

This PR does the following

- Add and export class, `NowBuildError`, that can be thrown to stop the build and print an error but it will not print a stack trace.
- Improve logic for discontinued node versions and add more tests
- Remove hack (#3425) for undefined TERM, fixed by updating dependencies
- Rename `silent` variable to `isAuto` which means the node version was automatically selected, not defined in `package.json`
- Rename `test` deployments to `test2020` so that a fresh project is created with latest Node.js 12.x"
d9c84fc4ce444b9562b935931123dca83be5dc9c,Max Rovensky,2020-01-06 13:45:01+00:00,Max Rovensky,2020-01-06 13:45:01+00:00,"Publish Canary

 - now@16.7.2-canary.1
 - @now/python@1.1.1-canary.0"
b5142d935b5d070be9a29951d181a20543e13cbb,Max,2020-01-06 13:43:44+00:00,kodiakhq[bot],2020-01-06 13:43:44+00:00,"Fix event order in CLI (#3502)

This should fix [PRODUCT-893](https://zeit.atlassian.net/browse/PRODUCT-893) and [PRODUCT-941](https://zeit.atlassian.net/browse/PRODUCT-941)"
718a451110e0490cdb15c2447522d9d2128098ee,luc,2020-01-06 10:24:45+00:00,luc,2020-01-06 10:24:45+00:00,"Publish Canary

 - now@16.7.2-canary.0
 - now-client@6.0.2-canary.0"
9755847855e33292bce6b8a0d5213023c9010790,Andy,2020-01-06 10:19:55+00:00,kodiakhq[bot],2020-01-06 10:19:55+00:00,"[now-client] Ignore `.env.*` files by default (#3436)

Ignore `.env.*` files by default.

[PRODUCT-804]

[PRODUCT-804]: https://zeit.atlassian.net/browse/PRODUCT-804"
abc417b6b3bfc64643d499695157dc1c04982e6c,Luc,2020-01-06 09:01:17+00:00,kodiakhq[bot],2020-01-06 09:01:17+00:00,"[now-client] Use `@zeit/fetch` instead of `node-fetch` (#3490)

We want to take advantage of the better defaults and retry policies (among others).

This bumps `@zeit/fetch` and replaces `node-fetch` with `@zeit/fetch` in `now-client`.

Also update retry policy for ""uploading"" files to:
- base 10ms
- 5 retries
- factor 6

which means the timeouts are 10, 60, 360, 2160, 12960"
d6f71c8d7bad6ad8efeb70e5afc07a2af796a766,Steven,2020-01-03 17:39:08+00:00,Steven,2020-01-03 17:39:08+00:00,"Publish Stable

 - @now/frameworks@0.0.2
 - @now/build-utils@1.3.0
 - now@16.7.1
 - now-client@6.0.1
 - @now/next@2.3.5
 - @now/node@1.3.1
 - @now/python@1.1.0
 - @now/routing-utils@1.5.0
 - @now/static-build@0.14.1"
d90892dc9c8898dab0368b696456ffae61afc508,JJ Kasper,2020-01-03 14:45:34+00:00,JJ Kasper,2020-01-03 14:45:34+00:00,"Publish Stable

 - @now/next@2.3.4"
60d2f8b96ce1ca49ad7653b53d19a369296cc2ca,Tim Neutkens,2020-01-03 11:36:15+00:00,Tim Neutkens,2020-01-03 11:36:15+00:00,"Publish Canary

 - @now/next@2.3.4-canary.1"
2488adf80d1fd4293e1d70603037819c7faafcfb,JJ Kasper,2020-01-03 11:32:20+00:00,Tim Neutkens,2020-01-03 11:32:20+00:00,"[now-next] Add support for experimental basePath (#3478)

* Add support for experimental basePath

* Update base-path fixture

* Update type

* Update basePath route source and add invariants"
9deb5b31d2be15abcf49670db85dae6c86d38e8c,Steven,2020-01-03 00:32:01+00:00,Steven,2020-01-03 00:32:01+00:00,"Publish Canary

 - now@16.7.1-canary.5"
ae55823c3cf6b4672fdf59504c3450e0856733b6,Steven,2020-01-02 23:09:49+00:00,Steven,2020-01-02 23:09:49+00:00,"Publish Canary

 - @now/frameworks@0.0.2-canary.3
 - @now/build-utils@1.2.1-canary.7
 - @now/static-build@0.14.1-canary.8"
d3395553fe7d2f3a8a4c69a2dbab48442e312f95,Andy,2020-01-02 22:25:57+00:00,kodiakhq[bot],2020-01-02 22:25:57+00:00,"[frameworks][now-static-build] Add support for Scully (#3469)

Add support for Scully."
e742dd3a48be82059da1d859528f70e00a693005,JJ Kasper,2020-01-02 19:24:06+00:00,JJ Kasper,2020-01-02 19:24:06+00:00,"Publish Canary

 - @now/next@2.3.4-canary.0"
4f0f44e746895978e4839259b43cb83ff8526166,JJ Kasper,2020-01-02 19:18:38+00:00,JJ Kasper,2020-01-02 19:18:38+00:00,"Publish Stable

 - @now/next@2.3.3"
0da98a7f5d25f4c24e0d169bdcf30573859d25ed,JJ Kasper,2020-01-02 19:15:16+00:00,GitHub,2020-01-02 19:15:16+00:00,"Revert ""[now-next] Implement handle: miss for custom-routes (#3456)"" (#3488)

This reverts commit 40bbff9beee9444678e1603bd338bb83798c7bc7."
685989ae57d8b1c5d5626bf625922c5d6e2bda03,Steven,2020-01-02 17:42:36+00:00,Steven,2020-01-02 17:42:36+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.6
 - @now/next@2.3.3-canary.0
 - @now/node@1.3.1-canary.1
 - @now/static-build@0.14.1-canary.7"
6bc121e7b16e4ec2229066df0b891a74f867bfe7,Steven,2020-01-02 17:34:31+00:00,kodiakhq[bot],2020-01-02 17:34:31+00:00,"[now-build-utils] Add support for `getLatestNodeVersion()` and `config.nodeVersion` (#3483)

This PR does a few things:

1. Add functions `getLatestNodeVersion()` and `getOldestNodeVersion()` for use in api-project.
2. Add property `config.nodeVersion` which has precedence over default Node 8.

We want new projects to use the latest node version without setting any configuration but we don't want to break old projects. So during project creation, the value of `getLatestNodeVersion()` will be saved and then each deployment of that project will assign that value to `config.nodeVersion`. 

Implements [PRODUCT-837]

[PRODUCT-837]: https://zeit.atlassian.net/browse/PRODUCT-837"
56d3fed954e02f96ba8f18d9509a1c8dbcb04456,JJ Kasper,2019-12-31 21:56:54+00:00,JJ Kasper,2019-12-31 21:56:54+00:00,"Publish Stable

 - @now/next@2.3.2"
40bbff9beee9444678e1603bd338bb83798c7bc7,JJ Kasper,2019-12-31 19:36:50+00:00,kodiakhq[bot],2019-12-31 19:36:50+00:00,"[now-next] Implement handle: miss for custom-routes (#3456)

This implements `{ handle: 'miss' }` which will allow more efficiently checking dynamic routes after a matching rewrite. This is not fully available in production yet and the tests will fail for this PR until it is ready in Now

x-ref: https://github.com/zeit/next.js/pull/9568"
66ab011f4a3d20e3fa59dccaf1498793bfa78fad,Steven,2019-12-30 18:48:36+00:00,Steven,2019-12-30 18:48:36+00:00,"Publish Canary

 - @now/next@2.3.2-canary.0
 - @now/node@1.3.1-canary.0"
f4237d3db0912c4246581a83499a59bfe4065095,Steven,2019-12-30 18:26:32+00:00,kodiakhq[bot],2019-12-30 18:26:32+00:00,"[now-node][now-next] Bump node-file-trace to 0.4.1 (#3481)

Bumps `node-file-trace` to version [0.4.1](https://github.com/zeit/node-file-trace/releases/tag/0.4.1).

- Add special case for semver@7: [#87](https://github.com/zeit/node-file-trace/pull/87)
- Handle babel/ts compiled imports: [#79](https://github.com/zeit/node-file-trace/pull/79)"
6f9a083dba37b117a7f5d26392ba405c12161ead,JJ Kasper,2019-12-30 17:58:19+00:00,kodiakhq[bot],2019-12-30 17:58:19+00:00,"[now-next] Add handling for new routes-manifest version (#3482)

This handles the new `routes-manifest` version in the latest canary of Next.js since we throw an error if the version isn't handled by `@now/next`

unblocks: https://github.com/zeit/now/pull/3481"
688fcc6a5b7ae9140cd0a0be6afc67299bbdbbaa,dependabot[bot],2019-12-30 14:13:42+00:00,kodiakhq[bot],2019-12-30 14:13:42+00:00,"Bump handlebars from 4.1.2 to 4.5.3 (#3476)

Bumps [handlebars](https://github.com/wycats/handlebars.js) from 4.1.2 to 4.5.3.
<details>
<summary>Changelog</summary>

*Sourced from [handlebars's changelog](https://github.com/wycats/handlebars.js/blob/master/release-notes.md).*

> ## v4.5.3 - November 18th, 2019
> Bugfixes:
> 
> - fix: add ""no-prototype-builtins"" eslint-rule and fix all occurences - f7f05d7
> - fix: add more properties required to be enumerable - 1988878
> 
> Chores / Build:
> - fix: use !== 0 instead of != 0 - c02b05f
> - add chai and dirty-chai and sinon, for cleaner test-assertions and spies, 
>   deprecate old assertion-methods  - 93e284e, 886ba86, 0817dad, 93516a0
> 
> Security:
> 
> - The properties `__proto__`, `__defineGetter__`, `__defineSetter__` and `__lookupGetter__` 
>   have been added to the list of ""properties that must be enumerable"".
>   If a property by that name is found and not enumerable on its parent, 
>   it will silently evaluate to `undefined`. This is done in both the compiled template and the ""lookup""-helper. 
>   This will prevent new Remote-Code-Execution exploits that have been
>   published recently.
> 
> Compatibility notes: 
> 
> - Due to the security-fixes. The semantics of the templates using
>   `__proto__`, `__defineGetter__`, `__defineSetter__` and `__lookupGetter__` in the respect that those expression now return 
>   `undefined` rather than their actual value from the proto.
> - The semantics have not changed in cases where the properties are  enumerable, as in:
> 
> ```js
> {
>   __proto__: 'some string'
> }
> ```
> 
> - The change may be breaking in that respect, but we still only 
>   increase the patch-version, because the incompatible use-cases
>   are not intended, undocumented and far less important than fixing
>   Remote-Code-Execution exploits on existing systems.
> 
> 
> 
> [Commits](https://github.com/wycats/handlebars.js/compare/v4.5.2...v4.5.3)
> 
> ## v4.5.2 - November 13th, 2019
> # Bugfixes
> 
> - fix: use String(field) in lookup when checking for ""constructor"" - d541378
> - test: add fluent API for testing Handlebars - c2ac79c
> 
> Compatibility notes:
> - no incompatibility are to be expected
></tr></table> ... (truncated)
</details>
<details>
<summary>Commits</summary>

- [`c819c8b`](https://github.com/wycats/handlebars.js/commit/c819c8b533934d2ac18001d7eb27a3205b00c2f3) v4.5.3
- [`827c9d0`](https://github.com/wycats/handlebars.js/commit/827c9d0747bef7d7f89829779523b6b2dcf3051d) Update release notes
- [`f7f05d7`](https://github.com/wycats/handlebars.js/commit/f7f05d7558e674856686b62a00cde5758f3b7a08) fix: add ""no-prototype-builtins"" eslint-rule and fix all occurences
- [`1988878`](https://github.com/wycats/handlebars.js/commit/198887808780bbef9dba67a8af68ece091d5baa7) fix: add more properties required to be enumerable
- [`886ba86`](https://github.com/wycats/handlebars.js/commit/886ba86c2f9cc71b7d99b9018fbe2d72a57085cc) test/chore: add chai/expect and sinon to ""runtime""-environment
- [`0817dad`](https://github.com/wycats/handlebars.js/commit/0817dad7e72c51d07f7700547d0c69aa79a4976b) test: add sinon as global variable to eslint in the specs
- [`93516a0`](https://github.com/wycats/handlebars.js/commit/93516a0b07026ebd23c84fddf270a0c8b570bc59) test: add sinon.js for spies, deprecate current assertions
- [`93e284e`](https://github.com/wycats/handlebars.js/commit/93e284ed9be1e38c5e6945f15af1ccd689f2ada6) chore: add chai and dirty-chai for better test assertions
- [`c02b05f`](https://github.com/wycats/handlebars.js/commit/c02b05fa819f46bb66c878bebc6e8006408ebd5c) fix: use !== 0 instead of != 0
- [`8de121d`](https://github.com/wycats/handlebars.js/commit/8de121d21c88a6ab877e3a0eec9daaac483f3bf0) v4.5.2
- Additional commits viewable in [compare view](https://github.com/wycats/handlebars.js/compare/v4.1.2...v4.5.3)
</details>
<br />

[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=handlebars&package-manager=npm_and_yarn&previous-version=4.1.2&new-version=4.5.3)](https://help.github.com/articles/configuring-automated-security-fixes)

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot ignore this [patch|minor|major] version` will close this PR and stop Dependabot creating any more for this minor/major version (unless you reopen the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
- `@dependabot use these labels` will set the current labels as the default for future PRs for this repo and language
- `@dependabot use these reviewers` will set the current reviewers as the default for future PRs for this repo and language
- `@dependabot use these assignees` will set the current assignees as the default for future PRs for this repo and language
- `@dependabot use this milestone` will set the current milestone as the default for future PRs for this repo and language

You can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/zeit/now/network/alerts).

</details>"
847102cf62edc6b376a30f530846582d85afd4cd,Shu Ding,2019-12-27 23:23:53+00:00,Shu Ding,2019-12-27 23:23:53+00:00,"Publish Canary

 - @now/frameworks@0.0.2-canary.2"
25d5b9c9cfb6bdd7c87fc2f9f468ec3d8404ff27,Shu Ding,2019-12-27 23:22:47+00:00,GitHub,2019-12-27 23:22:47+00:00,add missing logos (#3475)
271bab786e289a3d8978039e36e132f0164eb50e,Nathan Rajlich,2019-12-24 01:33:19+00:00,Nathan Rajlich,2019-12-24 01:33:19+00:00,"Publish Canary

 - now@16.7.1-canary.4
 - now-client@6.0.1-canary.1
 - @now/routing-utils@1.4.1-canary.3"
028e023abad7e3b6f4a76e33c5094f91b2b0b731,Nathan Rajlich,2019-12-24 00:56:47+00:00,kodiakhq[bot],2019-12-24 00:56:47+00:00,"[now-routing-utils] Make status code be configurable (#3470)

Now v1 static deployments use 301 by default, so this change allows the routing utils to match that behavior."
39719eed204f3e3bcde72258f585c0a09522f2b7,Steven,2019-12-24 00:07:30+00:00,kodiakhq[bot],2019-12-24 00:07:30+00:00,"[now-client] Fix single file deploy with new routing properties (#3465)

There is an undocumented feature that adds a route when a single file is deployed, for example a single image or a zip file. This was causing the legacy routes to be added even when `rewrites` or `redirects` was defined. This PR fixes that case when the user has a single file, `now.json`, with redirects defined."
438339258d5461c7af42e9c6025f8f9f9b3c164d,Andy Bitz,2019-12-23 21:21:11+00:00,Andy Bitz,2019-12-23 21:21:11+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.5"
be445c987c984616a4579c004a24fb383d3cd132,Andy,2019-12-23 21:20:10+00:00,GitHub,2019-12-23 21:20:10+00:00,"[now-build-utils] Only add 404 route when there are no api routes (#3468)

* [now-build-utils] Only add 404 route when there are no api routes

* Fix startWith

* Update packages/now-build-utils/src/detect-routes.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Import isHandler

Co-authored-by: Steven <steven@ceriously.com>"
93fef7885b82764667541185d5034cd16917311d,Andy Bitz,2019-12-23 17:32:49+00:00,Andy Bitz,2019-12-23 17:32:49+00:00,"Publish Canary

 - @now/static-build@0.14.1-canary.6"
899c9962adb0f7836ace305a9c9183532980957b,Andy,2019-12-23 17:32:29+00:00,GitHub,2019-12-23 17:32:29+00:00,[now-static-build] Ensure outputDirectory is used when it exists (#3466)
2b601d2424dbffcdd9aaf7384af924850b097179,Andy Bitz,2019-12-23 16:15:20+00:00,Andy Bitz,2019-12-23 16:15:20+00:00,"Publish Canary

 - @now/static-build@0.14.1-canary.5"
3e36b05434545fef8dd4aa59f34470cf7f641205,Andy,2019-12-23 16:14:19+00:00,GitHub,2019-12-23 16:14:19+00:00,[now-static-build] Fix outputDirectory and add test (#3464)
59c9665c3f6ea105cb1c5053d7860d40998b07a0,Andy Bitz,2019-12-23 14:57:53+00:00,Andy Bitz,2019-12-23 14:57:53+00:00,"Publish Canary

 - @now/static-build@0.14.1-canary.4"
901137c7f66f44b579b7a03e45a1169c338b06e4,Andy,2019-12-23 14:55:41+00:00,GitHub,2019-12-23 14:55:41+00:00,"[now-static-build] Add missing frameworks (#3463)

* [now-static-build] Add missing frameworks

* Update test

* Revert ""Update test""

This reverts commit 86b2169caf145200b164b0c2f860c22d50b495cb."
e594e7bbbb86fbfb726d15a5b7ebbafffa49660d,Andy Bitz,2019-12-23 09:02:00+00:00,Andy Bitz,2019-12-23 09:02:00+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.4"
a477b1c22e3f8db19b45aa473dc72358cd24e4b1,Andy,2019-12-23 09:00:45+00:00,GitHub,2019-12-23 09:00:45+00:00,[now-build-utils] Add option to ignore build script (#3461)
22ac20d8383a4e5d427b2012a9e16a811538c19b,Andy Bitz,2019-12-20 15:30:42+00:00,Andy Bitz,2019-12-20 15:30:42+00:00,"Publish Canary

 - @now/frameworks@0.0.2-canary.1
 - @now/build-utils@1.2.1-canary.3
 - now@16.7.1-canary.3
 - now-client@6.0.1-canary.0
 - @now/static-build@0.14.1-canary.3"
3794234d7a10a21d135cdfcc629962bdab55e1b7,Andy,2019-12-20 15:29:39+00:00,GitHub,2019-12-20 15:29:39+00:00,"[now-build-utils][now-static-build][now-cli] Update detectors and undo previous changes (#3452)

* Revert detect-builders and detect-routes changes

* Add `projectSettings` and support non-api routes

* Start with framework detectors

* Update @now/static-build

* Update now-dev

* Update tests

* Use local builders fro testing with now-dev

* Add outputDirectory to @now/static builds

* Ignore update only for bundeled builders

* Revert now-dev builder changes

* Revert more changes

* Adjust tests further

* Update gridsome test

* Adjust hugo test

* Undo version change

* Read file instead of importing

* Ignore failed.page.txt

* Update packages/now-build-utils/src/detect-builders.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Simplify outputDirectory

* Remove NODE_ENV

* Convert tests to typescript

* Remove console.log

Co-authored-by: Steven <steven@ceriously.com>"
92a40db04890b96af518296aa312c44ae43de56a,Andy Bitz,2019-12-20 13:28:26+00:00,Andy Bitz,2019-12-20 13:28:26+00:00,"Publish Stable

 - @now/next@2.3.1"
502aad7c2b299eb45eb65ca3f93f9c2d3d431f83,Steven,2019-12-19 18:33:02+00:00,Steven,2019-12-19 18:33:02+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.2
 - now@16.7.1-canary.2
 - @now/next@2.3.1-canary.3
 - @now/python@1.0.2-canary.0
 - @now/static-build@0.14.1-canary.2"
b49afb61a6f3c91b885b8a6df77f861094c847ac,Steven,2019-12-19 18:30:48+00:00,kodiakhq[bot],2019-12-19 18:30:48+00:00,"[now-build-utils] Add `handle: miss` route to zero config (#3403)

This PR adds the route `handle: miss` and a catch-all route for the api directory.

The plan is to rename files in `/api` and `/public` (in a future PR) to be extension-less and then the route is only used to rewrite the extension to the extension-less file (for example, `/api/user.go` => `/api/user`)

This reduces the routes needed for zero config (previously N routes for N files down to 1 route for N files)."
d380902ad3490b5098bdd4a5e4d6f14c7aa7ccba,Steven,2019-12-18 23:10:26+00:00,kodiakhq[bot],2019-12-18 23:10:26+00:00,"[all] Fix types for Route vs Source (#3450)

This PR deletes the incorrect `Route` type defined in `@now/build-utils` and instead relies on the correct type defined in `@now/routing-utils`. There is no change to runtime code since this is strictly a change to the typescript types. The one exception to this is I had to change the sort order for our build script so that `@now/routing-utils` is built first.

This is necessary for PR #3403"
ffaed620943838ca79acf8d6eb76d6aae62187c8,Andy,2019-12-18 21:57:59+00:00,kodiakhq[bot],2019-12-18 21:57:59+00:00,"[now-dev] Update tests with verbose logging (#3447)

Updates the tests for `now dev` to log more and make the hopefully more reliable."
b0adeb68fe34876fb82b2098a3d850cde8e6c9d1,Tommaso De Rossi,2019-12-18 21:04:06+00:00,kodiakhq[bot],2019-12-18 21:04:06+00:00,"[now-python] Skip reinstalling user dependencies for `now dev` (#3352)

Same as #2926 but for python
Fixes #3351"
23728326543429eb890e78d86716f7733e4228c6,JJ Kasper,2019-12-18 19:57:42+00:00,JJ Kasper,2019-12-18 19:57:42+00:00,"Publish Canary

 - @now/next@2.3.1-canary.2
 - @now/routing-utils@1.4.1-canary.2"
e6a9586b7e831fdbf5c27b1694fd01da7df2fd9a,JJ Kasper,2019-12-18 19:43:58+00:00,kodiakhq[bot],2019-12-18 19:43:58+00:00,"[now-routing-utils] Add replacing of multi-match characters (#3446)

This makes sure to replace multi-match characters used in `path-to-regexp` when converting redirects.

Fixes `/:path*/` being converted to `/$1*/` and now converts it to `/$1/`"
9687415eedadd83fc6602c24bd6950e3504fe16a,Tim Neutkens,2019-12-18 09:54:34+00:00,Tim Neutkens,2019-12-18 09:54:34+00:00,"Publish Canary

 - @now/next@2.3.1-canary.1"
49b375ed6a0fce275e3cc6f7e39d0e5aa5dbb36c,JJ Kasper,2019-12-18 03:01:33+00:00,kodiakhq[bot],2019-12-18 03:01:33+00:00,"[now-next] Disable running next export from export-intent (#3448)

As requested by @timneutkens after investigating we're disabling auto running `next export` for the user during a build since most users who want their app exported will define `next export` in their `build` script"
906dea096e841d7c00983647710d8aab9973b42f,Shu Ding,2019-12-17 19:04:00+00:00,Shu Ding,2019-12-17 19:04:00+00:00,"Publish Canary

 - @now/frameworks@0.0.2-canary.0
 - @now/next@2.3.1-canary.0"
3225a83084fbf032d22f72d15e2928c120d68a28,Shu Ding,2019-12-17 18:35:45+00:00,GitHub,2019-12-17 18:35:45+00:00,"Add @now/frameworks (#3445)

* add @now/frameworks

* add newlines

* add websites

* add logos"
87794cfcc59fb2753387bd30dbceec4382724fb8,JJ Kasper,2019-12-17 16:08:56+00:00,kodiakhq[bot],2019-12-17 16:08:56+00:00,"[now-next] Remove node 8 test (#3426)

This removes the `node 8` firebase test since `node 8` is being deprecated and we have the same test running against `node 10` also"
79ad0ce0c4312bb8a9f1e87451cdb2830ec02a98,Steven,2019-12-17 15:24:05+00:00,Steven,2019-12-17 15:24:05+00:00,"Publish Canary

 - @now/routing-utils@1.4.1-canary.1"
fda598746508cf013f9c07e9ed3aa2f2a9e469c1,Steven,2019-12-17 15:16:07+00:00,kodiakhq[bot],2019-12-17 15:16:07+00:00,"[now-routing-utils] Merge routes with multiple handles (#3442)

This PR adds support for `handle: miss` and `handle: hit` and really any arbitrary `handle` when merging routes from the builder and from the user."
5cfdd5a6b2e5290fefaff5fb0a5422ffa11b75ec,Andy Bitz,2019-12-17 14:32:03+00:00,Andy Bitz,2019-12-17 14:32:03+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.1
 - now@16.7.1-canary.1
 - @now/static-build@0.14.1-canary.1"
bd6e0f9f936f4ea5bf4f8996ebe841b03704b631,Andy Bitz,2019-12-17 14:30:37+00:00,Andy Bitz,2019-12-17 14:30:37+00:00,"Publish Stable

 - @now/next@2.3.0"
aa8d0023098364c88a6c338d2dfba32ee2063e35,Andy,2019-12-17 14:27:12+00:00,GitHub,2019-12-17 14:27:12+00:00,"[now-cli][now-build-utils] Adjust tests for new detectors (#3443)

* Adjust README

* Fix now-dev test

* Add hugo to the PATH

* Fix Hugo build

* Add more logging

* Resolve path

* Do not use the build script as dev command

* Update yarn.lock file

* fetch with retry

* Remove sh from README

* Use Set for Hugo config files"
42ce9aca8632e2aad9c646c142ecc74f3d78b4df,Andy Bitz,2019-12-16 23:25:35+00:00,Andy Bitz,2019-12-16 23:25:35+00:00,"Publish Canary

 - @now/build-utils@1.2.1-canary.0
 - now@16.7.1-canary.0
 - @now/next@2.2.1-canary.1
 - @now/routing-utils@1.4.1-canary.0
 - @now/static-build@0.14.1-canary.0"
156f596189ea0588e76a0bdc5455e6a5dc67566f,Andy,2019-12-16 23:21:58+00:00,GitHub,2019-12-16 23:21:58+00:00,"[now-cli][now-static-build] Add support for `buildCommand`, `devCommand` and `outputDirectory` (#3434)

* Revert ""Revert ""[now-static-build] Add support `buildCommand`, `devCommand` and `outputDirectory` (#3422)"" (#3428)""

This reverts commit f7b4dd4458d4fe0e8fb7f6f35956178a19b3fe02.

* Handle generic node projects with /public

* Remove .only

* Ensure node_modules/.bin is also available during `now dev`

* Remove config log

* Adjust test

* Fix integration tests

* Fix public check

* Remove build + public

* Remove _scan

* Remove any casting

* Use `spawnCommand` for dev

* Remove unused import

* Remove cross-spawn

* Fix null config

* Fix build

* Only do a single Buffer.concat"
8acfd5bf7169325145a7700c59c19bb9235282b6,JJ Kasper,2019-12-16 22:47:36+00:00,kodiakhq[bot],2019-12-16 22:47:36+00:00,"[now-next] Add testing for export handling (#3437)

Follow up to #3431 adding tests for this behavior

Tests to add:
- [x] custom routes: redirects
- [x] custom routes: rewrites
- [x] confirming each test is actually a `next export` deploy somehow"
76c99ebb28544eb6b4044080d1677365e0da8aba,Andy,2019-12-16 22:20:48+00:00,GitHub,2019-12-16 22:20:48+00:00,[now-build-utils] Restore previous detectors (#3441)
5fb119b99cd2b2fe2bf9b843e7eae08f3c0c820a,Alejandro Pacheco,2019-12-16 21:44:40+00:00,kodiakhq[bot],2019-12-16 21:44:40+00:00,"[now-cli] Changed scale error message (#3394)

The error message does not give a clear reason of why it failed"
99b766d9cbb3af6b76bdd8e75b2858aaa787b0bb,Steven,2019-12-16 20:56:48+00:00,kodiakhq[bot],2019-12-16 20:56:48+00:00,"[now-routing-utils] Add validation for `handle:hit` and `handle:miss` (#3438)

This PR adds initial support for `handle: hit` and `handle: miss` routes."
c207cf9b402d8a1da2479405953aeffa2d65bae5,Andy,2019-12-16 18:38:43+00:00,GitHub,2019-12-16 18:38:43+00:00,"[now-cli] Change `--team` warning style (#3439)

* [now-cli] Change warning style

* Adjust test

* Fix screen error"
dd00ac4621f1c9c2bc9f8327790d7c19f6095bca,Andy,2019-12-16 18:16:23+00:00,GitHub,2019-12-16 18:16:23+00:00,"[now-cli] Change automatic version detection message (#3440)

* [now-cli] Change automatic version detection message

* Fix unit test"
3d18a067a001c20f4aa08854e1d81af583354fca,Allen Hai,2019-12-16 14:03:58+00:00,Steven,2019-12-16 14:03:58+00:00,remove unused vars from builder-cache file (#3411)
c48571a799050c44a8d01635e4226a796bf8a690,Tim Neutkens,2019-12-16 11:49:02+00:00,Tim Neutkens,2019-12-16 11:49:02+00:00,"Publish Canary

 - @now/next@2.2.1-canary.0"
6eeb6983d9779ec861c67eee261d98b28cbb93a5,Joe Haddad,2019-12-16 11:46:39+00:00,Tim Neutkens,2019-12-16 11:46:39+00:00,"[now-next] Support for `next export` (#3431)

* Add Support for `next export`

* Add some test cases

* tests require canary next.js

* bump

* fix test cases

* Update packages/now-next/src/index.ts

Co-Authored-By: Joe Haddad <joe.haddad@zeit.co>

* Update packages/now-next/src/index.ts

Co-Authored-By: Joe Haddad <joe.haddad@zeit.co>"
aee33f040d93eb3338d4eaa2df10cda2f179f1e8,Steven,2019-12-14 12:58:04+00:00,Steven,2019-12-14 12:58:04+00:00,"Publish Stable

 - @now/build-utils@1.2.0
 - @now/cgi@1.0.1
 - now@16.7.0
 - @now/go@1.0.1
 - @now/next@2.2.0
 - @now/node@1.3.0
 - @now/python@1.0.1
 - @now/ruby@1.0.1
 - @now/static-build@0.14.0"
b100677b3bbf31d29a3f5e87ad4836791ee0d018,Steven,2019-12-14 12:18:41+00:00,Steven,2019-12-14 12:18:41+00:00,"Publish Canary

 - @now/next@2.1.2-canary.3"
9241b3ae2f40b14b693f9acf9d710a40afec1c7e,Joe Haddad,2019-12-14 03:04:35+00:00,kodiakhq[bot],2019-12-14 03:04:35+00:00,"[now-next] Compute Rewrites & Redirects Earlier (#3430)

This PR strictly moves code to make the diff for an upcoming PR cleaner."
1088da6871813ff06b94a638df783d395a7e6cd6,Steven,2019-12-13 23:12:54+00:00,Steven,2019-12-13 23:12:54+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.5
 - now@16.6.4-canary.6
 - @now/next@2.1.2-canary.2
 - @now/node@1.2.2-canary.2
 - @now/static-build@0.13.2-canary.3"
f7b4dd4458d4fe0e8fb7f6f35956178a19b3fe02,Andy,2019-12-13 23:12:16+00:00,Steven,2019-12-13 23:12:16+00:00,"Revert ""[now-static-build] Add support `buildCommand`, `devCommand` and `outputDirectory` (#3422)"" (#3428)

This reverts commit 5a6d1a135f0400923ca2bb21066a62b73912a694."
fb85b6b27a3b8c17702f5cfdd68a1b7fa5808ae7,Steven,2019-12-13 22:24:55+00:00,Steven,2019-12-13 22:24:55+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.4
 - now@16.6.4-canary.5
 - @now/next@2.1.2-canary.1
 - @now/node@1.2.2-canary.1
 - @now/static-build@0.13.2-canary.2"
2e5e9b9a6f45bc1b70d9f3bababba10d0ac638b9,Steven,2019-12-13 22:23:41+00:00,GitHub,2019-12-13 22:23:41+00:00,[now-build-utils] Fix error tput: No value for $TERM and no -T specified (#3425)
d3cc306e5bbe523025ceb1acf614559c18a1f415,Steven,2019-12-13 22:23:18+00:00,GitHub,2019-12-13 22:23:18+00:00,"[now-build-utils] Remove unused `execa` (#3427)

~~Reverts the execa bump from #3422~~

Removes `execa` since it is no longer used."
d6c6a2a271c5a2f3c70dabfa37222198c61f3d8b,Steven,2019-12-13 20:48:06+00:00,GitHub,2019-12-13 20:48:06+00:00,[docs] Fix broken link to runtimes (#3424)
6171a58ae32887242fd73dab8aae4d0280f2026b,Andy Bitz,2019-12-13 18:39:50+00:00,Andy Bitz,2019-12-13 18:39:50+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.3
 - now@16.6.4-canary.4
 - @now/static-build@0.13.2-canary.1"
5a6d1a135f0400923ca2bb21066a62b73912a694,Andy,2019-12-13 18:30:09+00:00,GitHub,2019-12-13 18:30:09+00:00,"[now-static-build] Add support `buildCommand`, `devCommand` and `outputDirectory` (#3422)

* [now-static-build] Handle `buildCommand`, `devCommand` and `outputDirectory`

* Adjust tests

* Swap order

* Add `node_modules/.bin` to PATH

* Remove @types/execa

* Append PATH only to spawn options

* Remove test check

* Only add when there is a command"
68deab9007830cb1e1315031f99f76067c1278c1,Steven,2019-12-12 22:13:02+00:00,kodiakhq[bot],2019-12-12 22:13:02+00:00,"[tests] Fix unit test coverage (#3420)

This PR reduces the time running Circle CI tests.

Since creating the monorepo in #2812, the coverage broke and then was fixed in #2876 with a workaround which would run unit tests twice.

More recently, we enabled Now CLI to always run tests in #3305 so that means coverage data is always generated.

This PR is a final proper fix so that unit tests run once which saves approximately 2 minutes per push (CI workflow)."
d6114e2bef0245954dff336e61390868c57f12e0,Steven,2019-12-12 20:16:21+00:00,kodiakhq[bot],2019-12-12 20:16:21+00:00,"[deps] Fix yarn.lock signal-exit (#3419)

This patch was lost in a previous PR so I added it back"
5fdc55f3fb3b4752f5db290016c0fe80a17dd6a4,Steven,2019-12-12 19:41:54+00:00,kodiakhq[bot],2019-12-12 19:41:54+00:00,"[now-cli] Remove dead link to max lambda size (#3418)

We used to have a default `maxLambdaSize` and allow the user to increase to 50 MB.

However, this is no longer true. Today, the `maxLambdaSize` for every function is 50 MB and is not configurable, it's a hard limit.

This PR removes the dead link to avoid confusion like in Issue #3416."
751b1665367f16c1d3d52ad62ff9323bfc0b1ff0,Mark Glagola,2019-12-12 18:03:19+00:00,kodiakhq[bot],2019-12-12 18:03:19+00:00,"[now-cli] Add renewal price to `now domains inspect` (#3401)

Adds `Renewal Price` to `now domains inspect` command if the domain was bought with ZEIT."
6ffc8d97f455097e1028261426e5de4140a987ac,Andy Bitz,2019-12-12 17:37:10+00:00,Andy Bitz,2019-12-12 17:37:10+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.2
 - now@16.6.4-canary.3"
67a80d6b830b3c3a80a389902c9a8308c7c20708,Andy,2019-12-12 17:28:24+00:00,GitHub,2019-12-12 17:28:24+00:00,"[now-cli][now-build-utils] Update detectors (#3402)

* [now-build-utils] Consider `yarn build` and `npm run build` as `buildCommand`

* [@now/build-utils] Update new detectors

* Update unit tests

* [@now/build-utils] Update detect-builder and detect-routes

* Update tests

* Run prettier

* Add more tests

* [now-cli] Use default detectors

* Add now-dev test

* Add a generic node project fallback

* Fix build

* Use public as default

* Ensure generic node project is last

* Update tests

* Update tests again

* Update packages/now-build-utils/src/detectors/filesystem.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Remove parentheses

* Revert ""Remove parentheses""

This reverts commit 03f9aba07b0a6d4088719ca9afd602ce8fb1e9c1.

* Use getDependencyVersion instead of hasDependency"
934cf772bc8dde211580593594b0b3779ec21b38,Steven,2019-12-12 15:58:21+00:00,Steven,2019-12-12 15:58:21+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.1
 - now@16.6.4-canary.2"
b01a24afdb185b4b2a2b7efbe91525ea98f9b7e0,Andy,2019-12-12 15:02:19+00:00,GitHub,2019-12-12 15:02:19+00:00,"[now-build-utils][now-cli] Move builds schema and functions schema to `build-utils` (#3417)

* [@now/build-utils] Add functions schema

* [now-cli] Use functions schema from build-utils

* Move buildsSchema to build-utils

* Add retries to test

* Add await"
0ad75b52bf2784601dd097687cd3f800ef59f84c,hi_Haowen,2019-12-12 13:59:39+00:00,kodiakhq[bot],2019-12-12 13:59:39+00:00,"[now dev] Fix validate functions config failed in now json (#3414)

Follow up to #3408 .

```
> Error! Checking for updates failed
> Now CLI 16.6.3 dev (beta)  https://zeit.co/feedback/dev
> Error! Invalid `functions` property: ['api/test.js'] should NOT have additional properties
```"
050772e78a4fe5835a94983dac8ea8100364667c,Andy Bitz,2019-12-12 12:23:12+00:00,Andy Bitz,2019-12-12 12:23:12+00:00,"Publish Canary

 - now@16.6.4-canary.1"
7c05dc1420fa602e424e3747b4c86934c9b85871,Andy,2019-12-12 12:19:26+00:00,GitHub,2019-12-12 12:19:26+00:00,"[now-cli] Do not handle cert errors for deployments (#3409)

Domain related things for deployment will now happen async"
bdd25ac727ab19be2ad42333c7a9c6617ebb575b,Steven,2019-12-11 22:30:11+00:00,Steven,2019-12-11 22:30:11+00:00,"Publish Canary

 - @now/build-utils@1.1.2-canary.0
 - @now/cgi@1.0.1-canary.1
 - now@16.6.4-canary.0
 - @now/go@1.0.1-canary.1
 - @now/next@2.1.2-canary.0
 - @now/node@1.2.2-canary.0
 - @now/python@1.0.1-canary.1
 - @now/ruby@1.0.1-canary.1
 - @now/static-build@0.13.2-canary.0"
3a2732882844b8bb26ebb91ec0dd6fee23f372bf,Steven,2019-12-11 22:27:16+00:00,kodiakhq[bot],2019-12-11 22:27:16+00:00,"[now-build-utils] Discontinue Node 8 (#3406)

This PR adds a `discontinueDate` to Node 8 and prints a warning if the current deployment is using it.

```
    
                                                                                                  
       WARNING                                                                                    
                                                                                                  
       Node.js 8.10.x will be discontinued on 2020-01-06.                                         
       Deployments created on or after 2020-01-06 will fail to build.                             
       Please use one of the following supported `engines` in `package.json`: [""12.x"",""10.x""]     
       This change is a result of a decision made by an upstream infrastructure provider (AWS).   
       Read more: https://docs.aws.amazon.com/lambda/latest/dg/runtime-support-policy.html        
                                                                                                  
    
```

Starting January 2020, Node 8 deployments will fail to build and print an error.

```
Found `engines` in `package.json` with an unsupported Node.js version range: 8.10.x
Please use one of the following supported ranges: [""12.x"",""10.x""]
```

[PRODUCT-796]

[PRODUCT-796]: https://zeit.atlassian.net/browse/PRODUCT-796"
c076a5620fbbd2b747a7c586a8ac68a23fdebf2e,Nathan Rajlich,2019-12-11 20:59:14+00:00,kodiakhq[bot],2019-12-11 20:59:14+00:00,"[all] Move ""Downloading deployment source files"" message to `download()` (#3413)

Before, the debug log message ""Downloading user files..."" was copy+pasted to all the builders.

This change centralizes that log message to be inside the `download()` function for consistency and DRY purposes.

Additionally, the wording has changed as per [INFRA-289], and a resulting timestamp message is also printed.

[INFRA-289]: https://zeit.atlassian.net/browse/INFRA-289"
2bd8ef9eed4e7434c5f0d6ae2000e5de7f5e6dd0,Nathan Rajlich,2019-12-11 19:18:08+00:00,kodiakhq[bot],2019-12-11 19:18:08+00:00,"[now-next] Do not pass runtime env vars via `argv` in `now dev` (#3340)

Before this change, in `@now/next` when running via `now dev`,
the runtime env vars get passed to the child `dev-server.js`
process via argv.

This is problematic because it causes the env vars to be visible in
the process listing, and also causes the command itself to be very
large.

In some cases, with a lot of env vars, we've seen the command be too
large and it will fail to spawn (https://serverfault.com/a/163390/294389).

This changes the start-up process such that the env vars are passed
in via Node.js `fork()` IPC, rather than via `argv`."
500014f2fc4ef1d8348e01ba44ec1cd9889cd625,JJ Kasper,2019-12-11 15:43:14+00:00,kodiakhq[bot],2019-12-11 15:43:14+00:00,"[now-next] Handle symlinks in createPseudoLayer (#3404)

This makes sure to handle symlinks created in mono repos while creating the zip for a lambda based page in Next.js

Fixes #3400"
17687e9bcd9fa32e271849505fd666093d1788a8,JJ Kasper,2019-12-11 14:35:30+00:00,kodiakhq[bot],2019-12-11 14:35:30+00:00,"Fix unused pre-commit package overriding husky (#3405)

Saw my `pre-commit` hook wasn't being triggered after running `yarn` and noticed it was due to an un-used `pre-commit` dependency in `now-cli` overriding the changes to my `.git/hooks/pre-commit` file done by `husky`

**Note**: you will probably need to run `yarn install --force` after this is applied before the correct `pre-commit` changes are applied by `husky`"
90354e9fe72bb9572ccb84d19b489bb853e8c19f,Andy,2019-12-10 20:15:32+00:00,GitHub,2019-12-10 20:15:32+00:00,"[now-cgi][now-next][now-ruby] Unify logging about downloading user files (#3397)

* [now-cgi][now-next][now-ruby] Unify logging about downloading user files

* Update next tests

* Bump Next.js Version"
6236631beb3d03e3e0387bf4fcb2edf35fee3bd5,Leo Lamprecht,2019-12-10 18:18:10+00:00,kodiakhq[bot],2019-12-10 18:18:10+00:00,"[now-dev] Improved feedback link (#3399)

We've shut down our Typeform for feedback, so we can simply the feedback link. The old one will continue working, but we should start using the new one.

Pending on https://github.com/zeit/front/pull/5874.

Fixes #3377"
75aefdddd62b9fc91d4b361c7a3fbfcdee976c03,Steven,2019-12-09 13:03:47+00:00,Steven,2019-12-09 13:03:47+00:00,"Publish Stable

 - @now/build-utils@1.1.1
 - now@16.6.3
 - now-client@6.0.0
 - @now/next@2.1.1
 - @now/node@1.2.1
 - @now/routing-utils@1.4.0
 - @now/static-build@0.13.1"
566d82e873e6108184414fb89bf6f5af7a94f792,Steven,2019-12-07 00:49:27+00:00,Steven,2019-12-07 00:49:27+00:00,"Publish Canary

 - now@16.6.3-canary.0
 - @now/next@2.1.1-canary.1
 - @now/node@1.2.1-canary.0
 - @now/routing-utils@1.3.4-canary.6
 - @now/static-build@0.13.1-canary.1"
44ae0b654e76d3c1608816f4632e30294a4a72b9,Steven,2019-12-07 00:38:26+00:00,kodiakhq[bot],2019-12-07 00:38:26+00:00,"[now-routing-utils] Use 308 status code (#3392)

We decided that all of the new properties should default to 301 status code for any redirects."
d8cfaae5961356ebe2d3b716c2560d6c9c8e0666,Steven,2019-12-06 23:35:17+00:00,kodiakhq[bot],2019-12-06 23:35:17+00:00,"[now-node][now-next][now-static-build] Remove lockfiles from cache (#3391)

The lock files should not be cached because the user may wish to make a new deployment without a `yarn.lock` or `package-lock.json`.

This recently started causing problems because of the order of downloading cache changed from before user files to after user files.

So we need to be extra careful to only cache outputs and not source files."
a40e0f21eea8e1f1ce935fdeeef79b272c4564e8,Steven,2019-12-06 20:57:33+00:00,Steven,2019-12-06 20:57:33+00:00,"Publish Canary

 - @now/build-utils@1.1.1-canary.2"
ac1f506c9881b67f2474d5c34b86445328036b09,Steven,2019-12-06 20:48:30+00:00,kodiakhq[bot],2019-12-06 20:48:30+00:00,"[now-build-utils] Add `--no-audit` flag to npm install (#3390)

This PR will reduce deployment time when a `package-lock.json` file is found by avoiding the audit step which usually [sends audit reports](https://docs.npmjs.com/cli/audit#description) to the registry.

The [--no-audit](https://docs.npmjs.com/cli/install) flag was introduced in [npm@6](
https://medium.com/npm-inc/announcing-npm-6-5d0b1799a905) which shipped with Node 10. However, using the flag with npm@5 does not do anything which is great because npm@5 doesn't audit. So this PR is backwards compatible.

### Performance

I tried `npm install` and `npm install --no-audit` with a large project, [StateOfJS](https://github.com/StateOfJS/StateOfJS/tree/a9fa6d47f9d0d19387e0db1bda2d1590d58ff2d7/homepages/stateofjs), which has 2206 packages (audited 21778 packages).

I made sure to `rm -rf node_modules` each time and ran both commands 5 times to make sure it was always faster with `--no-audit`.

- Before: 61 seconds
- After: 49 seconds"
68d5bdcf3de55bfb3ee2834fe8f18726bb0dcefd,Steven,2019-12-06 19:31:38+00:00,kodiakhq[bot],2019-12-06 19:31:38+00:00,"[script] Fix stable publish script (#3389)

Since we switched to a single branch (instead of master/canary), lerna gets confused about which packages to publish because stable and canary releases are in the same branch.

This PR fixes the confusion by looking at the git history and using [--force-publish](https://github.com/lerna/lerna/tree/master/commands/version#--force-publish) on the changed packages.

In order to avoid confusion for the person publishing, I removed the `yarn publish-stable` script in favor of `yarn changelog` which will print the change log and emit a script that can be used to publish stable.

<details><summary>View Example Output</summary>
<p>

```
$ yarn changelog
yarn run v1.19.1
$ node changelog.js
Changes since the last Stable release (21fe0a2):

- [now-cli] Change `--debug` to avoid debugging builders (#3386) [Steven]
- [now-next] Update routes for new check: true behavior (#3383) [JJ Kasper]
- [now-build-utils] Update Detectors API (#3384) [Nathan Rajlich]
- [now-client] Bump version (#3385) [Andy]
- [now-client] (Major) Split `now-client` options (#3382) [Andy]
- [now-cli][now-client] Fix user agent (#3381) [Steven]
- [now-client] Fix `main` in package.json (#3344) [Max]
- [now-build-utils] Change `script` to `scripts` in error message (#3376) [Andy]
- [now-cli] Add support for `check: true` routes in `now dev` (#3364) [Steven]
- [now-cli] Fix preinstall script on windows when `LOCALAPPDATA` is missing (#3365) [Steven]
- [now dev] skip installing already installed versioned runtimes (#3354) [Tommaso De Rossi]
- [now-routing-utils] Update `path-to-regexp` to v6.1.0 (#3361) [Steven]
- [now-routing-utils] Add mergeRoutes function (#3358) [Steven]
- [docs] Remove deprecated LambdaRuntimes (#3346) [Steven]
- [now-routing-utils] Add support for `check: true` (#3343) [Steven]
- [now-static-build] Cache `.cache` folder for gatsby deployments (#3260) (#3342) [Luc]

To publish a stable release, execute the following:

git pull && lerna version --message 'Publish Stable' --exact --force-publish=@now/build-utils,now,now-client,@now/next,@now/routing-utils,@now/static-build
```

</p>
</details>"
beb51f8c67c49ba99c6b15a1792dea243a1fd7e5,Andy Bitz,2019-12-06 12:48:44+00:00,Andy Bitz,2019-12-06 12:48:44+00:00,"Publish Stable

 - now@16.6.2"
b881cb7111a843795cbabba02aee2cc18933aa72,Andy,2019-12-06 12:47:16+00:00,GitHub,2019-12-06 12:47:16+00:00,"[now-cli] Remove `github` property from payload before sending it (#3388)

* [now-cli] Remove `github` property from payload before sending it

* Add test and remove unused one

* Remove .only

* Remove unused fixture

* Use correct github properties"
d83bc592570b4e0113e01cbc92575d5a52e2cbb5,Andy Bitz,2019-12-05 23:18:57+00:00,Andy Bitz,2019-12-05 23:18:57+00:00,"Publish Stable

 - now@16.6.1"
5be9f297de001609ce5363325e7e4a97fd7b2998,Steven,2019-12-05 23:11:22+00:00,Andy,2019-12-05 23:11:22+00:00,"[now-cli] Change `--debug` to avoid debugging builders (#3386)

* [now-cli] Change `--debug` to avoid debugging builders

* Fix tests

* Replace test with on/off"
51d440431e345c610fb8924d802ace454726c617,JJ Kasper,2019-12-05 21:18:35+00:00,JJ Kasper,2019-12-05 21:18:35+00:00,"Publish Canary

 - @now/build-utils@1.1.1-canary.1
 - @now/next@2.1.1-canary.0"
7cf061122c2cf3b01f3939d4253601ff837c7e56,JJ Kasper,2019-12-05 20:48:17+00:00,kodiakhq[bot],2019-12-05 20:48:17+00:00,"[now-next] Update routes for new check: true behavior (#3383)

As discussed this moves the `handle: filesystem` usage to the right location now that we have `check: true` for the `rewrites`"
1254368505114a1eda47c9fcae3c6a29bb3cb934,Nathan Rajlich,2019-12-05 20:01:28+00:00,kodiakhq[bot],2019-12-05 20:01:28+00:00,"[now-build-utils] Update Detectors API (#3384)

* Changes the `buildCommand` and `devCommand` from `string[]` to `string`
 * Renames `buildEnv` to `buildVariables` and `devEnv` to `devVariables`"
9d4b830c5fa9bab1c5ad44016b07cfb7ddcd23a3,Andy Bitz,2019-12-05 13:14:50+00:00,Andy Bitz,2019-12-05 13:14:50+00:00,"Publish Canary

 - now@16.6.1-canary.1
 - now-client@6.0.0-canary.1"
37401b43632b82e5e38f14f496bc78ed7a6d78ac,Andy,2019-12-05 13:14:00+00:00,GitHub,2019-12-05 13:14:00+00:00,[now-client] Bump version (#3385)
10fe08e14f572c0c928e4f1f5372f0b1634aa25f,Andy,2019-12-05 13:08:39+00:00,GitHub,2019-12-05 13:08:39+00:00,"[now-client] (Major) Split `now-client` options (#3382)

* Change types

* Split options for now-client

* Fix query and teamId

* Adjust tests

* Fix linting

* Ignore scope

* Adjust now-client tests

* Adjust more tests

* Apply prettier"
0ecdb35d506f363a180f5637ab056a80647b3e97,Steven,2019-12-04 23:10:31+00:00,kodiakhq[bot],2019-12-04 23:10:31+00:00,"[now-cli][now-client] Fix user agent (#3381)

Since switching to a single branch, each package in the monorepo can be independently versioned so that some packages are using a canary version and others using a stable version.

This PR fixes an issue where a canary version of `now-cli` is bundling a stable version of `now-client` and thus does does not deploy zero config using canary builders.

The solution is to pass the User Agent from `now-cli` to `now-client` in a new option.

A nice side-effect of this PR is that we will switch the User Agent back to what it used to be pre-now-client days. It will look something like `now 16.6.1-canary.0 node-v10.17.0 darwin (x64)`."
caee8fe9ef1670c5d631f3958fa9c7f6483722fd,Steven,2019-12-04 21:46:43+00:00,Steven,2019-12-04 21:46:43+00:00,"Publish Canary

 - now-client@5.2.5-canary.0"
7d92c27b2dc1498bc76191a2f5e669172804b4df,Max,2019-12-04 21:25:27+00:00,Nathan Rajlich,2019-12-04 21:25:27+00:00,"[now-client] Fix `main` in package.json (#3344)

This sets `main` in `now-client` to a proper path.

Follow up to #3315.

Fixes #3373."
701eabbaba3e87425c0996299bc5fd6a706fefdc,Steven,2019-12-04 14:28:21+00:00,Steven,2019-12-04 14:28:21+00:00,"Publish Canary

 - now@16.6.1-canary.0"
e74a1b2d1a86585d0e1febd4e89b2d46b34a073d,Andy Bitz,2019-12-02 22:41:28+00:00,Andy Bitz,2019-12-02 22:41:28+00:00,"Publish Canary

 - @now/build-utils@1.1.1-canary.0"
e087b02333dcd82c5d2db23503c016aa5b021545,Andy,2019-12-02 22:33:27+00:00,kodiakhq[bot],2019-12-02 22:33:27+00:00,"[now-build-utils] Change `script` to `scripts` in error message (#3376)

Change `script` to `scripts` in error message.

[PRODUCT-740]

[PRODUCT-740]: https://zeit.atlassian.net/browse/PRODUCT-740"
eea7f902b543ab2e564ff3dac93e74457dacb0db,Steven,2019-11-28 10:58:13+00:00,kodiakhq[bot],2019-11-28 10:58:13+00:00,"[now-cli] Add support for `check: true` routes in `now dev` (#3364)

This PR adds `now dev` support for routes that define `check: true`.

The algorithm is as follows:

- If a matching `dest` file is found, then serve it
- If a matching `src` file is found, then serve it
- Otherwise, behave the same as `continue: true` and continue processing routes"
db7583201b4426d09b40186bbd1cfbde8e83a4ea,Steven,2019-11-28 00:35:53+00:00,kodiakhq[bot],2019-11-28 00:35:53+00:00,"[now-cli] Fix preinstall script on windows when `LOCALAPPDATA` is missing (#3365)

Usually `LOCALAPPDATA` is set to `C:\Users\{username}\AppData\Local` but occasionally, it is unassigned and causes installation failures. Looks like this could be due to the [registry](https://liquidwarelabs.zendesk.com/hc/en-us/articles/210634163-How-To-Make-APPDATA-and-LOCALAPPDATA-Environment-Variables-Follow-The-Registry-Keys).

If `LOCALAPPDATA` is missing, we can assume that now.exe was not installed before and can skip the deletion step that happens in the preinstall script."
023001a8b11512bf1bb5b3129285c709e67cd650,Tommaso De Rossi,2019-11-27 11:33:18+00:00,kodiakhq[bot],2019-11-27 11:33:18+00:00,"[now dev] skip installing already installed versioned runtimes (#3354)

Fixes #3353
The current solution might break if a user interrupts `now dev` while yarn wrote the package in the cache package.json but has not yet added to node_modules.
This happens in like 20 ms but is possible, so we could execute `yarn` every time to be sure.
Tell me if the above is a problem or not"
4ff8ab24351af52379ff4c0c658dddd6506f0d65,Steven,2019-11-27 00:00:34+00:00,Steven,2019-11-27 00:00:34+00:00,"Publish Canary

 - @now/routing-utils@1.3.4-canary.5"
d2cccbfce607c7e240200ff47d6a6b9cb3f53f84,Steven,2019-11-26 23:41:35+00:00,kodiakhq[bot],2019-11-26 23:41:35+00:00,"[now-routing-utils] Update `path-to-regexp` to v6.1.0 (#3361)

This bumps `path-to-regexp` to the latest version 6.1.0 which fixes optional capture groups like the test I added for `/next.js`."
970e6c400c29f3de6b0addd7ec4e433ed400d7e1,Steven,2019-11-26 18:10:09+00:00,Steven,2019-11-26 18:10:09+00:00,"Publish Canary

 - @now/routing-utils@1.3.4-canary.4"
b4cb7345a1a28b274c9b89e2ad6f1325a4e88127,Steven,2019-11-26 17:51:19+00:00,kodiakhq[bot],2019-11-26 17:51:19+00:00,"[now-routing-utils] Add mergeRoutes function (#3358)

This moves the merging logic to `@now/routing-utils` and adds support for `check: true`.

- Builder before filesystem, continue: true
- User before filesystem
- Builder before filesystem, check: true
- Builder before filesystem, continue: false
- Handle filesystem
- Builder after filesystem, continue: true
- User after filesystem
- Builder after filesystem, check: true
- Builder after filesystem, continue: false"
7e75d8c1a3485b7121f919e5035dc174ae9d629a,Steven,2019-11-22 21:12:23+00:00,kodiakhq[bot],2019-11-22 21:12:23+00:00,"[docs] Remove deprecated LambdaRuntimes (#3346)

- Removes Node 8.10 and old .NET which are EOL
- Adds a couple missing such as Ruby"
a4ea551160ba94b3da19df9767e9e5a96e237b5e,Steven,2019-11-22 19:41:33+00:00,Steven,2019-11-22 19:41:33+00:00,"Publish Canary

 - @now/routing-utils@1.3.4-canary.3"
f56ad447a09580b7321f85c4364f4c5a50ff0da8,Steven,2019-11-22 19:03:45+00:00,kodiakhq[bot],2019-11-22 19:03:45+00:00,"[now-routing-utils] Add support for `check: true` (#3343)

This PR adds support for `check: true` for a route object. It is basically a way to add a rewrite and still check the filesystem."
76564220573a33a253da09615167d7e631ec3190,luc,2019-11-22 09:39:35+00:00,luc,2019-11-22 09:39:35+00:00,"Publish Canary

 - @now/static-build@0.13.1-canary.0"
afa2231addadc7cf5d19133dd99bb690be5d2b49,Luc,2019-11-22 09:16:51+00:00,kodiakhq[bot],2019-11-22 09:16:51+00:00,"[now-static-build] Cache `.cache` folder for gatsby deployments (#3260) (#3342)


Apply 77348ea71eb7e504a6c1f53015c0c36c43345f9e again.

> Adds `.cache` folder to the Now cache for Gatsby deployments.

> Also adds a generic optional `cachePattern` property to the frameworks array so we can optimize cache paths for other frameworks in the future."
21fe0a2006a5a241c7f0e92ea0a428ece278910e,Steven,2019-11-21 18:14:17+00:00,Steven,2019-11-21 18:14:17+00:00,"Publish Stable

 - @now/build-utils@1.1.0
 - now@16.6.0
 - now-client@5.2.4
 - @now/next@2.1.0
 - @now/node@1.2.0
 - @now/static-build@0.13.0"
23acd3cec69e210a89e1b230b2ee03694787bf1d,Steven,2019-11-21 16:45:19+00:00,Steven,2019-11-21 16:45:19+00:00,"Publish Canary

 - @now/build-utils@1.0.1-canary.4
 - now@16.5.3-canary.6
 - @now/routing-utils@1.3.4-canary.2"
7892f88a42e22dc79150953a561b9ba24d23e525,Steven,2019-11-21 16:41:55+00:00,kodiakhq[bot],2019-11-21 16:41:55+00:00,"[now-build-utils] Ignore engines for `yarn run` (#3341)

Fixes a confusing error message.

<details>
<summary>Click to view error message</summary>
<pre>> Ready! Available at http://localhost:3000
> Building @now/node:index.js
Installing dependencies...
Running ""yarn run now-build""
yarn run v1.17.3
error @: The engine ""node"" is incompatible with this module. Expected version ""10.x"". Got ""12.13.1""
error Commands cannot run with an incompatible environment.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
Error: Exited with 1
    at ChildProcess.<anonymous> (/Users/styfle/Library/Caches/co.zeit.now/dev/builders/node_modules/@now/node/dist/index.js:78518:24)
    at ChildProcess.emit (events.js:210:5)
    at ChildProcess.EventEmitter.emit (domain.js:475:20)
    at maybeClose (internal/child_process.js:1021:16)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:283:5) {
  message: 'Exited with 1'
}</pre>
</details>



The `--ignore-engines` flag was added to `yarn install` many months ago but not `yarn run`.

This PR adds the flag to `yarn run`.

This is useful in `now dev` when the user might have a different Node version installed than what is specified by `engines` in `package.json`."
aae0e3bec7aeaf9f10f705659b11eb1eb50a086d,Steven,2019-11-21 15:49:33+00:00,kodiakhq[bot],2019-11-21 15:49:33+00:00,"Revert [now-cli][now-routing-utils] Add support for v4 builders #3311 (#3333)

Reverts #3311

Previously, we thought we were going to use version 4 to support builder rewrites/redirects => routes. But that is no longer necessary. So instead version 4 will be builders that accept multiple file entrypoints.

Until v4 can be implemented, this reverts v4 changes.

Additionally, I added a helpful error message when the CLI does not support the builder version. In a future PR, we will add better version locking to avoid this type of version mismatch."
0f8bf39421340d5d318976de0d236c8ff907aad7,Steven,2019-11-20 20:33:13+00:00,Steven,2019-11-20 20:33:13+00:00,"Publish Canary

 - now@16.5.3-canary.5
 - @now/next@2.0.1-canary.1
 - @now/node@1.1.3-canary.2
 - @now/static-build@0.12.3-canary.2"
36fd96cc6c071eaaa5d634374c9878c8d8742fdb,Steven,2019-11-20 16:19:07+00:00,Steven,2019-11-20 16:19:07+00:00,"Publish Canary

 - @now/build-utils@1.0.1-canary.3"
3de08e9f3b4266cdf0b1689bc15dea83f0549b0e,Steven,2019-11-20 16:17:55+00:00,kodiakhq[bot],2019-11-20 16:17:55+00:00,"[now-build-utils] Fix canary selection for static build (#3339)

We expect `now@canary` to use canary builders. This PR fixes a bug where a zero config deployment was selecting `@now/static-build` instead of `@now/static-build@canary`."
3e739724b39aaa80f1d742455a6433184247c685,Steven,2019-11-20 13:55:18+00:00,Steven,2019-11-20 13:55:18+00:00,"Publish Canary

 - @now/build-utils@1.0.1-canary.2
 - now@16.5.3-canary.4
 - now-client@5.2.4-canary.2
 - @now/node@1.1.3-canary.1
 - @now/static-build@0.12.3-canary.1"
847e538c698a724edb83120433b62672ebea6c77,Nathan Rajlich,2019-11-20 11:05:45+00:00,kodiakhq[bot],2019-11-20 11:05:45+00:00,"[now-cli] Render an error message when the `--token` content is invalid (#3335)

Fixes #3334.

```
$ node ~/now-cli/dist/index.js --token $'hell,o\n'
> Error! You defined ""--token"", but its contents are invalid. Must not contain: ""\n"", "","", """"
> More details: https://err.sh/now/invalid-token-value
```"
64684dd4866c0ae59f2083a85ca6ee3051972892,Nathan Rajlich,2019-11-20 02:48:15+00:00,GitHub,2019-11-20 02:48:15+00:00,"[now-build-utils] Run detectors unit tests (#3336)

Renames `test/unit.test.detectors.ts` -> `test/unit.detectors.test.ts`
and adjusts npm `test-unit` command.

Jest only runs tests for files that end in `*.test.ts` or `*.test.js`."
a229747249545a4fd3d8b34819a00822906f5df9,Steven,2019-11-20 02:34:01+00:00,kodiakhq[bot],2019-11-20 02:34:01+00:00,"[now-build-utils][now-static-build][now-node] Add node 12.x (#3330)

This PR adds support for Node 12 when the user defines `engines` in their `package.json`"
d1b59c354345ba94a092e797e73a79163716f849,Nathan Rajlich,2019-11-20 01:16:49+00:00,GitHub,2019-11-20 01:16:49+00:00,"[now-build-utils] Add framework detector functions (#3296)

* [now-build-utils] Add framework detector functions

As described in [PRODUCT-399]. This is similar in nature to the
current framework detection logic in static-build, however the detectors
are now functions which allow for detection of frameworks without
a `package.json` file (i.e. jekyll), and also includes detection of
build and dev commands for use in project settings.

* Dedup `aggregate-error` dep in yarn.lock

* Simplify `hasDependency()`

* Adjust hugo detect logic

* Add ""jekyll"" detector

* Add ""next"" detector

* Optimize ""gatsby"" detector

Check the `package.json` first

* Add optimization to check ""package.json"" based detectors first

They're by far the most common and only rely on checking the single
`package.json` file. If no pkg-based detector succeeds then the non-pkg
detectors are consulted afterwards.

* Add ""vue"" detector

* Add ""angular"" detector

* Add ""polymer"" detector

* Add ""svelte"" detector

* Add ""create-react-app-ejected"" detector

* Add ""gridsome"" detector

* Add ""umi"" detector

* Add ""sapper"" detector

* Add ""saber"" detector

* Add ""stencil"" detector

* Add CRA ejected commands

* Add ""brunch"" detector

* Add ""middleman"" detector

* Add missing commands

* `buildCommand` is required

* Add initial unit tests

* Fix unit tests on Circle

* Move ""jest"" and ""ts-jest"" to the root of the monorepo

* Fix integration tests

* Fix test again

* Update packages/now-build-utils/src/detectors/middleman.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Move `@types/jest` to root level package.json

* Update packages/now-build-utils/src/detectors/ember.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Add `cachePattern`

* Address PR comments

* Add missing `$PORT` entries for devCommands

* Add `firstTruthy()` tests

* Revert some changes

Maybe it fixes CI build?

* Test remove `yaml` module

* Update packages/now-build-utils/src/detectors/next.ts

* Remove `toml`

* Test out ""@iarna/toml"" module

* Fix build

* Test out ""js-yaml"" module

* Add new routing properties

* Rename `test/unit.test.ts` to `test/unit.test.detectors.ts`

* Remove `@types/yaml`"
b241441e371b1bfa4604b30fa6385a8757ce4075,JJ Kasper,2019-11-19 21:06:43+00:00,JJ Kasper,2019-11-19 21:06:43+00:00,"Publish Canary

 - now@16.5.3-canary.3
 - @now/next@2.0.1-canary.0"
40bfa25b1be6f1169aa2d81ef596dfdfb10baecb,JJ Kasper,2019-11-19 21:05:02+00:00,kodiakhq[bot],2019-11-19 21:05:02+00:00,"[now-next] Fix custom routes order (#3327)

This updates the routes order to make sure `_next/*` routes are at the top so that custom `rewrites`/`redirects` don't conflict with them

x-ref: https://github.com/zeit/next.js/issues/9081#issuecomment-555161265"
c5a4386c1d95e1aa96eb01e91e012fcdd2596e6b,Nathan Rajlich,2019-11-19 20:32:36+00:00,kodiakhq[bot],2019-11-19 20:32:36+00:00,"[now-cli] Update `@zeit/fun` to v0.10.4 (#3332)

Possibly fixes #3323 (because of zeit/fun#43)."
b3aa3be4b87f14278a7fded30985274931aeb89d,Nathan Rajlich,2019-11-19 07:55:42+00:00,Andy,2019-11-19 07:55:42+00:00,"[CircleCI] Remove `rsync` apt-get install (#3329)

Used to be used in the now-cli build script when it was a bash script.
Now it's a TypeScript file and the `cpy` module is used instead."
528aefcc1e8d9460379deb9390338a96417cea91,Steven,2019-11-18 22:27:46+00:00,kodiakhq[bot],2019-11-18 22:27:46+00:00,"[now-cli] Handle `uv_cwd` error when cwd is deleted (#3326)

Converts `reportError()` to typescript and adds an ignore list.

In particular, `uv_cwd` comes from `process.cwd()` so we don't need to track these errors in the case the user deletes their current working directory.

This is a follow up to #3194 which handled only one scenario."
620ee2b7e4fde98e76d3947df26b2dcec887c187,Andy,2019-11-18 21:22:29+00:00,kodiakhq[bot],2019-11-18 21:22:29+00:00,"[now-cli] Ensure that `stdin` exists when calling `setRawMode` (#3321)

Ensure that `stdin` exists when calling `setRawMode`.

[Error on Sentry](https://sentry.io/organizations/zeithq/issues/1310516610/?project=1323225)

[PRODUCT-637]

[PRODUCT-637]: https://zeit.atlassian.net/browse/PRODUCT-637"
d55acc246a7217cecc05a57b55ebe9079e216e60,Andy Bitz,2019-11-18 10:54:08+00:00,Andy Bitz,2019-11-18 10:54:08+00:00,"Publish Canary

 - @now/build-utils@1.0.1-canary.1"
2a59db3029b811f1acfd17481c5b7bfca556bd3b,Andy,2019-11-15 17:56:23+00:00,GitHub,2019-11-15 17:56:23+00:00,"[now-build-utils] Ensure function paths are relative to the project and improve the error message (#3312)

* [now-build-utils] Ensure function paths are relative to the project and improve the error message

* Update packages/now-build-utils/src/detect-builders.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-build-utils/src/detect-builders.ts

Co-Authored-By: Steven <steven@ceriously.com>"
990dec0fec5b2fc12f5309e7ed1589c758724ea5,Andy Bitz,2019-11-15 14:33:18+00:00,Andy Bitz,2019-11-15 14:33:18+00:00,"Publish Stable

 - @now/next@2.0.0"
162b17b249327ccb06f713334d6f84f9d592af74,Andy,2019-11-15 14:28:28+00:00,GitHub,2019-11-15 14:28:28+00:00,[now-next] Make lambda memory more reliable (#3319)
e0aea3061838a3e452b6118ac2471529b7dc31ed,Steven,2019-11-14 21:00:47+00:00,Steven,2019-11-14 21:00:47+00:00,"Publish Canary

 - now@16.5.3-canary.2
 - @now/routing-utils@1.3.4-canary.1"
49cba94178dd26ef13cb16d6e656e53d51b8b70b,Steven,2019-11-14 20:48:13+00:00,kodiakhq[bot],2019-11-14 20:48:13+00:00,"[now-cli][now-routing-utils] Add support for v4 builders (#3311)

- Add now dev `BuildResultV4` type similar to V3 but no routes, only superstatic keys
- Add validation to `@now/routing-utils` to ensure V4 Builders do not return `routes`

Note, no builders have been changed yet because this needs to be shipped first so we can bump build-utils and then builders will work in production. Then in a separate PR, we can update builders to V4."
7dd87815f385576cf63235cc6bb5cec9a6aad2dc,Steven,2019-11-14 19:18:50+00:00,Steven,2019-11-14 19:18:50+00:00,"Publish Canary

 - now@16.5.3-canary.1
 - now-client@5.2.4-canary.1"
f6fdde816fc1cc258e19371f78cda1faee5a1b01,Steven,2019-11-14 19:09:03+00:00,kodiakhq[bot],2019-11-14 19:09:03+00:00,"[now-client] Fix publish output (#3315)

Fixes #3310

The root `package.json` file is copied to `dist` by tsc because of a relative import. This causes npm `files` property to be nested and therefore skip publishing most of the files.

```ts
import pkg from '../../package.json';
```

Disabling `resolveJsonModule` and using `require()` instead fixed it.

However, this change caused `now-cli` build to fail so I had to change the way `now-client` gets imported."
4c8c6ff23683597c3a4fc50a20d4c27de3a78d01,Steven,2019-11-14 18:31:04+00:00,kodiakhq[bot],2019-11-14 18:31:04+00:00,"[script] Cleanup changelog script (#3306)

This script is only used for stable releases so we should filter out canary publish commits."
46b615a96332d49b71dbc8fadf85d9668a39403e,Steven,2019-11-14 18:00:39+00:00,kodiakhq[bot],2019-11-14 18:00:39+00:00,"[now-cli] Fix `localConfig` when file is above the target directory (#3293)

Fixes #3209"
8e293dd633ed249f969417cf137abd17ae7653ed,Steven,2019-11-13 15:28:12+00:00,Steven,2019-11-13 15:28:12+00:00,"Publish Canary

 - gatsby-plugin-now@1.2.6-canary.0
 - @now/build-utils@1.0.1-canary.0
 - @now/cgi@1.0.1-canary.0
 - now@16.5.3-canary.0
 - now-client@5.2.4-canary.0
 - @now/go@1.0.1-canary.0
 - @now/next@1.0.6-canary.0
 - @now/node-bridge@1.2.7-canary.1
 - @now/node@1.1.3-canary.0
 - @now/python@1.0.1-canary.0
 - @now/routing-utils@1.3.4-canary.0
 - @now/ruby@1.0.1-canary.0
 - @now/static-build@0.12.3-canary.0"
e040753b2710a7f1607771b39b8fbc039473f232,Thew Dhanat,2019-11-13 14:36:33+00:00,kodiakhq[bot],2019-11-13 14:36:33+00:00,"[now-node] Ignore `babel.config.js` (#3295)

@now/node shouldn't read user's Babel configuration.
Fix #3280"
463aaf094d1232bf9d550507e09ddc2395d1b175,Andy,2019-11-13 11:21:53+00:00,kodiakhq[bot],2019-11-13 11:21:53+00:00,"[now-cli] Make lambda memory test more consistent (#3301)

Make lambda memory test more consistent"
bf867b028d3cb3abfe360c0f67440e3da25ff11b,Steven,2019-11-13 02:32:02+00:00,kodiakhq[bot],2019-11-13 02:32:02+00:00,"[tests] Always test now-cli (#3305)

Previously, only the changed package's tests would run.

This PR makes sure that the changed package + `now-cli` tests run every time."
6dfefc2fe46b18adb864400bfd8af5023df8ca78,Steven,2019-11-12 23:52:28+00:00,Steven,2019-11-12 23:52:28+00:00,"Publish Stable

 - gatsby-plugin-now@1.2.5
 - now@16.5.2
 - @now/node@1.1.2
 - @now/static-build@0.12.2"
9ba8a8454c784b4636c7c41d3fe0d7cad06b2dff,Steven,2019-11-12 23:51:32+00:00,Steven,2019-11-12 23:51:32+00:00,Bump versions
9c72839bfa2629db4cffaa3a178e67014f2bc5fc,Steven,2019-11-12 23:48:26+00:00,Steven,2019-11-12 23:48:26+00:00,Empty commit
2e24c92799048485e1623e070b74660774a1c45e,Steven,2019-11-12 23:18:17+00:00,Steven,2019-11-12 23:18:17+00:00,"Publish Canary

 - gatsby-plugin-now@1.2.4-canary.0
 - @now/node@1.1.1-canary.0
 - @now/static-build@0.12.1-canary.0"
fa98c8aeeba0acb4c5bde6f43f578f36139b284a,Andy,2019-11-12 23:13:39+00:00,kodiakhq[bot],2019-11-12 23:13:39+00:00,"Revert ""[now-static-build] Inject `gatsby-plugin-now` in Gatsby deployments (#3182)"" (#3303)

This reverts the following gatsby changes:

- Reverts #3182
- Reverts #3260
- Reverts #3212"
f92e3496b181dc5b0827eefc977aa5356d13d765,Steven,2019-11-12 22:37:49+00:00,kodiakhq[bot],2019-11-12 22:37:49+00:00,"[now-node] Bump now-node-bridge (#3304)

A trivial change to follow up to #3300 so that the latest `@now/node-bridge` is bundled with `ncc`."
0ceea76aa4e893b8c0516a1785650a3a2ec4a6e8,Steven,2019-11-12 19:57:22+00:00,Steven,2019-11-12 19:57:22+00:00,"Publish Canary

 - now@16.5.1-canary.0
 - @now/node-bridge@1.2.7-canary.0"
897d11a1e13ffd52383c6a346ff9cb356beb01be,Steven,2019-11-12 19:54:05+00:00,kodiakhq[bot],2019-11-12 19:54:05+00:00,"[now-node] Disable default node timeout (#3300)

Node had a default [timeout](https://nodejs.org/api/http.html#http_server_timeout) of 2 minutes until Node 13.x so we'll need to manually disable the timeout so that the `maxDuration` config works properly."
8ed59fcdd3c898a7694f3b3e1318da8b479fe226,Andy Bitz,2019-11-12 14:55:59+00:00,Andy Bitz,2019-11-12 14:55:59+00:00,"Publish Stable

 - gatsby-plugin-now@1.2.3
 - @now/build-utils@1.0.0
 - @now/cgi@1.0.0
 - now@16.5.0
 - now-client@5.2.3
 - @now/go@1.0.0
 - @now/node-bridge@1.2.6
 - @now/node@1.1.0
 - @now/python@1.0.0
 - @now/routing-utils@1.3.3
 - @now/ruby@1.0.0
 - @now/static-build@0.12.0"
7f211cc7fcdad126a783715639a515e35669206b,Andy,2019-11-12 14:52:16+00:00,Leo Lamprecht,2019-11-12 14:52:16+00:00,[all] Set the versions to stable (#3297)
c511147c7ccb614a37313093368088ba84ced80c,Andy Bitz,2019-11-11 22:33:18+00:00,Andy Bitz,2019-11-11 22:33:18+00:00,"Publish Canary

 - @now/build-utils@1.0.0-canary.23
 - now@16.1.4-canary.43
 - now-client@5.1.1-canary.18
 - @now/node@1.0.0-canary.17"
2f7f965188858258bd01d0dcf3aa6a96a6ef8066,Nathan Rajlich,2019-11-11 22:21:27+00:00,GitHub,2019-11-11 22:21:27+00:00,"[now-cli] Update `execa` to v3.2.0 (#3292)

* [now-cli] Update `execa` to v3.2.0

Also requires updating TypeScript to v3.4+
(See: https://github.com/sindresorhus/execa/issues/336)

* Fix tests: code -> exitCode

* code -> exitCode

* More .code to .exitCode

* Update `@zeit/fun` to v0.10.3"
24da26e7cfc7dfa5b4a2e347de70d4fea3048952,Andy,2019-11-11 22:17:59+00:00,kodiakhq[bot],2019-11-11 22:17:59+00:00,"[@now/build-utils] Add support for `includeFiles` and `excludeFiles` to Functions (#3285)

Add support for `includeFiles` and `excludeFiles` to Functions.

[PRODUCT-27]

[PRODUCT-27]: https://zeit.atlassian.net/browse/PRODUCT-27"
f8f9d656e8be944199ed1b896493747b4e0dbc67,Andy,2019-11-11 21:24:28+00:00,kodiakhq[bot],2019-11-11 21:24:28+00:00,"[@now/node] Configure helpers and handler with env variables (#3286)

Allow to configure helpers and handler with env variables.

[PRODUCT-27]

[PRODUCT-27]: https://zeit.atlassian.net/browse/PRODUCT-27"
b357f3055de9dfe8ec66dc323b0013701f8aeb96,Steven,2019-11-11 19:54:40+00:00,kodiakhq[bot],2019-11-11 19:54:40+00:00,"[docs] Cleanup canary links, use master instead (#3291)

Follow up to #3287"
f9c1f519f49aebbbd2c0985b63fbb6c91a99ddfa,Max,2019-11-11 19:31:20+00:00,kodiakhq[bot],2019-11-11 19:31:20+00:00,"[now-client] Clean up fetch headers (#3290)

Reopen of #3255"
057f9f7045f31471a0cc1f65d86b45129cd5b01f,Steven,2019-11-11 18:53:20+00:00,Steven,2019-11-11 18:53:20+00:00,"Publish Canary

 - now@16.1.4-canary.42
 - @now/node@1.0.0-canary.16
 - @now/ruby@0.1.5-canary.8"
58ec38437d6538793cd4444ecb1ca4b875a5509c,Steven,2019-11-11 18:45:39+00:00,kodiakhq[bot],2019-11-11 18:45:39+00:00,"[now-node] Fix TS version selection (#3289)

Previously, the `typescript` dependency resolution was using the package.json beside the `now.json` base directory.

This PR changes the behavior to start looking for package.json in the entrypoint directory.

Fixes #3258"
2964bf50e0ece5feb03e27b99e675104cf436cac,Steven,2019-11-11 16:34:20+00:00,kodiakhq[bot],2019-11-11 16:34:20+00:00,"[now-ruby] Fix rails test (#3288)

This test was failing for the last week.

The issue was fixed in the build environment. The root cause was [ruby-build](https://github.com/rbenv/ruby-build) which is used to install the version of Ruby used in `@now/ruby`. It started using an older (possible broken) version of `bundler`. I pinned `ruby-build` to a previous version so that deployments continue working.

So now we can enable the Rails test again (which uses nokogiri).

Fixes #3246
Closes #3274"
c9572c352aff7f63aac26f510297358d466aeaba,Leo Lamprecht,2019-11-11 15:50:04+00:00,Steven,2019-11-11 15:50:04+00:00,"Adjust commands for creating releases (#3287)

* Adjust commands for creating releases

* Update package.json

Co-Authored-By: Steven <steven@ceriously.com>

* Update package.json

Co-Authored-By: Steven <steven@ceriously.com>

* Adjusted log line

* Deleted diff.js

* Remove script

* Fix run.js to use master"
b69f1761439b92e058aa7b9c30be0475073bcf38,Andy,2019-11-11 12:33:54+00:00,kodiakhq[bot],2019-11-11 12:33:54+00:00,"[now-cli] Enable Runtime tests (#3284)

Enable Runtime tests, since a new version of the `now-php` package was released."
484dcd5dc19d9943271b47fddf4d8a4c0ac47a35,Leo Lamprecht,2019-11-11 11:59:08+00:00,Leo Lamprecht,2019-11-11 11:59:08+00:00,"Publish

 - now@16.1.4-canary.41"
a3412113b7b2a60854fccb3ccbb631b01c654934,Leo Lamprecht,2019-11-11 11:58:49+00:00,Leo Lamprecht,2019-11-11 11:58:49+00:00,Trigger publish
693043bc276d63500ce095c44f22b82b0ad6356b,Leo Lamprecht,2019-11-11 11:57:44+00:00,Leo Lamprecht,2019-11-11 11:57:44+00:00,Fixed dependencies
82a5bafb42a7a4f4e804311a89f0b8a472b18a92,Leo Lamprecht,2019-11-11 11:51:44+00:00,GitHub,2019-11-11 11:51:44+00:00,Fixed dependencies (#3283)
1c8c4c6f72f0cca0af86891b753b2dba82045e72,Leo Lamprecht,2019-11-11 11:49:21+00:00,Leo Lamprecht,2019-11-11 11:49:21+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.5
 - @now/build-utils@1.0.0-canary.22
 - @now/cgi@0.1.5-canary.4
 - now@16.1.4-canary.40
 - now-client@5.1.1-canary.17
 - @now/go@0.5.11-canary.9
 - @now/next@1.0.0-canary.22
 - @now/node-bridge@1.2.4-canary.3
 - @now/node@1.0.0-canary.15
 - @now/python@0.2.17-canary.11
 - @now/routing-utils@1.2.3-canary.12
 - @now/ruby@0.1.5-canary.7
 - @now/static-build@0.9.9-canary.20"
28a2e354d3ec9281aef1e35b34107883028f4ec2,Leo Lamprecht,2019-11-11 11:48:58+00:00,Leo Lamprecht,2019-11-11 11:48:58+00:00,Fixed dependencies
c89e478fc1400283e9f2bc539da581664e1290b3,Leo Lamprecht,2019-11-11 11:40:13+00:00,Leo Lamprecht,2019-11-11 11:40:13+00:00,Merge branch 'canary'
7e29a24ea62106b0c6ddf5e7e9d408bb9c4a1020,Luc,2019-10-25 12:54:14+00:00,Leo Lamprecht,2019-11-11 11:39:18+00:00,"[now-static-build] Inject `gatsby-plugin-now` in Gatsby deployments (#3182)

This PR is an attempt to automatically inject `gatsby-plugin-now` in Gatsby projects, as an optimisation.

- [x] avoid conflicts with existing files
- [x] refactor"
5fc9b7d36dfdaafd5271250d538d50128f48e16b,JJ Kasper,2019-11-10 07:17:58+00:00,Leo Lamprecht,2019-11-11 11:36:00+00:00,"[now-next] Add loading of custom routes (#3279)

This adds loading of `redirects` and `rewrites` from the `routes-manifest` in supported Next.js versions"
a211c648ed98002e11f1589f50814bc2fa6e0527,Nathan Rajlich,2019-11-09 23:52:55+00:00,Leo Lamprecht,2019-11-11 11:34:49+00:00,[now-cli] Purge require cache after packages install in `now dev` (#3277)
c24d8de9602e1daae7f3b943bdb0204d318db75e,Andy,2019-11-08 20:58:34+00:00,Leo Lamprecht,2019-11-11 11:33:08+00:00,"[all] Updated builders to `version: 3` (#3273)

* [now-node] Use builder version 3

* [now-cgi] Use builder version 3

* [now-go] Use builder version 3

* [now-python] Use builder version 3

* [now-ruby] Use builder version 3

* Adjust docs

* [now-ruby] Remove unused import

* Temp. test in iad1

* Revert ""Temp. test in iad1""

This reverts commit 4c495baa5888dda5ae8f184f679613e91ab7268c.

* [now-cli] Adjust `now dev` for builder version 3

* [now-build-utils] Do not allow non Community Runtimes

* Temp. Force Build in iad1

* Update DEVELOPING_A_RUNTIME.md

Co-Authored-By: Steven <steven@ceriously.com>

* Update docs

* Update test/lib/deployment/now-deploy.js

Co-Authored-By: Steven <steven@ceriously.com>

* Remove temp. iad1 check

* Check memory and maxDuration

* Use memory for Lambda

* Only cast once

* Skip tests"
34f6e52335b1067a3e0bdec5287ccb9c1b822bf3,Andy,2019-11-07 13:31:51+00:00,Leo Lamprecht,2019-11-11 11:31:57+00:00,"[all] Fix functions property and update Lambda (#3252)

* Allow functions + next.js

* Don't allow empty or invalid functions

* Make sure runtimes match a source

* Update now-dev to use the functions property

* Functions must match a source file

* Split up functions

* Make sure @now/next does not receive any unused functions

* Allow memory and maxDuration properties on Lambdas

* Add lambda options to @now/node

* Add lambda options to @now/go

* Add lambda options to @now/python

* Add lambda options to @now/ruby

* Update lambda options on @now/node

* Add lambda optiosn to @now/cgi

* Make options optional

* Add lambda options to @now/next

* Fix assertion

* Add test

* Fix tests

* Skip 06-ruby test

* Skip correct tests

* Fix options and cache src check

* Adjust memory test"
77348ea71eb7e504a6c1f53015c0c36c43345f9e,Luc,2019-11-07 17:58:28+00:00,Leo Lamprecht,2019-11-11 11:27:57+00:00,"[now-static-build] Cache `.cache` folder for gatsby deployments (#3260)

Fix https://github.com/zeit/now/issues/3247.

Adds `.cache` folder to the Now cache for Gatsby deployments.

Also adds a generic optional `cachePattern` property to the frameworks array so we can optimize cache paths for other frameworks in the future."
a1273d1c9ec513ed779b07fd0c9fc1bfa8f55ce6,Steven,2019-11-07 15:27:53+00:00,Leo Lamprecht,2019-11-11 11:22:52+00:00,"[now-dev][now-routing-utils] Fix `trailingSlash` (#3250)

Fixes `trailingSlash: true` in now dev"
4e6e51af9c165aab72aa4372cac983c66829d347,Steven,2019-11-04 23:42:21+00:00,Leo Lamprecht,2019-11-11 11:21:48+00:00,"[now dev] Add support for `cleanUrls` (#3240)

This PR implements `cleanUrls` for now dev which is similar to the implementation in fmeta-util.

I also added an integration test to ensure correctness."
a6366eaff66c936e7cb97447362462d0573fbff4,Steven,2019-11-04 22:31:20+00:00,Leo Lamprecht,2019-11-11 11:20:36+00:00,[now-cli] Fix test invalid-builder-routes (#3249)
1403cf47b283bc08e7aed0492c7833750fefc51f,Steven,2019-11-01 20:57:17+00:00,Leo Lamprecht,2019-11-11 11:20:22+00:00,"[now-dev] Fix route normalization (#3225)

This PR fixes a regression introduced in #3174 when removing the `^` and `$` normalization.

The previous PR was normalizing user-defined routes but forgot to normalize builder routes.

This PR normalizes builder routes "
6a5a964b55ab6fe860ebb7304576f9967646d88b,Luc,2019-10-30 04:12:06+00:00,Leo Lamprecht,2019-11-11 11:18:30+00:00,"[now-static-build] Improve Gatsby default routes (#3212)

This PR does 3 things:
- add default caching headers
- redirect all missed requests to Gatsby's own 404.html page
- add deprecation message to `gatsby-plugin-now` since we're auto injecting it and it's not needed anymore

Fixes #2859"
1c40d693c16c979e2273f1aa56143d0c23546a5e,JJ Kasper,2019-10-29 01:26:42+00:00,Leo Lamprecht,2019-11-11 11:16:36+00:00,"[now-next] Add Beta iSSG Support (#3067)

Adds support for new SPRv2 handling in Next.js.

x-ref: #3021"
9cff4ca2c32fa0a7416cc838766508f3eb1dad8a,Leo Lamprecht,2019-11-11 11:15:41+00:00,Leo Lamprecht,2019-11-11 11:15:41+00:00,"Publish

 - now@16.1.4-canary.39"
d1f675bd46cb1f3a99ada67853112ccaa733dd49,JJ Kasper,2019-11-10 02:02:02+00:00,Leo Lamprecht,2019-11-11 11:10:41+00:00,"[now-next] Leverage routes-manifest if available for dynamic routes (#3271)

This allows us to start de-coupling the builder from relying on inner utils of Next.js to generate dynamic routes for Now by leveraging a `routes-manifest` output during the build

Relies on: https://github.com/zeit/next.js/pull/9347"
cce292f63984000e148754c539217ff035bad780,Igor Klopov,2019-11-08 17:28:38+00:00,Leo Lamprecht,2019-11-11 11:10:07+00:00,"[now-node] fix reportTSError exiting (#3244)

This fixes abnormal process exit when there is an error like `console.log(Math.round(""42""));` and `compilerOptions.noEmitOnError` is `true` in `tsconfig.json`. See https://github.com/zeit/now/blob/2dee810e74ff656cb36184656949268d2e4e038b/packages/now-node/src/typescript.ts#L307 and https://github.com/zeit/now/blob/2dee810e74ff656cb36184656949268d2e4e038b/packages/now-node/src/typescript.ts#L197"
adbf2d9c317d1ece5922ba550394b1e48b7e5ced,Andy,2019-11-08 01:23:10+00:00,Leo Lamprecht,2019-11-11 11:10:03+00:00,"[docs] Add `memory` and `maxDuration` to runtime development docs (#3261)

Add `memory` and `maxDuration` to runtime development docs"
06e94a1f6fed8c5ec96f953bdb4d78765afb5cd2,Leo Lamprecht,2019-11-08 00:11:46+00:00,Leo Lamprecht,2019-11-11 11:09:58+00:00,"Improve functions check (#3268)

This pull request ensures we're rendering a proper error message if people are trying to use both the `builds` AND the new `functions` property."
92e396830aae6631bf69ef20123185ecfbcd7473,Ana Trajkovska,2019-11-07 23:00:38+00:00,Leo Lamprecht,2019-11-11 11:09:54+00:00,"[now-cli] Replace Hosts with Deployments API (#3257)

* Replace Hosts with Deployments API

* Trigger tests"
f4df1dfe41e97329cd4874f7334dfa486da30610,Steven,2019-11-07 22:38:35+00:00,Leo Lamprecht,2019-11-11 11:09:49+00:00,"[now-client] Fix file permissions for source files (#3180)

There was a regression since 16.3.0 (now-client refactor) causing file permissions for source files to be not be preserved.

The solution was to add the FS `mode` to each file.

Fixes #3172"
be3bc4273d2c298da9d7752b484bf0af03f3055a,Andy,2019-11-07 22:28:14+00:00,Leo Lamprecht,2019-11-11 11:09:45+00:00,"[now-cli][now-client] Use v11 endpoint for functions (#3266)

* [now-cli][now-client] Use v11 endpoint for functions

* Adjust now-client

* Change version check

* Fix typescript in test"
b12ed4127e5766b4b975379ca987b228b1fdaba2,Michel Moreau,2019-11-07 16:08:25+00:00,Leo Lamprecht,2019-11-11 11:09:36+00:00,"[docs] Update domain-verification error message (#3263)

Closes #3263."
b6311d5897fa68ffb4847fb5076b5fff33304e82,Steven,2019-11-07 19:31:07+00:00,Leo Lamprecht,2019-11-11 11:09:31+00:00,[all] Update homepage in package.json (#3265)
cb40985b0e23b1854839ca17138cccd705d59cb7,Max,2019-11-07 17:23:11+00:00,Leo Lamprecht,2019-11-11 11:09:15+00:00,"[now-client] Add `.nowignore` test (#3264)

This adds a test for https://github.com/zeit/now/pull/3186"
7ace8b710303bc302656985285b850b113368e5f,Steven,2019-11-07 12:26:23+00:00,Leo Lamprecht,2019-11-11 11:08:51+00:00,"[now-cli] Fix integration test for maxDuration (#3259)

This test started failing because the error message changed."
aea17f0c6f9a16f0f6921dc3790608c4aa85a28f,Cam Smith,2019-11-02 19:23:59+00:00,Leo Lamprecht,2019-11-11 11:08:47+00:00,[now-cli] Add note for Windows environment variable syntax (#3243)
5d56eeb8711c0eb234adf97acd6f8f8da6905f18,Leo Lamprecht,2019-11-06 20:20:01+00:00,Leo Lamprecht,2019-11-11 11:08:43+00:00,"[docs] Rename ""Builders"" to ""Runtimes"" (#3256)

* Renamed ""Builders"" to ""Runtimes""

* Brought html-minifier back

* Adjusted examples"
f3cb60f7079de559f2799606dd5164f227fabc37,Matthew Sweeney,2019-11-05 21:39:32+00:00,Leo Lamprecht,2019-11-11 11:08:39+00:00,"Update Public Directory Link (#3221)

This PR updates the link to the missing build script FAQ, pending a change to the structure of the documentation.

This PR should be merged only when the documentation PR has been - https://github.com/zeit/docs/pull/1423"
1e57be07105985b97e5c39d09e287b1f58453926,Connor Davis,2019-11-05 14:53:57+00:00,Leo Lamprecht,2019-11-11 11:08:34+00:00,"[now-next] 404 Known Static Files Before Dynamic Routes (#3238)

If someone uses a wildcard in the root of pages, it could collide with internal `_next` files:
```
pages/
  [slug]/
    [slug]/
      [slug]/
        [slug].js
```

For example:
`/_next/static/runtime/webpack-hash.js` exists and has no problem routing
`/_next/static/runtime/webpack-old-hash.js` doesn't exist on the server any more but would route to `/[slug].js` with status 200

This could cause strange edge cases related to loading a new version of a Next.js site along with the possible cost of execution if it's a lambda plus the cost of however large the response is.

# Side Notes

Should this:
https://github.com/zeit/now/blob/92d9f2d809b7f9abc767572125fa6eecc6468c16/packages/now-next/src/index.ts#L839

Instead be this?
```
 src: path.join('/', entryDirectory, '_next/static/(?:[^/]+/pages|chunks|runtime|css|media)/.+'),
```

If this is the case, I need to adjust my PR to do the same"
ee8e4bfb2039c4bffb239ecddaba1cb24b256263,Sophearak Tha,2019-11-05 02:25:01+00:00,Leo Lamprecht,2019-11-11 11:08:20+00:00,"[now-cli] Adjust `now ls` according to new project overview (#3229)

Fix: [PRODUCT-493]

[PRODUCT-493]: https://zeit.atlassian.net/browse/PRODUCT-493"
73551825865b6cc6458296792902d65840027e2f,Sophearak Tha,2019-11-04 15:24:49+00:00,Leo Lamprecht,2019-11-11 11:08:00+00:00,"[now-cli] Remove `now upgrade` command (#3228)

Fix: [PRODUCT-489]

[PRODUCT-489]: https://zeit.atlassian.net/browse/PRODUCT-489"
e0683d51fa3bfe50f9a6dc5ea4c753a57c3139fc,Andy,2019-11-01 18:20:56+00:00,Leo Lamprecht,2019-11-11 11:07:28+00:00,"[now-build-utils] Fix custom function runtimes (#3239)

* [now-build-utils] Fix custom runtimes for functions

* [now-cli] Change order"
1f1d5ca8bf9b92918b3930c4f9f20ec42fa6680a,Andy,2019-11-01 16:47:50+00:00,Leo Lamprecht,2019-11-11 11:07:22+00:00,"[now-cli][now-client] Add support for `functions` property (#3231)

* [now-cli][now-client] Add support for `functions` property

* Fix typo

* Update yarn.lock for test

* Update all yarn.lock files for now dev

* Log fixture that failed

* Use catch instead

* Run dev tests not serial

* Revert ""Run dev tests not serial""

This reverts commit bfcd83642bcd2275daaac129b2c8b233f582eaae.

* Do not throw

* Skip nextjs tests on node 8

* Remove only flag

* Ignore 19-mithril

* Revert ""Ignore 19-mithril""

This reverts commit d438c40c26a8ef2227a0a0dd7caba8600503d585.

* Revert ""Remove only flag""

This reverts commit caff05ad82a184706eb48b6b39df550f8d17bb1d.

* Revert ""Skip nextjs tests on node 8""

This reverts commit 3b45ca33b969a56da0bccce4c95cae3b34af98e0.

* Revert ""Do not throw""

This reverts commit 55624b9193d7751e1dc16cbee9005fe23ff19662.

* Revert ""Revert ""Run dev tests not serial""""

This reverts commit cd5260a205b6478cb7a44c9ea982b99f26f2f2e9.

* Revert ""Run dev tests not serial""

This reverts commit bfcd83642bcd2275daaac129b2c8b233f582eaae.

* Revert ""Use catch instead""

This reverts commit fe652995c08e1e8b2ba581aaf7304b5432718161.

* Revert ""Log fixture that failed""

This reverts commit feb0e7b393626ce1c117ef95f9e95f7a148e3dab.

* Revert ""Update all yarn.lock files for now dev""

This reverts commit 36be4dd98ca6d65850843dc958727952dd7461ee.

* Update yarn.lock for 14-svelte-node

* Update es-abstract in all yarn.lock files

* Skip node test

* Revert ""Skip node test""

This reverts commit c9c45ec8d6fcef13cbd300db410699b167d76ed2.

* Remove test.only

* Only execute node test in now-dev

* Revert ""Only execute node test in now-dev""

This reverts commit 8ab7a88d696c1faa5fe0fbcca9dcfb0dd375925f.

* Clean cache on macos node8

* Fix query

* Use --skip-integrity-check

* Add --skip-integrity-check to different yarn call

* Add --network-concurrency 1

* Add retry"
4dfd11ad8ea748a88bb350786578e21ea4fc5087,Max,2019-11-01 13:30:25+00:00,Leo Lamprecht,2019-11-11 11:07:16+00:00,Fix racing spinners (#3232)
d46e106dba11fe55c490a57a5687ddea70975bbb,Steven,2019-10-31 16:49:05+00:00,Leo Lamprecht,2019-11-11 11:07:10+00:00,"[now-routing-utils] Fix newline in error message (#3234)

The newlines were not being applied properly since the entry array was stringified.

This PR fixes the newlines for route errors."
cd7eabb6b6d37519b9d77cee26d14873d0a70cb7,Steven,2019-10-31 16:27:30+00:00,Leo Lamprecht,2019-11-11 11:07:05+00:00,"[now-build-utils] Fix zero config trailing slash (#3233)

This fixes the scenario where the user defines `trailingSlash: true` and creates a file `/api/users.js`. They would expect to be able to visit `/api/users/` and it should run that function."
bfedde6a4d627e95c8cb06a726a69fa61e575faf,Leo Lamprecht,2019-10-31 15:22:34+00:00,Leo Lamprecht,2019-11-11 11:06:57+00:00,"[now-routing-utils] Improve error message for invalid regexes (#3230)

Currently, this is what you see if you enter invalid regexes with any of the new routing properties:

![image](https://user-images.githubusercontent.com/6170607/67955351-c0fd6480-fbf2-11e9-999c-b36509b5c405.png)

Instead of printing JSON, we want to print a list of all error messages."
ece00674b63ce26f3dab1d999c6ac145a41d47fe,Joe Haddad,2019-10-30 21:20:51+00:00,Leo Lamprecht,2019-11-11 11:06:52+00:00,[now-next] Use Past Tense (#3226)
aa51f9005a2331fdb8141bf3dff9a7598071bcb1,Joe Haddad,2019-10-30 20:43:48+00:00,Leo Lamprecht,2019-11-11 11:06:48+00:00,"[now-next] Reduce Build Noise (#3224)

This PR removes the individual lambda zip prints since they're not very useful. We've already printed this information above and will time them as a group!"
836d0dd6ecad907b742fff04b4c70bceae74733a,Steven,2019-10-30 18:27:07+00:00,Leo Lamprecht,2019-11-11 11:06:34+00:00,"[now-routing-utils] Fix redirects when cleanUrls and trailingSlash (#3223)

This fixes the scenario when both `{ cleanUrls: true, and trailingSlash: true }` so that only one redirect occurs when visiting `/file.html`.

Previously, this would have redirected twice from `/file.html` => `/file` => `/file/`.

Now it will redirect once from `/file.html` => `/file/`."
1947813f04e07658338d9d5df0f3c0745d86016e,Steven,2019-10-30 14:51:50+00:00,Leo Lamprecht,2019-11-11 11:06:29+00:00,"[now-routing-utils] Return null routes when provided null (#3222)

This PR ensures that null routes are returned as null instead of the empty array."
9a1eeb6fca4d01d87cee6f15ab141d73ddd8101c,Steven,2019-10-29 23:03:39+00:00,Leo Lamprecht,2019-11-11 11:05:32+00:00,"[now-routing-utils] Enhance superstatic validation (#3219)

This PR refactors a few things:

- enhance validation so that invalid regex is caught before transforming to routes
- remove `filePaths` input parameter since it is no longer used

After this PR is merged and released, we'll be able to perform validation earlier in the build pipeline and report the errors to the user."
ca8f347e3a77b748b33dbf77eb361d3829fb3112,Andy,2019-10-29 20:03:04+00:00,Leo Lamprecht,2019-11-11 11:05:14+00:00,"[now-build-utils] Validate functions and allow them as config (#3218)

* [now-build-utils] Validate functions and allow them as config

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* Change memory check

* Adjust test"
51146f5baf700f42fad74bd7fd06dcb54bb4c01b,Steven,2019-10-29 14:23:23+00:00,Leo Lamprecht,2019-11-11 11:05:09+00:00,"[now-routing-utils] Fix html redirects for `cleanUrls` (#3217)

We used to read the output files and create a route for each redirect when `cleanUrls: true`.

Instead, this PR will add 2 redirects for `cleanUrls: true` no matter how many files are in the outputs."
f2bd36b4f99a6243a0479e1c986d9ef011b7219f,Andy,2019-10-28 23:47:45+00:00,Leo Lamprecht,2019-11-11 11:04:54+00:00,"[now-build-utils] Add functions property (#3213)

This updates `@now/build-utils` to add support for the function property including types and tests.

Related: [PRODUCT-27]

[PRODUCT-27]: https://zeit.atlassian.net/browse/PRODUCT-27"
818018ce4213b4dcbf0fed4d168dfa24c9233368,Nathan Rajlich,2019-10-28 23:26:13+00:00,Leo Lamprecht,2019-11-11 11:04:44+00:00,"[now-cli] Remove now dev `cleanCacheDir()` function (#3214)

Dead code as of #2097."
89114179dad643875320187aca05f32316817423,Nathan Rajlich,2019-11-11 05:45:14+00:00,GitHub,2019-11-11 05:45:14+00:00,[now-cli] Remove `test.only()` in now dev tests (#3278)
d50c72f2c36f1866e2436b73bb708702833aab90,JJ Kasper,2019-11-10 07:26:49+00:00,JJ Kasper,2019-11-10 07:26:49+00:00,"Publish

 - now@16.1.4-canary.38
 - @now/next@1.0.0-canary.21"
ce241e7690682cc6fd0f8e3584f7f0999edf6783,JJ Kasper,2019-11-10 07:17:58+00:00,kodiakhq[bot],2019-11-10 07:17:58+00:00,"[now-next] Add loading of custom routes (#3279)

This adds loading of `redirects` and `rewrites` from the `routes-manifest` in supported Next.js versions"
b72cbfb708450dd54692da715a9e61a75f54fc70,JJ Kasper,2019-11-10 02:02:02+00:00,kodiakhq[bot],2019-11-10 02:02:02+00:00,"[now-next] Leverage routes-manifest if available for dynamic routes (#3271)

This allows us to start de-coupling the builder from relying on inner utils of Next.js to generate dynamic routes for Now by leveraging a `routes-manifest` output during the build

Relies on: https://github.com/zeit/next.js/pull/9347"
ef7b60225d79f4b69c1505adaed86927f5605689,Nathan Rajlich,2019-11-09 23:52:55+00:00,GitHub,2019-11-09 23:52:55+00:00,[now-cli] Purge require cache after packages install in `now dev` (#3277)
b3718d9378f2e58490d69d5c64659acd9a4272f9,Andy Bitz,2019-11-08 21:09:26+00:00,Andy Bitz,2019-11-08 21:09:26+00:00,"Publish

 - @now/build-utils@1.0.0-canary.21
 - @now/cgi@0.1.5-canary.3
 - now@16.1.4-canary.37
 - @now/go@0.5.11-canary.8
 - @now/node@1.0.0-canary.14
 - @now/python@0.2.17-canary.10
 - @now/ruby@0.1.5-canary.6"
c8c56bcdb15e99bba7bf2aa25ba3af2065faaa35,Andy,2019-11-08 20:58:34+00:00,GitHub,2019-11-08 20:58:34+00:00,"[all] Updated builders to `version: 3` (#3273)

* [now-node] Use builder version 3

* [now-cgi] Use builder version 3

* [now-go] Use builder version 3

* [now-python] Use builder version 3

* [now-ruby] Use builder version 3

* Adjust docs

* [now-ruby] Remove unused import

* Temp. test in iad1

* Revert ""Temp. test in iad1""

This reverts commit 4c495baa5888dda5ae8f184f679613e91ab7268c.

* [now-cli] Adjust `now dev` for builder version 3

* [now-build-utils] Do not allow non Community Runtimes

* Temp. Force Build in iad1

* Update DEVELOPING_A_RUNTIME.md

Co-Authored-By: Steven <steven@ceriously.com>

* Update docs

* Update test/lib/deployment/now-deploy.js

Co-Authored-By: Steven <steven@ceriously.com>

* Remove temp. iad1 check

* Check memory and maxDuration

* Use memory for Lambda

* Only cast once

* Skip tests"
a84b9273b22d0834f87ba3d157c1917a4655d4d2,Igor Klopov,2019-11-08 17:28:38+00:00,kodiakhq[bot],2019-11-08 17:28:38+00:00,"[now-node] fix reportTSError exiting (#3244)

This fixes abnormal process exit when there is an error like `console.log(Math.round(""42""));` and `compilerOptions.noEmitOnError` is `true` in `tsconfig.json`. See https://github.com/zeit/now/blob/2dee810e74ff656cb36184656949268d2e4e038b/packages/now-node/src/typescript.ts#L307 and https://github.com/zeit/now/blob/2dee810e74ff656cb36184656949268d2e4e038b/packages/now-node/src/typescript.ts#L197"
3d67ad16ff9a2f3e026769b7d2bb63f3eb125bef,Andy Bitz,2019-11-08 01:28:20+00:00,Andy Bitz,2019-11-08 01:28:20+00:00,"Publish

 - now@16.1.4-canary.36
 - now-client@5.1.1-canary.16
 - @now/node@1.0.0-canary.13"
dd5d4491e2dbcbd712c61cbc5d2dd016db2f982c,Andy,2019-11-08 01:23:10+00:00,kodiakhq[bot],2019-11-08 01:23:10+00:00,"[docs] Add `memory` and `maxDuration` to runtime development docs (#3261)

Add `memory` and `maxDuration` to runtime development docs"
7dd1199ce0ffccb9347e02793d108620d1e381ac,Leo Lamprecht,2019-11-08 00:11:46+00:00,kodiakhq[bot],2019-11-08 00:11:46+00:00,"Improve functions check (#3268)

This pull request ensures we're rendering a proper error message if people are trying to use both the `builds` AND the new `functions` property."
ee7b64ff3a71cf10736d9eb5ef5a98f991a665b2,Ana Trajkovska,2019-11-07 23:00:38+00:00,GitHub,2019-11-07 23:00:38+00:00,"[now-cli] Replace Hosts with Deployments API (#3257)

* Replace Hosts with Deployments API

* Trigger tests"
6efe7d04bca81b1d471982449fbec3d881aa1a2a,Steven,2019-11-07 22:38:35+00:00,kodiakhq[bot],2019-11-07 22:38:35+00:00,"[now-client] Fix file permissions for source files (#3180)

There was a regression since 16.3.0 (now-client refactor) causing file permissions for source files to be not be preserved.

The solution was to add the FS `mode` to each file.

Fixes #3172"
b7f8f7c366d4b4f43cd694393d1d5ff91b4984c3,Andy Bitz,2019-11-07 22:28:56+00:00,Andy Bitz,2019-11-07 22:28:56+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.4
 - @now/build-utils@1.0.0-canary.20
 - now@16.1.4-canary.35
 - now-client@5.1.1-canary.15
 - @now/go@0.5.11-canary.7
 - @now/next@1.0.0-canary.20
 - @now/node@1.0.0-canary.12
 - @now/python@0.2.17-canary.9
 - @now/ruby@0.1.5-canary.5
 - @now/static-build@0.9.9-canary.19"
9adbb10fca2bedb3b35b6c7537accb82381cb5b2,Andy,2019-11-07 22:28:14+00:00,GitHub,2019-11-07 22:28:14+00:00,"[now-cli][now-client] Use v11 endpoint for functions (#3266)

* [now-cli][now-client] Use v11 endpoint for functions

* Adjust now-client

* Change version check

* Fix typescript in test"
6646b97a653dd797f776571652c22312095a8dff,Andy,2019-11-07 21:54:31+00:00,GitHub,2019-11-07 21:54:31+00:00,"Revert ""[now-client] ignores is missing ignores added from .nowignore (#3186)"" (#3267)

This reverts commit 2a39f61f341b06418837b8621f941b8816dd029d."
939c3a11d7f32d5a8bc23d64173fa607de961237,Michel Moreau,2019-11-07 16:08:25+00:00,Nathan Rajlich,2019-11-07 21:04:56+00:00,"[docs] Update domain-verification error message (#3263)

Closes #3263."
363c3ea39ff3340707b784d9aecd63c73dc5a36f,Steven,2019-11-07 19:31:07+00:00,GitHub,2019-11-07 19:31:07+00:00,[all] Update homepage in package.json (#3265)
935fca6986665bcfd66cbdd4ba9d35f146255dab,luc,2019-11-07 18:08:12+00:00,luc,2019-11-07 18:08:12+00:00,"Publish

 - now-client@5.1.1-canary.14
 - @now/static-build@0.9.9-canary.18"
7e20c585a1b0c99b3d084d984954670b78409fcc,Luc,2019-11-07 17:58:28+00:00,kodiakhq[bot],2019-11-07 17:58:28+00:00,"[now-static-build] Cache `.cache` folder for gatsby deployments (#3260)

Fix https://github.com/zeit/now/issues/3247.

Adds `.cache` folder to the Now cache for Gatsby deployments.

Also adds a generic optional `cachePattern` property to the frameworks array so we can optimize cache paths for other frameworks in the future."
7ecdfbb0439642234de0d32e9a17afe24589fd34,Max,2019-11-07 17:23:11+00:00,kodiakhq[bot],2019-11-07 17:23:11+00:00,"[now-client] Add `.nowignore` test (#3264)

This adds a test for https://github.com/zeit/now/pull/3186"
2a39f61f341b06418837b8621f941b8816dd029d,Gerhard Sletten,2019-11-07 16:30:13+00:00,kodiakhq[bot],2019-11-07 16:30:13+00:00,"[now-client] ignores is missing ignores added from .nowignore (#3186)

After upgrading to macOS Catalina I get this error on some now-deploys:

```
> Error! ENOENT: no such file or directory, stat '<file that not exist>'
```

and the file is below a folder that should be ignored by `.nowignore`, think this is due to some fs-bug in my node version, but did also discover that the ignore-array returned from `getNowIgnore` did not include the ignores from my `.nowignore`, but only the default defined in the top of the function.

Is this a bug?"
6e0182af02a899f031a53d6b83cd72e46aaf4453,Steven,2019-11-07 15:48:41+00:00,Steven,2019-11-07 15:48:41+00:00,"Publish

 - now@16.1.4-canary.34
 - @now/routing-utils@1.2.3-canary.11"
1fd630460c26ab0002607c12ef999a26488f3fa7,Steven,2019-11-07 15:27:53+00:00,kodiakhq[bot],2019-11-07 15:27:53+00:00,"[now-dev][now-routing-utils] Fix `trailingSlash` (#3250)

Fixes `trailingSlash: true` in now dev"
4583880377f7d10ca41abf6117be938a7b67f5c8,Andy Bitz,2019-11-07 13:32:35+00:00,Andy Bitz,2019-11-07 13:32:35+00:00,"Publish

 - @now/build-utils@1.0.0-canary.19
 - @now/cgi@0.1.5-canary.2
 - now@16.1.4-canary.33
 - @now/go@0.5.11-canary.6
 - @now/next@1.0.0-canary.19
 - @now/node@1.0.0-canary.11
 - @now/python@0.2.17-canary.8
 - @now/ruby@0.1.5-canary.4
 - @now/static-build@0.9.9-canary.17"
abacaf8d404c6862e348ff62431c63703d4b0ae0,Andy,2019-11-07 13:31:51+00:00,GitHub,2019-11-07 13:31:51+00:00,"[all] Fix functions property and update Lambda (#3252)

* Allow functions + next.js

* Don't allow empty or invalid functions

* Make sure runtimes match a source

* Update now-dev to use the functions property

* Functions must match a source file

* Split up functions

* Make sure @now/next does not receive any unused functions

* Allow memory and maxDuration properties on Lambdas

* Add lambda options to @now/node

* Add lambda options to @now/go

* Add lambda options to @now/python

* Add lambda options to @now/ruby

* Update lambda options on @now/node

* Add lambda optiosn to @now/cgi

* Make options optional

* Add lambda options to @now/next

* Fix assertion

* Add test

* Fix tests

* Skip 06-ruby test

* Skip correct tests

* Fix options and cache src check

* Adjust memory test"
de8829ccfec850514a8d062ab6a2a1b99c096c39,Steven,2019-11-07 12:26:23+00:00,kodiakhq[bot],2019-11-07 12:26:23+00:00,"[now-cli] Fix integration test for maxDuration (#3259)

This test started failing because the error message changed."
ba18a3a0cbada71104184d2fdb9b3d9bde48a193,Cam Smith,2019-11-02 19:23:59+00:00,Nathan Rajlich,2019-11-07 01:34:07+00:00,[now-cli] Add note for Windows environment variable syntax (#3243)
0a0f13994f93be0deacb33d85dfcce9f0264f2f2,Leo Lamprecht,2019-11-06 20:20:01+00:00,GitHub,2019-11-06 20:20:01+00:00,"[docs] Rename ""Builders"" to ""Runtimes"" (#3256)

* Renamed ""Builders"" to ""Runtimes""

* Brought html-minifier back

* Adjusted examples"
eff29463e73ba6ac7347f91099efa580eb358b99,Matthew Sweeney,2019-11-05 21:39:32+00:00,kodiakhq[bot],2019-11-05 21:39:32+00:00,"Update Public Directory Link (#3221)

This PR updates the link to the missing build script FAQ, pending a change to the structure of the documentation.

This PR should be merged only when the documentation PR has been - https://github.com/zeit/docs/pull/1423"
9c62b7412276d673be3dc5e8921bf0db7649ba9e,Connor Davis,2019-11-05 16:26:00+00:00,Connor Davis,2019-11-05 16:26:00+00:00,"Publish

 - @now/next@1.0.0-canary.18"
5f19e6340955c3d358e556aaa13ec48a4ef4d589,Connor Davis,2019-11-05 14:53:57+00:00,kodiakhq[bot],2019-11-05 14:53:57+00:00,"[now-next] 404 Known Static Files Before Dynamic Routes (#3238)

If someone uses a wildcard in the root of pages, it could collide with internal `_next` files:
```
pages/
  [slug]/
    [slug]/
      [slug]/
        [slug].js
```

For example:
`/_next/static/runtime/webpack-hash.js` exists and has no problem routing
`/_next/static/runtime/webpack-old-hash.js` doesn't exist on the server any more but would route to `/[slug].js` with status 200

This could cause strange edge cases related to loading a new version of a Next.js site along with the possible cost of execution if it's a lambda plus the cost of however large the response is.

# Side Notes

Should this:
https://github.com/zeit/now/blob/92d9f2d809b7f9abc767572125fa6eecc6468c16/packages/now-next/src/index.ts#L839

Instead be this?
```
 src: path.join('/', entryDirectory, '_next/static/(?:[^/]+/pages|chunks|runtime|css|media)/.+'),
```

If this is the case, I need to adjust my PR to do the same"
1fd4c3a278087a1cc6f1473120dcf41a19c4e4dc,Sophearak Tha,2019-11-05 02:35:53+00:00,Sophearak Tha,2019-11-05 02:35:53+00:00,"Publish

 - now@16.1.4-canary.32"
281b3851885168670ce8058d1a267164577dade4,Sophearak Tha,2019-11-05 02:25:01+00:00,kodiakhq[bot],2019-11-05 02:25:01+00:00,"[now-cli] Adjust `now ls` according to new project overview (#3229)

Fix: [PRODUCT-493]

[PRODUCT-493]: https://zeit.atlassian.net/browse/PRODUCT-493"
4e4b672af9a944705ec2e034f5f39fa3d312180d,Steven,2019-11-04 23:42:21+00:00,kodiakhq[bot],2019-11-04 23:42:21+00:00,"[now dev] Add support for `cleanUrls` (#3240)

This PR implements `cleanUrls` for now dev which is similar to the implementation in fmeta-util.

I also added an integration test to ensure correctness."
b70ac1ca1cd12a5f9380703877c863c337478175,Steven,2019-11-04 22:31:20+00:00,GitHub,2019-11-04 22:31:20+00:00,[now-cli] Fix test invalid-builder-routes (#3249)
36fc64d0edad86b4b79a4fd91f162c1ce68390e5,Sophearak Tha,2019-11-04 15:24:49+00:00,kodiakhq[bot],2019-11-04 15:24:49+00:00,"[now-cli] Remove `now upgrade` command (#3228)

Fix: [PRODUCT-489]

[PRODUCT-489]: https://zeit.atlassian.net/browse/PRODUCT-489"
2dee810e74ff656cb36184656949268d2e4e038b,Steven,2019-11-01 20:57:17+00:00,kodiakhq[bot],2019-11-01 20:57:17+00:00,"[now-dev] Fix route normalization (#3225)

This PR fixes a regression introduced in #3174 when removing the `^` and `$` normalization.

The previous PR was normalizing user-defined routes but forgot to normalize builder routes.

This PR normalizes builder routes "
4fa468299f6d590934d7bb029a4dbad9cd57c32d,Andy Bitz,2019-11-01 18:21:53+00:00,Andy Bitz,2019-11-01 18:21:53+00:00,"Publish

 - @now/build-utils@1.0.0-canary.18
 - now@16.1.4-canary.31"
90eac2cf540c93f6348720ac16781535eb1d0d15,Andy,2019-11-01 18:20:56+00:00,GitHub,2019-11-01 18:20:56+00:00,"[now-build-utils] Fix custom function runtimes (#3239)

* [now-build-utils] Fix custom runtimes for functions

* [now-cli] Change order"
63ad08074c26cf88614d2feb250a018afbce8cec,Andy Bitz,2019-11-01 16:49:59+00:00,Andy Bitz,2019-11-01 16:49:59+00:00,"Publish

 - now@16.1.4-canary.30
 - now-client@5.1.1-canary.13"
31fcc56dbd74ce596834f956da00e8fe7a62744b,Andy,2019-11-01 16:47:50+00:00,GitHub,2019-11-01 16:47:50+00:00,"[now-cli][now-client] Add support for `functions` property (#3231)

* [now-cli][now-client] Add support for `functions` property

* Fix typo

* Update yarn.lock for test

* Update all yarn.lock files for now dev

* Log fixture that failed

* Use catch instead

* Run dev tests not serial

* Revert ""Run dev tests not serial""

This reverts commit bfcd83642bcd2275daaac129b2c8b233f582eaae.

* Do not throw

* Skip nextjs tests on node 8

* Remove only flag

* Ignore 19-mithril

* Revert ""Ignore 19-mithril""

This reverts commit d438c40c26a8ef2227a0a0dd7caba8600503d585.

* Revert ""Remove only flag""

This reverts commit caff05ad82a184706eb48b6b39df550f8d17bb1d.

* Revert ""Skip nextjs tests on node 8""

This reverts commit 3b45ca33b969a56da0bccce4c95cae3b34af98e0.

* Revert ""Do not throw""

This reverts commit 55624b9193d7751e1dc16cbee9005fe23ff19662.

* Revert ""Revert ""Run dev tests not serial""""

This reverts commit cd5260a205b6478cb7a44c9ea982b99f26f2f2e9.

* Revert ""Run dev tests not serial""

This reverts commit bfcd83642bcd2275daaac129b2c8b233f582eaae.

* Revert ""Use catch instead""

This reverts commit fe652995c08e1e8b2ba581aaf7304b5432718161.

* Revert ""Log fixture that failed""

This reverts commit feb0e7b393626ce1c117ef95f9e95f7a148e3dab.

* Revert ""Update all yarn.lock files for now dev""

This reverts commit 36be4dd98ca6d65850843dc958727952dd7461ee.

* Update yarn.lock for 14-svelte-node

* Update es-abstract in all yarn.lock files

* Skip node test

* Revert ""Skip node test""

This reverts commit c9c45ec8d6fcef13cbd300db410699b167d76ed2.

* Remove test.only

* Only execute node test in now-dev

* Revert ""Only execute node test in now-dev""

This reverts commit 8ab7a88d696c1faa5fe0fbcca9dcfb0dd375925f.

* Clean cache on macos node8

* Fix query

* Use --skip-integrity-check

* Add --skip-integrity-check to different yarn call

* Add --network-concurrency 1

* Add retry"
958b06730375e4f1bc0d781fb2363d0030957b89,Max Rovensky,2019-11-01 13:32:49+00:00,Max Rovensky,2019-11-01 13:32:49+00:00,"Publish

 - now@16.1.4-canary.29"
6af183c7f15ee90dd35567464eb496990f23af9d,Max,2019-11-01 13:30:25+00:00,GitHub,2019-11-01 13:30:25+00:00,Fix racing spinners (#3232)
92d9f2d809b7f9abc767572125fa6eecc6468c16,Steven,2019-10-31 17:13:40+00:00,Steven,2019-10-31 17:13:40+00:00,"Publish

 - @now/build-utils@1.0.0-canary.17
 - @now/routing-utils@1.2.3-canary.10"
4d7aaff8d0af948653e8f7345df933a70fe8c74d,Steven,2019-10-31 16:49:05+00:00,kodiakhq[bot],2019-10-31 16:49:05+00:00,"[now-routing-utils] Fix newline in error message (#3234)

The newlines were not being applied properly since the entry array was stringified.

This PR fixes the newlines for route errors."
68b19c812200a817f17130353cead83ab91f017f,Steven,2019-10-31 16:27:30+00:00,kodiakhq[bot],2019-10-31 16:27:29+00:00,"[now-build-utils] Fix zero config trailing slash (#3233)

This fixes the scenario where the user defines `trailingSlash: true` and creates a file `/api/users.js`. They would expect to be able to visit `/api/users/` and it should run that function."
5b600fea4499b1d640317544a54cf194860208fd,Steven,2019-10-31 15:24:13+00:00,Steven,2019-10-31 15:24:13+00:00,"Publish

 - @now/routing-utils@1.2.3-canary.9"
2c867295e61442153d8aeece5fd8ab604fc1575d,Leo Lamprecht,2019-10-31 15:22:34+00:00,kodiakhq[bot],2019-10-31 15:22:34+00:00,"[now-routing-utils] Improve error message for invalid regexes (#3230)

Currently, this is what you see if you enter invalid regexes with any of the new routing properties:

![image](https://user-images.githubusercontent.com/6170607/67955351-c0fd6480-fbf2-11e9-999c-b36509b5c405.png)

Instead of printing JSON, we want to print a list of all error messages."
996c0ffffc3172a0dc0ca576de8dd1c7dc1e43cc,Joe Haddad,2019-10-30 21:47:02+00:00,Joe Haddad,2019-10-30 21:47:02+00:00,"Publish

 - @now/next@1.0.0-canary.17"
2344357113db408cfdcedb92924374f42a9a8bba,Joe Haddad,2019-10-30 21:20:51+00:00,kodiakhq[bot],2019-10-30 21:20:51+00:00,[now-next] Use Past Tense (#3226)
e919c591fea4677e8f8b5ebea9ff4a3bd496aac2,Joe Haddad,2019-10-30 20:45:47+00:00,Joe Haddad,2019-10-30 20:45:47+00:00,"Publish

 - @now/next@1.0.0-canary.16"
88516137de8696cd546beb067240b50438eb3783,Joe Haddad,2019-10-30 20:43:48+00:00,kodiakhq[bot],2019-10-30 20:43:48+00:00,"[now-next] Reduce Build Noise (#3224)

This PR removes the individual lambda zip prints since they're not very useful. We've already printed this information above and will time them as a group!"
f515138074afa83c86c45b47d1274fd04d985958,Steven,2019-10-30 18:29:11+00:00,Steven,2019-10-30 18:29:11+00:00,"Publish

 - @now/routing-utils@1.2.3-canary.8"
6d040160547c1caa361ba5dc62358c08891e3444,Steven,2019-10-30 18:27:07+00:00,kodiakhq[bot],2019-10-30 18:27:07+00:00,"[now-routing-utils] Fix redirects when cleanUrls and trailingSlash (#3223)

This fixes the scenario when both `{ cleanUrls: true, and trailingSlash: true }` so that only one redirect occurs when visiting `/file.html`.

Previously, this would have redirected twice from `/file.html` => `/file` => `/file/`.

Now it will redirect once from `/file.html` => `/file/`."
eb968d813ca32e690daab091e51906a0422347c5,Steven,2019-10-30 14:54:16+00:00,Steven,2019-10-30 14:54:16+00:00,"Publish

 - @now/routing-utils@1.2.3-canary.7"
37881e0830617f043dafe87dbc15067eb01a037d,Steven,2019-10-30 14:51:50+00:00,kodiakhq[bot],2019-10-30 14:51:50+00:00,"[now-routing-utils] Return null routes when provided null (#3222)

This PR ensures that null routes are returned as null instead of the empty array."
e3dd13ba9efaaf9d7ae2ff0246c92b301ead278f,luc,2019-10-30 04:14:09+00:00,luc,2019-10-30 04:14:09+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.3
 - @now/routing-utils@1.2.3-canary.6
 - @now/static-build@0.9.9-canary.16"
9054b7f2f528f048d8b3c1ae2fed349f475099fa,Luc,2019-10-30 04:12:06+00:00,kodiakhq[bot],2019-10-30 04:12:06+00:00,"[now-static-build] Improve Gatsby default routes (#3212)

This PR does 3 things:
- add default caching headers 
- redirect all missed requests to Gatsby's own 404.html page
- add deprecation message to `gatsby-plugin-now` since we're auto injecting it and it's not needed anymore

Fixes #2859"
17cd17ac96b26b511bab0071ee63af5e9bd30fec,Steven,2019-10-29 23:03:39+00:00,kodiakhq[bot],2019-10-29 23:03:39+00:00,"[now-routing-utils] Enhance superstatic validation (#3219)

This PR refactors a few things:

- enhance validation so that invalid regex is caught before transforming to routes
- remove `filePaths` input parameter since it is no longer used

After this PR is merged and released, we'll be able to perform validation earlier in the build pipeline and report the errors to the user."
d7c2d071c13ac00a0b2bdd8d5d4ee15ccca6bae8,Andy Bitz,2019-10-29 20:07:06+00:00,Andy Bitz,2019-10-29 20:07:06+00:00,"Publish

 - @now/build-utils@1.0.0-canary.16"
483a117a6a12567bb517514c5cb0601724dfa265,Andy,2019-10-29 20:03:04+00:00,GitHub,2019-10-29 20:03:04+00:00,"[now-build-utils] Validate functions and allow them as config (#3218)

* [now-build-utils] Validate functions and allow them as config

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* Change memory check

* Adjust test"
3c630343d0063c6b35404c92b0806c123fba3f26,Steven,2019-10-29 14:38:40+00:00,Steven,2019-10-29 14:38:40+00:00,"Publish

 - @now/routing-utils@1.2.3-canary.5"
fe61b31197730a0e39cf3dd53f64880a5f0986f4,Steven,2019-10-29 14:23:23+00:00,kodiakhq[bot],2019-10-29 14:23:23+00:00,"[now-routing-utils] Fix html redirects for `cleanUrls` (#3217)

We used to read the output files and create a route for each redirect when `cleanUrls: true`.

Instead, this PR will add 2 redirects for `cleanUrls: true` no matter how many files are in the outputs."
af14d0af4b100758bbf264a92143937c1d8965c3,Joe Haddad,2019-10-29 01:28:24+00:00,Joe Haddad,2019-10-29 01:28:24+00:00,"Publish

 - @now/build-utils@1.0.0-canary.15
 - now@16.1.4-canary.28
 - @now/next@1.0.0-canary.15"
e04e6bb188c7d54044a70c5f6115507e9b80acd2,JJ Kasper,2019-10-29 01:26:42+00:00,kodiakhq[bot],2019-10-29 01:26:42+00:00,"[now-next] Add Beta iSSG Support (#3067)

Adds support for new SPRv2 handling in Next.js.

x-ref: #3021"
e36f3d355e58495d0356934f2ff26f7c3d8ba915,Andy,2019-10-28 23:47:45+00:00,kodiakhq[bot],2019-10-28 23:47:45+00:00,"[now-build-utils] Add functions property (#3213)

This updates `@now/build-utils` to add support for the function property including types and tests.

Related: [PRODUCT-27]

[PRODUCT-27]: https://zeit.atlassian.net/browse/PRODUCT-27"
24891e3ce8827771aacd110ef7c744b5b02a9397,Nathan Rajlich,2019-10-28 23:26:13+00:00,GitHub,2019-10-28 23:26:13+00:00,"[now-cli] Remove now dev `cleanCacheDir()` function (#3214)

Dead code as of #2097."
147c703cce4c0102d70cd8ecc884e36baef9e07a,Steven,2019-10-28 14:47:33+00:00,Steven,2019-10-28 14:47:33+00:00,"Publish

 - now@16.4.4
 - @now/routing-utils@1.3.2"
3aa92c3f2773abafd5fe2899a77fb4b176db5f18,Steven,2019-10-28 14:38:58+00:00,Steven,2019-10-28 14:41:11+00:00,[now-routing-utils] Fix validation for routes/cleanUrls (#3211)
0d29e37dcb9f4797f6cd188738939c05888c3a4c,Steven,2019-10-28 14:40:03+00:00,Steven,2019-10-28 14:40:03+00:00,"Publish

 - now@16.1.4-canary.27
 - @now/routing-utils@1.2.3-canary.4"
089b29c2cab492310584fd8ab110b90abc032ba2,Steven,2019-10-28 14:38:58+00:00,GitHub,2019-10-28 14:38:58+00:00,[now-routing-utils] Fix validation for routes/cleanUrls (#3211)
af513c249ce558cdcf8a7d365c4de1842e3242d3,Leo Lamprecht,2019-10-26 15:53:38+00:00,Leo Lamprecht,2019-10-26 15:58:21+00:00,"Improve test stability (#3208)

This pull request aims to make our test suite more stable."
d567b5f2fcf7e02bed321e09e7c24736a2552567,Leo Lamprecht,2019-10-26 15:53:38+00:00,kodiakhq[bot],2019-10-26 15:53:38+00:00,"Improve test stability (#3208)

This pull request aims to make our test suite more stable."
c3363530203617232b34a4f945fd7b877e77abf5,Max Rovensky,2019-10-25 22:03:24+00:00,Max Rovensky,2019-10-25 22:03:24+00:00,"Publish

 - now@16.4.3"
523b9de1e0c5fe9ce67dedceeabec6aa152c97df,Max,2019-10-25 21:50:15+00:00,Max Rovensky,2019-10-25 22:02:57+00:00,Separate out `queued` into it's own spinner (#3206)
6151f11657c5cdff35fd759b403ff490022c19b6,Max Rovensky,2019-10-25 21:50:49+00:00,Max Rovensky,2019-10-25 21:50:49+00:00,"Publish

 - now@16.1.4-canary.26"
c0d3847aab7509e1483af776ad92d3a144cbbbc5,Max,2019-10-25 21:50:15+00:00,GitHub,2019-10-25 21:50:15+00:00,Separate out `queued` into it's own spinner (#3206)
93d295ac5cbef987310c1c093627646198d33423,Max Rovensky,2019-10-25 20:47:41+00:00,Max Rovensky,2019-10-25 20:47:41+00:00,"Publish

 - now@16.4.2"
8430de13c2e21db1a84a785455662e36d5cae789,Max,2019-10-25 19:59:51+00:00,Max Rovensky,2019-10-25 20:47:02+00:00,"Add `Queued` spinner (#3205)

* Add `Queued` indication before builds begin

* Fix second spinner condition"
c78af57d76b7d597dbc62f28b1e69b84143f1bdb,luc,2019-10-25 20:01:19+00:00,luc,2019-10-25 20:01:19+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.2
 - now@16.1.4-canary.25
 - @now/next@1.0.0-canary.14
 - @now/node@1.0.0-canary.10
 - @now/static-build@0.9.9-canary.15"
172605d77d0aaf2900802b110b977ab1b85e217e,Max,2019-10-25 19:59:51+00:00,Luc,2019-10-25 19:59:51+00:00,"Add `Queued` spinner (#3205)

* Add `Queued` indication before builds begin

* Fix second spinner condition"
d7dc5a0c45813aa80594151b19d8e39cde33d90a,Michael Zetterberg fd. Lopez,2019-10-25 19:42:20+00:00,kodiakhq[bot],2019-10-25 19:42:20+00:00,"[gatsby-plugin-now] Fix logic error for redirect check (#3203)

Currently `__now_routes_g4t5bY.json` always gets created, regardless of existing redirects in Gatsby.

This PR fixes that.

PS. According to https://github.com/zeit/now/blob/canary/CONTRIBUTING.md I should run `yarn lint` and `yarn test` but both fail on a clean clone. Not sure how to handle that.

gist for errors:
- [yarn lint](https://gist.github.com/michaellopez/ae187969b64da017de295967cb0d7539)
- [yarn test](https://gist.github.com/michaellopez/024c484bedca8018e933d61b3a2c13ee)"
75edd0bab5a1fcee8685b934abb5a2252a3bd2f7,Steven,2019-10-25 18:56:31+00:00,kodiakhq[bot],2019-10-25 18:56:31+00:00,"[now-node][now-next] Bump node-file-trace to 0.4.0 (#3204)

Bump `@zeit/node-file-trace` to version [0.4.0](https://github.com/zeit/node-file-trace/releases/tag/0.4.0)."
ac60b3660cfb5602eda2c6a1872ac36c6a430445,Luc,2019-10-25 12:54:14+00:00,kodiakhq[bot],2019-10-25 12:54:14+00:00,"[now-static-build] Inject `gatsby-plugin-now` in Gatsby deployments (#3182)

This PR is an attempt to automatically inject `gatsby-plugin-now` in Gatsby projects, as an optimisation.

- [x] avoid conflicts with existing files
- [x] refactor"
372a6746254f71d4095ce7639e38814a6c27b73e,Sophearak Tha,2019-10-25 12:34:00+00:00,Sophearak Tha,2019-10-25 12:34:00+00:00,"Publish

 - @now/build-utils@0.11.1
 - now@16.4.1
 - now-client@5.2.2
 - @now/next@1.0.5
 - @now/python@0.3.3"
fafeadb7ba2b8c43f3374cfba047a778913285f1,Sophearak Tha,2019-10-25 12:02:41+00:00,Leo Lamprecht,2019-10-25 12:14:24+00:00,update `now-cli` readme (#3202)
966b1e763fca291bb15872f0056d590ad116bbc1,Max,2019-10-25 11:38:58+00:00,Leo Lamprecht,2019-10-25 12:14:19+00:00,Add `apiUrl` debug log to now-client (#3201)
6e22c07eccfdeb4784be954ff1070f4bebd8de9f,Sophearak Tha,2019-10-25 12:04:10+00:00,Sophearak Tha,2019-10-25 12:04:10+00:00,"Publish

 - now@16.1.4-canary.24
 - now-client@5.1.1-canary.12"
857e4ef874fc13a6cf6ca0a1b60c4590fa49d921,Sophearak Tha,2019-10-25 12:02:41+00:00,Leo Lamprecht,2019-10-25 12:02:41+00:00,update `now-cli` readme (#3202)
aa03f69bdcae418627b1947a279046fb87db06cf,Max,2019-10-25 11:38:58+00:00,Leo Lamprecht,2019-10-25 11:38:58+00:00,Add `apiUrl` debug log to now-client (#3201)
8fc77139e094bee903ac72392347f42eb94d85b6,Sophearak Tha,2019-10-25 11:04:04+00:00,Sophearak Tha,2019-10-25 11:04:04+00:00,"Publish

 - now@16.1.4-canary.23"
bb60e1a5fe14c41d2237395f791f0045a1900db1,Luc,2019-10-25 10:38:02+00:00,Leo Lamprecht,2019-10-25 10:47:19+00:00,Improve styling of 1.0 message (#3200)
87802cb0020f4cdcb64f0628f796e3aa6dafbe06,Luc,2019-10-25 10:38:02+00:00,Leo Lamprecht,2019-10-25 10:38:02+00:00,Improve styling of 1.0 message (#3200)
cac9f807ccc8e29c31619fa0e4481d400f62478a,Nathan Rajlich,2019-10-24 13:15:27+00:00,Leo Lamprecht,2019-10-25 09:49:45+00:00,"[now-cli] Gracefully exit when the `cwd` does not exist (#3194)

There have been Sentry errors where `process.cwd()` fails and throws an error. This patch handles that scenario gracefully by printing a more clear error message to the user and avoids sending a report to Sentry.

Fixes #3193."
a0b1254820ba687af86138e491b8d5e207d974ad,Steven,2019-10-24 19:34:38+00:00,Leo Lamprecht,2019-10-25 09:48:27+00:00,Fix circle ci xcode version (#3197)
0faff4132be7df0e3e8619b7df60fb77d714c500,Nathan Rajlich,2019-10-24 23:02:16+00:00,Leo Lamprecht,2019-10-25 09:47:36+00:00,"[now-build-utils] Add more complete `PackageJson` typings (#3198)

* [now-build-utils] Add more complete `PackageJson` typings

Planning on using this in `now-cli`.

* Make ""name"" optional

* Use a namespace"
1793a1287d280fb7d3571e9acd6bce3196b717c2,Joe Haddad,2019-10-23 17:34:13+00:00,Leo Lamprecht,2019-10-25 09:45:37+00:00,"[now-next] Cache All Next.js Directories  (#3190)

Next.js now uses the `css` and `media` folders for its build-in CSS support. These files should be cached forever."
5b572239c19fba5fa216e9d1e40889594ec79661,Max,2019-10-22 20:19:11+00:00,Leo Lamprecht,2019-10-25 09:43:34+00:00,"[now-client] Yield an error event if path provided is not absolute (#3173)

This adds an `error` event when provided path to `now-client` isn't absolute"
f6a66d937eca7b8f4897e0a76c260cbbd2b91fa0,Steven,2019-10-22 15:30:57+00:00,Leo Lamprecht,2019-10-25 09:43:29+00:00,"[now-client] Change npm publish to use files key (#3181)

- remove `.npmignore`
- use [`files`](https://docs.npmjs.com/files/package.json#files) key in `package.json`
- update metadata in `package.json`
- fix test harness to generate a token for each test deployment

This PR will prevent publishing [tests](https://cdn.jsdelivr.net/npm/now-client@5.2.0/tests/) to npm and any other unused files."
2cf9a2f489f83e3e78d3cc693e8b185c2218af2d,Sophearak Tha,2019-10-25 04:28:36+00:00,Leo Lamprecht,2019-10-25 09:42:18+00:00,"[now-client] [now-cli] Update version of deployment API (#3188)

* Update version of deployment API

* Add `alias-assigned` event and handling

* Replace v9 api with v10

* Don't return on immediate ready

* Handle alias-assigned for v1 deployments

* Improve event ordering

* Detect upload deployment readiness by `alias-assigned`

* rebuild

* Fix upload readiness event type

* Check for aliases before running status checks

* Improve event flow and wait for `ready` in v1 deployments

* Remove console.log"
454f4dcc61bee8d8474384a387f91927355bd932,Nathan Rajlich,2019-10-23 21:23:03+00:00,Leo Lamprecht,2019-10-25 09:42:09+00:00,"[now-cli] Don't throw if builder child process can not be killed (#3192)

The Sentry error reports that the process has already been killed, so no need to throw in this case.

Fixes #3191."
6e1065fde2dbbae910fbef09284fd9d7f98da34f,Yevhen Amelin,2019-10-22 22:26:54+00:00,Leo Lamprecht,2019-10-25 09:41:19+00:00,"[now-python] Set PIP_USER environment variable (#3111)

Disables `--user` parameter of the `pip` utility, which is forcibly set under the hood on Debian systems and causes an error in the `pipInstall` function:

`distutils.errors.DistutilsOptionError: can't combine user with prefix, exec_prefix/home, or install_(plat)base`

Fixes #3089"
80ce06b20c0ad94c22c083194f0d137b42aa845f,Max,2019-10-23 09:32:47+00:00,Leo Lamprecht,2019-10-25 09:41:01+00:00,"[now-client] Add `apiUrl` support (#3168)

This PR adds support for `apiUrl` option to `now-client` as well as a test for it"
99f3ab8b6403a1800942e896620b6b8eada36283,Nathan Rajlich,2019-10-25 00:38:21+00:00,Leo Lamprecht,2019-10-25 09:40:23+00:00,"[now-cli] Loosen ""engines"" requirement to Node `>= 8` (#3195)

Now that `now-client` does not use `fetch-h2`, any version of Node 8 or newer should work with `now-cli`.

Related to #2711."
ca4f6d2491d33528df8f1bba0bc1dd86acad5faf,Luc,2019-10-23 20:26:09+00:00,Leo Lamprecht,2019-10-25 09:39:53+00:00,"[now-cli] Disable `--prod` and `--target` for Now 1.0 deployments (#3189)

This PR disables Now 1.0 production deployments with the following error message:

> Option --prod is not supported for Now 1.0 deployments. To manually alias a deployment, use `now alias` instead.

It looks like this:
<img width=""835"" alt=""Capture decran 2019-10-23 a 19 42 09"" src=""https://user-images.githubusercontent.com/6616955/67419574-3e125380-f5cd-11e9-81ff-63bde292539b.png"">

Also disables `--target` for Now 1.0 deployments."
dcd57e148f47e1e8ad830006fd7606b3cd6514f8,Sophearak Tha,2019-10-25 04:32:43+00:00,Sophearak Tha,2019-10-25 04:32:43+00:00,"Publish

 - @now/build-utils@1.0.0-canary.14
 - now@16.1.4-canary.22
 - now-client@5.1.1-canary.11"
18fa193a17f80f133ca4aa2458758f2e25589e0e,Sophearak Tha,2019-10-25 04:28:36+00:00,GitHub,2019-10-25 04:28:36+00:00,"[now-client] [now-cli] Update version of deployment API (#3188)

* Update version of deployment API

* Add `alias-assigned` event and handling

* Replace v9 api with v10

* Don't return on immediate ready

* Handle alias-assigned for v1 deployments

* Improve event ordering

* Detect upload deployment readiness by `alias-assigned`

* rebuild

* Fix upload readiness event type

* Check for aliases before running status checks

* Improve event flow and wait for `ready` in v1 deployments

* Remove console.log"
34dce350bedef661bf3ce2d0afa6485d820f33cd,Nathan Rajlich,2019-10-25 00:38:21+00:00,kodiakhq[bot],2019-10-25 00:38:21+00:00,"[now-cli] Loosen ""engines"" requirement to Node `>= 8` (#3195)

Now that `now-client` does not use `fetch-h2`, any version of Node 8 or newer should work with `now-cli`.

Related to #2711."
c7caa7b9055b968394b45e1381b0e0cfb38da105,Nathan Rajlich,2019-10-24 23:02:16+00:00,GitHub,2019-10-24 23:02:16+00:00,"[now-build-utils] Add more complete `PackageJson` typings (#3198)

* [now-build-utils] Add more complete `PackageJson` typings

Planning on using this in `now-cli`.

* Make ""name"" optional

* Use a namespace"
2ceb2a78aa49683e5b03408a480c09114b4e0234,Steven,2019-10-24 20:59:56+00:00,Steven,2019-10-24 20:59:56+00:00,"Publish

 - @now/routing-utils@1.3.1"
d97da21afca6333226a01e772619a268d565a297,Steven,2019-10-24 20:07:16+00:00,Steven,2019-10-24 20:58:38+00:00,"[now-routing-utils] Change cleanUrls to redirect only (#3196)

When `cleanUrls` is true, the redirects will be applied to the routes however there are no longer any rewrites. Instead (through a different PR to fmeta-util) we will rename the file output to remove the `.html` extension."
7b52b26ff0234b22fead1db7fed3736eeccdb868,Steven,2019-10-24 20:09:06+00:00,Steven,2019-10-24 20:09:06+00:00,"Publish

 - now@16.1.4-canary.21
 - now-client@5.1.1-canary.10
 - @now/next@1.0.0-canary.13
 - @now/python@0.2.17-canary.7
 - @now/routing-utils@1.2.3-canary.3"
3c958a442903ae37a94563c88e1bad399280dedd,Steven,2019-10-24 20:07:16+00:00,kodiakhq[bot],2019-10-24 20:07:16+00:00,"[now-routing-utils] Change cleanUrls to redirect only (#3196)

When `cleanUrls` is true, the redirects will be applied to the routes however there are no longer any rewrites. Instead (through a different PR to fmeta-util) we will rename the file output to remove the `.html` extension."
d8660b1db35d0a22f3cc74519215f5bf7c3126a9,Steven,2019-10-24 19:34:38+00:00,GitHub,2019-10-24 19:34:38+00:00,Fix circle ci xcode version (#3197)
0996640798de776c122b5abc11332c907bf72ae9,Nathan Rajlich,2019-10-24 13:15:27+00:00,kodiakhq[bot],2019-10-24 13:15:27+00:00,"[now-cli] Gracefully exit when the `cwd` does not exist (#3194)

There have been Sentry errors where `process.cwd()` fails and throws an error. This patch handles that scenario gracefully by printing a more clear error message to the user and avoids sending a report to Sentry.

Fixes #3193."
079f4ba6bf9207eaac2d91bcfb452bd7efae4c20,Nathan Rajlich,2019-10-23 21:23:03+00:00,kodiakhq[bot],2019-10-23 21:23:03+00:00,"[now-cli] Don't throw if builder child process can not be killed (#3192)

The Sentry error reports that the process has already been killed, so no need to throw in this case.

Fixes #3191."
bdf78efbfb105792da3a15f4756109bc3223d3e7,Luc,2019-10-23 20:26:09+00:00,kodiakhq[bot],2019-10-23 20:26:09+00:00,"[now-cli] Disable `--prod` and `--target` for Now 1.0 deployments (#3189)

This PR disables Now 1.0 production deployments with the following error message:

> Option --prod is not supported for Now 1.0 deployments. To manually alias a deployment, use `now alias` instead.

It looks like this:
<img width=""835"" alt=""Capture decran 2019-10-23 a 19 42 09"" src=""https://user-images.githubusercontent.com/6616955/67419574-3e125380-f5cd-11e9-81ff-63bde292539b.png"">

Also disables `--target` for Now 1.0 deployments."
07ba180ede692a2ec7d590010b869d46f7c85509,Joe Haddad,2019-10-23 17:34:13+00:00,kodiakhq[bot],2019-10-23 17:34:13+00:00,"[now-next] Cache All Next.js Directories  (#3190)

Next.js now uses the `css` and `media` folders for its build-in CSS support. These files should be cached forever."
94a2b017d4665bc3362df2156214e3e471f61bbc,Max,2019-10-23 09:32:47+00:00,kodiakhq[bot],2019-10-23 09:32:47+00:00,"[now-client] Add `apiUrl` support (#3168)

This PR adds support for `apiUrl` option to `now-client` as well as a test for it"
37c06c89d02feb0e1a3007cc33355f631de30b98,Yevhen Amelin,2019-10-22 22:26:54+00:00,kodiakhq[bot],2019-10-22 22:26:54+00:00,"[now-python] Set PIP_USER environment variable (#3111)

Disables `--user` parameter of the `pip` utility, which is forcibly set under the hood on Debian systems and causes an error in the `pipInstall` function:

`distutils.errors.DistutilsOptionError: can't combine user with prefix, exec_prefix/home, or install_(plat)base`

Fixes #3089"
42ffc2dafb8bf6cf6c44ebb7be15a3f09dce5406,Max,2019-10-22 20:19:11+00:00,kodiakhq[bot],2019-10-22 20:19:11+00:00,"[now-client] Yield an error event if path provided is not absolute (#3173)

This adds an `error` event when provided path to `now-client` isn't absolute"
cf65fabe2761779ea64f9961a8d4dd125814a230,Steven,2019-10-22 15:30:57+00:00,kodiakhq[bot],2019-10-22 15:30:57+00:00,"[now-client] Change npm publish to use files key (#3181)

- remove `.npmignore`
- use [`files`](https://docs.npmjs.com/files/package.json#files) key in `package.json`
- update metadata in `package.json`
- fix test harness to generate a token for each test deployment

This PR will prevent publishing [tests](https://cdn.jsdelivr.net/npm/now-client@5.2.0/tests/) to npm and any other unused files."
03b5a0c0bfc795b2e467c92338c032648cca1c18,Nathan Rajlich,2019-10-21 23:19:11+00:00,Nathan Rajlich,2019-10-21 23:19:11+00:00,"Publish

 - @now/build-utils@0.11.0
 - now@16.4.0
 - now-client@5.2.1
 - @now/node@1.0.2
 - @now/python@0.3.2
 - @now/routing-utils@1.3.0
 - @now/static-build@0.11.0"
f76abe3372c855a66ecd440dda0205fea907ba2e,Steven,2019-10-21 17:27:46+00:00,Nathan Rajlich,2019-10-21 23:11:16+00:00,"[now-build-utils] Add contentType prop to File (#3178)

This PR adds a `contentType` to the File interface.

This is necessary for [PRODUCT-341] to work properly with `cleanUrls` which will strip the file name but we will still need specify `contentType: 'text/html'`.

This is required for @dav-is `api-builds` PR 633 to work properly.

[PRODUCT-341]: https://zeit.atlassian.net/browse/PRODUCT-341"
cdd43b74aedfa8ae1e8f4e9415717e9c157b52bd,Steven,2019-10-21 15:45:38+00:00,Nathan Rajlich,2019-10-21 23:11:09+00:00,"[now-node] Fix helpers when POST json has empty body (#3177)

The `@now/node` helpers json parsing is too strict and doesn't match the behavior of Express when an incoming request has `{ method: 'POST', Content-Type: 'application/json', body: '' }`.

Instead of returning 400, this PR will continue with `body = {}` to match Express.

Fixes https://spectrum.chat/zeit/now/klarna-with-zeit-now~60852003-4db6-4ec4-a611-83b2349ece08"
fa633d0e020cdd62315949256fb27a9501e6c52b,Nathan Rajlich,2019-10-18 15:53:00+00:00,Nathan Rajlich,2019-10-21 23:11:00+00:00,"[now-cli] Temporarily force `TooTallNate/signal-exit#update/sighub-to-sigint-on-windows` for ""signal-exit"" module (#3171)

Fixes https://github.com/zeit/now/issues/2564.

Upstream fix PR: https://github.com/tapjs/signal-exit/pull/55."
9b46e60c09912b9096dfb7db997990d751b66111,Nathan Rajlich,2019-10-18 13:25:01+00:00,Nathan Rajlich,2019-10-21 23:10:54+00:00,"[now-cli] Remove `serveProjectAsStatic()` (#3170)

Because we treat purely static projects as v2 projects with a `@now/static` builder specified, this is now dead code."
58eef7f3940eb8613eeeb546391ef2b90c5f9fcf,Steven,2019-10-17 18:38:25+00:00,Nathan Rajlich,2019-10-21 23:10:39+00:00,"[now-build-utils] Fix static file serving from `now dev` (#3167)

This PR does a few things

- Separate tests into `integration.test.js` and `unit.test.js`
- Use one static build instead of many to avoid `should NOT have more than 128 items` error
- Add a new unit test so we don't regress

Fixes #3159"
e97e0fbb64853cdc18c78574f36ffaf5231755b7,Nathan Rajlich,2019-10-17 00:18:14+00:00,Nathan Rajlich,2019-10-21 23:10:32+00:00,"[now-cli] Spawn builder child processes with `stdio: 'inherit'` in `now dev` (#3113)

Inherit the `now dev` process stdio streams in builder child processes, so that ANSI color codes may be used when stdout is a TTY.

**Examples:**

_Next.js_

<img width=""523"" alt=""Screen Shot 2019-10-01 at 3 42 33 PM"" src=""https://user-images.githubusercontent.com/71256/66006087-4fe75780-e462-11e9-927f-1e81466c4108.png"">

_Gatsby_ (depends on #3112)

<img width=""507"" alt=""Screen Shot 2019-10-01 at 3 40 02 PM"" src=""https://user-images.githubusercontent.com/71256/66006094-5d9cdd00-e462-11e9-81da-e60bd9516778.png"">

Fixes #3135."
b82876fd821f8bf96c3a69a939eea226d67b7731,Steven,2019-10-16 22:34:52+00:00,Nathan Rajlich,2019-10-21 23:10:08+00:00,"[now-routing-utils] Add superstatic transformations (#3138)

This implements a new function `getTransformedRoutes()` which transforms some [superstatic](https://github.com/firebase/superstatic#configuration) configuration keys to Now routes so we can eventually use this new keys in `now.json`.

In particular, the following new keys are transformed to `routes`.

- cleanUrls
- rewrites
- redirects
- headers
- trailingSlash

[PRODUCT-341] #close

[PRODUCT-341]: https://zeit.atlassian.net/browse/PRODUCT-341"
02ad32ec22bf5e931a3fdeec9a1721b282728dea,Steven,2019-10-16 21:47:31+00:00,Nathan Rajlich,2019-10-21 23:09:16+00:00,"[tests] Fix tests so they wait for v1 deployments (#3162)

Our tests periodically fail because we're creating too many v1 deployments on a free plan and it times out.

This limits the number of deployments by running v1 exclusively under Node 12.

It also adds a missing waitForDeployment()."
433fe35c93719f4fce8f48e7d9e471d0e94a2d9a,Allen Hai,2019-10-14 23:49:59+00:00,Nathan Rajlich,2019-10-21 23:09:06+00:00,"[now-static-build] Add stencil to list of optimized static frameworks (#3158)

This PR enables a zero-config deployment experience for `stencil` projects. The default build command outputs to a `www` directory."
90c59d6ae2d6b99a8e245552b735af4e41d3043c,Jacob Mischka,2019-10-10 16:51:37+00:00,Nathan Rajlich,2019-10-21 23:08:51+00:00,"[now-python] Fix UnicodeDecodeError for binary response from handler (#3148)

Fixes #3147"
33672c3d7830029aec2022f51340eef618342376,Joe Haddad,2019-10-10 05:07:26+00:00,Nathan Rajlich,2019-10-21 23:08:42+00:00,"[now-build-utils] Allow a null `fallback` in `Prerender` (#3144)

This allows a `null` `fallback` to be provided to a `Prerender`. The use case is a lazily prerendered route (often meaning dynamically rendered)."
59ae7a989ab029a6c4c37f4b9161003f454eac7d,Nathan Rajlich,2019-10-09 01:19:10+00:00,Nathan Rajlich,2019-10-21 23:08:35+00:00,"[now-cli] Set the builder's debug env var based on `DevServer.debug` (#3139)

This makes it so that a programatically created `DevServer` instance that has `debug` mode enabled also gets set on the builder child processes as expected, rather than only when invoked via CLI.

For example, the `dev-server.unit.js` tests can set `debug: true` and with this change the builder child processes will also have debug logs enabled. See [here](https://git.io/JeW0O)."
5767e9e8c2eb2066e1cd7724ea5f88c5bee3f787,Nathan Rajlich,2019-10-08 22:57:29+00:00,Nathan Rajlich,2019-10-21 23:08:26+00:00,"[now-static-build] Exit dev server child processes upon SIGINT/SIGTERM (#3136)

Explicitly send the SIGINT / SIGTERM signal to `now dev` server child processes, so that they are not left running when running the now-dev unit tests.

Related to #3113 which has hanging unit tests that never ""complete""."
e62b9e8ed906b995a2ee01383f1c8f8bfe8245cf,Steven,2019-10-07 20:44:44+00:00,Nathan Rajlich,2019-10-21 23:08:10+00:00,"[now-build-utils] Fix typo occurres => occurs (#3132)

Fixes #2931"
59597ccd173df647d08074ebcc78800f6b8e545f,Sophearak Tha,2019-10-04 13:23:45+00:00,Nathan Rajlich,2019-10-21 23:07:57+00:00,[now-cli] Update readme (#3128)
7be49c66ef78aa4b4de6472a6e4ecd3cb7fa4a79,Andy,2019-10-04 12:54:27+00:00,Nathan Rajlich,2019-10-21 23:07:50+00:00,"Revert ""[now-cli] Remove `dev: ""now dev""` script detection logic in `now dev` (#3088)"" (#3127)

This reverts commit 85170d7231b665ad0753af26fe6be5d173b8a8b0."
1380e25ef3a572b7fe157ea89e3a25a746cf3af0,Sophearak Tha,2019-10-04 10:25:26+00:00,Nathan Rajlich,2019-10-21 23:07:45+00:00,"[now-client] Fix `ENOENT` regression in `now-client` (#3125)

This PR should fixes `ENOENT` related errors

```
> Error! ENOENT: no such file or directory, stat '.../node_modules/.bin/...'
```

Related: https://github.com/zeit/now/issues/3104"
e825ce746fd0dd8c41498df748312e5e2a1d4777,Nathan Rajlich,2019-10-03 21:29:54+00:00,Nathan Rajlich,2019-10-21 23:07:38+00:00,"[now-cli] Remove `dev: ""now dev""` script detection logic in `now dev` (#3088)

As of https://github.com/zeit/now-builders/pull/679, this logic is unnecessary because the `@now/static-build` builder will never end up executing the `dev` script when there is a `now.json` file present (and thus, no builds present, aka zero config mode).

Also, statically detecting the `now dev` command from the script command is brittle, as the command could execute a separate shell script that ends up executing `now dev` (and this detection logic would be a false negative)."
dc9b9c240a2418b127fb1152527043a0c75c926e,Steven,2019-10-21 21:55:28+00:00,kodiakhq[bot],2019-10-21 21:55:28+00:00,"[now-cli] Add support for new keys in `now dev` (#3174)

This PR is a followup to #3138 so that `now dev` will validate and transform the following `now.json` config keys to routes:

- cleanUrls
- rewrites
- redirects
- headers
- trailingSlash

[PRODUCT-341] #close

[PRODUCT-341]: https://zeit.atlassian.net/browse/PRODUCT-341"
84d8f73a2d8bef2508a9b5fa9e2c78c749c68754,Steven,2019-10-21 17:35:03+00:00,Steven,2019-10-21 17:35:03+00:00,"Publish

 - @now/build-utils@1.0.0-canary.13"
b24cfb605bcc95aaa587b0f25f35dcdeb4f2e0cb,Steven,2019-10-21 17:27:46+00:00,kodiakhq[bot],2019-10-21 17:27:46+00:00,"[now-build-utils] Add contentType prop to File (#3178)

This PR adds a `contentType` to the File interface.

This is necessary for [PRODUCT-341] to work properly with `cleanUrls` which will strip the file name but we will still need specify `contentType: 'text/html'`.

This is required for @dav-is `api-builds` PR 633 to work properly.

[PRODUCT-341]: https://zeit.atlassian.net/browse/PRODUCT-341"
57f66fe62fce4bdfc4d027fa3a44b1b29b9233dd,Steven,2019-10-21 15:57:06+00:00,Steven,2019-10-21 15:57:06+00:00,"Publish

 - now@16.1.4-canary.20
 - @now/node@1.0.0-canary.9"
d2cd4a3c5a6b671d1769a3f3841309b891b86f68,Steven,2019-10-21 15:45:38+00:00,kodiakhq[bot],2019-10-21 15:45:38+00:00,"[now-node] Fix helpers when POST json has empty body (#3177)

The `@now/node` helpers json parsing is too strict and doesn't match the behavior of Express when an incoming request has `{ method: 'POST', Content-Type: 'application/json', body: '' }`.

Instead of returning 400, this PR will continue with `body = {}` to match Express.

Fixes https://spectrum.chat/zeit/now/klarna-with-zeit-now~60852003-4db6-4ec4-a611-83b2349ece08"
4e5895180849e3506a805aed6a0fb1ca7044165b,Joe Haddad,2019-10-20 18:56:29+00:00,Joe Haddad,2019-10-20 18:56:29+00:00,"Publish

 - @now/next@1.0.4"
fbd805aad7b07a7939f86e2a6bb53cce43d07103,Joe Haddad,2019-10-15 12:39:40+00:00,Joe Haddad,2019-10-20 18:37:35+00:00,[now-next] Update console.time labels for clarity (#3157)
2a2705c6e3bbc390a961005919b837436814ba1d,JJ Kasper,2019-10-10 20:36:24+00:00,Joe Haddad,2019-10-20 18:37:27+00:00,"Add test for now dev and Next.js src dir (#3149)

Follow up on #3140 we needed to publish the change before we could test it in `now dev`"
986c957183152295e74ddbdb2aa9572503bbb27b,JJ Kasper,2019-10-10 14:40:38+00:00,Joe Haddad,2019-10-20 18:37:13+00:00,"[now-next] Add support for src dir in now-dev (#3140)

Fixes: #3133
Fixes: https://github.com/zeit/next.js/issues/9007"
c5d063e876f50184a62ea554c60305257bc89316,Nathan Rajlich,2019-10-08 22:25:47+00:00,Joe Haddad,2019-10-20 18:37:07+00:00,"[now-next] Exit dev server child processes upon SIGINT/SIGTERM (#3137)

Explicitly send the SIGINT / SIGTERM signal to `now dev` server child processes, so that they are not left running when running the now-dev unit tests.

Related to #3113 which has hanging unit tests that never ""complete""."
110e1445fa267105fea86554f1d4b2825ff07791,Nathan Rajlich,2019-10-18 15:53:00+00:00,kodiakhq[bot],2019-10-18 15:53:00+00:00,"[now-cli] Temporarily force `TooTallNate/signal-exit#update/sighub-to-sigint-on-windows` for ""signal-exit"" module (#3171)

Fixes https://github.com/zeit/now/issues/2564.

Upstream fix PR: https://github.com/tapjs/signal-exit/pull/55."
f9355cbc777d88117807cef4866e147ed72758c7,Nathan Rajlich,2019-10-18 13:25:01+00:00,kodiakhq[bot],2019-10-18 13:25:01+00:00,"[now-cli] Remove `serveProjectAsStatic()` (#3170)

Because we treat purely static projects as v2 projects with a `@now/static` builder specified, this is now dead code."
0a9bbd902ff30e51dbbe7b06c3542ae8a027eed7,Steven,2019-10-17 18:41:00+00:00,Steven,2019-10-17 18:41:00+00:00,"Publish

 - @now/build-utils@1.0.0-canary.12"
c8c960f7855cea5216571bd1ebbfb5d23757b5d0,Steven,2019-10-17 18:38:25+00:00,kodiakhq[bot],2019-10-17 18:38:25+00:00,"[now-build-utils] Fix static file serving from `now dev` (#3167)

This PR does a few things

- Separate tests into `integration.test.js` and `unit.test.js`
- Use one static build instead of many to avoid `should NOT have more than 128 items` error
- Add a new unit test so we don't regress

Fixes #3159"
fb0f4beca6cd65d71d90e5d109a95977a5769237,Steven,2019-10-17 12:32:17+00:00,Steven,2019-10-17 12:32:17+00:00,"Publish

 - now@16.1.4-canary.19
 - @now/next@1.0.0-canary.12
 - @now/routing-utils@1.2.3-canary.2"
21398d72143be02c5deb2fb679fe27f63b8033ea,Nathan Rajlich,2019-10-17 00:18:14+00:00,kodiakhq[bot],2019-10-17 00:18:14+00:00,"[now-cli] Spawn builder child processes with `stdio: 'inherit'` in `now dev` (#3113)

Inherit the `now dev` process stdio streams in builder child processes, so that ANSI color codes may be used when stdout is a TTY.

**Examples:**

_Next.js_

<img width=""523"" alt=""Screen Shot 2019-10-01 at 3 42 33 PM"" src=""https://user-images.githubusercontent.com/71256/66006087-4fe75780-e462-11e9-927f-1e81466c4108.png"">

_Gatsby_ (depends on #3112)

<img width=""507"" alt=""Screen Shot 2019-10-01 at 3 40 02 PM"" src=""https://user-images.githubusercontent.com/71256/66006094-5d9cdd00-e462-11e9-81da-e60bd9516778.png"">

Fixes #3135."
a5a56836a8283512a63238a169f8e095adb563d9,Steven,2019-10-16 22:34:52+00:00,kodiakhq[bot],2019-10-16 22:34:52+00:00,"[now-routing-utils] Add superstatic transformations (#3138)

This implements a new function `getTransformedRoutes()` which transforms some [superstatic](https://github.com/firebase/superstatic#configuration) configuration keys to Now routes so we can eventually use this new keys in `now.json`.

In particular, the following new keys are transformed to `routes`.

- cleanUrls
- rewrites
- redirects
- headers
- trailingSlash

[PRODUCT-341] #close

[PRODUCT-341]: https://zeit.atlassian.net/browse/PRODUCT-341"
e7fd1e3c3fd8780b8200956cd533da2f3f9f0707,Steven,2019-10-16 21:47:31+00:00,kodiakhq[bot],2019-10-16 21:47:31+00:00,"[tests] Fix tests so they wait for v1 deployments (#3162)

Our tests periodically fail because we're creating too many v1 deployments on a free plan and it times out.

This limits the number of deployments by running v1 exclusively under Node 12.

It also adds a missing waitForDeployment()."
64b24bde568895a16ff2c87a7d519af5a2ee7193,Joe Haddad,2019-10-15 12:39:40+00:00,kodiakhq[bot],2019-10-15 12:39:40+00:00,[now-next] Update console.time labels for clarity (#3157)
613958d6a5eb17069b9b8ae8a5157c3c9ad9cab9,Allen Hai,2019-10-15 00:08:32+00:00,Allen Hai,2019-10-15 00:08:32+00:00,"Publish

 - now@16.1.4-canary.18
 - @now/python@0.2.17-canary.6
 - @now/static-build@0.9.9-canary.14"
21e4ebc7a9837c1d51df2a9c2faf537f0bbf450f,Allen Hai,2019-10-14 23:49:59+00:00,kodiakhq[bot],2019-10-14 23:49:59+00:00,"[now-static-build] Add stencil to list of optimized static frameworks (#3158)

This PR enables a zero-config deployment experience for `stencil` projects. The default build command outputs to a `www` directory."
16ef6229e4ff0fca6817334f409338d640756f2e,JJ Kasper,2019-10-10 20:36:24+00:00,kodiakhq[bot],2019-10-10 20:36:24+00:00,"Add test for now dev and Next.js src dir (#3149)

Follow up on #3140 we needed to publish the change before we could test it in `now dev`"
9ecb011732fb2d018651d9770df50d8623efed99,Jacob Mischka,2019-10-10 16:51:37+00:00,kodiakhq[bot],2019-10-10 16:51:37+00:00,"[now-python] Fix UnicodeDecodeError for binary response from handler (#3148)

Fixes #3147"
de48e28fa12303e6f1cd2bfb76cf285769a3bdae,JJ Kasper,2019-10-10 15:43:51+00:00,JJ Kasper,2019-10-10 15:43:51+00:00,"Publish

 - @now/build-utils@1.0.0-canary.11
 - now@16.1.4-canary.17
 - @now/next@1.0.0-canary.11"
3aecb0905a9e9126a3ef41359dd1d768881ee189,JJ Kasper,2019-10-10 14:40:38+00:00,kodiakhq[bot],2019-10-10 14:40:38+00:00,"[now-next] Add support for src dir in now-dev (#3140)

Fixes: #3133
Fixes: https://github.com/zeit/next.js/issues/9007"
c1b2da1d57ff61f318a97efe41d11bb7f7994424,Joe Haddad,2019-10-10 05:07:26+00:00,kodiakhq[bot],2019-10-10 05:07:26+00:00,"[now-build-utils] Allow a null `fallback` in `Prerender` (#3144)

This allows a `null` `fallback` to be provided to a `Prerender`. The use case is a lazily prerendered route (often meaning dynamically rendered)."
c4bee64abda9051c8a3f8f59c222fc864647ead2,Nathan Rajlich,2019-10-09 01:19:10+00:00,kodiakhq[bot],2019-10-09 01:19:10+00:00,"[now-cli] Set the builder's debug env var based on `DevServer.debug` (#3139)

This makes it so that a programatically created `DevServer` instance that has `debug` mode enabled also gets set on the builder child processes as expected, rather than only when invoked via CLI.

For example, the `dev-server.unit.js` tests can set `debug: true` and with this change the builder child processes will also have debug logs enabled. See [here](https://git.io/JeW0O)."
dbf9c5c46b47499a30799d104b2dbb5b05724b1a,Nathan Rajlich,2019-10-08 23:04:24+00:00,Nathan Rajlich,2019-10-08 23:04:24+00:00,"Publish

 - @now/build-utils@1.0.0-canary.10
 - @now/next@1.0.0-canary.10
 - @now/static-build@0.9.9-canary.13"
630ec06d48eb868c768abe2c9973f9cf696af66d,Nathan Rajlich,2019-10-08 22:57:29+00:00,kodiakhq[bot],2019-10-08 22:57:29+00:00,"[now-static-build] Exit dev server child processes upon SIGINT/SIGTERM (#3136)

Explicitly send the SIGINT / SIGTERM signal to `now dev` server child processes, so that they are not left running when running the now-dev unit tests.

Related to #3113 which has hanging unit tests that never ""complete""."
d38e464bfe05796ca183eceb603bdc3303c0f399,Nathan Rajlich,2019-10-08 22:25:47+00:00,kodiakhq[bot],2019-10-08 22:25:47+00:00,"[now-next] Exit dev server child processes upon SIGINT/SIGTERM (#3137)

Explicitly send the SIGINT / SIGTERM signal to `now dev` server child processes, so that they are not left running when running the now-dev unit tests.

Related to #3113 which has hanging unit tests that never ""complete""."
49bd2439a7d7f835924f911f8ecff40b1c1b2918,Steven,2019-10-07 20:44:44+00:00,kodiakhq[bot],2019-10-07 20:44:44+00:00,"[now-build-utils] Fix typo occurres => occurs (#3132)

Fixes #2931"
e97314a3c79aff585f1fb9ef3fcab9d16220bd32,Sophearak Tha,2019-10-04 13:25:15+00:00,Sophearak Tha,2019-10-04 13:25:15+00:00,"Publish

 - now@16.1.4-canary.16"
acb46cef142257f9630fea2f60a6ed65fb9f2b4a,Sophearak Tha,2019-10-04 13:23:45+00:00,GitHub,2019-10-04 13:23:45+00:00,[now-cli] Update readme (#3128)
06b9ff233e1ba8f8ae597e66a38a83180510664c,Sophearak Tha,2019-10-04 12:59:22+00:00,Sophearak Tha,2019-10-04 12:59:22+00:00,"Publish

 - now-client@5.1.1-canary.9"
a189e72fbe7cf80d35144f6fc569db777c051853,Andy,2019-10-04 12:54:27+00:00,Leo Lamprecht,2019-10-04 12:54:27+00:00,"Revert ""[now-cli] Remove `dev: ""now dev""` script detection logic in `now dev` (#3088)"" (#3127)

This reverts commit 85170d7231b665ad0753af26fe6be5d173b8a8b0."
75e6b15199ac9ed63d705140f68c1b67e722ffc9,Sophearak Tha,2019-10-04 10:25:26+00:00,kodiakhq[bot],2019-10-04 10:25:26+00:00,"[now-client] Fix `ENOENT` regression in `now-client` (#3125)

This PR should fixes `ENOENT` related errors

```
> Error! ENOENT: no such file or directory, stat '.../node_modules/.bin/...'
```

Related: https://github.com/zeit/now/issues/3104"
85170d7231b665ad0753af26fe6be5d173b8a8b0,Nathan Rajlich,2019-10-03 21:29:54+00:00,kodiakhq[bot],2019-10-03 21:29:54+00:00,"[now-cli] Remove `dev: ""now dev""` script detection logic in `now dev` (#3088)

As of https://github.com/zeit/now-builders/pull/679, this logic is unnecessary because the `@now/static-build` builder will never end up executing the `dev` script when there is a `now.json` file present (and thus, no builds present, aka zero config mode).

Also, statically detecting the `now dev` command from the script command is brittle, as the command could execute a separate shell script that ends up executing `now dev` (and this detection logic would be a false negative)."
500c36f5d4bb861487da841d828e68b58da9390e,Steven,2019-10-03 17:54:14+00:00,Steven,2019-10-03 17:54:14+00:00,"Publish

 - now@16.3.1
 - now-client@5.2.0
 - @now/next@1.0.3
 - @now/python@0.3.1
 - @now/static-build@0.10.1"
eeffb550214981467fdfe8e2dfbadf3fea936d08,Steven,2019-10-03 17:44:39+00:00,Steven,2019-10-03 17:44:39+00:00,"Publish

 - now@16.1.4-canary.15
 - now-client@5.1.1-canary.8"
69dbbeac4462570a2fa14465571a69bb1b477408,Steven,2019-10-03 17:41:37+00:00,Steven,2019-10-03 17:44:21+00:00,"[now-cli][now-client] Fix v1 `files` when defining a directory (#3123)

This is a follow up to #3117 which added a fix for `files` but did not observe directories.

This PR fixes the scenario where a directory is defined such that all files inside the directory should be added uploaded (recursively).

Thanks to @williamli 

[PRODUCT-350] #close

[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
1fe8317f1e587d2d30aa8560faa4feacce934988,Steven,2019-10-03 17:41:37+00:00,kodiakhq[bot],2019-10-03 17:41:37+00:00,"[now-cli][now-client] Fix v1 `files` when defining a directory (#3123)

This is a follow up to #3117 which added a fix for `files` but did not observe directories.

This PR fixes the scenario where a directory is defined such that all files inside the directory should be added uploaded (recursively).

Thanks to @williamli 

[PRODUCT-350] #close

[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
69486c3adb2c7627a4c05268ed5d70f430ceb635,Sophearak Tha,2019-10-03 14:58:00+00:00,Steven,2019-10-03 16:14:02+00:00,"[now-client] [now-cli] Handle `notice` type (#3122)

This PR handle `notice` type from API respond."
6398ef194cedd74777c38ab1aa9d99e2838b5bcd,Sophearak Tha,2019-10-03 14:58:00+00:00,kodiakhq[bot],2019-10-03 14:58:00+00:00,"[now-client] [now-cli] Handle `notice` type (#3122)

This PR handle `notice` type from API respond."
e6692bb79b34a195f9d27007f2cdc256b1b2f3d8,Steven,2019-10-03 02:17:11+00:00,Steven,2019-10-03 13:07:01+00:00,"[now-cli][now-client] Fix `--local-config` flag and `files` key (#3117)

This PR is a followup to #3110 that fixes the first deployment when using the `--local-config` flag and also fixes v1 deployments using the [`files`](https://zeit.co/docs/v1/features/configuration/#files-(array)) key.

The tests have been adjusted so we don't regress in both cases.

Fixes #3099 
Fixes #3105
Fixes #3107
Fixes #3109

[PRODUCT-350] #close

[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
94fba1d7afef822aa333dbb990dec98ad25f1ec9,Chris,2019-10-02 22:04:16+00:00,Steven,2019-10-03 13:06:54+00:00,"[now-python] Encode body as utf-8 before making a request (#3093)

Fixes #3091"
223d8f4774a76e3a42b9894b4af2331258828cb5,Sophearak Tha,2019-10-02 10:35:01+00:00,Steven,2019-10-03 13:06:49+00:00,"[now-cli] Rename `lambda` to `serverless function` (#3100)

This PR fix: [PRODUCT-66] #close

[PRODUCT-66]: https://zeit.atlassian.net/browse/PRODUCT-66"
42e7a7e4e334ce1c06ee2f3afb8f76590987f29e,Nathan Rajlich,2019-10-02 09:42:01+00:00,Steven,2019-10-03 13:06:44+00:00,"[now-static-build] Use `stdio: 'inherit'` for ""dev"" script child process (#3112)

Since `@now/static-build` is no longer sniffing the stdio streams for the bound port number in `now dev`, there's no need to have separate stdio streams for the ""dev"" script. Instead, inherit stdio from the parent process, which will allow for ANSI colors to be used when stdout is a TTY in `now dev`.

Also simplifies the `checkForPort()` function and removes the `promise-timeout` dependency."
6716fdd49b32e9ca30c1dee15f6b326b0cde46bf,Steven,2019-10-02 01:28:58+00:00,Steven,2019-10-03 13:06:38+00:00,"[now-cli][now-client] Add parameter `nowConfig` for custom now.json (#3110)

When now-client was implemented, it did not work with `--local-config` flag from now-cli because the only parameters it looks at are the files in a directory.

This fixes the regression in now@16.3.0 so that now-client can accept an optional `nowConfig` object or fallback to the `now.json` file.

Fixes #3099 
Fixes #3105
Fixes #3107
Fixes #3109

[PRODUCT-350] #close


[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
3b69092fd8cc44926ff2c20392b3e0a265928b2d,Steven,2019-10-01 20:54:04+00:00,Steven,2019-10-03 13:06:32+00:00,"Revert ""[tests] Add test all script"" since it runs on commit (#3108)

Reverts #3106 from @MAPESO 

The tests seem to be running on each commit which is going to slow down development."
aa8eaedbc8821602d675a86825224c47e4db8b71,Luis Alvarez D,2019-10-01 18:57:41+00:00,Steven,2019-10-03 13:06:25+00:00,"[now-next] Upload build-time generated static artifacts (#3096)

For context, when you have a script that generates a new static file at build time (`sitemap.xml` for example), it has to be inside `.next/static`, and then you'll need a Now route for it, with this change you could generate the file inside `public`/`static` and the builder will now take care of it.

The util `includeOnlyEntryDirectory` is no longer being used after this change, should I remove it?"
f519ed373fca6362cb4dd3a9a87cc998347c871e,Mark,2019-10-01 16:44:02+00:00,Steven,2019-10-03 13:06:20+00:00,"[tests] Add test all script (#3106)

This PR focuses on adding the `test` script to the `package.json` : )

## Main problem 

Previously there was no `test` script that includes all the tests

<img width=""924"" alt=""Screen Shot 2019-10-01 at 8 13 13 AM"" src=""https://user-images.githubusercontent.com/16585386/65968681-26f6a080-e429-11e9-9f29-c6fd343fdb12.png"">"
851dff4b0317c22e005799b65b7b08611e3d4c91,Ana Trajkovska,2019-09-30 23:16:40+00:00,Steven,2019-10-03 13:06:14+00:00,"[now-cli] Integrate Projects API v2 (#3063)

This PR integrates v2 of Projects API that fixes an issue for projects named `list` or `remove`, because of the naming of the endpoints in v1. For listing all projects, previously in v1 it was `GET /v1/projects/list` and now it is `GET /v2/projects/`, and for removing a project it was `DELETE /v1/projects/remove`."
e4d691eda1f7dc79202a23a5c6bc0433c0e411a2,Steven,2019-10-03 12:24:31+00:00,Steven,2019-10-03 12:24:31+00:00,"Publish

 - now@16.1.4-canary.14
 - now-client@5.1.1-canary.7
 - @now/next@1.0.0-canary.9
 - @now/python@0.2.17-canary.5
 - @now/static-build@0.9.9-canary.12"
d9bb6c8a54b298b2cbd8420b366e7a4ae7029dcc,Steven,2019-10-03 02:17:11+00:00,kodiakhq[bot],2019-10-03 02:17:11+00:00,"[now-cli][now-client] Fix `--local-config` flag and `files` key (#3117)

This PR is a followup to #3110 that fixes the first deployment when using the `--local-config` flag and also fixes v1 deployments using the [`files`](https://zeit.co/docs/v1/features/configuration/#files-(array)) key.

The tests have been adjusted so we don't regress in both cases.

Fixes #3099 
Fixes #3105
Fixes #3107
Fixes #3109

[PRODUCT-350] #close

[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
c3020e30710003095f21dfec8e8d42d0a8ccbdc2,Chris,2019-10-02 22:04:16+00:00,Steven,2019-10-02 22:04:16+00:00,"[now-python] Encode body as utf-8 before making a request (#3093)

Fixes #3091"
e3f31e3e52e2b78756ecd25e0d3eeb39663295a1,Sophearak Tha,2019-10-02 10:35:01+00:00,kodiakhq[bot],2019-10-02 10:35:01+00:00,"[now-cli] Rename `lambda` to `serverless function` (#3100)

This PR fix: [PRODUCT-66] #close

[PRODUCT-66]: https://zeit.atlassian.net/browse/PRODUCT-66"
8c40e1be0fda73959f7a9c97adefbcd571854d9a,Nathan Rajlich,2019-10-02 09:42:01+00:00,kodiakhq[bot],2019-10-02 09:42:01+00:00,"[now-static-build] Use `stdio: 'inherit'` for ""dev"" script child process (#3112)

Since `@now/static-build` is no longer sniffing the stdio streams for the bound port number in `now dev`, there's no need to have separate stdio streams for the ""dev"" script. Instead, inherit stdio from the parent process, which will allow for ANSI colors to be used when stdout is a TTY in `now dev`.

Also simplifies the `checkForPort()` function and removes the `promise-timeout` dependency."
b278c7148ba585f806bcdf2f2a4476b75af90f9c,Steven,2019-10-02 01:36:12+00:00,Steven,2019-10-02 01:36:12+00:00,"Publish

 - now@16.1.4-canary.13
 - now-client@5.1.1-canary.6
 - @now/next@1.0.0-canary.8"
2791338e04b1cc1f5dafa355aa223d153e26e971,Steven,2019-10-02 01:28:58+00:00,kodiakhq[bot],2019-10-02 01:28:58+00:00,"[now-cli][now-client] Add parameter `nowConfig` for custom now.json (#3110)

When now-client was implemented, it did not work with `--local-config` flag from now-cli because the only parameters it looks at are the files in a directory.

This fixes the regression in now@16.3.0 so that now-client can accept an optional `nowConfig` object or fallback to the `now.json` file.

Fixes #3099 
Fixes #3105
Fixes #3107
Fixes #3109

[PRODUCT-350] #close


[PRODUCT-350]: https://zeit.atlassian.net/browse/PRODUCT-350"
0af87dc2bef14e1368342482cf416e32055021b3,Steven,2019-10-01 20:54:04+00:00,kodiakhq[bot],2019-10-01 20:54:04+00:00,"Revert ""[tests] Add test all script"" since it runs on commit (#3108)

Reverts #3106 from @MAPESO 

The tests seem to be running on each commit which is going to slow down development."
32134dd1f59abb11c89eb5fe53a9f3720846da1b,Luis Alvarez D,2019-10-01 18:57:41+00:00,kodiakhq[bot],2019-10-01 18:57:41+00:00,"[now-next] Upload build-time generated static artifacts (#3096)

For context, when you have a script that generates a new static file at build time (`sitemap.xml` for example), it has to be inside `.next/static`, and then you'll need a Now route for it, with this change you could generate the file inside `public`/`static` and the builder will now take care of it.

The util `includeOnlyEntryDirectory` is no longer being used after this change, should I remove it?"
bdd4441d5cf716ff66dfbf68e0e4d49bb399bf82,Mark,2019-10-01 16:44:02+00:00,kodiakhq[bot],2019-10-01 16:44:02+00:00,"[tests] Add test all script (#3106)

This PR focuses on adding the `test` script to the `package.json` : )

## Main problem 

Previously there was no `test` script that includes all the tests

<img width=""924"" alt=""Screen Shot 2019-10-01 at 8 13 13 AM"" src=""https://user-images.githubusercontent.com/16585386/65968681-26f6a080-e429-11e9-9f29-c6fd343fdb12.png"">"
99bc1ae7b69fad4bc6f4e1498ef428f2d8b5f563,Ana Trajkovska,2019-09-30 23:16:40+00:00,kodiakhq[bot],2019-09-30 23:16:40+00:00,"[now-cli] Integrate Projects API v2 (#3063)

This PR integrates v2 of Projects API that fixes an issue for projects named `list` or `remove`, because of the naming of the endpoints in v1. For listing all projects, previously in v1 it was `GET /v1/projects/list` and now it is `GET /v2/projects/`, and for removing a project it was `DELETE /v1/projects/remove`."
c5ebaa11eaebbcacdcb286c6b2095966a69c3372,Steven,2019-09-30 13:41:51+00:00,Steven,2019-09-30 13:41:51+00:00,"Publish

 - gatsby-plugin-now@1.2.2
 - @now/build-utils@0.10.1
 - now@16.3.0
 - now-client@5.1.4
 - @now/go@0.6.0
 - @now/next@1.0.2
 - @now/node@1.0.1
 - @now/python@0.3.0
 - @now/ruby@0.1.7
 - @now/static-build@0.10.0"
934fbc899201b62ead57e21af194b1f7e069f4ff,Andy,2019-09-28 15:01:22+00:00,Steven,2019-09-30 13:38:16+00:00,"[now-cli] Fix deployment version output (#3097)

It will print `[v2]` for 1.0 deployments when logging initially:

```
 go $ now --force
> WARN! You are using an old version of the Now Platform. More: https://zeit.co/docs/v2/advanced/platform/changes-in-now-2-0
> Deploying ~/projects/zeit/now-builder-v1/examples/docker/go under andyschneider
> Using project now-v1-go-docker
> now-v1-go-docker-xxxxxxx.now.sh [v2] [1s]
> Build completed
> https://now-v1-go-docker-xxxxxxx.now.sh [v1] [in clipboard] (sfo1) [1m]
> Verifying instantiation in sfo1
>  Scaled 1 instance in sfo1 [22s]
> Success! Deployment ready
```

Expected:

```
 go $ nowl --force
> WARN! You are using an old version of the Now Platform. More: https://zeit.co/docs/v2/advanced/platform/changes-in-now-2-0
> Deploying ~/projects/zeit/now-builder-v1/examples/docker/go under andyschneider
> Using project now-v1-go-docker
> now-v1-go-docker-xxxxxxx.now.sh [v1] [2s]
> Build completed
> https://now-v1-go-docker-xxxxxxx.now.sh [v1] [in clipboard] (sfo1) [1m]
> Verifying instantiation in sfo1
>  Scaled 1 instance in sfo1 [23s]
> Success! Deployment ready
```

For v2 it shouldn't print anything, as it's the default."
72cb5515fd4e7f46c47ce16c3d3dd88749d55461,Max,2019-09-27 19:19:35+00:00,Steven,2019-09-30 13:38:06+00:00,"[now-client] Use `ignore` module to handle file ignoring logic (#3092)

This implements ignore handling using `ignore` module, in the same way CLI stable does it"
c7f0770d536bbf2acb1adb12025a24a256e536a4,Steven,2019-09-27 14:16:48+00:00,Steven,2019-09-30 13:38:00+00:00,"[now-static-build] Make curl silent (#3090)

We added a message in #3068 so this PR makes curl silent unless it errors.

Also fix typo in Gutenberg  

PRODUCT-7 #close"
7ea49e8ada645a913f953316f69c0bd9ffe83902,Max,2019-09-27 12:40:51+00:00,Steven,2019-09-30 13:37:55+00:00,"[now-cli] Add `not_domain_owner` error handling (#3045)

This adds missing error handler for `not_domain_owner` error (fixes #3042)"
cae6ce96b3f34ef9e043e03a028ab2edc9052c0e,Nathan Rajlich,2019-09-27 06:02:35+00:00,Steven,2019-09-30 13:37:49+00:00,"[now-client] Export TypeScript types (#3087)

This makes downstream compilation with `tsc` work correctly.

Otherwise, compilation fails with errors such as:

```
../now-client/dist/src/index.d.ts:1:40 - error TS2304: Cannot find name 'CreateDeploymentFunction'.

1 export declare const createDeployment: CreateDeploymentFunction;
                                         ~~~~~~~~~~~~~~~~~~~~~~~~
````"
3699dfd75675dab58951743c6eefdac3f892d5d4,Sophearak Tha,2019-09-27 02:09:45+00:00,Steven,2019-09-30 13:37:41+00:00,"[now-next] Invoke build script (#3073)

This PR make `@now/next` invoke `build` script if user defined.

PRODUCT-106 #close"
6dca96d87766119d514ee28023872a540ae9577e,Leo Lamprecht,2019-09-26 20:48:04+00:00,Steven,2019-09-30 13:37:36+00:00,"[now-build-utils] Make grouping prerenders optional (#3082)

As of https://github.com/zeit/now/pull/3081, we make it necessary to group `Prerenders` together for being invalidated at the same time.

However, you might not want that. In turn, we'll make it optional."
88c14b27a2e3df71d915fa0993199b52e137e3ec,Leo Lamprecht,2019-09-26 18:20:56+00:00,Steven,2019-09-30 13:37:31+00:00,"[now-build-utils] Allow prerender groups to be defined with an integer (#3081)

This pull request removes the `PrerenderGroup` type in favor of a `group` parameter for the existing `Prerender` type.

This parameter takes in an integer that defines a group of prerenders that should be invalidated at the same time:

```
interface Prerender {
  expiration: number;
  lambda: Lambda;
  fallback: FileBlob | FileFsRef | FileRef;
  group: number;
}
```

**Example:** If two `Prerender` instances exist that have `group` set to `1`, they will both be invalidated at the same time."
0d2a9539f6d4531e982225e0ce923a6c1666aa26,Max,2019-09-26 15:13:03+00:00,Steven,2019-09-30 13:37:25+00:00,"[now-cli] Add logging to `execa` calls in tests (#3077)

This implements #3075 for all integration tests"
bae160bd7c4075398c24c8dc1efb0ab8ae9d81ce,Max,2019-09-26 14:17:54+00:00,Steven,2019-09-30 13:37:19+00:00,"[now-client] Retry on network error (#3072)

This PR improves handling of occasional network errors in `now-client` which should improve benchmarking introduced in #3062"
92852ecff2c3cb4bb6801d3194247309bd59eee6,Max,2019-09-26 05:33:43+00:00,Steven,2019-09-30 13:37:12+00:00,"[now-cli] Move hexo test to testFixtureStdio (#3076)

This should fix the `now dev` tests that periodically hang"
ac0c841cb850d2d43cf9e70c7b0942d64b63423c,Max,2019-09-25 14:38:50+00:00,Steven,2019-09-30 13:37:05+00:00,"[now-client] Add debug logs (#2997)

This PR adds extensive debug logging to `now-client` and enables it in CLI based on the `--debug` flag

Debug logging works in either of the following two conditions:
- `debug: true` is provided in the `options` object of `createDeployment`/`createLegacyDeployment`
- `process.env.NOW_CLIENT_DEBUG` environment variable is set"
53e4b71f89132249117f00bd324e35aeabda746d,Sophearak Tha,2019-09-25 05:34:27+00:00,Steven,2019-09-30 13:36:53+00:00,"[now-cli] Render prompt when deploying home directory (#3057)

Fixes #3069 

PRODUCT-160 #close"
017a2692ca54ac52d9d665efcc92b42697d5aad4,Steven,2019-09-24 22:36:06+00:00,Steven,2019-09-30 13:36:45+00:00,"[now-static-build] Add test for `BUNDLE_WITHOUT` env var (#3070)

This adds a test which confirms that `BUNDLE_WITHOUT=""test:development""` works properly.

This env var is equivalent to `bundle install --without test development`.

There's no code change here because groups are defined by the user, therefore they must define which ones to ignore (if any).

- Groups Guide: https://bundler.io/v2.0/guides/groups.html
- BUNDLER_WITHOUT: https://bundler.io/v2.0/bundle_config.html#LIST-OF-AVAILABLE-KEYS
- Example Gemfile: https://github.com/thoughtbot/administrate/blob/master/Gemfile

PRODUCT-133 #close"
311f89eecb1b365f1e4e90d60c210b5e6f052867,Steven,2019-09-24 21:53:14+00:00,Steven,2019-09-30 13:36:39+00:00,Use PR description for merge commit body (#3071)
40d2bc4743b0469db9ce9d1aa86ab8e0975602a4,Steven,2019-09-24 21:14:00+00:00,Steven,2019-09-30 13:36:33+00:00,"[now-static-build] Print version of static generator during build (#3068)

* [now-static-build] Print version of static generator

* Use curl progress bar"
37160cbc8bd33d453143485704403361f68ba091,Steven,2019-09-24 19:31:44+00:00,Steven,2019-09-30 13:36:28+00:00,[tests] Add benchmark script to randomly generate projects files (#3062)
3807a2b018d5626d37d0aed80cde702a186aa181,Steven,2019-09-24 01:47:46+00:00,Steven,2019-09-30 13:36:21+00:00,[now-node] Fix sharp test using lock file (#3064)
b6697dd43212727db88fe57362596f9d49108a44,Steven,2019-09-23 15:15:28+00:00,Steven,2019-09-30 13:36:16+00:00,"[now-static-build] Add Eleventy to optimized framework list (#3060)

* [now-static-build] Add eleventy to frameworks

* Add test using eleventy-base-blog

* Fix tests with dot files

* Add now.json to 27-eleventy fixture"
6c33496e8a1de74c07c8d3ecb644b414591b8f14,Sophearak Tha,2019-09-23 14:03:30+00:00,Steven,2019-09-30 13:36:08+00:00,"[now-cli] Add `NOW_BUILDER_DEBUG` to build env if `--debug` (#3041)

* Add `NOW_BUILDER_DEBUG` to build env if `--debug`

* Add `--debug` build env check

* Add `build-env-debug` to prepare"
89f32625ed2c6c126599307051570cb9782e0f2b,Sophearak Tha,2019-09-23 13:30:27+00:00,Steven,2019-09-30 13:35:53+00:00,"[now-cli] Fix `02-angular-node` test fail (#3058)

* Improve `02-angular-node` test

* Add `yarn.lock` with pin version"
8253e76ec0f0540f194e3077bffc2325cdfe629d,Steven,2019-09-20 21:55:39+00:00,Steven,2019-09-30 13:35:44+00:00,"[now-python] Fix headers with multiple values (#3053)

* [now-python] Add format_headers()

* Add tests

* Fix filenames

* Fix test probes"
e0b3e9606a71db6aa5104bc7f5e32f10a735b8eb,Andy,2019-09-20 13:26:55+00:00,Steven,2019-09-30 13:35:38+00:00,"[now-cli][now-static-build] Ignore output directory from `now dev` (#3024)

* [now-cli][now-static-build] Ignore output directory from `now dev`

* Add test

* Logging

* Fix test

* Fix test

* Adjust test

* Log failed test

* Log stderr

* Change now.json

* Change Ready check

* Dynamically create now.json

* Log error

* Log stderr on error

* Create now.json first

* Handle JSON error

* Don't use JSON output

* Join path

* Add quotes

* Use .values"
dc75a303f798d9e7704a5413611e0c7a661d14b5,Sophearak Tha,2019-09-20 09:07:36+00:00,Steven,2019-09-30 13:35:33+00:00,[now-build-utils] Remove `NOW_BUILDER_ANNOTATE` (#3027)
c1eb8ec78cadbfd3f0812dc0d40fc52502d53aec,Steven,2019-09-19 19:44:38+00:00,Steven,2019-09-30 13:35:26+00:00,"[now-static-build][now-build-utils] Add python static generators (#3048)

* [now-static-build] Run pip install requirements.txt

* Add test for pelican

* Add test for mkdocs"
12435f25fdcb3ebf568c592bfa5348adcd8a6a97,Sophearak Tha,2019-09-19 17:21:43+00:00,Steven,2019-09-30 13:35:21+00:00,"[builders] Consistently capitalize first letter of logs (#3039)

* Consistency capitalize logs line `@now/next`

* Consistency capitalize logs line `@now/node`

* Consistency capitalize logs line `@now/go`

* Consistency capitalize logs line `@now/python`

* Always show `Installing dependencies...`

* Consistency capitalize logs line `run-user-scripts`

* Capitalize `Running`"
d4dc5222cfbbf9dda5f11a4eeb9c1e7cde9367a9,Steven,2019-09-19 15:11:37+00:00,Steven,2019-09-30 13:35:14+00:00,[now-static-build] Add prepareCache() function (#3047)
bf1e59b2d305221844d1bff23ffe309ba4821e84,Steven,2019-09-19 13:27:01+00:00,Steven,2019-09-30 13:35:06+00:00,[now-static-build] Add support for hugo extended (#3043)
3657e4a36ea455f6c93fea539e84d65ca62a6d43,Nathan Rajlich,2019-09-18 10:11:12+00:00,Steven,2019-09-30 13:34:43+00:00,"[now-cli] Update `@zeit/fun` to v0.10.2 (#3038)

Fixes #2901."
09efc1d865bc19f149fbdb8f004ace076fef5a73,Nathan Rajlich,2019-09-17 23:14:34+00:00,Steven,2019-09-30 13:34:19+00:00,"[now-cli] Render logs containing ""warning"" as yellow (#3035)"
32aa94bf3d186bbe88546643b5bb5688b97f8d0e,Leo Lamprecht,2019-09-30 09:13:18+00:00,Leo Lamprecht,2019-09-30 09:13:18+00:00,"Publish

 - now@16.1.4-canary.12"
32012274308c9cb2740e9521a89933b5d109d093,Andy,2019-09-28 15:01:22+00:00,kodiakhq[bot],2019-09-28 15:01:22+00:00,"[now-cli] Fix deployment version output (#3097)

It will print `[v2]` for 1.0 deployments when logging initially:

```
 go $ now --force
> WARN! You are using an old version of the Now Platform. More: https://zeit.co/docs/v2/advanced/platform/changes-in-now-2-0
> Deploying ~/projects/zeit/now-builder-v1/examples/docker/go under andyschneider
> Using project now-v1-go-docker
> now-v1-go-docker-xxxxxxx.now.sh [v2] [1s]
> Build completed
> https://now-v1-go-docker-xxxxxxx.now.sh [v1] [in clipboard] (sfo1) [1m]
> Verifying instantiation in sfo1
>  Scaled 1 instance in sfo1 [22s]
> Success! Deployment ready
```

Expected:

```
 go $ nowl --force
> WARN! You are using an old version of the Now Platform. More: https://zeit.co/docs/v2/advanced/platform/changes-in-now-2-0
> Deploying ~/projects/zeit/now-builder-v1/examples/docker/go under andyschneider
> Using project now-v1-go-docker
> now-v1-go-docker-xxxxxxx.now.sh [v1] [2s]
> Build completed
> https://now-v1-go-docker-xxxxxxx.now.sh [v1] [in clipboard] (sfo1) [1m]
> Verifying instantiation in sfo1
>  Scaled 1 instance in sfo1 [23s]
> Success! Deployment ready
```

For v2 it shouldn't print anything, as it's the default."
09a421c23bbe69b7b913c8a32349dab2ae9d0db8,Max Rovensky,2019-09-27 19:21:27+00:00,Max Rovensky,2019-09-27 19:21:27+00:00,"Publish

 - @now/build-utils@1.0.0-canary.9
 - now@16.1.4-canary.11
 - now-client@5.1.1-canary.5
 - @now/next@1.0.0-canary.7
 - @now/static-build@0.9.9-canary.11"
73ce59b4928845538970317c73db215601afcc25,Max,2019-09-27 19:19:35+00:00,kodiakhq[bot],2019-09-27 19:19:35+00:00,"[now-client] Use `ignore` module to handle file ignoring logic (#3092)

This implements ignore handling using `ignore` module, in the same way CLI stable does it"
7911d5857da2df5c876b21a7f75031976929b350,Steven,2019-09-27 14:16:48+00:00,kodiakhq[bot],2019-09-27 14:16:48+00:00,"[now-static-build] Make curl silent (#3090)

We added a message in #3068 so this PR makes curl silent unless it errors.

Also fix typo in Gutenberg  

PRODUCT-7 #close"
05a44a0c70840bb3100655461e76dfa87577f422,Max,2019-09-27 12:40:51+00:00,kodiakhq[bot],2019-09-27 12:40:51+00:00,"[now-cli] Add `not_domain_owner` error handling (#3045)

This adds missing error handler for `not_domain_owner` error (fixes #3042)"
efd8863f8bf4c143e9c024995c70eca70cde68a3,Nathan Rajlich,2019-09-27 06:02:35+00:00,Max,2019-09-27 06:02:35+00:00,"[now-client] Export TypeScript types (#3087)

This makes downstream compilation with `tsc` work correctly.

Otherwise, compilation fails with errors such as:

```
../now-client/dist/src/index.d.ts:1:40 - error TS2304: Cannot find name 'CreateDeploymentFunction'.

1 export declare const createDeployment: CreateDeploymentFunction;
                                         ~~~~~~~~~~~~~~~~~~~~~~~~
````"
6699028342846c58b52e886247170b347e8bcc11,Sophearak Tha,2019-09-27 02:09:45+00:00,kodiakhq[bot],2019-09-27 02:09:45+00:00,"[now-next] Invoke build script (#3073)

This PR make `@now/next` invoke `build` script if user defined.

PRODUCT-106 #close"
aa9a234a0b1c998b36de8f2a120c3c631c4db6cc,Leo Lamprecht,2019-09-26 20:48:04+00:00,kodiakhq[bot],2019-09-26 20:48:04+00:00,"[now-build-utils] Make grouping prerenders optional (#3082)

As of https://github.com/zeit/now/pull/3081, we make it necessary to group `Prerenders` together for being invalidated at the same time.

However, you might not want that. In turn, we'll make it optional."
91f836818c2accd38cc1f9fa8c9a3efe094c577b,Leo Lamprecht,2019-09-26 18:20:56+00:00,kodiakhq[bot],2019-09-26 18:20:56+00:00,"[now-build-utils] Allow prerender groups to be defined with an integer (#3081)

This pull request removes the `PrerenderGroup` type in favor of a `group` parameter for the existing `Prerender` type.

This parameter takes in an integer that defines a group of prerenders that should be invalidated at the same time:

```
interface Prerender {
  expiration: number;
  lambda: Lambda;
  fallback: FileBlob | FileFsRef | FileRef;
  group: number;
}
```

**Example:** If two `Prerender` instances exist that have `group` set to `1`, they will both be invalidated at the same time."
5e37bdc54cfe2ce017d4bd1e74ec46dab00e5167,Max,2019-09-26 15:13:03+00:00,kodiakhq[bot],2019-09-26 15:13:03+00:00,"[now-cli] Add logging to `execa` calls in tests (#3077)

This implements #3075 for all integration tests"
31c48df795749ac5f632da517e905b7a047606ee,Max,2019-09-26 14:17:54+00:00,kodiakhq[bot],2019-09-26 14:17:54+00:00,"[now-client] Retry on network error (#3072)

This PR improves handling of occasional network errors in `now-client` which should improve benchmarking introduced in #3062"
0383b9112be7c7120718f926fdb5331f2d1cd566,Max,2019-09-26 05:33:43+00:00,kodiakhq[bot],2019-09-26 05:33:43+00:00,"[now-cli] Move hexo test to testFixtureStdio (#3076)

This should fix the `now dev` tests that periodically hang"
f4fe8be4dfe56a144be309b46730e3eb16fa64f9,Max,2019-09-25 14:38:50+00:00,kodiakhq[bot],2019-09-25 14:38:50+00:00,"[now-client] Add debug logs (#2997)

This PR adds extensive debug logging to `now-client` and enables it in CLI based on the `--debug` flag

Debug logging works in either of the following two conditions:
- `debug: true` is provided in the `options` object of `createDeployment`/`createLegacyDeployment`
- `process.env.NOW_CLIENT_DEBUG` environment variable is set"
cc643e373d4edcc5ffeb593539bc1bcc9343726f,Sophearak Tha,2019-09-25 05:34:27+00:00,kodiakhq[bot],2019-09-25 05:34:27+00:00,"[now-cli] Render prompt when deploying home directory (#3057)

Fixes #3069 

PRODUCT-160 #close"
651429cb524b82d080c8aa9ddadb083b512d649e,Steven,2019-09-24 22:36:06+00:00,kodiakhq[bot],2019-09-24 22:36:06+00:00,"[now-static-build] Add test for `BUNDLE_WITHOUT` env var (#3070)

This adds a test which confirms that `BUNDLE_WITHOUT=""test:development""` works properly.

This env var is equivalent to `bundle install --without test development`.

There's no code change here because groups are defined by the user, therefore they must define which ones to ignore (if any).

- Groups Guide: https://bundler.io/v2.0/guides/groups.html
- BUNDLER_WITHOUT: https://bundler.io/v2.0/bundle_config.html#LIST-OF-AVAILABLE-KEYS
- Example Gemfile: https://github.com/thoughtbot/administrate/blob/master/Gemfile

PRODUCT-133 #close"
a374a5ce964372b1795412dc46d59105776dd2fc,Steven,2019-09-24 21:53:14+00:00,GitHub,2019-09-24 21:53:14+00:00,Use PR description for merge commit body (#3071)
bbb4501e9b192d9d6083c46c7df906626ff6b687,Steven,2019-09-24 21:15:45+00:00,Steven,2019-09-24 21:15:45+00:00,"Publish

 - now@16.1.4-canary.10
 - @now/node@1.0.0-canary.8
 - @now/static-build@0.9.9-canary.10"
947f9093be018da5593e09584ec468c62e4c1da7,Steven,2019-09-24 21:14:00+00:00,kodiakhq[bot],2019-09-24 21:14:00+00:00,"[now-static-build] Print version of static generator during build (#3068)

* [now-static-build] Print version of static generator

* Use curl progress bar"
42f16b6d1edba6abb5520ffdff53812391dc7ad5,Steven,2019-09-24 19:31:44+00:00,kodiakhq[bot],2019-09-24 19:31:44+00:00,[tests] Add benchmark script to randomly generate projects files (#3062)
9ae747a612e2d28f3ed6ceddcc1c350884c22548,Steven,2019-09-24 01:47:46+00:00,kodiakhq[bot],2019-09-24 01:47:46+00:00,[now-node] Fix sharp test using lock file (#3064)
9217c5e436f15d1ac98c615fe7deb25a3962d855,Steven,2019-09-23 15:15:28+00:00,kodiakhq[bot],2019-09-23 15:15:28+00:00,"[now-static-build] Add Eleventy to optimized framework list (#3060)

* [now-static-build] Add eleventy to frameworks

* Add test using eleventy-base-blog

* Fix tests with dot files

* Add now.json to 27-eleventy fixture"
d23e7b1054f1e6278100dfe5459556790c95b21b,Sophearak Tha,2019-09-23 14:03:30+00:00,kodiakhq[bot],2019-09-23 14:03:30+00:00,"[now-cli] Add `NOW_BUILDER_DEBUG` to build env if `--debug` (#3041)

* Add `NOW_BUILDER_DEBUG` to build env if `--debug`

* Add `--debug` build env check

* Add `build-env-debug` to prepare"
d23eab61cfd02a61400b3814e14348d56881f37d,Sophearak Tha,2019-09-23 13:30:27+00:00,GitHub,2019-09-23 13:30:27+00:00,"[now-cli] Fix `02-angular-node` test fail (#3058)

* Improve `02-angular-node` test

* Add `yarn.lock` with pin version"
e631de4cfefc587f9246ea5947cbdcd8d75e2839,Steven,2019-09-21 21:20:40+00:00,Steven,2019-09-21 21:20:40+00:00,"Publish

 - @now/build-utils@1.0.0-canary.8
 - now@16.1.4-canary.9
 - @now/python@0.2.17-canary.4
 - @now/static-build@0.9.9-canary.9"
0814bef36f83b64343a065b3f946d3397550b289,Steven,2019-09-20 21:55:39+00:00,kodiakhq[bot],2019-09-20 21:55:39+00:00,"[now-python] Fix headers with multiple values (#3053)

* [now-python] Add format_headers()

* Add tests

* Fix filenames

* Fix test probes"
ddce65416c0afc3330327f43113b6cfa07526bec,Andy,2019-09-20 13:26:55+00:00,kodiakhq[bot],2019-09-20 13:26:55+00:00,"[now-cli][now-static-build] Ignore output directory from `now dev` (#3024)

* [now-cli][now-static-build] Ignore output directory from `now dev`

* Add test

* Logging

* Fix test

* Fix test

* Adjust test

* Log failed test

* Log stderr

* Change now.json

* Change Ready check

* Dynamically create now.json

* Log error

* Log stderr on error

* Create now.json first

* Handle JSON error

* Don't use JSON output

* Join path

* Add quotes

* Use .values"
9e66f9bb08e613323c68d080e3a8f06faacf8aaa,Sophearak Tha,2019-09-20 09:07:36+00:00,kodiakhq[bot],2019-09-20 09:07:36+00:00,[now-build-utils] Remove `NOW_BUILDER_ANNOTATE` (#3027)
961fbfde5518096205f9c306486153210469cf5d,Steven,2019-09-19 19:58:01+00:00,Steven,2019-09-19 19:58:01+00:00,"Publish

 - @now/build-utils@1.0.0-canary.7
 - @now/go@0.5.11-canary.5
 - @now/next@1.0.0-canary.6
 - @now/node@1.0.0-canary.7
 - @now/python@0.2.17-canary.3
 - @now/static-build@0.9.9-canary.8"
22550c0c48c8b774b27bdea9b8cd9fddb409b7d7,Steven,2019-09-19 19:44:38+00:00,kodiakhq[bot],2019-09-19 19:44:38+00:00,"[now-static-build][now-build-utils] Add python static generators (#3048)

* [now-static-build] Run pip install requirements.txt

* Add test for pelican

* Add test for mkdocs"
4336f48d22998da0e4e1bd51642bf47e0c028c7f,Sophearak Tha,2019-09-19 17:21:43+00:00,kodiakhq[bot],2019-09-19 17:21:43+00:00,"[builders] Consistently capitalize first letter of logs (#3039)

* Consistency capitalize logs line `@now/next`

* Consistency capitalize logs line `@now/node`

* Consistency capitalize logs line `@now/go`

* Consistency capitalize logs line `@now/python`

* Always show `Installing dependencies...`

* Consistency capitalize logs line `run-user-scripts`

* Capitalize `Running`"
cf299562e34b660a832f0d77d6bcc3ff515916a1,Steven,2019-09-19 15:17:33+00:00,Steven,2019-09-19 15:17:33+00:00,"Publish

 - @now/static-build@0.9.9-canary.7"
2cd5b35603dcb65c901e652a6c5d6f1fc3766d67,Steven,2019-09-19 15:11:37+00:00,kodiakhq[bot],2019-09-19 15:11:37+00:00,[now-static-build] Add prepareCache() function (#3047)
81abab81f7498e84974da3aea995ea1a43fe4ccf,Steven,2019-09-19 13:27:01+00:00,kodiakhq[bot],2019-09-19 13:27:01+00:00,[now-static-build] Add support for hugo extended (#3043)
ad0d7bd560b06c7f9554fe171f00b58bd10ad4cb,Max Rovensky,2019-09-19 11:36:51+00:00,Max Rovensky,2019-09-19 11:36:51+00:00,"Publish

 - @now/build-utils@1.0.0-canary.6
 - now@16.1.4-canary.8
 - @now/node@1.0.0-canary.6
 - @now/static-build@0.9.9-canary.6"
140d10e87bf8a6fae4fc329e357ce56869c96d89,Nathan Rajlich,2019-09-18 10:11:12+00:00,kodiakhq[bot],2019-09-18 10:11:12+00:00,"[now-cli] Update `@zeit/fun` to v0.10.2 (#3038)

Fixes #2901."
6bebc496072d0e2a7c291f349732c9bfda1b89da,Nathan Rajlich,2019-09-17 23:14:34+00:00,kodiakhq[bot],2019-09-17 23:14:34+00:00,"[now-cli] Render logs containing ""warning"" as yellow (#3035)"
22bded50b664d0b41a10ce3e094e15e0393f12a9,Steven,2019-09-17 22:39:06+00:00,Steven,2019-09-17 22:39:06+00:00,[master only] Fix merge conflict
b5b02be3c2aa5a48b5cde528780f77b22a52ae3e,Steven,2019-09-17 22:33:02+00:00,Steven,2019-09-17 22:36:49+00:00,[docs] Update CI badge to use master (#3037)
776f372eb34bf7aadbff400255dda68740c87011,Steven,2019-09-17 21:56:46+00:00,Steven,2019-09-17 22:35:42+00:00,"[tests] Add env var FORCE_BUILD_IN_REGION (#3036)

* [tests] Add env var FORCE_BUILD_IN_REGION

* Add missing config"
81279fd40b7f774c98a5e7a231a99bdc3403f508,Steven,2019-09-17 19:14:39+00:00,Steven,2019-09-17 22:35:34+00:00,"[now-static-build] Add hugo, zola, and gutenberg versioning (#3025)

* [now-static-build] Add hugo, zola, and gutenberg versioning

* Add tests

* Export spawnAsync

* Change spawnAsync to remove cwd"
3342485d29601b193f4b38ec5929e1c628877d52,Leo Lamprecht,2019-09-17 18:28:04+00:00,Steven,2019-09-17 22:35:27+00:00,"[now-build-utils] Add types for SPRv2 (#3021)

* Add `Prerender` type for SPRv2

* Make it a default export

* Added `PrerenderGroup` type

* Renamed interface"
028ee848f528b8a656a9e196ad0e4fa744a9a8c0,Andy,2019-09-17 13:21:18+00:00,Steven,2019-09-17 22:35:19+00:00,[now-cli] Fix fetch body and add secrets tests (#3030)
7e64c3b8a9d3becac3e83d5c2d3082bc0997318e,Nathan Rajlich,2019-09-17 06:58:43+00:00,Steven,2019-09-17 22:35:09+00:00,"[now-cli] Assign `process.exitCode` (#3028)

No real functional change here, but assigning to `process.exitCode`
is the more proper Node.js way to set the exit code for the process."
704031f7b27e7141fcc92ab032e9076eda19510b,Nathan Rajlich,2019-09-17 06:24:34+00:00,Steven,2019-09-17 22:35:02+00:00,"[now-cli] Render ""stderr"" as red in `now logs` (#3026)"
5e3c18473570d226ae1a24a2a95570b7bf3dde22,Andy,2019-09-14 01:15:39+00:00,Steven,2019-09-17 22:34:54+00:00,[now-cli] Adjust the printed version for the deployment (#3014)
88a8022787bc1edb828c0d41c7f59c24d55ca347,Steven,2019-09-13 23:35:40+00:00,Steven,2019-09-17 22:34:49+00:00,"[docs] Add scripts for changelog and diff (#3017)

* [release] Add scripts for changelog and diff

* Remove publish docs since it in the wiki

* Add support for windows"
96844dc4a5ad203295da5f00a0c1db74f481e9e9,Steven,2019-09-13 22:40:26+00:00,Steven,2019-09-17 22:34:44+00:00,[now-node] Change trace errors to warnings (#3016)
a09acd69694f98e4896002f67f844167629a1f65,Max,2019-09-13 18:23:34+00:00,Steven,2019-09-17 22:34:38+00:00,"[now-cli][now-client] Remove fetch-h2 (#3011)

* Remove fetch-h2

* Fix package.json

* Fix migration issue

* Improve time() call and ensure consistent header names

* Remove unused agent.ts"
4e232f78de00f00279c6132ebe6d4b8ce93d4fb8,Andy,2019-09-13 01:59:49+00:00,Steven,2019-09-17 22:34:29+00:00,"[now-cli] Add test for zero-config and canary builders (#3009)

* [now-cli] Add test for zero-config and canary builders

* Fix test

* Fix test

* Fix url

* Fix path and export

* Make public"
b146a0477294ba452769e2e2445ad046324bf100,Steven,2019-09-12 23:26:11+00:00,Steven,2019-09-17 22:34:20+00:00,"[now-node] Add support for AWS Gateway Event (#3010)

* [now-node] Add support for AWS Gateway Event

* Fix funcName

* Fix makeAwsLauncher export

* Add missing return"
eaaa50e616e09efe14202ed8cd16ca1b468cf6cf,Steven,2019-09-12 18:26:21+00:00,Steven,2019-09-17 22:34:14+00:00,Add release notes script to PUBLISHING.md (#3006)
c893eaeb7a712a05494cb643045510c1743db43a,Andy,2019-09-12 17:48:32+00:00,Steven,2019-09-17 22:34:08+00:00,[now-cli] Default to empty string for undefined env var when checking (#3008)
5bf7d7fd071ed45581f145034e9e76a567df3909,Andy,2019-09-12 16:15:33+00:00,Steven,2019-09-17 22:34:00+00:00,[now-cli] Add changelog link to update message (#3001)
ca8fc92b94f788b219ecbd165a0b03e3d53ecd73,Max,2019-09-12 14:40:46+00:00,Steven,2019-09-17 22:33:53+00:00,"[now-cli] Fix links output during deployment (#2966)

* Fix links output during deployment

* Move ""synced"" log to `total-fileds` event

* Pluralize synced messages

* Update packages/now-cli/src/util/deploy/process-deployment.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Fix failing tests due to stdout mismatch"
9956e85f129bf12c1b7d462f56683bf88c9af4af,Steven,2019-09-12 13:34:54+00:00,Steven,2019-09-17 22:33:47+00:00,"[now-ruby] Use pre-installed ruby 2.5 (#2991)

* [now-ruby] Use pre-installed ruby 2.5

* Change GEM_HOME

* Add polyfill for Node 8"
7fa4739c787ede09cdacd9c399239d927e76fffc,Nathan Rajlich,2019-09-12 00:12:30+00:00,Steven,2019-09-17 22:33:40+00:00,"[now-cli] Show a warning for invalid env vars in `now dev` (#3002)

* [now-cli] Show a warning for invalid env vars in `now dev`

Closes #2982.

* Add ""validate env var names"" integration test"
0ef2e2a7ec9b2d3ca8227871892216a9943731bf,Andy,2019-09-11 23:32:20+00:00,Steven,2019-09-17 22:33:34+00:00,[now-cli] Add tests for alias rules (#3003)
8fd1752acf031648497c557cf2022019f5a47331,Sophearak Tha,2019-09-11 16:23:54+00:00,Steven,2019-09-17 22:33:29+00:00,[now-go] Improve test for custom build flags (#2999)
14a1446fafb094a9093db60b51e2aba31028a2c8,Nathan Rajlich,2019-09-11 15:47:56+00:00,Steven,2019-09-17 22:33:16+00:00,"[now-cli] Render correct command for `now ls $path_alias_url` (#2988)

Previously, if you ran `now ls` with a URL for a path alias, then an
error message `Cannot read property 'replace' of undefined` would occur.

Now, a message is logged saying to instead run `now alias ls $url` which
is the correct command to get path rules relevant to a path alias URL.

> Found matching path alias: rules.domain.com
> Please run `now alias ls rules.domain.com` instead

Fixes #2987."
0c2c8c5ae5cf74045c7d5a55b494b8095ebe6ab7,Steven,2019-09-11 14:28:24+00:00,Steven,2019-09-17 22:33:07+00:00,"[now-static-build] Run `bundle install` when `Gemfile` is found (#2980)

* [now-static-build] Run `bundle install` for Gemfile

* Add logs

* Add timeout in case proc hangs

* Rename test

* Remove console.log()

* Hide warnings

* Use runBundleInstall()

* [now-build-utils] Remove --deployment flag

* Run tests for build-utils"
a3aa8552908b06c35527b3750dac3864b562bc02,Steven,2019-09-17 22:33:02+00:00,kodiakhq[bot],2019-09-17 22:33:02+00:00,[docs] Update CI badge to use master (#3037)
511b27ad39fcd3fb496b3d2fd973fa539ff0511d,Steven,2019-09-10 16:12:25+00:00,Steven,2019-09-17 22:33:00+00:00,[now-node][now-next] Bump node-file-trace to 0.3.1 (#2990)
e22ce7da0a3a865ded0139ecaf789bdabe04754e,Sophearak Tha,2019-09-10 14:22:08+00:00,Steven,2019-09-17 22:32:54+00:00,[now-cli] Hide `Init Duration` and `XRAY TraceId` by default (#2984)
d9a4ce06bcf8046f07be0947d6fc23f8e4d32928,Steven,2019-09-09 21:51:46+00:00,Steven,2019-09-17 22:32:46+00:00,"[now-build-utils] Add function `runBundleInstall()` (#2986)

* [now-build-utils] Add function `runBundleInstall`

* Add additional flags

* Set jobs to number of cpus

* Format

* Fix formatting

* Add BUNDLE_APP_CONFIG"
77fb14cc603fbf86f6012fd741b29d685fae13be,Steven,2019-09-09 16:39:40+00:00,Steven,2019-09-17 22:32:39+00:00,"[now-node] Bump node-file-trace to 0.3.0 and print warnings (#2985)

* Bump node-file-trace to 0.3.0

* [now-node] Print warnings from node-file-trace"
17c397211e913802990bf3b8bfc4f734eec1b9c0,Clment ALLAIN,2019-09-06 23:38:49+00:00,Steven,2019-09-17 22:32:20+00:00,"[now-static-build] Fix dev server port detection (#2879)

* [now-static-build] Fix dev server detection

* Code review

* Remove unused dependency

* Fix the checking by really waiting until the port is reachable"
6ca83644bc75250c5ff61282769b50c83f99b9e9,Andy,2019-09-06 22:02:33+00:00,Steven,2019-09-17 22:31:56+00:00,"[now-build-utils][now-cli] Warn instead of throwing on `api` and `pages/api` (#2976)

* [now-build-utils][now-cli] Warn instead of throwing on `api` and `pages/api`

* Remove slash and adjust tests

* Remove @now/build-utils

* Hardcode builders

* Add build-utils

* Change default flag

* More logging

* Add static-build

* Remove other packages from package.json

* New file for bundled function"
d1946ea9b664e6b359b6e7c72131598215ea85da,Andy,2019-09-06 10:45:57+00:00,Steven,2019-09-17 22:31:44+00:00,[now-cli] Display warning when changing the secret name (#2975)
cc9eae3b71c03fac1a388c32b68de47583013e12,Nathan Rajlich,2019-09-06 00:35:49+00:00,Steven,2019-09-17 22:31:37+00:00,"[now-cli] Use `PackageJson` and `Builder` types from `@now/build-utils` (#2971)

No functionality change here, this just removes the `Package` and
`BuildConfig` types from `src/util/dev/types.ts` in favor of the
matching types from `@now/build-utils`.

Also a lot of prettier formatting"
7bbc17df4bb9b3b71a274a3b9df0fb3dc94104e6,Nathan Rajlich,2019-09-05 22:19:17+00:00,Steven,2019-09-17 22:31:31+00:00,"[now-build-utils] Add `env` and `buildEnv` to `Meta` type (#2970)

* [now-build-utils] Add `env` and `buildEnv` to `Meta` type

`now dev` passes in these variables to the ""meta"" object.

* Fix build"
df6b2be482993f46d5b9b20308498cedb8a27462,Andy,2019-09-05 19:21:59+00:00,Steven,2019-09-17 22:30:40+00:00,[now-build-utils] Throw error on Next.js pages/api and api/ (#2964)
5ff6263fb787f4937a7667c9fa6228cba6eb47dc,Sophearak Tha,2019-09-05 18:57:15+00:00,Steven,2019-09-17 22:30:33+00:00,[now-cli] Add platform in Sentry report (#2960)
04dc8aaf73859423ee6ff74e664fbe98c1bb965d,Luc,2019-09-05 18:04:32+00:00,Steven,2019-09-17 22:30:25+00:00,"[gatsby-plugin-now] Add `keywords` in package.json (#2965)

* add keywords to gatsby-plugin-now

* add #readme in homepage url"
5435805e58f935109844dce2961ba8cd93c967bb,Sophearak Tha,2019-09-05 13:19:32+00:00,Steven,2019-09-17 22:30:16+00:00,"[now-build-utils] Use debug() on `installing to` and `missing engines` (#2954)

* Use debug() on `installing to` output

* Use debug() on `getSupportedNodeVersion` output"
903f819c5d3c460684947236e5d0d897a2c24181,Nathan Rajlich,2019-09-05 00:09:17+00:00,Steven,2019-09-17 22:29:41+00:00,"[now-cli] Fix `now alias` with no arguments (#2959)

Fixes #2941."
5d927b2d2595b5a772e39a674da614c7af678220,Nathan Rajlich,2019-09-04 20:33:19+00:00,Steven,2019-09-17 22:29:11+00:00,"[CircleCI] Remove `publish-stable` and `publish-canary` steps (#2957)

Publishing to npm is now handled by GitHub Actions.

Aside from that, the Circle publishing was broken.
See: https://circleci.com/gh/zeit/now/7213"
b7a260cc6dbd7a13c154da7694ac4a47df4cb3ef,Steven,2019-09-04 18:35:33+00:00,Steven,2019-09-17 22:29:03+00:00,[now-python] Use system python with `now dev` (#2956)
e8ba8fb97bd008d60a61dfb3caf4d55cb7026537,Steven,2019-09-04 18:10:33+00:00,Steven,2019-09-17 22:28:49+00:00,[now-cli] Bump `@zeit/fun` to 0.10.0 (#2955)
dd1d9d856bd4263c79916e7921a7177333b06467,Max,2019-09-04 16:50:09+00:00,Steven,2019-09-17 22:27:13+00:00,"[now-cli] Implement `now-client` deployments in Now CLI (#2875)

* Imlement `now-client` deployments in Now CLI

* Move now-client to dev dependencies

* Fix missing config for legacy deployments

* Restore no files warning

* Improve error handling

* Port over `--prod`

* Handle single files and warnings better

* Fix legacy deployment env config

* Handle build errors in events

* Don't use ncc for now-client

* Extract `for...await` logic into a `.ts` file

* Revert ""Don't use ncc for now-client""

This reverts commit e481a04058952f7011bf5523445256f1b8882dda.

* Add `typings` field to `now-client`

* Regenerate yarn.lock

* Add bootstrap step to CircleCI

* Add bootstrap step before build

* Revert ""Add bootstrap step before build""

This reverts commit db9e1113937f113cca8c7c05d5c800fd5d61e84b.

* Revert ""Add bootstrap step to CircleCI""

This reverts commit 02c0006a073614814fd174ccbaf1e4e0d8dd3dbf.

* Build `now-client` before CLI

* Sort build scripts

* Tweak empty deployment detection

* Add bootstrap step before build

* Remove now-client dependency from now-client

* Use local dependencies

* Fix paths and regenerate lockfile

* Bypass broken linting rule

* Remove lint ignore

* Use `tsc` instead of `ncc` for `now-client`

Co-Authored-By: Steven <steven@ceriously.com>

* Fix output path for tsc build

* [test] Supress TS warning

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-client/package.json

Co-Authored-By: Steven <steven@ceriously.com>

* Change `now-client` output to `dist`

* Implement file events in now-client and bring back progressbar

* Update build script sorting

* Add new logic tests for `now-client`

* Remove redundant target check

* Remove now-client dependency and use local code

* Set exact dependency versions

* Revert ""Set exact dependency versions""

This reverts commit e0a31eaf10e498271c9253439d4bbd650738c694.

* Revert local now-client import

* Revert `now-client` dependency to local path

* Implement feedback

* Fix formatting

* Only handle alias errors if `readyState` is `READY`

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
a853cb84cda8cdbe4eabad515cc154ff56afd718,Steven,2019-09-17 21:56:46+00:00,kodiakhq[bot],2019-09-17 21:56:46+00:00,"[tests] Add env var FORCE_BUILD_IN_REGION (#3036)

* [tests] Add env var FORCE_BUILD_IN_REGION

* Add missing config"
eef4c65e5f4502ca4da8f092378a564ac0356ed8,Steven,2019-09-17 21:44:26+00:00,Steven,2019-09-17 21:44:26+00:00,"Publish

 - @now/next@1.0.1"
3f64594a220721df0c23b829dfed65bf5611d8e5,Joe Haddad,2019-09-09 14:42:26+00:00,Steven,2019-09-17 21:22:22+00:00,"[now-next] Add monorepo autosetup support (#2961)

* [now-next] Add monorepo autosetup support

* Add actual tests

* Remove invalid test

* Correct contents directory

* Update tests

* Support new Next.js canaries"
a07082ca5c444f6a2b0453a2b1f0dadd658b8396,Steven,2019-09-17 19:14:39+00:00,kodiakhq[bot],2019-09-17 19:14:39+00:00,"[now-static-build] Add hugo, zola, and gutenberg versioning (#3025)

* [now-static-build] Add hugo, zola, and gutenberg versioning

* Add tests

* Export spawnAsync

* Change spawnAsync to remove cwd"
81c27771bc96bde475012f5cce64b035d8c25b23,Leo Lamprecht,2019-09-17 18:28:04+00:00,kodiakhq[bot],2019-09-17 18:28:04+00:00,"[now-build-utils] Add types for SPRv2 (#3021)

* Add `Prerender` type for SPRv2

* Make it a default export

* Added `PrerenderGroup` type

* Renamed interface"
502f78e835e5f2241c2d702ee9ceda201bb888da,Andy,2019-09-17 13:21:18+00:00,kodiakhq[bot],2019-09-17 13:21:18+00:00,[now-cli] Fix fetch body and add secrets tests (#3030)
d8935cf121afe44e4e8c895ab327c9b74403e4e8,Nathan Rajlich,2019-09-17 06:58:43+00:00,kodiakhq[bot],2019-09-17 06:58:43+00:00,"[now-cli] Assign `process.exitCode` (#3028)

No real functional change here, but assigning to `process.exitCode`
is the more proper Node.js way to set the exit code for the process."
e3c61ac5b7ed67fac31d18e6aea3671081639006,Nathan Rajlich,2019-09-17 06:24:34+00:00,kodiakhq[bot],2019-09-17 06:24:34+00:00,"[now-cli] Render ""stderr"" as red in `now logs` (#3026)"
e8e95b8df67c9fe56e2951a426971da4e8661b3a,Andy,2019-09-14 01:15:39+00:00,kodiakhq[bot],2019-09-14 01:15:39+00:00,[now-cli] Adjust the printed version for the deployment (#3014)
f55be4f2de1ad2a6cfed7c73133e85c5d747fe7d,Steven,2019-09-13 23:35:40+00:00,kodiakhq[bot],2019-09-13 23:35:40+00:00,"[docs] Add scripts for changelog and diff (#3017)

* [release] Add scripts for changelog and diff

* Remove publish docs since it in the wiki

* Add support for windows"
ef081cc4b8c52dc2c7d71289943e6f919bcc9501,Steven,2019-09-13 22:40:26+00:00,kodiakhq[bot],2019-09-13 22:40:26+00:00,[now-node] Change trace errors to warnings (#3016)
8e2444d3cd5b533783388002ab1eb9052cb108fd,Max Rovensky,2019-09-13 18:32:19+00:00,Max Rovensky,2019-09-13 18:32:19+00:00,"Publish

 - now@16.1.4-canary.7
 - now-client@5.1.1-canary.4"
f26407e282ee7f9d84fcc15f4b83201357fd7338,Max,2019-09-13 18:23:34+00:00,kodiakhq[bot],2019-09-13 18:23:34+00:00,"[now-cli][now-client] Remove fetch-h2 (#3011)

* Remove fetch-h2

* Fix package.json

* Fix migration issue

* Improve time() call and ensure consistent header names

* Remove unused agent.ts"
cded895bf7c9a4320c473ca830ec9f210078f83d,Andy,2019-09-13 01:59:49+00:00,kodiakhq[bot],2019-09-13 01:59:49+00:00,"[now-cli] Add test for zero-config and canary builders (#3009)

* [now-cli] Add test for zero-config and canary builders

* Fix test

* Fix test

* Fix url

* Fix path and export

* Make public"
1211ee4fb35ce5906d110d9934a0efd137d7847d,Steven,2019-09-12 23:29:03+00:00,Steven,2019-09-12 23:29:03+00:00,"Publish

 - now@16.1.4-canary.6
 - @now/go@0.5.11-canary.4
 - @now/node@1.0.0-canary.5
 - @now/ruby@0.1.5-canary.3"
a42bdefe1a20ca1d3010ceebcc6c6f73de89a933,Steven,2019-09-12 23:26:11+00:00,kodiakhq[bot],2019-09-12 23:26:11+00:00,"[now-node] Add support for AWS Gateway Event (#3010)

* [now-node] Add support for AWS Gateway Event

* Fix funcName

* Fix makeAwsLauncher export

* Add missing return"
f025f1007be1d865bf42a824e12f301f7430a32c,Steven,2019-09-12 18:26:21+00:00,kodiakhq[bot],2019-09-12 18:26:21+00:00,Add release notes script to PUBLISHING.md (#3006)
1c11a57371133937c64093019231e1c8a3ac9843,Andy,2019-09-12 17:48:32+00:00,kodiakhq[bot],2019-09-12 17:48:32+00:00,[now-cli] Default to empty string for undefined env var when checking (#3008)
db2d033484a9909d8efb2b7a4a2894f1de2c939b,Andy,2019-09-12 16:15:33+00:00,kodiakhq[bot],2019-09-12 16:15:33+00:00,[now-cli] Add changelog link to update message (#3001)
40537c9eba3f31ffe5112f5bb86d4f4262ee636e,Max,2019-09-12 14:40:46+00:00,kodiakhq[bot],2019-09-12 14:40:46+00:00,"[now-cli] Fix links output during deployment (#2966)

* Fix links output during deployment

* Move ""synced"" log to `total-fileds` event

* Pluralize synced messages

* Update packages/now-cli/src/util/deploy/process-deployment.ts

Co-Authored-By: Steven <steven@ceriously.com>

* Fix failing tests due to stdout mismatch"
5cabcb7a2722379d946e1b740e4f7569495d37cc,Steven,2019-09-12 13:34:54+00:00,kodiakhq[bot],2019-09-12 13:34:54+00:00,"[now-ruby] Use pre-installed ruby 2.5 (#2991)

* [now-ruby] Use pre-installed ruby 2.5

* Change GEM_HOME

* Add polyfill for Node 8"
1be9ac59f08168c01271672f13911537ac056012,Nathan Rajlich,2019-09-12 00:12:30+00:00,kodiakhq[bot],2019-09-12 00:12:29+00:00,"[now-cli] Show a warning for invalid env vars in `now dev` (#3002)

* [now-cli] Show a warning for invalid env vars in `now dev`

Closes #2982.

* Add ""validate env var names"" integration test"
64356baed328f63501083d969f1086ab581bb5f5,Andy,2019-09-11 23:32:20+00:00,kodiakhq[bot],2019-09-11 23:32:20+00:00,[now-cli] Add tests for alias rules (#3003)
c944706a0f5d20dcc1c833c349b5ca118124a1b3,Sophearak Tha,2019-09-11 16:23:54+00:00,kodiakhq[bot],2019-09-11 16:23:54+00:00,[now-go] Improve test for custom build flags (#2999)
f15deaa51e454a63f6e1301d007218ce4f9c187d,Nathan Rajlich,2019-09-11 15:47:56+00:00,kodiakhq[bot],2019-09-11 15:47:56+00:00,"[now-cli] Render correct command for `now ls $path_alias_url` (#2988)

Previously, if you ran `now ls` with a URL for a path alias, then an
error message `Cannot read property 'replace' of undefined` would occur.

Now, a message is logged saying to instead run `now alias ls $url` which
is the correct command to get path rules relevant to a path alias URL.

> Found matching path alias: rules.domain.com
> Please run `now alias ls rules.domain.com` instead

Fixes #2987."
61c3b944608a6f5fd6104dc1974c2f1d7b581c12,Steven,2019-09-11 14:32:20+00:00,Steven,2019-09-11 14:32:20+00:00,"Publish

 - @now/build-utils@1.0.0-canary.5
 - @now/static-build@0.9.9-canary.5"
89b018240faf58ac89fcab19c32f6bbac0ee9fce,Steven,2019-09-11 14:28:24+00:00,GitHub,2019-09-11 14:28:24+00:00,"[now-static-build] Run `bundle install` when `Gemfile` is found (#2980)

* [now-static-build] Run `bundle install` for Gemfile

* Add logs

* Add timeout in case proc hangs

* Rename test

* Remove console.log()

* Hide warnings

* Use runBundleInstall()

* [now-build-utils] Remove --deployment flag

* Run tests for build-utils"
0124dc99699d5b8f2ddc27429f0eb00ec8f78ab9,Steven,2019-09-10 16:38:03+00:00,Steven,2019-09-10 16:38:03+00:00,"Publish

 - now@16.1.4-canary.5
 - @now/next@1.0.0-canary.5
 - @now/node@1.0.0-canary.4"
936441c8a63cc24c660075f57c874691f267e4cb,Steven,2019-09-10 16:12:25+00:00,kodiakhq[bot],2019-09-10 16:12:24+00:00,[now-node][now-next] Bump node-file-trace to 0.3.1 (#2990)
c80570e096d04bdefcb7b4275ab22586e307d42f,Sophearak Tha,2019-09-10 14:22:08+00:00,kodiakhq[bot],2019-09-10 14:22:08+00:00,[now-cli] Hide `Init Duration` and `XRAY TraceId` by default (#2984)
11c67e1c4c6b67904ca02288e20adbb8a9592964,Steven,2019-09-10 13:18:57+00:00,Steven,2019-09-10 13:18:57+00:00,"Publish

 - @now/build-utils@1.0.0-canary.4"
0d1c0e0f30a0f136d85641244330862e5640d710,Steven,2019-09-09 21:51:46+00:00,kodiakhq[bot],2019-09-09 21:51:46+00:00,"[now-build-utils] Add function `runBundleInstall()` (#2986)

* [now-build-utils] Add function `runBundleInstall`

* Add additional flags

* Set jobs to number of cpus

* Format

* Fix formatting

* Add BUNDLE_APP_CONFIG"
f50572813e209bb011d7fce411b2ae5480a681ec,Steven,2019-09-09 17:09:08+00:00,Steven,2019-09-09 17:09:08+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.1
 - @now/build-utils@1.0.0-canary.3
 - now@16.1.4-canary.4
 - now-client@5.1.1-canary.3
 - @now/next@1.0.0-canary.4
 - @now/node@1.0.0-canary.3
 - @now/static-build@0.9.9-canary.4"
648b3a4ae2063a827b27688d2be1c63bcfa7c6f7,Steven,2019-09-09 16:39:40+00:00,kodiakhq[bot],2019-09-09 16:39:40+00:00,"[now-node] Bump node-file-trace to 0.3.0 and print warnings (#2985)

* Bump node-file-trace to 0.3.0

* [now-node] Print warnings from node-file-trace"
3f5f71f8abda9736398f081d8ae1a1778b38102d,Max Rovensky,2019-09-09 15:32:19+00:00,Max Rovensky,2019-09-09 15:32:19+00:00,"Publish

 - now-client@5.1.3"
2a44179898c9308ef1a52dded040470ee2f06d56,Max,2019-09-09 04:05:21+00:00,Max Rovensky,2019-09-09 15:31:16+00:00,"[now-client] Fix windows paths handling (#2974)

* Fix windows paths handling in now-client

* Tweak windows paths  handling"
efe114fa8611acdd933d4721a93d40eab1ed4b88,Joe Haddad,2019-09-09 14:42:26+00:00,kodiakhq[bot],2019-09-09 14:42:26+00:00,"[now-next] Add monorepo autosetup support (#2961)

* [now-next] Add monorepo autosetup support

* Add actual tests

* Remove invalid test

* Correct contents directory

* Update tests

* Support new Next.js canaries"
4445d5e00fa3124327d34a3da836646775b20383,Max,2019-09-09 04:05:21+00:00,kodiakhq[bot],2019-09-09 04:05:20+00:00,"[now-client] Fix windows paths handling (#2974)

* Fix windows paths handling in now-client

* Tweak windows paths  handling"
96b3c1ee7fe035f5a80eb41318f4168ac9e8dbd8,Clment ALLAIN,2019-09-06 23:38:49+00:00,kodiakhq[bot],2019-09-06 23:38:49+00:00,"[now-static-build] Fix dev server port detection (#2879)

* [now-static-build] Fix dev server detection

* Code review

* Remove unused dependency

* Fix the checking by really waiting until the port is reachable"
e1a770ac29b3e2c3916994b92b6e5c178f2edb68,Andy,2019-09-06 22:02:33+00:00,kodiakhq[bot],2019-09-06 22:02:33+00:00,"[now-build-utils][now-cli] Warn instead of throwing on `api` and `pages/api` (#2976)

* [now-build-utils][now-cli] Warn instead of throwing on `api` and `pages/api`

* Remove slash and adjust tests

* Remove @now/build-utils

* Hardcode builders

* Add build-utils

* Change default flag

* More logging

* Add static-build

* Remove other packages from package.json

* New file for bundled function"
db1a2e6482e134a2956a1fa6b2dddda5861e2eea,Andy,2019-09-06 10:45:57+00:00,kodiakhq[bot],2019-09-06 10:45:57+00:00,[now-cli] Display warning when changing the secret name (#2975)
ecdde7c36751ff9e85a81fd8c8f15afc4167816b,Nathan Rajlich,2019-09-06 00:35:49+00:00,kodiakhq[bot],2019-09-06 00:35:49+00:00,"[now-cli] Use `PackageJson` and `Builder` types from `@now/build-utils` (#2971)

No functionality change here, this just removes the `Package` and
`BuildConfig` types from `src/util/dev/types.ts` in favor of the
matching types from `@now/build-utils`.

Also a lot of prettier formatting"
4d31291ea482088bcb81df5720e5d15bc75097d8,Nathan Rajlich,2019-09-05 22:19:17+00:00,GitHub,2019-09-05 22:19:17+00:00,"[now-build-utils] Add `env` and `buildEnv` to `Meta` type (#2970)

* [now-build-utils] Add `env` and `buildEnv` to `Meta` type

`now dev` passes in these variables to the ""meta"" object.

* Fix build"
b70bd670fd144b20e2ba7ed31966c2893ef5421e,Andy,2019-09-05 19:21:59+00:00,kodiakhq[bot],2019-09-05 19:21:59+00:00,[now-build-utils] Throw error on Next.js pages/api and api/ (#2964)
d3017649e0fd15ae759d2788213952df1447028a,Sophearak Tha,2019-09-05 18:57:15+00:00,kodiakhq[bot],2019-09-05 18:57:15+00:00,[now-cli] Add platform in Sentry report (#2960)
e970584219924438ea43fd8d3610a55da5a58157,Luc,2019-09-05 18:04:32+00:00,kodiakhq[bot],2019-09-05 18:04:32+00:00,"[gatsby-plugin-now] Add `keywords` in package.json (#2965)

* add keywords to gatsby-plugin-now

* add #readme in homepage url"
4a6ddf8b1d42aa63e4024b8779487949592989f7,Andy Bitz,2019-09-05 16:25:48+00:00,Andy Bitz,2019-09-05 16:25:48+00:00,"Publish

 - gatsby-plugin-now@1.2.1
 - @now/build-utils@0.10.0
 - @now/cgi@0.1.6
 - now@16.2.0
 - now-client@5.1.2
 - @now/go@0.5.12
 - @now/next@1.0.0
 - @now/node-bridge@1.2.5
 - @now/node@1.0.0
 - @now/python@0.2.18
 - @now/routing-utils@1.2.4
 - @now/ruby@0.1.6
 - @now/static-build@0.9.10"
c6205293a92eb2aa4fb39a520765677bdd2c2d9a,Sophearak Tha,2019-09-05 13:19:32+00:00,kodiakhq[bot],2019-09-05 13:19:32+00:00,"[now-build-utils] Use debug() on `installing to` and `missing engines` (#2954)

* Use debug() on `installing to` output

* Use debug() on `getSupportedNodeVersion` output"
cb47f7bf4bf843c5f64c0ce5c29f054b07d0d75a,Max Rovensky,2019-09-05 09:07:52+00:00,Max Rovensky,2019-09-05 09:07:52+00:00,"Publish

 - now@16.1.4-canary.3
 - @now/python@0.2.17-canary.2"
a60f107e4bd2f5155f160c91fb0d373b56d628d3,Nathan Rajlich,2019-09-05 00:09:17+00:00,kodiakhq[bot],2019-09-05 00:09:17+00:00,"[now-cli] Fix `now alias` with no arguments (#2959)

Fixes #2941."
eeb1b2442cd4c925efba8f7b46ce66dfc562e158,Andy Bitz,2019-09-04 22:03:23+00:00,Andy Bitz,2019-09-04 22:03:23+00:00,"Revert ""[now-cli] Implement `now-client` deployments in Now CLI (#2875)""

This reverts commit 129f234aaa3ad1d373e2e0bdaa681ec230068dae."
129f234aaa3ad1d373e2e0bdaa681ec230068dae,Max,2019-09-04 16:50:09+00:00,Andy Bitz,2019-09-04 21:54:21+00:00,"[now-cli] Implement `now-client` deployments in Now CLI (#2875)

* Imlement `now-client` deployments in Now CLI

* Move now-client to dev dependencies

* Fix missing config for legacy deployments

* Restore no files warning

* Improve error handling

* Port over `--prod`

* Handle single files and warnings better

* Fix legacy deployment env config

* Handle build errors in events

* Don't use ncc for now-client

* Extract `for...await` logic into a `.ts` file

* Revert ""Don't use ncc for now-client""

This reverts commit e481a04058952f7011bf5523445256f1b8882dda.

* Add `typings` field to `now-client`

* Regenerate yarn.lock

* Add bootstrap step to CircleCI

* Add bootstrap step before build

* Revert ""Add bootstrap step before build""

This reverts commit db9e1113937f113cca8c7c05d5c800fd5d61e84b.

* Revert ""Add bootstrap step to CircleCI""

This reverts commit 02c0006a073614814fd174ccbaf1e4e0d8dd3dbf.

* Build `now-client` before CLI

* Sort build scripts

* Tweak empty deployment detection

* Add bootstrap step before build

* Remove now-client dependency from now-client

* Use local dependencies

* Fix paths and regenerate lockfile

* Bypass broken linting rule

* Remove lint ignore

* Use `tsc` instead of `ncc` for `now-client`

Co-Authored-By: Steven <steven@ceriously.com>

* Fix output path for tsc build

* [test] Supress TS warning

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-client/package.json

Co-Authored-By: Steven <steven@ceriously.com>

* Change `now-client` output to `dist`

* Implement file events in now-client and bring back progressbar

* Update build script sorting

* Add new logic tests for `now-client`

* Remove redundant target check

* Remove now-client dependency and use local code

* Set exact dependency versions

* Revert ""Set exact dependency versions""

This reverts commit e0a31eaf10e498271c9253439d4bbd650738c694.

* Revert local now-client import

* Revert `now-client` dependency to local path

* Implement feedback

* Fix formatting

* Only handle alias errors if `readyState` is `READY`

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
331c352e2b3c42d4ce8494e7408a5fcaf3d0157c,Nathan Rajlich,2019-09-02 12:47:25+00:00,Andy Bitz,2019-09-04 21:46:31+00:00,"[now-cli] Update `pcre-to-regexp` to v1.0.0 (#2932)

No improvements, per say, but the module has been converted to
TypeScript so it supplies its own type definitions now, and we
can delete our hand-crafted typings from this repo."
2ccbaea9dda2da31a194a6f90603f2d8c467078e,Nathan Rajlich,2019-08-29 00:42:06+00:00,Andy Bitz,2019-09-04 21:45:44+00:00,"[now-cli] Remove deprecated `@now/php` builder from bundled builders tarball (#2907)

`@now/php` has been deprecated in favor of community-maintained
`now-php`, so don't bundle the deprecated builder with Now CLI."
069eca3c626440746914df6f4bf148c943768067,Sophearak Tha,2019-09-02 16:32:45+00:00,Andy Bitz,2019-09-04 21:44:13+00:00,"[now-cli] Remove annotate from `now logs` (#2937)

* Remove annotate from `now logs`

* Filter out runtime logs to be consistency with dashboard logs

* Add integration test"
305e364f8b59eac42549be958d0c445d6ac7a146,Nathan Rajlich,2019-08-30 18:29:28+00:00,Andy Bitz,2019-09-04 21:41:27+00:00,"[now-cli] Output `--json` to stdout for `now alias ls <url>` (#2922)

Fixes #1337."
4068805ae02c2baa2473c32eb1f372ac5c7b2b94,Nathan Rajlich,2019-09-01 14:25:26+00:00,Andy Bitz,2019-09-04 21:36:16+00:00,"[now-cli] Use `xdg-app-paths` for `now dev` cache dir (#2921)

* [now-cli] Use `xdg-app-paths` for `now dev` cache dir

For consistency, because #2877 uses this module.
No need for multiple modules that do the same thing.

* Update `@zeit/fun` to v0.9.3"
9a1e7a4a7a7193b11300bc45e4c1604c6775d8dc,Andy,2019-09-04 10:35:20+00:00,Andy Bitz,2019-09-04 21:25:31+00:00,"[now-cli] Handle `now certs ls` for users and teams without certificates (#2945)

* [now-cli] Fix `now certs ls` when the user or team has no certs

* Add tests and move to typescript

* Move index and add to typescript

* Fix reduce function in ls

* Added linebreak

* Update packages/now-cli/src/commands/certs/add.ts

Co-Authored-By: Naoyuki Kanezawa <naoyuki.kanezawa@gmail.com>"
bbad3d1b96e628466533324a9c2b61592a711d09,Naoyuki Kanezawa,2019-09-04 06:44:49+00:00,Andy Bitz,2019-09-04 21:25:23+00:00,"Add the nameservers verification check and improve messages (#2943)

* add the nameservers verification check and improve messages

* fix verify message condition"
c62116d9a4ba981fb08b5a18d1a53372a3669234,Nathan Rajlich,2019-09-04 03:30:25+00:00,Andy Bitz,2019-09-04 21:25:11+00:00,"[now-cli] Remove `now update` from `--help` output (#2951)

Fixes #2940."
c94086ff2179508dd3cb43a11a7335a064ef2f58,Nathan Rajlich,2019-09-03 20:08:41+00:00,Andy Bitz,2019-09-04 21:25:00+00:00,"[now-cli] Remove `scale` subcommand from `--help` (#2923)

Fixes #1998."
e99caa7b97b89ef4f8117f159886d323519ecbbc,Andy,2019-09-03 18:56:34+00:00,Andy Bitz,2019-09-04 21:24:52+00:00,"Fix the prettier config (#2946)

* Fix the prettier config

* Try prettier"
658b9e9007c8f418e0bc1640ba4592e207904b4a,Andy,2019-09-03 18:05:21+00:00,Andy Bitz,2019-09-04 21:24:45+00:00,"[now-cli] Install dependencies before running `now dev` in tests (#2948)

* [now-cli] Install dependencies before running `now dev` in tests

* Check install exit code

* Add more logging

* Add more logging

* More logging

* Include yarn.lock file

* Add lock files to dev fixtures

* Ignore test

* Ignore another test

* Ignore another test

* Whitespace

* Install deps for unit tests

* Whitespace"
3ef27ae45c339f60bafab93165e95ef3e038edac,Luc,2019-09-03 04:19:32+00:00,Andy Bitz,2019-09-04 21:23:58+00:00,"[gatsby-plugin-now] Add new package w/support for Gatsby Redirects (#2897)

* add gatsby-plugin-now

* add test

* adjust with lerna

* fix test

* add tests to circleci

* add support for defaultRoutes functions

* add defaultRoutes to gatsby

* fix types

* add test case for gatsby redirects

* remove gatsby, react, react-dom from monorepo deps

* chmod +x build.sh

* add missing build script in fixtures

* do stuff during tests to avoid persistence issue

* move tests setup to build step

* copy gatsby plugin files in test case

* bring back ncc step

* prettier gatsby-plugin-now

* add missing semicolons

* remove eslint, prettier from plugin

* persist build step copied file

* fetch without following redirects

* add files in package.json

* remove force

* fix tests probes

* fetch location is not raw location

* fix test

* add readme

* fix type error

* adjust tests

* add support for `force`

* add tests for `force`

* adjust tests again

* gatsby-plugin-now@1.1.0

* `""` -> `'`

* tweak redirect names in test by precaution

* change file name and delete when consumed

* format files

* gatsby-plugin-now@1.2.0

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* tests -> test

* add --verbose

* adjust circleci to persist fixtures

* trigger tests

* add repository and homepage in package.json

* glob files after `defaultRoute` invocation"
e669cd1152f4ad193353f9315b5cdf60c6a80c28,Andy,2019-09-02 19:35:48+00:00,Andy Bitz,2019-09-04 21:23:47+00:00,"[now-node][now-next] Skip installing user dependencies for `now dev` (#2926)

* Skip installing user dependencies for `now dev`

* Update type

* Install dependecies for test

* Add comma-dangle for @now/next

* Revert ""Add comma-dangle for @now/next""

This reverts commit 720d5630f309ec44eb65e280af29db5b14bd50eb.

* Add trailing commas

* Reset typescript update

* Add trailing commas

* Bump @zeit/node-file-trace

* Readd trailing comma

* Bump @zeit/node-file-trace in @now/node"
b22aa7c0cf35fe7cb2317cc8bc00d3fe068a0f37,Sophearak Tha,2019-09-02 15:45:13+00:00,Andy Bitz,2019-09-04 21:23:33+00:00,"[now-go] Add `GO_BUILD_FLAGS` support for `go build` custom flags (#2916)

* Add `GO_BUILD_FLAGS` support for go build custom flags

* Using string-argv package

* Simplify condition"
582cbb61fbc5ed78cfa38d59bbcf3b9b7cbbf8fc,Joe Haddad,2019-09-02 13:28:36+00:00,Andy Bitz,2019-09-04 21:23:10+00:00,[now-next] Create default file with correct target (#2924)
7f4197cf43d7a366f6e7174711395bcd9435d5dc,Sophearak Tha,2019-08-30 16:42:23+00:00,Andy Bitz,2019-09-04 21:22:49+00:00,"[now-node] Cleanup debug output (#2927)

* Ensure traced files have annotate present in all lines

* Remove traced file logs

* Remove `compiling es module file` log

* Cleanup debug output"
30889db487f526357d5ac1215a5f5372d3295d55,JJ Kasper,2019-08-30 02:40:45+00:00,Andy Bitz,2019-09-04 21:22:30+00:00,"[now-next] Use patched version of yazl and trace API pages separate (#2919)

* Update to trace API files separately and use modified yazl

* Remove jszip dependency

* Pin yazl dependency and add types

* Update more types"
2d08d5d23e9e84bae6bf058a82c0747fdee511a2,Luc,2019-08-29 23:56:10+00:00,Andy Bitz,2019-09-04 21:22:16+00:00,[tests] Unify `.editorconfig` (#2920)
59e7367e03e7a51d82548cf8a47eaf4383f262b4,Luc,2019-08-29 19:17:40+00:00,Andy Bitz,2019-09-04 21:22:02+00:00,"[tests] Unify linting and autoformatting (#2914)

* add prettier and eslint on root

* remove eslint from now-cli

* adjust root package.json

* adjust eslintignore

* adjust now-cli rules

* remove @zeit/git-hooks in packages

* adjust now-client eslint config

* add lint-staged and hook on pre-commit

* add pre-commit script

* replace @zeit/git-hooks with husky

* remove unnecessary script

* fix eslint errors

* trigger tests

* fix fixable errors

* fix fixable errors (bis)

* revert two changes"
84af278e8657fb847699fe059392156791f9c183,Naoyuki Kanezawa,2019-08-29 13:57:26+00:00,Andy Bitz,2019-09-04 21:21:51+00:00,[tests] Remove fixtures files for integration tests (#2910)
67d9ee39e2170ced76b8428ffac74ec84d0fae5a,JJ Kasper,2019-08-28 22:43:26+00:00,Andy Bitz,2019-09-04 21:21:32+00:00,"[now-next] Optimize lambda creation (#2892)

* Optimize zipping lambdas for now-next

* Update to use jszip to get around bug in yazl

* Add pseudo layer utils

* Apply suggestions from code review

Co-Authored-By: Joe Haddad <joe.haddad@zeit.co>

* Update sema concurrency from tests

* Update packages/now-next/src/index.ts

* Use custom types to fix broken @types package

* Add license header

* Revert ""Use custom types to fix broken @types package""

This reverts commit 82441285155f6e0899c43dffdd5e000ecbd7b1b6.

* Fix CI Yarn installation

* TypeScript types should never be hoisted

* Fix all typechecking"
6c67bb81f7013b0c458d14a0f3ac5b8d1877d61f,Joe Haddad,2019-08-28 02:14:02+00:00,Andy Bitz,2019-09-04 21:21:03+00:00,[now-next] Do not add initial files to lambda (#2894)
aba19701c0b9b91b2af8cc34fc2cbcaea2fcc54d,Steven,2019-08-27 17:55:43+00:00,Andy Bitz,2019-09-04 21:20:47+00:00,[tests] Ignore fixtures in GitHub Languages & fix yarn.lock (#2890)
bb794029994a801354e7cc422bd861359ba2075c,Sophearak Tha,2019-08-27 15:40:39+00:00,Andy Bitz,2019-09-04 21:20:37+00:00,"[now-next] Use `debug()` from build-utils (#2881)

* [now-next] Use `debug()` from build-utils (#909)

* Use `debug()` from build-utils

* Revert back to warning output

* Remove unnecessary debug check"
420bc4b2443ae8002a70ea34bcc739bbb13514fc,Sophearak Tha,2019-08-27 15:25:31+00:00,Andy Bitz,2019-09-04 21:20:27+00:00,"[now-go] Use `debug()` from build-utils (#2885)

* [now-go] Use `debug()` from build-utils (#923)

* Use `debug()` from build-utils

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* Print errors

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>"
323c3d74cb68c8a1b1f9de9b9cfcde5b0d7ac0f3,Sophearak Tha,2019-08-27 15:05:13+00:00,Andy Bitz,2019-09-04 21:20:20+00:00,[now-ruby] Use `debug()` from build-utils (#2883)
4ecec8a8f6f9b755e8d1d735425762860edda446,Sophearak Tha,2019-08-27 14:36:04+00:00,Andy Bitz,2019-09-04 21:20:13+00:00,"[now-node] Use `debug()` from build-utils (#2880)

* Use `debug()` from build-utils

* Remove condition"
98883f99789c4fd8df70f464d382d83120177c7d,Sophearak Tha,2019-08-27 14:15:11+00:00,Andy Bitz,2019-09-04 21:20:04+00:00,[now-static-build] Use `debug()` from build-utils (#2884)
37cf3be4375164450beea2726c440981c98ca135,Sophearak Tha,2019-08-27 13:10:43+00:00,Andy Bitz,2019-09-04 21:19:45+00:00,"[now-python] Use `debug()` from build-utils (#2882)

* Use `debug()` from build-utils

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>"
6e43c322cc0f4566e58fa505626ea39bd8bbb4b5,Nathan Rajlich,2019-09-04 20:33:19+00:00,kodiakhq[bot],2019-09-04 20:33:19+00:00,"[CircleCI] Remove `publish-stable` and `publish-canary` steps (#2957)

Publishing to npm is now handled by GitHub Actions.

Aside from that, the Circle publishing was broken.
See: https://circleci.com/gh/zeit/now/7213"
4b6387bdb54f821c9f25b8eb1011731910e72c14,Steven,2019-09-04 18:35:33+00:00,kodiakhq[bot],2019-09-04 18:35:33+00:00,[now-python] Use system python with `now dev` (#2956)
bcd770c0fefbf6e6bebfee86c69a05a8fd2e3b9c,Steven,2019-09-04 18:10:33+00:00,kodiakhq[bot],2019-09-04 18:10:33+00:00,[now-cli] Bump `@zeit/fun` to 0.10.0 (#2955)
bb8c7e9f3b2c450fd2c5e0849af913d6760cb299,Max Rovensky,2019-09-04 17:03:31+00:00,Max Rovensky,2019-09-04 17:03:31+00:00,"Publish

 - now@16.1.4-canary.2
 - now-client@5.1.1-canary.2"
6e469272c32bd7cfe093d15a1fa31dbf7641cf13,Max,2019-09-04 16:50:09+00:00,kodiakhq[bot],2019-09-04 16:50:09+00:00,"[now-cli] Implement `now-client` deployments in Now CLI (#2875)

* Imlement `now-client` deployments in Now CLI

* Move now-client to dev dependencies

* Fix missing config for legacy deployments

* Restore no files warning

* Improve error handling

* Port over `--prod`

* Handle single files and warnings better

* Fix legacy deployment env config

* Handle build errors in events

* Don't use ncc for now-client

* Extract `for...await` logic into a `.ts` file

* Revert ""Don't use ncc for now-client""

This reverts commit e481a04058952f7011bf5523445256f1b8882dda.

* Add `typings` field to `now-client`

* Regenerate yarn.lock

* Add bootstrap step to CircleCI

* Add bootstrap step before build

* Revert ""Add bootstrap step before build""

This reverts commit db9e1113937f113cca8c7c05d5c800fd5d61e84b.

* Revert ""Add bootstrap step to CircleCI""

This reverts commit 02c0006a073614814fd174ccbaf1e4e0d8dd3dbf.

* Build `now-client` before CLI

* Sort build scripts

* Tweak empty deployment detection

* Add bootstrap step before build

* Remove now-client dependency from now-client

* Use local dependencies

* Fix paths and regenerate lockfile

* Bypass broken linting rule

* Remove lint ignore

* Use `tsc` instead of `ncc` for `now-client`

Co-Authored-By: Steven <steven@ceriously.com>

* Fix output path for tsc build

* [test] Supress TS warning

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Steven <steven@ceriously.com>

* Update packages/now-client/package.json

Co-Authored-By: Steven <steven@ceriously.com>

* Change `now-client` output to `dist`

* Implement file events in now-client and bring back progressbar

* Update build script sorting

* Add new logic tests for `now-client`

* Remove redundant target check

* Remove now-client dependency and use local code

* Set exact dependency versions

* Revert ""Set exact dependency versions""

This reverts commit e0a31eaf10e498271c9253439d4bbd650738c694.

* Revert local now-client import

* Revert `now-client` dependency to local path

* Implement feedback

* Fix formatting

* Only handle alias errors if `readyState` is `READY`

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Update packages/now-cli/src/commands/deploy/latest.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
5e7fa711485dead775d606e31ee1f2b08e6fddc2,Andy Bitz,2019-09-04 10:44:04+00:00,Andy Bitz,2019-09-04 10:44:04+00:00,"Publish

 - now@16.1.4-canary.1
 - @now/next@1.0.0-canary.3"
12d9a4b4f45c2cdbacd088215846ee7e9a868160,Andy Bitz,2019-09-04 10:42:50+00:00,Andy Bitz,2019-09-04 10:42:50+00:00,[now-cli] Bump version
084ab2d0e5a3f0ef3143d4fd02720cc233176182,Andy,2019-09-04 10:35:20+00:00,kodiakhq[bot],2019-09-04 10:35:20+00:00,"[now-cli] Handle `now certs ls` for users and teams without certificates (#2945)

* [now-cli] Fix `now certs ls` when the user or team has no certs

* Add tests and move to typescript

* Move index and add to typescript

* Fix reduce function in ls

* Added linebreak

* Update packages/now-cli/src/commands/certs/add.ts

Co-Authored-By: Naoyuki Kanezawa <naoyuki.kanezawa@gmail.com>"
4ca0d936aae42894358fadb33726144220b45cf1,Naoyuki Kanezawa,2019-09-04 06:44:49+00:00,GitHub,2019-09-04 06:44:49+00:00,"Add the nameservers verification check and improve messages (#2943)

* add the nameservers verification check and improve messages

* fix verify message condition"
5d5a55e7e1d23b3f9a668dd7ebcb7f3ffe975f70,Nathan Rajlich,2019-09-04 03:30:25+00:00,kodiakhq[bot],2019-09-04 03:30:25+00:00,"[now-cli] Remove `now update` from `--help` output (#2951)

Fixes #2940."
e033e5e0ca340377466f45f518461ed1428cdfcf,Nathan Rajlich,2019-09-03 20:08:41+00:00,kodiakhq[bot],2019-09-03 20:08:41+00:00,"[now-cli] Remove `scale` subcommand from `--help` (#2923)

Fixes #1998."
7cb36ef1dd880e0a8830d784e894035dbc87c6aa,Andy,2019-09-03 18:56:34+00:00,kodiakhq[bot],2019-09-03 18:56:34+00:00,"Fix the prettier config (#2946)

* Fix the prettier config

* Try prettier"
9aafb168e901d768faa0278d378da4bdd1f214b9,Andy,2019-09-03 18:05:21+00:00,kodiakhq[bot],2019-09-03 18:05:21+00:00,"[now-cli] Install dependencies before running `now dev` in tests (#2948)

* [now-cli] Install dependencies before running `now dev` in tests

* Check install exit code

* Add more logging

* Add more logging

* More logging

* Include yarn.lock file

* Add lock files to dev fixtures

* Ignore test

* Ignore another test

* Ignore another test

* Whitespace

* Install deps for unit tests

* Whitespace"
fbb5caf955947b034090dee556521ccc04ce1e63,Andy Bitz,2019-09-03 07:57:03+00:00,Andy Bitz,2019-09-03 07:57:03+00:00,"Publish

 - gatsby-plugin-now@1.2.1-canary.0
 - @now/build-utils@1.0.0-canary.2
 - now@16.1.3-canary.6
 - @now/go@0.5.11-canary.3
 - @now/next@1.0.0-canary.2
 - @now/node@1.0.0-canary.2
 - @now/static-build@0.9.9-canary.3"
3f93da550b73ebab9488168c62d4ca4257db42ca,Andy,2019-09-03 07:53:19+00:00,kodiakhq[bot],2019-09-03 07:53:19+00:00,"[now-build-utils][now-next][now-node] Bump version (#2942)

* [now-build-utils][now-next][now-node] Bump version

* Bump build-utils in @now-cli"
a194e0cc6e0a39d20dedb1cac4663d78d6937302,Luc,2019-09-03 04:19:32+00:00,kodiakhq[bot],2019-09-03 04:19:32+00:00,"[gatsby-plugin-now] Add new package w/support for Gatsby Redirects (#2897)

* add gatsby-plugin-now

* add test

* adjust with lerna

* fix test

* add tests to circleci

* add support for defaultRoutes functions

* add defaultRoutes to gatsby

* fix types

* add test case for gatsby redirects

* remove gatsby, react, react-dom from monorepo deps

* chmod +x build.sh

* add missing build script in fixtures

* do stuff during tests to avoid persistence issue

* move tests setup to build step

* copy gatsby plugin files in test case

* bring back ncc step

* prettier gatsby-plugin-now

* add missing semicolons

* remove eslint, prettier from plugin

* persist build step copied file

* fetch without following redirects

* add files in package.json

* remove force

* fix tests probes

* fetch location is not raw location

* fix test

* add readme

* fix type error

* adjust tests

* add support for `force`

* add tests for `force`

* adjust tests again

* gatsby-plugin-now@1.1.0

* `""` -> `'`

* tweak redirect names in test by precaution

* change file name and delete when consumed

* format files

* gatsby-plugin-now@1.2.0

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* tests -> test

* add --verbose

* adjust circleci to persist fixtures

* trigger tests

* add repository and homepage in package.json

* glob files after `defaultRoute` invocation"
62e3949c65d733c25052118ee0d650332e314c3c,Andy Bitz,2019-09-02 20:15:34+00:00,Andy Bitz,2019-09-02 20:15:34+00:00,"Publish

 - @now/build-utils@0.9.14
 - @now/cgi@0.1.5
 - now@16.1.3
 - now-client@5.1.1
 - @now/go@0.5.11
 - @now/next@0.7.1
 - @now/node-bridge@1.2.4
 - @now/node@0.12.8
 - @now/python@0.2.17
 - @now/routing-utils@1.2.3
 - @now/ruby@0.1.5
 - @now/static-build@0.9.9"
b007200bcf7d5d206023ef030f29ab673e008099,Andy,2019-09-02 19:35:48+00:00,kodiakhq[bot],2019-09-02 19:35:48+00:00,"[now-node][now-next] Skip installing user dependencies for `now dev` (#2926)

* Skip installing user dependencies for `now dev`

* Update type

* Install dependecies for test

* Add comma-dangle for @now/next

* Revert ""Add comma-dangle for @now/next""

This reverts commit 720d5630f309ec44eb65e280af29db5b14bd50eb.

* Add trailing commas

* Reset typescript update

* Add trailing commas

* Bump @zeit/node-file-trace

* Readd trailing comma

* Bump @zeit/node-file-trace in @now/node"
c19186163935d90267d3426ffaf068a8818eddc3,Sophearak Tha,2019-08-30 15:32:51+00:00,Andy Bitz,2019-09-02 19:28:17+00:00,"[now-go] Fix `analyze.go` fails to parse source file with comments (#2911)

* Fix `analyze.go` fails to parse source file with comments

* Add more tests

* Improve fallback

* Improve check for http.HandlerFunc signature`"
c820509c29b9581e30aaed7a98d4ccbf76676b01,Joe Haddad,2019-08-28 05:29:34+00:00,Andy Bitz,2019-09-02 19:26:30+00:00,[now-build-utils] Add `mutable` option for backwards compatibility (#2895)
199f98153fcd55ab974f8d88a62592e3218943a6,Andy,2019-08-26 22:10:31+00:00,Andy Bitz,2019-09-02 19:22:38+00:00,[now-static-build] Support ejected create-react-app (#2873)
05d88da8872fd0eefc9b0ac1a56f47e45106511a,Sophearak Tha,2019-09-02 16:32:45+00:00,kodiakhq[bot],2019-09-02 16:32:45+00:00,"[now-cli] Remove annotate from `now logs` (#2937)

* Remove annotate from `now logs`

* Filter out runtime logs to be consistency with dashboard logs

* Add integration test"
a64b96f87b470db08109f98900830a0d7c23462e,Andy,2019-08-29 23:47:53+00:00,Andy Bitz,2019-09-02 15:50:37+00:00,"[now-cli] Improve check for update command (#2915)

* [now-cli] Improve check for update command

* Use path.sep

* Fix build"
f179864986ac5497f96f2acf7696198079345613,Max Strbing,2019-08-29 23:04:47+00:00,Andy Bitz,2019-09-02 15:50:29+00:00,"[now-cli] Use XDG standard instead of writing to home directory (#2877)

* Use XDG standard instead of writing to home directory

* Fix typos

* Use dependencies as dev dependencies

* Remove lodash dependency

* Use xdg-app-paths instead of xdg-portable

* use find instead of filter(...)[0]"
73af1b3d9103448b7cb307a5d02bd69b42fd213c,Steven,2019-08-29 16:47:36+00:00,Andy Bitz,2019-09-02 15:50:17+00:00,"[now-cli] Update readme and links (#2886)

* Update readme and links

* Fix readme image

* Fix homepage

* Update banner image to v3"
56afa1b464e79a69bb784dc379441eaf1c1afa41,Nathan Rajlich,2019-08-29 12:39:55+00:00,Andy Bitz,2019-09-02 15:50:06+00:00,"[now-cli] Implement `continue: true` with `dest` (#2908)

Closes #2685."
0e0f453e4e3cbb3df6668912ba9c5b6ce0849688,Nathan Rajlich,2019-08-29 07:56:36+00:00,Andy Bitz,2019-09-02 15:49:59+00:00,"[now-cli] Use a Map for the valid sub-commands (#2913)

Otherwise, JavaScript Object built-ins such as `hasOwnProperty` are
incorrectly considered a valid subcommand, but fail afterwards with
a `require()` error and confusing error message."
78d25d97fba98f0adbec6824cfa424946139c83b,Naoyuki Kanezawa,2019-08-29 05:45:40+00:00,Andy Bitz,2019-09-02 15:49:52+00:00,[now-cli] fix login test (#2909)
d6ce0e4c234e04530d83fbfab81ea7ee64a6dad3,Andy,2019-08-28 23:51:10+00:00,Andy Bitz,2019-09-02 15:49:40+00:00,"[now-cli] Allow to fetch more certificates with paging (#2905)

* [now-cli] Allow to fetch more certificates with paging

* Linting

* Update packages/now-cli/src/commands/certs/ls.js

Co-Authored-By: Nathan Rajlich <n@n8.io>"
434de228cc8f9b4aa903996fd85caade0b6f5e2b,Andy,2019-08-28 21:30:27+00:00,Andy Bitz,2019-09-02 15:49:34+00:00,"[now-cli] Validate inputs for alias, list and remove (#2903)

* [now-cli] Validate inputs for alias, list and remove

* Log test output

* Add more logging to test

* Change to execa

* Use `split`

* Only validate when it exists"
d75b0c95784f4cabe9b038f6eae80eb17702308e,Andy,2019-08-28 20:41:56+00:00,Andy Bitz,2019-09-02 15:49:26+00:00,"[now-cli] Change success message after login (#2898)

* [now-cli] Change success message after login

* Linting

* Test now login

* Linting

* Revert ""Test now login""

This reverts commit 690360db3f148552a456b4ee1bd2a59b8d09216c.

* Revert ""Linting""

This reverts commit 3d5ebfaa76ecdcc2152c8344c8e1205b241abe09.

* Adjust test

* Remove binaryPath from args

* Fix loggin test"
16e24e8464c49a507873b8cc74ce54c1cbcc7b40,Kaito Sugimoto,2019-08-28 18:27:21+00:00,Andy Bitz,2019-09-02 15:49:19+00:00,[now-cli] Update `now alias` warning for `--prod` (#2902)
8365d7c4ded4af54f100f0e6162e6e87b6ca6a70,Andy,2019-08-28 00:47:39+00:00,Andy Bitz,2019-09-02 15:49:09+00:00,"[now alias] Improve alias support (#2787)

This enables https://github.com/zeit/now-cli/pull/2747 from @nkzawa again.

We had to revert the previous one, because we didn't want to include it in
the next stable release.

This further makes sure that we don't display `https://` in front of a
wildcard alias, since `https://*.mydomain.tld` is not a valid URL."
a95849225658ae8370ca47d5cf56786e01ef6c0d,Steven,2019-08-27 22:35:12+00:00,Andy Bitz,2019-09-02 15:49:01+00:00,Add GH Actions Publish Workflow (#2891)
6285ac589d8b4a9bee9c5aff63e42dd9ea1ae162,Andy,2019-08-27 13:29:23+00:00,Andy Bitz,2019-09-02 15:47:54+00:00,"[now-cli] Validate builds and routes for `now dev` (#2871)

* [now-cli] Validate builds and routes for `now dev`

* Remove @ts-ignore

* Sort the matches such that `utils` modules are compiled first

Because other packages may rely on them

* Prettier

* Add `reject: false` to tests

* Prettier

* Make validation async

* Fix syntax

* Fix type

* Linting

* Fix error check"
2ac87b0144065fdb97f6b8c4cd68bf9ce983109d,Sophearak Tha,2019-08-27 13:11:09+00:00,Andy Bitz,2019-09-02 15:47:49+00:00,[now-cli] Make sure to have event action as string (#2870)
21fd1761ae4a5cf0e2a3051962fa6ceb2fe66d68,Nathan Rajlich,2019-08-26 23:10:06+00:00,Andy Bitz,2019-09-02 15:47:42+00:00,"[now dev] Update `yarn` to v1.17.3 (#2780)

* [now dev] Update `yarn` to v1.17.3

* Wait longer for angular integration test

It keeps on failing

* Only run angular test on Node 10.x

* Revert ""Wait longer for angular integration test""

This reverts commit 19d70d4ba9aee49a5114b65f00ef97e2a88dc7ef."
3664a2da8be0ea8ba215ed65b7da18aec8e8c35d,Steven,2019-08-26 21:17:57+00:00,Andy Bitz,2019-09-02 15:47:33+00:00,"[tests] Fix unit tests & coverage step (#2876)

* Fix unit tests & coverage

* Add missing compile-templates step"
8a6f3c61bb63eec94eb2926343163be31538f096,Nathan Rajlich,2019-08-26 19:13:08+00:00,Andy Bitz,2019-09-02 15:47:26+00:00,"Update links to `now-builders` repo to `now` repo (#2862)

* Update links to `now-builders` repo to `now` repo

Also copies over the `.md` files from the now-builders' `errors`
directory so that the https://err.sh links work correctly.

Part of #2782.

* Update `err.sh` links that were formerly `now-cli`

* Empty commit for CI

* Make CircleCI `run.sh` script a bit better

Before it would fail with exit code 1 if there were no matching modified
files because of the `grep` call failing without any `packages` prefixed
files."
f5f7dd9e8a3b29fe41fccdd29654ff7a4dfb1782,Steven,2019-08-26 17:49:47+00:00,Andy Bitz,2019-09-02 15:47:17+00:00,"[tests] Change run script from bash to node (#2874)

* [tests] Change run script from bash to node

* Fix loop for runScript

* Fix `all` script test

* Improve console.log() messages

* Use -l instead of -p

* Delete yarn.lock from now-python"
0a429bb2f3f657c238a774ccde5724f5859ad309,Sophearak Tha,2019-09-02 15:45:13+00:00,kodiakhq[bot],2019-09-02 15:45:13+00:00,"[now-go] Add `GO_BUILD_FLAGS` support for `go build` custom flags (#2916)

* Add `GO_BUILD_FLAGS` support for go build custom flags

* Using string-argv package

* Simplify condition"
468ccb759867f5a4e808370c0f8e5640dfc8b99e,Joe Haddad,2019-09-02 13:28:36+00:00,kodiakhq[bot],2019-09-02 13:28:36+00:00,[now-next] Create default file with correct target (#2924)
e47f6f55dc80388ff432af52b80e138cd265502e,Andy Bitz,2019-09-02 13:11:14+00:00,Andy Bitz,2019-09-02 13:11:14+00:00,"Publish

 - now@16.1.3-canary.5"
17deed91b2989bd9fbcbe65a5c7defd01d407c4f,Nathan Rajlich,2019-09-02 12:47:25+00:00,kodiakhq[bot],2019-09-02 12:47:25+00:00,"[now-cli] Update `pcre-to-regexp` to v1.0.0 (#2932)

No improvements, per say, but the module has been converted to
TypeScript so it supplies its own type definitions now, and we
can delete our hand-crafted typings from this repo."
cc0bd9f0a226232c4919c14183c73b8138c6c238,Nathan Rajlich,2019-09-01 14:25:26+00:00,kodiakhq[bot],2019-09-01 14:25:26+00:00,"[now-cli] Use `xdg-app-paths` for `now dev` cache dir (#2921)

* [now-cli] Use `xdg-app-paths` for `now dev` cache dir

For consistency, because #2877 uses this module.
No need for multiple modules that do the same thing.

* Update `@zeit/fun` to v0.9.3"
f6f99fef2529d26ab96ea4f525167d5873ec5db7,Steven,2019-08-30 18:36:09+00:00,Steven,2019-08-30 18:36:09+00:00,"Publish

 - now@16.1.3-canary.4
 - @now/go@0.5.11-canary.2
 - @now/node@0.12.8-canary.3"
eb252edc7f03246f628fc94cd39eca12c326e082,Nathan Rajlich,2019-08-30 18:29:28+00:00,kodiakhq[bot],2019-08-30 18:29:28+00:00,"[now-cli] Output `--json` to stdout for `now alias ls <url>` (#2922)

Fixes #1337."
f3213dbcdc724aad5b246f5f07a54304b60748b2,Sophearak Tha,2019-08-30 16:42:23+00:00,kodiakhq[bot],2019-08-30 16:42:23+00:00,"[now-node] Cleanup debug output (#2927)

* Ensure traced files have annotate present in all lines

* Remove traced file logs

* Remove `compiling es module file` log

* Cleanup debug output"
c637da7710056d4f1186e9eea807696996a8b26e,Sophearak Tha,2019-08-30 15:32:51+00:00,kodiakhq[bot],2019-08-30 15:32:51+00:00,"[now-go] Fix `analyze.go` fails to parse source file with comments (#2911)

* Fix `analyze.go` fails to parse source file with comments

* Add more tests

* Improve fallback

* Improve check for http.HandlerFunc signature`"
ab05595582ffb20abf9f89730e8a7c10383d2f08,Joe Haddad,2019-08-30 03:15:18+00:00,Joe Haddad,2019-08-30 03:15:18+00:00,"Publish

 - @now/build-utils@0.9.14-canary.2
 - @now/cgi@0.1.5-canary.1
 - now@16.1.3-canary.3
 - now-client@5.1.1-canary.1
 - @now/go@0.5.11-canary.1
 - @now/next@0.7.1-canary.3
 - @now/node-bridge@1.2.4-canary.2
 - @now/node@0.12.8-canary.2
 - @now/python@0.2.17-canary.1
 - @now/routing-utils@1.2.3-canary.1
 - @now/ruby@0.1.5-canary.2
 - @now/static-build@0.9.9-canary.2"
ba8e7143294f926f32facd44b7887b1b2fbc75db,JJ Kasper,2019-08-30 02:40:45+00:00,kodiakhq[bot],2019-08-30 02:40:45+00:00,"[now-next] Use patched version of yazl and trace API pages separate (#2919)

* Update to trace API files separately and use modified yazl

* Remove jszip dependency

* Pin yazl dependency and add types

* Update more types"
ef86bb0bd9286d8dba600f439cf7cc15bddf0b72,Luc,2019-08-29 23:56:10+00:00,kodiakhq[bot],2019-08-29 23:56:10+00:00,[tests] Unify `.editorconfig` (#2920)
be18b54bfd4ab52e351b6cc4e0e1ec25f6203277,Andy,2019-08-29 23:47:53+00:00,kodiakhq[bot],2019-08-29 23:47:53+00:00,"[now-cli] Improve check for update command (#2915)

* [now-cli] Improve check for update command

* Use path.sep

* Fix build"
ed168db23c6247520febe4b549cd2fe85b56e433,Max Strbing,2019-08-29 23:04:47+00:00,kodiakhq[bot],2019-08-29 23:04:47+00:00,"[now-cli] Use XDG standard instead of writing to home directory (#2877)

* Use XDG standard instead of writing to home directory

* Fix typos

* Use dependencies as dev dependencies

* Remove lodash dependency

* Use xdg-app-paths instead of xdg-portable

* use find instead of filter(...)[0]"
236f5f4159fb15891233aa38c389d6443dbdcf91,Luc,2019-08-29 19:17:40+00:00,kodiakhq[bot],2019-08-29 19:17:40+00:00,"[tests] Unify linting and autoformatting (#2914)

* add prettier and eslint on root

* remove eslint from now-cli

* adjust root package.json

* adjust eslintignore

* adjust now-cli rules

* remove @zeit/git-hooks in packages

* adjust now-client eslint config

* add lint-staged and hook on pre-commit

* add pre-commit script

* replace @zeit/git-hooks with husky

* remove unnecessary script

* fix eslint errors

* trigger tests

* fix fixable errors

* fix fixable errors (bis)

* revert two changes"
e44a91634e20b7be1ba456909d0d75a8e05c0f57,Steven,2019-08-29 16:47:36+00:00,kodiakhq[bot],2019-08-29 16:47:36+00:00,"[now-cli] Update readme and links (#2886)

* Update readme and links

* Fix readme image

* Fix homepage

* Update banner image to v3"
8b9426eb6c1f10e7b22a317b14a9d288cea3683c,Naoyuki Kanezawa,2019-08-29 13:57:26+00:00,kodiakhq[bot],2019-08-29 13:57:26+00:00,[tests] Remove fixtures files for integration tests (#2910)
c62c57f122dd7ac4364fd019648ea59693709a9c,Nathan Rajlich,2019-08-29 12:39:55+00:00,kodiakhq[bot],2019-08-29 12:39:55+00:00,"[now-cli] Implement `continue: true` with `dest` (#2908)

Closes #2685."
c81db0c8d288c9f7cc85938f0b4879f1077360b1,Nathan Rajlich,2019-08-29 07:56:36+00:00,kodiakhq[bot],2019-08-29 07:56:36+00:00,"[now-cli] Use a Map for the valid sub-commands (#2913)

Otherwise, JavaScript Object built-ins such as `hasOwnProperty` are
incorrectly considered a valid subcommand, but fail afterwards with
a `require()` error and confusing error message."
1c64990e9fca4110f386c7444fdbc44aef2b74f3,Naoyuki Kanezawa,2019-08-29 05:45:40+00:00,kodiakhq[bot],2019-08-29 05:45:40+00:00,[now-cli] fix login test (#2909)
f1dc7fd14a2a12ee8f242a68b9dfa9b73cf2cf2e,Joe Haddad,2019-08-29 01:18:57+00:00,Joe Haddad,2019-08-29 01:18:57+00:00,"Publish

 - now@16.1.3-canary.2
 - @now/next@0.7.1-canary.2
 - @now/node-bridge@1.2.4-canary.1
 - @now/node@0.12.8-canary.1
 - @now/ruby@0.1.5-canary.1
 - @now/static-build@0.9.9-canary.1"
6079d4be2509a0ba619d57bd35b8a3d82211cd35,Nathan Rajlich,2019-08-29 00:42:06+00:00,kodiakhq[bot],2019-08-29 00:42:06+00:00,"[now-cli] Remove deprecated `@now/php` builder from bundled builders tarball (#2907)

`@now/php` has been deprecated in favor of community-maintained
`now-php`, so don't bundle the deprecated builder with Now CLI."
2c4b8335ce17c7232de4637991f57711b4551d66,Andy,2019-08-28 23:51:10+00:00,kodiakhq[bot],2019-08-28 23:51:10+00:00,"[now-cli] Allow to fetch more certificates with paging (#2905)

* [now-cli] Allow to fetch more certificates with paging

* Linting

* Update packages/now-cli/src/commands/certs/ls.js

Co-Authored-By: Nathan Rajlich <n@n8.io>"
9bd2f22d5c55b9475e2d7d6351ffb86a096645a7,JJ Kasper,2019-08-28 22:43:26+00:00,kodiakhq[bot],2019-08-28 22:43:26+00:00,"[now-next] Optimize lambda creation (#2892)

* Optimize zipping lambdas for now-next

* Update to use jszip to get around bug in yazl

* Add pseudo layer utils

* Apply suggestions from code review

Co-Authored-By: Joe Haddad <joe.haddad@zeit.co>

* Update sema concurrency from tests

* Update packages/now-next/src/index.ts

* Use custom types to fix broken @types package

* Add license header

* Revert ""Use custom types to fix broken @types package""

This reverts commit 82441285155f6e0899c43dffdd5e000ecbd7b1b6.

* Fix CI Yarn installation

* TypeScript types should never be hoisted

* Fix all typechecking"
7c421f92e144778c0074a27a212157be9901b681,Andy,2019-08-28 21:30:27+00:00,kodiakhq[bot],2019-08-28 21:30:27+00:00,"[now-cli] Validate inputs for alias, list and remove (#2903)

* [now-cli] Validate inputs for alias, list and remove

* Log test output

* Add more logging to test

* Change to execa

* Use `split`

* Only validate when it exists"
0626db51bd8a9393d0c3e8b5415b7b95d93eb406,Andy,2019-08-28 20:41:56+00:00,GitHub,2019-08-28 20:41:56+00:00,"[now-cli] Change success message after login (#2898)

* [now-cli] Change success message after login

* Linting

* Test now login

* Linting

* Revert ""Test now login""

This reverts commit 690360db3f148552a456b4ee1bd2a59b8d09216c.

* Revert ""Linting""

This reverts commit 3d5ebfaa76ecdcc2152c8344c8e1205b241abe09.

* Adjust test

* Remove binaryPath from args

* Fix loggin test"
dc29a8b81632e6806f2faa8b536e73c0fde10553,Kaito Sugimoto,2019-08-28 18:27:21+00:00,kodiakhq[bot],2019-08-28 18:27:21+00:00,[now-cli] Update `now alias` warning for `--prod` (#2902)
e00e5e18eadaac39bf5d04f474c9303b3e43629b,Joe Haddad,2019-08-28 12:28:56+00:00,Joe Haddad,2019-08-28 12:28:56+00:00,"Publish

 - @now/build-utils@0.9.14-canary.1
 - now@16.1.3-canary.1
 - @now/next@0.7.1-canary.1"
d0999e79376f5231ebd87cf71a406e1ccd4659bf,Joe Haddad,2019-08-28 05:29:34+00:00,kodiakhq[bot],2019-08-28 05:29:34+00:00,[now-build-utils] Add `mutable` option for backwards compatibility (#2895)
158cfad9789f3e34d55ffcac131edc720da22405,Joe Haddad,2019-08-28 02:14:02+00:00,kodiakhq[bot],2019-08-28 02:14:02+00:00,[now-next] Do not add initial files to lambda (#2894)
9145b43a620c43554f1e83486c1d3a4ce598ae05,Andy,2019-08-28 00:47:39+00:00,kodiakhq[bot],2019-08-28 00:47:39+00:00,"[now alias] Improve alias support (#2787)

This enables https://github.com/zeit/now-cli/pull/2747 from @nkzawa again.

We had to revert the previous one, because we didn't want to include it in
the next stable release.

This further makes sure that we don't display `https://` in front of a
wildcard alias, since `https://*.mydomain.tld` is not a valid URL."
479d2713569d9cba0530a5170ad2789ef7340415,Steven,2019-08-27 22:57:46+00:00,Steven,2019-08-27 22:57:46+00:00,"Publish

 - @now/build-utils@0.9.14-canary.0
 - @now/cgi@0.1.5-canary.0
 - now@16.1.3-canary.0
 - now-client@5.1.1-canary.0
 - @now/go@0.5.11-canary.0
 - @now/next@0.7.1-canary.0
 - @now/node-bridge@1.2.4-canary.0
 - @now/node@0.12.8-canary.0
 - @now/python@0.2.17-canary.0
 - @now/routing-utils@1.2.3-canary.0
 - @now/ruby@0.1.5-canary.0
 - @now/static-build@0.9.9-canary.0"
8119f4cad2eee47dee0eac15f4b7187798e26b21,Steven,2019-08-27 22:35:12+00:00,kodiakhq[bot],2019-08-27 22:35:12+00:00,Add GH Actions Publish Workflow (#2891)
e73b32e9cc747c778e924da10a7b0f37d6d29ba5,Steven,2019-08-27 17:55:43+00:00,kodiakhq[bot],2019-08-27 17:55:43+00:00,[tests] Ignore fixtures in GitHub Languages & fix yarn.lock (#2890)
45bd08e4e5f4846e7ba52e8b6c5c1aca33a166fd,Sophearak Tha,2019-08-27 15:40:39+00:00,kodiakhq[bot],2019-08-27 15:40:39+00:00,"[now-next] Use `debug()` from build-utils (#2881)

* [now-next] Use `debug()` from build-utils (#909)

* Use `debug()` from build-utils

* Revert back to warning output

* Remove unnecessary debug check"
4528243b5cdb9a229962dc8a561df430765f4816,Sophearak Tha,2019-08-27 15:25:31+00:00,kodiakhq[bot],2019-08-27 15:25:31+00:00,"[now-go] Use `debug()` from build-utils (#2885)

* [now-go] Use `debug()` from build-utils (#923)

* Use `debug()` from build-utils

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>

* Print errors

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>"
bd741cfbeb5985902ada46c0eaead50ccab2d4f6,Sophearak Tha,2019-08-27 15:05:13+00:00,kodiakhq[bot],2019-08-27 15:05:13+00:00,[now-ruby] Use `debug()` from build-utils (#2883)
b3b10f0fd7cfc1c05391ea46e551aa006e033d2e,Sophearak Tha,2019-08-27 14:36:04+00:00,Steven,2019-08-27 14:36:04+00:00,"[now-node] Use `debug()` from build-utils (#2880)

* Use `debug()` from build-utils

* Remove condition"
084c014fff45837ed1c754574c62926d26e3a7be,Sophearak Tha,2019-08-27 14:15:11+00:00,kodiakhq[bot],2019-08-27 14:15:11+00:00,[now-static-build] Use `debug()` from build-utils (#2884)
63614e530396af017935f4dcb55e49587a251e21,Andy,2019-08-27 13:29:23+00:00,kodiakhq[bot],2019-08-27 13:29:23+00:00,"[now-cli] Validate builds and routes for `now dev` (#2871)

* [now-cli] Validate builds and routes for `now dev`

* Remove @ts-ignore

* Sort the matches such that `utils` modules are compiled first

Because other packages may rely on them

* Prettier

* Add `reject: false` to tests

* Prettier

* Make validation async

* Fix syntax

* Fix type

* Linting

* Fix error check"
099d2c8195b7c331612ff083e5a416d6a2cfcab2,Sophearak Tha,2019-08-27 13:11:09+00:00,kodiakhq[bot],2019-08-27 13:11:09+00:00,[now-cli] Make sure to have event action as string (#2870)
ae813423d80492e1fc98904a66c8bfc0eb9d19c9,Sophearak Tha,2019-08-27 13:10:43+00:00,Steven,2019-08-27 13:10:43+00:00,"[now-python] Use `debug()` from build-utils (#2882)

* Use `debug()` from build-utils

* Apply suggestions from code review

Co-Authored-By: Steven <steven@ceriously.com>"
2a5f3f779e19dc5425329bf93e4b304228355dc4,Nathan Rajlich,2019-08-26 23:10:06+00:00,kodiakhq[bot],2019-08-26 23:10:06+00:00,"[now dev] Update `yarn` to v1.17.3 (#2780)

* [now dev] Update `yarn` to v1.17.3

* Wait longer for angular integration test

It keeps on failing

* Only run angular test on Node 10.x

* Revert ""Wait longer for angular integration test""

This reverts commit 19d70d4ba9aee49a5114b65f00ef97e2a88dc7ef."
89e1d83ad46b4023eddf4d28cf061ad8a36ede79,Andy,2019-08-26 22:10:31+00:00,kodiakhq[bot],2019-08-26 22:10:31+00:00,[now-static-build] Support ejected create-react-app (#2873)
ce23f9e2046b30456559f96e21102a3484ca52c0,Steven,2019-08-26 21:17:57+00:00,kodiakhq[bot],2019-08-26 21:17:57+00:00,"[tests] Fix unit tests & coverage step (#2876)

* Fix unit tests & coverage

* Add missing compile-templates step"
743eb216827c1953695eb0d011229a8a8102c984,Nathan Rajlich,2019-08-26 19:13:08+00:00,Steven,2019-08-26 19:13:08+00:00,"Update links to `now-builders` repo to `now` repo (#2862)

* Update links to `now-builders` repo to `now` repo

Also copies over the `.md` files from the now-builders' `errors`
directory so that the https://err.sh links work correctly.

Part of #2782.

* Update `err.sh` links that were formerly `now-cli`

* Empty commit for CI

* Make CircleCI `run.sh` script a bit better

Before it would fail with exit code 1 if there were no matching modified
files because of the `grep` call failing without any `packages` prefixed
files."
b9f5de2b7a8341d694b9b54ede0d1cc6d255a6b9,Steven,2019-08-26 17:49:47+00:00,kodiakhq[bot],2019-08-26 17:49:47+00:00,"[tests] Change run script from bash to node (#2874)

* [tests] Change run script from bash to node

* Fix loop for runScript

* Fix `all` script test

* Improve console.log() messages

* Use -l instead of -p

* Delete yarn.lock from now-python"
229a62d8b6aeb1f5b19de71d4e7c8733ba9e310d,Steven,2019-08-23 23:57:00+00:00,Nathan Rajlich,2019-08-24 00:00:31+00:00,"Create monorepo (#2812)

* Move now-cli to /packages/now-cli

* Fix .gitignore paths

* Add now-client

* Add lerna to top level

* Add scripts

* Update codeowners

* Fix `/now-cli/build.ts` script

* Fix circleci path to artifacts

* Use relative paths

* Fix path to scripts

* Add test-lint script

* Add missing return type

* Fix typo in test-lint

* Fix string match in shell scripts

* Fix path to hugo

* Add package node_modules

* Delete lock files in packages, use root yarn.lock

* Add missing b.js file

* Add test-integration-now-dev script

* Add missing test files

* Add missing integration test script

* Add missing test files

* Delete travis.yml

* Fix ts-jest in now-client

* Add support for Node 8 (ES2015 target)

* Add support for Node 8

* Add polyfill for Node 8

* Fix polyfill for Node 8

* Only run coverage for now-cli

* Add packages from now-builders

* Run integration tests for builders

* Add node_modules to cache

* Add root readme.md

* Move readme to top level

* Add yarn bootstrap

* Add bootstrap step

* Add dist to `persist_to_workspace`

* Fix 08-yarn-npm integration test

* Remove duplicate path

* Change stdio to inherit

* Add back store_artifacts

* testing - remove bootstrap step

* Add back now-build-utils

* Remove bootstrap step

* Fix test again

* Add console.log()

* Fix lint

* Use local ncc version

* Install go

* Revert changes to stdio and console.log()

* Add missing now-go test

* Add missing integration tests

* Add --runInBand flag

* Fix now-node-bridge persistence

* Add missing symlinks

* Add codeowners

* Consolidate into single run.sh function

* Run uniq

* Fix typo

* Change now-routing-utils to test-unit

* Special case test for node 8

* Add docs from builders

* Only run script for modified packages

* Add test-integration-once which only runs once

* Fix set intersection"
b0ad5238f7124c88f9bd09e313e59b644023b195,Steven,2019-08-23 23:57:00+00:00,kodiakhq[bot],2019-08-23 23:57:00+00:00,"Create monorepo (#2812)

* Move now-cli to /packages/now-cli

* Fix .gitignore paths

* Add now-client

* Add lerna to top level

* Add scripts

* Update codeowners

* Fix `/now-cli/build.ts` script

* Fix circleci path to artifacts

* Use relative paths

* Fix path to scripts

* Add test-lint script

* Add missing return type

* Fix typo in test-lint

* Fix string match in shell scripts

* Fix path to hugo

* Add package node_modules

* Delete lock files in packages, use root yarn.lock

* Add missing b.js file

* Add test-integration-now-dev script

* Add missing test files

* Add missing integration test script

* Add missing test files

* Delete travis.yml

* Fix ts-jest in now-client

* Add support for Node 8 (ES2015 target)

* Add support for Node 8

* Add polyfill for Node 8

* Fix polyfill for Node 8

* Only run coverage for now-cli

* Add packages from now-builders

* Run integration tests for builders

* Add node_modules to cache

* Add root readme.md

* Move readme to top level

* Add yarn bootstrap

* Add bootstrap step

* Add dist to `persist_to_workspace`

* Fix 08-yarn-npm integration test

* Remove duplicate path

* Change stdio to inherit

* Add back store_artifacts

* testing - remove bootstrap step

* Add back now-build-utils

* Remove bootstrap step

* Fix test again

* Add console.log()

* Fix lint

* Use local ncc version

* Install go

* Revert changes to stdio and console.log()

* Add missing now-go test

* Add missing integration tests

* Add --runInBand flag

* Fix now-node-bridge persistence

* Add missing symlinks

* Add codeowners

* Consolidate into single run.sh function

* Run uniq

* Fix typo

* Change now-routing-utils to test-unit

* Special case test for node 8

* Add docs from builders

* Only run script for modified packages

* Add test-integration-once which only runs once

* Fix set intersection"
774e0a0ebbf1c30fe151cb8fa85f34259ceb4b3f,Andy Bitz,2019-08-20 20:20:01+00:00,Andy Bitz,2019-08-20 20:20:01+00:00,16.1.2
ec7a258b37f450dbc7c397495383202cc72ac237,Andy,2019-08-20 16:56:31+00:00,Andy Bitz,2019-08-20 17:48:33+00:00," Use short-form for the update command (#2801)

* Use short-form for the update command

* Adjust test"
52a6e60f786a5e9c021fcd2ed2e6bb483e3e2021,Andy Bitz,2019-08-20 16:58:27+00:00,Andy Bitz,2019-08-20 16:58:27+00:00,16.1.2-canary.7
a7cb747130fb44f29d1934947d32d17aedd20820,Andy,2019-08-20 16:56:31+00:00,GitHub,2019-08-20 16:56:31+00:00," Use short-form for the update command (#2801)

* Use short-form for the update command

* Adjust test"
5fbe1364856c54944720dc6e261010c79c342bd1,Andy,2019-08-20 16:13:43+00:00,Andy Bitz,2019-08-20 16:14:11+00:00," [now deploy] Fix builds output for failed deployments (#2799)

* [now deploy] Fix builds output for failed deployments

* Add test"
918d60576f1b4e58c1b1d0e1f0bbca78642cd182,Andy,2019-08-20 16:13:43+00:00,GitHub,2019-08-20 16:13:43+00:00," [now deploy] Fix builds output for failed deployments (#2799)

* [now deploy] Fix builds output for failed deployments

* Add test"
e6c56a69ce1afa3645902194a105202721302a9c,Andy,2019-08-20 15:29:43+00:00,Andy Bitz,2019-08-20 16:01:44+00:00,"[now deploy] Fix `--prod` flag and adjust message for `--target` (#2797)

* [now deploy] Fix `--prod` flag and adjust message for `--target`

* Fix tests

* Fix fetch

* Change api version

* Fix url

* Fix test"
62111977fd53b033d45d98c9eb5fa4d3181d0f12,Andy,2019-08-20 15:29:43+00:00,GitHub,2019-08-20 15:29:43+00:00,"[now deploy] Fix `--prod` flag and adjust message for `--target` (#2797)

* [now deploy] Fix `--prod` flag and adjust message for `--target`

* Fix tests

* Fix fetch

* Change api version

* Fix url

* Fix test"
d93c76d5e6ae78f22f080dc6b58cef001d9aa0ec,Andy,2019-08-19 22:12:14+00:00,Andy Bitz,2019-08-20 08:02:41+00:00,"[now deploy] Added `--prod` flag (#2789)

* [now deploy] Add `--production` and `--staging` flag

* Change message

* Fix tests

* Fix test

* Add another test

* Fix production test

* Update message and add `--prod`

* Update help

* Remove `--staging`

* Use only `--prod`

* Add test

* Add aliasError output

* Fix output"
e0814d6ed5776a4f57d147c452b156758acba828,Andy,2019-08-18 23:21:49+00:00,Andy Bitz,2019-08-20 08:02:32+00:00,Bump `@now/build-utils` to 0.9.13 (#2784)
5e6a241baaaeeddb9a4dd07d1f2c77588003dfbf,Nathan Rajlich,2019-08-16 02:43:30+00:00,Andy Bitz,2019-08-20 08:02:23+00:00,"[now domain] Handle thrown API errors when purchasing domain fails (#2779)

Fixes #2759."
8cbebc936e1a5fe64fc6da26336712895e761ece,Nathan Rajlich,2019-08-16 02:12:59+00:00,Andy Bitz,2019-08-20 08:02:16+00:00,"Remove a couple unused `import` (#2777)

Fixes lint"
90f7f8620c30123123932d2b44d466231a33deae,Nathan Rajlich,2019-08-15 23:19:52+00:00,Andy Bitz,2019-08-20 08:02:04+00:00,"Sleep 2 seconds after the `now rm` integration test (#2776)

Sometimes it fails with a stale 200 status code.
This should make it less flaky."
59bbe7e0c936fcab87f74a80e7203356cecc3f1d,Nathan Rajlich,2019-08-15 07:39:12+00:00,Andy Bitz,2019-08-20 08:01:57+00:00,"Display rate limit errors message from API response (#2767)

* Display rate limit errors message from API response

Closes #2738.

* Update src/util/handle-error.ts

Co-Authored-By: Steven <steven@ceriously.com>"
151b66a3f932e0c01c93dd80ab9413c7d1ec88aa,Naoyuki Kanezawa,2019-08-15 02:23:01+00:00,Andy Bitz,2019-08-20 08:01:48+00:00,add misssing defaultArgs (#2770)
d9f3367a779094edcbded25992bf26b09e43ba4c,Nathan Rajlich,2019-08-15 01:17:38+00:00,Andy Bitz,2019-08-20 08:01:42+00:00,Remove leftover `console.log()` in integration tests (#2768)
f3f68806323aa8d4176fbbbc049880336fca03f6,Nathan Rajlich,2019-08-15 00:41:53+00:00,Andy Bitz,2019-08-20 08:01:35+00:00,"[now rm] Use the proper `client` so that the process does not hang (#2762)

* [now rm] Use the proper `client` so that the process does not hang

The crux of this fix is that `getDeploymentByIdOrHost()` and
`getProjectByIdOrName()` were improperly being passed the `Now`
instance instead of the expected `Client` instance, and for some
reason that would cause the process to hang until the underlying
`http.Agent` timed out its connection to the API server.

Also ran `prettier` on this file.

Fixes #2760.

* Remove `console.error()`

* Add integration test

* Fix syntax error

* Add `now rm` 404 integration test

* Remove `.only`"
59335cdd814008b374af2d5fb4252bc329e06043,Nathan Rajlich,2019-08-14 17:07:55+00:00,Andy Bitz,2019-08-20 08:01:24+00:00,"[now scale] Fix default `max: auto` value in `--help` output (#2763)

Fixes #2368.
Also related to zeit/docs#838."
a93c09a794340c333c9ea592dddc961d7cb340c4,Nathan Rajlich,2019-08-13 23:47:48+00:00,Andy Bitz,2019-08-20 08:01:16+00:00,"Fix ""occured"" -> ""occurred"" typos (#2761)

See: https://tinyurl.com/occured"
b60768a8b3dfccb1aed165cc8ec65c3a1a6399a2,Andy,2019-08-13 19:30:48+00:00,Andy Bitz,2019-08-20 08:01:05+00:00,"[now dev] Use canary builders for the canary version (#2753)

* Use canary builders for the canary version

* Use the `getDistTag` function instead

* Fix function call

* Add tests

* Remove unused code

* Remove logging"
da96ead170c4bd8afa6e40d12ef1235c5f7bdfdb,Nathan Rajlich,2019-08-13 17:40:48+00:00,Andy Bitz,2019-08-20 08:00:55+00:00,"Use the correct URL in the `auth.json` and `config.json` files (#2755)

Fixes #2754."
45f7dc126cfd6825a22a5616154c32ef03d73de2,Nathan Rajlich,2019-08-13 02:37:03+00:00,Andy Bitz,2019-08-20 08:00:46+00:00,"[now projects] Add subcommand alias for `now project` (#2750)

Fixes #2162."
7d41511564c237d9120989ffeb92cd6c1c30ca82,Naoyuki Kanezawa,2019-08-13 02:05:45+00:00,Andy Bitz,2019-08-20 08:00:38+00:00,remove unused HTTP/HTTPS Agent (#2749)
a4e184007da303479b13178ff0deaca8a95d8c66,Naoyuki Kanezawa,2019-08-13 00:44:45+00:00,Andy Bitz,2019-08-20 08:00:30+00:00,support to set api host for development (#2748)
2055eb32b834721ae48dea0d65e2acbe86af7967,Nathan Rajlich,2019-08-10 12:15:36+00:00,Andy Bitz,2019-08-20 08:00:21+00:00,"Update `clipboardy` to v2.1.0 (#2737)

Fixes #564.

Related to #1924."
3ae3cbf34b541cb67835fde78a8ac500351f6018,Andy,2019-08-09 20:35:40+00:00,Andy Bitz,2019-08-20 08:00:14+00:00,Bump `@now/build-utils` to 0.9.12 (#2736)
56d4a75d392637c276d374409d717545c8e1b839,Nathan Rajlich,2019-08-09 18:48:34+00:00,Andy Bitz,2019-08-20 08:00:03+00:00,"[now dev] Remove leftover `console.error()` call (#2735)

Accidentally added in #2720."
c86a9217c49805e75e03e5901a5ec059a609ab7e,Leo Lamprecht,2019-08-09 18:16:21+00:00,Andy Bitz,2019-08-20 07:59:54+00:00,"[now dev] Add `--listen` / `-l` flag, deprecate `--port` / `-p` (#2720)

* [now dev] Add `--bind` / `-b` flag

This changes the default network interface that `now dev` binds to, in
order to prevent operating system firewalls from showing a confirmation
prompt in order to run.

Fixes #2704.

* Change to `--listen`

* Default port 3000

* Fix unit

* Fix `--port`

* Use `-l` for integration tests

* Add unit tests"
dc7c6166e333f21afc9d8e9fcd9925e3eb94da9b,Arunoda Susiripala,2019-08-09 14:07:39+00:00,Andy Bitz,2019-08-20 07:59:47+00:00,Update index.js (#2733)
25facf49348156a2fe5143e9a0cbba7d4b49d3f9,Leo Lamprecht,2019-08-08 23:05:44+00:00,Andy Bitz,2019-08-20 07:59:39+00:00,"[now update] Show correct global or local install command (#2719)

* [now update] Show correct global or local install command

* Remove `canRead` check

* Change bin to lib since the actual script will be there

* Use realpath

* Remove console.error"
7f0ce264729639834de2afd44632c994e2ef3a6a,Nathan Rajlich,2019-08-08 22:26:02+00:00,Andy Bitz,2019-08-20 07:59:29+00:00,"Update `serve-handler` to v6.1.1 (#2731)

* Update `serve-handler` to v6.1.1

Fixes #2697.

* Fix unit test"
031067869af4f8477e3cb885d9a031d05ee5034d,Nathan Rajlich,2019-08-08 20:51:23+00:00,Andy Bitz,2019-08-20 07:59:16+00:00,"Print HTTP status code upon API JSON parse errors (#2727)

Fixes #2681."
2e30bbef7e91c951aa8ecdd0d24fd5de522cb76d,Nathan Rajlich,2019-08-08 20:15:29+00:00,Andy Bitz,2019-08-20 07:58:47+00:00,"Add `accept: application/json` header to API HTTP requests (#2726)

All of the APIs already support JSON by default, so this is a no-op for
our APIs, however the proxy layer _does_ respect the `Accept` header to
send JSON error responses, which is useful for more gracefully handling
outage responses (previously they were being returned as plain text,
which Now CLI blindfully tries to parse as JSON and fails with an
unhelpful error message).

Related to #2681."
13d04a069e5a457a5f249318d8c6b6f75d0ebac5,Steven,2019-08-08 01:41:51+00:00,Andy Bitz,2019-08-20 07:58:40+00:00,Add automerge config (#2729)
26b3d3610122ec473a212eef1c958525c2915b29,Nathan Rajlich,2019-08-07 19:17:55+00:00,Andy Bitz,2019-08-20 07:58:32+00:00,"[CircleCI] Fix `test/dev-server.unit.js` being run on CI (#2725)

For some reason, `ava` was silently skipping these tests on CI because
the process was crashing. According to sindre, this is a bug in `ava`,
but with some digging I was able to determine that the root cause of the
crash was that the `builders.tar.gz` file from the `assets` dir was not
being persisted from the previous `build` job in CI.

With the `assets` dir being persisted I now see the `dev-server` unit
tests being executed once again as expected.

Related to: https://twitter.com/sindresorhus/status/1157614353375551493"
3db861fcc488bdf8b77a58a0b80d09a736cf298c,wtgtybhertgeghgtwtg,2019-08-07 18:15:50+00:00,Andy Bitz,2019-08-20 07:58:24+00:00,Remove vestigial `mkdirp` packages (#2724)
00c05b95e4eea480bbb837f9aaed1e96ac4821d8,Andy Bitz,2019-08-19 22:12:56+00:00,Andy Bitz,2019-08-19 22:12:56+00:00,16.1.2-canary.6
9ee83b858c45b0b316a828fb17a5edc5478c8e38,Andy,2019-08-19 22:12:14+00:00,GitHub,2019-08-19 22:12:14+00:00,"[now deploy] Added `--prod` flag (#2789)

* [now deploy] Add `--production` and `--staging` flag

* Change message

* Fix tests

* Fix test

* Add another test

* Fix production test

* Update message and add `--prod`

* Update help

* Remove `--staging`

* Use only `--prod`

* Add test

* Add aliasError output

* Fix output"
e4a181321a36cdbb8a5d0b121518b3d6267f009b,Andy Bitz,2019-08-19 09:34:42+00:00,Andy Bitz,2019-08-19 09:34:42+00:00,"Revert ""Add more alias support (#2747)""

This reverts commit 957fe9084a4b490ff7b1291cdc614afa37f6796b."
dd6f6aa418561079eb8b4e5fd20db8b0c772d9af,Andy Bitz,2019-08-19 07:55:17+00:00,Andy Bitz,2019-08-19 07:55:17+00:00,16.1.2-canary.5
b37bfbc1ed2989f05f90dcd025b6496da29a8562,Andy,2019-08-18 23:21:49+00:00,GitHub,2019-08-18 23:21:49+00:00,Bump `@now/build-utils` to 0.9.13 (#2784)
dd06c4c63da8c2d883e85f23803ae0b63f14c6f2,Leo Lamprecht,2019-08-18 12:01:43+00:00,Leo Lamprecht,2019-08-18 12:01:43+00:00,16.1.2-canary.4
a6174cde03e8c6f6756ac7aaa3b2ceca8ead119c,Nathan Rajlich,2019-08-16 02:43:30+00:00,kodiakhq[bot],2019-08-16 02:43:30+00:00,"[now domain] Handle thrown API errors when purchasing domain fails (#2779)

Fixes #2759."
c85ab973212f102cb989134a2b92a5974754f758,Nathan Rajlich,2019-08-16 02:12:59+00:00,GitHub,2019-08-16 02:12:59+00:00,"Remove a couple unused `import` (#2777)

Fixes lint"
957fe9084a4b490ff7b1291cdc614afa37f6796b,Naoyuki Kanezawa,2019-08-16 00:48:29+00:00,kodiakhq[bot],2019-08-16 00:48:29+00:00,"Add more alias support (#2747)

* add more alias support

* Update src/util/domains/setup-domain.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Update src/util/domains/setup-domain.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* add tests"
70f72e5bb8fe9bedd37ff01ea8df22a14381cc26,Nathan Rajlich,2019-08-15 23:19:52+00:00,GitHub,2019-08-15 23:19:52+00:00,"Sleep 2 seconds after the `now rm` integration test (#2776)

Sometimes it fails with a stale 200 status code.
This should make it less flaky."
4feb96109129bd460cf8be4a05f766d20d11a911,Nathan Rajlich,2019-08-15 18:59:08+00:00,Nathan Rajlich,2019-08-15 18:59:08+00:00,16.1.2-canary.3
6ddc2529782269c3d3b53f71252218f20b2e7f6a,Nathan Rajlich,2019-08-15 07:39:12+00:00,kodiakhq[bot],2019-08-15 07:39:12+00:00,"Display rate limit errors message from API response (#2767)

* Display rate limit errors message from API response

Closes #2738.

* Update src/util/handle-error.ts

Co-Authored-By: Steven <steven@ceriously.com>"
5eca7cf5f7c7f6ad848b00d058c68832ce03d727,Naoyuki Kanezawa,2019-08-15 02:23:01+00:00,GitHub,2019-08-15 02:23:01+00:00,add misssing defaultArgs (#2770)
76486246c5c7563cfff424c005fb66c20a63bf8b,Nathan Rajlich,2019-08-15 01:17:38+00:00,kodiakhq[bot],2019-08-15 01:17:38+00:00,Remove leftover `console.log()` in integration tests (#2768)
740a7c88866f99f7007b2e5adbac4c296ae8aad0,Nathan Rajlich,2019-08-15 00:41:53+00:00,kodiakhq[bot],2019-08-15 00:41:53+00:00,"[now rm] Use the proper `client` so that the process does not hang (#2762)

* [now rm] Use the proper `client` so that the process does not hang

The crux of this fix is that `getDeploymentByIdOrHost()` and
`getProjectByIdOrName()` were improperly being passed the `Now`
instance instead of the expected `Client` instance, and for some
reason that would cause the process to hang until the underlying
`http.Agent` timed out its connection to the API server.

Also ran `prettier` on this file.

Fixes #2760.

* Remove `console.error()`

* Add integration test

* Fix syntax error

* Add `now rm` 404 integration test

* Remove `.only`"
40b69b49247066ae302f5b2d32cff52d98ee9047,Nathan Rajlich,2019-08-14 17:07:55+00:00,GitHub,2019-08-14 17:07:55+00:00,"[now scale] Fix default `max: auto` value in `--help` output (#2763)

Fixes #2368.
Also related to zeit/docs#838."
c5ef4b1dc585b7cb6bfd74135edb593961bd9d00,Nathan Rajlich,2019-08-13 23:47:48+00:00,kodiakhq[bot],2019-08-13 23:47:48+00:00,"Fix ""occured"" -> ""occurred"" typos (#2761)

See: https://tinyurl.com/occured"
ef793bf7e9934fcccab9c9261d8859e942713e62,Andy,2019-08-13 19:30:48+00:00,kodiakhq[bot],2019-08-13 19:30:48+00:00,"[now dev] Use canary builders for the canary version (#2753)

* Use canary builders for the canary version

* Use the `getDistTag` function instead

* Fix function call

* Add tests

* Remove unused code

* Remove logging"
2be1dd4fcb6447e9b7039b4e4dcc9622bf42a634,Nathan Rajlich,2019-08-13 17:40:48+00:00,kodiakhq[bot],2019-08-13 17:40:48+00:00,"Use the correct URL in the `auth.json` and `config.json` files (#2755)

Fixes #2754."
a734eb79d9bdd7b482b549d219e6f56c8571c40f,Nathan Rajlich,2019-08-13 02:37:03+00:00,kodiakhq[bot],2019-08-13 02:37:03+00:00,"[now projects] Add subcommand alias for `now project` (#2750)

Fixes #2162."
24dc2a36de09b1b54a76fc02893d1f2f327d0330,Naoyuki Kanezawa,2019-08-13 02:05:45+00:00,GitHub,2019-08-13 02:05:45+00:00,remove unused HTTP/HTTPS Agent (#2749)
12881c1b576daf6941ab94f8dd40229745d64581,Naoyuki Kanezawa,2019-08-13 00:44:45+00:00,GitHub,2019-08-13 00:44:45+00:00,support to set api host for development (#2748)
c66188a6f296171b8a9ed8a50a846a5ead40d7f2,Nathan Rajlich,2019-08-10 12:15:36+00:00,kodiakhq[bot],2019-08-10 12:15:36+00:00,"Update `clipboardy` to v2.1.0 (#2737)

Fixes #564.

Related to #1924."
61457b532ac008cd96df41cb6fc38f2e78463d2a,Andy,2019-08-09 20:35:40+00:00,kodiakhq[bot],2019-08-09 20:35:40+00:00,Bump `@now/build-utils` to 0.9.12 (#2736)
d2ff3749ca733213e67ca168c155dea97024c129,Nathan Rajlich,2019-08-09 18:48:34+00:00,kodiakhq[bot],2019-08-09 18:48:34+00:00,"[now dev] Remove leftover `console.error()` call (#2735)

Accidentally added in #2720."
38bc7cc6d65c7af1f538f0d86ae3ed97b0af42f8,Leo Lamprecht,2019-08-09 18:16:21+00:00,Nathan Rajlich,2019-08-09 18:16:21+00:00,"[now dev] Add `--listen` / `-l` flag, deprecate `--port` / `-p` (#2720)

* [now dev] Add `--bind` / `-b` flag

This changes the default network interface that `now dev` binds to, in
order to prevent operating system firewalls from showing a confirmation
prompt in order to run.

Fixes #2704.

* Change to `--listen`

* Default port 3000

* Fix unit

* Fix `--port`

* Use `-l` for integration tests

* Add unit tests"
413fdd7c39949805ec8cc40d1308d9d6b6c459a7,Arunoda Susiripala,2019-08-09 14:07:39+00:00,Andy,2019-08-09 14:07:39+00:00,Update index.js (#2733)
f48bb493b0d2b95b6cc33245d9c592fab4f92735,Leo Lamprecht,2019-08-08 23:05:44+00:00,Andy,2019-08-08 23:05:44+00:00,"[now update] Show correct global or local install command (#2719)

* [now update] Show correct global or local install command

* Remove `canRead` check

* Change bin to lib since the actual script will be there

* Use realpath

* Remove console.error"
962c5db9fe85c47aca450ded26bbc4ce4d44852c,Nathan Rajlich,2019-08-08 22:26:02+00:00,kodiakhq[bot],2019-08-08 22:26:02+00:00,"Update `serve-handler` to v6.1.1 (#2731)

* Update `serve-handler` to v6.1.1

Fixes #2697.

* Fix unit test"
9e961b479c1ba689c7a1c532544d3c0b6cc07c7e,Nathan Rajlich,2019-08-08 20:51:23+00:00,kodiakhq[bot],2019-08-08 20:51:23+00:00,"Print HTTP status code upon API JSON parse errors (#2727)

Fixes #2681."
718100fafc5cadef981916c999fc2a0893a4c0d6,Nathan Rajlich,2019-08-08 20:15:29+00:00,kodiakhq[bot],2019-08-08 20:15:29+00:00,"Add `accept: application/json` header to API HTTP requests (#2726)

All of the APIs already support JSON by default, so this is a no-op for
our APIs, however the proxy layer _does_ respect the `Accept` header to
send JSON error responses, which is useful for more gracefully handling
outage responses (previously they were being returned as plain text,
which Now CLI blindfully tries to parse as JSON and fails with an
unhelpful error message).

Related to #2681."
2b38f545d017f66e318d9db1ad6c04e1527095a0,Steven,2019-08-08 01:41:51+00:00,GitHub,2019-08-08 01:41:51+00:00,Add automerge config (#2729)
55b132711944c60965ec46fa186486dc0a750816,Nathan Rajlich,2019-08-07 19:17:55+00:00,GitHub,2019-08-07 19:17:55+00:00,"[CircleCI] Fix `test/dev-server.unit.js` being run on CI (#2725)

For some reason, `ava` was silently skipping these tests on CI because
the process was crashing. According to sindre, this is a bug in `ava`,
but with some digging I was able to determine that the root cause of the
crash was that the `builders.tar.gz` file from the `assets` dir was not
being persisted from the previous `build` job in CI.

With the `assets` dir being persisted I now see the `dev-server` unit
tests being executed once again as expected.

Related to: https://twitter.com/sindresorhus/status/1157614353375551493"
a75ec505ada415e634f64e088be424243d52ecf5,wtgtybhertgeghgtwtg,2019-08-07 18:15:50+00:00,Nathan Rajlich,2019-08-07 18:15:50+00:00,Remove vestigial `mkdirp` packages (#2724)
df580d48735cade001ad6c91fff83259e97399cc,Andy Bitz,2019-08-07 15:33:41+00:00,Andy Bitz,2019-08-07 15:33:41+00:00,16.1.1
78567ff89b80882a306362355d781098566bc55c,Andy,2019-08-07 15:31:02+00:00,Andy Bitz,2019-08-07 15:33:24+00:00,"[now deploy] Use the project when checking the platform version (#2722)

* [now deploy] Use the project when checking the platform version

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Adjust message

* Fallback for local config"
36b1e129b4c45c55fc566d21c2f142a57a9a0ab5,Andy Bitz,2019-08-07 15:32:01+00:00,Andy Bitz,2019-08-07 15:32:01+00:00,16.1.2-canary.2
331b6e0a239b476d2589ce2eb912c329f067bede,Andy,2019-08-07 15:31:02+00:00,GitHub,2019-08-07 15:31:02+00:00,"[now deploy] Use the project when checking the platform version (#2722)

* [now deploy] Use the project when checking the platform version

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Adjust message

* Fallback for local config"
605a9f68e7cc62226d67eb6386acda1939f2932d,Andy,2019-08-07 12:30:30+00:00,Andy Bitz,2019-08-07 12:37:28+00:00,Fix colored text and remove version warning (#2721)
fc72ecb223dd9ec8f65e944f2adad2929549a338,Andy Bitz,2019-08-07 12:32:04+00:00,Andy Bitz,2019-08-07 12:32:04+00:00,16.1.2-canary.1
ca51cbcc6bc0e779998b1dfa3ffca27fcb08244d,Andy,2019-08-07 12:30:30+00:00,GitHub,2019-08-07 12:30:30+00:00,Fix colored text and remove version warning (#2721)
4e4bc981942577d8cbf669e08f8837bb2896d7d4,Andy Bitz,2019-08-07 10:41:04+00:00,Andy Bitz,2019-08-07 10:41:04+00:00,16.1.0
3efa988f5e1b3703ab72204820a9f68086ff7348,Andy,2019-08-06 18:09:27+00:00,Andy Bitz,2019-08-07 10:25:09+00:00,[now dev] Bump `@now/build-utils` to 0.9.10 (#2715)
d3366403fef427ea5e5816db71cb35facab65599,Andy,2019-08-06 10:50:46+00:00,Andy Bitz,2019-08-07 10:24:43+00:00,"Bump `@now/build-utils` to 0.9.9 (#2713)

* Bump `@now/build-utils` to 0.9.9

* Log output

* Only log on error

* Fix tests"
5860645cdbf71444f9d2825d93fc8220399b0da3,Nathan Rajlich,2019-08-06 03:14:42+00:00,Andy Bitz,2019-08-07 10:24:35+00:00,"Require Node.js `>= 8.11` in ""engines"" (#2714)

Closes #2711."
3ff20049297ca3b86a1f9f97ad4bfc7603cec714,Nathan Rajlich,2019-08-06 02:54:19+00:00,Andy Bitz,2019-08-07 10:24:26+00:00,"[now dev] Print warning upon empty `cwd` directory (#2702)

* [now dev] Render warning upon empty `cwd` directory

The warning matches the one that `now deploy` prints, and only
prints the warning once (rather then upon every HTTP request).

Closes #2696.

* Fix eslint warning

* Add ""pipe""

* Debugging

* Fix integration test

* Debugging

* Add `--verbose` to ""test-integration-now-dev"" script

* Ignore `yarn.lock` and `node_modules` in test dir

* Ignore `hugo` binary

* Ignore `public` dir in hugo test fixture

* Add `.gitignore` to `empty` test fixture

* Revert ""Debugging""

This reverts commit 27c6d2e06fe7eff12077a0e88915cf46b39b00ea.

* Ignore `public` / `dist` dirs in fixtures"
9a38260a2bb52e1cb5938c2ca8ffdba706a03d1a,Nathan Rajlich,2019-08-06 01:11:43+00:00,Andy Bitz,2019-08-07 10:24:18+00:00,"Add `unhandledRejection` and `uncaughtException` handlers to scripts (#2709)

This is to prevent false-positives like this from occurring,
and fixes the warning from `node`:

```
$ ts-node ./scripts/build.ts
Creating builders tarball with: @now/build-utils@canary, @now/go@canary, @now/next@canary, @now/node@canary, @now/php@canary, @now/static-build@canary
(node:156) UnhandledPromiseRejectionWarning: Error: ENOENT: no such file or directory, open '/home/circleci/repo/assets/builders.tar.gz'
    at ReadStream.evt.error.err (/home/circleci/repo/node_modules/promisepipe/index.js:30:23)
    at ReadStream.emit (events.js:198:13)
    at ReadStream.EventEmitter.emit (domain.js:448:20)
    at /home/circleci/repo/node_modules/graceful-fs/graceful-fs.js:207:14
    at /home/circleci/repo/node_modules/graceful-fs/graceful-fs.js:258:16
    at FSReqWrap.args [as oncomplete] (fs.js:140:20)
(node:156) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)
(node:156) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
```"
96fca45a41e8a7f1d29eb16aa6b5de10c0385ad8,Nathan Rajlich,2019-08-05 22:50:04+00:00,Andy Bitz,2019-08-07 10:24:11+00:00,"Fix `format-modified` script (#2708)

Before it was only updating _non-staged_ files.

Now, it updates _all_ modified files, staged or not."
cb106185cb9f40416c9bb16c94af3022d3af4916,Nathan Rajlich,2019-08-05 21:32:39+00:00,Andy Bitz,2019-08-07 10:24:01+00:00,"Upgrade `ava` to v2.2.0 (#2703)

See: https://twitter.com/sindresorhus/status/1157614353375551493"
cd6d98b314c79a9cbc2e1b0a908a1d7c4ccd1638,Andy,2019-08-07 09:55:44+00:00,Andy Bitz,2019-08-07 10:11:32+00:00,"[now deploy] Change the warning messages when the platform version is changed (#2717)

* [now deploy] Change warning message

* Change text

* Add link to message

* Change text"
0aa8fa09cb7a39240f65ed8fedf3e3f2c087caa0,Andy Bitz,2019-08-07 10:10:59+00:00,Andy Bitz,2019-08-07 10:10:59+00:00,"[now deploy] Check `server.js` file when detecting the platform version (#2664)

This reverts commit 3e5ddad5ca340524c2880c5f6b40663cc289a8ce."
d71f74fa5407557f8db9580c303556109f37cf7a,Andy Bitz,2019-08-07 10:10:53+00:00,Andy Bitz,2019-08-07 10:10:53+00:00,"[now deploy] Consider `--npm` and `--docker` for platform detection (#2640)

This reverts commit 79e0792a57753b3ce1ca5729705e84da9b6c87e8."
47ce713a864423f354d38f3677c4a61e4dd534b4,Andy Bitz,2019-08-07 10:10:42+00:00,Andy Bitz,2019-08-07 10:10:42+00:00,"[now deploy] Determine platform version through `Dockerfile` and `package.json` (#2633)

This reverts commit 8da0534d4f1c62bd35631b9d073e1ee3d8b74bfe."
3c5b94855ad0d297f71de714295a646edcb9fa9e,Andy Bitz,2019-08-07 10:08:43+00:00,Andy Bitz,2019-08-07 10:08:43+00:00,"[now deploy] Check if builds are ready right away (#2699)

This reverts commit 92cff5c947d073c1df8c22c000c1bf872226ebad."
6ce8acc4db6b7436d81e7aedc577534bc0f8f5ef,Andy Bitz,2019-08-07 09:57:55+00:00,Andy Bitz,2019-08-07 09:57:55+00:00,16.0.1-canary.3
a9edec161960d6e88a5d45135f6545c857ff5b2c,Andy,2019-08-07 09:55:44+00:00,GitHub,2019-08-07 09:55:44+00:00,"[now deploy] Change the warning messages when the platform version is changed (#2717)

* [now deploy] Change warning message

* Change text

* Add link to message

* Change text"
8638d17d87b425c845c451c03f61dee1db6077a7,Leo Lamprecht,2019-08-07 08:12:50+00:00,Leo Lamprecht,2019-08-07 08:12:50+00:00,"Revert ""[now dev] Add `--bind` / `-b` flag (#2705)""

This reverts commit efe0ca57f0a416acc94e916db99822e9909ba659."
db6ae2998ba9a40616e7e552ff852011593aadf0,Leo Lamprecht,2019-08-07 08:12:32+00:00,Leo Lamprecht,2019-08-07 08:12:32+00:00,"Revert ""[now update] Show correct global or local install command (#2716)""

This reverts commit d667a83af56ba9931e41424f6a00a387f25b7949."
d667a83af56ba9931e41424f6a00a387f25b7949,Andy,2019-08-06 20:59:07+00:00,GitHub,2019-08-06 20:59:07+00:00,"[now update] Show correct global or local install command (#2716)

* [now update] Show correct global or local install command

* Remove `canRead` check

* Change bin to lib since the actual script will be there

* Use realpath

* Remove console.error"
f2a1fb50daa7462b8c61b823913166105c83fede,Andy Bitz,2019-08-06 18:10:48+00:00,Andy Bitz,2019-08-06 18:10:48+00:00,16.0.1-canary.2
eb356a5d3d785afc4d50b0963fe0b65d86a4a527,Andy,2019-08-06 18:09:27+00:00,GitHub,2019-08-06 18:09:27+00:00,[now dev] Bump `@now/build-utils` to 0.9.10 (#2715)
efe0ca57f0a416acc94e916db99822e9909ba659,Nathan Rajlich,2019-08-06 12:55:04+00:00,Andy,2019-08-06 12:55:04+00:00,"[now dev] Add `--bind` / `-b` flag (#2705)

This changes the default network interface that `now dev` binds to, in
order to prevent operating system firewalls from showing a confirmation
prompt in order to run.

Fixes #2704."
409b7099be6f2e49f93fb70b976bc075a1e0f336,Andy Bitz,2019-08-06 10:51:51+00:00,Andy Bitz,2019-08-06 10:51:51+00:00,16.0.1-canary.1
e6653992a7d866c2d6a12a1fccaf6eb793fed6ec,Andy,2019-08-06 10:50:46+00:00,GitHub,2019-08-06 10:50:46+00:00,"Bump `@now/build-utils` to 0.9.9 (#2713)

* Bump `@now/build-utils` to 0.9.9

* Log output

* Only log on error

* Fix tests"
c133e81f6ed5fac55c5db9100e2941f4a3fd09cf,Nathan Rajlich,2019-08-06 03:14:42+00:00,GitHub,2019-08-06 03:14:42+00:00,"Require Node.js `>= 8.11` in ""engines"" (#2714)

Closes #2711."
28bfcb4c5837824caba314e35c816139bca2fa75,Nathan Rajlich,2019-08-06 02:54:19+00:00,GitHub,2019-08-06 02:54:19+00:00,"[now dev] Print warning upon empty `cwd` directory (#2702)

* [now dev] Render warning upon empty `cwd` directory

The warning matches the one that `now deploy` prints, and only
prints the warning once (rather then upon every HTTP request).

Closes #2696.

* Fix eslint warning

* Add ""pipe""

* Debugging

* Fix integration test

* Debugging

* Add `--verbose` to ""test-integration-now-dev"" script

* Ignore `yarn.lock` and `node_modules` in test dir

* Ignore `hugo` binary

* Ignore `public` dir in hugo test fixture

* Add `.gitignore` to `empty` test fixture

* Revert ""Debugging""

This reverts commit 27c6d2e06fe7eff12077a0e88915cf46b39b00ea.

* Ignore `public` / `dist` dirs in fixtures"
5cf8f8a70ae45ca5c780c9236f71e7eadcbbd689,Nathan Rajlich,2019-08-06 01:11:43+00:00,GitHub,2019-08-06 01:11:43+00:00,"Add `unhandledRejection` and `uncaughtException` handlers to scripts (#2709)

This is to prevent false-positives like this from occurring,
and fixes the warning from `node`:

```
$ ts-node ./scripts/build.ts
Creating builders tarball with: @now/build-utils@canary, @now/go@canary, @now/next@canary, @now/node@canary, @now/php@canary, @now/static-build@canary
(node:156) UnhandledPromiseRejectionWarning: Error: ENOENT: no such file or directory, open '/home/circleci/repo/assets/builders.tar.gz'
    at ReadStream.evt.error.err (/home/circleci/repo/node_modules/promisepipe/index.js:30:23)
    at ReadStream.emit (events.js:198:13)
    at ReadStream.EventEmitter.emit (domain.js:448:20)
    at /home/circleci/repo/node_modules/graceful-fs/graceful-fs.js:207:14
    at /home/circleci/repo/node_modules/graceful-fs/graceful-fs.js:258:16
    at FSReqWrap.args [as oncomplete] (fs.js:140:20)
(node:156) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)
(node:156) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
```"
b31ab033c2a71c7cf68ae7a553e6a70834e4d157,Nathan Rajlich,2019-08-05 22:50:04+00:00,GitHub,2019-08-05 22:50:04+00:00,"Fix `format-modified` script (#2708)

Before it was only updating _non-staged_ files.

Now, it updates _all_ modified files, staged or not."
24a3b99ee39a0312f03ee36ef7947985a70ca34e,Nathan Rajlich,2019-08-05 21:32:39+00:00,GitHub,2019-08-05 21:32:39+00:00,"Upgrade `ava` to v2.2.0 (#2703)

See: https://twitter.com/sindresorhus/status/1157614353375551493"
0fb6c77decd6836035e601c2423229dda46a323f,Andy Bitz,2019-08-05 17:58:37+00:00,Andy Bitz,2019-08-05 17:58:37+00:00,16.0.0
8da0534d4f1c62bd35631b9d073e1ee3d8b74bfe,Andy Bitz,2019-08-05 16:49:51+00:00,Andy Bitz,2019-08-05 16:49:51+00:00,"Revert ""[now deploy] Determine platform version through `Dockerfile` and `package.json` (#2633)""

This reverts commit 9244e43ccfd9a2816d5e6a2e056c2baf8c3f7599."
79e0792a57753b3ce1ca5729705e84da9b6c87e8,Andy Bitz,2019-08-05 16:47:25+00:00,Andy Bitz,2019-08-05 16:49:12+00:00,"Revert ""[now deploy] Consider `--npm` and `--docker` for platform detection (#2640)""

This reverts commit 69e7c57975f745083b8507fd43f5f5efe4194fc6."
3e5ddad5ca340524c2880c5f6b40663cc289a8ce,Andy Bitz,2019-08-05 16:44:38+00:00,Andy Bitz,2019-08-05 16:44:38+00:00,"Revert ""[now deploy] Check `server.js` file when detecting the platform version (#2664)""

This reverts commit 482ca7a8a603e791ca4a97ca5b4c936011b08eb5."
92cff5c947d073c1df8c22c000c1bf872226ebad,Andy Bitz,2019-08-05 16:43:26+00:00,Andy Bitz,2019-08-05 16:43:26+00:00,"Revert ""[now deploy] Check if builds are ready right away (#2699)""

This reverts commit 2877563064ad64fc23a63a87d236f103f5b3c55f."
4f8cf6793bd353cfa80fe382f3233f90bd68ac59,Andy,2019-08-05 15:26:45+00:00,Andy Bitz,2019-08-05 16:40:41+00:00,"[now update] Remove `is-installed-globally` (#2700)

* [now update] Remove `is-installed-globally`

* Only suggest global

* Adjust test"
2877563064ad64fc23a63a87d236f103f5b3c55f,Andy,2019-08-05 13:20:02+00:00,Andy Bitz,2019-08-05 16:40:34+00:00,"[now deploy] Check if builds are ready right away (#2699)

* [now deploy] Check if builds are ready right away

* Adjust tests

* Remove test

* Log more while testing

* Remove check in tests

* Adjust all tests

* Log more"
dea74233c6c158fd2cb513f16c4b32410bcb14ed,Andy,2019-08-02 22:59:00+00:00,Andy Bitz,2019-08-05 16:40:28+00:00,"Update `@now/build-utils` to v0.9.8 (#2694)

* Bump `@now/build-utils` to 0.9.7

* Handle 404 status

* Revert ""Handle 404 status""

This reverts commit 6aa25097beb96c8d56ab40c91319278da68d5851.

* Render 404 page

* Bump @now/build-utils"
4fbd75f3845d426cbcf6b688325af3ff1c977634,Nathan Rajlich,2019-08-02 19:42:09+00:00,Andy Bitz,2019-08-05 16:40:22+00:00,"Assert 200 response status on ""deploy a dockerfile project"" integration test (#2684)

* Assert 200 response status on ""deploy a dockerfile project"" integration test

* Fix"
21bd8297e00ba10259a51329bcfa22096abc780b,Nathan Rajlich,2019-08-02 19:01:55+00:00,Andy Bitz,2019-08-05 16:40:16+00:00,"[now dev] Support JSON and HTML redirect responses (#2690)

* [now dev] Support JSON and HTML redirect responses

Matches the production behavior.

* Set Now response headers during redirect

* Set `location` header

* Remove unused `matched_route` var"
188150da26553d1df281c9556290e64c9d35f719,Nathan Rajlich,2019-08-02 18:26:02+00:00,Andy Bitz,2019-08-05 16:40:08+00:00,"[now dev] Allow custom 404 pages via `routes` (#2689)

* [now dev] Allow custom 404 pages via `routes`

This matches the behavior in production, which allows a `dest` to be
provided when defining a `status: 404` in the routes configuration.

Related to #2638.

* Fix typo"
83d50374ff31ed47e5e585c5b0b4ba133a09d021,Andy,2019-08-02 18:10:32+00:00,Andy Bitz,2019-08-05 16:40:00+00:00,"[preinstall/now update] Check if now is installed locally (#2688)

* [preinstall/now update] Check if now is installed locally and adjust messages

* Adjust test

* Add tests

* Wait for deployment to be ready

* Removed log

* Adjust prefix in test

* Adjust path

* Only wait 4 minutes

* More logging

* Change binPrefix to prefix

* Remove all linting warnings

* Adjust env vars for test

* Don't test on node 8

* Log more error information and fail right after 500

* Move docker test up"
2b3d4cd44905f4977d7e5a13d96c2c0ab37d2a78,Nathan Rajlich,2019-08-02 00:56:34+00:00,Andy Bitz,2019-08-05 16:39:52+00:00,"Fix routes definition in `now-dev-static-routes` test fixture (#2687)

This is the proper way to define this route because of the capture of
the initial `/`.

Matches how it works in production."
0ef680484d560303e193160a9aec89937361624a,Nathan Rajlich,2019-08-02 00:56:06+00:00,Andy Bitz,2019-08-05 16:39:47+00:00,"[now dev] Support JSON and HTML error responses (#2677)

* [now dev] Support JSON and HTML error responses

Closes #2609.

* Compile templates for unit tests in CircleCI

* Update `ts-node` to v8.3.0

* Convert doT.js compiled templates to TypeScript

* Compile templates for lint tests in CircleCI

* Print convert time

* Add 502 error template

* Remove `message` param from `sendError()`

* Prettier

* Add 404 tests

* Fix test"
54ee476f91933d6aec03982288146f42827dc43a,Andy,2019-08-01 16:40:55+00:00,Andy Bitz,2019-08-05 16:39:40+00:00,"[preinstall] Adjust the error messages (#2682)

* [preinstall] Adjust the error messages

* Remove dot"
4d81ee8c87f65d300959950558283aca25bd9275,Nathan Rajlich,2019-07-31 23:31:56+00:00,Andy Bitz,2019-08-05 16:39:34+00:00,"[now dev] Use a consistent ""pod id"" for `x-now-id` (#2679)

This matches the behavior in production."
33cd5d6c1d7ae4ffda5e630d0fb565881d57546d,Andy,2019-07-31 22:14:18+00:00,Andy Bitz,2019-08-05 16:39:28+00:00,"[now deploy] Change link for legacy warning (#2674)

* [now deploy] Change link for legacy warning

* Remove trailing slash

Co-Authored-By: Steven <steven@ceriously.com>

* Simplify `link` function

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Determine which link to show and add test

* Adjust link for configuration

Co-Authored-By: Steven <steven@ceriously.com>

* Adjust Package type"
24525ec768f312885f0c5be4b71fdf9879cc3da0,Andy,2019-07-31 16:22:45+00:00,Andy Bitz,2019-08-05 16:39:19+00:00,[now dev] Bump `@now/build-utils` to `0.9.6` (#2672)
482ca7a8a603e791ca4a97ca5b4c936011b08eb5,Andy,2019-07-31 14:01:15+00:00,Andy Bitz,2019-08-05 16:39:11+00:00,"[now deploy] Check `server.js` file when detecting the platform version (#2664)

* [now deploy] Check `server.js` file when detecting the platform version

* Fix type"
e8c81fbd81224c82e275504e27bb6d88a84de0d4,dependabot[bot],2019-07-31 05:05:59+00:00,Andy Bitz,2019-08-05 16:39:05+00:00,"Bump `yarn` to v1.17.3 (#2669)

Bumps [yarn](https://github.com/yarnpkg/yarn) from 1.13.0 to 1.17.3.
- [Release notes](https://github.com/yarnpkg/yarn/releases)
- [Changelog](https://github.com/yarnpkg/yarn/blob/v1.17.3/CHANGELOG.md)
- [Commits](https://github.com/yarnpkg/yarn/compare/v1.13.0...v1.17.3)

Signed-off-by: dependabot[bot] <support@github.com>"
6322be2bf70c970da23e1294f25f5409d47b6df4,Andy,2019-07-31 01:03:14+00:00,Andy Bitz,2019-08-05 16:38:59+00:00,"[CircleCI] Add more test suites for macOS support (#2663)

* [CircleCI] Add more tests for macos support

* Change xcode version since node 8.9.x is required

* Log stderr and stdout

* Add custom start script

* Make tests use custom start script

* Made start script executable

* Use correct node path

* Fix script path

* Handle status code

* Use latest Node.js version for macos tests

* Include yarn.lock for ember test

* Only use start script in tests

* Change start script for macos

* Change start script for linux

* Change start script for linux"
88a0fb2009b9cd23291a0111b2682d5bc0ea5e3a,Sophearak Tha,2019-07-30 21:56:38+00:00,Andy Bitz,2019-08-05 16:38:52+00:00,"[now dev] Update `NOW_BUILDER_DEBUG` base on `--debug` flag (#2655)

* Update `NOW_BUILDER_DEBUG` base on `--debug` flag

* No need to reset `NOW_BUILDER_DEBUG`

* Add comment for `NOW_BUILDER_DEBUG`

* Apply suggestions from code review

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
ba007f89ffda8415638d942c2d7ab854a237c9a8,Nathan Rajlich,2019-07-30 21:56:00+00:00,Andy Bitz,2019-08-05 16:38:45+00:00,"[now dev] Bundle `canary` builders for Now CLI canary (#2661)

* [now dev] Bundle `canary` builders for Now CLI canary

Closes #2641.

* Add unit tests

* More unit tests

* Use `semver.parse()` in `getDistTag()`

* Convert build script to TypeScript, DRY the `getDistTag()` function

* Prettier"
00129ea45268ad22de81f8c57e1f68fe167bdbfb,Andy,2019-07-30 18:47:38+00:00,Andy Bitz,2019-08-05 16:38:38+00:00,[now dev] Update outdated dependencies in tests (#2666)
924b0ff42711d38b99dcde9f723c8c16699d60a0,Nathan Rajlich,2019-07-30 09:25:55+00:00,Andy Bitz,2019-08-05 16:38:30+00:00,"[CircleCI] Add seperate jobs for `now dev` integration tests (#2662)

Run the `now dev` integration tests in parallel with the ""standard""
integration tests, since they both take a long time. This should
cut the CI testing time in about half."
70571d10c17eecef4c47482e2fb89ef355f13e07,Andy,2019-07-30 00:22:18+00:00,Andy Bitz,2019-08-05 16:38:21+00:00,"[now dev] Fix aurelia test (#2660)

* [now dev] Fix aurelia test

* Enable aurelia test again"
aee22a3d389671f3b75ecdb811f316f7829d78ac,Nathan Rajlich,2019-07-29 23:29:15+00:00,Andy Bitz,2019-08-05 16:38:13+00:00,"Support Node 8 (#2648)

* Support Node 8

This changes the TypeScript compilation target to ""es2015"" so that
async generator functions are transpiled, which enables Node 8 to be
supported.

As a side-effect, any of the files that utilize `async function*` or
`for await` needed to be converted to TypeScript so that the
transpilation actually happens.

It was painful to do this process for `src/commands/deploy/legacy.ts`,
and since it is legacy code I did not want to make too many changes to
the code, so there's a log of `@ts-ignore` and `any` types being used.
But the behavior of the file should not have changed at all.

* Make `engines` field be "">= 8""

* Add Node 8 to CircleCI matrix

* Remove `console.error()`

* Remove `.ts` extension on import calls

* Use `Now` instead of `any`

* Use native `url` module instead of `whatwg-url`

* Debug integration test

* Skip `02-angular-node` test on Node 8

* Remove debugging

* Add ""Downloading Hugo"" step to Node 8 tests

* Skip `03-aurelia` test on Node 8

* Skip `03-aurelia` test for all

All node versions are failing with the same error:

https://circleci.com/gh/zeit/now-cli/29922

* Use `fs-extra` instead of `fs.promises` for Node 8"
81162c0ccf09ea1bbecc2fc402e8cdd8b9eae923,Andy,2019-07-29 20:22:13+00:00,Andy Bitz,2019-08-05 16:38:05+00:00,"[now update] Change update notification and remove previous Now CLI installation on `preinstall` (#2659)

* [now update] Change update notification and remove previous Now CLI installation on `preinstall`

* Use plain js for preinstall script

* Removed unused `rename` import

* Simplified code"
69e7c57975f745083b8507fd43f5f5efe4194fc6,Andy,2019-07-29 19:44:37+00:00,Andy Bitz,2019-08-05 16:37:58+00:00,"[now deploy] Consider `--npm` and `--docker` for platform detection (#2640)

* [now deploy] Consider `--npm` and `--docker` for platform detection

* Change order

* Change prepare

* Await fixtures

* Remove check

* Revert ""Remove check""

This reverts commit 7a5c1c901085d4e22c5a34cc48b5d929a9ee3b80.

* Use async-retry

* Fix fetch

* Log token

* Retry user creation

* Add async

* Add try-catch

* Decrease the retries

* Use original way to get context name"
4e796ca95273369752edb48d2e6429ef44366bb1,Nathan Rajlich,2019-07-29 18:19:04+00:00,Andy Bitz,2019-08-05 16:37:53+00:00,"[now dev] Redirect when request has multiple slashes (#2645)

* [now dev] Redirect when request has multiple slashes

Closes #2642.

* Add POST passthrough"
518d0313f7bd1dbd0c08d31d4cf2651c87018e82,Max Chehab,2019-07-29 17:26:56+00:00,Andy Bitz,2019-08-05 16:37:47+00:00,[now deploy] Fix variable name typo (#2649)
6ea080d48b4a1693d5ae056957135b19d751cd48,Andy,2019-07-29 17:09:37+00:00,Andy Bitz,2019-08-05 16:37:33+00:00,"[now dev] Prevent recursive function call for `handle: ""filesystem""` (#2630)

* [now dev] Prevent recursive function call for `handle: ""filesystem""`

* Add test

* Update test/dev/integration.js

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Handle recursive `serveProjectAsNowV2` call

* Fix test"
748e34757eb8c70a9ba702f96cd540c836aa3b23,Sophearak Tha,2019-07-29 02:44:30+00:00,Andy Bitz,2019-08-05 16:37:26+00:00,"[now dev] Improve integration tests for `now dev` (#2597)

* Using `stdio` to resolve `now dev` Ready

* Update test/dev/integration.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Improve `testFixtureStdio` and update aurelia fixture

* Remove duplicate test

* Update `create-react-app` and `gatsby` test fixture

* Update `gridsome` test fixture

* Update `hugo` test fixture

* Update `jekyll` test fixture

* Add `marko` test fixture

* Add `mithril` test fixture

* Add `riot` test fixture

* Add `charge` test fixture

* Add `brunch` test fixture

* Add `docusaurus` and `ember` test fixtures

* Install ruby for `jekyll`

* Update base on platform for `jekyll` and `hugo`

* Use `sudo` to when installing `gem`

* Remove `09-jekyll`

* Extract the right filename

* Remove `-L` flag from `curl` for macOS

* Use different version of `hugo`

* Remove `min_version` from `08-hugo` theme"
c93c458cd4d12105705bf2009b7f73771879b6f4,Nathan Rajlich,2019-07-23 23:16:12+00:00,Andy Bitz,2019-08-05 16:36:05+00:00,"[CircleCI] Run integration tests on multiple versions of Node.js (#2596)

* [CircleCI] Run integration tests on multiple versions of Node.js

* Test Node 10 and Node 12

* Remove `fs.promises` usage for Node 8

* More `fs.promises` removal

* Remove Node 8, it is unsupported due to `async` function usage"
3c10787621a8c03c0b46a89150fda35a315394f4,Nathan Rajlich,2019-07-27 00:24:04+00:00,Andy Bitz,2019-08-05 16:31:23+00:00,"[now dev] Add `server: now` response header (#2646)

Matches production."
f60a9f0c5894426d1b5a8c842ff21d96c4b80462,Nathan Rajlich,2019-07-26 23:41:16+00:00,Andy Bitz,2019-08-05 16:31:17+00:00,"Add information when team/user/args parsing fails to Sentry reports (#2635)

* Add information when team/user/args parsing fails to Sentry reports

This should give us some insight into #2627.

* Add `node` reporting"
544d26dea94a94d4796709569f2b168a7d419a9c,Nathan Rajlich,2019-07-26 23:10:30+00:00,Andy Bitz,2019-08-05 16:31:11+00:00,"[now dev] Remove accidental `test.only()` (#2644)

This got committed by accident :("
9244e43ccfd9a2816d5e6a2e056c2baf8c3f7599,Andy,2019-07-26 00:35:50+00:00,Andy Bitz,2019-08-05 16:31:06+00:00,"[now deploy] Determine platform version through `Dockerfile` and `package.json` (#2633)

* [now deploy] Determine platform version through `Dockerfile` and
`packge.json`

* Update src/commands/deploy/index.js

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Change notification, add tests, consider `type`

* Change test

* Adjust test

* Adjust test

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>"
d44b147684e14e11c3c760be9019834ab8567f20,Nathan Rajlich,2019-07-26 00:03:21+00:00,Andy Bitz,2019-08-05 16:30:59+00:00,"Remove leftover references to `pkg` (#2632)

* Remove leftover references to `pkg`

We are no longer compiling `now-cli` with `pkg` so this is dead code.

* Enable source maps"
bb5fbc28a06ecad2a37183b996bd508fd64eac6a,Andy,2019-07-25 20:04:29+00:00,Andy Bitz,2019-08-05 16:30:53+00:00,"[now dev] Clean up before calling `process.exit` (#2629)

* [now dev] Clean up before calling `process.exit`

* Log error

* Update src/util/dev/server.ts

Co-Authored-By: Steven <steven@ceriously.com>"
3a501a0c0815990bd2db0fe31d68577285738048,Nathan Rajlich,2019-07-25 18:33:57+00:00,Andy Bitz,2019-08-05 16:30:47+00:00,"[now dev] Fix routing catch-all with no slash prefix edge case (#2626)

Fixes #2622."
1fe5dbd7cdc738551b6cee4c9ad9707178e1f6da,Sophearak Tha,2019-07-24 13:57:55+00:00,Andy Bitz,2019-08-05 16:13:18+00:00,"Remove `Buffer()` deprecation message (#2604)

* Remove `Buffer()` deprecation message

* Switch `micro` back to `9.1.2`"
7a97a400395209b266af25d702974f70085592c1,Nathan Rajlich,2019-07-24 00:50:13+00:00,Andy Bitz,2019-08-05 16:12:44+00:00,"Add ""engines"" field to `package.json` for Node 10 or newer (#2603)

`now-cli` does not work on Node 8 and below because generator
functions are not supported."
cda6a2cbb68aa08fcafb491d9324d543fb02aad7,Nathan Rajlich,2019-07-23 15:31:15+00:00,Andy Bitz,2019-08-05 16:11:49+00:00,"[now update] Render the proper tag and improve `yarn` detection logic (#2595)

* [now update] Render the proper tag and improve `yarn` detection logic

Before this the suggested command would always have you install the
stable version of `now`.

With this change the `@canary` tag will be suggested if the version of
`now` is from the canary release channel.

Also updates the `isYarn` detection logic to not consider the cwd, and
instead check the installed version of now's `package.json` for clues.

* Move `getUpdateCommand` to util

* Add a unit test

* Use integration test instead"
50a87c4965e49e6f644925e6368a59734e8b10de,Sophearak Tha,2019-07-22 13:04:51+00:00,Andy Bitz,2019-08-05 16:10:57+00:00,"Remove `pkg` bundling (#2567)

* Remove `pkg` bundling

* Remove `(dev)` from `--version`

* Remove `test/dev-builder.unit.js`

* Temporary disable `update now to canary test`

* Update `now update` command

* Removed useless jobs

* Removed useless code

* Removed more useless code

* Use update command

* Only run publish upon tag

* Removed code

* No need bin, use dist directly

* Update test, using the right file

* Reslove `iconv-lite@0.5.0` version

* Removed useless file

* Added scripts directory

* Removed useless stuff

* Fixed build script

* Fix `now dev` integration test

* Also block coverage on linting"
9a6ad1ae43f2b15ab0729f8113a3ed83fa81b4a6,Andy Bitz,2019-08-05 15:36:13+00:00,Andy Bitz,2019-08-05 15:36:13+00:00,15.9.0-canary.28
687ef375c8a6b4e9c10f6e20ca07073a7d86c906,Andy,2019-08-05 15:26:45+00:00,GitHub,2019-08-05 15:26:45+00:00,"[now update] Remove `is-installed-globally` (#2700)

* [now update] Remove `is-installed-globally`

* Only suggest global

* Adjust test"
538525e639e7017d5b6d0928725bde18bf525e5d,Andy Bitz,2019-08-05 13:22:56+00:00,Andy Bitz,2019-08-05 13:22:56+00:00,15.9.0-canary.27
aff5a0cbed5f30c59964a0157b7ac44ee3ee2427,Andy,2019-08-05 13:20:02+00:00,GitHub,2019-08-05 13:20:02+00:00,"[now deploy] Check if builds are ready right away (#2699)

* [now deploy] Check if builds are ready right away

* Adjust tests

* Remove test

* Log more while testing

* Remove check in tests

* Adjust all tests

* Log more"
b1b1529bd60352d33c211fb9ecde64c0bc680742,Nathan Rajlich,2019-08-02 23:11:34+00:00,Nathan Rajlich,2019-08-02 23:11:34+00:00,15.9.0-canary.26
bb934f014657b26929f7d253598963c3dc445b62,Andy,2019-08-02 22:59:00+00:00,Nathan Rajlich,2019-08-02 22:59:00+00:00,"Update `@now/build-utils` to v0.9.8 (#2694)

* Bump `@now/build-utils` to 0.9.7

* Handle 404 status

* Revert ""Handle 404 status""

This reverts commit 6aa25097beb96c8d56ab40c91319278da68d5851.

* Render 404 page

* Bump @now/build-utils"
7d2c5dc39a819bc536025f11ace5bc930ec6d185,Nathan Rajlich,2019-08-02 19:42:09+00:00,GitHub,2019-08-02 19:42:09+00:00,"Assert 200 response status on ""deploy a dockerfile project"" integration test (#2684)

* Assert 200 response status on ""deploy a dockerfile project"" integration test

* Fix"
98948694271b0a07bce1f061d1e192843f396671,Nathan Rajlich,2019-08-02 19:01:55+00:00,GitHub,2019-08-02 19:01:55+00:00,"[now dev] Support JSON and HTML redirect responses (#2690)

* [now dev] Support JSON and HTML redirect responses

Matches the production behavior.

* Set Now response headers during redirect

* Set `location` header

* Remove unused `matched_route` var"
8e0c1da441f72148b3e1d9f840dd8b9bde7cb296,Nathan Rajlich,2019-08-02 18:26:02+00:00,GitHub,2019-08-02 18:26:02+00:00,"[now dev] Allow custom 404 pages via `routes` (#2689)

* [now dev] Allow custom 404 pages via `routes`

This matches the behavior in production, which allows a `dest` to be
provided when defining a `status: 404` in the routes configuration.

Related to #2638.

* Fix typo"
6a165e83771318a0febb14303ada44c60f15d94f,Andy,2019-08-02 18:10:32+00:00,GitHub,2019-08-02 18:10:32+00:00,"[preinstall/now update] Check if now is installed locally (#2688)

* [preinstall/now update] Check if now is installed locally and adjust messages

* Adjust test

* Add tests

* Wait for deployment to be ready

* Removed log

* Adjust prefix in test

* Adjust path

* Only wait 4 minutes

* More logging

* Change binPrefix to prefix

* Remove all linting warnings

* Adjust env vars for test

* Don't test on node 8

* Log more error information and fail right after 500

* Move docker test up"
eeed5a82730eb7751dbea9c7cd3832bb38c8de0b,Nathan Rajlich,2019-08-02 00:56:34+00:00,GitHub,2019-08-02 00:56:34+00:00,"Fix routes definition in `now-dev-static-routes` test fixture (#2687)

This is the proper way to define this route because of the capture of
the initial `/`.

Matches how it works in production."
75d98c649a1469a3e1ffccd89d3205e1efb6b7df,Nathan Rajlich,2019-08-02 00:56:06+00:00,GitHub,2019-08-02 00:56:06+00:00,"[now dev] Support JSON and HTML error responses (#2677)

* [now dev] Support JSON and HTML error responses

Closes #2609.

* Compile templates for unit tests in CircleCI

* Update `ts-node` to v8.3.0

* Convert doT.js compiled templates to TypeScript

* Compile templates for lint tests in CircleCI

* Print convert time

* Add 502 error template

* Remove `message` param from `sendError()`

* Prettier

* Add 404 tests

* Fix test"
d54cc4df51c4887d8a25729e8b0acc6c68a4dcc3,Andy Bitz,2019-08-01 16:52:26+00:00,Andy Bitz,2019-08-01 16:52:26+00:00,15.9.0-canary.25
f211f1fa70c19f0c1ee01f06eb849d204f94da58,Andy,2019-08-01 16:40:55+00:00,Leo Lamprecht,2019-08-01 16:40:55+00:00,"[preinstall] Adjust the error messages (#2682)

* [preinstall] Adjust the error messages

* Remove dot"
f60a3734790e1b36c5b6c869bb289d6f834dd24f,Nathan Rajlich,2019-07-31 23:31:56+00:00,GitHub,2019-07-31 23:31:56+00:00,"[now dev] Use a consistent ""pod id"" for `x-now-id` (#2679)

This matches the behavior in production."
80a82ba276ec465bd11ba1e08a47f7a70bbe26a0,Andy,2019-07-31 22:14:18+00:00,GitHub,2019-07-31 22:14:18+00:00,"[now deploy] Change link for legacy warning (#2674)

* [now deploy] Change link for legacy warning

* Remove trailing slash

Co-Authored-By: Steven <steven@ceriously.com>

* Simplify `link` function

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Determine which link to show and add test

* Adjust link for configuration

Co-Authored-By: Steven <steven@ceriously.com>

* Adjust Package type"
8a3d0fb3701ddba32ccc1d59a8433377615a579d,Andy,2019-07-31 16:22:45+00:00,GitHub,2019-07-31 16:22:45+00:00,[now dev] Bump `@now/build-utils` to `0.9.6` (#2672)
20c2930a903152dae80ce310fef7cb7818643568,Andy Bitz,2019-07-31 14:47:00+00:00,Andy Bitz,2019-07-31 14:47:00+00:00,15.9.0-canary.24
bccf60249682aa210f4bac2795d95ffe641c7efc,Andy,2019-07-31 14:01:15+00:00,GitHub,2019-07-31 14:01:15+00:00,"[now deploy] Check `server.js` file when detecting the platform version (#2664)

* [now deploy] Check `server.js` file when detecting the platform version

* Fix type"
ed92ef8952117598a177e08d389cbbab2c917f6a,dependabot[bot],2019-07-31 05:05:59+00:00,Nathan Rajlich,2019-07-31 05:05:59+00:00,"Bump `yarn` to v1.17.3 (#2669)

Bumps [yarn](https://github.com/yarnpkg/yarn) from 1.13.0 to 1.17.3.
- [Release notes](https://github.com/yarnpkg/yarn/releases)
- [Changelog](https://github.com/yarnpkg/yarn/blob/v1.17.3/CHANGELOG.md)
- [Commits](https://github.com/yarnpkg/yarn/compare/v1.13.0...v1.17.3)

Signed-off-by: dependabot[bot] <support@github.com>"
1b9c14bd308261837c3dba5e61bc22878b57f730,Andy,2019-07-31 01:03:14+00:00,GitHub,2019-07-31 01:03:14+00:00,"[CircleCI] Add more test suites for macOS support (#2663)

* [CircleCI] Add more tests for macos support

* Change xcode version since node 8.9.x is required

* Log stderr and stdout

* Add custom start script

* Make tests use custom start script

* Made start script executable

* Use correct node path

* Fix script path

* Handle status code

* Use latest Node.js version for macos tests

* Include yarn.lock for ember test

* Only use start script in tests

* Change start script for macos

* Change start script for linux

* Change start script for linux"
c287cbeb2246c5ae81ac4fd76fb1be5f142afa99,Sophearak Tha,2019-07-30 21:56:38+00:00,Nathan Rajlich,2019-07-30 21:56:38+00:00,"[now dev] Update `NOW_BUILDER_DEBUG` base on `--debug` flag (#2655)

* Update `NOW_BUILDER_DEBUG` base on `--debug` flag

* No need to reset `NOW_BUILDER_DEBUG`

* Add comment for `NOW_BUILDER_DEBUG`

* Apply suggestions from code review

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>"
d29b1b9cfaad1866e8c61e4db1319af6f4bdf7c5,Nathan Rajlich,2019-07-30 21:56:00+00:00,GitHub,2019-07-30 21:56:00+00:00,"[now dev] Bundle `canary` builders for Now CLI canary (#2661)

* [now dev] Bundle `canary` builders for Now CLI canary

Closes #2641.

* Add unit tests

* More unit tests

* Use `semver.parse()` in `getDistTag()`

* Convert build script to TypeScript, DRY the `getDistTag()` function

* Prettier"
49293ae44bcd4bcd6121797871fc0281dece3a0d,Andy,2019-07-30 18:47:38+00:00,Nathan Rajlich,2019-07-30 18:47:38+00:00,[now dev] Update outdated dependencies in tests (#2666)
39103f5ae6dc7d723036a0d5818c28806c0e228e,Andy Bitz,2019-07-30 13:00:03+00:00,Andy Bitz,2019-07-30 13:00:03+00:00,15.9.0-canary.23
af2c894fb962480447353e48c2b0958036ea4b31,Nathan Rajlich,2019-07-30 09:25:55+00:00,Andy,2019-07-30 09:25:55+00:00,"[CircleCI] Add seperate jobs for `now dev` integration tests (#2662)

Run the `now dev` integration tests in parallel with the ""standard""
integration tests, since they both take a long time. This should
cut the CI testing time in about half."
42f9745420732f9c2c74d41650f942d3f9ca7803,Andy Bitz,2019-07-30 00:25:01+00:00,Andy Bitz,2019-07-30 00:25:01+00:00,"Revert ""Revert ""15.9.0-canary.22""""

This reverts commit 35c3d87055d3664ca11ecf5d5fac615f39455834."
f016f05c11120192e3d54eb23ce53a0cb8fd6428,Andy,2019-07-30 00:22:18+00:00,GitHub,2019-07-30 00:22:18+00:00,"[now dev] Fix aurelia test (#2660)

* [now dev] Fix aurelia test

* Enable aurelia test again"
257f5f293eb0f5dcc74c758e4b27011bd084d0d5,Nathan Rajlich,2019-07-29 23:29:15+00:00,GitHub,2019-07-29 23:29:15+00:00,"Support Node 8 (#2648)

* Support Node 8

This changes the TypeScript compilation target to ""es2015"" so that
async generator functions are transpiled, which enables Node 8 to be
supported.

As a side-effect, any of the files that utilize `async function*` or
`for await` needed to be converted to TypeScript so that the
transpilation actually happens.

It was painful to do this process for `src/commands/deploy/legacy.ts`,
and since it is legacy code I did not want to make too many changes to
the code, so there's a log of `@ts-ignore` and `any` types being used.
But the behavior of the file should not have changed at all.

* Make `engines` field be "">= 8""

* Add Node 8 to CircleCI matrix

* Remove `console.error()`

* Remove `.ts` extension on import calls

* Use `Now` instead of `any`

* Use native `url` module instead of `whatwg-url`

* Debug integration test

* Skip `02-angular-node` test on Node 8

* Remove debugging

* Add ""Downloading Hugo"" step to Node 8 tests

* Skip `03-aurelia` test on Node 8

* Skip `03-aurelia` test for all

All node versions are failing with the same error:

https://circleci.com/gh/zeit/now-cli/29922

* Use `fs-extra` instead of `fs.promises` for Node 8"
35c3d87055d3664ca11ecf5d5fac615f39455834,Andy Bitz,2019-07-29 23:19:44+00:00,Andy Bitz,2019-07-29 23:19:44+00:00,"Revert ""15.9.0-canary.22""

This reverts commit a78813bd74aa612a3b3ed8b9a9fcac0ac2a23db2."
a78813bd74aa612a3b3ed8b9a9fcac0ac2a23db2,Andy Bitz,2019-07-29 21:02:01+00:00,Andy Bitz,2019-07-29 21:02:01+00:00,15.9.0-canary.22
05c2f69523be6f23717d91cd5124221bbd73fdca,Andy,2019-07-29 20:22:13+00:00,Nathan Rajlich,2019-07-29 20:22:13+00:00,"[now update] Change update notification and remove previous Now CLI installation on `preinstall` (#2659)

* [now update] Change update notification and remove previous Now CLI installation on `preinstall`

* Use plain js for preinstall script

* Removed unused `rename` import

* Simplified code"
e389a836e12263535083d3bb6e9a4d23ef24dd41,Andy,2019-07-29 19:44:37+00:00,GitHub,2019-07-29 19:44:37+00:00,"[now deploy] Consider `--npm` and `--docker` for platform detection (#2640)

* [now deploy] Consider `--npm` and `--docker` for platform detection

* Change order

* Change prepare

* Await fixtures

* Remove check

* Revert ""Remove check""

This reverts commit 7a5c1c901085d4e22c5a34cc48b5d929a9ee3b80.

* Use async-retry

* Fix fetch

* Log token

* Retry user creation

* Add async

* Add try-catch

* Decrease the retries

* Use original way to get context name"
64c526fe1df5d769c2b468a445960a757ba8170a,Nathan Rajlich,2019-07-29 18:19:04+00:00,GitHub,2019-07-29 18:19:04+00:00,"[now dev] Redirect when request has multiple slashes (#2645)

* [now dev] Redirect when request has multiple slashes

Closes #2642.

* Add POST passthrough"
e132d74aa845c9554cbe0ffcb0d2b469148a83a3,Max Chehab,2019-07-29 17:26:56+00:00,Nathan Rajlich,2019-07-29 17:26:56+00:00,[now deploy] Fix variable name typo (#2649)
975c8dc5fc273b07f4ce8ba3a70905da8f5528dc,Andy,2019-07-29 17:09:37+00:00,GitHub,2019-07-29 17:09:37+00:00,"[now dev] Prevent recursive function call for `handle: ""filesystem""` (#2630)

* [now dev] Prevent recursive function call for `handle: ""filesystem""`

* Add test

* Update test/dev/integration.js

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Handle recursive `serveProjectAsNowV2` call

* Fix test"
3d2929b345958a17eaa6797fd0b798f15359e629,Sophearak Tha,2019-07-29 02:44:30+00:00,GitHub,2019-07-29 02:44:30+00:00,"[now dev] Improve integration tests for `now dev` (#2597)

* Using `stdio` to resolve `now dev` Ready

* Update test/dev/integration.js

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Improve `testFixtureStdio` and update aurelia fixture

* Remove duplicate test

* Update `create-react-app` and `gatsby` test fixture

* Update `gridsome` test fixture

* Update `hugo` test fixture

* Update `jekyll` test fixture

* Add `marko` test fixture

* Add `mithril` test fixture

* Add `riot` test fixture

* Add `charge` test fixture

* Add `brunch` test fixture

* Add `docusaurus` and `ember` test fixtures

* Install ruby for `jekyll`

* Update base on platform for `jekyll` and `hugo`

* Use `sudo` to when installing `gem`

* Remove `09-jekyll`

* Extract the right filename

* Remove `-L` flag from `curl` for macOS

* Use different version of `hugo`

* Remove `min_version` from `08-hugo` theme"
c91e529782f1a2e351d9c43cf9dd145960e8cfe6,Nathan Rajlich,2019-07-27 00:24:04+00:00,GitHub,2019-07-27 00:24:04+00:00,"[now dev] Add `server: now` response header (#2646)

Matches production."
495ba3bf9813f3e453953bf471a27b4b10b80ca5,Nathan Rajlich,2019-07-26 23:41:16+00:00,GitHub,2019-07-26 23:41:16+00:00,"Add information when team/user/args parsing fails to Sentry reports (#2635)

* Add information when team/user/args parsing fails to Sentry reports

This should give us some insight into #2627.

* Add `node` reporting"
c799886f5344160050265e0dfc18d83402f260e7,Nathan Rajlich,2019-07-26 23:10:30+00:00,GitHub,2019-07-26 23:10:30+00:00,"[now dev] Remove accidental `test.only()` (#2644)

This got committed by accident :("
f6552c48d688ea569dd84046dce474bc34e87ee4,Andy Bitz,2019-07-26 11:40:40+00:00,Andy Bitz,2019-07-26 11:40:40+00:00,15.8.7
577cd76ae6568c69a16fd893ab9f24943ea56ba4,Andy Bitz,2019-07-26 08:45:55+00:00,Andy Bitz,2019-07-26 08:45:55+00:00,"Revert ""Add ""engines"" field to `package.json` for Node 10 or newer (#2603)""

This reverts commit 91a1a4828a0e327510f95420e24cdb945df7c086."
bcbaad4371a748e7302db3818e6bf580a9549292,Andy,2019-07-26 00:35:50+00:00,Nathan Rajlich,2019-07-26 00:35:50+00:00,"[now deploy] Determine platform version through `Dockerfile` and `package.json` (#2633)

* [now deploy] Determine platform version through `Dockerfile` and
`packge.json`

* Update src/commands/deploy/index.js

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Change notification, add tests, consider `type`

* Change test

* Adjust test

* Adjust test

* Update src/util/prefer-v2-deployment.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>"
91c80ca0a9cae7a80ce62ce9c491597461a97a7f,Nathan Rajlich,2019-07-26 00:03:21+00:00,GitHub,2019-07-26 00:03:21+00:00,"Remove leftover references to `pkg` (#2632)

* Remove leftover references to `pkg`

We are no longer compiling `now-cli` with `pkg` so this is dead code.

* Enable source maps"
e7e0ab7d0daba7a1d57867370a4a9f1972eabf2f,Andy,2019-07-25 20:04:29+00:00,GitHub,2019-07-25 20:04:29+00:00,"[now dev] Clean up before calling `process.exit` (#2629)

* [now dev] Clean up before calling `process.exit`

* Log error

* Update src/util/dev/server.ts

Co-Authored-By: Steven <steven@ceriously.com>"
0b6b74938f08051a3b94ab83f1ffb7820e638f5e,Nathan Rajlich,2019-07-25 18:33:57+00:00,GitHub,2019-07-25 18:33:57+00:00,"[now dev] Fix routing catch-all with no slash prefix edge case (#2626)

Fixes #2622."
bed4efeef07d335dfb3b1c5bd9e10c6a6e4946fa,Andy Bitz,2019-07-25 15:26:59+00:00,Andy Bitz,2019-07-25 15:26:59+00:00,15.8.6
53f0adb88adb95c1dcfb98ad9a0c101bcda1a809,Andy Bitz,2019-07-25 15:06:27+00:00,Andy Bitz,2019-07-25 15:06:27+00:00,"Revert ""[now update] Render the proper tag and improve `yarn` detection logic (#2595)""

This reverts commit 4ceb4c8984e098ef8a636f3c5cd46c0c5f1f01da."
61c82890c1d72f5ef93272ade8297ff71ac41642,Nathan Rajlich,2019-07-24 23:23:37+00:00,Andy Bitz,2019-07-25 12:03:52+00:00,"[now deploy] Respect `--debug` flag for API Client (#2625)

While debugging #2606, I noticed that the `Client` instances for
`now deploy` were not being supplied the appropriate `debug` flag
based on the command line args."
176a750ece69c5b9acc8a750df918d4b8a0e3c74,Steven,2019-07-24 22:42:01+00:00,Andy Bitz,2019-07-25 12:03:41+00:00,[now init] Download `/v1` examples without suggestions (#2623)
88cdcdf9798fa0ef3b936744f31016028b71190c,Nathan Rajlich,2019-07-24 21:11:31+00:00,Andy Bitz,2019-07-25 12:03:30+00:00,"[now deploy] Change ""Aliases assigned"" to ""Deployment complete"" (#2620)

* [now deploy] Change ""Aliases assigned"" to ""Deployment complete""

Closes #2617.

* Change instances of ""Aliased"" to ""Deployed"""
bf12602acaef3a1d737f535e4e6a40a2cce34f26,Andy,2019-07-24 20:54:41+00:00,Andy Bitz,2019-07-25 12:03:23+00:00,[now dev] Bump `@now/build-utils` to `0.9.4` (#2621)
bafb14526df144d42a904d705393666c8dc29407,Nathan Rajlich,2019-07-24 19:39:42+00:00,Andy Bitz,2019-07-25 12:03:16+00:00,"[now dev] Fix creating duplicate blocking builds upon bootup (#2618)

PR #2562 caused an issue with blocking builds at bootup being built
twice, which is problematic when i.e. running `yarn` simultaneously
on the same directory causing cache corruption issues."
778b77e829e347ddb2055a3de45afa6de1961c84,Nathan Rajlich,2019-07-24 19:39:26+00:00,Andy Bitz,2019-07-25 12:03:07+00:00,"[now dev] Remove useless `debug()` call (#2619)

The `getNowConfig(false)` used to be within this `if` branch, so the
debug call made sense there at the time, but as of zero config it got
moved to always be invoked, so this `debug()` call doesn't make sense
anymore."
91a1a4828a0e327510f95420e24cdb945df7c086,Nathan Rajlich,2019-07-24 00:50:13+00:00,Andy Bitz,2019-07-25 12:00:16+00:00,"Add ""engines"" field to `package.json` for Node 10 or newer (#2603)

`now-cli` does not work on Node 8 and below because generator
functions are not supported."
5a187b97ab8e92b396738458d0b86ce86b90cce9,Andy,2019-07-24 00:29:37+00:00,Andy Bitz,2019-07-25 12:00:04+00:00,Use `fs-extra` instead of `fs.promises` to prevent warnings on Node 10 (#2602)
d78cd371ed5e1ab820ed13f73ff2706bbd07b5c0,Nathan Rajlich,2019-07-23 21:58:19+00:00,Andy Bitz,2019-07-25 11:59:20+00:00,"[now dev] Wait for blocking builds to complete before handling requests (#2562)

* [now dev] Wait for blocking builds to complete before handling requests

After the `now dev` server has already booted, if you delete a build
match that previously required a build at bootup time (i.e. `@now/next`)
from the `builds` array in `now.json` (i.e. change the builder to
`@now/static`), and then change it back to `@now/next`, then previously
the build would never execute.

With this change, the blocking build occurs as expected, and any HTTP
requests that occur are blocked until that build has completed.

* Prettier

* Better diff

* Add test"
a720d5b181f88426d87698e41acffba414f84b90,Nathan Rajlich,2019-07-23 18:12:34+00:00,Andy Bitz,2019-07-25 11:59:09+00:00,"[now dev] Add warning when there are no build matches (#2594)

* [now dev] Add warning when there are no build matches

This matches the error in production, except it's just a non-fatal
warning when running in `now dev`. This is so that the user can fix
the warning without having to restart the `now dev` server.

* Add integration test"
dd50eae7623f247fc83ffa42b165008c6e0941aa,Andy,2019-07-23 17:56:50+00:00,Andy Bitz,2019-07-25 11:58:59+00:00,[now update] Don't check for updates on `now update` (#2599)
4ceb4c8984e098ef8a636f3c5cd46c0c5f1f01da,Nathan Rajlich,2019-07-23 15:31:15+00:00,Andy Bitz,2019-07-25 11:58:53+00:00,"[now update] Render the proper tag and improve `yarn` detection logic (#2595)

* [now update] Render the proper tag and improve `yarn` detection logic

Before this the suggested command would always have you install the
stable version of `now`.

With this change the `@canary` tag will be suggested if the version of
`now` is from the canary release channel.

Also updates the `isYarn` detection logic to not consider the cwd, and
instead check the installed version of now's `package.json` for clues.

* Move `getUpdateCommand` to util

* Add a unit test

* Use integration test instead"
f9c262f4bb44a11f9ede08b03bb404a2c7518b96,Andy,2019-07-22 16:34:27+00:00,Andy Bitz,2019-07-25 11:58:43+00:00," [now dev] Fix directory listing race condition (#2591)

* [now dev] Fix directory listing race condition

* Resolve file names

* Check only matched files

* Log stdout and stderr

* Log expected

* Change test

* Revert ""Change test""

This reverts commit 149723be0f2015bd400dd5f2d5cce523303a05cf.

* Add timeout to request

* Adjust retries

* Don't use unref

* Remove tests

* Revert ""Remove tests""

This reverts commit 6159d657bfa978719ffb23153058b791b2ce8a2a.

* Adjusted test

* Make sure directory exists

* Fix tests

* Add yarn.lock

* Adjust timeout"
57d9c6e39b27bf5b53cdfa0e4f1cfc430cebefd2,Andy,2019-07-22 00:47:09+00:00,Andy Bitz,2019-07-25 11:58:33+00:00,"[now dev] Print `Serving all files as static` only once (#2590)

* [now dev] Print `Serving all files as static` only once

* Track the config state

* Revert ""Track the config state""

This reverts commit 9766941ca8cd1ffeae5fb0729800f05f2547099c.

* Revert ""[now dev] Print `Serving all files as static` only once""

This reverts commit 3e30c2440b6c4deed8a14f2359696e7bf8dcdcad.

* Add `isInitialLoad` param"
e45e403bb3f905cad4f0dff5fae243e5385bd909,Sophearak Tha,2019-07-21 23:48:23+00:00,Andy Bitz,2019-07-25 11:58:25+00:00,"Add configuration and basic integration tests for `now dev` (#2553)

* Add configuration and basic integration tests for `now dev`

* Add test fixtures from `now-examples`

* Add `include` to `tsconfig.json`

* Increase retries for 00-list-directory

* Increase retries for `03-aurelia-node`

* Enable test fixtures for hexo, hugo, next, polymer, preact, svelte, vue, and vuepress

* Increase retries for `08-hugo-node`

* Disable `08-hugo-node` fixture

* Enable `04-create-react-app-node` test

* Disable `04-create-react-app-node` test

* Better name for now dev test job"
2fe38b1527e5b11fbddc124e666b1cf3fa862277,Andy,2019-07-21 22:31:56+00:00,Andy Bitz,2019-07-25 11:58:18+00:00,Handle more errors when deploying (#2589)
f6a38717f203f03279ad72406fe2ff6fc6029da4,Andy,2019-07-21 19:37:49+00:00,Andy Bitz,2019-07-25 11:58:10+00:00," [now dev] Bump `@now/build-utils` and throw errors (#2588)

* [now dev] Bump `@now/build-utils` and throw errors

* Fix error handling"
31c0ac8a540d7f848c0bbc1e9be09dfda941272b,Steven,2019-07-19 23:29:02+00:00,Andy Bitz,2019-07-25 11:58:04+00:00,"[now init] Add suggestions for old examples (#2584)

* [now init] Add suggestions for old examples

* Add support for selecting an old example

* Add message for selection

* Wait for user interaction

* Fix typo

* Use v2 api instead

* Move message label to first param

* Bump api url to latest, update download to v2

* Rename found to visible"
256ca8796fc795d2bfc95ed0c47048dbad39d8f2,Andy Bitz,2019-07-25 11:56:20+00:00,Andy Bitz,2019-07-25 11:56:20+00:00,15.9.0-canary.21
17c659124b8433080ddd9a8b175117627bb325d1,Nathan Rajlich,2019-07-24 23:23:37+00:00,GitHub,2019-07-24 23:23:37+00:00,"[now deploy] Respect `--debug` flag for API Client (#2625)

While debugging #2606, I noticed that the `Client` instances for
`now deploy` were not being supplied the appropriate `debug` flag
based on the command line args."
bcac21311463cc34a2741ed7dcbde3122a96e38e,Steven,2019-07-24 22:43:07+00:00,Steven,2019-07-24 22:43:07+00:00,15.9.0-canary.20
7f4b2bdc87d39e44c27c142a27caee523f824a0a,Steven,2019-07-24 22:42:01+00:00,GitHub,2019-07-24 22:42:01+00:00,[now init] Download `/v1` examples without suggestions (#2623)
94a958f460f715e39cb95590ff01cfa320ba5653,Nathan Rajlich,2019-07-24 21:11:31+00:00,GitHub,2019-07-24 21:11:31+00:00,"[now deploy] Change ""Aliases assigned"" to ""Deployment complete"" (#2620)

* [now deploy] Change ""Aliases assigned"" to ""Deployment complete""

Closes #2617.

* Change instances of ""Aliased"" to ""Deployed"""
7a02249f37aac28d8f2a0135615ed65eb82da031,Andy Bitz,2019-07-24 20:55:37+00:00,Andy Bitz,2019-07-24 20:55:37+00:00,15.9.0-canary.19
94681f28c683eae58b4ac6da9c7ed203261f6e90,Andy,2019-07-24 20:54:41+00:00,GitHub,2019-07-24 20:54:41+00:00,[now dev] Bump `@now/build-utils` to `0.9.4` (#2621)
9fd1cee6f0935cd755a32b51a5139cfd46dd4017,Nathan Rajlich,2019-07-24 19:39:42+00:00,GitHub,2019-07-24 19:39:42+00:00,"[now dev] Fix creating duplicate blocking builds upon bootup (#2618)

PR #2562 caused an issue with blocking builds at bootup being built
twice, which is problematic when i.e. running `yarn` simultaneously
on the same directory causing cache corruption issues."
2054bb06f156ccaba5f467d2932bdcb8a5dead3c,Nathan Rajlich,2019-07-24 19:39:26+00:00,GitHub,2019-07-24 19:39:26+00:00,"[now dev] Remove useless `debug()` call (#2619)

The `getNowConfig(false)` used to be within this `if` branch, so the
debug call made sense there at the time, but as of zero config it got
moved to always be invoked, so this `debug()` call doesn't make sense
anymore."
c0b5a01cae488c7b371b37ace3291936083cb4e0,Sophearak Tha,2019-07-24 14:05:10+00:00,Sophearak Tha,2019-07-24 14:05:10+00:00,15.9.0-canary.18
0bbe5f78066f046ffa02ccb41731e355bdb812c5,Sophearak Tha,2019-07-24 13:57:55+00:00,GitHub,2019-07-24 13:57:55+00:00,"Remove `Buffer()` deprecation message (#2604)

* Remove `Buffer()` deprecation message

* Switch `micro` back to `9.1.2`"
9e25d8e11c2f6cf401f74cc1847bde52553a09bb,Nathan Rajlich,2019-07-24 00:50:44+00:00,Nathan Rajlich,2019-07-24 00:50:44+00:00,15.9.0-canary.17
8623c5201c68f33b28981bb0f0b3255ba43d5f48,Nathan Rajlich,2019-07-24 00:50:13+00:00,GitHub,2019-07-24 00:50:13+00:00,"Add ""engines"" field to `package.json` for Node 10 or newer (#2603)

`now-cli` does not work on Node 8 and below because generator
functions are not supported."
862728f8895caf06aab7bb2c5763c6648f21600e,Andy,2019-07-24 00:29:37+00:00,Nathan Rajlich,2019-07-24 00:29:37+00:00,Use `fs-extra` instead of `fs.promises` to prevent warnings on Node 10 (#2602)
ad4e20c7e6b47c1155c9be1d5fdab91908053e09,Nathan Rajlich,2019-07-23 23:16:12+00:00,GitHub,2019-07-23 23:16:12+00:00,"[CircleCI] Run integration tests on multiple versions of Node.js (#2596)

* [CircleCI] Run integration tests on multiple versions of Node.js

* Test Node 10 and Node 12

* Remove `fs.promises` usage for Node 8

* More `fs.promises` removal

* Remove Node 8, it is unsupported due to `async` function usage"
62d782255abf45be9f5a4f46c99ecae6c0ebcd4b,Andy Bitz,2019-07-23 22:10:52+00:00,Andy Bitz,2019-07-23 22:10:52+00:00,"Revert ""Disable warnings (#2601)""

This reverts commit 23318d9fc967c538eb35e4c011f3d9478ef38a49."
3f18d24915f88375391cccd28412b1227e401845,Nathan Rajlich,2019-07-23 21:58:19+00:00,GitHub,2019-07-23 21:58:19+00:00,"[now dev] Wait for blocking builds to complete before handling requests (#2562)

* [now dev] Wait for blocking builds to complete before handling requests

After the `now dev` server has already booted, if you delete a build
match that previously required a build at bootup time (i.e. `@now/next`)
from the `builds` array in `now.json` (i.e. change the builder to
`@now/static`), and then change it back to `@now/next`, then previously
the build would never execute.

With this change, the blocking build occurs as expected, and any HTTP
requests that occur are blocked until that build has completed.

* Prettier

* Better diff

* Add test"
23318d9fc967c538eb35e4c011f3d9478ef38a49,Andy,2019-07-23 21:40:11+00:00,GitHub,2019-07-23 21:40:11+00:00,"Disable warnings (#2601)

* Disable warnings

* Fix execution bits

* Revert ""Fix execution bits""

This reverts commit f054f6695fe015896a5f6aa8354ac61a57b3cf81.

* Revert ""Disable warnings""

This reverts commit 9321cea2820857060db7275eda9c94d951908714.

* Add --no-warnings"
c413cc7349822c88f4a2f6aab78a6dfc1488e06a,Nathan Rajlich,2019-07-23 18:12:34+00:00,GitHub,2019-07-23 18:12:34+00:00,"[now dev] Add warning when there are no build matches (#2594)

* [now dev] Add warning when there are no build matches

This matches the error in production, except it's just a non-fatal
warning when running in `now dev`. This is so that the user can fix
the warning without having to restart the `now dev` server.

* Add integration test"
f268a1b390207ca189a9b8fb01ed8907ebadcc16,Andy,2019-07-23 17:56:50+00:00,GitHub,2019-07-23 17:56:50+00:00,[now update] Don't check for updates on `now update` (#2599)
19dd33b037ec4884d99772d0bb1648803e26c80b,Nathan Rajlich,2019-07-23 15:31:15+00:00,Andy,2019-07-23 15:31:15+00:00,"[now update] Render the proper tag and improve `yarn` detection logic (#2595)

* [now update] Render the proper tag and improve `yarn` detection logic

Before this the suggested command would always have you install the
stable version of `now`.

With this change the `@canary` tag will be suggested if the version of
`now` is from the canary release channel.

Also updates the `isYarn` detection logic to not consider the cwd, and
instead check the installed version of now's `package.json` for clues.

* Move `getUpdateCommand` to util

* Add a unit test

* Use integration test instead"
a29890c8ee7edd3e1fefc78e7d538d2ccdc670c7,Andy Bitz,2019-07-22 17:33:20+00:00,Andy Bitz,2019-07-22 17:33:20+00:00,15.9.0-canary.16
6e3a495914cd55126448f688d52a34e0da672f0c,Andy,2019-07-22 16:34:27+00:00,GitHub,2019-07-22 16:34:27+00:00," [now dev] Fix directory listing race condition (#2591)

* [now dev] Fix directory listing race condition

* Resolve file names

* Check only matched files

* Log stdout and stderr

* Log expected

* Change test

* Revert ""Change test""

This reverts commit 149723be0f2015bd400dd5f2d5cce523303a05cf.

* Add timeout to request

* Adjust retries

* Don't use unref

* Remove tests

* Revert ""Remove tests""

This reverts commit 6159d657bfa978719ffb23153058b791b2ce8a2a.

* Adjusted test

* Make sure directory exists

* Fix tests

* Add yarn.lock

* Adjust timeout"
e1005deeb35f925ba0c6867926e65ac84b75b088,Sophearak Tha,2019-07-22 13:04:51+00:00,Leo Lamprecht,2019-07-22 13:04:51+00:00,"Remove `pkg` bundling (#2567)

* Remove `pkg` bundling

* Remove `(dev)` from `--version`

* Remove `test/dev-builder.unit.js`

* Temporary disable `update now to canary test`

* Update `now update` command

* Removed useless jobs

* Removed useless code

* Removed more useless code

* Use update command

* Only run publish upon tag

* Removed code

* No need bin, use dist directly

* Update test, using the right file

* Reslove `iconv-lite@0.5.0` version

* Removed useless file

* Added scripts directory

* Removed useless stuff

* Fixed build script

* Fix `now dev` integration test

* Also block coverage on linting"
c61502e24cc1875bae87447b0631366df2324ae3,Andy,2019-07-22 00:47:09+00:00,GitHub,2019-07-22 00:47:09+00:00,"[now dev] Print `Serving all files as static` only once (#2590)

* [now dev] Print `Serving all files as static` only once

* Track the config state

* Revert ""Track the config state""

This reverts commit 9766941ca8cd1ffeae5fb0729800f05f2547099c.

* Revert ""[now dev] Print `Serving all files as static` only once""

This reverts commit 3e30c2440b6c4deed8a14f2359696e7bf8dcdcad.

* Add `isInitialLoad` param"
7674a4af4ac59a2f932aa5627b1716906953733e,Sophearak Tha,2019-07-21 23:48:23+00:00,Leo Lamprecht,2019-07-21 23:48:23+00:00,"Add configuration and basic integration tests for `now dev` (#2553)

* Add configuration and basic integration tests for `now dev`

* Add test fixtures from `now-examples`

* Add `include` to `tsconfig.json`

* Increase retries for 00-list-directory

* Increase retries for `03-aurelia-node`

* Enable test fixtures for hexo, hugo, next, polymer, preact, svelte, vue, and vuepress

* Increase retries for `08-hugo-node`

* Disable `08-hugo-node` fixture

* Enable `04-create-react-app-node` test

* Disable `04-create-react-app-node` test

* Better name for now dev test job"
0245a04db9bdecf1ad79ce1117b129d9876dac21,Andy,2019-07-21 22:31:56+00:00,GitHub,2019-07-21 22:31:56+00:00,Handle more errors when deploying (#2589)
340537bc0b70fae8203313d823f0d0adc37d76f1,Andy,2019-07-21 19:37:49+00:00,GitHub,2019-07-21 19:37:49+00:00," [now dev] Bump `@now/build-utils` and throw errors (#2588)

* [now dev] Bump `@now/build-utils` and throw errors

* Fix error handling"
c9383b25354566e26f9547b7f7c8928a425b578c,Steven,2019-07-19 23:29:02+00:00,GitHub,2019-07-19 23:29:02+00:00,"[now init] Add suggestions for old examples (#2584)

* [now init] Add suggestions for old examples

* Add support for selecting an old example

* Add message for selection

* Wait for user interaction

* Fix typo

* Use v2 api instead

* Move message label to first param

* Bump api url to latest, update download to v2

* Rename found to visible"
3774792740e193e731eb13ad061df1a73f612ee8,Andy Bitz,2019-07-19 20:31:53+00:00,Andy Bitz,2019-07-19 20:31:53+00:00,15.8.5
a9b3ee96cdf06c9fac4961889687277bf74ce71d,Mark Glagola,2019-07-19 18:59:11+00:00,Andy Bitz,2019-07-19 20:31:39+00:00,handle `no-change` domain transfer policy (#2570)
b6946e2f156632d2eeb0298cb8af9665c9d54762,Andy,2019-07-19 15:48:41+00:00,Andy Bitz,2019-07-19 20:31:31+00:00,"Fix update command message (#2581)

* Fix update command

* Update src/commands/update.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>"
a4ad8c64e65afd7150aa4f8119c550e3acb39d86,Andy,2019-07-19 15:15:39+00:00,Andy Bitz,2019-07-19 20:31:24+00:00,"[now dev] Bump @now/build-utils (#2582)

* [now dev] Bump @now/build-utils

* Replace `apollo` init example fixure with `angular`

* Update more tests

* Remove `now.json` from check"
eae9f9ed4259c8f8e40d0afdfe4fa5134e05cb9d,Andy Bitz,2019-07-19 20:29:52+00:00,Andy Bitz,2019-07-19 20:29:52+00:00,15.9.0-canary.15
dfa134e8e4b4228d55e3af6ececedabfa70f2289,Mark Glagola,2019-07-19 18:59:11+00:00,GitHub,2019-07-19 18:59:11+00:00,handle `no-change` domain transfer policy (#2570)
bb7b99bcf921c1539c4faa36d03740e0c8b10216,Sophearak Tha,2019-07-19 15:54:44+00:00,Sophearak Tha,2019-07-19 15:54:44+00:00,15.9.0-canary.14
074e96e1176fb436185d5d805a732102293a18d3,Andy,2019-07-19 15:48:41+00:00,Sophearak Tha,2019-07-19 15:48:41+00:00,"Fix update command message (#2581)

* Fix update command

* Update src/commands/update.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>"
0b82c74c58c988fb8b1203f2d08e62555bb0ee01,Andy,2019-07-19 15:15:39+00:00,Sophearak Tha,2019-07-19 15:15:39+00:00,"[now dev] Bump @now/build-utils (#2582)

* [now dev] Bump @now/build-utils

* Replace `apollo` init example fixure with `angular`

* Update more tests

* Remove `now.json` from check"
29d18dccb2d881a05876fd6c21f41348adb8f207,Andy Bitz,2019-07-19 12:07:01+00:00,Andy Bitz,2019-07-19 12:07:01+00:00,15.8.4
89057232ebe90cf1e177a232f26bce5c0da0bd63,Andy,2019-07-19 12:01:45+00:00,Andy Bitz,2019-07-19 12:06:16+00:00,[now init] Remove `now dev` suggestion from `now init` (#2580)
8a2d3d0c2c635408ddb259be468e63684637f0e1,Andy,2019-07-19 09:53:29+00:00,Andy Bitz,2019-07-19 12:06:10+00:00,"[now dev] Remove package.json message (#2576)

* [now dev] Remove package.json message

* Add message that all files are served as static"
a01c210bf060e9aac0206fa82c12c61c8c067443,Sophearak Tha,2019-07-19 09:42:32+00:00,Andy Bitz,2019-07-19 12:06:04+00:00,Remove deprecation message from `now alias` with args (#2578)
53515e6142099b998b109b183a422d2c088038d8,Andy,2019-07-19 09:22:31+00:00,Andy Bitz,2019-07-19 12:05:58+00:00,Fix building indicator jittering (#2577)
2aeab737d9c65852e1948a85cac56dfc8bbc9ac2,Andy,2019-07-19 00:40:17+00:00,Andy Bitz,2019-07-19 12:05:52+00:00,"[now dev] Upgrade `@now/build-utils` and enable more support for static sites (#2575)

* [now dev] Upgrade `@now/build-utils` and enable more support for static sites

* Add tests

* Upgrade @now/build-utils"
5cc4af257eddd470638ab88aafd52fbea15a7bfb,Andy Bitz,2019-07-19 12:03:40+00:00,Andy Bitz,2019-07-19 12:03:40+00:00,15.9.0-canary.13
1979e2074f3e82f87c7969765d841fae2be1b992,Andy,2019-07-19 12:01:45+00:00,GitHub,2019-07-19 12:01:45+00:00,[now init] Remove `now dev` suggestion from `now init` (#2580)
e788743f58b1aa05e27b46375c6369b6d1ceb7e9,Andy,2019-07-19 09:53:29+00:00,GitHub,2019-07-19 09:53:29+00:00,"[now dev] Remove package.json message (#2576)

* [now dev] Remove package.json message

* Add message that all files are served as static"
dae525e56aee5306e10f708b790e99a0dc6f8fb8,Sophearak Tha,2019-07-19 09:42:32+00:00,Leo Lamprecht,2019-07-19 09:42:32+00:00,Remove deprecation message from `now alias` with args (#2578)
0e32313395ab592515d5126379d8c5389700a8c8,Andy,2019-07-19 09:22:31+00:00,GitHub,2019-07-19 09:22:31+00:00,Fix building indicator jittering (#2577)
2ea1b00fdafc7299cd8c684c631c025c465cdd78,Andy Bitz,2019-07-19 00:42:03+00:00,Andy Bitz,2019-07-19 00:42:03+00:00,15.9.0-canary.12
398b371dedf56ca0753660029a8ee775addc3da8,Andy,2019-07-19 00:40:17+00:00,GitHub,2019-07-19 00:40:17+00:00,"[now dev] Upgrade `@now/build-utils` and enable more support for static sites (#2575)

* [now dev] Upgrade `@now/build-utils` and enable more support for static sites

* Add tests

* Upgrade @now/build-utils"
64caeeb115680dcb58b1735d839ee7253f928097,Andy Bitz,2019-07-18 13:24:57+00:00,Andy Bitz,2019-07-18 13:24:57+00:00,15.8.3
e5e33549f8ac285f3d4ade803c12e290faefc6d8,Matthew Sweeney,2019-07-18 12:29:43+00:00,Andy Bitz,2019-07-18 13:24:35+00:00,"Add hint when example not found (#2572)

* add hint when example not found

* update test

* update test"
da89cecaab052723fe85683b317c312094df9142,Andy Bitz,2019-07-18 13:11:41+00:00,Andy Bitz,2019-07-18 13:11:41+00:00,15.9.0-canary.11
e821d28ccd8c2392b100cbfdc8c37c2a6097c24c,Matthew Sweeney,2019-07-18 12:29:43+00:00,GitHub,2019-07-18 12:29:43+00:00,"Add hint when example not found (#2572)

* add hint when example not found

* update test

* update test"
d812b18d526acd1aa43724c307ed09a4981b9d45,Andy Bitz,2019-07-18 11:59:11+00:00,Andy Bitz,2019-07-18 11:59:11+00:00,15.8.2
d7ef4b533f7e656035374b61224b71e7b074a551,Andy,2019-07-18 10:29:54+00:00,Andy Bitz,2019-07-18 11:58:27+00:00,Bump `mime-types` to `2.1.24` (#2571)
a5e857df7be6a1be5c80cf0797e47b126e48f879,Andy,2019-07-17 21:39:16+00:00,Andy Bitz,2019-07-18 11:58:21+00:00,"Change `now update` to display npm or yarn command (#2568)

* Change `now update` to display npm or yarn command

* Use `getUpgradeCommand`"
3cd2de772893a71cb6225c9e44ec24b7e1c39325,Andy Bitz,2019-07-18 10:30:15+00:00,Andy Bitz,2019-07-18 10:30:15+00:00,15.9.0-canary.10
8e32c6684012f30348a1cba9b16e5d3dd0bacb5a,Andy,2019-07-18 10:29:54+00:00,GitHub,2019-07-18 10:29:54+00:00,Bump `mime-types` to `2.1.24` (#2571)
7716bb5439a5a7fd89e4d4fdea1d4a89ce2ccba8,Andy Bitz,2019-07-17 21:45:35+00:00,Andy Bitz,2019-07-17 21:45:35+00:00,15.9.0-canary.9
42a8dc14b0aa6831dce975b4335ca11980173b64,Andy,2019-07-17 21:39:16+00:00,GitHub,2019-07-17 21:39:16+00:00,"Change `now update` to display npm or yarn command (#2568)

* Change `now update` to display npm or yarn command

* Use `getUpgradeCommand`"
c3001fe708e2815b735b4c0e441d532a02cc1399,Andy Bitz,2019-07-17 17:46:29+00:00,Andy Bitz,2019-07-17 17:46:29+00:00,15.8.1
8309ec63278beefc0365c45575e7506188a57915,Andy,2019-07-17 15:31:37+00:00,Andy Bitz,2019-07-17 17:35:37+00:00,"[now dev] Fix builder sorting when `use` is undefined (#2566)

* [now dev] Fix function sorting when `use` is undefined

* Update type

* Add filter

* Fix build"
921a54ed22a02169aeac12d8c6f072df1714c05a,Andy,2019-07-17 12:45:58+00:00,Andy Bitz,2019-07-17 17:35:30+00:00,Fix tests order (#2565)
c82350dca6411a3ac54962706d732a455e69b07b,Andy,2019-07-17 09:49:32+00:00,Andy Bitz,2019-07-17 17:35:22+00:00,"[now dev] Fix builder sorting (#2563)

* [now dev] Fix builder sorting

* Add tests

* Fix path

* Add sleep

* Revert ""Add sleep""

This reverts commit 86f0057808eab50f1c977d19989425d633488e23.

* Revert ""Fix path""

This reverts commit 14327b83145c8cb24d5e45ac6e91534a7ef093ec.

* Revert ""Add tests""

This reverts commit 76849a7a5ce79b54f102a11f66920dccaabeadb6."
7e3a5a7e2c24aae0637609039c678a2a11dfef84,Andy,2019-07-16 23:31:56+00:00,Andy Bitz,2019-07-17 17:35:14+00:00,"[now dev] Allow `now dev` as package.json script (#2559)

* [now dev] Allow `now dev` as package.json script

* Fix absolute path for now dev

* Fix directory issue

* Typo

* Update src/commands/dev/dev.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Whitespace

* Make code simpler

* Extend type

* Update errors/now-dev-as-dev-script.md

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Update errors/now-dev-as-dev-script.md

Co-Authored-By: Nathan Rajlich <n@n8.io>"
ada83ccb631c0b825e36b379f3fffd148400ed72,Nathan Rajlich,2019-07-16 21:27:35+00:00,Andy Bitz,2019-07-17 17:35:05+00:00,"[now dev] Memoize the `getNowConfig()` promise (#2561)

The `getNowConfig()` function gets invoked frequently, and it is also
async and makes mutations to the cached now config object. This ends
up being a race condition when `getNowConfig()` is invoked concurrently,
since one of the invocations may end up with an incomplete `NowConfig`
object (namely, with missing `builds`/`routes` arrays due to the
zero-config processing).

This change makes it so that there's only one `getNowConfig()` invocation
being executed at a time, and other concurrent executions will await the
same promise that the original invocation is responsible for."
a4220a0e7d918bf8ab0b468ed597fe7e2bcd3414,Nathan Rajlich,2019-07-16 20:28:18+00:00,Andy Bitz,2019-07-17 17:34:58+00:00,"[now dev] Rename `nowJson` variables to `nowConfig` (#2558)

This is only a cosmetic code change, but aligns more nicely with
the new zero-config approach (where there is no `now.json`)."
92be615c3c95786734b23c8c17deb000417c720e,Andy,2019-07-16 18:23:40+00:00,Andy Bitz,2019-07-17 17:34:51+00:00,[now dev] Bump @now/build-utils to 0.8.8 (#2557)
847dace2122c9ee0bb63c60252aa26c70de541b8,Andy,2019-07-16 16:21:09+00:00,Andy Bitz,2019-07-17 17:34:45+00:00,[now dev] Bump @now/build-utils (#2556)
5a43516354f6d7e724d8ef08985dddd87cf600d9,Nathan Rajlich,2019-07-16 00:59:29+00:00,Andy Bitz,2019-07-17 17:34:38+00:00,"Update `@sentry/node` to v5.5.0 (#2542)

Because Sentry gives a big banner saying to update on the error reports.

Related: https://github.com/getsentry/sentry-javascript/blob/master/MIGRATION.md"
868d4522dbfaeeebf73d5bb07a65067d12ddd7bd,Nathan Rajlich,2019-07-16 00:14:23+00:00,Andy Bitz,2019-07-17 17:34:33+00:00,"Update deps of deps in `yarn.lock` file (#2543)

* Update deps of deps in `yarn.lock` file

To fix #lodashgate:

 * Upgrade `lodash.merge` to version 4.6.2 or later.
 * Upgrade `lodash` to version 4.17.13 or later.

* Regenerate `yarn.lock`"
4d0c638688f0fadbbf0e20badd0cd86c5a06415d,Nathan Rajlich,2019-07-15 23:45:05+00:00,Andy Bitz,2019-07-17 17:34:27+00:00,"[now dev] Wait for `updateBuilders()` to complete before `stop()` completes (#2551)

* [now dev] Wait for `updateBuilders()` to complete before `stop()` completes

Since #2477, the unit tests related to `now dev` have become flaky, and
need to be retried a couple of times before running successfully. My
theory is that this is related to having concurrent `yarn` processes
operating on the builders module directory, causing corruption with yarn's
cache. Waiting for the lazy updating `yarn` process to complete makes
sense to me, hopefully CircleCI agrees.

* Debugging ""list the scopes"" integration test

* Moar debug

* Use regular `require()` when not in a webpack build (ava tests)

* Remove debug"
0080c456d81a0dc034cb75e16ecfa9b681db6c81,Andy,2019-07-15 13:32:05+00:00,Andy Bitz,2019-07-17 17:34:15+00:00,[now dev] Apply the ignore pattern to api files (#2548)
cd36a835eb520160f96e87ee6cb61a45594ae576,Nathan Rajlich,2019-07-12 20:39:43+00:00,Andy Bitz,2019-07-17 17:34:07+00:00,"Add `builders.tar.gz` to pkg ""assets"" configuration (#2541)

Fixes this error from the pkg'd binary:

```
Error: File or directory '/**/now-cli/dist/builders.tar.gz'
was not included into executable at compilation stage.
Please recompile adding it as asset or script.
```"
01b991320447b393409dcc99dd453807ecee9fdd,Nathan Rajlich,2019-07-12 19:33:06+00:00,Andy Bitz,2019-07-17 17:33:54+00:00,"[now dev] Bundle the most popular core builders into CLI binary with lazy builder updates (#2477)

* [now dev] Bundle the most popular core builders into CLI binary

Makes Now CLI bundle a tarball inside its snapshot filesystem that
includes the following builders:

 * @now/go
 * @now/next
 * @now/node
 * @now/php
 * @now/static-build

The tarball is generated by the `build.js` script and ensures the
""latest"" version of the builders are included into the tarball.

When `now dev` is run, the tarball will be extracted upon the first
run to make these builders ""pre-installed"" to avoid the ""Installing
builders"" phase during boot-up.

Overall, this should make booting up `now dev` a lot faster, and help
with offline support.

* Don't install builders if they are bundled

* Persist `assets` dir to CircleCI workspace

* Delete build assets

* Fix installing builders from URL

* Finish builder installation filtering logic

* Still install `@now/build-utils`

* Implement builders installation ""stale-while-revalidate""

* Remove `console.time()`

* Fix unit test

* Add `Readonly<>` to `BuilderWithPackage` type props

* Add debug log stack trace upon builder update failure"
d58a1892655e84b77659d07d4fb75cf75ac03ab1,Sophearak Tha,2019-07-12 15:24:49+00:00,Andy Bitz,2019-07-17 17:33:46+00:00,"[now dev] Improve max lambda size error message (#2539)

* Improve max lambda size error message

* Better wording"
97ff4515ae4528cf6d2dd4520d9002c3a21cab1b,Andy Bitz,2019-07-17 17:32:07+00:00,Andy Bitz,2019-07-17 17:32:07+00:00,15.9.0-canary.8
ad6c04b78d255dc4d0240ace22f0ebeb1a7cce8b,Andy,2019-07-17 15:31:37+00:00,GitHub,2019-07-17 15:31:37+00:00,"[now dev] Fix builder sorting when `use` is undefined (#2566)

* [now dev] Fix function sorting when `use` is undefined

* Update type

* Add filter

* Fix build"
68c1f7163ffbe39846300944b0f9acf5ca003616,Andy Bitz,2019-07-17 12:46:29+00:00,Andy Bitz,2019-07-17 12:46:29+00:00,15.9.0-canary.7
b94e8a15630e2f35775982f6fe768dad41e6ccb5,Andy,2019-07-17 12:45:58+00:00,GitHub,2019-07-17 12:45:58+00:00,Fix tests order (#2565)
60a5659dffb180b7cad65b2f68615e3833608b17,Andy Bitz,2019-07-17 12:34:28+00:00,Andy Bitz,2019-07-17 12:34:28+00:00,"Revert ""15.9.0-canary.7""

This reverts commit 06b8ccb672a80aa8e2c47070d76364738b1f8f00."
06b8ccb672a80aa8e2c47070d76364738b1f8f00,Andy Bitz,2019-07-17 10:04:58+00:00,Andy Bitz,2019-07-17 10:04:58+00:00,15.9.0-canary.7
ca06186cfe1c825ccd5f2fc2f54d815eb040d948,Andy,2019-07-17 09:49:32+00:00,GitHub,2019-07-17 09:49:32+00:00,"[now dev] Fix builder sorting (#2563)

* [now dev] Fix builder sorting

* Add tests

* Fix path

* Add sleep

* Revert ""Add sleep""

This reverts commit 86f0057808eab50f1c977d19989425d633488e23.

* Revert ""Fix path""

This reverts commit 14327b83145c8cb24d5e45ac6e91534a7ef093ec.

* Revert ""Add tests""

This reverts commit 76849a7a5ce79b54f102a11f66920dccaabeadb6."
b5349fe6a56ad0482e324c04a3aada329aeffb8e,Andy,2019-07-16 23:31:56+00:00,GitHub,2019-07-16 23:31:56+00:00,"[now dev] Allow `now dev` as package.json script (#2559)

* [now dev] Allow `now dev` as package.json script

* Fix absolute path for now dev

* Fix directory issue

* Typo

* Update src/commands/dev/dev.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Whitespace

* Make code simpler

* Extend type

* Update errors/now-dev-as-dev-script.md

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Update errors/now-dev-as-dev-script.md

Co-Authored-By: Nathan Rajlich <n@n8.io>"
7ac3c75ee8f733d7fcee0b3da3c10fc380df91df,Nathan Rajlich,2019-07-16 21:44:46+00:00,Nathan Rajlich,2019-07-16 21:44:46+00:00,15.9.0-canary.6
00437fe3f85722b9f1e40b7efb0aafb5f8df1338,Nathan Rajlich,2019-07-16 21:27:35+00:00,GitHub,2019-07-16 21:27:35+00:00,"[now dev] Memoize the `getNowConfig()` promise (#2561)

The `getNowConfig()` function gets invoked frequently, and it is also
async and makes mutations to the cached now config object. This ends
up being a race condition when `getNowConfig()` is invoked concurrently,
since one of the invocations may end up with an incomplete `NowConfig`
object (namely, with missing `builds`/`routes` arrays due to the
zero-config processing).

This change makes it so that there's only one `getNowConfig()` invocation
being executed at a time, and other concurrent executions will await the
same promise that the original invocation is responsible for."
930648da130605f75daa40d9cbbbf31ae34f9421,Nathan Rajlich,2019-07-16 20:28:18+00:00,GitHub,2019-07-16 20:28:18+00:00,"[now dev] Rename `nowJson` variables to `nowConfig` (#2558)

This is only a cosmetic code change, but aligns more nicely with
the new zero-config approach (where there is no `now.json`)."
4945218ea62544acef9946a4fa085e5ac14b393e,Andy,2019-07-16 18:23:40+00:00,GitHub,2019-07-16 18:23:40+00:00,[now dev] Bump @now/build-utils to 0.8.8 (#2557)
12c3987e9467ec8082e1ac75e77c522c988ed579,Andy,2019-07-16 16:21:09+00:00,GitHub,2019-07-16 16:21:09+00:00,[now dev] Bump @now/build-utils (#2556)
18cedcb7e64937826da59b971602e3f3b2041c99,Nathan Rajlich,2019-07-16 00:59:29+00:00,GitHub,2019-07-16 00:59:29+00:00,"Update `@sentry/node` to v5.5.0 (#2542)

Because Sentry gives a big banner saying to update on the error reports.

Related: https://github.com/getsentry/sentry-javascript/blob/master/MIGRATION.md"
925af8066d57f25ca8294e567605e5dddfcca102,Nathan Rajlich,2019-07-16 00:14:23+00:00,GitHub,2019-07-16 00:14:23+00:00,"Update deps of deps in `yarn.lock` file (#2543)

* Update deps of deps in `yarn.lock` file

To fix #lodashgate:

 * Upgrade `lodash.merge` to version 4.6.2 or later.
 * Upgrade `lodash` to version 4.17.13 or later.

* Regenerate `yarn.lock`"
5f46eb9dd732d4f0587c8d1907fdd2da73d031cb,Nathan Rajlich,2019-07-15 23:45:05+00:00,GitHub,2019-07-15 23:45:05+00:00,"[now dev] Wait for `updateBuilders()` to complete before `stop()` completes (#2551)

* [now dev] Wait for `updateBuilders()` to complete before `stop()` completes

Since #2477, the unit tests related to `now dev` have become flaky, and
need to be retried a couple of times before running successfully. My
theory is that this is related to having concurrent `yarn` processes
operating on the builders module directory, causing corruption with yarn's
cache. Waiting for the lazy updating `yarn` process to complete makes
sense to me, hopefully CircleCI agrees.

* Debugging ""list the scopes"" integration test

* Moar debug

* Use regular `require()` when not in a webpack build (ava tests)

* Remove debug"
24245bd4bbf706bcdda381c599c1b544be7bef7b,Andy Bitz,2019-07-15 14:48:43+00:00,Andy Bitz,2019-07-15 14:48:43+00:00,15.9.0-canary.5
005dd24b183921006a88462178091223c976f6c1,Andy,2019-07-15 13:32:05+00:00,GitHub,2019-07-15 13:32:05+00:00,[now dev] Apply the ignore pattern to api files (#2548)
116ee34a10534a319fb9cc07f211ab1b6315f30d,Nathan Rajlich,2019-07-12 20:40:03+00:00,Nathan Rajlich,2019-07-12 20:40:03+00:00,15.9.0-canary.4
81cf441f66692f3fd720912edd65c3c1447eb41c,Nathan Rajlich,2019-07-12 20:39:43+00:00,GitHub,2019-07-12 20:39:43+00:00,"Add `builders.tar.gz` to pkg ""assets"" configuration (#2541)

Fixes this error from the pkg'd binary:

```
Error: File or directory '/**/now-cli/dist/builders.tar.gz'
was not included into executable at compilation stage.
Please recompile adding it as asset or script.
```"
c5a588744ae61edbc9e9ecf02f93d4fd76ce248b,Nathan Rajlich,2019-07-12 19:46:00+00:00,Nathan Rajlich,2019-07-12 19:46:00+00:00,15.9.0-canary.3
48c126a9115938d4baf37dfa049ca483728224e1,Nathan Rajlich,2019-07-12 19:33:06+00:00,GitHub,2019-07-12 19:33:06+00:00,"[now dev] Bundle the most popular core builders into CLI binary with lazy builder updates (#2477)

* [now dev] Bundle the most popular core builders into CLI binary

Makes Now CLI bundle a tarball inside its snapshot filesystem that
includes the following builders:

 * @now/go
 * @now/next
 * @now/node
 * @now/php
 * @now/static-build

The tarball is generated by the `build.js` script and ensures the
""latest"" version of the builders are included into the tarball.

When `now dev` is run, the tarball will be extracted upon the first
run to make these builders ""pre-installed"" to avoid the ""Installing
builders"" phase during boot-up.

Overall, this should make booting up `now dev` a lot faster, and help
with offline support.

* Don't install builders if they are bundled

* Persist `assets` dir to CircleCI workspace

* Delete build assets

* Fix installing builders from URL

* Finish builder installation filtering logic

* Still install `@now/build-utils`

* Implement builders installation ""stale-while-revalidate""

* Remove `console.time()`

* Fix unit test

* Add `Readonly<>` to `BuilderWithPackage` type props

* Add debug log stack trace upon builder update failure"
18c295a88e4e3b4e13a3b8601df8645e51b2964c,Sophearak Tha,2019-07-12 15:25:54+00:00,Sophearak Tha,2019-07-12 15:25:54+00:00,15.9.0-canary.2
893871e0430fb32eebec4c2376e69f0cfb090ab7,Sophearak Tha,2019-07-12 15:24:49+00:00,GitHub,2019-07-12 15:24:49+00:00,"[now dev] Improve max lambda size error message (#2539)

* Improve max lambda size error message

* Better wording"
9f9ce09accff350e760e214d9c1e99f696d52b58,Andy Bitz,2019-07-12 13:49:49+00:00,Andy Bitz,2019-07-12 13:49:49+00:00,15.8.0
f2b1c89a53367caca039f0d91730f953eeca549c,Andy,2019-07-12 13:39:15+00:00,GitHub,2019-07-12 13:39:15+00:00,Remove files from 15.7.0-canary.17 and 15.7.0-canary.14 (#2537)
8e1ca16d38cb9c69e4f0e45ae5f9c17bc2dafd1e,Andy Bitz,2019-07-12 13:25:12+00:00,Andy Bitz,2019-07-12 13:25:12+00:00,"Revert ""Include changes from 15.7.0-canary.14""

This reverts commit 6d4a552c966a2f063de90423de18846c30477a1f."
9291efcfc3849f47037c9dbd51e1318e2247bac2,Andy Bitz,2019-07-12 13:25:10+00:00,Andy Bitz,2019-07-12 13:25:10+00:00,"Revert ""Include tests from 15.7.0-canary.17""

This reverts commit 350d63eacd204ea0396c681834f8252a02d0f87f."
271d7ffc29abf337dbf1c498c955e0ae013a645b,Andy Bitz,2019-07-12 13:13:02+00:00,Andy Bitz,2019-07-12 13:13:02+00:00,15.9.0-canary.1
6d4a552c966a2f063de90423de18846c30477a1f,Nathan Rajlich,2019-07-10 01:58:23+00:00,Andy Bitz,2019-07-12 13:10:34+00:00,Include changes from 15.7.0-canary.14
350d63eacd204ea0396c681834f8252a02d0f87f,Sophearak Tha,2019-07-12 06:10:49+00:00,Andy Bitz,2019-07-12 13:05:35+00:00,Include tests from 15.7.0-canary.17
a7d4ce8c3fa24409eee23153ea4366ac72534e80,Andy,2019-07-12 12:50:14+00:00,Andy Bitz,2019-07-12 12:54:19+00:00,Bump @now/build-utils (#2535)
a4fdc8561cd3dfc1cc3e342c6d891ac5c7414755,Max,2019-07-12 08:34:26+00:00,Andy Bitz,2019-07-12 12:53:12+00:00,"Disable automatic signup (#2530)

* Disable automatic signup

* Use shorter error message

* Update tests

* Update tests with user info

* Create tmpDir before tests

* Tweak fixtures and assertions for new login

* Don't pre-create the test directory in CI

* Use `os.homedir` instead of `~` in tests

* Pre-create auth directory conditionally"
08fff2a14576ac306f21d6fbda0adaad87377817,Sophearak Tha,2019-07-12 06:07:27+00:00,Andy Bitz,2019-07-12 12:53:04+00:00,Increase default maxLambdaSize (#2534)
6b4b73ee94ead953144e375bf1212c6c7aadab87,Luc,2019-07-11 23:35:10+00:00,Andy Bitz,2019-07-12 12:52:57+00:00,"Remove ""missing `alias` in now.json"" warning (#2533)"
98d511b03c364faa1d77da25a8b43bada7346f92,Nathan Rajlich,2019-07-11 02:34:16+00:00,Andy Bitz,2019-07-12 12:52:50+00:00,"[now dev] Render directory listing for Now v2 projects (#2528)

* [now dev] Render directory listing for Now v2 projects

Before directory listings only worked for ""all static"" deployments since
`now dev` would shell out to `serve-handler` to do the rendering.

Now the directory listing rendering logic is moved into `now dev` which
allows projects with Lambdas to also serve the directory listing
(previously they would just 404).

This removes the special-casing of ""all static"" deployments so that
there's only one code path.

Fixes #2161.
Fixes #2417.

* Move `serve-handler/src/directory` types to root

* Set `Content-Length` header for dir listing

* Add unit tests for directory listing

* Fix unit test"
ad5aa576f3f50deda487ba0133b82ac8de43e698,Andy,2019-07-10 16:14:08+00:00,Andy Bitz,2019-07-12 12:52:43+00:00,"[now dev] Update @now/build-utils and handle warnings (#2523)

* [now dev] Update @now/build-utils and handle warnings

* Display warnings from response headers for deployment creation

* Update src/util/dev/server.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Apply routes only when there are no builds

* Updated the build utils"
855940c6fc5f429ad26134385e8833fcf631d6d4,Nathan Rajlich,2019-07-10 01:49:38+00:00,Andy Bitz,2019-07-12 12:52:34+00:00,"[now dev] Update `serve-handler` to v6.1.0 and enable `etag` option (#2525)

* [now dev] Update `serve-handler` to v6.1.0 and enable `etag` option

Sending the `ETag` response header matches how Now in production works.

* Test file contents as well"
ac794e704d4ab6d865d481b2afdcf53e6eec090a,Nathan Rajlich,2019-07-10 00:50:33+00:00,Andy Bitz,2019-07-12 12:52:27+00:00,Add `.gitignore` file to `test/fixtures/unit/now-dev-default-builds-and-routes` (#2524)
09e663d86e4fd49f2e957e4758b17755711181d9,Nathan Rajlich,2019-07-09 21:43:35+00:00,Andy Bitz,2019-07-12 12:52:20+00:00,Add @AndyBitz to `now dev` CODEOWNERS (#2522)
20ee6752adbbd07c020c0ab4ca8d45325fc904e1,Nathan Rajlich,2019-07-09 21:40:48+00:00,Andy Bitz,2019-07-12 12:52:10+00:00,"[now dev] Revert ""Add `etag` response header for Lambda invocations"" (#2520)

* [now dev] Revert ""Add `etag` response header for Lambda invocations""

This reverts commit f80f1f79a6c27767590df4733c730e7f54b3b77c (#2502).

`ETag` header is only sent in production when the lambda function sets
the ""stale-while-revalidate"" cache-control header, which will be
implemented in a separate PR.

* Remove `etag` test assertion"
586e76f930508b044474cccca5a018c78ef49d08,Nathan Rajlich,2019-07-09 21:37:12+00:00,Andy Bitz,2019-07-12 12:51:40+00:00,Add `/src/util/dev` to `CODEOWNERS` file (#2521)
27730b45681e42545a44955e21dc33d2f59943c1,Andy,2019-07-09 21:03:37+00:00,Andy Bitz,2019-07-12 12:51:32+00:00,"[now dev] Fix @now/static-build sorting (#2519)

* [now dev] Fix @now/static-build sorting

* Change tests

* Update src/util/dev/server.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>"
00c792297a7e600ea6f38cbf0b5536c894ccd44c,Andy,2019-07-09 18:58:04+00:00,Andy Bitz,2019-07-12 12:51:25+00:00,[now dev] Tests for routing and apply default frontend builder last (#2518)
ee80ea59f408a1ec9c6a56d369d951adf807b885,Sophearak Tha,2019-07-09 17:05:40+00:00,Andy Bitz,2019-07-12 12:51:19+00:00,"[now-dev] Fix flickering and improve message (#2516)

* Fix flickering and improve message

* Pluralize builds

* Properly handle pluralize form"
d355e9e202a8b79f8d9341738a199bdfa3fd6376,Andy,2019-07-09 16:15:34+00:00,Andy Bitz,2019-07-12 12:51:09+00:00,[now dev] Allow the default static build without an api (#2515)
8289c159c58451458aa05d5e36d9d411a805e10d,Sophearak Tha,2019-07-09 15:04:48+00:00,Andy Bitz,2019-07-12 12:50:55+00:00,Handle 400 create alias error (#2514)
d11f8e4ebf82903ce8246abc2d300d5fdf442a6d,Sophearak Tha,2019-07-09 13:22:07+00:00,Andy Bitz,2019-07-12 12:50:49+00:00,"Simplify builds output message (#2512)

* Simplify builds output message

* Properly stop the spinner

* Handle stop spinning properly and remove unused import

* Update src/commands/deploy/latest.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Update src/commands/deploy/latest.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Properly handle stop spinning at build failed

* Update build failed message

* Remove unused variable

* Remove punctuation in error message

* Update integration test reflect latest change"
43bf805392d7f9190488e09663ff3aa5bdf414a9,Sophearak Tha,2019-07-09 10:32:24+00:00,Andy Bitz,2019-07-12 12:50:41+00:00,"Improve `now dev` output message (#2506)

* Improve `now dev` output message

* Update src/util/dev/builder.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>"
e57cf657fe35a08cea42ae22e95aff8d91386bb3,Sophearak Tha,2019-07-09 10:10:57+00:00,Andy Bitz,2019-07-12 12:50:33+00:00,"Throw an error if `dev` scripts contain `now dev` in package.json (#2507)

* Throw an error if `dev` scripts contain `now dev` in package.json

* Use proper Package type

* Update src/commands/dev/index.ts"
020f9d8da52dd5b1f120b218f1d8495cb67ee974,Nathan Rajlich,2019-07-09 00:44:36+00:00,Andy Bitz,2019-07-12 12:50:26+00:00,"[now dev] Add test case for lazily installing builders (#2510)

This is a follow up for #2509 to add a unit/regression test ensuring
correct functionality."
fd9921730310bc7aa771b8d5c103793158fb8aca,Andy,2019-07-12 12:50:14+00:00,GitHub,2019-07-12 12:50:14+00:00,Bump @now/build-utils (#2535)
a40f0b6d65754c180b0af1aa6213aa3e93332fb7,Andy,2019-07-08 21:04:57+00:00,Andy Bitz,2019-07-12 12:50:02+00:00,"[now dev] Add support for deployments without `now.json` (#2498)

* [now-dev] Add zero config

* Update @now/build-utils

* Update @now/build-utils

* Escape glob

* Fix windows and group globbing

* Made sure routes and builds get updated on file events

* Removed useless check

* Add unit tests

* Use fetch instead of get"
69f81e0ab9d59ba2a5ad16a453520d1748177f90,Nathan Rajlich,2019-07-08 20:02:42+00:00,Andy Bitz,2019-07-12 12:49:53+00:00,"[now dev] Set Now response headers when proxy passing in `routes` (#2500)

* [now dev] Set Now response headers when proxy passing in `routes`

* Fix unit test"
37a3fb04976d868da6f3aec007462a2e6d2afd83,Nathan Rajlich,2019-07-08 18:33:54+00:00,Andy Bitz,2019-07-12 12:49:47+00:00,"[now dev] Install missing builders during runtime (#2509)

Before this change, the `installBuilders()` function was only run at
bootup, so if you modify `now.json` during runtime and add a builder
that's not installed, then a `MODULE_NOT_FOUND` error occurs.

Now the `installBuilders()` function is run with the missing builder
so that the builder can be properly loaded."
77d07f838f5ca959f0f588a6bb7dd0bf1b0f741d,Max Rovensky,2019-07-12 09:38:06+00:00,Max Rovensky,2019-07-12 09:38:06+00:00,15.7.0-canary.18
1f81d805051642974e8425002a29ff74066c874d,Max,2019-07-12 08:34:26+00:00,GitHub,2019-07-12 08:34:26+00:00,"Disable automatic signup (#2530)

* Disable automatic signup

* Use shorter error message

* Update tests

* Update tests with user info

* Create tmpDir before tests

* Tweak fixtures and assertions for new login

* Don't pre-create the test directory in CI

* Use `os.homedir` instead of `~` in tests

* Pre-create auth directory conditionally"
7e950496ae69277deb550e5cdab5407094694cbd,Sophearak Tha,2019-07-12 06:10:49+00:00,Sophearak Tha,2019-07-12 06:10:49+00:00,15.7.0-canary.17
ec43780e1badd07a4870c33d481496bae1224558,Sophearak Tha,2019-07-12 06:07:27+00:00,GitHub,2019-07-12 06:07:27+00:00,Increase default maxLambdaSize (#2534)
66fe14d8e2084f02bd503fcf757657a25cda1b7c,Luc,2019-07-11 23:35:10+00:00,Nathan Rajlich,2019-07-11 23:35:10+00:00,"Remove ""missing `alias` in now.json"" warning (#2533)"
a29abc7d45a4464882cfb7b6c6faf7961012ef94,Andy Bitz,2019-07-11 11:06:54+00:00,Andy Bitz,2019-07-11 11:06:54+00:00,15.7.0-canary.16
5d329e0bc3ed640f18c8414e917f8468d04fb128,Nathan Rajlich,2019-07-11 02:34:16+00:00,GitHub,2019-07-11 02:34:16+00:00,"[now dev] Render directory listing for Now v2 projects (#2528)

* [now dev] Render directory listing for Now v2 projects

Before directory listings only worked for ""all static"" deployments since
`now dev` would shell out to `serve-handler` to do the rendering.

Now the directory listing rendering logic is moved into `now dev` which
allows projects with Lambdas to also serve the directory listing
(previously they would just 404).

This removes the special-casing of ""all static"" deployments so that
there's only one code path.

Fixes #2161.
Fixes #2417.

* Move `serve-handler/src/directory` types to root

* Set `Content-Length` header for dir listing

* Add unit tests for directory listing

* Fix unit test"
2de9edeed47fed8cf33547749ea590bf5f2b4a11,Andy Bitz,2019-07-10 19:48:18+00:00,Andy Bitz,2019-07-10 19:48:18+00:00,15.7.0-canary.15
954d433f6f9a0bb29914723854a980683c4e9d96,Andy,2019-07-10 16:14:08+00:00,GitHub,2019-07-10 16:14:08+00:00,"[now dev] Update @now/build-utils and handle warnings (#2523)

* [now dev] Update @now/build-utils and handle warnings

* Display warnings from response headers for deployment creation

* Update src/util/dev/server.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>

* Apply routes only when there are no builds

* Updated the build utils"
b18196b394685c9db3f296c4246363d916ce3dbd,Nathan Rajlich,2019-07-10 01:58:23+00:00,Nathan Rajlich,2019-07-10 01:58:23+00:00,15.7.0-canary.14
926c14e0ef05d9b29e016e1f60cf365cba557050,Nathan Rajlich,2019-07-10 01:49:38+00:00,GitHub,2019-07-10 01:49:38+00:00,"[now dev] Update `serve-handler` to v6.1.0 and enable `etag` option (#2525)

* [now dev] Update `serve-handler` to v6.1.0 and enable `etag` option

Sending the `ETag` response header matches how Now in production works.

* Test file contents as well"
c2c986e7805fae57e9ca58330b2d50fb872fd03a,Nathan Rajlich,2019-07-10 00:50:33+00:00,GitHub,2019-07-10 00:50:33+00:00,Add `.gitignore` file to `test/fixtures/unit/now-dev-default-builds-and-routes` (#2524)
26e87093e1dd6460d00e8016268adaff3edad020,Nathan Rajlich,2019-07-09 21:43:35+00:00,GitHub,2019-07-09 21:43:35+00:00,Add @AndyBitz to `now dev` CODEOWNERS (#2522)
ba0323e4349aa8846da87f3ddecbe969d6ddef33,Nathan Rajlich,2019-07-09 21:40:48+00:00,GitHub,2019-07-09 21:40:48+00:00,"[now dev] Revert ""Add `etag` response header for Lambda invocations"" (#2520)

* [now dev] Revert ""Add `etag` response header for Lambda invocations""

This reverts commit f80f1f79a6c27767590df4733c730e7f54b3b77c (#2502).

`ETag` header is only sent in production when the lambda function sets
the ""stale-while-revalidate"" cache-control header, which will be
implemented in a separate PR.

* Remove `etag` test assertion"
55229e1ed75dd4b0d035ebd589e73fe7e734c7bc,Nathan Rajlich,2019-07-09 21:37:12+00:00,GitHub,2019-07-09 21:37:12+00:00,Add `/src/util/dev` to `CODEOWNERS` file (#2521)
064213ce52e6315531aff0a4366905ba4783d05a,Andy,2019-07-09 21:03:37+00:00,GitHub,2019-07-09 21:03:37+00:00,"[now dev] Fix @now/static-build sorting (#2519)

* [now dev] Fix @now/static-build sorting

* Change tests

* Update src/util/dev/server.ts

Co-Authored-By: Nathan Rajlich <n@n8.io>"
f0802c681c30181bb6ad899b173e94c771cbcac2,Andy,2019-07-09 18:58:04+00:00,GitHub,2019-07-09 18:58:04+00:00,[now dev] Tests for routing and apply default frontend builder last (#2518)
a6d2ab7d77760bd365c6c320d4d716917498fb24,Sophearak Tha,2019-07-09 17:06:49+00:00,Sophearak Tha,2019-07-09 17:06:49+00:00,15.7.0-canary.13
c5ced92978fd857fcf790a654e5faa66d74bbb24,Sophearak Tha,2019-07-09 17:05:40+00:00,GitHub,2019-07-09 17:05:40+00:00,"[now-dev] Fix flickering and improve message (#2516)

* Fix flickering and improve message

* Pluralize builds

* Properly handle pluralize form"
7efe32f9c8bf0a1d8574bbf86db85a4b6b004959,Andy Bitz,2019-07-09 16:16:10+00:00,Andy Bitz,2019-07-09 16:16:10+00:00,15.7.0-canary.12
60f163d540086c2477b63ba4d3b9b562f6f5d53a,Andy,2019-07-09 16:15:34+00:00,GitHub,2019-07-09 16:15:34+00:00,[now dev] Allow the default static build without an api (#2515)
f507f28f305121aa7c26c27ba0d39043d5bf9a13,Sophearak Tha,2019-07-09 15:11:57+00:00,Sophearak Tha,2019-07-09 15:11:57+00:00,15.7.0-canary.11
54ae7001ec66336cf5f4d2e3c248782ad5dbf631,Sophearak Tha,2019-07-09 15:04:48+00:00,GitHub,2019-07-09 15:04:48+00:00,Handle 400 create alias error (#2514)
d044cfe142874462cdd791b85dd7f226cffccd4a,Sophearak Tha,2019-07-09 13:22:07+00:00,GitHub,2019-07-09 13:22:07+00:00,"Simplify builds output message (#2512)

* Simplify builds output message

* Properly stop the spinner

* Handle stop spinning properly and remove unused import

* Update src/commands/deploy/latest.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Update src/commands/deploy/latest.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Properly handle stop spinning at build failed

* Update build failed message

* Remove unused variable

* Remove punctuation in error message

* Update integration test reflect latest change"
3a1c68b4393e9190b34b2609bcb585df94ecbb23,Sophearak Tha,2019-07-09 10:32:24+00:00,Leo Lamprecht,2019-07-09 10:32:24+00:00,"Improve `now dev` output message (#2506)

* Improve `now dev` output message

* Update src/util/dev/builder.ts

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>"
e0489dc171843e6599327d1edfcca864cda6aec4,Sophearak Tha,2019-07-09 10:10:57+00:00,GitHub,2019-07-09 10:10:57+00:00,"Throw an error if `dev` scripts contain `now dev` in package.json (#2507)

* Throw an error if `dev` scripts contain `now dev` in package.json

* Use proper Package type

* Update src/commands/dev/index.ts"
9919701e2db4d0d02d1a3a1fee771e75c4804745,Nathan Rajlich,2019-07-09 00:44:36+00:00,GitHub,2019-07-09 00:44:36+00:00,"[now dev] Add test case for lazily installing builders (#2510)

This is a follow up for #2509 to add a unit/regression test ensuring
correct functionality."
9ed9ba472e413f4d6a66a932785e9012ef4b357c,Andy Bitz,2019-07-08 21:05:40+00:00,Andy Bitz,2019-07-08 21:05:40+00:00,15.7.0-canary.10
8513ff260becca294d6830725d547b2099483489,Andy,2019-07-08 21:04:57+00:00,GitHub,2019-07-08 21:04:57+00:00,"[now dev] Add support for deployments without `now.json` (#2498)

* [now-dev] Add zero config

* Update @now/build-utils

* Update @now/build-utils

* Escape glob

* Fix windows and group globbing

* Made sure routes and builds get updated on file events

* Removed useless check

* Add unit tests

* Use fetch instead of get"
900c2a11f7ee6b5f30bf050b232a538c638adbe0,Nathan Rajlich,2019-07-08 20:02:42+00:00,Leo Lamprecht,2019-07-08 20:02:42+00:00,"[now dev] Set Now response headers when proxy passing in `routes` (#2500)

* [now dev] Set Now response headers when proxy passing in `routes`

* Fix unit test"
00ffd8d46ce21d8b36f7c8b6a014cb1352b69067,Nathan Rajlich,2019-07-08 18:33:54+00:00,GitHub,2019-07-08 18:33:54+00:00,"[now dev] Install missing builders during runtime (#2509)

Before this change, the `installBuilders()` function was only run at
bootup, so if you modify `now.json` during runtime and add a builder
that's not installed, then a `MODULE_NOT_FOUND` error occurs.

Now the `installBuilders()` function is run with the missing builder
so that the builder can be properly loaded."
1a9958c71e852e8ac5fb59127a506f65f3d6e6d5,Nathan Rajlich,2019-07-02 18:42:33+00:00,Leo Lamprecht,2019-07-07 16:40:59+00:00,"[now dev] Move the `MissingDotenvVarsError` handling to the correct place (#2489)

`validateEnvConfig()` used to be invoked inside of `validateNowConfig()`,
but now it is invoked separately.

Explicitly exiting the process avoids reports going to Sentry."
6688935436cdb99a02dd08d0e34e31233ec0ab77,Sophearak Tha,2019-07-05 12:29:22+00:00,Leo Lamprecht,2019-07-07 16:40:49+00:00,Bump serve-handler version (#2497)
0541ac828479a1fdd07e00b64f2938b30da1354c,Olli Vanhoja,2019-07-07 13:53:46+00:00,Leo Lamprecht,2019-07-07 16:40:34+00:00,Use v3 user tokens API (#2482)
cf4eebbc95cdd8cc469a638fffc91a0e605c1f1c,Nathan Rajlich,2019-07-07 13:43:14+00:00,Leo Lamprecht,2019-07-07 16:40:31+00:00,"[now dev] Allow `cache-control` header to be overwritten (#2501)

* [now dev] Allow `cache-control` header to be overwritten

This matches the behavior in production.

* Add `now-dev-headers` unit test fixture

* Remove `console.error()` call"
3383798bf13e14352321fba15fbc96b39c4292dd,Nathan Rajlich,2019-07-07 13:19:54+00:00,Leo Lamprecht,2019-07-07 16:40:28+00:00,"[now dev] Add `etag` response header for Lambda invocations (#2502)

This matches the behavior in production."
aba51841a217e67f40fce1dbacb46035a862a44a,Nathan Rajlich,2019-07-05 22:22:38+00:00,Leo Lamprecht,2019-07-07 16:40:22+00:00,"[now dev] Set ""must-revalidate"" cache-control response header (#2499)

This matches the production router behavior, and prevents running `now
dev` on a different project from serving stale content from a different
project.

Also update the `x-now-id` header to match the production behavior (it
changed at some point)."
1712405cd32f7c9c6fcbf3403248129d390b31f5,Nathan Rajlich,2019-07-05 20:04:01+00:00,Leo Lamprecht,2019-07-07 16:40:19+00:00,"[now update] Add message saying that Windows is not supported (#2493)

* [now update] Add message saying that Windows is not supported

And direct the user back to the download page in order to re-install.

Closes #2492.

* Exit 1

Co-Authored-By: Steven <steven@ceriously.com>"
cfc326b1ce0f81c516c6172f8d27681823d448e0,Leo Lamprecht,2019-07-07 16:10:51+00:00,Leo Lamprecht,2019-07-07 16:10:51+00:00,15.7.0-canary.9
dab4c6bf6662fd217042581e486a8074c8606ae9,Olli Vanhoja,2019-07-07 13:53:46+00:00,Leo Lamprecht,2019-07-07 13:53:46+00:00,Use v3 user tokens API (#2482)
e21ece162698ce97b02746cfa4f87e360e63eb5a,Nathan Rajlich,2019-07-07 13:43:14+00:00,Leo Lamprecht,2019-07-07 13:43:14+00:00,"[now dev] Allow `cache-control` header to be overwritten (#2501)

* [now dev] Allow `cache-control` header to be overwritten

This matches the behavior in production.

* Add `now-dev-headers` unit test fixture

* Remove `console.error()` call"
f80f1f79a6c27767590df4733c730e7f54b3b77c,Nathan Rajlich,2019-07-07 13:19:54+00:00,Leo Lamprecht,2019-07-07 13:19:54+00:00,"[now dev] Add `etag` response header for Lambda invocations (#2502)

This matches the behavior in production."
24147670266abcf58b1a5fbc094f1991a7af9c9f,Nathan Rajlich,2019-07-05 22:22:38+00:00,Leo Lamprecht,2019-07-05 22:22:38+00:00,"[now dev] Set ""must-revalidate"" cache-control response header (#2499)

This matches the production router behavior, and prevents running `now
dev` on a different project from serving stale content from a different
project.

Also update the `x-now-id` header to match the production behavior (it
changed at some point)."
887b2ccc6b3b79d4bf7cb905c038b721f51d2fd2,Nathan Rajlich,2019-07-05 20:04:01+00:00,GitHub,2019-07-05 20:04:01+00:00,"[now update] Add message saying that Windows is not supported (#2493)

* [now update] Add message saying that Windows is not supported

And direct the user back to the download page in order to re-install.

Closes #2492.

* Exit 1

Co-Authored-By: Steven <steven@ceriously.com>"
27186a377e6d18ef43bf8d5c1bfe940413dcef72,Nathan Rajlich,2019-07-05 18:30:08+00:00,Nathan Rajlich,2019-07-05 18:30:08+00:00,15.7.0
f5fca3a0fbb37e9fc2168db7479b5c8e45b587eb,Nathan Rajlich,2019-07-01 21:54:29+00:00,Nathan Rajlich,2019-07-05 18:25:24+00:00,"[now dev] Use system installed version of Node.js for builds (#2480)

* [now dev] Use system installed version of Node.js for builds

Rather than downloading the 8.10 Node.js binary, simply assume that the
user has their preferred version of `node` already installed onto the
system and use that version.

If there is no `node` binary in the $PATH, then `process.execPath` is
used instead, meaning that the pkg binary node version will be used.

* Simplify `getNodeBin()` using `nothrow` option

* Fix build"
4b75f20f9b418c7669aed72f0e06e4363a387524,Sophearak Tha,2019-07-01 14:19:49+00:00,Nathan Rajlich,2019-07-05 18:25:16+00:00,"Improve metrics (#2472)

* ignore metrics with environment variable

* collect exception and exit code

* add deprecated warning for `now alias [id] [url]`

* add exception in util error

* consistent format

* ensure no duplicate warning

* using the right error message

* refactor metrics util"
64fe29bfea6cc7ace839c165309bde25940f878d,Nathan Rajlich,2019-06-29 00:26:02+00:00,Nathan Rajlich,2019-07-05 18:25:10+00:00,"Remove `mkdirp-promise` (#2478)

Use the implemention from `fs-extra` instead."
eea09ca6cc9f6c45a54eefc53cc833069fb87372,Nathan Rajlich,2019-06-29 00:25:21+00:00,Nathan Rajlich,2019-07-05 18:25:02+00:00,"[now dev] Exit the process upon `ERR_SERVER_NOT_RUNNING` (#2479)

This error happens when Ctrl+C is pressed before the `http.Server`
instance is listening, meaning that the user attempted to quit very
quickly after starting `now dev`.

This change makes the process exit immediately instead of throwing,
which also causes the error to be sent to Sentry (which we do not want)."
f7919230fc2dbe63448f66d63905a0c49350e16a,Mark Glagola,2019-06-28 23:28:30+00:00,Nathan Rajlich,2019-07-05 18:24:55+00:00,"More cert error handling for deploy command (#2475)

* More cert errors handling for deploy command

* Apply suggestions from code review

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Revisions based on review

* Minor revision

* Adds get-deployment-by-id which uses latest v9 endpoint

* Refactor to use apiVersion"
5e092cde57c11ef6df248202cbcea3f261d38237,Nathan Rajlich,2019-06-28 22:23:55+00:00,Nathan Rajlich,2019-07-05 18:24:49+00:00,Update `@now/build-utils` to v0.7.0 (#2474)
96bb51f2663583413a069d340ee49d730d618cf5,Mark Glagola,2019-06-28 14:55:43+00:00,Nathan Rajlich,2019-07-05 18:24:40+00:00,Adds --target to arg-common (#2473)
164d29ccbee14fc9d63ea9a70e01336abadad528,Sophearak Tha,2019-07-05 12:31:12+00:00,Sophearak Tha,2019-07-05 12:31:12+00:00,15.7.0-canary.8
4eb46d0436845f31e2d85055f6bfe9b94f6c61a1,Sophearak Tha,2019-07-05 12:29:22+00:00,GitHub,2019-07-05 12:29:22+00:00,Bump serve-handler version (#2497)
e0c6bb40941c413732b65e0a57406481fa3a4ef4,Nathan Rajlich,2019-07-02 18:42:33+00:00,GitHub,2019-07-02 18:42:33+00:00,"[now dev] Move the `MissingDotenvVarsError` handling to the correct place (#2489)

`validateEnvConfig()` used to be invoked inside of `validateNowConfig()`,
but now it is invoked separately.

Explicitly exiting the process avoids reports going to Sentry."
3926055a5ecc7ae57801cb6e8934593523482f3f,Steven,2019-07-01 21:55:31+00:00,Steven,2019-07-01 21:55:31+00:00,15.7.0-canary.7
8c00134ad15d3c0741cb0d1948d91f4f23143258,Nathan Rajlich,2019-07-01 21:54:29+00:00,Steven,2019-07-01 21:54:29+00:00,"[now dev] Use system installed version of Node.js for builds (#2480)

* [now dev] Use system installed version of Node.js for builds

Rather than downloading the 8.10 Node.js binary, simply assume that the
user has their preferred version of `node` already installed onto the
system and use that version.

If there is no `node` binary in the $PATH, then `process.execPath` is
used instead, meaning that the pkg binary node version will be used.

* Simplify `getNodeBin()` using `nothrow` option

* Fix build"
6a104004e0b7c8ee9cfe8b5b469f4acac486647f,Andy Bitz,2019-07-01 17:40:41+00:00,Andy Bitz,2019-07-01 17:40:41+00:00,15.7.0-canary.6
52df58b7dc759e1e01af0fa26acb3ae722af7bde,Sophearak Tha,2019-07-01 14:21:50+00:00,Sophearak Tha,2019-07-01 14:21:50+00:00,15.7.0-canary.5
983d58c5a6a878e4c00bed9da1fe1cdef76057d7,Sophearak Tha,2019-07-01 14:19:49+00:00,GitHub,2019-07-01 14:19:49+00:00,"Improve metrics (#2472)

* ignore metrics with environment variable

* collect exception and exit code

* add deprecated warning for `now alias [id] [url]`

* add exception in util error

* consistent format

* ensure no duplicate warning

* using the right error message

* refactor metrics util"
ec46e616dbff58e2ee5339e96d62472c3c7618f4,Nathan Rajlich,2019-06-29 00:26:02+00:00,GitHub,2019-06-29 00:26:02+00:00,"Remove `mkdirp-promise` (#2478)

Use the implemention from `fs-extra` instead."
3758e57cb86756a119c5390b69d2779b39df3196,Nathan Rajlich,2019-06-29 00:25:21+00:00,GitHub,2019-06-29 00:25:21+00:00,"[now dev] Exit the process upon `ERR_SERVER_NOT_RUNNING` (#2479)

This error happens when Ctrl+C is pressed before the `http.Server`
instance is listening, meaning that the user attempted to quit very
quickly after starting `now dev`.

This change makes the process exit immediately instead of throwing,
which also causes the error to be sent to Sentry (which we do not want)."
1eaa8f76ea0db4117adb742a2ada44637daa6f86,Mark Glagola,2019-06-28 23:42:10+00:00,Mark Glagola,2019-06-28 23:42:10+00:00,15.7.0-canary.4
8e64d0b5ef502feac8e757684640871530f909d0,Mark Glagola,2019-06-28 23:28:30+00:00,GitHub,2019-06-28 23:28:30+00:00,"More cert error handling for deploy command (#2475)

* More cert errors handling for deploy command

* Apply suggestions from code review

Co-Authored-By: Andy <AndyBitz@users.noreply.github.com>

* Revisions based on review

* Minor revision

* Adds get-deployment-by-id which uses latest v9 endpoint

* Refactor to use apiVersion"
baceee2ecf29d80d7fd091d432e60bd3bef2518f,Nathan Rajlich,2019-06-28 22:23:55+00:00,GitHub,2019-06-28 22:23:55+00:00,Update `@now/build-utils` to v0.7.0 (#2474)
a23b7dd2bc5e380bbc3c488640834a772a7a398f,Mark Glagola,2019-06-28 14:55:43+00:00,GitHub,2019-06-28 14:55:43+00:00,Adds --target to arg-common (#2473)
ad8b141c1cc6d676303ab63ba79d09adad02aa7a,Andy Bitz,2019-06-28 10:14:02+00:00,Andy Bitz,2019-06-28 10:14:02+00:00,15.6.2
9b23d61720050072f8b10bdd4ab9b156186995f8,Andy,2019-06-27 23:45:52+00:00,Andy Bitz,2019-06-28 10:12:10+00:00,"Change url for revert-alias tests to make it more reliable (#2471)

* Change url for revert-alias tests to make it more reliable

* Use project name from now.json

* Remove unused import in tests"
d993650a848b95acba76f9cdb0c5ef1f37dad8e5,Andy,2019-06-27 22:26:54+00:00,Andy Bitz,2019-06-28 10:12:03+00:00,Don't verify the user for `now dev` (#2470)
f0dbb33fd19cb5b2b241d527059362481e2289bb,Andy,2019-06-27 16:18:11+00:00,Andy Bitz,2019-06-28 10:11:55+00:00,Don't show warning (#2468)
0225163353e7634905e5672d08975eca22e29577,Andy Bitz,2019-06-28 10:10:34+00:00,Andy Bitz,2019-06-28 10:10:34+00:00,15.7.0-canary.3
9dbe89f5aaeb8a30845e932fe27ab4554c681b28,Andy,2019-06-27 23:45:52+00:00,GitHub,2019-06-27 23:45:52+00:00,"Change url for revert-alias tests to make it more reliable (#2471)

* Change url for revert-alias tests to make it more reliable

* Use project name from now.json

* Remove unused import in tests"
f89effaa6650faf37bffb5c73b9aac823b4d63d1,Andy,2019-06-27 22:26:54+00:00,GitHub,2019-06-27 22:26:54+00:00,Don't verify the user for `now dev` (#2470)
b7e37af8f1daada0d1aaf1a47f16b13ef4ae4155,Andy Bitz,2019-06-27 16:32:30+00:00,Andy Bitz,2019-06-27 16:32:30+00:00,15.7.0-canary.2
1436e636d3f64f0033e8e2101239e4571cc22163,Andy,2019-06-27 16:18:11+00:00,GitHub,2019-06-27 16:18:11+00:00,Don't show warning (#2468)
b22b3787ffb603fed07e89e47b2ccf85711d0a23,Andy Bitz,2019-06-26 20:57:50+00:00,Andy Bitz,2019-06-26 20:57:50+00:00,15.6.1
e700ad78ee5dd3ef0930c8dc4bf20a474a834c26,Andy,2019-06-26 15:29:35+00:00,Andy Bitz,2019-06-26 20:57:14+00:00,"Make sure to call secrets API only once (#2464)

* Make sure to call secrets API only once

* Use const"
85ccf59a083c94fcc81a71aebfef9eab446bc85e,Andy,2019-06-26 00:11:30+00:00,Andy Bitz,2019-06-26 20:57:05+00:00,Handle deployments rate limit (#2463)
094277cb2e0d1de1c340ee9dd131d154d0169a71,Andy,2019-06-25 13:04:07+00:00,Andy Bitz,2019-06-26 20:56:57+00:00,"Upgrade esm (#2458)

* Upgrade esm

* Use version 3.1.0

* Use version 3.1.4"
e5c7e2d8f0c468ea791aa622c91fc42ba9c2cf66,Mark Glagola,2019-06-24 18:02:16+00:00,Andy Bitz,2019-06-26 20:56:49+00:00,"Handle cert errors in create-deployment (#2455)

* handle cert errors in create-deployment

* Capture challenge_error and txt_record_not_found in mapCertError"
3ee7babf4a02a791c1aa2cf33a8ebb719dc63892,Mark Glagola,2019-06-24 10:51:59+00:00,Andy Bitz,2019-06-26 20:56:41+00:00,"Prompt based DNS add command (#2450)

* Initial prompt based DNS add command

* Adds verify step to dns record prompts

* handle prompt abort"
d2c33bbb0689e9a239919c36c99a4f4cb30b846f,Andy Bitz,2019-06-26 17:28:56+00:00,Andy Bitz,2019-06-26 17:28:56+00:00,15.7.0-canary.1
c5c22620a6de8e82a180f92c3fcb3bf95b1534dc,Andy Bitz,2019-06-26 17:02:32+00:00,Andy Bitz,2019-06-26 17:02:32+00:00,15.6.0-canary.4
fb7b890e409dbdf1a9bc2fa50afe6dd7c77ba334,Andy,2019-06-26 15:29:35+00:00,GitHub,2019-06-26 15:29:35+00:00,"Make sure to call secrets API only once (#2464)

* Make sure to call secrets API only once

* Use const"
4e8512e6601ff6fd3f0800f24246daf9d5d8ba9e,Andy,2019-06-26 00:11:30+00:00,GitHub,2019-06-26 00:11:30+00:00,Handle deployments rate limit (#2463)
29de58b5a76afbf04b8c42434219efa53bdec116,Andy,2019-06-25 13:04:07+00:00,GitHub,2019-06-25 13:04:07+00:00,"Upgrade esm (#2458)

* Upgrade esm

* Use version 3.1.0

* Use version 3.1.4"
7a36b9c6a3d60896bb42bb6268b0c23f6fc3f8ac,Mark Glagola,2019-06-24 18:16:35+00:00,Mark Glagola,2019-06-24 18:16:35+00:00,15.6.0-canary.3
85ba820b27275e6eadb8c8d71cef16a61df9b8f8,Mark Glagola,2019-06-24 18:02:16+00:00,GitHub,2019-06-24 18:02:16+00:00,"Handle cert errors in create-deployment (#2455)

* handle cert errors in create-deployment

* Capture challenge_error and txt_record_not_found in mapCertError"
54ff8ca196c4e6b33b76b55e13aa761838be4ae3,Mark Glagola,2019-06-24 10:51:59+00:00,GitHub,2019-06-24 10:51:59+00:00,"Prompt based DNS add command (#2450)

* Initial prompt based DNS add command

* Adds verify step to dns record prompts

* handle prompt abort"
e630eaebcd7b57003ca8f7d1749ca0f916b4bf2d,Steven,2019-06-21 21:46:51+00:00,Steven,2019-06-21 21:46:51+00:00,15.6.0
493e972720a7617fe7a96b87a1d868bc5181cf6a,Andy,2019-06-21 16:33:44+00:00,Leo Lamprecht,2019-06-21 17:13:59+00:00,"`now rm` improvements (#2449)

* Handle --safe

* Fix  option

* Slice deployments"
e008b6e1cba6e2ae528a12171b9ee600d48e09bd,Andy,2019-06-21 15:57:22+00:00,Leo Lamprecht,2019-06-21 17:13:54+00:00,"Handle --safe (#2448)

* Handle --safe

* Fix  option"
9f40a7cca6737cd67a883fec16151cf0ac539cad,Andy Bitz,2019-06-21 16:35:02+00:00,Andy Bitz,2019-06-21 16:35:02+00:00,15.6.0-canary.2
9be59703787107ab96b42064ddf8698f29109ab9,Andy,2019-06-21 16:33:44+00:00,GitHub,2019-06-21 16:33:44+00:00,"`now rm` improvements (#2449)

* Handle --safe

* Fix  option

* Slice deployments"
22145166899b5bb41987748a0e2b90146c80cce1,Andy,2019-06-21 15:57:22+00:00,Leo Lamprecht,2019-06-21 15:57:22+00:00,"Handle --safe (#2448)

* Handle --safe

* Fix  option"
c739d564a99721fa11b3190da0b7a38c3f53dd3c,Steven,2019-06-20 22:09:06+00:00,Leo Lamprecht,2019-06-21 11:39:04+00:00,Bump @zeit/fun to 0.9.0 (#2445)
dd6dbbfc9bcd803dba41a61685cbe03d7fa16439,Steven,2019-06-20 18:38:07+00:00,Leo Lamprecht,2019-06-21 11:39:00+00:00,[now dev] Improve tests for `@now/build-utils@canary` (#2444)
498615b6b343793973c2127fd036831db1120dc1,Mark Glagola,2019-06-20 14:25:18+00:00,Leo Lamprecht,2019-06-21 11:38:56+00:00,Move `dns_error` to generic CertError (#2443)
491da80c90a48c0239b6b6127b89fa24ab959e55,Mark Glagola,2019-06-19 17:34:38+00:00,Leo Lamprecht,2019-06-21 11:38:52+00:00,"Cert error handling revisions/additions (#2437)

* Cert error handling revisions/additions

* Adds certs/add.js back + updated cert error handling to be pipeable

* remove //todo"
7ceeaf9a6ad379c93719070bdeca7835adf0c4e7,Steven,2019-06-18 23:01:16+00:00,Leo Lamprecht,2019-06-21 11:38:48+00:00,"[now dev] Use canary `@now/build-utils` or stable based on builders (#2441)

* [now dev] Use canary build utils or stable

* Fix version selection

* Fix test

* Fix typo

* Add tests for getBuildUtils

* Add `latest`"
d6e09b098eb4296568bcbdc243825316672b7e1e,Steven,2019-06-18 17:49:05+00:00,Leo Lamprecht,2019-06-21 11:38:42+00:00,Bump `@now/build-utils` to 0.6.0 (#2440)
9056ba54c38773a3d67b1e5307f225c89880fd96,Andy,2019-06-18 17:19:58+00:00,Leo Lamprecht,2019-06-21 11:38:37+00:00,"Update help (#2438)

* Update help

* Make whoami advanced

* Make init basic

* Moved update down"
964d5b32383cce4be9e5db1f733f1ad35253611d,Andy,2019-06-17 21:28:16+00:00,Leo Lamprecht,2019-06-21 11:38:32+00:00,"Update now rm (#2412)

* Update now rm

* Fixed typo

* Don't use .flat() because of node 10

* Exit process

* Remove only the project instead of all deployments of it

* Changed output text

* Headlines for projects and deployments

* Typo and number prefix"
8c035be63fbf60251daef50d3acd827fcedb58d2,Nathan Rajlich,2019-06-17 20:51:51+00:00,Leo Lamprecht,2019-06-21 11:38:26+00:00,"[now update] Handle permissions errors in the file replacement method (#2430)

 1. Handle permissions errors in both update mechanisms
 2. Handle `EBUSY` (Windows) as a file busy error
 3. Update permissions error prompt to say ""Administrator Command Prompt"" on Windows
 4. Add message about ""unexpected end of file"" error"
b7f6d4a859f50b26e398f78980d4467c7f0cfdff,Andy Bitz,2019-06-21 09:31:02+00:00,Andy Bitz,2019-06-21 09:31:02+00:00,15.6.0-canary.1
03404e985834a8d8c4afb89c528d0e0e23e00806,Steven,2019-06-20 22:11:04+00:00,Steven,2019-06-20 22:11:04+00:00,15.4.0-canary.10
236edcc53549a7d038955934c332e37dce7d0dca,Steven,2019-06-20 22:09:06+00:00,GitHub,2019-06-20 22:09:06+00:00,Bump @zeit/fun to 0.9.0 (#2445)
822b12cc969322d54df9008666ee7714a859f361,Steven,2019-06-20 18:38:07+00:00,GitHub,2019-06-20 18:38:07+00:00,[now dev] Improve tests for `@now/build-utils@canary` (#2444)
79d8157798c90d07bb80925cb6f4d116a21d79dd,Mark Glagola,2019-06-20 14:25:18+00:00,GitHub,2019-06-20 14:25:18+00:00,Move `dns_error` to generic CertError (#2443)
12795f7298116c090f8ce69b740f61b6f7c8ce97,Mark Glagola,2019-06-19 17:35:28+00:00,Mark Glagola,2019-06-19 17:35:28+00:00,15.4.0-canary.9
86f6df66071591df0b06fedf1205ddba80ae03e8,Mark Glagola,2019-06-19 17:34:38+00:00,GitHub,2019-06-19 17:34:38+00:00,"Cert error handling revisions/additions (#2437)

* Cert error handling revisions/additions

* Adds certs/add.js back + updated cert error handling to be pipeable

* remove //todo"
b837aca0f8a2f3a145066c96e6b102fd655e1ad7,Steven,2019-06-18 23:01:16+00:00,GitHub,2019-06-18 23:01:16+00:00,"[now dev] Use canary `@now/build-utils` or stable based on builders (#2441)

* [now dev] Use canary build utils or stable

* Fix version selection

* Fix test

* Fix typo

* Add tests for getBuildUtils

* Add `latest`"
557ea3886909a671edcff94d30f90369a0bb4390,Steven,2019-06-18 17:55:55+00:00,Steven,2019-06-18 17:55:55+00:00,15.4.0-canary.8
6a78563b32e5eca57fcb13c8dfc8c6fead9c2902,Steven,2019-06-18 17:49:05+00:00,GitHub,2019-06-18 17:49:05+00:00,Bump `@now/build-utils` to 0.6.0 (#2440)
ec6f71aed9eff5e4e67a5008dabaa58a453d6fd6,Andy Bitz,2019-06-18 17:32:09+00:00,Andy Bitz,2019-06-18 17:32:09+00:00,15.4.0-canary.7
faccd7fb9e56c16b148d7070ccf6fb2aa143325a,Andy,2019-06-18 17:19:58+00:00,GitHub,2019-06-18 17:19:58+00:00,"Update help (#2438)

* Update help

* Make whoami advanced

* Make init basic

* Moved update down"
796bc0acee34344062c21b53ba7205b9acf78e60,Andy Bitz,2019-06-17 21:29:46+00:00,Andy Bitz,2019-06-17 21:29:46+00:00,15.4.0-canary.6
ae2638f7a9d0985be3f0782b6ee36e5a270e6c3d,Andy,2019-06-17 21:28:16+00:00,GitHub,2019-06-17 21:28:16+00:00,"Update now rm (#2412)

* Update now rm

* Fixed typo

* Don't use .flat() because of node 10

* Exit process

* Remove only the project instead of all deployments of it

* Changed output text

* Headlines for projects and deployments

* Typo and number prefix"
51b7716cc73a40570cef1835d9286280756e0b00,Nathan Rajlich,2019-06-17 20:51:51+00:00,GitHub,2019-06-17 20:51:51+00:00,"[now update] Handle permissions errors in the file replacement method (#2430)

 1. Handle permissions errors in both update mechanisms
 2. Handle `EBUSY` (Windows) as a file busy error
 3. Update permissions error prompt to say ""Administrator Command Prompt"" on Windows
 4. Add message about ""unexpected end of file"" error"
6c264fe2438f7601841745c90fd16aa02afa8a5d,Leo Lamprecht,2019-06-13 14:00:50+00:00,Leo Lamprecht,2019-06-13 14:00:50+00:00,15.5.0
1380c9fb2cfed37a648655c2d8e4fc809f7b3764,Nathan Rajlich,2019-06-10 22:41:26+00:00,Leo Lamprecht,2019-06-13 13:55:57+00:00,"[now dev] Move helper modules to `src/util/dev` (#2422)

This organization is consistent with how other commands are structured."
9827f1cb69dc57fd40ed12ad1e536917c4a3ab21,Nathan Rajlich,2019-06-10 21:21:53+00:00,Leo Lamprecht,2019-06-13 13:55:53+00:00,"Lowercase the `x-forwarded-*` and `x-real-ip` headers (#2420)

Fixes #2238."
8fe220c330a7cd7a4aa944898baf88fecfac260b,Nathan Rajlich,2019-06-10 21:07:02+00:00,Leo Lamprecht,2019-06-13 13:55:49+00:00,"[now dev] Run `prettier` (#2419)

Run `prettier` on the `now dev` codebase since the formatting has
gotten out-of-sync over time.

Also removes a stale TODO comment."
9b5b360465c325c0a6fca86491203bc6ac84bce0,Nathan Rajlich,2019-06-10 20:17:23+00:00,Leo Lamprecht,2019-06-13 13:55:44+00:00,"[now dev] Show a warning when `now.json` contains a syntax error (#2418)

Rather then throwing which causes the process to exit.
Better to give the developer a chance to fix the syntax
error without having to restart the dev server afterwards."
a8d4b7826f45f010b2810b385a1d304a3a6c0869,Nathan Rajlich,2019-06-10 18:38:22+00:00,Leo Lamprecht,2019-06-13 13:55:39+00:00,"[now dev] Implement `continue: true` routes (#2413)

* [now dev] Implement `continue: true` routes

Fixes #2088.

* Add `continue: true` unit test

* Add a `continue: true` unit test that matches"
593bcb1025000af1c966e608b4dbf481b9e0d7cc,Nathan Rajlich,2019-06-07 22:14:14+00:00,Leo Lamprecht,2019-06-13 13:55:34+00:00,"Add `whoami` command back (#2411)

* Add `whoami` command back

It was accidentally removed.

Fixes #2410.

* Add `whoami` regression test"
ece9f4679822d89d75f2373c61f5c7c2073aa339,JJ Kasper,2019-06-07 19:40:04+00:00,Leo Lamprecht,2019-06-13 13:55:29+00:00,"[now-dev] Add checking of RegExp src with beginning slash (#2398)

* Add checking of RegExp src with beginning slash

* Move slash no slash check to same line

* Add unit test for dev-router"
c368f98dedd53a1dd978c549b6a9efbba70a0aa2,Nathan Rajlich,2019-06-12 18:09:50+00:00,Nathan Rajlich,2019-06-12 18:09:50+00:00,15.4.0-canary.5
5f1e77cd67e5dcf99eb0decf30832582fddcb94f,Nathan Rajlich,2019-06-10 22:41:26+00:00,GitHub,2019-06-10 22:41:26+00:00,"[now dev] Move helper modules to `src/util/dev` (#2422)

This organization is consistent with how other commands are structured."
a5b4f0bd878e9921630a13da088fb121e8d7f542,Nathan Rajlich,2019-06-10 21:21:53+00:00,GitHub,2019-06-10 21:21:53+00:00,"Lowercase the `x-forwarded-*` and `x-real-ip` headers (#2420)

Fixes #2238."
aab2acf008d146299e71718355988cbdd7587bc7,Nathan Rajlich,2019-06-10 21:07:02+00:00,GitHub,2019-06-10 21:07:02+00:00,"[now dev] Run `prettier` (#2419)

Run `prettier` on the `now dev` codebase since the formatting has
gotten out-of-sync over time.

Also removes a stale TODO comment."
d740df9600365287fdf4ac440eb3bf1f99605cd1,Nathan Rajlich,2019-06-10 20:17:23+00:00,GitHub,2019-06-10 20:17:23+00:00,"[now dev] Show a warning when `now.json` contains a syntax error (#2418)

Rather then throwing which causes the process to exit.
Better to give the developer a chance to fix the syntax
error without having to restart the dev server afterwards."
cb464939a07ba1e5609a1e78d4f940e6d6493c62,Nathan Rajlich,2019-06-10 18:50:48+00:00,Nathan Rajlich,2019-06-10 18:50:48+00:00,15.4.0-canary.4
0f2b35175c4ab34462fb798df2d59173fcaa922e,Nathan Rajlich,2019-06-10 18:38:22+00:00,GitHub,2019-06-10 18:38:22+00:00,"[now dev] Implement `continue: true` routes (#2413)

* [now dev] Implement `continue: true` routes

Fixes #2088.

* Add `continue: true` unit test

* Add a `continue: true` unit test that matches"
33fe99ea438431fc9ee333d99e438edf545aa3bd,JJ Kasper,2019-06-08 21:02:45+00:00,JJ Kasper,2019-06-08 21:02:45+00:00,15.4.0-canary.3
22344045b85398fb9cac390cf781e681312698cc,Nathan Rajlich,2019-06-07 22:14:14+00:00,GitHub,2019-06-07 22:14:14+00:00,"Add `whoami` command back (#2411)

* Add `whoami` command back

It was accidentally removed.

Fixes #2410.

* Add `whoami` regression test"
a81ed47ebc2466d685d24b16b8d17e66fa89e3e9,JJ Kasper,2019-06-07 19:40:04+00:00,GitHub,2019-06-07 19:40:04+00:00,"[now-dev] Add checking of RegExp src with beginning slash (#2398)

* Add checking of RegExp src with beginning slash

* Move slash no slash check to same line

* Add unit test for dev-router"
e245b2fd90bffdb0d5b33697cf9e1b8e8fc6675f,Nathan Rajlich,2019-06-05 22:13:03+00:00,Nathan Rajlich,2019-06-05 22:13:03+00:00,15.4.0
ba6ddc380d0fd7ec9347417ee88a60813408a805,Luc,2019-06-05 21:46:03+00:00,Nathan Rajlich,2019-06-05 22:12:45+00:00,"[now update] Add integration test (#2405)

* add simple integration to test `now update`

* remove `.only`

* verify that `now --version` includes `canary`"
402ec684eb621e12dad9aceac3e4322c51944664,Nathan Rajlich,2019-06-05 21:12:11+00:00,Nathan Rajlich,2019-06-05 22:12:39+00:00,[now update] No login required (#2406)
8b8af2144599bd6996c024fd44046306e9c0fbd2,Andy,2019-06-05 12:13:38+00:00,Nathan Rajlich,2019-06-05 22:12:32+00:00,"Fix `now rm` and decrease total projects for `now ls`  (#2404)

* Use v4 instead to prevent listing the same deployment multiple times

* Remove the latestDeployments since it is depracted and doesn't have the
`readyState` property and only get 35 projects instead of 50 to lower
the rate limit

* Fix tests"
1ead4f2e2cb71540c6a612f104e7cb65f15ac5d7,Nathan Rajlich,2019-06-05 00:43:43+00:00,Nathan Rajlich,2019-06-05 22:12:27+00:00,"Add `now update` command (#2388)

* Add `now update` command

Updates the `now` binary in-place.

* Tweaks

* Remove `.ts` suffix in `import` statement

* Remove unused imports

* Implement `getPlatform()`

* Add `ETXTBSY` error fallback method

* Remove `StreamError` import

* Add `chown()` logic

* Remove `console.error()`

* Add `now update` to --help

* Add beta message with feedback URL

* Deprecate `now upgrade` and `now downgrade` commands

* Mention `now upgrade` when a new version is available

* Add `now update` message to `now upgrade`

* Final tweaks"
43047cfa24c3ddba0652e75323ea8f1eb08a43ac,Andy,2019-06-04 23:20:14+00:00,Nathan Rajlich,2019-06-05 22:12:18+00:00,"Use the projects API for `now ls` (#2403)

* Use the projects API for `now ls`

* Use recentDeployments"
33dc9a5767db5efbdbf9201a59cf8178f3e37fe4,Mark Glagola,2019-06-04 18:08:49+00:00,Nathan Rajlich,2019-06-05 22:12:10+00:00,Handle transfer-in registration_failed (#2402)
8bf7ed52c431b4f6e0af35fb4cc7e10585d8536e,Mark,2019-05-30 00:19:50+00:00,Nathan Rajlich,2019-06-05 22:12:01+00:00,Update `@zeit/ncc` to v0.18.5 (#2389)
a495b1979375cd79d970e134c68b81decfbe9219,Nathan Rajlich,2019-05-29 18:16:32+00:00,Nathan Rajlich,2019-06-05 22:11:54+00:00,Update `@zeit/fun` to v0.8.1 (#2391)
42b24b490434f283af54b819205e99f1fd258397,Nathan Rajlich,2019-05-27 19:16:57+00:00,Nathan Rajlich,2019-06-05 22:11:48+00:00,"[now dev] Strip prefixed `/` when doing routes matching (#2361)

* [now dev] Strip prefixed `/` when doing routes matching

The prefixed `/` is implicit when matching routes, so strip them
so that they are optional. This matches the behavior in production.

* Fix unit tests

* More readable

* Add unit test"
10347279ba277ccbee9bdaaea710efa2afc7c653,Steven,2019-05-25 17:53:10+00:00,Nathan Rajlich,2019-06-05 22:11:39+00:00,[now-init] Check for dir existence prior to download (#2379)
a31c29fc13289576e434e63c8dc0e223dea5c556,Nathan Rajlich,2019-05-22 20:04:03+00:00,Nathan Rajlich,2019-06-05 22:11:32+00:00,"[now dev] Use empty string for missing matches (#2376)

Rather than `undefined`. This matches the behavior in production.

Fixes #2375."
9d110bd1c983fdf64e497cea2c1e311f0b1f4e8f,Sophearak Tha,2019-05-22 02:37:39+00:00,Nathan Rajlich,2019-06-05 22:11:25+00:00,Mimic browser user agent (#2372)
9d247a4fb6117a485017d8a06ca8dbd33b8f0f4a,Nathan Rajlich,2019-06-05 21:55:30+00:00,Nathan Rajlich,2019-06-05 21:55:30+00:00,15.4.0-canary.2
33f6db1dafafb755fd665a2b8fbb8580c7dd3ef5,Luc,2019-06-05 21:46:03+00:00,Leo Lamprecht,2019-06-05 21:46:03+00:00,"[now update] Add integration test (#2405)

* add simple integration to test `now update`

* remove `.only`

* verify that `now --version` includes `canary`"
cf7e0e14f55c24a7e1801dffaa7f6819150de445,Nathan Rajlich,2019-06-05 21:12:11+00:00,GitHub,2019-06-05 21:12:11+00:00,[now update] No login required (#2406)
88a896684f0ce8e8c377d4bdd27135cfca5f3f94,Andy Bitz,2019-06-05 17:08:51+00:00,Andy Bitz,2019-06-05 17:08:51+00:00,15.4.0-canary.1
55f5aa5b79deb3c28abe0f20b01d982d33d778cc,Andy Bitz,2019-06-05 12:14:25+00:00,Andy Bitz,2019-06-05 12:14:25+00:00,15.2.1-canary.7
a4be2eb79da7582db182737437bc451c7f08d61b,Andy,2019-06-05 12:13:38+00:00,GitHub,2019-06-05 12:13:38+00:00,"Fix `now rm` and decrease total projects for `now ls`  (#2404)

* Use v4 instead to prevent listing the same deployment multiple times

* Remove the latestDeployments since it is depracted and doesn't have the
`readyState` property and only get 35 projects instead of 50 to lower
the rate limit

* Fix tests"
81c770569005c0d6db92cadc7862e6d15b6e930d,Andy Bitz,2019-06-05 00:45:24+00:00,Andy Bitz,2019-06-05 00:45:24+00:00,15.2.1-canary.6
4dda34fe283c2f32e12d82303acc5dac7d7bcf80,Nathan Rajlich,2019-06-05 00:43:43+00:00,Andy,2019-06-05 00:43:43+00:00,"Add `now update` command (#2388)

* Add `now update` command

Updates the `now` binary in-place.

* Tweaks

* Remove `.ts` suffix in `import` statement

* Remove unused imports

* Implement `getPlatform()`

* Add `ETXTBSY` error fallback method

* Remove `StreamError` import

* Add `chown()` logic

* Remove `console.error()`

* Add `now update` to --help

* Add beta message with feedback URL

* Deprecate `now upgrade` and `now downgrade` commands

* Mention `now upgrade` when a new version is available

* Add `now update` message to `now upgrade`

* Final tweaks"
5a05f6896f0b1580b965833a8255a0511b969e78,Andy,2019-06-04 23:20:14+00:00,Leo Lamprecht,2019-06-04 23:20:14+00:00,"Use the projects API for `now ls` (#2403)

* Use the projects API for `now ls`

* Use recentDeployments"
e8f7158d52122debe2a04b73ef3ca5b366857136,Mark Glagola,2019-06-04 20:39:04+00:00,Mark Glagola,2019-06-04 20:39:04+00:00,15.2.1-canary.5
fa10b78b30b7080015fb30749cacad7369608b88,Mark Glagola,2019-06-04 18:08:49+00:00,GitHub,2019-06-04 18:08:49+00:00,Handle transfer-in registration_failed (#2402)
b9be120b175d134f92237f7e984e7c30ecb1dd5c,Mark,2019-05-30 00:19:50+00:00,Nathan Rajlich,2019-05-30 00:19:50+00:00,Update `@zeit/ncc` to v0.18.5 (#2389)
4020eb12541bb9d339fe2a5c5603e71b7d071497,Nathan Rajlich,2019-05-29 18:16:32+00:00,GitHub,2019-05-29 18:16:32+00:00,Update `@zeit/fun` to v0.8.1 (#2391)
15178f0332cf5d71b153bbaa880329ad88c53db7,Nathan Rajlich,2019-05-27 19:54:03+00:00,Nathan Rajlich,2019-05-27 19:54:03+00:00,15.2.1-canary.4
04c11e266a1884a866b342c95b6cfa92ff111ece,Nathan Rajlich,2019-05-27 19:16:57+00:00,GitHub,2019-05-27 19:16:57+00:00,"[now dev] Strip prefixed `/` when doing routes matching (#2361)

* [now dev] Strip prefixed `/` when doing routes matching

The prefixed `/` is implicit when matching routes, so strip them
so that they are optional. This matches the behavior in production.

* Fix unit tests

* More readable

* Add unit test"
7bd40f0aae063491c64b059a93c7c0c0c669e9d9,Steven,2019-05-25 17:53:10+00:00,GitHub,2019-05-25 17:53:10+00:00,[now-init] Check for dir existence prior to download (#2379)
ca17c6da361902eaad0ba2d55207b1fb0b5d548c,Nathan Rajlich,2019-05-22 20:04:03+00:00,GitHub,2019-05-22 20:04:03+00:00,"[now dev] Use empty string for missing matches (#2376)

Rather than `undefined`. This matches the behavior in production.

Fixes #2375."
16b99a6f72747aad2abe2c3168d5f8078780179f,Sophearak Tha,2019-05-22 02:37:39+00:00,GitHub,2019-05-22 02:37:39+00:00,Mimic browser user agent (#2372)
de7c0aec3916ded94c4c9087012b4bee04d6e57a,Nathan Rajlich,2019-05-20 20:11:18+00:00,Nathan Rajlich,2019-05-20 20:11:18+00:00,15.3.0
6232078ad342d8cda039b463aa737bd05f116404,Sophearak Tha,2019-05-20 10:44:07+00:00,Leo Lamprecht,2019-05-20 19:15:30+00:00,Add .now ignore by default (#2365)
418d550f2a16a6ca32b6700540dc41d5f3e2fd7d,Andy,2019-05-17 18:43:25+00:00,Leo Lamprecht,2019-05-20 19:15:25+00:00,Increase the time we wait for the aliasing (#2360)
81b0e995e18958674d81a7683feecaec3ffdb268,Sophearak Tha,2019-05-17 17:15:56+00:00,Leo Lamprecht,2019-05-20 19:15:18+00:00,"Integrate universal metrics (#2346)

* integrate universal metrics

* Update src/index.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Add default `collectMetrics` config

* Remove flag, only using global config to disable metrics

* Add GA tracking ID

* Move constant to file

* Rename constant to constants

* Rename `dsn` to `SENTRY_DSN`

* Apply suggestions from code review

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Remove extra space

* Update event category and action

* Remove usagestate to use universal-analytics

* Chain timing and event function

* Make sure to user are unique

* Ensure unique User ID

* Add extra User-Agent and move metrics into its own file

* Use default export"
22fd52c8dbfde42ad12fa4914251ff1f2fd6aeef,Samuel Hapk,2019-05-17 16:42:42+00:00,Leo Lamprecht,2019-05-20 19:15:14+00:00,"Help users to deal with secrets starting with dash (#2253)

People are often trying to store secrets starting with dashes such as 
private keys. These dashes get interpreted as command line options which
effectively prevents a storage of private keys.

Fortunately, this is easily resolved by using bash -- convention to mark
an end of options, such as:

`now secret add google-secret-key -- ""-----BEGIN PRIVATE KEY-----
abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVXYZ+/a
-----END PRIVATE KEY-----""

The problem is also discussed in following issues: 
https://github.com/zeit/now-cli/issues/749
https://github.com/zeit/now-cli/issues/80"
6a20529b892bfa035ac98863236a374fdfc85df7,Nathan Rajlich,2019-05-17 16:41:02+00:00,Leo Lamprecht,2019-05-20 19:15:10+00:00,"[now dev] Create `yarn.cmd` file on Windows (#2358)

The `yarn.cmd` file is necessary for `yarn` to be executable
when running `now dev` through cmd.exe"
1988f820bfc8a1fcf3419c66051843b77e4a258e,Nathan Rajlich,2019-05-16 17:40:09+00:00,Leo Lamprecht,2019-05-20 19:15:06+00:00,"[now dev] Use `chokidar` for file watching (#2350)

* [now dev] Use `chokidar` for file watching

`nsfw` is not suitable for very large projects because it does not
have any ""ignore"" functionality implemented.

For macOS, the `useFsEvents` option is _disabled_, so that the
`fsevents.node` binary file does not need to be cached onto the
filesystem, which simplifies things for use with `pkg` binaries.

* Delete the `fsevents` module during build

* Add proper `.nowignore` logic to the chokidar watcher"
0bafb6286a278db6ead6c34928562b5c22d6f6c9,Nathan Rajlich,2019-05-16 00:47:56+00:00,Leo Lamprecht,2019-05-20 19:15:01+00:00,"[now dev] Consider `devDependencies` when looking up package name (#2352)

Alpha versions of `now dev` that used npm instead of yarn were
installing the packages to `devDependencies` rather than `dependencies`,
so this fixes package name lookup when a legacy cache like that is on
the user's machine."
80ebd659fc542945bf79e8eadc7aff29699ec1aa,Nathan Rajlich,2019-05-11 00:13:51+00:00,Leo Lamprecht,2019-05-20 19:14:56+00:00,"[now dev] Use the dev server `cwd` as builder's `workPath` (#2326)

* [now dev] Use the dev server `cwd` as builder's `workPath`

Rather than copying the source files into a temporary directory,
simply use the existing source files in the `cwd`. This will make
subsequent boots of `now dev` be faster (i.e. because the `node_modules`
directory will already be in place), as well as use much less space on
the filesystem because temporary directory are no longer being used.

This will require some changes to the builders and `@now/build-utils`,
to ensure that the `download()` function is always installing into
`workPath`, and that the `meta` object passed to the `build()` function
is also passed into the `download()` function.

For example:

 - https://github.com/zeit/now-builders/pull/474
 - https://github.com/zeit/now-builders/pull/475

* Update `@now/build-utils` to v0.5.5-canary.1

This makes `download()` be a no-op when running in `now dev`.

* Add test case for `@now/next`

* Fix debug log formatting"
2d16c36f8d6b72f475ae5972e83ded55fb713620,Nathan Rajlich,2019-05-10 18:08:39+00:00,Leo Lamprecht,2019-05-20 19:14:51+00:00,"Re-enable ""try to create a builds deployments with wrong config"" integration test (#2337)

It was temporarily disabled due to server-side issues, but that has been
fixed now."
ca1930cb441ab41c071fd438f168bda82f7f7e1f,Mark Glagola,2019-05-10 12:54:58+00:00,Leo Lamprecht,2019-05-20 19:14:45+00:00,Fix transfer in price for some TLDs (#2334)
91b4e7a308fc2adaefa8996b91f6b2b35fac34b8,Nathan Rajlich,2019-05-10 11:09:28+00:00,Leo Lamprecht,2019-05-20 19:14:40+00:00,"[now dev] Mix in routes query params when proxying to a URL (#2330)

* [now dev] Mix in routes query params when proxying to a URL

Fixes #2289.

* Refactor unit tests and add a unit test for proxy passing with query params

* Fix TypeScript compile error

* [DEBUG] Disable proxy pass unit test

* Run unit tests serially

* Remove `console.error()` in unit test

* Temporarily disable integration test ""try to create a builds deployments with wrong config"""
4fac67f39e2876938b14025cbbcd7bade8effa58,Nathan Rajlich,2019-05-07 22:56:08+00:00,Leo Lamprecht,2019-05-20 19:14:35+00:00,"Adjust `now init` and `now dev` to not require a login token (#2325)

* Adjust `now init` and `now dev` to not require a login token

These two commands should not require a login token because
they do not interact with the Now API.

* Remove `config` from `subcommandsWithoutToken` array

It's not an existing command."
88a4f52ccd63d60245997720afa198b92f93e034,Sophearak Tha,2019-05-20 10:46:46+00:00,Sophearak Tha,2019-05-20 10:46:46+00:00,15.2.1-canary.3
e975ddca8b3968caed8f5f1b7445cc247883ecf3,Sophearak Tha,2019-05-20 10:44:07+00:00,GitHub,2019-05-20 10:44:07+00:00,Add .now ignore by default (#2365)
225afafe43a9fb3b40e6119afd7d1139286783bf,Leo Lamprecht,2019-05-17 18:45:04+00:00,Leo Lamprecht,2019-05-17 18:45:04+00:00,15.2.1-canary.2
1bafb4686f37788cb0fa5757c703aecaac312301,Andy,2019-05-17 18:43:25+00:00,Leo Lamprecht,2019-05-17 18:43:25+00:00,Increase the time we wait for the aliasing (#2360)
2777ec3e2cba5035585b2f463ec2b5103b82557f,Sophearak Tha,2019-05-17 17:15:56+00:00,Leo Lamprecht,2019-05-17 17:15:56+00:00,"Integrate universal metrics (#2346)

* integrate universal metrics

* Update src/index.js

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Add default `collectMetrics` config

* Remove flag, only using global config to disable metrics

* Add GA tracking ID

* Move constant to file

* Rename constant to constants

* Rename `dsn` to `SENTRY_DSN`

* Apply suggestions from code review

Co-Authored-By: Leo Lamprecht <mindrun@icloud.com>

* Remove extra space

* Update event category and action

* Remove usagestate to use universal-analytics

* Chain timing and event function

* Make sure to user are unique

* Ensure unique User ID

* Add extra User-Agent and move metrics into its own file

* Use default export"
6f817971d0be15500393cf63e192da0d48274884,Samuel Hapk,2019-05-17 16:42:42+00:00,Leo Lamprecht,2019-05-17 16:42:42+00:00,"Help users to deal with secrets starting with dash (#2253)

People are often trying to store secrets starting with dashes such as 
private keys. These dashes get interpreted as command line options which
effectively prevents a storage of private keys.

Fortunately, this is easily resolved by using bash -- convention to mark
an end of options, such as:

`now secret add google-secret-key -- ""-----BEGIN PRIVATE KEY-----
abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVXYZ+/a
-----END PRIVATE KEY-----""

The problem is also discussed in following issues: 
https://github.com/zeit/now-cli/issues/749
https://github.com/zeit/now-cli/issues/80"
9358b01cacfde95f75feb2b08ada107c0c9dbb8e,Nathan Rajlich,2019-05-17 16:41:02+00:00,Leo Lamprecht,2019-05-17 16:41:02+00:00,"[now dev] Create `yarn.cmd` file on Windows (#2358)

The `yarn.cmd` file is necessary for `yarn` to be executable
when running `now dev` through cmd.exe"
a8f8da99069c32e162925f3920149c89538ac7ac,Nathan Rajlich,2019-05-16 17:49:33+00:00,Nathan Rajlich,2019-05-16 17:49:33+00:00,15.2.1-canary.1
b2d8550777363916dc129fe1c8f2b8c7d8ba4655,Nathan Rajlich,2019-05-16 17:40:09+00:00,GitHub,2019-05-16 17:40:09+00:00,"[now dev] Use `chokidar` for file watching (#2350)

* [now dev] Use `chokidar` for file watching

`nsfw` is not suitable for very large projects because it does not
have any ""ignore"" functionality implemented.

For macOS, the `useFsEvents` option is _disabled_, so that the
`fsevents.node` binary file does not need to be cached onto the
filesystem, which simplifies things for use with `pkg` binaries.

* Delete the `fsevents` module during build

* Add proper `.nowignore` logic to the chokidar watcher"
51b6031eab70dd0b23f4a7fa323607e25053ac68,Nathan Rajlich,2019-05-16 00:47:56+00:00,GitHub,2019-05-16 00:47:56+00:00,"[now dev] Consider `devDependencies` when looking up package name (#2352)

Alpha versions of `now dev` that used npm instead of yarn were
installing the packages to `devDependencies` rather than `dependencies`,
so this fixes package name lookup when a legacy cache like that is on
the user's machine."
370961e872a4637888fa0bec6c785bfe176ae751,Nathan Rajlich,2019-05-13 19:51:07+00:00,Nathan Rajlich,2019-05-13 19:51:07+00:00,15.2.1-canary.0
43e297062053d6430fc1cc8ba517b581ea3487bc,Nathan Rajlich,2019-05-11 03:05:15+00:00,Nathan Rajlich,2019-05-11 03:05:15+00:00,15.1.1-canary.4
385c4e4a2f58b7a6f37b1e0c11fc389f2215af13,Nathan Rajlich,2019-05-11 00:13:51+00:00,GitHub,2019-05-11 00:13:51+00:00,"[now dev] Use the dev server `cwd` as builder's `workPath` (#2326)

* [now dev] Use the dev server `cwd` as builder's `workPath`

Rather than copying the source files into a temporary directory,
simply use the existing source files in the `cwd`. This will make
subsequent boots of `now dev` be faster (i.e. because the `node_modules`
directory will already be in place), as well as use much less space on
the filesystem because temporary directory are no longer being used.

This will require some changes to the builders and `@now/build-utils`,
to ensure that the `download()` function is always installing into
`workPath`, and that the `meta` object passed to the `build()` function
is also passed into the `download()` function.

For example:

 - https://github.com/zeit/now-builders/pull/474
 - https://github.com/zeit/now-builders/pull/475

* Update `@now/build-utils` to v0.5.5-canary.1

This makes `download()` be a no-op when running in `now dev`.

* Add test case for `@now/next`

* Fix debug log formatting"
39591b4776ff4cce407ede464bd1eb006bd16553,Nathan Rajlich,2019-05-10 18:08:39+00:00,GitHub,2019-05-10 18:08:39+00:00,"Re-enable ""try to create a builds deployments with wrong config"" integration test (#2337)

It was temporarily disabled due to server-side issues, but that has been
fixed now."
2f0218aaa53a4be4d37ff24eb0b022146e3047ff,Mark Glagola,2019-05-10 12:54:58+00:00,GitHub,2019-05-10 12:54:58+00:00,Fix transfer in price for some TLDs (#2334)
9ed897c6bedf923b0f716dd4bad8ced3272cc9a2,Nathan Rajlich,2019-05-10 11:09:28+00:00,Leo Lamprecht,2019-05-10 11:09:28+00:00,"[now dev] Mix in routes query params when proxying to a URL (#2330)

* [now dev] Mix in routes query params when proxying to a URL

Fixes #2289.

* Refactor unit tests and add a unit test for proxy passing with query params

* Fix TypeScript compile error

* [DEBUG] Disable proxy pass unit test

* Run unit tests serially

* Remove `console.error()` in unit test

* Temporarily disable integration test ""try to create a builds deployments with wrong config"""
b53d907b745126113bc3e251ac2451088026a363,Nathan Rajlich,2019-05-07 22:56:08+00:00,GitHub,2019-05-07 22:56:08+00:00,"Adjust `now init` and `now dev` to not require a login token (#2325)

* Adjust `now init` and `now dev` to not require a login token

These two commands should not require a login token because
they do not interact with the Now API.

* Remove `config` from `subcommandsWithoutToken` array

It's not an existing command."
7c4ab3989ae6e8ccdd290894fa0eeeae803605e8,Nathan Rajlich,2019-05-07 01:16:47+00:00,Nathan Rajlich,2019-05-07 01:16:47+00:00,15.2.0
2c6faa5eab25732bb3e04d4fe65d57339b95ae19,Nathan Rajlich,2019-05-06 21:38:11+00:00,Nathan Rajlich,2019-05-07 01:15:29+00:00,"[now dev] Inherit env vars from `now.json` (#2321)

* [now dev] Inherit env vars from `now.json`

Before it was only using env vars defined in the `.env` and `.env.build`
dotenv files.

* Fix secrets validation"
2707149352b886387f6a3987e1a311a087a6fb1c,Andy,2019-05-06 19:58:11+00:00,Nathan Rajlich,2019-05-07 01:15:23+00:00,"Fix Git Bash and make update/uninstall work on Windows (#2322)

* Update index.js

* Fix bash file"
2834c188e77d250deec948a8703183b94a60c9a3,Nathan Rajlich,2019-05-06 18:06:38+00:00,Nathan Rajlich,2019-05-07 01:15:18+00:00,"[now dev] Add `meta.env` and `meta.buildEnv` for builders (#2320)

Some builders require access to the runtime env vars, i.e. `@now/next`
since it spawns a `next dev` subprocess and should be passing the
runtime env vars to that."
7aa2a27fc9574196407c9ccff578ae888b194a44,Nathan Rajlich,2019-05-06 23:39:44+00:00,Nathan Rajlich,2019-05-06 23:39:44+00:00,15.1.1-canary.3
742be77cfb070cb85893e328b8543b1e93f0fe2c,Nathan Rajlich,2019-05-06 21:38:11+00:00,GitHub,2019-05-06 21:38:11+00:00,"[now dev] Inherit env vars from `now.json` (#2321)

* [now dev] Inherit env vars from `now.json`

Before it was only using env vars defined in the `.env` and `.env.build`
dotenv files.

* Fix secrets validation"
44946520ef45829bcaee4e98efd6cb8201d06c05,Andy Bitz,2019-05-06 19:59:43+00:00,Andy Bitz,2019-05-06 19:59:43+00:00,15.1.1-canary.2
35d45f7493a30dc99b36c374721f1f95853903a7,Andy,2019-05-06 19:58:11+00:00,GitHub,2019-05-06 19:58:11+00:00,"Fix Git Bash and make update/uninstall work on Windows (#2322)

* Update index.js

* Fix bash file"
a6fa395822b9877052cafb205eec0d13b4064e8f,Nathan Rajlich,2019-05-06 18:06:38+00:00,GitHub,2019-05-06 18:06:38+00:00,"[now dev] Add `meta.env` and `meta.buildEnv` for builders (#2320)

Some builders require access to the runtime env vars, i.e. `@now/next`
since it spawns a `next dev` subprocess and should be passing the
runtime env vars to that."
48ff96d9e7cb181ecfabd09f9f70e59289f3f8bc,Leo Lamprecht,2019-05-06 12:03:36+00:00,Leo Lamprecht,2019-05-06 12:03:36+00:00,15.1.1-canary.1
0f31bc1f68aac120a22773dd20696056fbb98e9a,Nathan Rajlich,2019-05-04 00:24:33+00:00,Nathan Rajlich,2019-05-04 00:24:33+00:00,15.1.0
6f3ff2abf0b737ff8fb80d539f94bf3d4b6e1f16,Steven,2019-05-03 17:18:40+00:00,Nathan Rajlich,2019-05-04 00:21:52+00:00,Update Readme with `now dev` workflow (#2308)
3398e6da2702686007f2797ca62ede2483b740a3,Nathan Rajlich,2019-05-03 12:21:26+00:00,Nathan Rajlich,2019-05-04 00:21:51+00:00,"[now dev] Implement `methods` in `routes` config (#2306)

Fixes #2148."
22f7d69a7e91d679fdc314c79615960cc89654de,Nathan Rajlich,2019-05-03 12:20:33+00:00,Nathan Rajlich,2019-05-04 00:21:51+00:00,"[now dev] Send all status codes if routes config contains one (#2307)

Before it was only respecting the status code for 301, 302 and 303
status codes. Now it handles any status code defined in the routes
config.

Fixes #2294."
cb76d02dcc7bba5a0bf9f52f919c91cdde31b0c5,Matthew Sweeney,2019-05-02 19:06:40+00:00,Nathan Rajlich,2019-05-04 00:21:50+00:00,"[now init] Add line breaks to success message (#2285)

* add line break to success message

* change to using original util

* Update src/commands/init/init.ts

Co-Authored-By: msweeneydev <26944716+msweeneydev@users.noreply.github.com>"
49d5802e3db8cd8e89724bf122e3c72cbd7a11ef,Nathan Rajlich,2019-05-02 11:21:01+00:00,Nathan Rajlich,2019-05-04 00:21:50+00:00,"[now dev] Update `@zeit/fun` and `@now/build-utils` for Windows (#2302)

Not all builders will be working yet, but this adds minimal Windows
support for `now dev`."
38164f980bc6259fd28add1070d0afb28b2a5603,Nathan Rajlich,2019-05-02 07:11:07+00:00,Nathan Rajlich,2019-05-04 00:21:50+00:00,"Convert the build script to Node.js (#2301)

Because, you know, Windows."
1cff0342e8351002d64cec6aae66606fde411b5a,Nathan Rajlich,2019-05-02 06:43:07+00:00,Nathan Rajlich,2019-05-04 00:21:49+00:00,"[now dev] Show build logs if a build fails during bootup (#2297)

* [now dev] Show build logs if a build fails during bootup

Before, the logs were never shown because `buildProcess` does not emit
an `error` event when the child process exits.

Also updates `ora` to the latest version.

* Remove `@types/ora`

`ora` includes its own TypeScript definitions now."
b6117e4a636634aa9828b6c56c5bb3619d4531bf,Nathan Rajlich,2019-05-01 20:02:23+00:00,Nathan Rajlich,2019-05-04 00:21:49+00:00,[now dev] Set `NOW_REGION: 'dev1'` env on the builder processes (#2298)
48c65101353a891e2af1dfa74272a4acc6f3327a,Steven,2019-05-01 18:21:02+00:00,Nathan Rajlich,2019-05-04 00:21:49+00:00,Add .next and .cache to default ignore (#2295)
4e505f40f720fb3449bafcc85184c611368b9cb2,Nathan Rajlich,2019-05-01 17:01:59+00:00,Nathan Rajlich,2019-05-04 00:21:48+00:00,"Update `pkg` to v4.3.8 (#2293)

Which includes this fix: https://github.com/zeit/pkg/issues/671

Relevant to `now dev` invoking `yarn` when a package includes
a postinstall script that invokes `node`."
a3fe672b2a8aa640c45a3d16ec7633874306af3b,Steven,2019-05-01 13:38:57+00:00,Nathan Rajlich,2019-05-04 00:21:48+00:00,Create CODE_OF_CONDUCT.md (#2290)
e029e875d86648ad6ff2af5b9ab3f41e9ff3b9b6,Nathan Rajlich,2019-04-30 17:08:21+00:00,Nathan Rajlich,2019-05-04 00:21:48+00:00,[now dev] Use consistent cache directory for `nsfw` module download (#2280)
ef6e6c8d0dc457ade7a5d0461f140ee8646d8cb8,Shuying,2019-04-30 16:49:26+00:00,Nathan Rajlich,2019-05-04 00:21:47+00:00,Update feedback url (#2278)
4a4e9764dee63c0b43e3bb212bdc924497df8da2,Nathan Rajlich,2019-04-30 16:48:12+00:00,Nathan Rajlich,2019-05-04 00:21:47+00:00,[now dev] Convert path backslashes to forward slashes for Windows (#2279)
53e0f89311f9b2b53df74bc823f8d69b970fd5a6,Spellar Bot,2019-05-03 20:22:33+00:00,Nathan Rajlich,2019-05-04 00:17:44+00:00,Fix a few typos in `err.sh` pages (#2311)
871a89bf50448512e832adb5d0be5de59eb06448,Timothy,2019-04-30 18:16:36+00:00,Nathan Rajlich,2019-05-04 00:17:34+00:00,"Update missing-env-file.md (#2281)

* Update missing-env-file.md

* Update missing-env-file.md"
4260b6c3907cb9e194dc7c4d6357f65e7e591e63,Spellar Bot,2019-05-03 20:22:33+00:00,Nathan Rajlich,2019-05-03 20:22:33+00:00,Fix a few typos in `err.sh` pages (#2311)
648fb6f949c45cc1cabd125a17b231b3561eec9b,Nathan Rajlich,2019-05-03 17:37:35+00:00,Nathan Rajlich,2019-05-03 17:37:35+00:00,15.0.11-canary.3
709fd1bf120b5d7e1879c6fbcdb18d741707ba72,Steven,2019-05-03 17:18:40+00:00,Nathan Rajlich,2019-05-03 17:18:40+00:00,Update Readme with `now dev` workflow (#2308)
cf51fdb026e39759129c7b680af05e3fb378d95c,Nathan Rajlich,2019-05-03 12:21:26+00:00,Leo Lamprecht,2019-05-03 12:21:26+00:00,"[now dev] Implement `methods` in `routes` config (#2306)

Fixes #2148."
1e8a825e9410e84cda320ccd5e9d22d7c7f5cdd8,Nathan Rajlich,2019-05-03 12:20:33+00:00,Leo Lamprecht,2019-05-03 12:20:33+00:00,"[now dev] Send all status codes if routes config contains one (#2307)

Before it was only respecting the status code for 301, 302 and 303
status codes. Now it handles any status code defined in the routes
config.

Fixes #2294."
2ab71798de5b908fa11b97175e10897ccce5650c,Nathan Rajlich,2019-05-02 19:26:18+00:00,Nathan Rajlich,2019-05-02 19:26:18+00:00,15.0.11-canary.2
683de6048e774c53cfc34b640352aece1bb344f2,Matthew Sweeney,2019-05-02 19:06:40+00:00,Nathan Rajlich,2019-05-02 19:06:40+00:00,"[now init] Add line breaks to success message (#2285)

* add line break to success message

* change to using original util

* Update src/commands/init/init.ts

Co-Authored-By: msweeneydev <26944716+msweeneydev@users.noreply.github.com>"
49e619ce115062018f8ffa4fb5a5349ec2173d4e,Nathan Rajlich,2019-05-02 11:21:01+00:00,Leo Lamprecht,2019-05-02 11:21:01+00:00,"[now dev] Update `@zeit/fun` and `@now/build-utils` for Windows (#2302)

Not all builders will be working yet, but this adds minimal Windows
support for `now dev`."
fc5c8dd74f89ce98bf140ec7797ff79cc8b576ad,Nathan Rajlich,2019-05-02 07:11:07+00:00,GitHub,2019-05-02 07:11:07+00:00,"Convert the build script to Node.js (#2301)

Because, you know, Windows."
fb46cc7761fdb22c4953734e091eb828cb0c0538,Nathan Rajlich,2019-05-02 06:43:07+00:00,GitHub,2019-05-02 06:43:07+00:00,"[now dev] Show build logs if a build fails during bootup (#2297)

* [now dev] Show build logs if a build fails during bootup

Before, the logs were never shown because `buildProcess` does not emit
an `error` event when the child process exits.

Also updates `ora` to the latest version.

* Remove `@types/ora`

`ora` includes its own TypeScript definitions now."
332867a9f5fef24cb8c51211b9bb916bc5266162,Nathan Rajlich,2019-05-01 20:02:23+00:00,GitHub,2019-05-01 20:02:23+00:00,[now dev] Set `NOW_REGION: 'dev1'` env on the builder processes (#2298)
dfea510e68ea0f9226192b074d8168c6162eb6fc,Steven,2019-05-01 18:21:02+00:00,GitHub,2019-05-01 18:21:02+00:00,Add .next and .cache to default ignore (#2295)
baff58eecc99c9066b956a744577f5be1a734491,Nathan Rajlich,2019-05-01 17:01:59+00:00,GitHub,2019-05-01 17:01:59+00:00,"Update `pkg` to v4.3.8 (#2293)

Which includes this fix: https://github.com/zeit/pkg/issues/671

Relevant to `now dev` invoking `yarn` when a package includes
a postinstall script that invokes `node`."
0db933b6a3ea9bf5493de7462df22d8191b87c09,Steven,2019-05-01 13:38:57+00:00,GitHub,2019-05-01 13:38:57+00:00,Create CODE_OF_CONDUCT.md (#2290)
d47591ccda67ba09fc6eba1554240a9784d9023b,Timothy,2019-04-30 18:16:36+00:00,Leo Lamprecht,2019-04-30 18:16:36+00:00,"Update missing-env-file.md (#2281)

* Update missing-env-file.md

* Update missing-env-file.md"
4552ad9b36bb36d605f773c73dfd7a80ef5b2207,Nathan Rajlich,2019-04-30 17:08:21+00:00,GitHub,2019-04-30 17:08:21+00:00,[now dev] Use consistent cache directory for `nsfw` module download (#2280)
78a04905f1c3f399f7e89c4a8a4adbfd2fac9262,Shuying,2019-04-30 16:49:26+00:00,Leo Lamprecht,2019-04-30 16:49:26+00:00,Update feedback url (#2278)
3caa922e760a29d7b5d32fc233b12b748d48d6fb,Nathan Rajlich,2019-04-30 16:48:12+00:00,GitHub,2019-04-30 16:48:12+00:00,[now dev] Convert path backslashes to forward slashes for Windows (#2279)
6e5915a664f4b4dee0d221bc4a45b42c88bd71f2,Leo Lamprecht,2019-04-30 10:31:36+00:00,Leo Lamprecht,2019-04-30 10:31:36+00:00,15.0.11
a1631dfd9f1cc6fb0bffc79d9889b1fdca5b70bd,Nathan Rajlich,2019-04-30 09:17:24+00:00,Leo Lamprecht,2019-04-30 10:14:26+00:00,"[now dev] Enable `cleanUrls` option when deployment is all static (#2277)

So that rendering `index.html` as root works as expected."
db15047cc12ad07838cb557f14664656d32fe445,Nathan Rajlich,2019-04-30 02:57:57+00:00,Leo Lamprecht,2019-04-30 10:14:22+00:00,"[now dev] Install builders with `yarn` instead of `npm` (#2272)

* [now dev] Install builders with `yarn` instead of `npm`

Also invokes via `process.execPath` so that the pkg'd node is used
instead of a global one.

Depends on #2270.

* Install `yarn` to the builder cache dir

Not the `node_modules/.bin` dir, because `yarn` cleans up that directory
when installing modules, so it deletes itself.

* Remove unnecessary unit test

* Always install `yarn`

* Pass in the `yarnPath` to `installBuilders()`

* Restore unit test

* Remove unused `delimiter` import

Co-Authored-By: TooTallNate <n@n8.io>"
ba8c641c584c272a0405b930a27b0c670225cd6a,Steven,2019-04-30 00:44:14+00:00,Leo Lamprecht,2019-04-30 10:14:18+00:00,"[now dev] Install `yarn` into builder cache (#2270)

Closes #2063."
3d17f3b38b72a206ab1d5d9ae62d8c9d3d45be5b,Nathan Rajlich,2019-04-29 23:38:00+00:00,Leo Lamprecht,2019-04-30 10:14:14+00:00,"Update CODEOWNERS for `dev`, `certs` and `domains` commands (#2275)

* Update CODEOWNERS for `dev` command

Also added a fallback for @leo

* Remove `init`, add `domains` and `certs`"
5ca3cae9e8492a0b050d049e44daa5d37e65518a,Nathan Rajlich,2019-04-29 22:05:10+00:00,Leo Lamprecht,2019-04-30 10:14:09+00:00,"[now dev] Show build timestamps (#2273)

* [now dev] Show build timestamps

Except when running the initial builds

* Fix bad logic"
97d34136210e8feae7f37d69c73d0ad7f38b5d48,Steven,2019-04-29 21:35:19+00:00,Leo Lamprecht,2019-04-30 10:14:05+00:00,"[now-dev] Fix .nowignore to match production (#2233)

* Fix now dev usage of .nowignore

* Fix now dev usage of .nowignore

* Move env before nowjson

* Remove console.log()

* Remove comments & unused imports

* Fix merge conflicts

* Fix merge conflicts

* Add docs

* Fix stat mode"
bddab3c5d1d6804116b87db9053afcf8c8280653,Nathan Rajlich,2019-04-29 20:58:22+00:00,Leo Lamprecht,2019-04-30 10:14:00+00:00,[now dev] Don't render initial builds spinner when `debug` is enabled (#2271)
24572b554bf253cd7b31f8aa5c89b256ab1b66ed,Leo Lamprecht,2019-04-30 10:11:51+00:00,Leo Lamprecht,2019-04-30 10:11:51+00:00,15.0.11-canary.1
35109800d5b466111a4c333a3fc57a7ab423b212,Nathan Rajlich,2019-04-30 09:17:24+00:00,Leo Lamprecht,2019-04-30 09:17:24+00:00,"[now dev] Enable `cleanUrls` option when deployment is all static (#2277)

So that rendering `index.html` as root works as expected."
1c009266cc077bd7d7db3015d86a108c588612f1,Nathan Rajlich,2019-04-30 03:14:50+00:00,Nathan Rajlich,2019-04-30 03:14:50+00:00,15.0.10-canary.2
5ec45459e5d94440e6d173cbec228996d1f63e98,Nathan Rajlich,2019-04-30 02:57:57+00:00,GitHub,2019-04-30 02:57:57+00:00,"[now dev] Install builders with `yarn` instead of `npm` (#2272)

* [now dev] Install builders with `yarn` instead of `npm`

Also invokes via `process.execPath` so that the pkg'd node is used
instead of a global one.

Depends on #2270.

* Install `yarn` to the builder cache dir

Not the `node_modules/.bin` dir, because `yarn` cleans up that directory
when installing modules, so it deletes itself.

* Remove unnecessary unit test

* Always install `yarn`

* Pass in the `yarnPath` to `installBuilders()`

* Restore unit test

* Remove unused `delimiter` import

Co-Authored-By: TooTallNate <n@n8.io>"
37964c1e0f5cdeacd60b5d4581b395fa389cd455,Steven,2019-04-30 00:44:14+00:00,Nathan Rajlich,2019-04-30 00:44:14+00:00,"[now dev] Install `yarn` into builder cache (#2270)

Closes #2063."
ea8add731684192b772b3f011e3967491e137853,Nathan Rajlich,2019-04-29 23:38:00+00:00,GitHub,2019-04-29 23:38:00+00:00,"Update CODEOWNERS for `dev`, `certs` and `domains` commands (#2275)

* Update CODEOWNERS for `dev` command

Also added a fallback for @leo

* Remove `init`, add `domains` and `certs`"
baed2da509d5b2e42beaaa1a65b0b6564d59c857,Nathan Rajlich,2019-04-29 22:05:10+00:00,GitHub,2019-04-29 22:05:10+00:00,"[now dev] Show build timestamps (#2273)

* [now dev] Show build timestamps

Except when running the initial builds

* Fix bad logic"
7be66960b728f28b894dbe636b53d811582a7bda,Steven,2019-04-29 21:35:19+00:00,GitHub,2019-04-29 21:35:19+00:00,"[now-dev] Fix .nowignore to match production (#2233)

* Fix now dev usage of .nowignore

* Fix now dev usage of .nowignore

* Move env before nowjson

* Remove console.log()

* Remove comments & unused imports

* Fix merge conflicts

* Fix merge conflicts

* Add docs

* Fix stat mode"
ab6f72e44dffc5a5c89c000a9f2932477520a7aa,Nathan Rajlich,2019-04-29 20:58:22+00:00,GitHub,2019-04-29 20:58:22+00:00,[now dev] Don't render initial builds spinner when `debug` is enabled (#2271)
14aaf3b3758755bae3d9aa5731671c00dd2c4a8c,Leo Lamprecht,2019-04-29 19:04:10+00:00,Leo Lamprecht,2019-04-29 19:04:10+00:00,15.0.10
ecaee451c8c7cbf97b3eb581febaa58d2157ddb7,Leo Lamprecht,2019-04-29 18:19:07+00:00,Leo Lamprecht,2019-04-29 19:04:04+00:00,"Revert ""Enable `cleanUrls` for entirely static projects (#2268)""

This reverts commit c7ed5d7850394d4052d44ce2b22a10481aef1584."
a43d6f979242c44886bb32523adeea91a4b0024e,Nathan Rajlich,2019-04-29 16:41:01+00:00,Leo Lamprecht,2019-04-29 19:04:00+00:00,"[now dev] Show builder logs, even after build completes (#2269)

This is important for builders like `@now/next` and `@now/static-build`
which launch a child process dev server, and we want those logs to be
visible from the `now dev` console output."
251083bf38f2e9aa5084a56dcfad7cd964f0d1f6,Leo Lamprecht,2019-04-29 18:19:30+00:00,Leo Lamprecht,2019-04-29 18:19:30+00:00,15.0.10-canary.1
6426b1e4300f7b75a1aa0b0a35457d2684f1bc49,Leo Lamprecht,2019-04-29 18:19:07+00:00,Leo Lamprecht,2019-04-29 18:19:07+00:00,"Revert ""Enable `cleanUrls` for entirely static projects (#2268)""

This reverts commit c7ed5d7850394d4052d44ce2b22a10481aef1584."
635b20d4aba79c0d7e9598cfda15bad6b9635c8e,Nathan Rajlich,2019-04-29 16:41:01+00:00,Leo Lamprecht,2019-04-29 16:41:01+00:00,"[now dev] Show builder logs, even after build completes (#2269)

This is important for builders like `@now/next` and `@now/static-build`
which launch a child process dev server, and we want those logs to be
visible from the `now dev` console output."
78aea6ab13e74d737a066eb80263e3f5e8753521,Leo Lamprecht,2019-04-29 15:14:34+00:00,Leo Lamprecht,2019-04-29 15:14:34+00:00,15.0.9
3fa104a53157271e6c4e5ab0f8835ddd582fc74e,Leo Lamprecht,2019-04-29 13:25:33+00:00,Leo Lamprecht,2019-04-29 14:59:55+00:00,Enable `cleanUrls` for entirely static projects (#2268)
864c937de13c2378a2d6b542abc15ba6352c017f,Leo Lamprecht,2019-04-29 12:33:23+00:00,Leo Lamprecht,2019-04-29 14:59:52+00:00,"Correctly log when setting up Builders (#2267)

* Correctly log when setting up Builders

* Added message about beta"
8114ede173b563c538d3d3291737cfd4eccd6f49,Leo Lamprecht,2019-04-29 11:46:18+00:00,Leo Lamprecht,2019-04-29 14:59:48+00:00,"Do not print installing builders for no builds (#2266)

* Do not print installing builders for no builds

* Added unit test"
7294f8f2e1e7dd0d6255e184fbdaa7124e69d35a,Andy,2019-04-29 09:47:12+00:00,Leo Lamprecht,2019-04-29 14:59:45+00:00,Display `handle` in `now inspect` (#2265)
f53feed8f59edaa2d6d3cc63d403283c4ab5f36c,Leo Lamprecht,2019-04-28 21:01:24+00:00,Leo Lamprecht,2019-04-29 14:59:40+00:00,Make the message for when the server is running shorter (#2262)
18dc7cb3f4470361bb696804626e0f2b58cf9156,Leo Lamprecht,2019-04-28 19:45:35+00:00,Leo Lamprecht,2019-04-29 14:59:37+00:00,"Fixed error for `.env` and `.env.build` (#2261)

* Do not report env errors to Sentry

* Added guide for missing env file in dev mode

* Update errors/missing-env-file.md

Co-Authored-By: leo <mindrun@icloud.com>

* Update errors/missing-env-file.md

Co-Authored-By: leo <mindrun@icloud.com>"
5d8b27ebbeb56214d48fdc25a8772cd019d4b3b4,Nathan Rajlich,2019-04-28 19:38:08+00:00,Leo Lamprecht,2019-04-29 14:59:33+00:00,"[now dev] Refactor builders installation logic (#2254)

* [now dev] Refactor builders installation logic

 - Don't run `npm update`, only `npm install`, so no more ""Checking for
   builder updates"".
 - Don't save `package-lock.json`, to allow builders with newer versions
   than already installed to be updated.
 - Properly supports non-npm-registry builders (i.e. an HTTP URL,
   `github:` syntax, etc.

* Use `Object.entries()`"
8a347d0a7aeaeb20a8f213bf688f2762053ac10b,Matthew Sweeney,2019-04-28 16:58:32+00:00,Leo Lamprecht,2019-04-29 14:59:29+00:00,"Adds 'to develop' to now init (#2260)

Adds 'to develop' to now init"
4e884fb59d2b55928a25c1824f8e827c79672815,Amio,2019-04-28 15:50:23+00:00,Leo Lamprecht,2019-04-29 14:59:25+00:00,[now dev] fix directory listing (#2256)
1bf4af72694209e0c3d818030905198af741a15d,Andy,2019-04-28 15:35:50+00:00,Leo Lamprecht,2019-04-29 14:59:22+00:00,Wait for aliases in tests (#2257)
e383c2c4d60c25b1a858566780c5c21c0ea97bbc,Leo Lamprecht,2019-04-28 15:22:52+00:00,Leo Lamprecht,2019-04-29 14:59:18+00:00,"Revert ""Add a logout test case"" (#2258)

This reverts commit 5754360684c1e34b0351fadd9e2a6e5ef4b8b82f."
8fce8bb75d4deb7a6a7ffbe352d42376fb23791d,Olli Vanhoja,2019-04-28 08:58:56+00:00,Leo Lamprecht,2019-04-29 14:59:14+00:00,"Use the single request logout endpoint (#2201)

Logout by deleting the currently used auth token."
ee158a7862ba2fa7c9175e1b4dffaa3932c091ac,Nathan Rajlich,2019-04-28 01:55:14+00:00,Leo Lamprecht,2019-04-29 14:59:10+00:00,"[now dev] Don't render building/built logging for `@now/static`

Since it's a built-in builder."
c80a5b6f9d052010572ea4016f0594b12b4eff0a,Leo Lamprecht,2019-04-27 14:10:31+00:00,Leo Lamprecht,2019-04-29 14:59:01+00:00,Do not check for @now/static Builder updates (#2251)
97763ce5e825b43b6bec1a9f23511373b18feb51,Leo Lamprecht,2019-04-27 13:49:33+00:00,Leo Lamprecht,2019-04-29 14:58:58+00:00,Print missing line when stopping server (#2250)
f5f0c9eccd9f31a543996dffc27b07d82f3f8f8f,Leo Lamprecht,2019-04-27 13:40:44+00:00,Leo Lamprecht,2019-04-29 14:58:55+00:00,Only print stopping server if already printed URL (#2249)
2822c314eb7eab8ef234eb3ff82398e8c47a70db,JJ Kasper,2019-04-27 12:23:11+00:00,Leo Lamprecht,2019-04-29 14:58:51+00:00,"Update to make sure query isn't stripped (#2246)

* Update to make sure query isn't stripped
before ProxyPass in dev-server

* Add test for stripping query

* normalize semis in test"
2f170dbd456a46287674dbc57659c9c8c9cf53a6,Nathan Rajlich,2019-04-27 11:23:45+00:00,Leo Lamprecht,2019-04-29 14:58:48+00:00,"[now dev] Better logging while building and error recovery (#2244)

- Have the builder exit if a rejection occurs
 - Respawn the builder upon next rebuild after the builder has exited
 - Log when builder is starting and completed with build time
 - Render build error in the HTTP response"
b5ed4c48ed22e38075d46bb8625b48624942f0e5,Amio,2019-04-27 11:13:33+00:00,Leo Lamprecht,2019-04-29 14:58:44+00:00,Refine dev log layout (#2245)
672cd5efbb24fc99bd91067c42798897b92e1021,Nathan Rajlich,2019-04-26 20:23:43+00:00,Leo Lamprecht,2019-04-29 14:58:40+00:00,[now dev] Lazily initialize the `nodejs8.10` runtime for builds (#2243)
37d410c6cf54f58c27341140d52017bd272550b3,Leo Lamprecht,2019-04-26 20:20:15+00:00,Leo Lamprecht,2019-04-29 14:58:35+00:00,Bumped `@zeit/nsfw` to latest (#2242)
d270a07e2a90618ada67ac57e2d711649420cc89,Leo Lamprecht,2019-04-26 19:59:06+00:00,Leo Lamprecht,2019-04-29 14:58:31+00:00,Support Windows when downloading file watcher (#2240)
1f66976beb410bf3244ff7db8caa1b86fe47ab02,Andy,2019-04-26 19:46:12+00:00,Leo Lamprecht,2019-04-29 14:58:27+00:00,Modify the gitbash file correctly (#2223)
ff601a4c70a568e81773f26a658e414d120deff9,Amio,2019-04-26 12:09:06+00:00,Leo Lamprecht,2019-04-29 14:58:24+00:00,[now dev] exit on MissingDotenvVarsError (#2237)
73d23126f557c59b484aea7c4b3d91bea1184da4,Steven,2019-04-25 20:47:21+00:00,Leo Lamprecht,2019-04-29 14:58:19+00:00,"Convert get-files from JS to TS (#2207)

* Convert get-files from JS to TS

* Bump @zeit/dockerignore to 0.0.5

* Fix types

* Fix typo

* Remove arr-flatten dependency"
f38669576afdfa8b3df891347e6acf93c9c1ad77,Leo Lamprecht,2019-04-29 14:05:32+00:00,Leo Lamprecht,2019-04-29 14:05:32+00:00,15.0.9-canary.3
c7ed5d7850394d4052d44ce2b22a10481aef1584,Leo Lamprecht,2019-04-29 13:25:33+00:00,GitHub,2019-04-29 13:25:33+00:00,Enable `cleanUrls` for entirely static projects (#2268)
67a918401cee1b3c0bf9d4f8f04d6d090ca14a7f,Leo Lamprecht,2019-04-29 12:33:23+00:00,GitHub,2019-04-29 12:33:23+00:00,"Correctly log when setting up Builders (#2267)

* Correctly log when setting up Builders

* Added message about beta"
08f0e02f426f9780677b032d4e46901da25e8db9,Leo Lamprecht,2019-04-29 11:46:18+00:00,GitHub,2019-04-29 11:46:18+00:00,"Do not print installing builders for no builds (#2266)

* Do not print installing builders for no builds

* Added unit test"
0748cb7698ef66d66f461aa63d1be2a124f1d65e,Andy,2019-04-29 09:47:12+00:00,GitHub,2019-04-29 09:47:12+00:00,Display `handle` in `now inspect` (#2265)
76c9a233b92d8da98e889093848b096a9e2cefe2,Leo Lamprecht,2019-04-28 21:11:32+00:00,Leo Lamprecht,2019-04-28 21:11:32+00:00,15.0.9-canary.2
b3f584686b18460afcb6655751213a60b3eca44c,Leo Lamprecht,2019-04-28 21:01:24+00:00,GitHub,2019-04-28 21:01:24+00:00,Make the message for when the server is running shorter (#2262)
18f06fde2a26e54df997d0fabdbb937f1875ffdc,Leo Lamprecht,2019-04-28 19:45:35+00:00,GitHub,2019-04-28 19:45:35+00:00,"Fixed error for `.env` and `.env.build` (#2261)

* Do not report env errors to Sentry

* Added guide for missing env file in dev mode

* Update errors/missing-env-file.md

Co-Authored-By: leo <mindrun@icloud.com>

* Update errors/missing-env-file.md

Co-Authored-By: leo <mindrun@icloud.com>"
c13545d585a571f441b51faa653634e79e9f7a7d,Nathan Rajlich,2019-04-28 19:38:08+00:00,GitHub,2019-04-28 19:38:08+00:00,"[now dev] Refactor builders installation logic (#2254)

* [now dev] Refactor builders installation logic

 - Don't run `npm update`, only `npm install`, so no more ""Checking for
   builder updates"".
 - Don't save `package-lock.json`, to allow builders with newer versions
   than already installed to be updated.
 - Properly supports non-npm-registry builders (i.e. an HTTP URL,
   `github:` syntax, etc.

* Use `Object.entries()`"
112497d55edb96683efc6954571fd6298f1ed229,Matthew Sweeney,2019-04-28 16:58:32+00:00,Leo Lamprecht,2019-04-28 16:58:32+00:00,"Adds 'to develop' to now init (#2260)

Adds 'to develop' to now init"
91069f6d3860e92953b358e241def5cc6b235c46,Amio,2019-04-28 15:50:23+00:00,Leo Lamprecht,2019-04-28 15:50:23+00:00,[now dev] fix directory listing (#2256)
2cf846ead3eb16f63cc609db72ae6448e31190b6,Andy,2019-04-28 15:35:50+00:00,Leo Lamprecht,2019-04-28 15:35:50+00:00,Wait for aliases in tests (#2257)
310e1b42474e93d7e7ce19120fb523107d368591,Leo Lamprecht,2019-04-28 15:22:52+00:00,GitHub,2019-04-28 15:22:52+00:00,"Revert ""Add a logout test case"" (#2258)

This reverts commit 5754360684c1e34b0351fadd9e2a6e5ef4b8b82f."
2f12b086161b00eaeb57696f0ed7666548febd72,Olli Vanhoja,2019-04-28 08:58:56+00:00,GitHub,2019-04-28 08:58:56+00:00,"Use the single request logout endpoint (#2201)

Logout by deleting the currently used auth token."
744ef92faa249aa86bc7ac06884c75257acf54ca,Nathan Rajlich,2019-04-28 01:55:14+00:00,Nathan Rajlich,2019-04-28 01:55:14+00:00,"[now dev] Don't render building/built logging for `@now/static`

Since it's a built-in builder."
aa8d77e5711c509ca8302af9f095f8e212dabf38,Leo Lamprecht,2019-04-27 14:11:26+00:00,Leo Lamprecht,2019-04-27 14:11:26+00:00,15.0.9-canary.1
6f8c9fe548c4459e2e76ce27ce4b6fb1ab35ca96,Steven,2019-04-26 19:56:02+00:00,Leo Lamprecht,2019-04-27 14:11:11+00:00,Add python virtual environment to default ignore (#2241)
b6ded9a7fe9dab18cbeb1f7eacf07fb98aa2025b,Leo Lamprecht,2019-04-27 14:10:31+00:00,GitHub,2019-04-27 14:10:31+00:00,Do not check for @now/static Builder updates (#2251)
468fa881395888ad71a88803d89d151bb2c59048,Leo Lamprecht,2019-04-27 13:49:33+00:00,GitHub,2019-04-27 13:49:33+00:00,Print missing line when stopping server (#2250)
1aa46713c2594551e478e4550c638ade20eabf14,Leo Lamprecht,2019-04-27 13:40:44+00:00,GitHub,2019-04-27 13:40:44+00:00,Only print stopping server if already printed URL (#2249)
9029a51707d8e4f57fbed5b789ed81c5fe8a8ed9,JJ Kasper,2019-04-27 12:23:11+00:00,Leo Lamprecht,2019-04-27 12:23:11+00:00,"Update to make sure query isn't stripped (#2246)

* Update to make sure query isn't stripped
before ProxyPass in dev-server

* Add test for stripping query

* normalize semis in test"
6df363e2da0e3350f166756052a6a5ce43984781,Nathan Rajlich,2019-04-27 11:23:45+00:00,Leo Lamprecht,2019-04-27 11:23:45+00:00,"[now dev] Better logging while building and error recovery (#2244)

- Have the builder exit if a rejection occurs
 - Respawn the builder upon next rebuild after the builder has exited
 - Log when builder is starting and completed with build time
 - Render build error in the HTTP response"
36f5b265c8bb937e19f4df7b069be77ab942ca9e,Amio,2019-04-27 11:13:33+00:00,Leo Lamprecht,2019-04-27 11:13:33+00:00,Refine dev log layout (#2245)
929ea187ce8024e58940532b86e4ed9fdc20d599,Nathan Rajlich,2019-04-26 20:23:43+00:00,Leo Lamprecht,2019-04-26 20:23:43+00:00,[now dev] Lazily initialize the `nodejs8.10` runtime for builds (#2243)
822f203f5a33119c9e0338ed636a9ff12787b003,Leo Lamprecht,2019-04-26 20:20:15+00:00,GitHub,2019-04-26 20:20:15+00:00,Bumped `@zeit/nsfw` to latest (#2242)
54d02b6ab2418fd63b9053d790d1c1659dea5a5d,Leo Lamprecht,2019-04-26 19:59:06+00:00,GitHub,2019-04-26 19:59:06+00:00,Support Windows when downloading file watcher (#2240)
5a1b6e6569e1ad147c15ca0b5d34cb2a3bbcab73,Steven,2019-04-26 19:56:02+00:00,GitHub,2019-04-26 19:56:02+00:00,Add python virtual environment to default ignore (#2241)
f9919fe8543dbb20e675b05ee492a67c89679db4,Andy,2019-04-26 19:46:12+00:00,GitHub,2019-04-26 19:46:12+00:00,Modify the gitbash file correctly (#2223)
73de0f228a7754a081d89f4a0de7484631e5dc5f,Amio,2019-04-26 12:09:06+00:00,GitHub,2019-04-26 12:09:06+00:00,[now dev] exit on MissingDotenvVarsError (#2237)
f8f5a554e12dbc6d9669faae1292909131d3eda1,Leo Lamprecht,2019-04-25 20:57:35+00:00,Leo Lamprecht,2019-04-25 20:57:35+00:00,15.0.8
b93e8edb83249c145578a6011801158517110f9f,Nathan Rajlich,2019-04-25 18:56:20+00:00,Leo Lamprecht,2019-04-25 20:57:24+00:00,"[now dev] Supply empty default `now.json` if one does not exist (#2231)

This forces all the files to be served as static assets using
`@now/static`, rather than having a special branch that dishes
out to `serve-static`. This is better because it keeps the logic
consistent with when a `now.json` is supplied vs. when it is not,
and allows the code to be simplified by removing checks for if
`getNowJson()` returned anything (previously it could return `null`,
but now that is not the case). Also allows us to remove the now-unused
`serveProjectAsStatic()` function."
4fe1a3831d51247edc01fc9a771d2df79924ba23,Nathan Rajlich,2019-04-25 18:13:14+00:00,Leo Lamprecht,2019-04-25 20:57:17+00:00,"[now dev] Force `@now/static` to run in-memory (#2230)

* [now dev] Force `@now/static` to run in-memory

The logic for `@now/static` builder is bundled into the `pkg` binary,
and thus is not requireable, so it must instead be run in-memory.

* Also check for stdout TTY before doing the erase lines stuff"
9d73f7735e2f1703eac7af92dd287c1d120aa9b6,Steven,2019-04-25 20:47:21+00:00,GitHub,2019-04-25 20:47:21+00:00,"Convert get-files from JS to TS (#2207)

* Convert get-files from JS to TS

* Bump @zeit/dockerignore to 0.0.5

* Fix types

* Fix typo

* Remove arr-flatten dependency"
a0209f4667eadaacdd4413e8295d9c99fd496042,Leo Lamprecht,2019-04-25 19:29:01+00:00,Leo Lamprecht,2019-04-25 19:29:01+00:00,15.0.8-canary.1
60b36cb3f81393bd86b4e30693e3da1c14ecbf39,Nathan Rajlich,2019-04-25 18:56:20+00:00,GitHub,2019-04-25 18:56:20+00:00,"[now dev] Supply empty default `now.json` if one does not exist (#2231)

This forces all the files to be served as static assets using
`@now/static`, rather than having a special branch that dishes
out to `serve-static`. This is better because it keeps the logic
consistent with when a `now.json` is supplied vs. when it is not,
and allows the code to be simplified by removing checks for if
`getNowJson()` returned anything (previously it could return `null`,
but now that is not the case). Also allows us to remove the now-unused
`serveProjectAsStatic()` function."
454ce0256593c04badab811bbde06846b0c8aeb1,Nathan Rajlich,2019-04-25 18:13:14+00:00,GitHub,2019-04-25 18:13:14+00:00,"[now dev] Force `@now/static` to run in-memory (#2230)

* [now dev] Force `@now/static` to run in-memory

The logic for `@now/static` builder is bundled into the `pkg` binary,
and thus is not requireable, so it must instead be run in-memory.

* Also check for stdout TTY before doing the erase lines stuff"
2be128639c476e94088f7dc2544036953f1f2510,Leo Lamprecht,2019-04-25 15:05:38+00:00,Leo Lamprecht,2019-04-25 15:05:38+00:00,15.0.7
8557c4baf05d749e09f304bdb912cd836212383d,Nathan Rajlich,2019-04-25 14:28:58+00:00,Leo Lamprecht,2019-04-25 15:03:19+00:00,"[now dev] Invoke builders in a forked child process (#2227)

* Update `@zeit/fun` to v0.7.0

* Remove `builderCachePromise`

No longer used.

* Remove `intercept-stdout`

* WIP invoke the builder in a forked child process

* WIP Add `builder.js` file

* Remove `BuildResultV1 | BuildResultV2` distinction

Prefer normalizing the `build()` function result to `BuildResult` v2
shape so that we don't have to cast everywhere else.

* Apply build env vars to builder child process

* Copy the `builder.js` file from the pkg filesystem snapshot to the builder cache dir

* Map `FileFsRef` and `FileBlob` of the builder's output back into instances

* Fix `@now/next` :/

* Cleanup

* Print number of initial builds

* Add spinner for building process

* Refine logs

* Support none-tty

* Crop long lines

* Clean up imports

* Refine logs wording"
037283ed07cd3b7fdeec1a5c496d7557aa311947,Nathan Rajlich,2019-04-24 20:49:50+00:00,Leo Lamprecht,2019-04-25 15:03:13+00:00,"[now dev] Always watch the `entrypoint` for triggering rebuilds (#2226)

The `entrypoint` should always be watched, since we know that it was used
to produce the build output. This is for builders that don't implement
a fully featured `watch` return value."
122a83e5566ded310c3d726c0dd48f3931479954,Nathan Rajlich,2019-04-24 18:53:29+00:00,Leo Lamprecht,2019-04-25 15:03:09+00:00,"[now dev] Don't include a file in both `filesChanged` and `filesRemoved` list (#2225)

* [now dev] Don't include a file in both `filesChanged` and `filesRemoved` list

This makes it so that if a file is added to the ""changed"" array, then it
is also removed from the ""deleted"" array, and vice-versa.

* Only render the ""files changed/remove"" debug log if there are entries"
c13fc9d406a7ed7780148bbd24d02623ea40076e,Leo Lamprecht,2019-04-24 17:05:07+00:00,Leo Lamprecht,2019-04-25 15:03:03+00:00,Bumped `@now/build-utils` to latest version (#2220)
4595449561023fb759f4e4da1cda9cbb6ae1b5ec,Amio,2019-04-24 11:25:20+00:00,Leo Lamprecht,2019-04-25 15:02:58+00:00,"[now-dev] Exit when incorrect cwd config (#2218)

* [now-dev] Exit when incorrect cwd config

* better wording"
fb474e5a5f90fe92599e9e3aae15c0b285ad0993,Nathan Rajlich,2019-04-24 02:21:43+00:00,Leo Lamprecht,2019-04-25 15:02:53+00:00,"[now dev] Use `minimatch` on the `watch` array to support globs (#2216)

This will be necessary for `@now/static-build` since it needs to watch
all files in the dir containing the entrypoint. For example:

```
watch: [ path.join(path.dirname(entrypoint), '**/*') ]
```"
582fb18c22ae59b5032737ba71d574de7125e144,Nathan Rajlich,2019-04-24 02:17:02+00:00,Leo Lamprecht,2019-04-25 15:02:49+00:00,"[now dev] Allow a builder `watch` array to contain ""./"" prefixed paths (#2217)

The file watcher logic expects that there is no `'./'` prefix on the
watched file paths/patterns, but `path.dirname('foo')` returns `'.'`
which turns into `'./foo'` with `path.join()`. So this allows those
file paths to be returned from the builder and `now dev` normalizes the
paths after the build has completed."
26c4f91c58d08f40a9a0032099851a4e35f058ab,Nathan Rajlich,2019-04-23 18:21:41+00:00,Leo Lamprecht,2019-04-25 15:02:44+00:00,"[now dev] Add `xfwd` option to `http-proxy` (#2215)

This makes the `http-proxy` module set the `X-Forwarded-*` HTTP request
headers to the destination endpoint."
aa1d41f89ccb67f164ac92de0ade2dad0c1def37,Nathan Rajlich,2019-04-23 17:49:53+00:00,Leo Lamprecht,2019-04-25 15:02:38+00:00,"[now dev] Pass in the builder-specific `workPath` to `shouldServe()` (#2214)

The dev server `cwd` is not correct working path of a build match, so
pass in the correct one. This property will be used by
`@now/static-build`'s dev mode."
a23ad79c99805159de7abc50643edc293056b138,Steven,2019-04-23 15:38:12+00:00,Leo Lamprecht,2019-04-25 15:02:34+00:00,Ignore `__pycache__` directories (#2213)
18f3c50003ce7fe26f6413b69245eaaceebebdd3,Mark,2019-04-23 15:31:17+00:00,Leo Lamprecht,2019-04-25 15:02:28+00:00,Update `@zeit/ncc` to v0.18.1 (#2210)
28a478311cc556ea308ce1ebe3e9da3d9ca74ebf,Nathan Rajlich,2019-04-23 11:14:19+00:00,Leo Lamprecht,2019-04-25 15:01:05+00:00,"[now dev] Remove `requiresInitialBuild` and make `shouldServe()` optional for v2 Builders (#2209)

* [now dev] Remove `requiresInitialBuild` and make `shouldServe()` optional for v2 Builders

`@now/next` will be removing `shouldServe()` in favor of returning
a `routes` config array upon bootup. This makes now dev's
`shouldServe()` wrapper function support matching a `routes` config
entry when `shouldServe()` is not defined.

* Remove `console.error()` debugging calls

* Remove `mergeRoutes()` logic

This was incorrect behavior, and more like what `continue: true` is
supposed to do.

* Remove invalid test case

* Remove from the `files` array when ENOENT occurs in file watcher

* Prettier

* Pass workPath to builder.shouldServe() (#2211)"
01d380a7e7b8dc5ab790172cf366b25d9c509536,Amio,2019-04-23 07:25:05+00:00,Leo Lamprecht,2019-04-25 15:01:01+00:00,"Support env NOW_BUILDER_CACHE_DIR for debugging builders (#2212)

* Support env NOW_BUILDER_CACHE_DIR for debugging builders

* resolve NOW_BUILDER_CACHE_DIR"
276860aeadf3d37e381761a428630cf688679133,Nathan Rajlich,2019-04-22 22:39:25+00:00,Leo Lamprecht,2019-04-25 15:00:56+00:00,"[now dev] Resolve built routes after matching builder (#2208)

* [now dev] Resolve built routes after matching builder

This removes the `combineRoutes()` function since it was problematic and
triggered rebuilds upon every HTTP request, which is not necessary and
makes development slower.

Now, when an HTTP request comes in, the `now.json` routes are resolved
first, and then the matched build is checked if it defines any `routes`
in the build output. If it does, and a matching route is found then the
route is handled accordingly.

* Fix dev router unit tests

* Only try to match build routes if `.length > 0`

* Remove `routes` config from `@now/static` build results

This would cause an infinite loop of resolving `entrypoint` to
`entrypoint`, and is not necessary for this builder."
2ccbaba654f6c7f22ee5cc7814e3e5f01079e96c,Leo Lamprecht,2019-04-22 18:29:49+00:00,Leo Lamprecht,2019-04-25 15:00:52+00:00,"Initial build should set `requestPath` to `null` (#2200)

* Initial build should set `requestPath` to `null`

* Fixed types

* Fixed type"
737aa45a814a93778a4b9d4e21882d482d3fd086,Nathan Rajlich,2019-04-22 17:28:08+00:00,Leo Lamprecht,2019-04-25 15:00:48+00:00,"[now dev] Fix typo in debug log (#2206)

Also switch to present-tense wording."
e39dfdd3294b00fda920bfa62081b5fd83fdcf7f,Amio,2019-04-22 07:49:41+00:00,Leo Lamprecht,2019-04-25 15:00:44+00:00,[now-dev] make `routes` from v2 builders optional (#2204)
71f6711ab415f09f3274648cf9fae23220c3b92c,Leo Lamprecht,2019-04-21 18:29:47+00:00,Leo Lamprecht,2019-04-25 15:00:39+00:00,Better name for `continuous` property (#2199)
4849381e604e28965911d58efa4d77796c5bc6f2,Leo Lamprecht,2019-04-21 16:46:57+00:00,Leo Lamprecht,2019-04-25 15:00:35+00:00,Prevent exit if client closes proxy connection (#2198)
1dcd5a7e4e103f19af23068c1c7c08c0dd82ba7e,Leo Lamprecht,2019-04-20 00:19:00+00:00,Leo Lamprecht,2019-04-25 15:00:31+00:00,Match only the important part while routing (#2195)
8e4d7d769e054e1019264f65cc5301159b868ca4,Amio,2019-04-19 22:09:00+00:00,Leo Lamprecht,2019-04-25 15:00:27+00:00,"Made sure support for `routes` works as expected (#2194)

* Fix lost concat result

* Made it work

* Fixed several tests

* Fixed more tests

* Fixed tests"
56fabb8b8722aa312f754bace5fd999e5dbbda7c,Amio,2019-04-19 14:28:39+00:00,Leo Lamprecht,2019-04-25 15:00:23+00:00,"Added support for `routes` (#2191)

* Add types for updated builder v2 api

* Fix type errors

* outputs => output

* Combine builder routes before routing

* Combine builder routes for all v2 builders

* [temporarily] reveal logs from builder

* Revert ""[temporarily] reveal logs from builder""

This reverts commit 9dac764f33d96b5fd004e0839b41228786f83d14."
c4bd356fc7c47ec01bd5ad0abca6e157aabd8a85,Amio,2019-04-19 13:57:01+00:00,Leo Lamprecht,2019-04-25 15:00:19+00:00,"Reveal builder logs when `--debug` (#2193)

And added a `debug` flag to `DevServer` class"
97ec2d1011497487cf6bf13d80709ee389390262,Nathan Rajlich,2019-04-18 09:57:23+00:00,Leo Lamprecht,2019-04-25 15:00:08+00:00,"[now dev] Reuse the same `workPath` for subsequent builds (#2185)

* [now dev] Reuse the same `workPath` for subsequent builds

Reusing the same `workPath` for subsequent builds makes rebuilding
faster, as well as it's necessary for webpack's watcher to work
correctly as it relies on the full filesystem paths being intact.

`prepareCache()` also no longer needs to be invoked, since the
previous `workPath` directory will already contain the necessary files
that the cache would otherwise produce.

* Prettier"
35e9bb4e5ef2ccf8e2274bdfec95c534cc2996b3,Nathan Rajlich,2019-04-18 04:25:08+00:00,Leo Lamprecht,2019-04-25 14:59:51+00:00,"[now dev] Don't trigger a rebuild if an asset was deleted (#2184)

* [now dev] Don't trigger a rebuild if an asset was deleted

This handles the case where an asset was deleted and should no longer be
served after a filesystem watcher event. For example, if a Next.js page
was previously built and the files was deleted from the `pages`
directory, then the rebuild should not happen since it will fail in the
`build()` function anyways.

* Add `config` to `shouldServe()`

* Remove unused `builder` var"
5a0ff896a289539acbe02320f8053af1ac5abb2f,Andy,2019-04-17 21:34:00+00:00,Leo Lamprecht,2019-04-25 14:59:46+00:00,"Show a upgrade message if the build limit is exceeded (#2182)

* Show a upgrade message if the build limit is exceeded

* Typo

* Update src/commands/deploy/latest.js

Co-Authored-By: AndyBitz <AndyBitz@users.noreply.github.com>"
03915685eb4362087ff238ef7e3d369169387c99,Andy,2019-04-17 18:27:54+00:00,Leo Lamprecht,2019-04-25 14:59:41+00:00,"Show the domain purchase UI (#2168)

* Show the domain purchase UI

* Show the correct error message

* Exit after the domain purchase"
0dae0401eee9dd93e6cd6649fd9bfec300d842a5,Amio,2019-04-17 16:06:21+00:00,Leo Lamprecht,2019-04-25 14:59:21+00:00,"Add some debug logs for now-dev (#2181)

* Add some debug logs

* Fix eslint warnings"
b706a526a41f1a97ed65f834365bb53bdc13fbff,Nathan Rajlich,2019-04-17 04:22:42+00:00,Leo Lamprecht,2019-04-25 14:59:12+00:00,"[now dev] Handle filesystem events where the file has already been deleted (#2179)

Editors like `vim` like to use temporary files in the file's working
directory and quickly rename / delete them. This makes `now dev` handle
that gracefully and not crash."
071c523dd676cc9c8ffac95051ad0b849412adee,Nathan Rajlich,2019-04-16 22:14:47+00:00,Leo Lamprecht,2019-04-25 14:59:02+00:00,"[now dev] Default the `Content-Type` to ""application/octet-stream"" (#2177)

This matches the behavior in production, so it is more correct.

This new common `getMimeType()` function also centralizes a place where
we can overwrite the `mime-types` return value to other values to match
production for other future discrepancies."
8de99d13f51671a2064a6a36346062a94c3d3ed7,Amio,2019-04-16 19:07:40+00:00,Leo Lamprecht,2019-04-25 14:58:54+00:00,"Mute install logs from @now/node builder (#2171)

* [wip] Mute install logs from @now/node builder

* Bumped build utils"
db9ed9ea54f18fe4b77ce411a2e1af7b39c14ac3,Nathan Rajlich,2019-04-16 18:24:45+00:00,Leo Lamprecht,2019-04-25 14:58:48+00:00,"Pass `filesChanges` and `filesRemoved` array to builder's `build()` (#2174)

This will be required to implement the `@now/node` ncc watcher logic."
defb2f177664f2cc015a34cd33859410f37c14b8,Nathan Rajlich,2019-04-16 18:13:15+00:00,Leo Lamprecht,2019-04-25 14:58:43+00:00,"Added file watcher to `now dev` (#2153)

* [now dev] Add `nsfw` file watcher

WIP for triggering background rebuilds. So far the `files` mapping is
now kept in sync via the events produced by `nsfw`.

* Add `now.json` caching and invalidation from nsfw events

* Add initial rebuilding logic from filesystem watching

* Remove previously built assets when a rebuild occurs

* Make `@now/static` not require a hard refresh

* Shut down the `nsfw` instance when stopping the DevServer

* Prettier and some minor tweaks

* Ship module

* Support private deps

* Fixed tests

* Fixed integration tests

* Revert ""Support private deps""

This reverts commit 0b4991b87641d693fa61f81223e0efc2b7006f83.

* Support multiple platforms

* Typed

* Consider Alpine

* Bumped @zeit/nsfw to latest version

* Update src/commands/dev/lib/nsfw-module.ts

Co-Authored-By: leo <mindrun@icloud.com>

* Pass module path differently

* Bumped package

* Make binary executable

* Wait until piping is complete

* Added debug statements"
de560ea31a6ab9f7d9b37924e7fede5525182a72,Amio,2019-04-16 18:07:37+00:00,Leo Lamprecht,2019-04-25 14:58:37+00:00,"Enable '@typescript-eslint/no-unused-vars': 'warn' (#2172)

* Enable '@typescript-eslint/no-unused-vars': 'warn'

* Clean comments"
f90179761f88f78854a8ec9848fc3e3cefc99291,Nathan Rajlich,2019-04-16 01:27:59+00:00,Leo Lamprecht,2019-04-25 14:58:32+00:00,"Enable source maps for development builds of now-cli (#2170)

If you run `yarn build-dev`, then now source maps are enabled, allowing
us to see the proper line of an error in the source code file instead of
the huge `dist/index.js` file.

Previously they were only enabled for production builds."
e35ce0591fff072cb261f7478812922a1523d656,Ana Trajkovska,2019-04-15 20:47:42+00:00,Leo Lamprecht,2019-04-25 14:58:26+00:00,"Handle additional errors when issuing a certificate (#2165)

* Handle additional errors when issuing a certificate

* Rename errors

* Provide more context in CertsDNSError

* Fix CertsDNSError structure

* Display cns with join

* Fix CertsDNSError"
5ccf7013feec7f768dc649424f39a17af7d3749b,Nathan Rajlich,2019-04-14 22:40:07+00:00,Leo Lamprecht,2019-04-25 14:58:06+00:00,"[now dev] Add `host` property to the invoke payload (#2164)

Fixes https://github.com/zeit/now-builders/issues/390."
74d2a7da58df80ec8950f576d674df9d2187f084,Nathan Rajlich,2019-04-13 21:19:25+00:00,Leo Lamprecht,2019-04-25 14:58:01+00:00,"[now dev] Use empty version string for `@now/static` (#2159)

This is just a cosmetic fix so that ""vbuilt-in"" isn't printed when
`--debug` is enabled."
691e9ea1ee30ef89dd3e6cc1a35f47073d6d114c,Nathan Rajlich,2019-04-12 19:00:51+00:00,Leo Lamprecht,2019-04-25 14:57:55+00:00,"[now dev] Don't run every build when a v1 builder is detected (#2151)

Before this, if a v1 builder was detected then every build match was
built instead of only the matches that use a v1 builder."
3ea00009aa2ee3440f972ee927efec37ab81a005,Nathan Rajlich,2019-04-12 01:50:54+00:00,Leo Lamprecht,2019-04-25 14:57:41+00:00,"[now dev] Fix index-based asset lookup logic (#2138)

There was a bug in the index lookup logic such that `GET /404` would be
matching the `/index.*` file. Fixed in this commit."
048434a56477e91519f1a6c4b55d01372a7c77ac,Leo Lamprecht,2019-04-25 14:29:38+00:00,Leo Lamprecht,2019-04-25 14:29:38+00:00,15.0.7-canary.8
0334b75cfab711c085820dd685b06e2fa1f25af1,Nathan Rajlich,2019-04-25 14:28:58+00:00,Leo Lamprecht,2019-04-25 14:28:58+00:00,"[now dev] Invoke builders in a forked child process (#2227)

* Update `@zeit/fun` to v0.7.0

* Remove `builderCachePromise`

No longer used.

* Remove `intercept-stdout`

* WIP invoke the builder in a forked child process

* WIP Add `builder.js` file

* Remove `BuildResultV1 | BuildResultV2` distinction

Prefer normalizing the `build()` function result to `BuildResult` v2
shape so that we don't have to cast everywhere else.

* Apply build env vars to builder child process

* Copy the `builder.js` file from the pkg filesystem snapshot to the builder cache dir

* Map `FileFsRef` and `FileBlob` of the builder's output back into instances

* Fix `@now/next` :/

* Cleanup

* Print number of initial builds

* Add spinner for building process

* Refine logs

* Support none-tty

* Crop long lines

* Clean up imports

* Refine logs wording"
ce0ed935c84a9968cdc739d9358a213e7a962ecf,Nathan Rajlich,2019-04-24 20:49:50+00:00,GitHub,2019-04-24 20:49:50+00:00,"[now dev] Always watch the `entrypoint` for triggering rebuilds (#2226)

The `entrypoint` should always be watched, since we know that it was used
to produce the build output. This is for builders that don't implement
a fully featured `watch` return value."
ad89a630918b91fe54db15a851cb6b9d32bfdb06,Leo Lamprecht,2019-04-24 18:54:02+00:00,Leo Lamprecht,2019-04-24 18:54:02+00:00,15.0.7-canary.7
d148edcb6767e514fa7b302e65c24d0d36dd414a,Nathan Rajlich,2019-04-24 18:53:29+00:00,Leo Lamprecht,2019-04-24 18:53:29+00:00,"[now dev] Don't include a file in both `filesChanged` and `filesRemoved` list (#2225)

* [now dev] Don't include a file in both `filesChanged` and `filesRemoved` list

This makes it so that if a file is added to the ""changed"" array, then it
is also removed from the ""deleted"" array, and vice-versa.

* Only render the ""files changed/remove"" debug log if there are entries"
36d2e2995420f60de484c8addd0240c077fb429e,Leo Lamprecht,2019-04-24 17:05:42+00:00,Leo Lamprecht,2019-04-24 17:05:42+00:00,15.0.7-canary.6
76d3643e0f3098582f21a170334d6c0f62ed5ac2,Leo Lamprecht,2019-04-24 17:05:07+00:00,GitHub,2019-04-24 17:05:07+00:00,Bumped `@now/build-utils` to latest version (#2220)
a12e228cc4ae9e9513323f8479234fdf2a77e675,Leo Lamprecht,2019-04-24 12:21:56+00:00,Leo Lamprecht,2019-04-24 12:21:56+00:00,15.0.7-canary.5
669ee6a65f8094aa7e41581cac39caf3bcb35135,Amio,2019-04-24 11:25:20+00:00,Leo Lamprecht,2019-04-24 11:25:20+00:00,"[now-dev] Exit when incorrect cwd config (#2218)

* [now-dev] Exit when incorrect cwd config

* better wording"
a7f734fadfcc20bde93a17898904fa0cf8551c52,Nathan Rajlich,2019-04-24 02:21:43+00:00,Amio,2019-04-24 02:21:43+00:00,"[now dev] Use `minimatch` on the `watch` array to support globs (#2216)

This will be necessary for `@now/static-build` since it needs to watch
all files in the dir containing the entrypoint. For example:

```
watch: [ path.join(path.dirname(entrypoint), '**/*') ]
```"
8405c2d6cd850f9d32b29b38822df2e9c7e54ab6,Nathan Rajlich,2019-04-24 02:17:02+00:00,GitHub,2019-04-24 02:17:02+00:00,"[now dev] Allow a builder `watch` array to contain ""./"" prefixed paths (#2217)

The file watcher logic expects that there is no `'./'` prefix on the
watched file paths/patterns, but `path.dirname('foo')` returns `'.'`
which turns into `'./foo'` with `path.join()`. So this allows those
file paths to be returned from the builder and `now dev` normalizes the
paths after the build has completed."
10316c871b371cf954c17e5161a88b867a184148,Leo Lamprecht,2019-04-23 19:06:55+00:00,Leo Lamprecht,2019-04-23 19:06:55+00:00,15.0.7-canary.4
3b94b105fee332d0f11315cae3050f28829b5ef8,Nathan Rajlich,2019-04-23 18:21:41+00:00,GitHub,2019-04-23 18:21:41+00:00,"[now dev] Add `xfwd` option to `http-proxy` (#2215)

This makes the `http-proxy` module set the `X-Forwarded-*` HTTP request
headers to the destination endpoint."
d7abf9641493eeb7d30a22fd38965c6a63f951a2,Nathan Rajlich,2019-04-23 17:49:53+00:00,GitHub,2019-04-23 17:49:53+00:00,"[now dev] Pass in the builder-specific `workPath` to `shouldServe()` (#2214)

The dev server `cwd` is not correct working path of a build match, so
pass in the correct one. This property will be used by
`@now/static-build`'s dev mode."
2c4d9d5af03ab1f58363be8ff427056558eece72,Steven,2019-04-23 15:38:12+00:00,GitHub,2019-04-23 15:38:12+00:00,Ignore `__pycache__` directories (#2213)
e14ddc11ee357aec9181077766573875bbe5f7a3,Mark,2019-04-23 15:31:17+00:00,Leo Lamprecht,2019-04-23 15:31:17+00:00,Update `@zeit/ncc` to v0.18.1 (#2210)
11eb122ecc2ec79af2e008d1121d3daeee7a5be4,Leo Lamprecht,2019-04-23 12:05:47+00:00,Leo Lamprecht,2019-04-23 12:05:47+00:00,15.0.7-canary.3
40be8ef688516482bc4cf61d630b60c876a3c722,Nathan Rajlich,2019-04-23 11:14:19+00:00,Leo Lamprecht,2019-04-23 11:14:19+00:00,"[now dev] Remove `requiresInitialBuild` and make `shouldServe()` optional for v2 Builders (#2209)

* [now dev] Remove `requiresInitialBuild` and make `shouldServe()` optional for v2 Builders

`@now/next` will be removing `shouldServe()` in favor of returning
a `routes` config array upon bootup. This makes now dev's
`shouldServe()` wrapper function support matching a `routes` config
entry when `shouldServe()` is not defined.

* Remove `console.error()` debugging calls

* Remove `mergeRoutes()` logic

This was incorrect behavior, and more like what `continue: true` is
supposed to do.

* Remove invalid test case

* Remove from the `files` array when ENOENT occurs in file watcher

* Prettier

* Pass workPath to builder.shouldServe() (#2211)"
d7a72a92f2af87293a2a3dc10360dc2dea1e54f4,Amio,2019-04-23 07:25:05+00:00,GitHub,2019-04-23 07:25:05+00:00,"Support env NOW_BUILDER_CACHE_DIR for debugging builders (#2212)

* Support env NOW_BUILDER_CACHE_DIR for debugging builders

* resolve NOW_BUILDER_CACHE_DIR"
63388094875bed55d7b5f5b394e1453f522a853c,Nathan Rajlich,2019-04-22 22:39:25+00:00,GitHub,2019-04-22 22:39:25+00:00,"[now dev] Resolve built routes after matching builder (#2208)

* [now dev] Resolve built routes after matching builder

This removes the `combineRoutes()` function since it was problematic and
triggered rebuilds upon every HTTP request, which is not necessary and
makes development slower.

Now, when an HTTP request comes in, the `now.json` routes are resolved
first, and then the matched build is checked if it defines any `routes`
in the build output. If it does, and a matching route is found then the
route is handled accordingly.

* Fix dev router unit tests

* Only try to match build routes if `.length > 0`

* Remove `routes` config from `@now/static` build results

This would cause an infinite loop of resolving `entrypoint` to
`entrypoint`, and is not necessary for this builder."
68408df4d69a96b45de6c0aabc05fd7c6f75aa0f,Leo Lamprecht,2019-04-22 18:29:49+00:00,GitHub,2019-04-22 18:29:49+00:00,"Initial build should set `requestPath` to `null` (#2200)

* Initial build should set `requestPath` to `null`

* Fixed types

* Fixed type"
7266a97b545f45935429e20585b49d46353e4c69,Nathan Rajlich,2019-04-22 17:28:08+00:00,GitHub,2019-04-22 17:28:08+00:00,"[now dev] Fix typo in debug log (#2206)

Also switch to present-tense wording."
808038160f059556bb1d8a118dac8874ffcebd25,Amio,2019-04-22 07:49:41+00:00,GitHub,2019-04-22 07:49:41+00:00,[now-dev] make `routes` from v2 builders optional (#2204)
994b01719e408e21fc618f899ead6cc9c530c07c,Leo Lamprecht,2019-04-21 18:29:47+00:00,GitHub,2019-04-21 18:29:47+00:00,Better name for `continuous` property (#2199)
6e6330bf071cee5dfa810f95e0253b1d45aac2d4,Leo Lamprecht,2019-04-21 16:46:57+00:00,GitHub,2019-04-21 16:46:57+00:00,Prevent exit if client closes proxy connection (#2198)
f8b4958986c7bd3cc0f40160f07b95a0d113ca11,Leo Lamprecht,2019-04-20 00:19:11+00:00,Leo Lamprecht,2019-04-20 00:19:11+00:00,15.0.7-canary.2
b7530d494c7528050751c33a043bd4c1e3c3f691,Leo Lamprecht,2019-04-20 00:19:00+00:00,GitHub,2019-04-20 00:19:00+00:00,Match only the important part while routing (#2195)
e6aed4bd7197d78f0f41fb78a0acdc989e2e1271,Leo Lamprecht,2019-04-19 22:11:09+00:00,Leo Lamprecht,2019-04-19 22:11:09+00:00,15.0.7-canary.1
57d6723adb9f41f23fc751b875c646300ed82b0c,Amio,2019-04-19 22:09:00+00:00,Leo Lamprecht,2019-04-19 22:09:00+00:00,"Made sure support for `routes` works as expected (#2194)

* Fix lost concat result

* Made it work

* Fixed several tests

* Fixed more tests

* Fixed tests"
c0ee3f071e5a3e68ee2be5e9150a477fdef417fc,Amio,2019-04-19 14:28:39+00:00,Leo Lamprecht,2019-04-19 14:28:39+00:00,"Added support for `routes` (#2191)

* Add types for updated builder v2 api

* Fix type errors

* outputs => output

* Combine builder routes before routing

* Combine builder routes for all v2 builders

* [temporarily] reveal logs from builder

* Revert ""[temporarily] reveal logs from builder""

This reverts commit 9dac764f33d96b5fd004e0839b41228786f83d14."
54cfe2e99e254b7c74ecad5a28a28356fa50c4df,Amio,2019-04-19 13:57:01+00:00,GitHub,2019-04-19 13:57:01+00:00,"Reveal builder logs when `--debug` (#2193)

And added a `debug` flag to `DevServer` class"
10af9ce5c51e12a91bedcf046ded9a7da804cb24,Andy Bitz,2019-04-18 19:26:53+00:00,Andy Bitz,2019-04-18 19:26:53+00:00,15.0.6
d4fbbd6dfe1d20d2349596220704c8fc299b658b,Andy,2019-04-18 13:06:35+00:00,Andy Bitz,2019-04-18 19:26:07+00:00,Show all aliases instead of just the first one (#2188)
9994fc0824be64b6fc52d1cf10575b863d6946c9,Andy,2019-04-18 12:56:09+00:00,Andy Bitz,2019-04-18 19:25:57+00:00,Now CLI gets a fixed alias (#2189)
c7beaaab94bce3535b239d20dae51d5c1482edae,Andy Bitz,2019-04-18 19:25:08+00:00,Andy Bitz,2019-04-18 19:25:08+00:00,"Revert ""Revert ""Fix batch file command to work from paths with spaces. (#2144)""""

This reverts commit 16c2946e3211f80fea102a3c5766bdd4efdc57d3."
25f6cb7522c6fb0536e3830b1826320f14e419da,Andy Bitz,2019-04-18 13:08:24+00:00,Andy Bitz,2019-04-18 13:08:24+00:00,15.0.5-canary.5
0a69920b3f57a09911c0f7c1d22493340af63744,Andy,2019-04-18 13:06:35+00:00,GitHub,2019-04-18 13:06:35+00:00,Show all aliases instead of just the first one (#2188)
adad86401f23c19beebc93ef81c74fde090f2019,Andy,2019-04-18 12:56:09+00:00,GitHub,2019-04-18 12:56:09+00:00,Now CLI gets a fixed alias (#2189)
6b3a5880b1e2984ca79d2bf9f3dcd5fad4ebddf3,Nathan Rajlich,2019-04-18 09:57:23+00:00,Leo Lamprecht,2019-04-18 09:57:23+00:00,"[now dev] Reuse the same `workPath` for subsequent builds (#2185)

* [now dev] Reuse the same `workPath` for subsequent builds

Reusing the same `workPath` for subsequent builds makes rebuilding
faster, as well as it's necessary for webpack's watcher to work
correctly as it relies on the full filesystem paths being intact.

`prepareCache()` also no longer needs to be invoked, since the
previous `workPath` directory will already contain the necessary files
that the cache would otherwise produce.

* Prettier"
de4e34033846a78dd36fa7f6e3d82059fd47195b,Nathan Rajlich,2019-04-18 04:25:08+00:00,GitHub,2019-04-18 04:25:08+00:00,"[now dev] Don't trigger a rebuild if an asset was deleted (#2184)

* [now dev] Don't trigger a rebuild if an asset was deleted

This handles the case where an asset was deleted and should no longer be
served after a filesystem watcher event. For example, if a Next.js page
was previously built and the files was deleted from the `pages`
directory, then the rebuild should not happen since it will fail in the
`build()` function anyways.

* Add `config` to `shouldServe()`

* Remove unused `builder` var"
c10519acc271290dfba683b66e4247f285645fbd,Andy Bitz,2019-04-17 21:36:33+00:00,Andy Bitz,2019-04-17 21:36:33+00:00,15.0.5-canary.4
dfb4e8921a7075a78875ad3b57021aa8e0fee9cf,Andy,2019-04-17 21:34:00+00:00,GitHub,2019-04-17 21:34:00+00:00,"Show a upgrade message if the build limit is exceeded (#2182)

* Show a upgrade message if the build limit is exceeded

* Typo

* Update src/commands/deploy/latest.js

Co-Authored-By: AndyBitz <AndyBitz@users.noreply.github.com>"
ba02d56a4e5b67e953966e93546413554466b4ec,Andy Bitz,2019-04-17 19:12:45+00:00,Andy Bitz,2019-04-17 19:12:45+00:00,15.0.5
e03d16462f9b34c86d8774fc9d272ee2f7c657cb,Andy,2019-04-17 17:27:07+00:00,Andy Bitz,2019-04-17 19:05:48+00:00,"Add tests for the new automatic aliasing in the v9 API (#2180)

* Add tests for the new automatic aliasing in the v9 API

* Show a more descriptive message

* Await sleep

* Add sleep to test

* Decrease sleep"
0547a82a5c4bb1a9cea3f4c838ed2af730d8b26f,Andy,2019-04-16 22:39:41+00:00,Andy Bitz,2019-04-17 19:05:40+00:00,Use the v9 deployments API (#2176)
6e51e5db306af6917dd1f64e6ab322e9edbd5011,Andy Bitz,2019-04-17 18:32:14+00:00,Andy Bitz,2019-04-17 18:32:14+00:00,15.0.5-canary.3
7a9e12affa7179b00947378b12629c499a4ed7cd,Andy,2019-04-17 18:27:54+00:00,Leo Lamprecht,2019-04-17 18:27:54+00:00,"Show the domain purchase UI (#2168)

* Show the domain purchase UI

* Show the correct error message

* Exit after the domain purchase"
011d41af57fd91f56b2616782cea4970d8164eac,Andy,2019-04-17 17:27:07+00:00,GitHub,2019-04-17 17:27:07+00:00,"Add tests for the new automatic aliasing in the v9 API (#2180)

* Add tests for the new automatic aliasing in the v9 API

* Show a more descriptive message

* Await sleep

* Add sleep to test

* Decrease sleep"
469e8c0505657ccd68f452b1b2a40d355b7e2a5d,Amio,2019-04-17 16:06:21+00:00,Leo Lamprecht,2019-04-17 16:06:21+00:00,"Add some debug logs for now-dev (#2181)

* Add some debug logs

* Fix eslint warnings"
16c2946e3211f80fea102a3c5766bdd4efdc57d3,Andy Bitz,2019-04-17 08:57:19+00:00,Andy Bitz,2019-04-17 08:57:19+00:00,"Revert ""Fix batch file command to work from paths with spaces. (#2144)""

This reverts commit ce4d9d21d61d3db20fb1678aec6abac55e800019."
d59bc07b89f7ede4fc854e121abb747e37663063,Duncan,2019-04-17 08:53:29+00:00,Andy Bitz,2019-04-17 08:56:42+00:00,"Fix batch file command to work from paths with spaces. (#2144)

Fixes #2413."
ce4d9d21d61d3db20fb1678aec6abac55e800019,Duncan,2019-04-17 08:53:29+00:00,Andy,2019-04-17 08:53:29+00:00,"Fix batch file command to work from paths with spaces. (#2144)

Fixes #2413."
e7d101c37e1058a31cd5d4a4b0b0f86497309c19,Nathan Rajlich,2019-04-17 04:22:42+00:00,GitHub,2019-04-17 04:22:42+00:00,"[now dev] Handle filesystem events where the file has already been deleted (#2179)

Editors like `vim` like to use temporary files in the file's working
directory and quickly rename / delete them. This makes `now dev` handle
that gracefully and not crash."
b0f83bd1a0c062211aa15a0c04c90d28da0f4e16,Andy Bitz,2019-04-16 23:25:30+00:00,Andy Bitz,2019-04-16 23:25:30+00:00,15.0.5-canary.2
9016f25504eef0273e877f4529e69cdfc07574a7,Andy,2019-04-16 23:09:08+00:00,GitHub,2019-04-16 23:09:08+00:00,Bump @zeit/nsfw to 2.0.2 (#2178)
02134807d88595ba9fb1f2eee7df1aa8372322c4,Andy,2019-04-16 22:39:41+00:00,Leo Lamprecht,2019-04-16 22:39:41+00:00,Use the v9 deployments API (#2176)
fb4da345624e20c0a14ce322e3a46c887ed83ae1,Nathan Rajlich,2019-04-16 22:14:47+00:00,Leo Lamprecht,2019-04-16 22:14:47+00:00,"[now dev] Default the `Content-Type` to ""application/octet-stream"" (#2177)

This matches the behavior in production, so it is more correct.

This new common `getMimeType()` function also centralizes a place where
we can overwrite the `mime-types` return value to other values to match
production for other future discrepancies."
0da322560c9bd83899f990534eaeb05195ad8d2a,Leo Lamprecht,2019-04-16 19:51:14+00:00,Leo Lamprecht,2019-04-16 19:51:14+00:00,15.0.5-canary.1
4aece1395e8545baf71889b568f51feec056d988,William Li,2019-04-12 10:36:37+00:00,Leo Lamprecht,2019-04-16 19:51:00+00:00,"[BUG-FIX] team invite ignored scope error (#2140)

* expose teams command to --scope change, fixes #2139"
cc06b3990584b6837bfc6f1e1c8ccf25b75b0b59,Leo Lamprecht,2019-04-16 19:09:17+00:00,Leo Lamprecht,2019-04-16 19:09:17+00:00,15.0.4-canary.8
de9eebdf76d354ddfeed1b0bc3e64dcac0802017,Amio,2019-04-16 19:07:40+00:00,Leo Lamprecht,2019-04-16 19:07:40+00:00,"Mute install logs from @now/node builder (#2171)

* [wip] Mute install logs from @now/node builder

* Bumped build utils"
db1af88681828fcaa26af0bcc1f17b7dbfeeda49,Nathan Rajlich,2019-04-16 18:24:45+00:00,Leo Lamprecht,2019-04-16 18:24:45+00:00,"Pass `filesChanges` and `filesRemoved` array to builder's `build()` (#2174)

This will be required to implement the `@now/node` ncc watcher logic."
7979110f2b15f5f5e3c83650a522ae9679ab101b,Nathan Rajlich,2019-04-16 18:13:15+00:00,Leo Lamprecht,2019-04-16 18:13:15+00:00,"Added file watcher to `now dev` (#2153)

* [now dev] Add `nsfw` file watcher

WIP for triggering background rebuilds. So far the `files` mapping is
now kept in sync via the events produced by `nsfw`.

* Add `now.json` caching and invalidation from nsfw events

* Add initial rebuilding logic from filesystem watching

* Remove previously built assets when a rebuild occurs

* Make `@now/static` not require a hard refresh

* Shut down the `nsfw` instance when stopping the DevServer

* Prettier and some minor tweaks

* Ship module

* Support private deps

* Fixed tests

* Fixed integration tests

* Revert ""Support private deps""

This reverts commit 0b4991b87641d693fa61f81223e0efc2b7006f83.

* Support multiple platforms

* Typed

* Consider Alpine

* Bumped @zeit/nsfw to latest version

* Update src/commands/dev/lib/nsfw-module.ts

Co-Authored-By: leo <mindrun@icloud.com>

* Pass module path differently

* Bumped package

* Make binary executable

* Wait until piping is complete

* Added debug statements"
9a81b5a598ccf5b37225f4c966099ecc732d3691,Amio,2019-04-16 18:07:37+00:00,Leo Lamprecht,2019-04-16 18:07:37+00:00,"Enable '@typescript-eslint/no-unused-vars': 'warn' (#2172)

* Enable '@typescript-eslint/no-unused-vars': 'warn'

* Clean comments"
23d44347ac57a2df06ad059998075b04ec9fd418,Nathan Rajlich,2019-04-16 01:27:59+00:00,GitHub,2019-04-16 01:27:59+00:00,"Enable source maps for development builds of now-cli (#2170)

If you run `yarn build-dev`, then now source maps are enabled, allowing
us to see the proper line of an error in the source code file instead of
the huge `dist/index.js` file.

Previously they were only enabled for production builds."
6f2526a75abd09cf22b8802577c2593c643a04f4,Ana Trajkovska,2019-04-15 20:54:42+00:00,Ana Trajkovska,2019-04-15 20:54:42+00:00,15.0.4-canary.7
2bd4341c072bb8b75cee0a4fedac8b94b40de375,Ana Trajkovska,2019-04-15 20:47:42+00:00,GitHub,2019-04-15 20:47:42+00:00,"Handle additional errors when issuing a certificate (#2165)

* Handle additional errors when issuing a certificate

* Rename errors

* Provide more context in CertsDNSError

* Fix CertsDNSError structure

* Display cns with join

* Fix CertsDNSError"
2f3581fe1cf3814377f156effcc46b77db47e813,Nathan Rajlich,2019-04-14 22:40:07+00:00,GitHub,2019-04-14 22:40:07+00:00,"[now dev] Add `host` property to the invoke payload (#2164)

Fixes https://github.com/zeit/now-builders/issues/390."
6ddb7246d84314c72edd0c292c389953fcf89dbe,Nathan Rajlich,2019-04-13 21:19:25+00:00,GitHub,2019-04-13 21:19:25+00:00,"[now dev] Use empty version string for `@now/static` (#2159)

This is just a cosmetic fix so that ""vbuilt-in"" isn't printed when
`--debug` is enabled."
ce2773491a7a69ec7973d45acea0f56063d4d55b,Nathan Rajlich,2019-04-12 23:16:46+00:00,Nathan Rajlich,2019-04-12 23:16:46+00:00,15.0.4-canary.6
614b9c412a799cdac0bc18beffef4e030ddc947d,Nathan Rajlich,2019-04-12 19:00:51+00:00,GitHub,2019-04-12 19:00:51+00:00,"[now dev] Don't run every build when a v1 builder is detected (#2151)

Before this, if a v1 builder was detected then every build match was
built instead of only the matches that use a v1 builder."
479f224240138513da681eab4fc20e12a51a3824,William Li,2019-04-12 10:36:37+00:00,GitHub,2019-04-12 10:36:37+00:00,"[BUG-FIX] team invite ignored scope error (#2140)

* expose teams command to --scope change, fixes #2139"
2dfd4e84e10079d6a65c56f6a880a5bfa8aed56f,Nathan Rajlich,2019-04-12 01:50:54+00:00,GitHub,2019-04-12 01:50:54+00:00,"[now dev] Fix index-based asset lookup logic (#2138)

There was a bug in the index lookup logic such that `GET /404` would be
matching the `/index.*` file. Fixed in this commit."
b8abd8e6b2afa28d5523c8bf2b1fa8c1937db1bd,Leo Lamprecht,2019-04-11 11:36:22+00:00,Leo Lamprecht,2019-04-11 11:36:22+00:00,15.0.4
674805323334517a6dbe3870e76070b49118e619,Nathan Rajlich,2019-04-11 11:10:28+00:00,Leo Lamprecht,2019-04-11 11:30:46+00:00,"[now dev] Refactor to support `shouldServe()` in Now Builders (#2134)

* WIP refactor to Now Builders v2 API

* More WIP

* Finish up refactor

* Remove `BuiltAsset` type

These properties are on the the `BuildMatch` interface now.

* Fix `handle: filesystem` route post-refactor

* Prettier

* Update src/commands/dev/lib/builder-cache.ts

Co-Authored-By: leo <mindrun@icloud.com>"
3cc3b17b1d92466693da1cbab0459b08707da9ee,Amio,2019-04-11 09:29:54+00:00,Leo Lamprecht,2019-04-11 11:30:40+00:00,"Improve eslint config (#2042)

- Get `.ts` files covered 
- Update eslint related dependencies
- Add typescript-eslint [recommended rules](https://github.com/typescript-eslint/typescript-eslint/blob/3e26ab684ae5642e9c50940bedd155e32e189900/packages/eslint-plugin/src/configs/recommended.json), but only enabled ones we already followed, commented ones causing errors.

Commented rules including:

```yaml
  # '@typescript-eslint/no-unused-vars': 1
  # '@typescript-eslint/indent': ['error', 2]
  # '@typescript-eslint/array-type': error
  # '@typescript-eslint/ban-types': error
  # '@typescript-eslint/explicit-member-accessibility': error
  # '@typescript-eslint/member-delimiter-style': error
  # '@typescript-eslint/no-angle-bracket-type-assertion': error
  # '@typescript-eslint/no-explicit-any': warn
  # '@typescript-eslint/no-object-literal-type-assertion': error
  # '@typescript-eslint/no-use-before-define': error
  # '@typescript-eslint/no-var-requires': error
  # '@typescript-eslint/prefer-interface': error
```

### TODO

Go through these commented rules one by one, enable & fix for it or confirm it's disabled. Since enabling some rules would cause massive code change (like `'@typescript-eslint/indent': ['error', 2]`), which might conflict with our ongoing development, we better do this in separated PRs."
1d525023dff36fdace4cb799c3075635a4a09d64,Mark Glagola,2019-04-10 20:37:59+00:00,Leo Lamprecht,2019-04-11 11:30:35+00:00,"Handle CAA cert conflict error (#2121)

* Handle CAA cert conflict error

* Fixed error description

* using output.success instead of console.log(...)

* Revert ""using output.success instead of console.log(...)""

This reverts commit 2db9a834f3d22ec2da7c692b0e67ea2863078489."
be1ebdbdd3a8b8248891a4c07812bcfe36776e78,Leo Lamprecht,2019-04-10 20:24:14+00:00,Leo Lamprecht,2019-04-11 11:30:32+00:00,"Add a note about the CDN always being enabled (#2133)

* Revert ""Stop indicating whether CDN is enabled (#2132)""

This reverts commit 3dda3e84bf6937f461576417661be90572fa7a92.

* Add a note about the CDN always being enabled

* Removed useless flag

* Added correct table heading"
90aae568c52bcf53ebc9888f38690004daf09aeb,Leo Lamprecht,2019-04-10 18:47:42+00:00,Leo Lamprecht,2019-04-11 11:30:27+00:00,Stop indicating whether CDN is enabled (#2132)
c311ecbc07d91c7271f586ebd77b485a6bd50473,Leo Lamprecht,2019-04-10 17:19:40+00:00,Leo Lamprecht,2019-04-11 11:30:19+00:00,"Print full validation error message (#2131)

* Print full validation error message

* Shortened second message

* Updated latest pipeline too"
1a676c02036856d191051e4ef78f0d5c7bfba782,Mark Glagola,2019-04-10 16:27:48+00:00,Leo Lamprecht,2019-04-11 11:30:15+00:00,fixes certs rate limited cns arg (#2130)
692a08c13497580610b975d1bb7804d1e78db21f,Amio,2019-04-10 15:55:12+00:00,Leo Lamprecht,2019-04-11 11:30:11+00:00,Bump ava to 1.4.1 (#2128)
321ee681c559dfc69f9df9583916c6fe42b36f55,Mark Glagola,2019-04-10 15:50:10+00:00,Leo Lamprecht,2019-04-11 11:30:07+00:00,Handle unsupported tld purchase (#2129)
88477830635442b90447aba461708fb6587bbbd1,Nathan Rajlich,2019-04-10 01:50:11+00:00,Leo Lamprecht,2019-04-11 11:29:59+00:00,"[now dev] Add logging of the builder package versions (#2125)

* [now dev] Add logging of the builder package versions

To aid in debugging errors reported by users.

* Remove bad"
9c0cf1eb9e87d21f0e8640d1837447cf00972d39,Mark Glagola,2019-04-09 22:17:57+00:00,Leo Lamprecht,2019-04-11 11:29:54+00:00,"Fix getCertsById + handle cert not found by id error (#2101)

* fix certs delete + handle not found error

* Converted rm.js -> rm.ts"
688d50b662c2d371de42547575a2f79f699a525c,Nathan Rajlich,2019-04-09 17:07:56+00:00,Leo Lamprecht,2019-04-11 11:29:48+00:00,"[now dev] Add build de-duping for the lazy initial builds case (#2124)

This is the same de-duping logic that occurs when you hard refresh,
but the unbuilt case was still not being considered. This fixes clicking
on an unbuilt link more than once from triggering multiple builds of the
same asset."
0f74a0695c6de3605ebca616ec373c9cc7c7cca1,Leo Lamprecht,2019-04-11 11:10:37+00:00,Leo Lamprecht,2019-04-11 11:10:37+00:00,15.0.4-canary.5
e85c416d0108991fcc0b9467a47f0e254ae54da9,Nathan Rajlich,2019-04-11 11:10:28+00:00,Leo Lamprecht,2019-04-11 11:10:27+00:00,"[now dev] Refactor to support `shouldServe()` in Now Builders (#2134)

* WIP refactor to Now Builders v2 API

* More WIP

* Finish up refactor

* Remove `BuiltAsset` type

These properties are on the the `BuildMatch` interface now.

* Fix `handle: filesystem` route post-refactor

* Prettier

* Update src/commands/dev/lib/builder-cache.ts

Co-Authored-By: leo <mindrun@icloud.com>"
6ac63baaa58957126463fd313a77b050f5669321,Leo Lamprecht,2019-04-11 10:52:41+00:00,Leo Lamprecht,2019-04-11 10:52:41+00:00,15.0.4-canary.4
96c630b27cef1a8209444876e351810a0cfc0579,Amio,2019-04-11 09:29:54+00:00,GitHub,2019-04-11 09:29:54+00:00,"Improve eslint config (#2042)

- Get `.ts` files covered 
- Update eslint related dependencies
- Add typescript-eslint [recommended rules](https://github.com/typescript-eslint/typescript-eslint/blob/3e26ab684ae5642e9c50940bedd155e32e189900/packages/eslint-plugin/src/configs/recommended.json), but only enabled ones we already followed, commented ones causing errors.

Commented rules including:

```yaml
  # '@typescript-eslint/no-unused-vars': 1
  # '@typescript-eslint/indent': ['error', 2]
  # '@typescript-eslint/array-type': error
  # '@typescript-eslint/ban-types': error
  # '@typescript-eslint/explicit-member-accessibility': error
  # '@typescript-eslint/member-delimiter-style': error
  # '@typescript-eslint/no-angle-bracket-type-assertion': error
  # '@typescript-eslint/no-explicit-any': warn
  # '@typescript-eslint/no-object-literal-type-assertion': error
  # '@typescript-eslint/no-use-before-define': error
  # '@typescript-eslint/no-var-requires': error
  # '@typescript-eslint/prefer-interface': error
```

### TODO

Go through these commented rules one by one, enable & fix for it or confirm it's disabled. Since enabling some rules would cause massive code change (like `'@typescript-eslint/indent': ['error', 2]`), which might conflict with our ongoing development, we better do this in separated PRs."
ff353a264e50ab0e72b1a9484253c14c349348d7,Mark Glagola,2019-04-10 20:37:59+00:00,GitHub,2019-04-10 20:37:59+00:00,"Handle CAA cert conflict error (#2121)

* Handle CAA cert conflict error

* Fixed error description

* using output.success instead of console.log(...)

* Revert ""using output.success instead of console.log(...)""

This reverts commit 2db9a834f3d22ec2da7c692b0e67ea2863078489."
45097563f09b412ccbbb5b07838b587ea669a531,Leo Lamprecht,2019-04-10 20:24:31+00:00,Leo Lamprecht,2019-04-10 20:24:31+00:00,15.0.4-canary.3
12370a8033a6f92d64ae4ae3a4366a08611519c2,Leo Lamprecht,2019-04-10 20:24:14+00:00,GitHub,2019-04-10 20:24:14+00:00,"Add a note about the CDN always being enabled (#2133)

* Revert ""Stop indicating whether CDN is enabled (#2132)""

This reverts commit 3dda3e84bf6937f461576417661be90572fa7a92.

* Add a note about the CDN always being enabled

* Removed useless flag

* Added correct table heading"
d1c67b013bca7d52ce577e413b294210cdd6bb0b,Leo Lamprecht,2019-04-10 20:02:03+00:00,Leo Lamprecht,2019-04-10 20:02:03+00:00,15.0.4-canary.2
3dda3e84bf6937f461576417661be90572fa7a92,Leo Lamprecht,2019-04-10 18:47:42+00:00,GitHub,2019-04-10 18:47:42+00:00,Stop indicating whether CDN is enabled (#2132)
a1a85732d4690269a3528401c5af5a1e507faa32,Leo Lamprecht,2019-04-10 17:20:35+00:00,Leo Lamprecht,2019-04-10 17:20:35+00:00,15.0.4-canary.1
bc4a2c8dce0b6a601f41309b71e8b5b1bd6af7b8,Leo Lamprecht,2019-04-10 17:19:40+00:00,GitHub,2019-04-10 17:19:40+00:00,"Print full validation error message (#2131)

* Print full validation error message

* Shortened second message

* Updated latest pipeline too"
f22c288bf4993e5559a36a0bff1ae59720cc0e4e,Mark Glagola,2019-04-10 16:27:48+00:00,GitHub,2019-04-10 16:27:48+00:00,fixes certs rate limited cns arg (#2130)
37a63e1c70d6bbb13a2d15b28669f0fbdfb574dc,Amio,2019-04-10 15:55:12+00:00,GitHub,2019-04-10 15:55:12+00:00,Bump ava to 1.4.1 (#2128)
0c50c5a1a6e71220d99a0e52b348c23a4edc6e05,Mark Glagola,2019-04-10 15:50:26+00:00,Mark Glagola,2019-04-10 15:50:26+00:00,15.0.3-canary.6
f2c487162f66602ef0c6df217bc991ab6690d34e,Mark Glagola,2019-04-10 15:50:10+00:00,GitHub,2019-04-10 15:50:10+00:00,Handle unsupported tld purchase (#2129)
430696f486f17a33a023be40e048411e6b63c64b,Nathan Rajlich,2019-04-10 01:50:11+00:00,GitHub,2019-04-10 01:50:11+00:00,"[now dev] Add logging of the builder package versions (#2125)

* [now dev] Add logging of the builder package versions

To aid in debugging errors reported by users.

* Remove bad"
242654776260d3a0af8e254a241fde9c8acaa0c3,Mark Glagola,2019-04-09 22:21:11+00:00,Mark Glagola,2019-04-09 22:21:11+00:00,15.0.3-canary.5
e877467a98209fc2cefbc766c0b70c99c8238bd0,Mark Glagola,2019-04-09 22:17:57+00:00,GitHub,2019-04-09 22:17:57+00:00,"Fix getCertsById + handle cert not found by id error (#2101)

* fix certs delete + handle not found error

* Converted rm.js -> rm.ts"
060c3de74e62de14bddf93598fc56bfc0ccd9f86,Nathan Rajlich,2019-04-09 17:07:56+00:00,GitHub,2019-04-09 17:07:56+00:00,"[now dev] Add build de-duping for the lazy initial builds case (#2124)

This is the same de-duping logic that occurs when you hard refresh,
but the unbuilt case was still not being considered. This fixes clicking
on an unbuilt link more than once from triggering multiple builds of the
same asset."
4039ae97727bbd208b7fc11c649c7746b736fff6,Leo Lamprecht,2019-04-08 12:16:20+00:00,Leo Lamprecht,2019-04-08 12:16:20+00:00,15.0.3
88842d5a5425c3afc9ce28b28a652af9b5cae575,Nathan Rajlich,2019-04-08 04:50:45+00:00,Leo Lamprecht,2019-04-08 12:03:52+00:00,[now dev] Update `@now/build-utils` to v0.4.40 (#2119)
44d02b78ac5ad73618c94402dc6b2b7112dcd6aa,Nathan Rajlich,2019-04-08 02:58:35+00:00,Leo Lamprecht,2019-04-08 12:03:48+00:00,[now dev] Update `@now/build-utils` to v0.4.40-canary.0 (#2118)
c3d5a7b8fff78d92a551a4e5b2ae243b61337134,Nathan Rajlich,2019-04-07 22:17:54+00:00,Leo Lamprecht,2019-04-08 12:03:42+00:00,[now dev] Add `handle: filesystem` support (#2116)
403d24d9341c3cd68a507620a554377179a6e89f,Nathan Rajlich,2019-04-07 22:13:21+00:00,Leo Lamprecht,2019-04-08 12:03:35+00:00,[now dev] Run `npm update` to get builder updates (#2117)
943fe8989b5def980339e74e21d041c89d7af987,Mark,2019-04-07 13:47:56+00:00,Leo Lamprecht,2019-04-08 12:03:30+00:00,Update `@zeit/ncc` to v0.17.4 (#2107)
893fe295149f0b0ad4d3d9f633a11dc1bb002b65,Nathan Rajlich,2019-04-07 13:47:40+00:00,Leo Lamprecht,2019-04-08 12:03:26+00:00,"[now dev] Run `prepareCache()` asynchronous (#2105)

* [now dev] Run `prepareCache()` asynchronous

And also wait a few seconds before running the actual logic,
since the `prepareCache()` function may be computationally expensive,
and its run in the same process as `now dev` (for now), so allow
some time for the current HTTP request to complete.

* Add symlinks support to `glob()`, instrument prepareCache time"
568559daa514964958cf9a77a78a806d49118fa5,Nathan Rajlich,2019-04-06 03:26:44+00:00,Leo Lamprecht,2019-04-08 12:03:21+00:00,"[now dev] Invoke `prepareCache()` from Builders (#2104)

If a builder defines the `prepareCache()` function, then it gets invoked
after `build()` has completed to set up the initial build state of the
next build for this same asset.

For example, the goal for `@now/node` if the package.json has not
changed is to have yarn produce the ""Already up-to-date"" message on the
next build, because installing dependencies ends up taking a long time
on bigger projects."
9e713e056588dfd81249a956c47df9b54771c45e,Andy,2019-04-05 21:53:05+00:00,Leo Lamprecht,2019-04-08 12:03:14+00:00,"Exit if assigning an alias failed while deploying (#2103)

* Error if aliasFinal is an empty array

* Return if alias assignment failed"
4c297d2ab44b9a3a1772c8e90059c65d75cf68cb,Nathan Rajlich,2019-04-08 04:59:44+00:00,Nathan Rajlich,2019-04-08 04:59:44+00:00,15.0.3-canary.4
53ccc9e02b2c6dd02991e7ea00c7eb1048cf1f20,Nathan Rajlich,2019-04-08 04:50:45+00:00,GitHub,2019-04-08 04:50:45+00:00,[now dev] Update `@now/build-utils` to v0.4.40 (#2119)
477b30583e4e83a3d44ccef50a6e4eccc6ecefbe,Nathan Rajlich,2019-04-08 02:58:35+00:00,Guillermo Rauch,2019-04-08 02:58:35+00:00,[now dev] Update `@now/build-utils` to v0.4.40-canary.0 (#2118)
315bbbe25e877bc30ca61a46c79ea8cd4826d6cf,Nathan Rajlich,2019-04-07 22:18:16+00:00,Nathan Rajlich,2019-04-07 22:18:16+00:00,15.0.3-canary.3
62cc84fc9a866af4eea97ac99daba33d564ce4e6,Nathan Rajlich,2019-04-07 22:17:54+00:00,GitHub,2019-04-07 22:17:54+00:00,[now dev] Add `handle: filesystem` support (#2116)
e28bf1152cf16144b062836706e936ed04f8e1a6,Nathan Rajlich,2019-04-07 22:13:21+00:00,GitHub,2019-04-07 22:13:21+00:00,[now dev] Run `npm update` to get builder updates (#2117)
9519b3b0e7daf09467af43bc1369bf3839380550,Leo Lamprecht,2019-04-07 13:49:10+00:00,Leo Lamprecht,2019-04-07 13:49:10+00:00,15.0.3-canary.2
b7462211e6e76bcbd2828c672ec0f6ca2340b63e,Mark,2019-04-07 13:47:56+00:00,Leo Lamprecht,2019-04-07 13:47:56+00:00,Update `@zeit/ncc` to v0.17.4 (#2107)
13d447a81b0361a916caf75fff9f2911718d2205,Nathan Rajlich,2019-04-07 13:47:40+00:00,Leo Lamprecht,2019-04-07 13:47:40+00:00,"[now dev] Run `prepareCache()` asynchronous (#2105)

* [now dev] Run `prepareCache()` asynchronous

And also wait a few seconds before running the actual logic,
since the `prepareCache()` function may be computationally expensive,
and its run in the same process as `now dev` (for now), so allow
some time for the current HTTP request to complete.

* Add symlinks support to `glob()`, instrument prepareCache time"
049d6e61dfc84688ef9c4fe205589e946ade067d,Nathan Rajlich,2019-04-06 03:26:44+00:00,GitHub,2019-04-06 03:26:44+00:00,"[now dev] Invoke `prepareCache()` from Builders (#2104)

If a builder defines the `prepareCache()` function, then it gets invoked
after `build()` has completed to set up the initial build state of the
next build for this same asset.

For example, the goal for `@now/node` if the package.json has not
changed is to have yarn produce the ""Already up-to-date"" message on the
next build, because installing dependencies ends up taking a long time
on bigger projects."
482aba0c458bda08c3daaedbd808b07ed4a94909,Andy Bitz,2019-04-05 21:57:37+00:00,Andy Bitz,2019-04-05 21:57:37+00:00,15.0.3-canary.1
f9a931dbd20a97261471334e5e8295fb2a8bf6f4,Andy,2019-04-05 21:53:05+00:00,GitHub,2019-04-05 21:53:05+00:00,"Exit if assigning an alias failed while deploying (#2103)

* Error if aliasFinal is an empty array

* Return if alias assignment failed"
583b566133c4014e13f0fc907abf5d3856167f18,Leo Lamprecht,2019-04-05 14:00:22+00:00,Leo Lamprecht,2019-04-05 14:00:22+00:00,15.0.2
4f639e608b17f46e0f7a16ea5d14f512df1f3f7a,Leo Lamprecht,2019-04-05 13:48:53+00:00,GitHub,2019-04-05 13:48:53+00:00,Make npm not prefer offline (#2102)
ec376e272d0e1c22105017eb6ffd72d4c71a7aea,Leo Lamprecht,2019-04-05 13:37:09+00:00,Leo Lamprecht,2019-04-05 13:37:09+00:00,15.0.2-canary.5
c13d25057716c658f8b2ba121698e88243c78601,William Li,2019-04-05 00:11:35+00:00,Leo Lamprecht,2019-04-05 13:37:04+00:00,Don't forget to do a `yarn install` before linking (#2094)
70c2c42416724b112319e8b8eed2f91688c9ed7a,Nathan Rajlich,2019-04-05 00:21:59+00:00,Leo Lamprecht,2019-04-05 13:33:35+00:00,"[now dev] Use a different `workPath` for every build (#2100)

This is more inline with how a fresh Now deployment works, where
is has to download fresh files each time. This will also fix the issue
with `@now/next` that deleted the `.next` output dir and deleting static
files upon subsequent builds.

This is still a bit unoptimized because `prepareCache()` from the
builder is not yet being invoked, but it's still more correct than
reusing the `workPath`."
ec56091f98487b53ef32a72319380bb4ff9687a2,Nathan Rajlich,2019-04-05 00:11:08+00:00,Leo Lamprecht,2019-04-05 13:33:31+00:00,"Ignore `.env` and `.env.build` for deployments by default (#2083)

Because `now dev` uses these dotenv files to define the Now secrets to
use, it would be bad practice to include them in the deployment files
since they will be using development values instead of production values."
4325aa9eb4f4d9fd63ea8356aba3e82eef19e037,Nathan Rajlich,2019-04-04 22:05:18+00:00,Leo Lamprecht,2019-04-05 13:33:27+00:00,"[now dev] Clean up `dev-router` a bit (#2099)

* [now dev] Clean up `dev-router` a bit

This is a follow up to #2095 to move the `resolveRouteParameters()`
funcrtion to the top-level and other slight optimizations like not
re-parsing the URL multiple times.

* Remove unused `qs` import"
e01549a9782858cb051bfa27e0ad5916c8570567,Nathan Rajlich,2019-04-04 21:36:05+00:00,Leo Lamprecht,2019-04-05 13:33:24+00:00,[now dev] Remove `now dev cache clean` (#2097)
2d855391b6886bb764fea51c3dfba0c4f3cc8d2a,William Li,2019-04-04 20:33:04+00:00,Leo Lamprecht,2019-04-05 13:33:20+00:00,"[now dev] Apply route params to `headers` (#2095)

* version bump (canary)

* inject paramters into headers.Location fixes #2092

* refactored route parameter resolving function

* Revert ""version bump (canary)""

This reverts commit 5857489ceffcbcce07eb6e5d6fcc20279d0ba5fd.

* Update src/commands/dev/lib/dev-router.ts

Co-Authored-By: williamli <email@williamli.dev>

* refactor headers resolution

* try to resolve all parameters inside each child of headers"
feb88e5aa3937726679acd82253a227218844ee7,Nathan Rajlich,2019-04-04 19:25:07+00:00,Leo Lamprecht,2019-04-05 13:33:15+00:00,"[now dev] Set the same `MemorySize` on the lambdas as production (#2096)

This should fix https://spectrum.chat/zeit/now/now-dev-javascript-heap-out-of-memory~3fd6e823-59de-426b-ade0-af48d18f3494"
257a8e7be183ecbb210286cdc9758fc92dd2322f,Nathan Rajlich,2019-04-04 19:14:42+00:00,Leo Lamprecht,2019-04-05 13:33:11+00:00,"Remove 'output logs of a 1.0 deployment' integration test (#2085)

This test is very flaky causing us to constantly restart CircleCI jobs
in order to do releases of `now-cli`. Considering that it's testing the
1.0 pipeline, let's just remove this one to make life easier."
f0473e9155b1bc72ba53a5ceb9b4ca29910b66ad,Nathan Rajlich,2019-04-04 01:37:47+00:00,Leo Lamprecht,2019-04-05 13:33:05+00:00,"[now dev] Fix the `requestPath` for the hard-refresh case (#2086)

This passes in the resolved `assetKey` instead of `req.url` to the
builder `requestPath` when a hard-refresh is requested, allowing the
proper single-page rebuild to happen."
e0a3a39faabb7173ff0cabbefb89a964f1a017e8,Nathan Rajlich,2019-04-04 00:39:14+00:00,Leo Lamprecht,2019-04-05 13:33:00+00:00,"[now dev] Fix subscription resolving logic (#2082)

* [now dev] Fix subscription resolving logic

Strip the leading `/` since the builder outputs don't have one, match
index routes, and pass the resulting subscription key to the builder.

* Fix `index` matching

* Update `@now/build-utils` to v0.4.39-canary.0

* Update `@now/build-utils` to v0.4.39"
c24afe3714c6021f5f58a9b624fde8623d742fa9,Nathan Rajlich,2019-04-03 10:55:11+00:00,Leo Lamprecht,2019-04-05 13:32:56+00:00,"[now dev] Respond with 404 once the server is shutting down (#2070)

In the case of a keep-alive connection from the web browser, and a page
continuing to send HTTP requests to the dev server, sometimes the server
never shuts down. So send a 404 response with `Connection: close` to
force the web browser to close the connection."
705fdfba38b62adc8d8e2312d3c78fe5adca7b6c,Nathan Rajlich,2019-04-03 10:53:35+00:00,Leo Lamprecht,2019-04-05 13:32:52+00:00,"[now dev] Add support for Builder ""subscriptions"" (#2071)

If the builder has a `subscribe()` function, then the initial
builds are not run and instead an array of ""subscriptions"" is
created. When an HTTP request comes in that matches one of the
subscription patterns, then this builder will be actually be
executed."
210d4f9d5cae5a8adbad3f040cd95eeb22b7b45b,Nathan Rajlich,2019-04-03 01:53:06+00:00,Leo Lamprecht,2019-04-05 13:32:48+00:00,"[now dev] Pass `meta` object to Builders' `build()` function (#2069)

This introduces a new object called `meta` that gets passed to the
Now Builders' `build()` function. The `isDev` property is moved to
this object, and a new property `requestPath` is also introduced.

`requestPath` represents the URL that was requested to trigger the
`build()` to be called. It may be used by builders to do incremental
compilation and only re-build the assets related to the URL that was
requested. For example, `@now/next` may use this property to only build
the page that was requested."
8396f17c405a721d43e8e20ef2d3743bb47aa1d3,Nathan Rajlich,2019-04-02 22:32:47+00:00,Leo Lamprecht,2019-04-05 13:32:44+00:00,"Update `pcre-to-regexp` to v0.0.5 (#2068)

For `now dev`, this fixes an edge case in named capture groups
in some `routes` definitions that would lead to an error being thrown:

```
Cannot read property '1' of null
```

Also ignoring ""handler"" routes for now."
cc22b4a0055049722117a1c97f2c209bd03da053,Nathan Rajlich,2019-04-01 22:55:02+00:00,Leo Lamprecht,2019-04-05 13:32:39+00:00,Update `@zeit/ncc` to v0.17.3 (#2058)
c372f1b66b45099acb5569eef28a20a142285b5a,Joe Haddad,2019-04-05 00:59:24+00:00,Joe Haddad,2019-04-05 00:59:24+00:00,15.0.2-canary.4
bd1aa229e3aee12085b12d8c5b7d766530b0e63c,Nathan Rajlich,2019-04-05 00:21:59+00:00,Leo Lamprecht,2019-04-05 00:21:59+00:00,"[now dev] Use a different `workPath` for every build (#2100)

This is more inline with how a fresh Now deployment works, where
is has to download fresh files each time. This will also fix the issue
with `@now/next` that deleted the `.next` output dir and deleting static
files upon subsequent builds.

This is still a bit unoptimized because `prepareCache()` from the
builder is not yet being invoked, but it's still more correct than
reusing the `workPath`."
1819c69de59b90fcd90c1d843b894ddbd86f557e,Leo Lamprecht,2019-04-05 00:19:55+00:00,Leo Lamprecht,2019-04-05 00:19:55+00:00,15.0.2-canary.3
f8cbe364be5a83b52323dc47df30b16573184975,William Li,2019-04-05 00:11:35+00:00,Leo Lamprecht,2019-04-05 00:11:35+00:00,Don't forget to do a `yarn install` before linking (#2094)
4fb043c46a6fd004ab1c1a526db9eb56fc30ba83,Nathan Rajlich,2019-04-05 00:11:08+00:00,Leo Lamprecht,2019-04-05 00:11:08+00:00,"Ignore `.env` and `.env.build` for deployments by default (#2083)

Because `now dev` uses these dotenv files to define the Now secrets to
use, it would be bad practice to include them in the deployment files
since they will be using development values instead of production values."
4995318418a8fbdba8bc82a8624599e75719e2c5,Nathan Rajlich,2019-04-04 22:05:18+00:00,GitHub,2019-04-04 22:05:18+00:00,"[now dev] Clean up `dev-router` a bit (#2099)

* [now dev] Clean up `dev-router` a bit

This is a follow up to #2095 to move the `resolveRouteParameters()`
funcrtion to the top-level and other slight optimizations like not
re-parsing the URL multiple times.

* Remove unused `qs` import"
6eaf6ecd14fdc648a1d914058ffff59685bdf4a5,Nathan Rajlich,2019-04-04 21:36:05+00:00,GitHub,2019-04-04 21:36:05+00:00,[now dev] Remove `now dev cache clean` (#2097)
822971fc7d703fb65dd48111f66f3f2418f1f952,William Li,2019-04-04 20:33:04+00:00,Nathan Rajlich,2019-04-04 20:33:04+00:00,"[now dev] Apply route params to `headers` (#2095)

* version bump (canary)

* inject paramters into headers.Location fixes #2092

* refactored route parameter resolving function

* Revert ""version bump (canary)""

This reverts commit 5857489ceffcbcce07eb6e5d6fcc20279d0ba5fd.

* Update src/commands/dev/lib/dev-router.ts

Co-Authored-By: williamli <email@williamli.dev>

* refactor headers resolution

* try to resolve all parameters inside each child of headers"
fb48402f876a648b6fe3663aef696cda10ef1fd2,Nathan Rajlich,2019-04-04 19:25:07+00:00,GitHub,2019-04-04 19:25:07+00:00,"[now dev] Set the same `MemorySize` on the lambdas as production (#2096)

This should fix https://spectrum.chat/zeit/now/now-dev-javascript-heap-out-of-memory~3fd6e823-59de-426b-ade0-af48d18f3494"
fd241c1e859e27f86155bab47962f4810c16d858,Nathan Rajlich,2019-04-04 19:14:42+00:00,GitHub,2019-04-04 19:14:42+00:00,"Remove 'output logs of a 1.0 deployment' integration test (#2085)

This test is very flaky causing us to constantly restart CircleCI jobs
in order to do releases of `now-cli`. Considering that it's testing the
1.0 pipeline, let's just remove this one to make life easier."
a3fc36e573fc848ce6ee54a5a8fb5235153c8222,Nathan Rajlich,2019-04-04 01:37:47+00:00,GitHub,2019-04-04 01:37:47+00:00,"[now dev] Fix the `requestPath` for the hard-refresh case (#2086)

This passes in the resolved `assetKey` instead of `req.url` to the
builder `requestPath` when a hard-refresh is requested, allowing the
proper single-page rebuild to happen."
402b4d34577eedbe95375a4a66a7b3d8c7f33f5f,Nathan Rajlich,2019-04-04 00:41:19+00:00,Nathan Rajlich,2019-04-04 00:41:19+00:00,15.0.2-canary.2
62625df203741759e1e9fa7251f32fb005eba4a0,Nathan Rajlich,2019-04-04 00:39:14+00:00,GitHub,2019-04-04 00:39:14+00:00,"[now dev] Fix subscription resolving logic (#2082)

* [now dev] Fix subscription resolving logic

Strip the leading `/` since the builder outputs don't have one, match
index routes, and pass the resulting subscription key to the builder.

* Fix `index` matching

* Update `@now/build-utils` to v0.4.39-canary.0

* Update `@now/build-utils` to v0.4.39"
658c220c8579dc2fc2ae265cd8485f90c402c7ab,Leo Lamprecht,2019-04-03 11:02:43+00:00,Leo Lamprecht,2019-04-03 11:02:43+00:00,15.0.2-canary.1
4190a6bfbc29d30bca3809c51677845dd653eade,Leo Lamprecht,2019-04-03 10:57:09+00:00,Leo Lamprecht,2019-04-03 10:57:09+00:00,"Revert ""[now dev] Less verbose ""listening"" message (#2062)""

This reverts commit a3f4c6290d1cf920511d9e20fb3b72cfa76d7ee4."
7aea928a5a695a5767ecfd3062503672f5c182cf,Nathan Rajlich,2019-04-03 10:55:11+00:00,Leo Lamprecht,2019-04-03 10:55:11+00:00,"[now dev] Respond with 404 once the server is shutting down (#2070)

In the case of a keep-alive connection from the web browser, and a page
continuing to send HTTP requests to the dev server, sometimes the server
never shuts down. So send a 404 response with `Connection: close` to
force the web browser to close the connection."
58d432651134dd16d7c4c0e9f33289f4d20fae0a,Nathan Rajlich,2019-04-03 10:53:35+00:00,Leo Lamprecht,2019-04-03 10:53:35+00:00,"[now dev] Add support for Builder ""subscriptions"" (#2071)

If the builder has a `subscribe()` function, then the initial
builds are not run and instead an array of ""subscriptions"" is
created. When an HTTP request comes in that matches one of the
subscription patterns, then this builder will be actually be
executed."
f7b782440aae3ae977d8b34a5fe8649961374a97,Nathan Rajlich,2019-04-03 01:53:06+00:00,GitHub,2019-04-03 01:53:06+00:00,"[now dev] Pass `meta` object to Builders' `build()` function (#2069)

This introduces a new object called `meta` that gets passed to the
Now Builders' `build()` function. The `isDev` property is moved to
this object, and a new property `requestPath` is also introduced.

`requestPath` represents the URL that was requested to trigger the
`build()` to be called. It may be used by builders to do incremental
compilation and only re-build the assets related to the URL that was
requested. For example, `@now/next` may use this property to only build
the page that was requested."
17422184e4f92b0b56ebaf0da22f70c418e9242e,Nathan Rajlich,2019-04-02 22:32:47+00:00,GitHub,2019-04-02 22:32:47+00:00,"Update `pcre-to-regexp` to v0.0.5 (#2068)

For `now dev`, this fixes an edge case in named capture groups
in some `routes` definitions that would lead to an error being thrown:

```
Cannot read property '1' of null
```

Also ignoring ""handler"" routes for now."
c765e7efbbe444e39842df537a55b26c40e184a1,Nathan Rajlich,2019-04-01 22:55:02+00:00,GitHub,2019-04-01 22:55:02+00:00,Update `@zeit/ncc` to v0.17.3 (#2058)
a3f4c6290d1cf920511d9e20fb3b72cfa76d7ee4,Nathan Rajlich,2019-04-01 21:57:21+00:00,GitHub,2019-04-01 21:57:21+00:00,"[now dev] Less verbose ""listening"" message (#2062)

* [now dev] Less verbose ""listening"" message

* Add ""Listening on""

* Use ""Running at"""
242be8da28d8d5681f2ebc968363008171f4ef45,Leo Lamprecht,2019-04-01 15:51:50+00:00,Leo Lamprecht,2019-04-01 15:51:50+00:00,15.0.1
67157c5a924953f67d594f61917c4032199c3390,Nathan Rajlich,2019-04-01 15:18:00+00:00,Leo Lamprecht,2019-04-01 15:42:12+00:00,"[now dev] Update bootup message (#2056)

This looks a bit cleaner since the user just typed `now dev` into their
CLI so no need to print the same command again."
f3764abd19fcdafb0f896db8dae7f53a17e0372d,Nathan Rajlich,2019-04-01 14:58:23+00:00,Leo Lamprecht,2019-04-01 15:42:09+00:00,Update `@now/build-utils` to v0.4.38 (#2055)
c0cd13abcd38e57be685735eb1237af154260daa,Leo Lamprecht,2019-04-01 15:41:08+00:00,Leo Lamprecht,2019-04-01 15:41:08+00:00,14.3.0-canary.27
6fab380cd95d09a1301e39a7838bb75ac351db99,Nathan Rajlich,2019-04-01 15:18:00+00:00,GitHub,2019-04-01 15:18:00+00:00,"[now dev] Update bootup message (#2056)

This looks a bit cleaner since the user just typed `now dev` into their
CLI so no need to print the same command again."
3732f8936235618a0716b8c70681112b032e093a,Nathan Rajlich,2019-04-01 14:58:23+00:00,Leo Lamprecht,2019-04-01 14:58:23+00:00,Update `@now/build-utils` to v0.4.38 (#2055)
5a49c41b20c0b990999ac93d57167fad6bf5ca97,Leo Lamprecht,2019-04-01 11:13:50+00:00,Leo Lamprecht,2019-04-01 11:13:50+00:00,15.0.0
810e27c08da9a7fbb20aa6e63a5ed77371ead133,Leo Lamprecht,2019-03-28 20:19:48+00:00,Leo Lamprecht,2019-04-01 11:03:45+00:00,"Adjusted aliasing error message to match server (#2030)

* Adjusted aliasing error message to match server

* Correctly escape"
37e3c6132ca8c9c4aa146581889c9b7a86b23497,Leo Lamprecht,2019-03-28 21:54:07+00:00,Leo Lamprecht,2019-04-01 11:03:30+00:00,"Made aliases clickable after assigning (#2035)

* Made aliases clickable after assigning

* Set in correct place

* Fixed URL

* Attached alias

* Added missing https"
4a6e5650272f7e8af7e54d3eca6ff204ec9b71b9,Andy,2019-03-29 21:59:27+00:00,Leo Lamprecht,2019-04-01 11:03:16+00:00,"Group builds with similar paths together to reduce the output (#2015)

* Group builds with similar paths together to reduce the output

* Style the new output

* Ensure space between state and time

* Update src/util/output/builds.js

Co-Authored-By: AndyBitz <AndyBitz@users.noreply.github.com>

* Add comma between ready states

* Tell what is hidden

* Change builds and items"
03f45f5d3e0e9688f4a40b41cc4c93d2c57de54b,Amio,2019-03-29 12:13:38+00:00,Leo Lamprecht,2019-04-01 11:03:11+00:00,"Refine test jobs (#2028)

- Include `.ts` extension
- Include all `test/*unit.js` (`test-unit` task)
- Make coverage reporting a separate job in circleci config"
0c5bae6f373fae5df25c6daf9906242bacc4b284,Nathan Rajlich,2019-04-01 06:54:12+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Add support for `.env` and `.env.build` file to define Now secrets (#2048)

* [now dev] Add support for `.env` file to define Now secrets

If a `now.json` files relies on secret env vars, then they must be
defined in the user's local `.env` file otherwise `now dev` exits with
an error.

* Prettier

* Fix multi-line error output

* Use `code()` to format the dotenv file name

* Add ""file"" to error message for clarity

* Use `hasOwnProperty()` instead of `in`

* Apply `build.env` vars during builder `build()` invocations

Fixes #2046."
f9f29485ada8b6e346a24e7ee1c8b42ee59bf1d4,Nathan Rajlich,2019-04-01 06:17:24+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,Update `@zeit/fun` to v0.6.0 (#2049)
9033bcddfe6fe247035d8ae03cb4760c6cd9eac6,Nathan Rajlich,2019-03-31 20:29:21+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Use cyan for link color

Blue is hard to read on terminals with a black background."
f1873c51d25eb232ff4dd83d467a15fd5b0ae1a5,Nathan Rajlich,2019-03-31 20:28:26+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Add build deduping (#2044)

Consider the scenario where an HTML asset is built and references other
files that were produced by the build (CSS/JS/img/etc. files). The build
will happen and then the HTML page will be served, and then the browser
will request the assets on the page also with the `no-cache` header,
which would cause a second build right after the first one completed,
which is bad DX and unnecessary.

This commit introduces ""build deduping logic"" so that this scenario is
avoided by doing two things:

1. Not allowing the same entrypoint to be built at the same time (so if
   a concurrent request happens for an asset that was produced by the same
   entrypoint, the subsequent requests will wait on the already running build
   instead of triggering a new one in parallel.

2. Not allowing an asset to be rebuilt if the previous build completed
   less than two seconds ago. This is to catch the scenario where the
   HTML page is served and the browser quickly requests the assets on
   the page to avoid triggering a second rebuild."
af3594e106ba32a511771ba4da93a9b06fe9f3af,Nathan Rajlich,2019-03-31 19:56:40+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Set the Now proxy and response headers (#2041)

* [now dev] Set the Now proxy and response headers

* Add `X-Real-IP` proxy header

* Set any headers defined in the matched `route` config

* Apply @amio's suggestions"
3e8a8ac79f9259c1d9243a5448eaae3acd89322d,Nathan Rajlich,2019-03-31 01:26:30+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Send `INTERNAL_LAMBDA_NOT_FOUND` (#2039)

This is mostly to appease TypeScript since `fn` is an optional prop,
but this shouldn't really ever happen since we run the builds before
responding to HTTP requests."
bc7153883dc2f118edafaa3eb90b5b61f1420f36,Nathan Rajlich,2019-03-31 01:25:22+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Use the `Output` helper (#2038)

* [now dev] Use the `Output` helper

For more consistent logging / styling with the other `now` commands.

* Put `setStatusError()` back"
92826db86bd4b6f1e1f8ed901861631f4e121bff,Nathan Rajlich,2019-03-29 01:01:56+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,[now dev] Send the `NO_STATUS_CODE_FROM_LAMBDA` upon lambda error (#2037)
9ea2216d4a52358fc1f91968dc4122898d7cf43b,Nathan Rajlich,2019-03-28 22:55:02+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Fix the `path` provided to lambda invocations (#2036)

This matches how the Now proxy invokes the lambdas, where the route
`dest` query params are mixed-in to the provided `req.url`, with the
dest query params taking precedence over any conflicting user-provided
query params."
df6eb070d8f05847acec064efa12c20177751d51,Nathan Rajlich,2019-03-28 21:22:53+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,Add `output` to DevServer class (#2034)
632d7b065105a60f5f694825dcc88f977aa72ecf,Nathan Rajlich,2019-03-28 20:53:58+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Listen on the next available port when requested port is taken (#2032)

Fixes #2024."
fd3c110c02145ef801f0a72f196b5cfead8c79ee,Nathan Rajlich,2019-03-28 01:37:43+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Use `pcre-to-regexp` to match `routes` (#2027)

* [now dev] Use `pcre-to-regexp` to match `routes`

The now.json `routes` support PCRE syntax like named captures,
so use the `pcre-to-regexp` module to match the routes.

Fixes #2023.

* Pass the resolved router `dest` and query params to the Lambda"
6c8dc902670649ff8a4f642755c502759cc8e77f,Nathan Rajlich,2019-03-28 00:29:11+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Centralize error responses logic (#2026)

This just DRYs up the code a bit and centralizes the error sending logic
so that we can more easily add the HTML and JSON versions of the
responses as well."
3f57d1381e29a0223e348b36b2f6b03b524ed8d8,Nathan Rajlich,2019-03-27 19:32:50+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"[now dev] Don't add `.gitignore` to the ignore list (#2025)

`.gitignore` is not respected anymore for Now v2, so this was a bug.

Also removes `ncc` and `user` from the ignore list, since that issue was
fixed a while back as well.

Fixes #2021."
02b3c5f53552ed4604bf226144fe3c362609b23c,Amio,2019-03-26 23:47:35+00:00,Leo Lamprecht,2019-04-01 11:01:57+00:00,"Add `now dev` (#1883)

* [WIP] now-dev

* try invoking lambda

* add error status to dev-server

* add basic routing

* add entry for custom @now/static builder

* honor .gitignore & .nowignore while collecting files

* add route for single static file

* add test fixtures for now-dev (nodejs)

* fix miss typed @now/statics

* import types from @now/build-utils

* fix typo @now/statics -> @now/static

* revamped router

* typescript-eslint-parser -> @typescript-eslint/parser

Eliminate error while running pre-commit hooks:

  SUPPORTED TYPESCRIPT VERSIONS: ~3.1.1
  YOUR TYPESCRIPT VERSION: 3.2.2

* send files from local @now/static builder

* use serve-handler when no now.json

* remove http-proxy

* add type def for serve-handler

* code cleanup

* move type declarations to types.ts

* dont rely on `this.cwd` while running builder

* more type definitions

* fix invoking error

* clean code

* better debug logging

* refined request handler logic

* handle /favicon.ico with serve-handler

* make builder-cache self contained

* move builder works to dev-builder.ts

* add proxy_pass handler

* support named groups in routes

* fix creating cache dir error

* add ""--nodejs-preview"" solely for nodejs

* clean require.cache after required user js

* fix router & header issue in nodejs preview

* [wip] add tests for dev-router

* add tests for dev-router

* lookup ""/index.*"" for indexes

* refine logging

* [WIP] `now dev` progress point

Actually invoking the `@zeit/fun` module at this point.

Still lots of work to be done

* Update `@zeit/fun` to v0.0.4

* Remove `--nodejs-preview`

To be replaced by `@zeit/fun`.

* Remove `decache` and `import-fresh`

Leftover from the `--nodejs-preview`.

* Remove ""declaration: true"" from `tsconfig.json`

Otherwise the ncc `dist` dir ends up full of generated `.d.ts` files.

* Remove `ignore` dep, always use `@zeit/dockerignore`

* Use tarball URL for `@zeit/fun`

Because `@zeit/fun` is not yet public on npm.

* Regenerate `yarn.lock` to fix bad integrity check on fun tarball

* Upgrade to `@zeit/fun` v0.0.6

With re-written unzipping logic utilizing `yauzl`.

* Add lambda function handling logic for the HTTP response

* Match the lambda invoke shape that Now's proxy provides

* Move deps to devDependencies

* Update `@zeit/fun` to v0.0.8

* Update `@zeit/ncc` to v0.15.0

* Attempt to fix unit test for `wait()` helper function

* Add `build.sh` script to work around ncc issues

* Fix `build.sh` script for BSD's chmod

No `--changes` flag.

* Update `@zeit/fun` to v0.0.11

* Update `@zeit/fun` to v0.0.12

* Tweak some comments

* Update `@zeit/fun` to v0.0.13

* Add `now.json` env vars to lambda functions

* Finish removing `--nodejs-preview` flag

* Style tweaks

* Use `npm-package-arg` to parse the ""use"" builder

* Styling

* Use the parsed `pathname` when matching routes

The querystring portion needs to be removed to match properly.

* Update `@zeit/fun` to v0.1.1

* Support `-d` for debug flag

It was already listed as such in the `--help` output.

* List the `dist/runtimes` dir as pkg ""assets""

* Update `@now/build-utils` to v0.4.37-canary.0

* Update `@zeit/fun` to v0.2.0

* Update `@zeit/fun` to v0.2.1

* Rewrite the `req.url` to fix serving FileFsRef assets

* Disable re-building, build all `builds` upon server bootup

* 404 is not a redirect

* warning on more than one argument

* Fix `index` without a file extension matching

* Update `@zeit/fun` to v0.2.2

* Use `async-listen`

* Add shutdown cleanup logic

* Rename `buildLambdas()` to `executeBuilds()`

* Rename `lambda` prop to `fn`

* Misc tweaks

* Pass `isDev: true` to the builder `build()` function

* Use `Object.assign()` instead of object spread

* Set `res.statusCode` instead of `writeHead()`

* Create Lambda functions during build-time

This way, the lambda instance is re-used for subsequent HTTP requests

* Wait for cleanup operations to complete in `stop()`

* Destructure `path` for join()

* Add some missing types

* Store the `buildConfig` on the assets for reverse lookup

* Remove `console.log()`

* Attempt to make globbing faster and ignore files more accurately

* Rewrite `installBuilders()` to be idempotent

So that npm is not executed for canary tags, for example.

This is done by comparing the contents of the package.json file rather
then the `node_modules` directory.

* Use `ignore` instead of `@zeit/dockerignore` for glob-gitignore

It seems that the object produced by `@zeit/dockerignore` is not
compatible with the `glob-gitignore` module, so use the vanilla
`ignore` module instead for now as a workaround.

* Implement a `GlobIgnore` class to replace `glob-gitignore`

This allows us to continue using `@zeit/dockerignore` for proper
consistency.

Closes #1899.

* Prettier

* Skip installing built-in builders (i.e. `@now/static`)

* Remove `console.error()` calls

* Use a deterministic `workPath` directory

So that the same one is re-used in-between subsequent boots of `now dev`

* Add `now.json` validation logic

* Fix serving static assets outside the project working directory

This fixes, for example, `@now/mdx-deck` which outputs static files
from its build process.

* Add comment

* Validate the `now.json` file before launching the dev server

* Respect `maxLambdaSize` config

Closes #1950.

* Add `@types/bytes` dependency

* Make `maxLambdaSize` be optional

Co-Authored-By: TooTallNate <n@n8.io>

* WIP force reload in browser = rebuild asset behavior

* Resolve the `asset` again after re-build

* Remove logging

* Update `@zeit/fun` to v0.3.0

* Update `@now/build-utils` to v0.4.37-canary.1

Sets `npm_config_target` to the proper Node.js version for native
modules.

* Update `@zeit/fun` to v0.3.1

* Fix ""hard refresh to reload"" after the first rebuild

The `buildConfig` and `buildEntry` proper were not being set on the
rebuilt assets, causing the rebuild to only work the first time.

Now fixed.

* Add logic for the `now dev cache clean` command (#1977)

* Added the cache-clean command

* censer code :)

* Fix non-route match `dest` param

This makes the `go-image-to-ascii` work, since the query param URL gets
properly routed to the `/` route.

* Add support for `FileBlob` outputs

Fixes `@now/optipng`, `@now/html-minifier` and `@now/md` builders.

* Remove `console.error()` call

* Add `now dev cache clean` command

* Use the `assetKey` to look up the Content-Type on FileBlobs

Instead of the `fsPath` of the entrypoint file.

This fixes `@now/md` to return `text/html` Content-Type instead of
`text/markdown` which does not render properly in the web browser.

* Update `@zeit/ncc` to v0.16.1

Co-Authored-By: TooTallNate <n@n8.io>

* Regenerate `yarn.lock` file

* Remove leading `/` on build `src` specifications

* Use `rsync` to copy over all of `fun`'s runtime files

* Update `@zeit/fun` to v0.5.0

* Update `@zeit/fun` to v0.5.1

* try/catch the lambda invoke and send 500 upon error

* Add `rsync` to CircleCI build

* Convert `errors.js` to TypeScript to fix compilation errors

* Also accept `Cache-Control: no-cache` for rebuilding

* Prettier

* Update `@now/build-utils` to v0.4.38-canary.1

* Update `@zeit/ncc` to v0.17.0 (#2017)

* Install `@zeit/fun` from npm

* Remove `console.error()` call

Co-Authored-By: TooTallNate <n@n8.io>

* Create `NowError` subclasses

* Add `LambdaSizeExceededError`

* Return early if there's no builds"
e25388066db990e2c2fa5875f0ddc6bdcd1d42b7,Nathan Rajlich,2019-04-01 06:56:49+00:00,Nathan Rajlich,2019-04-01 06:56:49+00:00,14.3.0-canary.26
a7f823609d9e780a4f80f382a6e67f912af28559,Nathan Rajlich,2019-04-01 06:54:12+00:00,GitHub,2019-04-01 06:54:12+00:00,"[now dev] Add support for `.env` and `.env.build` file to define Now secrets (#2048)

* [now dev] Add support for `.env` file to define Now secrets

If a `now.json` files relies on secret env vars, then they must be
defined in the user's local `.env` file otherwise `now dev` exits with
an error.

* Prettier

* Fix multi-line error output

* Use `code()` to format the dotenv file name

* Add ""file"" to error message for clarity

* Use `hasOwnProperty()` instead of `in`

* Apply `build.env` vars during builder `build()` invocations

Fixes #2046."
f9362a1e53b8bd6ec5a72a9c138ab21e5da33f6e,Nathan Rajlich,2019-04-01 06:17:24+00:00,GitHub,2019-04-01 06:17:24+00:00,Update `@zeit/fun` to v0.6.0 (#2049)
7a9d5e646f2af2344c1ffe3d9ae80dba488e0705,Nathan Rajlich,2019-03-31 20:38:05+00:00,Nathan Rajlich,2019-03-31 20:38:05+00:00,14.3.0-canary.25
1108daa8ed14d4850b227ab220541b0e7cb5068f,Nathan Rajlich,2019-03-31 20:29:21+00:00,Nathan Rajlich,2019-03-31 20:29:21+00:00,"[now dev] Use cyan for link color

Blue is hard to read on terminals with a black background."
d59de91fd6c40e4f7eada689e316a055b1eaaf03,Nathan Rajlich,2019-03-31 20:28:26+00:00,GitHub,2019-03-31 20:28:26+00:00,"[now dev] Add build deduping (#2044)

Consider the scenario where an HTML asset is built and references other
files that were produced by the build (CSS/JS/img/etc. files). The build
will happen and then the HTML page will be served, and then the browser
will request the assets on the page also with the `no-cache` header,
which would cause a second build right after the first one completed,
which is bad DX and unnecessary.

This commit introduces ""build deduping logic"" so that this scenario is
avoided by doing two things:

1. Not allowing the same entrypoint to be built at the same time (so if
   a concurrent request happens for an asset that was produced by the same
   entrypoint, the subsequent requests will wait on the already running build
   instead of triggering a new one in parallel.

2. Not allowing an asset to be rebuilt if the previous build completed
   less than two seconds ago. This is to catch the scenario where the
   HTML page is served and the browser quickly requests the assets on
   the page to avoid triggering a second rebuild."
0cfc31f4adbcb50b3c67a179b35b88156402680f,Nathan Rajlich,2019-03-31 19:56:40+00:00,GitHub,2019-03-31 19:56:40+00:00,"[now dev] Set the Now proxy and response headers (#2041)

* [now dev] Set the Now proxy and response headers

* Add `X-Real-IP` proxy header

* Set any headers defined in the matched `route` config

* Apply @amio's suggestions"
e1df47dedc6fbb25e9f6d1386c540fd10393f224,Nathan Rajlich,2019-03-31 01:26:30+00:00,GitHub,2019-03-31 01:26:30+00:00,"[now dev] Send `INTERNAL_LAMBDA_NOT_FOUND` (#2039)

This is mostly to appease TypeScript since `fn` is an optional prop,
but this shouldn't really ever happen since we run the builds before
responding to HTTP requests."
b6e4e0d670656fd674d3d9f5737dd6049f2fc290,Nathan Rajlich,2019-03-31 01:25:22+00:00,GitHub,2019-03-31 01:25:22+00:00,"[now dev] Use the `Output` helper (#2038)

* [now dev] Use the `Output` helper

For more consistent logging / styling with the other `now` commands.

* Put `setStatusError()` back"
5d0338a2783a9c963a0cbb59be41bd6b3e52df34,Andy Bitz,2019-03-29 22:01:31+00:00,Andy Bitz,2019-03-29 22:01:31+00:00,14.3.0-canary.24
57aad64c230ef003c4e899fc0249166aa6a6bd5c,Andy,2019-03-29 21:59:27+00:00,GitHub,2019-03-29 21:59:27+00:00,"Group builds with similar paths together to reduce the output (#2015)

* Group builds with similar paths together to reduce the output

* Style the new output

* Ensure space between state and time

* Update src/util/output/builds.js

Co-Authored-By: AndyBitz <AndyBitz@users.noreply.github.com>

* Add comma between ready states

* Tell what is hidden

* Change builds and items"
743db0d2650f09b2e8661a76bcde68ec81f0d4e3,Amio,2019-03-29 12:13:38+00:00,GitHub,2019-03-29 12:13:38+00:00,"Refine test jobs (#2028)

- Include `.ts` extension
- Include all `test/*unit.js` (`test-unit` task)
- Make coverage reporting a separate job in circleci config"
a96a3c6623eb806ab22b822d687879ae43a436cd,Nathan Rajlich,2019-03-29 02:02:49+00:00,Nathan Rajlich,2019-03-29 02:02:49+00:00,14.3.0-canary.23
60c17953c9e8994aa6ea0511e7660870dbb46e2a,Nathan Rajlich,2019-03-29 01:01:56+00:00,GitHub,2019-03-29 01:01:56+00:00,[now dev] Send the `NO_STATUS_CODE_FROM_LAMBDA` upon lambda error (#2037)
2068de722c5b9f76c846a1c5a31accd14659ec86,Nathan Rajlich,2019-03-28 22:55:02+00:00,GitHub,2019-03-28 22:55:02+00:00,"[now dev] Fix the `path` provided to lambda invocations (#2036)

This matches how the Now proxy invokes the lambdas, where the route
`dest` query params are mixed-in to the provided `req.url`, with the
dest query params taking precedence over any conflicting user-provided
query params."
33d86505e833e44150f2c81f79a6b9ced5261b10,Leo Lamprecht,2019-03-28 22:11:03+00:00,Leo Lamprecht,2019-03-28 22:11:03+00:00,14.3.0-canary.22
2a52d0406405855097dce48c1be3c789c939872a,Leo Lamprecht,2019-03-28 21:54:07+00:00,GitHub,2019-03-28 21:54:07+00:00,"Made aliases clickable after assigning (#2035)

* Made aliases clickable after assigning

* Set in correct place

* Fixed URL

* Attached alias

* Added missing https"
7911bc6aea0a5941f82312d314eee1a1fbaace03,Nathan Rajlich,2019-03-28 21:22:53+00:00,Leo Lamprecht,2019-03-28 21:22:53+00:00,Add `output` to DevServer class (#2034)
733d908c89fe97069071f13cf0701cbf68cf7668,Nathan Rajlich,2019-03-28 20:53:58+00:00,Leo Lamprecht,2019-03-28 20:53:58+00:00,"[now dev] Listen on the next available port when requested port is taken (#2032)

Fixes #2024."
798ea44c60cc1e688a4b717d28156de3fd5ddc0a,Leo Lamprecht,2019-03-28 20:19:48+00:00,GitHub,2019-03-28 20:19:48+00:00,"Adjusted aliasing error message to match server (#2030)

* Adjusted aliasing error message to match server

* Correctly escape"
4e11f7f0641cd6392d53951ccb4c6184644feb74,Julian Gruber,2019-03-28 13:38:21+00:00,Julian Gruber,2019-03-28 13:38:21+00:00,14.2.4
52d214f1ff04caa548d0df65e0b963d6a6290a64,Julian Gruber,2019-03-20 21:36:17+00:00,Julian Gruber,2019-03-28 13:34:39+00:00,"Fixed the handling of user errors (#1989)

* Fixed duplicate `--local-config` option
* Fixed uncaught `ERRORS.DomainPermissionDenied`
* Fixed uncaught `ERRORS.DeploymentNotFound`
* Added arguments parsing errors to Sentry scope
* Fixed stale stream in `cleanup()` of `promptOptions()`
* Fixed uncaught `USER_ABORT`
* Fixed uncaught `ENOENT`"
3a0b5c33cdda881768f57f30a3a256a809c5f7cd,Julian Gruber,2019-03-27 12:34:22+00:00,Julian Gruber,2019-03-28 13:30:12+00:00,"Fix the handling of unexpected user errors (#2022)

* fix unexpected `DNSConflictingRecord`

* fix unexpected `EBADF`

* fix unexpected `InvalidDeploymentId`

* fix unexpected `InvalidDomain`

* fix unexpected `DomainNotFound`"
809356afedb88de0e6d144a0153710452dcf40d5,Julian Gruber,2019-03-26 18:55:13+00:00,Julian Gruber,2019-03-28 13:30:02+00:00,"Fixed `GET /v3/now/certs` (#2005)

* Fixed `GET /v3/now/certs`

- Limit the response size to 20 because the endpoint doesn't have a default limit
- If the id in `/v3/now/certs/{id}` isn't a valid id the endpoint responds with a set or certs instead
- The route `/v3/now/certs/{idOrCn}` isn't supported any more

* removed limit of 20, the endpoint was updated"
1b01015a8ca62203d77929c35707473b1fe49ee1,Julian Gruber,2019-03-26 18:54:32+00:00,Julian Gruber,2019-03-28 13:29:56+00:00,"Fixed the handling of user errors in legacy deploy command (#2006)

* fix disconnected promise chain in legacy deploy
* fix `size_limit_exceeded` in legacy"
ef2d75394ae8d5252d1db95d120228e779a7bf3f,Julian Gruber,2019-03-26 18:53:32+00:00,Julian Gruber,2019-03-28 13:29:40+00:00,Fixed the handling of unexpected `DeploymentFailedAliasImpossible` (#2020)
c0c4a7f2544f921fb23475aa3826656fc89817e7,Joe Cohen,2019-03-26 09:25:04+00:00,Julian Gruber,2019-03-28 13:22:42+00:00,fix typo on domains inspect (#2016)
08d4a3759b6c01ef18478f7d84ae0938cef02a3f,Leo Lamprecht,2019-03-28 13:06:13+00:00,Leo Lamprecht,2019-03-28 13:06:13+00:00,14.3.0-canary.21
b29f602ce9a944c6f7217568d8a4a61a976ba2a7,Nathan Rajlich,2019-03-28 01:37:43+00:00,GitHub,2019-03-28 01:37:43+00:00,"[now dev] Use `pcre-to-regexp` to match `routes` (#2027)

* [now dev] Use `pcre-to-regexp` to match `routes`

The now.json `routes` support PCRE syntax like named captures,
so use the `pcre-to-regexp` module to match the routes.

Fixes #2023.

* Pass the resolved router `dest` and query params to the Lambda"
09c8144f31d82e83bed44824ab350c92b99dc30f,Nathan Rajlich,2019-03-28 00:29:11+00:00,GitHub,2019-03-28 00:29:11+00:00,"[now dev] Centralize error responses logic (#2026)

This just DRYs up the code a bit and centralizes the error sending logic
so that we can more easily add the HTML and JSON versions of the
responses as well."
b3bd8c592987e81ff16dde485f115a586a57e6dd,Nathan Rajlich,2019-03-27 19:32:50+00:00,GitHub,2019-03-27 19:32:50+00:00,"[now dev] Don't add `.gitignore` to the ignore list (#2025)

`.gitignore` is not respected anymore for Now v2, so this was a bug.

Also removes `ncc` and `user` from the ignore list, since that issue was
fixed a while back as well.

Fixes #2021."
99790b1560d1fc61ec89031da4c5bada1e519ba1,Julian Gruber,2019-03-27 12:58:24+00:00,Julian Gruber,2019-03-27 12:58:24+00:00,14.3.0-canary.19
31441e88907fd06799dcb43fb9480bd95ffb1e2e,Julian Gruber,2019-03-27 12:34:22+00:00,GitHub,2019-03-27 12:34:22+00:00,"Fix the handling of unexpected user errors (#2022)

* fix unexpected `DNSConflictingRecord`

* fix unexpected `EBADF`

* fix unexpected `InvalidDeploymentId`

* fix unexpected `InvalidDomain`

* fix unexpected `DomainNotFound`"
f693acbaa95fab89c1c9665b9a8f4df82ea78a11,Nathan Rajlich,2019-03-27 01:12:38+00:00,Nathan Rajlich,2019-03-27 01:12:38+00:00,14.3.0-canary.18
c1548a8cbbbf9fa8d2dd0722a437a7860f091757,Amio,2019-03-26 23:47:35+00:00,Nathan Rajlich,2019-03-26 23:47:35+00:00,"Add `now dev` (#1883)

* [WIP] now-dev

* try invoking lambda

* add error status to dev-server

* add basic routing

* add entry for custom @now/static builder

* honor .gitignore & .nowignore while collecting files

* add route for single static file

* add test fixtures for now-dev (nodejs)

* fix miss typed @now/statics

* import types from @now/build-utils

* fix typo @now/statics -> @now/static

* revamped router

* typescript-eslint-parser -> @typescript-eslint/parser

Eliminate error while running pre-commit hooks:

  SUPPORTED TYPESCRIPT VERSIONS: ~3.1.1
  YOUR TYPESCRIPT VERSION: 3.2.2

* send files from local @now/static builder

* use serve-handler when no now.json

* remove http-proxy

* add type def for serve-handler

* code cleanup

* move type declarations to types.ts

* dont rely on `this.cwd` while running builder

* more type definitions

* fix invoking error

* clean code

* better debug logging

* refined request handler logic

* handle /favicon.ico with serve-handler

* make builder-cache self contained

* move builder works to dev-builder.ts

* add proxy_pass handler

* support named groups in routes

* fix creating cache dir error

* add ""--nodejs-preview"" solely for nodejs

* clean require.cache after required user js

* fix router & header issue in nodejs preview

* [wip] add tests for dev-router

* add tests for dev-router

* lookup ""/index.*"" for indexes

* refine logging

* [WIP] `now dev` progress point

Actually invoking the `@zeit/fun` module at this point.

Still lots of work to be done

* Update `@zeit/fun` to v0.0.4

* Remove `--nodejs-preview`

To be replaced by `@zeit/fun`.

* Remove `decache` and `import-fresh`

Leftover from the `--nodejs-preview`.

* Remove ""declaration: true"" from `tsconfig.json`

Otherwise the ncc `dist` dir ends up full of generated `.d.ts` files.

* Remove `ignore` dep, always use `@zeit/dockerignore`

* Use tarball URL for `@zeit/fun`

Because `@zeit/fun` is not yet public on npm.

* Regenerate `yarn.lock` to fix bad integrity check on fun tarball

* Upgrade to `@zeit/fun` v0.0.6

With re-written unzipping logic utilizing `yauzl`.

* Add lambda function handling logic for the HTTP response

* Match the lambda invoke shape that Now's proxy provides

* Move deps to devDependencies

* Update `@zeit/fun` to v0.0.8

* Update `@zeit/ncc` to v0.15.0

* Attempt to fix unit test for `wait()` helper function

* Add `build.sh` script to work around ncc issues

* Fix `build.sh` script for BSD's chmod

No `--changes` flag.

* Update `@zeit/fun` to v0.0.11

* Update `@zeit/fun` to v0.0.12

* Tweak some comments

* Update `@zeit/fun` to v0.0.13

* Add `now.json` env vars to lambda functions

* Finish removing `--nodejs-preview` flag

* Style tweaks

* Use `npm-package-arg` to parse the ""use"" builder

* Styling

* Use the parsed `pathname` when matching routes

The querystring portion needs to be removed to match properly.

* Update `@zeit/fun` to v0.1.1

* Support `-d` for debug flag

It was already listed as such in the `--help` output.

* List the `dist/runtimes` dir as pkg ""assets""

* Update `@now/build-utils` to v0.4.37-canary.0

* Update `@zeit/fun` to v0.2.0

* Update `@zeit/fun` to v0.2.1

* Rewrite the `req.url` to fix serving FileFsRef assets

* Disable re-building, build all `builds` upon server bootup

* 404 is not a redirect

* warning on more than one argument

* Fix `index` without a file extension matching

* Update `@zeit/fun` to v0.2.2

* Use `async-listen`

* Add shutdown cleanup logic

* Rename `buildLambdas()` to `executeBuilds()`

* Rename `lambda` prop to `fn`

* Misc tweaks

* Pass `isDev: true` to the builder `build()` function

* Use `Object.assign()` instead of object spread

* Set `res.statusCode` instead of `writeHead()`

* Create Lambda functions during build-time

This way, the lambda instance is re-used for subsequent HTTP requests

* Wait for cleanup operations to complete in `stop()`

* Destructure `path` for join()

* Add some missing types

* Store the `buildConfig` on the assets for reverse lookup

* Remove `console.log()`

* Attempt to make globbing faster and ignore files more accurately

* Rewrite `installBuilders()` to be idempotent

So that npm is not executed for canary tags, for example.

This is done by comparing the contents of the package.json file rather
then the `node_modules` directory.

* Use `ignore` instead of `@zeit/dockerignore` for glob-gitignore

It seems that the object produced by `@zeit/dockerignore` is not
compatible with the `glob-gitignore` module, so use the vanilla
`ignore` module instead for now as a workaround.

* Implement a `GlobIgnore` class to replace `glob-gitignore`

This allows us to continue using `@zeit/dockerignore` for proper
consistency.

Closes #1899.

* Prettier

* Skip installing built-in builders (i.e. `@now/static`)

* Remove `console.error()` calls

* Use a deterministic `workPath` directory

So that the same one is re-used in-between subsequent boots of `now dev`

* Add `now.json` validation logic

* Fix serving static assets outside the project working directory

This fixes, for example, `@now/mdx-deck` which outputs static files
from its build process.

* Add comment

* Validate the `now.json` file before launching the dev server

* Respect `maxLambdaSize` config

Closes #1950.

* Add `@types/bytes` dependency

* Make `maxLambdaSize` be optional

Co-Authored-By: TooTallNate <n@n8.io>

* WIP force reload in browser = rebuild asset behavior

* Resolve the `asset` again after re-build

* Remove logging

* Update `@zeit/fun` to v0.3.0

* Update `@now/build-utils` to v0.4.37-canary.1

Sets `npm_config_target` to the proper Node.js version for native
modules.

* Update `@zeit/fun` to v0.3.1

* Fix ""hard refresh to reload"" after the first rebuild

The `buildConfig` and `buildEntry` proper were not being set on the
rebuilt assets, causing the rebuild to only work the first time.

Now fixed.

* Add logic for the `now dev cache clean` command (#1977)

* Added the cache-clean command

* censer code :)

* Fix non-route match `dest` param

This makes the `go-image-to-ascii` work, since the query param URL gets
properly routed to the `/` route.

* Add support for `FileBlob` outputs

Fixes `@now/optipng`, `@now/html-minifier` and `@now/md` builders.

* Remove `console.error()` call

* Add `now dev cache clean` command

* Use the `assetKey` to look up the Content-Type on FileBlobs

Instead of the `fsPath` of the entrypoint file.

This fixes `@now/md` to return `text/html` Content-Type instead of
`text/markdown` which does not render properly in the web browser.

* Update `@zeit/ncc` to v0.16.1

Co-Authored-By: TooTallNate <n@n8.io>

* Regenerate `yarn.lock` file

* Remove leading `/` on build `src` specifications

* Use `rsync` to copy over all of `fun`'s runtime files

* Update `@zeit/fun` to v0.5.0

* Update `@zeit/fun` to v0.5.1

* try/catch the lambda invoke and send 500 upon error

* Add `rsync` to CircleCI build

* Convert `errors.js` to TypeScript to fix compilation errors

* Also accept `Cache-Control: no-cache` for rebuilding

* Prettier

* Update `@now/build-utils` to v0.4.38-canary.1

* Update `@zeit/ncc` to v0.17.0 (#2017)

* Install `@zeit/fun` from npm

* Remove `console.error()` call

Co-Authored-By: TooTallNate <n@n8.io>

* Create `NowError` subclasses

* Add `LambdaSizeExceededError`

* Return early if there's no builds"
fc7a75cae2985b611b8807340c06dda8bd80ad47,Julian Gruber,2019-03-26 18:55:13+00:00,GitHub,2019-03-26 18:55:13+00:00,"Fixed `GET /v3/now/certs` (#2005)

* Fixed `GET /v3/now/certs`

- Limit the response size to 20 because the endpoint doesn't have a default limit
- If the id in `/v3/now/certs/{id}` isn't a valid id the endpoint responds with a set or certs instead
- The route `/v3/now/certs/{idOrCn}` isn't supported any more

* removed limit of 20, the endpoint was updated"
adced907c9388ad7a5ee2f4579848c6cec1911a5,Julian Gruber,2019-03-26 18:54:32+00:00,GitHub,2019-03-26 18:54:32+00:00,"Fixed the handling of user errors in legacy deploy command (#2006)

* fix disconnected promise chain in legacy deploy
* fix `size_limit_exceeded` in legacy"
49ae9d43ad1380538f4da28b12fb1359e2bb9466,Julian Gruber,2019-03-26 18:53:32+00:00,GitHub,2019-03-26 18:53:32+00:00,Fixed the handling of unexpected `DeploymentFailedAliasImpossible` (#2020)
b40ae12e6328117f28ff73c20fe604a6fc566cc4,Joe Cohen,2019-03-26 09:25:04+00:00,Javi Velasco,2019-03-26 09:25:04+00:00,fix typo on domains inspect (#2016)
121343e1dd2f268ec96424776e0490e369a8cb39,Leo Lamprecht,2019-03-22 01:02:53+00:00,Leo Lamprecht,2019-03-22 01:02:53+00:00,14.2.3
a4294cfe84cf50737a5d86fe12c180d4d4a728df,Leo Lamprecht,2019-03-22 00:39:58+00:00,Leo Lamprecht,2019-03-22 01:02:37+00:00,"Make deployments without builds work (#2004)

* Make deployments without builds work

* Added integration test

* Fixed test"
0ae9fa83428c0f67d16861fc7be96c09e76fa348,Leo Lamprecht,2019-03-22 00:40:24+00:00,Leo Lamprecht,2019-03-22 00:40:24+00:00,14.3.0-canary.17
833d0b293fc59eb5ba561c6606739da426e967c2,Leo Lamprecht,2019-03-22 00:39:58+00:00,GitHub,2019-03-22 00:39:58+00:00,"Make deployments without builds work (#2004)

* Make deployments without builds work

* Added integration test

* Fixed test"
c86e75088366654ea8dde1b75039dd4bad31b8ed,Leo Lamprecht,2019-03-21 03:01:24+00:00,Leo Lamprecht,2019-03-21 03:01:24+00:00,14.2.2
75dd7728113c954ee7296217cd4b5f128ebae1d8,Leo Lamprecht,2019-03-21 02:53:18+00:00,Leo Lamprecht,2019-03-21 03:01:16+00:00,Only block deployment exit if not error (#2000)
ea9a8706044a545174eb1aac64d9b4158f4a8dbc,Leo Lamprecht,2019-03-21 02:55:30+00:00,Leo Lamprecht,2019-03-21 02:55:30+00:00,14.3.0-canary.16
c7e5427200f591b49ba976079df90d66ac1f3000,Leo Lamprecht,2019-03-21 02:53:18+00:00,GitHub,2019-03-21 02:53:18+00:00,Only block deployment exit if not error (#2000)
f4849cd55e7b37b5d2fa995006853b0369d130c2,Leo Lamprecht,2019-03-21 01:30:42+00:00,Leo Lamprecht,2019-03-21 01:30:42+00:00,14.2.1
ce7d75d6b27b534a133218be6d23e77d18eeb537,Leo Lamprecht,2019-03-20 22:54:01+00:00,Leo Lamprecht,2019-03-20 23:52:14+00:00,Only announce deployment as ready if alias is set (#1997)
96ddda0009cdf6acdb292941e2d224fc1d1f4375,Leo Lamprecht,2019-03-20 22:54:26+00:00,Leo Lamprecht,2019-03-20 22:54:26+00:00,14.3.0-canary.15
635115f94b2acf44293048af79d52ab0aca522dc,Leo Lamprecht,2019-03-20 22:54:01+00:00,GitHub,2019-03-20 22:54:01+00:00,Only announce deployment as ready if alias is set (#1997)
9bb1d799d8f58d0d43a70bdcde261c52616ee103,Julian Gruber,2019-03-20 21:37:10+00:00,Julian Gruber,2019-03-20 21:37:10+00:00,14.3.0-canary.14
eabd15092c5a03a55641014372bc2c43a8bb08d0,Julian Gruber,2019-03-20 21:36:17+00:00,GitHub,2019-03-20 21:36:17+00:00,"Fixed the handling of user errors (#1989)

* Fixed duplicate `--local-config` option
* Fixed uncaught `ERRORS.DomainPermissionDenied`
* Fixed uncaught `ERRORS.DeploymentNotFound`
* Added arguments parsing errors to Sentry scope
* Fixed stale stream in `cleanup()` of `promptOptions()`
* Fixed uncaught `USER_ABORT`
* Fixed uncaught `ENOENT`"
720aee7250c59c04a2a315f59f184affb30e7be0,Leo Lamprecht,2019-03-19 12:17:42+00:00,Leo Lamprecht,2019-03-19 12:17:42+00:00,14.2.0
47ca5f3072ce8990a55120e63e998c4ed5a845ad,Leo Lamprecht,2019-03-19 09:27:44+00:00,Leo Lamprecht,2019-03-19 09:44:41+00:00,Made `-S` short flag work properly (#1988)
5e85389792cccda9f7aeef311e2c7d5dceaed914,Leo Lamprecht,2019-03-19 09:27:59+00:00,Leo Lamprecht,2019-03-19 09:27:59+00:00,14.3.0-canary.13
42eb69bb957a51f21031b53bd4f7d72f0ba52ffc,Leo Lamprecht,2019-03-19 09:27:44+00:00,GitHub,2019-03-19 09:27:44+00:00,Made `-S` short flag work properly (#1988)
0ce633a1eaefe7dcbc56e284e653a68f87f3d115,Julian Gruber,2019-03-18 17:36:57+00:00,Leo Lamprecht,2019-03-19 09:13:42+00:00,"Add always report stdarg to Sentry (#1982)

Before this change, only if `user` or `team` could be read from
the scope would stdarg be reported to Sentry, however it's
completely unrelated to the existence of the former and is always
useful debugging information."
93d0019153935f19d4725568414414515920dcf7,Julian Gruber,2019-03-18 17:15:45+00:00,Leo Lamprecht,2019-03-19 09:13:37+00:00,"Fix the handling of user errors (#1984)

* fix `ms(null)` in `certs rm`

* fix uncaught `InvalidDomain`"
f89417c06c07f9e7ffe56744f2d28157ebb4dc04,Julian Gruber,2019-03-18 17:08:38+00:00,Leo Lamprecht,2019-03-19 09:13:33+00:00,"Fix null pointer access in error reporting (#1983)

* fix null pointer access in error reporting

* refactor"
6344a08c91634ed5a55b1e6a2d8831b585a5e1d2,Amio,2019-03-17 15:14:44+00:00,Leo Lamprecht,2019-03-19 09:13:14+00:00,Add hint about `-f` in `now init` error message (#1971)
a981c711b66c3022aa9ab7913291552c826c92e8,Andy,2019-03-16 18:04:13+00:00,Leo Lamprecht,2019-03-19 09:13:08+00:00,Handle the `DomainNotVerified` error for deployments (#1973)
3b250af6d62139e4251436ec9c697b1f61c9dd66,Leo Lamprecht,2019-03-16 17:58:14+00:00,Leo Lamprecht,2019-03-19 09:13:04+00:00,"Warn of `now alias` was used (#1972)

* Warn of `now alias` was used

* Mention deploy command"
70de080be78b5e3a47e16b4d047295f9c7f7f46b,Leo Lamprecht,2019-03-15 22:58:32+00:00,Leo Lamprecht,2019-03-19 09:12:59+00:00,"Improved deployment output (#1968)

* Prefix all aliases that are printed

* Pass local config

* Print if --target production is defined, but not alias prop

* Moved warning message"
f629787d048622ca2f8a94e5f41c88e153d8c914,Julian Gruber,2019-03-15 21:17:33+00:00,Leo Lamprecht,2019-03-19 09:12:54+00:00,"Fix the handling of user errors (#1959)

* fix unexpected `size_limit_exceeded`

* fix unexpected `deployment_type_unsupported`

* fix unexpected `JSONError`

* check if err.sizeLimit exists"
e20ba6e7410349492a172dd6e6cd01e42df847a4,Julian Gruber,2019-03-15 17:54:49+00:00,Leo Lamprecht,2019-03-19 09:12:51+00:00,"Added back sending process args to Sentry (#1966)

* add `process.argv` to Sentry, without sensitive data

* refactor using `arg` parser

* add secret alias support"
00d30d2ddc7cff42fe22011191f1261d58c8b40a,Mark Glagola,2019-03-14 22:53:41+00:00,Leo Lamprecht,2019-03-19 09:12:47+00:00,adds prompt when moving domain to team user is not member of (#1965)
9921d282d350dc4c42156ea90dc71341209901b2,Leo Lamprecht,2019-03-14 19:39:32+00:00,Leo Lamprecht,2019-03-19 09:12:42+00:00,"Improved output for `deploy` command (#1962)

* Make alias links clickable

* Make output print Ready instead of Success

* Fixed missing export"
b70678a8a9239d136021e60eba5871c47391d27e,Leo Lamprecht,2019-03-12 19:35:18+00:00,Leo Lamprecht,2019-03-19 09:12:38+00:00,"Allow `--target` to be set to `staging` (#1955)

* Allow `--target` to be set to `staging`

* Properly format output

* Added clipboard support

* Send target to server

* Make target optional"
3fc9051268ac4e36727ea74745232280fb90518d,Andy,2019-02-27 18:33:27+00:00,Leo Lamprecht,2019-03-19 09:12:32+00:00,"Added support for the `--target` flag (#1893)

* Add support for the target flag

* Show the given alias at the end

* Use the proper naming for the alias properies and include arrays

* Use the correct output

* Make sure that aliasFinal has properties"
09c9ff5ecd16e14beed58613bb2ba9f2f14c11fd,Julian Gruber,2019-03-18 17:38:38+00:00,Julian Gruber,2019-03-18 17:38:38+00:00,14.3.0-canary.12
2678656f126f1b1864660dffb08e4fb536f1ee4e,Julian Gruber,2019-03-18 17:36:57+00:00,Leo Lamprecht,2019-03-18 17:36:57+00:00,"Add always report stdarg to Sentry (#1982)

Before this change, only if `user` or `team` could be read from
the scope would stdarg be reported to Sentry, however it's
completely unrelated to the existence of the former and is always
useful debugging information."
eb2a7b56b055f6168bacee8bf086b3ee40712897,Julian Gruber,2019-03-18 17:15:45+00:00,Leo Lamprecht,2019-03-18 17:15:45+00:00,"Fix the handling of user errors (#1984)

* fix `ms(null)` in `certs rm`

* fix uncaught `InvalidDomain`"
f33329d3966a76096ddac9d3d2ec1473e86a84ff,Julian Gruber,2019-03-18 17:08:38+00:00,Leo Lamprecht,2019-03-18 17:08:38+00:00,"Fix null pointer access in error reporting (#1983)

* fix null pointer access in error reporting

* refactor"
436c7fe0ad689cd506baf39bd90d8e83f118d385,Leo Lamprecht,2019-03-18 13:17:10+00:00,Leo Lamprecht,2019-03-18 13:17:10+00:00,14.1.1
7c837caef98c07b3f6cf43bda4ca6654f1df4950,Leo Lamprecht,2019-03-18 13:04:10+00:00,Leo Lamprecht,2019-03-18 13:16:59+00:00,Make `--scope` take priority over `scope` (#1985)
fbe751e3489d372f63d493fe452507d95a01f5ed,Leo Lamprecht,2019-03-18 13:10:01+00:00,Leo Lamprecht,2019-03-18 13:10:01+00:00,"Revert ""Added support for the `--target` flag (#1893)""

This reverts commit 2fea26772df1fecdb8658505d8e00b2de39574f9."
dc95b8584d166363a094fdb287c9ce7ab68f61d0,Leo Lamprecht,2019-03-18 13:10:00+00:00,Leo Lamprecht,2019-03-18 13:10:00+00:00,"Revert ""Allow `--target` to be set to `staging` (#1955)""

This reverts commit d8d51b712894c494cd6d1868db691e552165cbb7."
4e715bc408630b40f9a86964163a3a3e137a68de,Leo Lamprecht,2019-03-18 13:09:59+00:00,Leo Lamprecht,2019-03-18 13:09:59+00:00,"Revert ""Improved output for `deploy` command (#1962)""

This reverts commit 0e2d23f01c9bfd504a432521b21feb63ca118db3."
9093fcebcd66bc9cc5199b7cf03f55eb786c6442,Leo Lamprecht,2019-03-18 13:09:58+00:00,Leo Lamprecht,2019-03-18 13:09:58+00:00,"Revert ""adds prompt when moving domain to team user is not member of (#1965)""

This reverts commit 8d33b2c866025aa4d40f30bc2c8d2b4e3da4581a."
d6e1508ffcad95d4b36a25c369f72979bd9ef406,Leo Lamprecht,2019-03-18 13:09:57+00:00,Leo Lamprecht,2019-03-18 13:09:57+00:00,"Revert ""Added back sending process args to Sentry (#1966)""

This reverts commit 8ee47fbc900d66910722422213869de274c66cfa."
02b59926d56dde3879a06816778b83097be8adc2,Leo Lamprecht,2019-03-18 13:09:56+00:00,Leo Lamprecht,2019-03-18 13:09:56+00:00,"Revert ""Fix the handling of user errors (#1959)""

This reverts commit d059597a6355e6d21cc5e7b3f8006d873f0a2795."
a78770c11e63bafe75aba6ff41313533025f10c3,Leo Lamprecht,2019-03-18 13:09:54+00:00,Leo Lamprecht,2019-03-18 13:09:54+00:00,"Revert ""Improved deployment output (#1968)""

This reverts commit b0ab91d7940ab3d653158ac3d04250a2fe77b48d."
d3d72f0bb3295cdfa0ade5d25c00bd47bc0952a8,Leo Lamprecht,2019-03-18 13:09:53+00:00,Leo Lamprecht,2019-03-18 13:09:53+00:00,"Revert ""Warn of `now alias` was used (#1972)""

This reverts commit 473eae1c6519ea8fb68e089a7f4e80353b0453c6."
09aa8400ab450d4b1181275e4d43ff862f508e5d,Leo Lamprecht,2019-03-18 13:09:52+00:00,Leo Lamprecht,2019-03-18 13:09:52+00:00,"Revert ""Handle the `DomainNotVerified` error for deployments (#1973)""

This reverts commit ae2dfd41d2888de460b0cbacbaac1929d94e6dc6."
41cea25bb05f5a68f152bb342d9f1ea86e2498cf,Leo Lamprecht,2019-03-18 13:09:41+00:00,Leo Lamprecht,2019-03-18 13:09:41+00:00,"""Revert ""Add hint about `-f` in `now init` error message (#1971)""

This reverts commit 6f386e7ca27963641bb80ccf5c1d0eac0c2524ca."
7d7340bbfcf3249c28fcf8a6b42a8b71f2e7d852,Leo Lamprecht,2019-03-18 13:05:36+00:00,Leo Lamprecht,2019-03-18 13:05:36+00:00,14.3.0-canary.11
0bf2115701c5dde8dc36d6c2e6b878298feb0240,Leo Lamprecht,2019-03-18 13:04:10+00:00,GitHub,2019-03-18 13:04:10+00:00,Make `--scope` take priority over `scope` (#1985)
6f386e7ca27963641bb80ccf5c1d0eac0c2524ca,Amio,2019-03-17 15:14:44+00:00,Leo Lamprecht,2019-03-18 09:45:15+00:00,Add hint about `-f` in `now init` error message (#1971)
ae2dfd41d2888de460b0cbacbaac1929d94e6dc6,Andy,2019-03-16 18:04:13+00:00,Leo Lamprecht,2019-03-18 09:45:11+00:00,Handle the `DomainNotVerified` error for deployments (#1973)
473eae1c6519ea8fb68e089a7f4e80353b0453c6,Leo Lamprecht,2019-03-16 17:58:14+00:00,Leo Lamprecht,2019-03-18 09:45:05+00:00,"Warn of `now alias` was used (#1972)

* Warn of `now alias` was used

* Mention deploy command"
b0ab91d7940ab3d653158ac3d04250a2fe77b48d,Leo Lamprecht,2019-03-15 22:58:32+00:00,Leo Lamprecht,2019-03-18 09:45:00+00:00,"Improved deployment output (#1968)

* Prefix all aliases that are printed

* Pass local config

* Print if --target production is defined, but not alias prop

* Moved warning message"
d059597a6355e6d21cc5e7b3f8006d873f0a2795,Julian Gruber,2019-03-15 21:17:33+00:00,Leo Lamprecht,2019-03-18 09:44:48+00:00,"Fix the handling of user errors (#1959)

* fix unexpected `size_limit_exceeded`

* fix unexpected `deployment_type_unsupported`

* fix unexpected `JSONError`

* check if err.sizeLimit exists"
8ee47fbc900d66910722422213869de274c66cfa,Julian Gruber,2019-03-15 17:54:49+00:00,Leo Lamprecht,2019-03-18 09:44:42+00:00,"Added back sending process args to Sentry (#1966)

* add `process.argv` to Sentry, without sensitive data

* refactor using `arg` parser

* add secret alias support"
8d33b2c866025aa4d40f30bc2c8d2b4e3da4581a,Mark Glagola,2019-03-14 22:53:41+00:00,Leo Lamprecht,2019-03-18 09:44:36+00:00,adds prompt when moving domain to team user is not member of (#1965)
0e2d23f01c9bfd504a432521b21feb63ca118db3,Leo Lamprecht,2019-03-14 19:39:32+00:00,Leo Lamprecht,2019-03-18 09:44:08+00:00,"Improved output for `deploy` command (#1962)

* Make alias links clickable

* Make output print Ready instead of Success

* Fixed missing export"
d8d51b712894c494cd6d1868db691e552165cbb7,Leo Lamprecht,2019-03-12 19:35:18+00:00,Leo Lamprecht,2019-03-18 09:43:29+00:00,"Allow `--target` to be set to `staging` (#1955)

* Allow `--target` to be set to `staging`

* Properly format output

* Added clipboard support

* Send target to server

* Make target optional"
2fea26772df1fecdb8658505d8e00b2de39574f9,Andy,2019-02-27 18:33:27+00:00,Leo Lamprecht,2019-03-18 09:42:21+00:00,"Added support for the `--target` flag (#1893)

* Add support for the target flag

* Show the given alias at the end

* Use the proper naming for the alias properies and include arrays

* Use the correct output

* Make sure that aliasFinal has properties"
0357bfdbaa32c6ea593b6f6b6d00a30a7a07910d,Leo Lamprecht,2019-03-18 09:38:07+00:00,Leo Lamprecht,2019-03-18 09:38:07+00:00,14.3.0-canary.10
52a76299c5379323284c6e799450d8e9968990f5,Amio,2019-03-17 15:14:44+00:00,GitHub,2019-03-17 15:14:44+00:00,Add hint about `-f` in `now init` error message (#1971)
8de3151b8f6b812a7f16201b19038be63a2934ad,Leo Lamprecht,2019-03-16 18:04:31+00:00,Leo Lamprecht,2019-03-16 18:04:31+00:00,14.3.0-canary.9
2b3ceba353d23d0e398b5c3138e67b3ba52d8fad,Andy,2019-03-16 18:04:13+00:00,Leo Lamprecht,2019-03-16 18:04:13+00:00,Handle the `DomainNotVerified` error for deployments (#1973)
378274bc3fd2e2476624a9e32b17026235d03380,Leo Lamprecht,2019-03-16 17:58:14+00:00,GitHub,2019-03-16 17:58:14+00:00,"Warn of `now alias` was used (#1972)

* Warn of `now alias` was used

* Mention deploy command"
c3145b0801683e58f5ace227cfe1226a4ec71686,Leo Lamprecht,2019-03-15 23:05:31+00:00,Leo Lamprecht,2019-03-15 23:05:31+00:00,14.3.0-canary.8
5aca7dafecf48f63211f11d957b48d5fdc87d8a8,Leo Lamprecht,2019-03-15 22:58:32+00:00,GitHub,2019-03-15 22:58:32+00:00,"Improved deployment output (#1968)

* Prefix all aliases that are printed

* Pass local config

* Print if --target production is defined, but not alias prop

* Moved warning message"
803b1ae91b672b269dc87a248c6dd80320418f3c,Julian Gruber,2019-03-15 21:17:33+00:00,Leo Lamprecht,2019-03-15 21:17:33+00:00,"Fix the handling of user errors (#1959)

* fix unexpected `size_limit_exceeded`

* fix unexpected `deployment_type_unsupported`

* fix unexpected `JSONError`

* check if err.sizeLimit exists"
402c4e75a26dd7fce48e401cf4e0ce00a9387349,Julian Gruber,2019-03-15 17:54:49+00:00,GitHub,2019-03-15 17:54:49+00:00,"Added back sending process args to Sentry (#1966)

* add `process.argv` to Sentry, without sensitive data

* refactor using `arg` parser

* add secret alias support"
7a1859d1dd42104d61b4cd76c05b5acc0a7cfcec,Mark Glagola,2019-03-14 22:56:15+00:00,Mark Glagola,2019-03-14 22:56:15+00:00,14.3.0-canary.7
927117d5dbac7cec48dc675a0a07d9dcb799c694,Mark Glagola,2019-03-14 22:53:41+00:00,Leo Lamprecht,2019-03-14 22:53:41+00:00,adds prompt when moving domain to team user is not member of (#1965)
837f433b5c966dd06ad59a86c9a5ecbf47d03b21,Leo Lamprecht,2019-03-14 22:32:53+00:00,Leo Lamprecht,2019-03-14 22:32:53+00:00,"Revert ""Warning w/ prompt when moving to a destination the user is not a member of (#1961)""

This reverts commit 48451e3f81ba5b9e41708211f4f305c57a308f4d."
b5b18ffefe17e7e5f8338256680d85fe46b7be04,Leo Lamprecht,2019-03-14 19:45:59+00:00,Leo Lamprecht,2019-03-14 19:45:59+00:00,14.3.0-canary.6
48451e3f81ba5b9e41708211f4f305c57a308f4d,Mark Glagola,2019-03-14 19:39:51+00:00,Leo Lamprecht,2019-03-14 19:39:51+00:00,Warning w/ prompt when moving to a destination the user is not a member of (#1961)
ec9e334f9a6797d52b77af1acb5df969fac6b4b3,Leo Lamprecht,2019-03-14 19:39:32+00:00,GitHub,2019-03-14 19:39:32+00:00,"Improved output for `deploy` command (#1962)

* Make alias links clickable

* Make output print Ready instead of Success

* Fixed missing export"
d430953d1e5bc7f8119dee0206907baffda1c49c,Leo Lamprecht,2019-03-14 15:29:28+00:00,Leo Lamprecht,2019-03-14 15:29:28+00:00,14.1.0
f099496aba092bf776425f21849919fac25620c0,Leo Lamprecht,2019-03-13 21:21:25+00:00,Leo Lamprecht,2019-03-14 15:17:14+00:00,"Added warning message about files with no deployments (#1960)

* Added warning message about files with no deployments

* Added integration test

* Fixed charset of test"
78ac52c3b432014732905aa1c0a91ed3c4bd5dcb,Julian Gruber,2019-03-13 19:30:15+00:00,Leo Lamprecht,2019-03-14 15:17:10+00:00,Fixed the handling of user errors (#1958)
60ea982ed8c149a46a63ffd53fa4808f470132ab,Julian Gruber,2019-03-13 19:24:56+00:00,Leo Lamprecht,2019-03-14 15:17:04+00:00,Refactored flow error checks (#1953)
dc80b099bfbe4954d774352851c10730ecfa9def,Leo Lamprecht,2019-03-13 13:08:11+00:00,Leo Lamprecht,2019-03-14 15:16:58+00:00,"Soft-deprecate the `--team` flag (#1956)

* Soft-deprecate the `--team` flag

* Check for warning message

* Removed useless error"
f40e0a8ff9f2510336b35b605f92c5b86ea30cbc,Amio /,2019-03-13 02:45:49+00:00,Leo Lamprecht,2019-03-14 15:16:52+00:00,"Added a deploy hint after `now init`. (#1952)

* [now-init] add a deploy hint after init

* add CODEOWNERS"
9341136f16b4e574a5ffe248d29aa6649aa33e6f,Leo Lamprecht,2019-03-12 23:09:43+00:00,Leo Lamprecht,2019-03-14 15:16:45+00:00,"Added `--scope` flag and `scope` config property (#1939)

* Added basics for new --scope flag

* Fixed usage information

* Fixed integration test

* Fixed usage information about whoami

* Brought back missing whitespace

* Do not push scope property to API

* Ensure we're only reading local config in one place

* Fixed build

* Added test

* Made scope from config work

* Correctly handle error

* Handle Now errors too when loading local config

* Removed NowError

* Revert ""Removed NowError""

This reverts commit cfeebc65251d3eb07f9aeb3e548af1d23c00a18e.

* Fixed CI

* Fixed final bug

* Do not consider switch command

* Made it work as expected

* Added test

* Added yet another test for the scope property

* Added space"
d1261dd0a5ba623000bc7caa074350e78882c895,Mark Glagola,2019-03-12 19:14:07+00:00,Leo Lamprecht,2019-03-14 15:13:59+00:00,"Fallback to descriptive api error message if we cannot resolve domain rm|move conflict (#1951)

* On domain conflict error, use api error message & check resolvable flag

* Updated domain rm w/ attempt precaution

* smaller domain removal conflict construction"
7486b6fb6079aa771a6eccc881abea0169463582,Julian Gruber,2019-03-12 18:04:13+00:00,Leo Lamprecht,2019-03-14 15:13:53+00:00,"Fixed the handling of user errors

* fix unexpected `payment_error`

* fix unexpected `deployment_not_found`

* fix unexpected `not_authorized` and `team_deleted`

* make id optional in DeploymentNotFound"
6e3993ecf88517aa522b1bd200cc736b0cdc3495,Mark Glagola,2019-03-07 15:43:38+00:00,Leo Lamprecht,2019-03-14 15:13:46+00:00,"Adds alias removal warning on domains move (#1933)

* fixes double caret for domains move

* using output.success

* Adds alias removal warning to domains move"
81c5c15437d43ae044e478e77edfe459ef9d2295,Mark Glagola,2019-03-06 00:32:41+00:00,Leo Lamprecht,2019-03-14 15:13:39+00:00,"Revised domains move flow (#1928)

* Revised domains move flow (rm move-in & move-out for move)

* fixed integration tests for domains move api changes

* handle immediate domain moves

* fixed list scopes integration test

* more integration test fixes"
d66bf78e23aad104859fc5fa61a580e095cdc7a4,Mark Glagola,2019-02-27 23:24:22+00:00,Leo Lamprecht,2019-03-14 15:13:23+00:00,Added warning for domains-move token expiration (#1916)
48786382ec90ab58fb1405332c258ff737b6edc6,Mark Glagola,2019-02-27 21:46:35+00:00,Leo Lamprecht,2019-03-14 15:13:16+00:00,"Domain move-in & move-out implementation (#1906)

* Initial domain move-in & move-out implementation

* adjusted move apis

* domains move revisions based on API changes

* root domain func fix

* Minor copy fixes + added some integration test for move-in/out

* Handling move in|out conflict

* rm random quotes"
f646ddfc0fb5de2c1a3e19a924ee62bcb6ac2c06,Leo Lamprecht,2019-03-13 21:21:43+00:00,Leo Lamprecht,2019-03-13 21:21:43+00:00,14.3.0-canary.5
2102441cd05fcae57aa899b019601ec8c8a57549,Leo Lamprecht,2019-03-13 21:21:25+00:00,GitHub,2019-03-13 21:21:25+00:00,"Added warning message about files with no deployments (#1960)

* Added warning message about files with no deployments

* Added integration test

* Fixed charset of test"
95149c3fe48f0e4abf7e2c5f751abac63fbb0967,Julian Gruber,2019-03-13 19:36:48+00:00,Julian Gruber,2019-03-13 19:36:48+00:00,14.3.0-canary.4
0bfbd40810362d9bd867065bbfb183a9c3ed042e,Julian Gruber,2019-03-13 19:30:15+00:00,GitHub,2019-03-13 19:30:15+00:00,Fixed the handling of user errors (#1958)
b3a70e980eb29ccb091aa349bed44d7acfe99e57,Julian Gruber,2019-03-13 19:24:56+00:00,GitHub,2019-03-13 19:24:56+00:00,Refactored flow error checks (#1953)
952c369646343f1420412e4bef11cc2046e41dc0,Leo Lamprecht,2019-03-13 14:25:41+00:00,Leo Lamprecht,2019-03-13 14:25:41+00:00,14.3.0-canary.3
3effec0dd5353b187f511944211691072ae82850,Leo Lamprecht,2019-03-13 13:08:11+00:00,GitHub,2019-03-13 13:08:11+00:00,"Soft-deprecate the `--team` flag (#1956)

* Soft-deprecate the `--team` flag

* Check for warning message

* Removed useless error"
2d563e1694829fa599f53ff723516c32fd20784b,Amio /,2019-03-13 02:45:49+00:00,GitHub,2019-03-13 02:45:49+00:00,"Added a deploy hint after `now init`. (#1952)

* [now-init] add a deploy hint after init

* add CODEOWNERS"
e9ceac13b8fdd0d0b41bff8ab32852a0c147cec4,Leo Lamprecht,2019-03-12 23:09:58+00:00,Leo Lamprecht,2019-03-12 23:09:58+00:00,14.3.0-canary.2
06a0607287d5a0e29dff800c9c1fff58211094dd,Leo Lamprecht,2019-03-12 23:09:43+00:00,GitHub,2019-03-12 23:09:43+00:00,"Added `--scope` flag and `scope` config property (#1939)

* Added basics for new --scope flag

* Fixed usage information

* Fixed integration test

* Fixed usage information about whoami

* Brought back missing whitespace

* Do not push scope property to API

* Ensure we're only reading local config in one place

* Fixed build

* Added test

* Made scope from config work

* Correctly handle error

* Handle Now errors too when loading local config

* Removed NowError

* Revert ""Removed NowError""

This reverts commit cfeebc65251d3eb07f9aeb3e548af1d23c00a18e.

* Fixed CI

* Fixed final bug

* Do not consider switch command

* Made it work as expected

* Added test

* Added yet another test for the scope property

* Added space"
7e159646fb91f1d553cef609958aed14b36c1e94,Leo Lamprecht,2019-03-12 19:36:01+00:00,Leo Lamprecht,2019-03-12 19:36:01+00:00,14.3.0-canary.1
d2781430d3529a09d58f17c881f59dc161844272,Leo Lamprecht,2019-03-12 19:35:18+00:00,GitHub,2019-03-12 19:35:18+00:00,"Allow `--target` to be set to `staging` (#1955)

* Allow `--target` to be set to `staging`

* Properly format output

* Added clipboard support

* Send target to server

* Make target optional"
1bb8c80342d62d3b14df06de5ea664a945779222,Mark Glagola,2019-03-12 19:14:07+00:00,GitHub,2019-03-12 19:14:07+00:00,"Fallback to descriptive api error message if we cannot resolve domain rm|move conflict (#1951)

* On domain conflict error, use api error message & check resolvable flag

* Updated domain rm w/ attempt precaution

* smaller domain removal conflict construction"
01e83247ee17cee19ae81babd97803fa14ce3f11,Julian Gruber,2019-03-12 18:05:35+00:00,Julian Gruber,2019-03-12 18:05:35+00:00,14.1.0-canary.7
12653f97ad9a4e49cfbfb16c81b0f66852725453,Julian Gruber,2019-03-12 18:04:13+00:00,GitHub,2019-03-12 18:04:13+00:00,"Fixed the handling of user errors

* fix unexpected `payment_error`

* fix unexpected `deployment_not_found`

* fix unexpected `not_authorized` and `team_deleted`

* make id optional in DeploymentNotFound"
6bcb8651a0aca8f843bdbc750da1c0ae4a8b6dd4,Mark Glagola,2019-03-08 15:53:23+00:00,Mark Glagola,2019-03-08 15:53:23+00:00,14.1.0-canary.6
0071ca68be59c233cf20a371e7af9664a508ded1,Mark Glagola,2019-03-07 15:43:38+00:00,GitHub,2019-03-07 15:43:38+00:00,"Adds alias removal warning on domains move (#1933)

* fixes double caret for domains move

* using output.success

* Adds alias removal warning to domains move"
a89bbdfdf9adad22fcd4b1d85e85a3a79ee8fd27,Mark Glagola,2019-03-06 02:32:34+00:00,Mark Glagola,2019-03-06 02:32:34+00:00,14.1.0-canary.5
c7bd599e160419b33b4997a9006d66acb8b5428c,Mark Glagola,2019-03-06 00:32:41+00:00,GitHub,2019-03-06 00:32:41+00:00,"Revised domains move flow (#1928)

* Revised domains move flow (rm move-in & move-out for move)

* fixed integration tests for domains move api changes

* handle immediate domain moves

* fixed list scopes integration test

* more integration test fixes"
4440bb374107a151e2187e9b2dc78617df423280,Andy Bitz,2019-03-03 21:47:26+00:00,Andy Bitz,2019-03-03 21:47:26+00:00,14.0.3
ef7ead405c1ea09be057f2131c4b9f765c3cc32c,Andy,2019-03-03 15:48:18+00:00,Andy Bitz,2019-03-03 21:46:43+00:00,"Overwrite the default batch file on windows (#1922)

* Overwrite the default batch file on windows

* Suppress echoing of the command"
c66a5b580d0093535f3a31e92d82e8cf46bcf55e,Andy Bitz,2019-03-03 15:53:39+00:00,Andy Bitz,2019-03-03 15:53:39+00:00,14.1.0-canary.4
f145b6a7d2a424517e14c6c3fcd24f153ac3ff2e,Andy,2019-03-03 15:48:18+00:00,GitHub,2019-03-03 15:48:18+00:00,"Overwrite the default batch file on windows (#1922)

* Overwrite the default batch file on windows

* Suppress echoing of the command"
c61c90a22423d8842fd0f53576a07836352a083e,Leo Lamprecht,2019-03-01 12:05:25+00:00,Leo Lamprecht,2019-03-01 12:05:25+00:00,14.0.2
bb222b246639887925b0fddf92f79b31dff8f45e,Javi Velasco,2019-02-28 19:34:44+00:00,Leo Lamprecht,2019-03-01 12:04:11+00:00,"Add --no-scale option (#1918)

* Add no-scale option

* Reword --no-scale warning"
1a0cc26f690395222e5a68b6047cd4cc031f5c5b,Olli Vanhoja,2019-02-27 10:40:22+00:00,Leo Lamprecht,2019-03-01 12:03:54+00:00,"Set verify-deployment-scale timeout to 5 minutes (#1915)

The current client side timeout is shorter than the backend
timeout."
4337f0bab0d133485e2908af9367dc65c17fb450,Leo Lamprecht,2019-02-28 19:35:14+00:00,Leo Lamprecht,2019-02-28 19:35:14+00:00,14.1.0-canary.3
6b37797de9d34d34a28101b745930e3dbbd6ad51,Javi Velasco,2019-02-28 19:34:44+00:00,Leo Lamprecht,2019-02-28 19:34:44+00:00,"Add --no-scale option (#1918)

* Add no-scale option

* Reword --no-scale warning"
1843ac4d317b2e5191732f39492bea0d89680ecc,Mark Glagola,2019-02-27 23:24:22+00:00,GitHub,2019-02-27 23:24:22+00:00,Added warning for domains-move token expiration (#1916)
6399253318bd6a17b5312206ca8c39fb1326e22c,Mark Glagola,2019-02-27 21:47:38+00:00,Mark Glagola,2019-02-27 21:47:38+00:00,14.1.0-canary.2
f3638fb8718d53606da11c65bb12e5b46c5e0c1a,Mark Glagola,2019-02-27 21:46:35+00:00,GitHub,2019-02-27 21:46:35+00:00,"Domain move-in & move-out implementation (#1906)

* Initial domain move-in & move-out implementation

* adjusted move apis

* domains move revisions based on API changes

* root domain func fix

* Minor copy fixes + added some integration test for move-in/out

* Handling move in|out conflict

* rm random quotes"
dc88a310cb98a0ec53b8d2814f3b476c5bf49452,Andy Bitz,2019-02-27 18:36:23+00:00,Andy Bitz,2019-02-27 18:36:23+00:00,14.1.0-canary.1
aea9bd48825c2885dcd27c39e5d5921ac7b1cc83,Andy,2019-02-27 18:33:27+00:00,GitHub,2019-02-27 18:33:27+00:00,"Added support for the `--target` flag (#1893)

* Add support for the target flag

* Show the given alias at the end

* Use the proper naming for the alias properies and include arrays

* Use the correct output

* Make sure that aliasFinal has properties"
b69bb4346c35ab5f8a08260b7f87e9ae00363a51,Olli Vanhoja,2019-02-27 10:40:22+00:00,GitHub,2019-02-27 10:40:22+00:00,"Set verify-deployment-scale timeout to 5 minutes (#1915)

The current client side timeout is shorter than the backend
timeout."
f95cdb30a1221cdabb08faebd6a29930eba6aaf2,Leo Lamprecht,2019-02-26 08:21:58+00:00,Leo Lamprecht,2019-02-26 08:21:58+00:00,14.0.1
8308b2a4f3b7e0c34f6ad6e41d7adb64f04f4308,Leo Lamprecht,2019-02-25 20:33:22+00:00,Leo Lamprecht,2019-02-26 08:21:41+00:00,Prevent error in `now inspect` if no `dest` (#1913)
c89a19ab846c650e2c74bf452ce926b04ea6aafd,Mark Glagola,2019-02-25 19:59:43+00:00,Leo Lamprecht,2019-02-26 08:21:22+00:00,Using @types/psl typings + handling all potential error cases with psl (#1911)
8eaebdee4ef7c6835c56ba1465605e39b505adc7,Javi Velasco,2019-02-25 19:58:37+00:00,Leo Lamprecht,2019-02-26 08:20:56+00:00,Fix wrong error message (#1904)
9af6aa4ba316ba0d448862286dc7552abfd7c5ce,Leo Lamprecht,2019-02-25 20:42:49+00:00,Leo Lamprecht,2019-02-25 20:42:49+00:00,14.0.1-canary.1
dff27046628b95c51e20c6095b60cb7b8f83751c,Leo Lamprecht,2019-02-25 20:33:22+00:00,GitHub,2019-02-25 20:33:22+00:00,Prevent error in `now inspect` if no `dest` (#1913)
4849352b348d41bb2cb1aa09b6cd1f55daeb392d,Mark Glagola,2019-02-25 19:59:43+00:00,Leo Lamprecht,2019-02-25 19:59:43+00:00,Using @types/psl typings + handling all potential error cases with psl (#1911)
87700d9ab91e0fb5b24bbc18135b70287cc8bda8,Javi Velasco,2019-02-25 19:58:37+00:00,Leo Lamprecht,2019-02-25 19:58:37+00:00,Fix wrong error message (#1904)
07041e1b7b1551298fe5034fc4ac0151e6e7d826,Leo Lamprecht,2019-02-15 11:18:38+00:00,Leo Lamprecht,2019-02-15 11:18:38+00:00,14.0.0
f0c97a33d90db335f1f10efdb6788e282b883c50,Mark Glagola,2019-02-10 16:21:54+00:00,Leo Lamprecht,2019-02-14 10:30:59+00:00," Revised the way conflicts are handled when removing a domain (#1884)

* Revised the way conflicts are handled when rm domain

* agent.ts accepts absolute urls

* ""delete"" copy -> ""remove"" for consistency

* Revert ""agent.ts accepts absolute urls""

This reverts commit 200158d06fcb80417f197910c40e364f8ea5abb2.

* using proper set custom suffix endpoint

* Reuse InvalidDomain error"
424ad79c36b6c89994ce1273111406792ea43ef5,Sergii Paryzhskyi,2019-02-10 16:21:27+00:00,Leo Lamprecht,2019-02-14 10:29:57+00:00,Add a hint to an error message about missing token (#1877)
c51f902a0c6ee01afe3b8dac3af48eed715c86c3,Steve Kaliski,2019-02-10 16:20:30+00:00,Leo Lamprecht,2019-02-14 10:29:52+00:00,fix typo in alias command (#1870)
9a5d097f57c80d53a99c91d62efee18bbccbf841,Olli Vanhoja,2019-02-10 16:20:03+00:00,Leo Lamprecht,2019-02-14 10:29:48+00:00,"Handle dns add 400 errors properly (#1867)

Currently 400 errors are left unhandled."
3b9e5b91b18f2efa684025212df664e9cbd07fe9,Mark Glagola,2019-02-06 22:42:19+00:00,Leo Lamprecht,2019-02-14 10:29:43+00:00,Handle domain rm attempt for an in progress transfer (#1880)
19c74080b8a8ad7c8a86d993b64df99d0eb93bcf,Mark Glagola,2019-02-06 20:51:50+00:00,Leo Lamprecht,2019-02-14 10:29:40+00:00,Catch SourceNotFound error for domains transfer-in (#1879)
a5dd13912c299427888d057283e340f7e52b8b0c,Javi Velasco,2019-02-04 22:29:33+00:00,Leo Lamprecht,2019-02-14 10:29:36+00:00,Update inspect copy (#1875)
046fb8c38e25dd2d16ad49046af778a0cf194212,Mark Glagola,2019-02-04 22:29:17+00:00,Leo Lamprecht,2019-02-14 10:29:30+00:00,Added `import` help info to now-cli (`now dns -h`) (#1876)
16acc6c424e74d0534da9c3e124549251bbcaa3f,Leo Lamprecht,2019-02-01 23:10:31+00:00,Leo Lamprecht,2019-02-14 10:29:22+00:00,"Bumped `fetch-h2` to latest version (#1869)

* Bumped `fetch-h2` to latest version

* Fixed code"
9b74c2db3e2dc748bed970345b8fe51d8f219a85,Olli Vanhoja,2019-02-01 21:29:23+00:00,Leo Lamprecht,2019-02-14 10:29:17+00:00,Show builds rate limit message correctly (#1866)
c462c2775128da42def0d9afbbd3abb1f2ac3d40,Mark Glagola,2019-02-01 20:33:44+00:00,Leo Lamprecht,2019-02-14 10:29:11+00:00,Handle known `domains rm` errors (#1868)
ba33cd9106ad18ca19d479e24394fa5e6c9364e5,Mark Glagola,2019-02-01 12:32:10+00:00,Leo Lamprecht,2019-02-14 10:27:00+00:00,Added transferredAt and transferStartedAt (#1865)
e26f31babd6af9aad3d4359e6cba07d21505ed0d,Javi Velasco,2019-01-31 22:38:23+00:00,Leo Lamprecht,2019-02-14 10:26:56+00:00,"Remove cf cdn enabled flag (#1852)

* Remove CDN toggling

* Rename cdnEnabled to cfEnabled

* Rename cfEnabled to cloudfareEnabled

* Remove missing error"
618bcf236c022edfcbca885b840a84edae5f8c40,Andy,2019-01-31 12:37:09+00:00,Leo Lamprecht,2019-02-14 10:26:52+00:00,"Check if `deploymentId` exists (#1857)

* Check if deploymentId exists

* Make deploymentId optional for Alias"
1264b33b49fbc329f74bc5bc26afacff2cb7b475,Arunoda Susiripala,2019-01-31 12:18:42+00:00,Leo Lamprecht,2019-02-14 10:26:48+00:00,Check the existence of the project before we delete it (#1837)
101de40cc64a8a14385e1a791cd8f5f09ecf6d11,Leo Lamprecht,2019-01-31 11:54:45+00:00,Leo Lamprecht,2019-02-14 10:26:43+00:00,Render validation errors for Now 1.0 (#1862)
9e4dc9e0db84a41ed0bda2ffb3de77be8e4d1b68,Mark Glagola,2019-01-30 22:34:24+00:00,Leo Lamprecht,2019-02-14 10:26:39+00:00,Domain transfer in copy change (#1861)
d851a5b2d094d13a88f3c2b4c9a3a32f537c970e,Javi Velasco,2019-01-30 16:37:08+00:00,Leo Lamprecht,2019-02-14 10:26:34+00:00,Add import zonefile copy (#1860)
16fed01d72fcc77c2f12345ee87fb145aef1b02d,Javi Velasco,2019-01-30 15:21:56+00:00,Leo Lamprecht,2019-02-14 10:26:30+00:00,"Add ability to import a zone file (#1851)

* Add ability to import a zone file

* Use an arg instead of an option for the zone file"
3ad9b03066d564bd1ae7d27085edfd661549137e,Javi Velasco,2019-01-30 15:08:53+00:00,Leo Lamprecht,2019-02-14 10:26:24+00:00,Add missing error: InvalidAuthCode (#1859)
f794c9946296110a788886b58807f8a6484b16c9,Mark Glagola,2019-01-30 13:56:38+00:00,Leo Lamprecht,2019-02-14 10:26:19+00:00,"Add domain transfer in pricing (#1849)

* Display transfer renewal price for domain transfers

* Check domain transferable status immediately on transfer-in

* Transfer status endpoint change to .../registry

* spelling fix

* Enable transferable check

* Update dependencies"
9e79e06da918b9171a2e833fa93b18af8f30c466,George Tsiolis,2019-01-29 16:06:20+00:00,Leo Lamprecht,2019-02-14 10:26:12+00:00,Update legacy note structure (#1855)
45bf56671ab4ac144af98be2d1c18b158fcfd1d3,Mark Glagola,2019-01-22 23:31:51+00:00,Leo Lamprecht,2019-02-14 10:26:07+00:00,"""now domains transfer-in"" support (#1767)"
937fb75eb2e9bdeade1339f24d60b6838c3daccd,Andy,2019-01-21 18:59:40+00:00,Leo Lamprecht,2019-02-14 10:26:01+00:00,"Added default script that will run if now fails to install (#1832)

* Added default script that will run if now fails to install

* Don't overwrite the default now script before publishing

* Copy the default now binary on publish instead of keeping it inside the dist folder

* Removed download/dist/now

* Changed text"
c69c0fd9156aecdcf561ff7052b4c4ba80b0de06,Javi Velasco,2019-02-10 17:07:34+00:00,Javi Velasco,2019-02-10 17:07:34+00:00,13.2.0-canary.6
4c4d5c7baa50e65bf33b9417a43aea76110b4214,Mark Glagola,2019-02-10 16:21:54+00:00,Javi Velasco,2019-02-10 16:21:54+00:00," Revised the way conflicts are handled when removing a domain (#1884)

* Revised the way conflicts are handled when rm domain

* agent.ts accepts absolute urls

* ""delete"" copy -> ""remove"" for consistency

* Revert ""agent.ts accepts absolute urls""

This reverts commit 200158d06fcb80417f197910c40e364f8ea5abb2.

* using proper set custom suffix endpoint

* Reuse InvalidDomain error"
1e9d2cf9a0cfa05f246963a2efab83f02d5b07a2,Sergii Paryzhskyi,2019-02-10 16:21:27+00:00,Javi Velasco,2019-02-10 16:21:27+00:00,Add a hint to an error message about missing token (#1877)
5579aba6368a7a1fb23b22fa592874f265669b25,Steve Kaliski,2019-02-10 16:20:30+00:00,Javi Velasco,2019-02-10 16:20:30+00:00,fix typo in alias command (#1870)
c66ad6a60f0c6bc67e7a80ce38620e17cdd9f762,Olli Vanhoja,2019-02-10 16:20:03+00:00,Javi Velasco,2019-02-10 16:20:03+00:00,"Handle dns add 400 errors properly (#1867)

Currently 400 errors are left unhandled."
8e7f087a682434da10ed207d15fca0584b86b7a0,Mark Glagola,2019-02-06 22:42:19+00:00,Javi Velasco,2019-02-06 22:42:19+00:00,Handle domain rm attempt for an in progress transfer (#1880)
72142c32a1533d2f2fced99287519804d301d695,Mark Glagola,2019-02-06 20:51:50+00:00,Javi Velasco,2019-02-06 20:51:50+00:00,Catch SourceNotFound error for domains transfer-in (#1879)
5999ec7acd46b593a4f2bee61e4c1ec9c5387976,Javi Velasco,2019-02-04 22:29:33+00:00,GitHub,2019-02-04 22:29:33+00:00,Update inspect copy (#1875)
af401cdc9b0744784ec51bd038a129fd830f8b43,Mark Glagola,2019-02-04 22:29:17+00:00,Javi Velasco,2019-02-04 22:29:17+00:00,Added `import` help info to now-cli (`now dns -h`) (#1876)
5405828d4dc39197399c09ab235897de31626a40,Javi Velasco,2019-02-04 03:22:52+00:00,Javi Velasco,2019-02-04 03:22:52+00:00,13.1.3
5b16110d0b1b956cf1fc287984bf0bc69422c33d,Javi Velasco,2019-02-04 03:05:30+00:00,Javi Velasco,2019-02-04 03:20:57+00:00,"Enhance login (#1873)

* Enhance login

* Consume error from api"
f879e3ebdde240156464535f5b1c454d62141071,Javi Velasco,2019-02-04 03:07:49+00:00,Javi Velasco,2019-02-04 03:07:49+00:00,13.2.0-canary.5
a0b838c947b60143763404dcbe523a214de384ab,Javi Velasco,2019-02-04 03:05:30+00:00,Matheus Fernandes,2019-02-04 03:05:30+00:00,"Enhance login (#1873)

* Enhance login

* Consume error from api"
eb2fac75cdf7c77875e47ee3d4fd88c510332748,Leo Lamprecht,2019-02-01 23:11:00+00:00,Leo Lamprecht,2019-02-01 23:11:00+00:00,13.2.0-canary.4
f0b1e57dcb22689ef81ac366de9a609f63d01f1c,Leo Lamprecht,2019-02-01 23:10:31+00:00,GitHub,2019-02-01 23:10:31+00:00,"Bumped `fetch-h2` to latest version (#1869)

* Bumped `fetch-h2` to latest version

* Fixed code"
f8f12b0596d8b026ea2aa94cbcc1460462db9037,Olli Vanhoja,2019-02-01 21:29:23+00:00,Leo Lamprecht,2019-02-01 21:29:23+00:00,Show builds rate limit message correctly (#1866)
de25859329f92d5e617071c03ce6f61a36578e1f,Javi Velasco,2019-02-01 21:20:34+00:00,Javi Velasco,2019-02-01 21:20:34+00:00,13.2.0-canary.3
b4430de8debbd026b2964f980f505fd6b20153f6,Mark Glagola,2019-02-01 20:33:44+00:00,GitHub,2019-02-01 20:33:44+00:00,Handle known `domains rm` errors (#1868)
6d6c4aa4b83295d77fa9ff7fc8b8258dc61ed96b,Mark Glagola,2019-02-01 12:32:10+00:00,Leo Lamprecht,2019-02-01 12:32:10+00:00,Added transferredAt and transferStartedAt (#1865)
baadff146e8c25bb5b88a3f4d28a7443fe1551d9,Leo Lamprecht,2019-01-31 22:47:33+00:00,Leo Lamprecht,2019-01-31 22:47:33+00:00,13.2.0-canary.2
0b854908042d22249147ebfd733e614a3b1a3ca4,Javi Velasco,2019-01-31 22:38:23+00:00,GitHub,2019-01-31 22:38:23+00:00,"Remove cf cdn enabled flag (#1852)

* Remove CDN toggling

* Rename cdnEnabled to cfEnabled

* Rename cfEnabled to cloudfareEnabled

* Remove missing error"
8d256228a0f86c1465a7c296d13ac30f24a9f4b3,Andy,2019-01-31 12:37:09+00:00,Leo Lamprecht,2019-01-31 12:37:09+00:00,"Check if `deploymentId` exists (#1857)

* Check if deploymentId exists

* Make deploymentId optional for Alias"
5ad1af6d915c5126f2badb106350b0211f9e773f,Arunoda Susiripala,2019-01-31 12:18:42+00:00,Leo Lamprecht,2019-01-31 12:18:42+00:00,Check the existence of the project before we delete it (#1837)
38b3095b82604fc51405c884ea640042bd9ba573,Leo Lamprecht,2019-01-31 11:57:18+00:00,Leo Lamprecht,2019-01-31 11:57:18+00:00,13.2.0-canary.1
9289d0cd4312c71d866fa1c4f1ac6b94575674cb,Leo Lamprecht,2019-01-31 11:54:45+00:00,GitHub,2019-01-31 11:54:45+00:00,Render validation errors for Now 1.0 (#1862)
d834c0fc0a84ee68cf7b6b33487d2b6f2aa5d09e,Mark Glagola,2019-01-30 22:34:24+00:00,GitHub,2019-01-30 22:34:24+00:00,Domain transfer in copy change (#1861)
7a995c3801c450f6f4a6b30a27505d99f766d13b,Javi Velasco,2019-01-30 16:37:08+00:00,GitHub,2019-01-30 16:37:08+00:00,Add import zonefile copy (#1860)
2f41a2bc0980f465583649a572890fa2570e4d54,Javi Velasco,2019-01-30 15:21:56+00:00,GitHub,2019-01-30 15:21:56+00:00,"Add ability to import a zone file (#1851)

* Add ability to import a zone file

* Use an arg instead of an option for the zone file"
e1a80c30be061f6b7e70656260f65f7b72acc392,Javi Velasco,2019-01-30 15:08:53+00:00,GitHub,2019-01-30 15:08:53+00:00,Add missing error: InvalidAuthCode (#1859)
19994ccf60047f22dcf75f27008036ec7db7f5f8,Mark Glagola,2019-01-30 13:56:38+00:00,Javi Velasco,2019-01-30 13:56:38+00:00,"Add domain transfer in pricing (#1849)

* Display transfer renewal price for domain transfers

* Check domain transferable status immediately on transfer-in

* Transfer status endpoint change to .../registry

* spelling fix

* Enable transferable check

* Update dependencies"
1a59b0605faa6f9bf272fd5ba7e0bd0be1974b8e,George Tsiolis,2019-01-29 16:06:20+00:00,Leo Lamprecht,2019-01-29 16:06:20+00:00,Update legacy note structure (#1855)
1c9aeee9012d5a7c1fcefe8c525a1ad90616e789,Mark Glagola,2019-01-23 00:44:01+00:00,Mark Glagola,2019-01-23 00:44:01+00:00,13.1.2-canary.3
31bfaa05692fe1495e51a22fe162f8a34e1f380f,Mark Glagola,2019-01-22 23:31:51+00:00,GitHub,2019-01-22 23:31:51+00:00,"""now domains transfer-in"" support (#1767)"
b24182df5bf15bee8406016e39a1d1d21ebe5dca,Leo Lamprecht,2019-01-22 16:22:32+00:00,Leo Lamprecht,2019-01-22 16:22:32+00:00,13.1.2-canary.2
38923e1f912dbd3fa8123fffd95de7688f8d092a,Andy,2019-01-21 18:59:40+00:00,GitHub,2019-01-21 18:59:40+00:00,"Added default script that will run if now fails to install (#1832)

* Added default script that will run if now fails to install

* Don't overwrite the default now script before publishing

* Copy the default now binary on publish instead of keeping it inside the dist folder

* Removed download/dist/now

* Changed text"
258d7a3feb7e3ef0b47ea813fa6786543595c230,Leo Lamprecht,2019-01-17 12:23:48+00:00,Leo Lamprecht,2019-01-17 12:23:48+00:00,13.1.2
2dd5cd3f63aed38d109923a4401af574fd250aa2,Leo Lamprecht,2019-01-17 12:13:32+00:00,Leo Lamprecht,2019-01-17 12:16:12+00:00,"Ensure `name` in `package.json` works for Now 1.0 (#1835)

* Ensure `name` in `package.json` works for Now 1.0

* Fixed integration test"
aefee0fad2d979950a7adab12710e0ccb55b095b,Leo Lamprecht,2019-01-17 12:15:18+00:00,Leo Lamprecht,2019-01-17 12:15:18+00:00,13.1.2-canary.1
aa2f53f2d5e733baa3212f4e7828c66a875da015,Leo Lamprecht,2019-01-17 12:13:32+00:00,GitHub,2019-01-17 12:13:32+00:00,"Ensure `name` in `package.json` works for Now 1.0 (#1835)

* Ensure `name` in `package.json` works for Now 1.0

* Fixed integration test"
7e92912972d038472dedaf9cabe73af44777a314,Leo Lamprecht,2019-01-16 23:14:06+00:00,Leo Lamprecht,2019-01-16 23:14:06+00:00,13.1.1
bf2abe724f96d24fe75b9bba1a7fa14c7be7524c,Arunoda Susiripala,2019-01-16 22:56:16+00:00,Leo Lamprecht,2019-01-16 23:13:57+00:00,Fix formatting issues on project rm confirmation (#1834)
a0bce9b3c50f02fc3800386687ccc293b6684ba9,Leo Lamprecht,2019-01-16 22:59:45+00:00,Leo Lamprecht,2019-01-16 22:59:45+00:00,13.1.1-canary.1
8e5b7fdc19450c34d605df127334a1177b4dfc28,Arunoda Susiripala,2019-01-16 22:56:16+00:00,Leo Lamprecht,2019-01-16 22:56:16+00:00,Fix formatting issues on project rm confirmation (#1834)
5d6e1e621046f3867fbce27ba2b74d7a03c697d6,Leo Lamprecht,2019-01-16 22:01:50+00:00,Leo Lamprecht,2019-01-16 22:01:50+00:00,13.1.0
ba9cae2d56ba8324a3e614a701ea55832b0756cc,Leo Lamprecht,2019-01-16 18:41:03+00:00,Leo Lamprecht,2019-01-16 18:45:04+00:00,Ensure project name is always defined (#1833)
4b243346e81f46bd00fe4cc9f1146841438b321b,Max,2019-01-16 14:20:24+00:00,Leo Lamprecht,2019-01-16 18:44:56+00:00,"Support new invite format (#1831)

* Support new invite format

* Use null as initial userInfo value

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>

* Add missing semicolon

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>

* Add missing semicolon

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>"
a9fe32611f4ae59c860dcdbf8760def63b52337f,Arunoda Susiripala,2019-01-16 00:15:38+00:00,Leo Lamprecht,2019-01-16 18:44:46+00:00,"Get back the --name property (#1828)

* Get back the --name property
This also removes --project and consider --name as the project name

* Fix unit tests.

* Fix integration tests"
7d54ccc6680d6a305bc34f84656cca2493b74284,Arunoda Susiripala,2019-01-15 21:11:21+00:00,Leo Lamprecht,2019-01-16 18:44:31+00:00,"Added support for projects (#1719)

* Send project property to api-deployments.

* Allow to talk to local api-deployments temporarly.

* Introduce the getProjectName utility.

* Use getProjectName on both legacy and latest deploy commands.

* Add now projects ls support.

* Implement 'now project add' and 'now project rm'

* Show project id

* Add basic now ls support with projects.

* Add some cosmetics changes.

* Make the UI colorful.

* Set the name as project

* Notify the user about the project name

* Remove legacy list

* Make sure 'now projects xxx' possible

* Set the project name in the list header

* Remove unwanted package

* Use --project in tests

* Force --project instead of --name

* Force the use of project property inside now.json

* Update ncc to the latest

* Remove -w from ncc

* Deprecate --name and .name instead of throwing errors

* Use the built-in fetch client

* Fix tests

* Change the order of tests

* Reset integration tests

* Remove some debug logs"
946e5cb78c90b272e6726bd4bc1a86de13b9f70d,Javi Velasco,2019-01-15 10:18:51+00:00,Leo Lamprecht,2019-01-16 18:44:15+00:00,Move all dns commands and subcommands to typescript (#1825)
4ee63506f8a3907e073155fce24d8eff9538638b,Leo Lamprecht,2019-01-16 18:43:16+00:00,Leo Lamprecht,2019-01-16 18:43:16+00:00,13.1.0-canary.4
1a239f92f47b9cc79756f153d298689b3250a167,Leo Lamprecht,2019-01-16 18:41:03+00:00,Andy,2019-01-16 18:41:03+00:00,Ensure project name is always defined (#1833)
4f15b724ac902531e4b39be4be4222bec6d56608,Leo Lamprecht,2019-01-16 14:20:55+00:00,Leo Lamprecht,2019-01-16 14:20:55+00:00,13.1.0-canary.3
1c68a24a70d7f13871d0ba26185ee670fd13edd5,Max,2019-01-16 14:20:24+00:00,Leo Lamprecht,2019-01-16 14:20:24+00:00,"Support new invite format (#1831)

* Support new invite format

* Use null as initial userInfo value

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>

* Add missing semicolon

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>

* Add missing semicolon

Co-Authored-By: rdev <8418866+rdev@users.noreply.github.com>"
d863acbc65889aabccf1925b34cb698a7874d672,Leo Lamprecht,2019-01-16 10:51:37+00:00,Leo Lamprecht,2019-01-16 10:51:37+00:00,13.1.0-canary.2
c736f2ccb492888ddc443cf408a0bb82a4100d9d,Leo Lamprecht,2019-01-16 10:51:10+00:00,Leo Lamprecht,2019-01-16 10:51:10+00:00,"Revert ""Show deployment URL at the end too (#1827)""

This reverts commit 0f2c6770354b3b1f2ca1cb493d23af872bf52d06."
3942b885650ae2a6076894c608c9ea851b26f309,Arunoda Susiripala,2019-01-16 00:15:38+00:00,Guillermo Rauch,2019-01-16 00:15:38+00:00,"Get back the --name property (#1828)

* Get back the --name property
This also removes --project and consider --name as the project name

* Fix unit tests.

* Fix integration tests"
a5ac2aca108dd7976c9b1b4d1102a998acb6c127,Leo Lamprecht,2019-01-15 21:21:53+00:00,Leo Lamprecht,2019-01-15 21:21:53+00:00,13.1.0-canary.1
55ced7a3e5b4cda43fb92f136d5f6c514c1f983c,Arunoda Susiripala,2019-01-15 21:11:21+00:00,Leo Lamprecht,2019-01-15 21:11:21+00:00,"Added support for projects (#1719)

* Send project property to api-deployments.

* Allow to talk to local api-deployments temporarly.

* Introduce the getProjectName utility.

* Use getProjectName on both legacy and latest deploy commands.

* Add now projects ls support.

* Implement 'now project add' and 'now project rm'

* Show project id

* Add basic now ls support with projects.

* Add some cosmetics changes.

* Make the UI colorful.

* Set the name as project

* Notify the user about the project name

* Remove legacy list

* Make sure 'now projects xxx' possible

* Set the project name in the list header

* Remove unwanted package

* Use --project in tests

* Force --project instead of --name

* Force the use of project property inside now.json

* Update ncc to the latest

* Remove -w from ncc

* Deprecate --name and .name instead of throwing errors

* Use the built-in fetch client

* Fix tests

* Change the order of tests

* Reset integration tests

* Remove some debug logs"
0f2c6770354b3b1f2ca1cb493d23af872bf52d06,Leo Lamprecht,2019-01-15 19:31:07+00:00,GitHub,2019-01-15 19:31:07+00:00,Show deployment URL at the end too (#1827)
402b9e3daa0609d2946e758356215d4250386844,Leo Lamprecht,2019-01-15 16:03:55+00:00,Leo Lamprecht,2019-01-15 16:03:55+00:00,13.0.6
3c20c4b690a7325ddb94f36d7a4bee0a639ac50f,Leo Lamprecht,2019-01-15 15:49:52+00:00,Leo Lamprecht,2019-01-15 15:57:25+00:00,Allow user to abort `now init` (#1826)
7493f7d4857206953f615f8c6a37980ad437c3df,Leo Lamprecht,2019-01-15 15:49:52+00:00,GitHub,2019-01-15 15:49:52+00:00,Allow user to abort `now init` (#1826)
ccbe18b5202eae9f6e23e959d953c8c78c7dc3d6,Javi Velasco,2019-01-15 10:18:51+00:00,Leo Lamprecht,2019-01-15 10:18:51+00:00,Move all dns commands and subcommands to typescript (#1825)
3ee1cf1eee4635641b2dcd01a4992008a188bd38,Leo Lamprecht,2019-01-15 10:07:41+00:00,Leo Lamprecht,2019-01-15 10:07:41+00:00,13.0.5
d2931a540a1203ec8aa5218d53c3208ae5bdebb4,Leo Lamprecht,2019-01-14 20:53:13+00:00,Leo Lamprecht,2019-01-15 09:55:59+00:00,"Improved test suite (#1820)

* Bumped `@zeit/ncc` to latest

* Reverted lockfile

* Make linking build for dev

* Cover line 21 in util/config/local-path.js

* Heavily improved unit test coverage

* Fixed space

* Got to 90% coverage

* Removed useless code

* Made builds work

* Fixed a few lines

* Fully covered read-metadata.js

* Brought coverage to 95.38

* Removed code that was never executed

* Track everything

* Don't show badge for now"
9596a415bf929c87d479b52af979d60ae196eb77,Andy,2019-01-14 20:40:58+00:00,Leo Lamprecht,2019-01-15 09:55:54+00:00,"Add the command to sentry (#1824)

Add the current command to sentry as extra"
4e1ebfc541ecb29399a33f0a3ac2e144799bb690,Timothy,2019-01-12 00:05:26+00:00,Leo Lamprecht,2019-01-15 09:55:49+00:00,Fix config file message (#1821)
ca086e01c78fdd187616135603f70c4a399eec35,Amio /,2019-01-10 03:43:26+00:00,Leo Lamprecht,2019-01-15 09:55:44+00:00,"better did-you-mean (#1817)

ensure 'node' => 'nodejs' insteadof 'node-server'"
8bde0bc2047cfd5f5933857ea1c52012386e5453,Andy Bitz,2019-01-14 21:14:28+00:00,Andy Bitz,2019-01-14 21:14:28+00:00,13.0.4-canary.2
28df25e8047e22b4a02d054ed903bc0b32661fd7,Leo Lamprecht,2019-01-14 20:53:13+00:00,Andy,2019-01-14 20:53:13+00:00,"Improved test suite (#1820)

* Bumped `@zeit/ncc` to latest

* Reverted lockfile

* Make linking build for dev

* Cover line 21 in util/config/local-path.js

* Heavily improved unit test coverage

* Fixed space

* Got to 90% coverage

* Removed useless code

* Made builds work

* Fixed a few lines

* Fully covered read-metadata.js

* Brought coverage to 95.38

* Removed code that was never executed

* Track everything

* Don't show badge for now"
fa5cb50df9cd8ff7d3a3ab88a972904696ff83cd,Andy,2019-01-14 20:40:58+00:00,GitHub,2019-01-14 20:40:58+00:00,"Add the command to sentry (#1824)

Add the current command to sentry as extra"
b847e02ff8c8cfdc88a64f88a4a82247615cad72,Timothy,2019-01-12 00:05:26+00:00,Leo Lamprecht,2019-01-12 00:05:26+00:00,Fix config file message (#1821)
4dae0cd0d5335bc06371cf622dae7d9c89d170b1,Leo Lamprecht,2019-01-10 11:32:38+00:00,Leo Lamprecht,2019-01-10 11:32:38+00:00,13.0.4
4dfacb63a1ea455d3996076b47c849595b3519f5,Leo Lamprecht,2019-01-10 11:23:39+00:00,Leo Lamprecht,2019-01-10 11:26:56+00:00," Fixed `now logs` for 2.0 deployments (#1819)

* Fixed `now logs` for 2.0 deploymens

* Added log test for 2.0

* Make test work"
3e7411440b43dbcc6ed21f9d1918bdef407443f3,Leo Lamprecht,2019-01-10 11:24:25+00:00,Leo Lamprecht,2019-01-10 11:24:25+00:00,13.0.4-canary.1
52fa239ae1d2f64c021e5f3bf26ad6c2d74ac448,Leo Lamprecht,2019-01-10 11:23:39+00:00,GitHub,2019-01-10 11:23:39+00:00," Fixed `now logs` for 2.0 deployments (#1819)

* Fixed `now logs` for 2.0 deploymens

* Added log test for 2.0

* Make test work"
fdaed3fd8fa18237ad20fe98f7b0237996b39e1b,Amio /,2019-01-10 03:43:26+00:00,Guillermo Rauch,2019-01-10 03:43:26+00:00,"better did-you-mean (#1817)

ensure 'node' => 'nodejs' insteadof 'node-server'"
531a2dc12cfe59fc7a6dcb6328dfcdddf6f50a26,Leo Lamprecht,2019-01-09 22:13:13+00:00,Leo Lamprecht,2019-01-09 22:13:13+00:00,13.0.3
0e011570be2ab15b1161c56460b2455d52b96e3c,Leo Lamprecht,2019-01-09 22:01:00+00:00,Leo Lamprecht,2019-01-09 22:13:02+00:00,Do not render that status was inferred (#1816)
8a3235ce6f76b58139389b2c07a57361f0572a5a,Leo Lamprecht,2019-01-09 22:01:56+00:00,Leo Lamprecht,2019-01-09 22:01:56+00:00,13.0.3-canary.3
e054c17e31766282e3aaa233ccfeb0e49f9f3fa1,Leo Lamprecht,2019-01-09 22:01:00+00:00,GitHub,2019-01-09 22:01:00+00:00,Do not render that status was inferred (#1816)
e785d967bf5116b9ec0c69b2f9bb3687af52baf7,Leo Lamprecht,2019-01-09 14:35:47+00:00,Leo Lamprecht,2019-01-09 14:35:47+00:00,13.0.2
55004d4a6aec2190c32175fbcb6173a7aa4d976b,Leo Lamprecht,2019-01-09 14:29:15+00:00,Leo Lamprecht,2019-01-09 14:30:12+00:00,Made `now domains inspect` match `now inspect` (#1815)
c7b6b4fc3e3e70acf77d08dc3ca610c352c839c0,Leo Lamprecht,2019-01-09 14:29:32+00:00,Leo Lamprecht,2019-01-09 14:29:32+00:00,13.0.1-canary.3
4d60b96a758bb4453651cb6ed095deece4d83492,Leo Lamprecht,2019-01-09 14:29:15+00:00,GitHub,2019-01-09 14:29:15+00:00,Made `now domains inspect` match `now inspect` (#1815)
ac7ff6a4a75cede89c6b85f585f8d33276b1b78b,Leo Lamprecht,2019-01-09 12:00:15+00:00,Leo Lamprecht,2019-01-09 12:00:15+00:00,13.0.1
d768b93441bba9f26183848304a7a05a17d6db9f,Leo Lamprecht,2019-01-09 10:54:00+00:00,Leo Lamprecht,2019-01-09 10:55:43+00:00,Bumped `update-check` to latest version (#1814)
0f0b546fa64245fc5e06a66e83fa97d9dcf2e3cf,Leo Lamprecht,2019-01-09 10:54:39+00:00,Leo Lamprecht,2019-01-09 10:54:39+00:00,13.0.1-canary.2
ed454218b6cae8192da0043c6a7c349c3df07ca6,Leo Lamprecht,2019-01-09 10:54:00+00:00,Leo Lamprecht,2019-01-09 10:54:18+00:00,Bumped `update-check` to latest version (#1814)
b2345de9cc2975b10bbda0ef64fd67c92fc82c86,Leo Lamprecht,2019-01-09 10:29:22+00:00,Leo Lamprecht,2019-01-09 10:29:22+00:00,"Revert ""Bumped `update-check` to latest version (#1813)""

This reverts commit 5dc393f39789807ed26429bd9d7ba6d8753230f4."
5dc393f39789807ed26429bd9d7ba6d8753230f4,Leo Lamprecht,2019-01-09 10:06:56+00:00,GitHub,2019-01-09 10:06:56+00:00,Bumped `update-check` to latest version (#1813)
ecf0df8c6efeb33829444395960240e276b53106,Leo Lamprecht,2019-01-08 14:45:27+00:00,Leo Lamprecht,2019-01-08 20:35:04+00:00,"Fixed several errors (#1811)

* Fixed NOW-CLI-HB

* Fixed code"
ca654d938bd4f9d72e87890da8eedc4ebb6c6cc3,Leo Lamprecht,2019-01-08 20:24:59+00:00,Leo Lamprecht,2019-01-08 20:24:59+00:00,13.0.1-canary.1
0b0fb6bf1f3bda48c5091453dfc1bc17f3a46dca,Leo Lamprecht,2019-01-08 14:45:27+00:00,GitHub,2019-01-08 14:45:27+00:00,"Fixed several errors (#1811)

* Fixed NOW-CLI-HB

* Fixed code"
2da216d9ca5d26df3a1397100b4df826dcb5e1c7,Leo Lamprecht,2019-01-07 22:46:48+00:00,Leo Lamprecht,2019-01-07 23:00:43+00:00,"Fixed several errors and removed useless file (#1807)

* Fixed NOW-CLI-FK

* Fixed NOW-CLI-F0

* Fixed NOW-CLI-D2

* Fixed NOW-CLI-GK

* Do not render clipboard indicator if error occured

* Removed useless file

* Fixed NOW-CLI-GW

* Fixed NOW-CLI-H3"
9e512690ff73a448ec0276319899f61d1f665228,Timothy,2019-01-07 22:36:10+00:00,Leo Lamprecht,2019-01-07 23:00:40+00:00,Add domain verification error document (#1806)
ec25aae9eaf5b78f1009bed711bc43643bc89752,Leo Lamprecht,2019-01-07 19:08:10+00:00,Leo Lamprecht,2019-01-07 23:00:36+00:00,"Overhauled `now inspect` (#1804)

* Show routes in `now inspect`

* Removed whitespace

* Made UI gorgeous

* Use cyan for meta keys"
ce85bb0578afd9b8511c7ccc075c1de3ebe9fe83,Leo Lamprecht,2019-01-07 22:47:07+00:00,Leo Lamprecht,2019-01-07 22:47:07+00:00,13.0.0-canary.39
4c9538d51fa6a6cced3887f453098141d6b7742c,Leo Lamprecht,2019-01-07 22:46:48+00:00,GitHub,2019-01-07 22:46:48+00:00,"Fixed several errors and removed useless file (#1807)

* Fixed NOW-CLI-FK

* Fixed NOW-CLI-F0

* Fixed NOW-CLI-D2

* Fixed NOW-CLI-GK

* Do not render clipboard indicator if error occured

* Removed useless file

* Fixed NOW-CLI-GW

* Fixed NOW-CLI-H3"
dc5157a252ccd98abdb05569a608bd972a83e45a,Timothy,2019-01-07 22:36:10+00:00,Leo Lamprecht,2019-01-07 22:36:10+00:00,Add domain verification error document (#1806)
9cc6d7f4da4e69ecc522aad5715f8ee2986df97a,Leo Lamprecht,2019-01-07 19:08:10+00:00,GitHub,2019-01-07 19:08:10+00:00,"Overhauled `now inspect` (#1804)

* Show routes in `now inspect`

* Removed whitespace

* Made UI gorgeous

* Use cyan for meta keys"
4c96c2feeff5a095d47b03cb66d1c00b22bf3774,Leo Lamprecht,2019-01-05 07:50:55+00:00,Leo Lamprecht,2019-01-05 07:50:55+00:00,13.0.0
25eeafb6c35026a0e2efb21daadff94f0a411827,Amio /,2019-01-04 17:55:00+00:00,Leo Lamprecht,2019-01-04 21:16:25+00:00,"Add now-init (#1780)

* Add now-init

* fix ci error

* refactor: (now-init) js => ts, some improvements.

- now-init works like git-clone
  (create new directory / complain about overwritten / can be forced)

- Better guess user intention
  (use jaro-winkler algorithm with ""-"" awareness)

- Stricter on arguments

- Non-TTY frendly

* add now-init to main help message

* fix miss typed args in didYouMean

* clean console.log

* output a new-line after any response to promptBool

Fix the missing '\n' when promptBool get an negative input (""n""/""N""/Enter/Abort).

Before:

~/git  now init koa
> Did you mean nodejs-koa? [y|N] > No changes made.

After:

~/git  now init koa
> Did you mean nodejs-koa? [y|N]
> No changes made.

* refine now-init output messages

* prettier code format

* update tests for now-init

* put ""init"" before ""help"" in now-help message

* remove redundant semicolon"
da8801d236f9e4e3d3c082ce534fb586529e1aa3,Javi Velasco,2019-01-04 20:57:35+00:00,Leo Lamprecht,2019-01-04 21:16:23+00:00,Style fixes (#1796)
18b301e2a6720cd1a1c3ee8820993df92e5ccc1d,Leo Lamprecht,2019-01-04 21:04:30+00:00,Leo Lamprecht,2019-01-04 21:04:30+00:00,13.0.0-canary.38
35f52410d90366a13ad982945d6cce9378ae35fd,Javi Velasco,2019-01-04 20:57:35+00:00,Guillermo Rauch,2019-01-04 20:57:35+00:00,Style fixes (#1796)
cf55c056911ee1dd77e3b512dc8cfdb7de503f6d,Amio /,2019-01-04 17:55:00+00:00,Guillermo Rauch,2019-01-04 17:55:00+00:00,"Add now-init (#1780)

* Add now-init

* fix ci error

* refactor: (now-init) js => ts, some improvements.

- now-init works like git-clone
  (create new directory / complain about overwritten / can be forced)

- Better guess user intention
  (use jaro-winkler algorithm with ""-"" awareness)

- Stricter on arguments

- Non-TTY frendly

* add now-init to main help message

* fix miss typed args in didYouMean

* clean console.log

* output a new-line after any response to promptBool

Fix the missing '\n' when promptBool get an negative input (""n""/""N""/Enter/Abort).

Before:

~/git  now init koa
> Did you mean nodejs-koa? [y|N] > No changes made.

After:

~/git  now init koa
> Did you mean nodejs-koa? [y|N]
> No changes made.

* refine now-init output messages

* prettier code format

* update tests for now-init

* put ""init"" before ""help"" in now-help message

* remove redundant semicolon"
60da071e7da461e911cb83f041f3b713d937d92c,Javi Velasco,2019-01-04 11:47:21+00:00,Leo Lamprecht,2019-01-04 13:14:53+00:00,"Domains improvements (#1795)

* More flexible response error

* Consider async domain purchases

* Jumpline for domains ls

* Jumpline in domains verify

* Remove not needed body performing verification

* Add orderedAt to domains inspect"
80fe47ef7976eec02054578fc556f165b65a783d,Leo Lamprecht,2019-01-03 19:06:57+00:00,Leo Lamprecht,2019-01-04 13:14:49+00:00,"Only run prettier for JS/TS files (#1791)

* Only pass modified js files

* Look for TS too"
c0e4ed05bf3b06840218dd83a64c85e11acf9589,Leo Lamprecht,2019-01-01 18:06:32+00:00,Leo Lamprecht,2019-01-04 13:14:44+00:00,Improved performance when creating deployment (#1787)
a3000966207663c4475fbd241278d9a7d57df568,Leo Lamprecht,2019-01-01 13:40:49+00:00,Leo Lamprecht,2019-01-04 13:14:38+00:00,Moved docs about publishing a release to Wiki (#1786)
c3281a6cbc0c35f392f9794ef22d71046e6a3654,Olli Vanhoja,2018-12-27 11:46:37+00:00,Leo Lamprecht,2019-01-04 13:14:32+00:00,"Fix now dns ls misalignment when a domain is not found (#1777)

If a domain is not found the DNS record arrays are aligned
incorrectly and finally some records are shown under wrong domains.
It happens because the length of the domains array differs from the
length of array of record arrays."
fcf3f637966f43d792ea5aa14f573cb7f80f714c,Javi Velasco,2018-12-19 15:30:26+00:00,Leo Lamprecht,2019-01-04 13:14:27+00:00,Remove extra request when adding a domain (#1762)
a86c1d980b10b01fa2a800caab8021cdf9108746,Javi Velasco,2018-12-19 00:18:59+00:00,Leo Lamprecht,2019-01-04 13:14:22+00:00,"Do not use certs and aliases in `now domains rm` (#1761)

* Update types to the new API contract

* Do not use aliases and certs from domain fetch

* Add a dash per row in ns table"
4f1e6c4a6f3985226feca4cac193a2a27abf9f29,Leo Lamprecht,2018-12-18 22:50:38+00:00,Leo Lamprecht,2019-01-04 13:14:17+00:00,Wait for unhandled rejections to be reported before exiting (#1760)
d0ffac21d3b22ef12861de93b692f9ed6bbe868a,Javi Velasco,2018-12-17 23:40:22+00:00,Leo Lamprecht,2019-01-04 13:14:12+00:00,Fix issue when we define aliases in now.json array (#1757)
721639ae6be5a2a1f20a2908cb9f9f346bc7db68,Javi Velasco,2018-12-17 19:15:35+00:00,Leo Lamprecht,2019-01-04 13:14:05+00:00,"Domains enhancements (#1755)

* Show a dash where there are no nameservers

* Show actual serviceType in domains

* Format ns table with ticks

* More enhancements"
0ade88209d4161c46d3dcbf36b441a78350669e6,Leo Lamprecht,2018-12-16 16:31:08+00:00,Leo Lamprecht,2019-01-04 13:14:00+00:00,"Render better error when source missing (#1754)

* Render better error when source missing

* Added integration test

* Fixed missing"
553f299299921d1d9fb7863935de508661157677,Leo Lamprecht,2018-12-13 15:28:21+00:00,Leo Lamprecht,2019-01-04 13:13:55+00:00," Ran prettier over the entire codebase (#1749)

* Use correct parser

* Ran prettier over the entire codebase"
07dd59b01725dcfe1db8817270b9306c5e2f7ba2,Javi Velasco,2018-12-13 14:27:21+00:00,Leo Lamprecht,2019-01-04 13:13:50+00:00,"Fix list DNS issue and migrate certs issue to Typescript (#1747)

* Migrate getDomainDNSRecords to Typescript

* Migrate getDNSRecords to Typescript and fix it

* Migrate cert functions to Typescript and fix issues

* Migrate certs issue to Typescript

* Minor fixes"
869a48f392a980084d3bf43efee8c88ec52d3e74,Leo Lamprecht,2018-12-13 14:13:55+00:00,Leo Lamprecht,2019-01-04 13:13:45+00:00,"Use our own `@zeit/git-hooks` package (#1748)

* Removed legacy dependencies

* Added @zeit/git-hooks

* Added scripts to run before commit

* Format only the modified files

* Revert ""Format only the modified files""

This reverts commit 9f4a58d2b978fa286eb7fcf38186bd9d53a2cda1.

* Revert ""Added scripts to run before commit""

This reverts commit 07636d945374e404161ad281feed4180801b3509.

* Revert ""Added @zeit/git-hooks""

This reverts commit 3f44f401f36fa6965d36ef28b81907c137c08abc.

* Revert ""Removed legacy dependencies""

This reverts commit bb02465c59d75bf6b32bd449a04832cf4e2f4bf4.

* Fixed setup

* Print important test parts

* Logged kind

* Added more logs

* No need to remove deployments, we will prune"
5ffa933b7fa9a44fdb49d97de7d1196dc1216365,Javi Velasco,2018-12-12 22:33:46+00:00,Leo Lamprecht,2019-01-04 13:13:37+00:00,"New domains API + Typescript migrations (#1728)

New domains API + Typescript migrations"
e14681e6c483ee36bf44af7c18d7215cc19c1182,Leo Lamprecht,2019-01-04 13:13:23+00:00,Leo Lamprecht,2019-01-04 13:13:23+00:00,"Revert ""Use single call on aliases and certs on domain rm (#1763)""

This reverts commit 4f549a1fa5a2553c8c090c33cf272cd8bb30c9c2."
48f790c60fae812d9845d3fa7554e257664e8a1b,Leo Lamprecht,2019-01-04 13:12:37+00:00,Leo Lamprecht,2019-01-04 13:12:37+00:00,"Revert ""Stop using domains v4 in stable (#1764)""

This reverts commit 61bd0b703826cbada6275bd097a6866d42498129."
be9360fbf35ca90f6e0029ee1892c3605170d83e,Leo Lamprecht,2019-01-04 11:47:35+00:00,Leo Lamprecht,2019-01-04 11:47:35+00:00,13.0.0-canary.37
3fc07738cb83e7f80dcff5fc5ba8adb2670a1df1,Javi Velasco,2019-01-04 11:47:21+00:00,Leo Lamprecht,2019-01-04 11:47:21+00:00,"Domains improvements (#1795)

* More flexible response error

* Consider async domain purchases

* Jumpline for domains ls

* Jumpline in domains verify

* Remove not needed body performing verification

* Add orderedAt to domains inspect"
299452eb8d410ab139065455237e64225110d43b,Leo Lamprecht,2019-01-03 19:06:57+00:00,GitHub,2019-01-03 19:06:57+00:00,"Only run prettier for JS/TS files (#1791)

* Only pass modified js files

* Look for TS too"
655bce7795b227adc2a827e03ac0c07954274d03,Leo Lamprecht,2019-01-01 18:07:40+00:00,Leo Lamprecht,2019-01-01 18:07:40+00:00,13.0.0-canary.36
0289b38e4e9b8597889697300e34f03903c3bab5,Leo Lamprecht,2019-01-01 18:06:32+00:00,Leo Lamprecht,2019-01-01 18:07:00+00:00,Improved performance when creating deployment (#1787)
bceb401d1918c40f9eb9c27057376f4adf31f20e,Leo Lamprecht,2019-01-01 13:41:01+00:00,Leo Lamprecht,2019-01-01 13:41:01+00:00,13.0.0-canary.35
cef74ff787c414bd750c16cd62ebab26afd59ebf,Leo Lamprecht,2019-01-01 13:40:49+00:00,GitHub,2019-01-01 13:40:49+00:00,Moved docs about publishing a release to Wiki (#1786)
de3b1c896f41ba885f180362d32e322a409645c6,Leo Lamprecht,2019-01-01 12:13:54+00:00,Leo Lamprecht,2019-01-01 12:13:54+00:00,13.0.0-canary.34
c94bbbc3d30afd8f1d2668bb064a6cb1900f2e3d,Olli Vanhoja,2018-12-27 11:46:37+00:00,GitHub,2018-12-27 11:46:37+00:00,"Fix now dns ls misalignment when a domain is not found (#1777)

If a domain is not found the DNS record arrays are aligned
incorrectly and finally some records are shown under wrong domains.
It happens because the length of the domains array differs from the
length of array of record arrays."
877737d8724187b05ac32622bed90880f3368242,Javi Velasco,2018-12-19 16:33:43+00:00,Javi Velasco,2018-12-19 16:33:43+00:00,13.0.0-canary.33
2c47baeed400c12efe0799b170b72e99f35b1560,Javi Velasco,2018-12-19 15:30:26+00:00,GitHub,2018-12-19 15:30:26+00:00,Remove extra request when adding a domain (#1762)
df01e07f66c46eaae6821f60486786a93864ac6f,Javi Velasco,2018-12-19 13:53:06+00:00,Javi Velasco,2018-12-19 13:53:06+00:00,12.1.14
61bd0b703826cbada6275bd097a6866d42498129,Javi Velasco,2018-12-19 13:52:32+00:00,GitHub,2018-12-19 13:52:32+00:00,Stop using domains v4 in stable (#1764)
e8570dd47f73ec620218375f176b97f0ffa9eef6,Javi Velasco,2018-12-19 11:20:30+00:00,Javi Velasco,2018-12-19 11:20:30+00:00,12.1.13
4f549a1fa5a2553c8c090c33cf272cd8bb30c9c2,Joe Cohen,2018-12-19 11:06:48+00:00,Javi Velasco,2018-12-19 11:06:48+00:00,Use single call on aliases and certs on domain rm (#1763)
0321a03e384ddbf691b66fd31a0d7a36bb137784,Javi Velasco,2018-12-19 00:20:27+00:00,Javi Velasco,2018-12-19 00:20:27+00:00,13.0.0-canary.32
ba28773dae53f5d3c8b4781a11c7a36f675a058c,Javi Velasco,2018-12-19 00:18:59+00:00,GitHub,2018-12-19 00:18:59+00:00,"Do not use certs and aliases in `now domains rm` (#1761)

* Update types to the new API contract

* Do not use aliases and certs from domain fetch

* Add a dash per row in ns table"
fcb3f7fb4fab24ba9bf3d15eb2aeca77bf044811,Leo Lamprecht,2018-12-18 22:50:52+00:00,Leo Lamprecht,2018-12-18 22:50:52+00:00,13.0.0-canary.31
1db52a938439e264d1da019db94463aa79e61e48,Leo Lamprecht,2018-12-18 22:50:38+00:00,GitHub,2018-12-18 22:50:38+00:00,Wait for unhandled rejections to be reported before exiting (#1760)
47986470a31236b6678accbee8012dddd87c5366,Javi Velasco,2018-12-17 23:40:53+00:00,Javi Velasco,2018-12-17 23:40:53+00:00,13.0.0-canary.30
4ddafa700fa7d7f21d0aeeebb3cf8f5a31c958f5,Javi Velasco,2018-12-17 23:40:22+00:00,GitHub,2018-12-17 23:40:22+00:00,Fix issue when we define aliases in now.json array (#1757)
2d90f1b02d16ee9b34dfba7708d531a48e9bedfa,Javi Velasco,2018-12-17 22:58:05+00:00,Javi Velasco,2018-12-17 22:58:05+00:00,13.0.0-canary.29
19d67cb42b2d1e0fa21e86b52907c064557b1354,Javi Velasco,2018-12-17 19:15:35+00:00,Guillermo Rauch,2018-12-17 19:15:35+00:00,"Domains enhancements (#1755)

* Show a dash where there are no nameservers

* Show actual serviceType in domains

* Format ns table with ticks

* More enhancements"
df2e5c8ab0a140a9dc87b75cd222fea6e19fdfcb,Leo Lamprecht,2018-12-16 16:31:20+00:00,Leo Lamprecht,2018-12-16 16:31:20+00:00,13.0.0-canary.28
02d43366c7a5c56b2df72695e3655695b588a6e3,Leo Lamprecht,2018-12-16 16:31:08+00:00,GitHub,2018-12-16 16:31:08+00:00,"Render better error when source missing (#1754)

* Render better error when source missing

* Added integration test

* Fixed missing"
b51ceb26f8039cb59b875db5aea8a25dfd8c6bc5,Leo Lamprecht,2018-12-13 15:28:41+00:00,Leo Lamprecht,2018-12-13 15:28:41+00:00,13.0.0-canary.27
96f559c51351054a2bf453cb9f2aa24b2a58e124,Leo Lamprecht,2018-12-13 15:28:21+00:00,GitHub,2018-12-13 15:28:21+00:00," Ran prettier over the entire codebase (#1749)

* Use correct parser

* Ran prettier over the entire codebase"
1ed613d5be69fdfa0a77b6231ff7dd23b99deb6c,Javi Velasco,2018-12-13 14:27:21+00:00,GitHub,2018-12-13 14:27:21+00:00,"Fix list DNS issue and migrate certs issue to Typescript (#1747)

* Migrate getDomainDNSRecords to Typescript

* Migrate getDNSRecords to Typescript and fix it

* Migrate cert functions to Typescript and fix issues

* Migrate certs issue to Typescript

* Minor fixes"
2cba7cad2a8419be2b6f00c8e1dac147aadea10c,Leo Lamprecht,2018-12-13 14:13:55+00:00,GitHub,2018-12-13 14:13:55+00:00,"Use our own `@zeit/git-hooks` package (#1748)

* Removed legacy dependencies

* Added @zeit/git-hooks

* Added scripts to run before commit

* Format only the modified files

* Revert ""Format only the modified files""

This reverts commit 9f4a58d2b978fa286eb7fcf38186bd9d53a2cda1.

* Revert ""Added scripts to run before commit""

This reverts commit 07636d945374e404161ad281feed4180801b3509.

* Revert ""Added @zeit/git-hooks""

This reverts commit 3f44f401f36fa6965d36ef28b81907c137c08abc.

* Revert ""Removed legacy dependencies""

This reverts commit bb02465c59d75bf6b32bd449a04832cf4e2f4bf4.

* Fixed setup

* Print important test parts

* Logged kind

* Added more logs

* No need to remove deployments, we will prune"
57c684abf338c9327f292f4640b408829d629e6d,Javi Velasco,2018-12-12 22:35:49+00:00,Javi Velasco,2018-12-12 22:35:49+00:00,13.0.0-canary.26
eb3970d779b319ada3c0fbc05973060e12d5425a,Javi Velasco,2018-12-12 22:33:46+00:00,Javi Velasco,2018-12-12 22:35:08+00:00,"New domains API + Typescript migrations (#1728)

New domains API + Typescript migrations"
e160e4e57837268bf52925fe9b8745f76b09023f,Leo Lamprecht,2018-12-12 22:05:10+00:00,Leo Lamprecht,2018-12-12 22:05:10+00:00,12.1.12
2378b78c696bad35ec025f16c9e52e546eb2634e,Mudit Ameta,2018-12-12 17:23:25+00:00,Leo Lamprecht,2018-12-12 17:25:37+00:00,"Update `now alias` error to mention potentially missing name config (#1742)

* Update `now alias` error to mention potentially missing name config

Running `now alias` in a project that has no `package.json` and doesn't
have a `name` property defined in `now.json` fails with a cryptic
error currently. This, in combination with
https://github.com/zeit/docs/pull/378 tries to better guide the user.

* Add a link to the `name` config property"
3b500bad6465e794b30f123e2b704b6b2eb2e335,Joe Cohen,2018-12-12 17:22:42+00:00,Leo Lamprecht,2018-12-12 17:25:31+00:00,"Use single domain call to remove add domains domains (#1743)

* use single domain call to remove add domains domains

* update sigle domain endpoint and error handling"
39f09d1b4b7d376f4866ecfbc194e8f8afa0b6c3,Leo Lamprecht,2018-12-12 17:24:10+00:00,Leo Lamprecht,2018-12-12 17:24:10+00:00,13.0.0-canary.25
b876da60aa68d7f8ff2b5b4c6226fdf3a3ecd4fd,Mudit Ameta,2018-12-12 17:23:25+00:00,Leo Lamprecht,2018-12-12 17:23:25+00:00,"Update `now alias` error to mention potentially missing name config (#1742)

* Update `now alias` error to mention potentially missing name config

Running `now alias` in a project that has no `package.json` and doesn't
have a `name` property defined in `now.json` fails with a cryptic
error currently. This, in combination with
https://github.com/zeit/docs/pull/378 tries to better guide the user.

* Add a link to the `name` config property"
48f85b4450471e3092846afcb6caf08b26a67ccd,Joe Cohen,2018-12-12 17:22:42+00:00,Leo Lamprecht,2018-12-12 17:22:42+00:00,"Use single domain call to remove add domains domains (#1743)

* use single domain call to remove add domains domains

* update sigle domain endpoint and error handling"
ab81bbea68799e866cdc49a6f083f778f4dc4247,Leo Lamprecht,2018-12-10 14:49:22+00:00,Leo Lamprecht,2018-12-10 14:49:22+00:00,12.1.11
1f2a0d616333477a3a824d79bd8c17b24e811b9e,Leo Lamprecht,2018-12-10 14:10:33+00:00,Leo Lamprecht,2018-12-10 14:27:41+00:00,"Hot fix for `now teams ls` (#1737)

* Hot fix for `now teams ls`

* Added integration test"
6af4b9ecd5570bf31b8e58ee4030238cf35a68ed,Leo Lamprecht,2018-12-10 14:26:40+00:00,Leo Lamprecht,2018-12-10 14:26:40+00:00,13.0.0-canary.24
7441730b249bf4f88ae9cdba10244b6b729ef26a,Leo Lamprecht,2018-12-10 14:10:33+00:00,GitHub,2018-12-10 14:10:33+00:00,"Hot fix for `now teams ls` (#1737)

* Hot fix for `now teams ls`

* Added integration test"
f444350a4f931e2d6268067dcb1affbeee6af38c,Leo Lamprecht,2018-12-10 11:14:02+00:00,Leo Lamprecht,2018-12-10 11:14:02+00:00,"Revert ""Add husky""

This reverts commit 08924431043f6663cbcd3efba23f1291711058b8."
9b922c9f7d56b3d6ae71353cbe3a9d45b795a648,Leo Lamprecht,2018-12-10 11:05:52+00:00,Leo Lamprecht,2018-12-10 11:05:52+00:00,12.1.10
08924431043f6663cbcd3efba23f1291711058b8,Javi Velasco,2018-12-09 23:30:16+00:00,Javi Velasco,2018-12-09 23:30:16+00:00,Add husky
b1bce843d4c709651ec6b53b6615bd4d67038345,Leo Lamprecht,2018-12-07 23:06:40+00:00,Leo Lamprecht,2018-12-07 23:07:33+00:00,Make download script work properly (#1729)
c97a0cffe18c4f672dd278cf933baa103c3ef512,Leo Lamprecht,2018-12-07 23:07:06+00:00,Leo Lamprecht,2018-12-07 23:07:06+00:00,13.0.0-canary.23
8ff7340eb206a62603d6296b7ea2a5ed966a6127,Leo Lamprecht,2018-12-07 23:06:40+00:00,GitHub,2018-12-07 23:06:40+00:00,Make download script work properly (#1729)
067bd9f75e65072e2893cd336c9eeecb026a4428,Leo Lamprecht,2018-12-07 22:37:00+00:00,Leo Lamprecht,2018-12-07 22:38:45+00:00,"Re-enabled minification and source map reporting (#1727)

* Test tag logging

* Track source maps on Sentry

* Bumped @zeit/ncc to the latest version"
9dcf4d02644af571379917a417bcb84e5af6afb8,Leo Lamprecht,2018-12-07 22:37:31+00:00,Leo Lamprecht,2018-12-07 22:37:31+00:00,13.0.0-canary.22
4a3879859558a56be6d7b516622dec2390f781fb,Leo Lamprecht,2018-12-07 22:37:00+00:00,GitHub,2018-12-07 22:37:00+00:00,"Re-enabled minification and source map reporting (#1727)

* Test tag logging

* Track source maps on Sentry

* Bumped @zeit/ncc to the latest version"
b6213b17aebd559aa93abd1b45600415d182e50d,Leo Lamprecht,2018-12-07 15:18:11+00:00,Leo Lamprecht,2018-12-07 15:19:06+00:00,"Fixed even more Sentry errors (#1726)

* Fixed NOW-CLI-A5

* Fixed NOW-CLI-AW

* Fixed NOW-CLI-B4

* Fixed NOW-CLI-8G

* Fixed NOW-CLI-BV

* Fixed NOW-CLI-6Z

* Fixed NOW-CLI-AV

* Fixed NOW-CLI-6A

* Fixed NOW-CLI-24"
b80804dae5dd1c7265ccb2c96aea241eb399b0b8,Leo Lamprecht,2018-12-07 15:18:30+00:00,Leo Lamprecht,2018-12-07 15:18:30+00:00,13.0.0-canary.21
8e4d885268482e8272a96fdaf58cac6ad33c212e,Leo Lamprecht,2018-12-07 15:18:11+00:00,GitHub,2018-12-07 15:18:11+00:00,"Fixed even more Sentry errors (#1726)

* Fixed NOW-CLI-A5

* Fixed NOW-CLI-AW

* Fixed NOW-CLI-B4

* Fixed NOW-CLI-8G

* Fixed NOW-CLI-BV

* Fixed NOW-CLI-6Z

* Fixed NOW-CLI-AV

* Fixed NOW-CLI-6A

* Fixed NOW-CLI-24"
869375a6ac2808e9bc72406dfb2546c269d94400,Leo Lamprecht,2018-12-06 22:31:49+00:00,Leo Lamprecht,2018-12-06 22:32:45+00:00,"Downgrade `@zeit/ncc` (#1725)

* Downgrade `@zeit/ncc`

* Fixed package.json"
51f229b0bdfa97cabbaa02f0bdaf77fb197db083,Leo Lamprecht,2018-12-06 22:31:58+00:00,Leo Lamprecht,2018-12-06 22:31:58+00:00,13.0.0-canary.20
c6a16a0279a813ab25016863c585276f5ad73d6d,Leo Lamprecht,2018-12-06 22:31:49+00:00,GitHub,2018-12-06 22:31:49+00:00,"Downgrade `@zeit/ncc` (#1725)

* Downgrade `@zeit/ncc`

* Fixed package.json"
cb460beb8653309703777be3cf605335fc37fdbe,Leo Lamprecht,2018-12-06 22:07:08+00:00,Leo Lamprecht,2018-12-06 22:15:54+00:00,"Fixed several errors (#1724)

* Handle EPERM errors when creating config files

* Catch errors when retrieving scope

* Added validation for the API URL

* Removed useless whitespace

* Removed useless file

* Cleaned up `setRawMode` mess

* Removed tests that are erroring on non-TTY

* Set environment based on release channel

* Fixed syntax"
6e8cc57b655088d4612a9fed107ffcd8d633d5bb,Leo Lamprecht,2018-12-06 14:23:46+00:00,Leo Lamprecht,2018-12-06 22:15:43+00:00,"Improved error reporting system (#1723)

* Configure releases and environment for Sentry

* Correctly send development errors away

* Report Sentry errors with metadata

* Report username and full name of user too

* Better release name"
d18ae25c19938db97fee0c427cebd42bef4a2fb9,Leo Lamprecht,2018-12-06 13:06:36+00:00,Leo Lamprecht,2018-12-06 22:15:39+00:00,Added legacy `preferGlobal` flag (#1722)
16c0a93d460f01cdc49e74a4d471d2d98212547a,Leo Lamprecht,2018-12-06 22:07:41+00:00,Leo Lamprecht,2018-12-06 22:07:41+00:00,13.0.0-canary.19
857129c60f337a78e31f570a7bc7c006207b8866,Leo Lamprecht,2018-12-06 22:07:08+00:00,GitHub,2018-12-06 22:07:08+00:00,"Fixed several errors (#1724)

* Handle EPERM errors when creating config files

* Catch errors when retrieving scope

* Added validation for the API URL

* Removed useless whitespace

* Removed useless file

* Cleaned up `setRawMode` mess

* Removed tests that are erroring on non-TTY

* Set environment based on release channel

* Fixed syntax"
84e6a52834a834050c4e71944acfd51a81b8b140,Leo Lamprecht,2018-12-06 14:23:46+00:00,GitHub,2018-12-06 14:23:46+00:00,"Improved error reporting system (#1723)

* Configure releases and environment for Sentry

* Correctly send development errors away

* Report Sentry errors with metadata

* Report username and full name of user too

* Better release name"
9a47c6c6d5f72c5d2f73e0624838a3aefffc10ed,Leo Lamprecht,2018-12-06 13:06:36+00:00,GitHub,2018-12-06 13:06:36+00:00,Added legacy `preferGlobal` flag (#1722)
62176311c98661cd92d5a1bd9e3eb221cd2f55b1,Leo Lamprecht,2018-12-05 22:16:20+00:00,Leo Lamprecht,2018-12-05 22:18:05+00:00,"Improved Sentry error reporting (#1720)

* Bumped `@zeit/ncc` to latest version

* Do not report user errors

* Do not report mistyped arguments to Sentry

* Do not report when user aborts action

* Removed all occurances of user errors

* Do not report arg errors

* Correctly report teams and billing errors

* Prevent `setRawMode` from causing an error

* Do not report errors while developing

* Revert ""Prevent `setRawMode` from causing an error""

This reverts commit 323296f30bfcca70ea5bb736db98357212f86a0a.

* Fixed whitespace"
17362c0cadb5cbfb2a5ae48ccc9e56c4dfae6a9b,Leo Lamprecht,2018-12-05 22:16:39+00:00,Leo Lamprecht,2018-12-05 22:16:39+00:00,13.0.0-canary.18
e022bffe40cffc142f3f4e54687d8b84ba8ce3ee,Leo Lamprecht,2018-12-05 22:16:20+00:00,GitHub,2018-12-05 22:16:20+00:00,"Improved Sentry error reporting (#1720)

* Bumped `@zeit/ncc` to latest version

* Do not report user errors

* Do not report mistyped arguments to Sentry

* Do not report when user aborts action

* Removed all occurances of user errors

* Do not report arg errors

* Correctly report teams and billing errors

* Prevent `setRawMode` from causing an error

* Do not report errors while developing

* Revert ""Prevent `setRawMode` from causing an error""

This reverts commit 323296f30bfcca70ea5bb736db98357212f86a0a.

* Fixed whitespace"
ae03014b87cf882f0c1c2c17a4f90d43f22761ae,Leo Lamprecht,2018-12-05 17:06:02+00:00,Leo Lamprecht,2018-12-05 17:06:02+00:00,12.1.9
6defc8eb310654e1e60734ac261aaf07ef84f696,Leo Lamprecht,2018-11-30 23:24:48+00:00,Leo Lamprecht,2018-11-30 23:33:33+00:00,Made `npm run link` work (#1715)
6635e72598d8aa65c3a373080cd3ca2966bb269e,Leo Lamprecht,2018-11-30 23:14:32+00:00,Leo Lamprecht,2018-11-30 23:33:26+00:00,"Replaced `webpack` with `ncc` (#1710)

* Removed useless stuff

* Removed types

* Removed types file

* Made the build work

* Fixed bundling

* Fixed linting

* Fixed download compiler

* Try to fix bundling problem

* Ignored two things

* Upgraded pkg to stable

* Fixed syntax finally

* Fixed unit tests

* Removed shebangs

* Fixed integration tests

* Made download script work"
0eacea6fcda615b460c29f1cc06c9f81e5e11d9c,Leo Lamprecht,2018-11-30 20:48:43+00:00,Leo Lamprecht,2018-11-30 23:33:20+00:00,Changed default of `sessionAffinity` to `random` (#1713)
f3381e95efc28532f70e0a58c83da11340c19055,Leo Lamprecht,2018-11-30 23:32:14+00:00,Leo Lamprecht,2018-11-30 23:32:14+00:00,13.0.0-canary.17
294f1d79837ad457f6d39522c68b3e9cb6908054,Leo Lamprecht,2018-11-30 23:24:48+00:00,GitHub,2018-11-30 23:24:48+00:00,Made `npm run link` work (#1715)
9bfb33d88ca94982be6a756420e228782fcee08f,Leo Lamprecht,2018-11-30 23:14:32+00:00,GitHub,2018-11-30 23:14:32+00:00,"Replaced `webpack` with `ncc` (#1710)

* Removed useless stuff

* Removed types

* Removed types file

* Made the build work

* Fixed bundling

* Fixed linting

* Fixed download compiler

* Try to fix bundling problem

* Ignored two things

* Upgraded pkg to stable

* Fixed syntax finally

* Fixed unit tests

* Removed shebangs

* Fixed integration tests

* Made download script work"
12b874507fd7aa165cac05e1858cbdf6f0bbd72b,Leo Lamprecht,2018-11-30 20:48:43+00:00,GitHub,2018-11-30 20:48:43+00:00,Changed default of `sessionAffinity` to `random` (#1713)
cee97582fc473204a82e7b7a676433b689851321,Leo Lamprecht,2018-11-29 18:33:49+00:00,Leo Lamprecht,2018-11-29 18:33:49+00:00,13.0.0-canary.16
fae3c2e1bd3ec8cf74b0cf16d8297a221053edfb,Gustaf Rntil,2018-11-29 18:30:43+00:00,Leo Lamprecht,2018-11-29 18:33:26+00:00,Improved http2 stability (#1705)
ed89a92f39a51be0553881424b516c3de60d2af7,Leo Lamprecht,2018-11-29 18:30:00+00:00,Leo Lamprecht,2018-11-29 18:33:20+00:00,Correctly report code coverage (#1709)
c4e2a63f76063c2d3445fe91dc3138632324cb1f,Leo Lamprecht,2018-11-29 18:03:32+00:00,Leo Lamprecht,2018-11-29 18:33:16+00:00,"Added code coverage report (#1708)

* Added code coverage report

* Correctly include everything

* Ignored useless stuff

* Combine all the coverages

* Corrected requiring

* Persist only what is needed"
c66b6843a4f46a495018006084c2d748de7a08d8,Gustaf Rntil,2018-11-29 18:30:43+00:00,Leo Lamprecht,2018-11-29 18:30:43+00:00,Improved http2 stability (#1705)
9fc03bbc9a4600ac513a73af7c83cb13f08a7158,Leo Lamprecht,2018-11-29 18:30:00+00:00,GitHub,2018-11-29 18:30:00+00:00,Correctly report code coverage (#1709)
36c875a7f7948689ff39293cc8b141c618e47862,Leo Lamprecht,2018-11-29 18:03:32+00:00,GitHub,2018-11-29 18:03:32+00:00,"Added code coverage report (#1708)

* Added code coverage report

* Correctly include everything

* Ignored useless stuff

* Combine all the coverages

* Corrected requiring

* Persist only what is needed"
0baa065fce6f2e550097c87314198b174be66ea2,Leo Lamprecht,2018-11-29 16:13:52+00:00,Leo Lamprecht,2018-11-29 16:13:52+00:00,12.1.8
075c1522f8f80a096c95e8c8f72f2fd040eba263,Leo Lamprecht,2018-11-29 16:00:49+00:00,Leo Lamprecht,2018-11-29 16:04:02+00:00,"Ensured `now -V 1 owner/repo` continues working (#1707)

* Ensured `now -V 1 owner/repo` continues working

* Added newline

* Added tests"
48b175fa43be44999fca02ec4225d5911a9a07a8,Leo Lamprecht,2018-11-29 16:01:04+00:00,Leo Lamprecht,2018-11-29 16:01:04+00:00,13.0.0-canary.15
4d35ea9bf3d569be1a4ebba5d1fdc17918ab9624,Leo Lamprecht,2018-11-29 16:00:49+00:00,GitHub,2018-11-29 16:00:49+00:00,"Ensured `now -V 1 owner/repo` continues working (#1707)

* Ensured `now -V 1 owner/repo` continues working

* Added newline

* Added tests"
9c52309fb3f789755e17409a55261f55d1820823,Leo Lamprecht,2018-11-28 12:00:48+00:00,Leo Lamprecht,2018-11-28 12:00:48+00:00,12.1.7
ebaa5dc70bcca1d51570d38096306979058b8994,Leo Lamprecht,2018-11-27 22:36:02+00:00,Leo Lamprecht,2018-11-27 22:47:55+00:00,Render more accurate error when offline (#1704)
62368fda2356c9530510a3dff3fbf802da051349,Leo Lamprecht,2018-11-27 22:37:15+00:00,Leo Lamprecht,2018-11-27 22:37:15+00:00,13.0.0-canary.14
6b89eca02226a81862bddf79a3c22720ae41fdda,Leo Lamprecht,2018-11-27 22:36:02+00:00,GitHub,2018-11-27 22:36:02+00:00,Render more accurate error when offline (#1704)
5f9c5b1cf4d0e37c8485150edfd17ee152cb8ae3,Leo Lamprecht,2018-11-27 18:46:03+00:00,Leo Lamprecht,2018-11-27 20:59:22+00:00,Render more detailed error when files are not there (#1700)
57f6895f92f65fa2290cd0ab9b82fc8ddcf47b1a,Leo Lamprecht,2018-11-27 20:16:34+00:00,Leo Lamprecht,2018-11-27 20:58:59+00:00,"Render a proper error when offline (#1702)

* Made debugging entry file work

* Render proper error when offline

* Return proper exit code"
000c02247d76444e5cdd95d716567de7010083c6,Leo Lamprecht,2018-11-27 20:19:35+00:00,Leo Lamprecht,2018-11-27 20:19:35+00:00,13.0.0-canary.13
6b899188c45e9b6b70a15fa62316876dc4b82394,Leo Lamprecht,2018-11-27 20:16:34+00:00,GitHub,2018-11-27 20:16:34+00:00,"Render a proper error when offline (#1702)

* Made debugging entry file work

* Render proper error when offline

* Return proper exit code"
24f0efc0e28eda1687137eb181d7ab7d593077e8,Leo Lamprecht,2018-11-27 18:48:43+00:00,Leo Lamprecht,2018-11-27 18:48:43+00:00,13.0.0-canary.12
b6bbb28757ca29a61c9bb22405458615286d7202,Leo Lamprecht,2018-11-27 18:46:03+00:00,GitHub,2018-11-27 18:46:03+00:00,Render more detailed error when files are not there (#1700)
fee4e23c119c3bf3a79b29456d8d99d9c0f98310,Leo Lamprecht,2018-11-26 12:07:40+00:00,Leo Lamprecht,2018-11-26 12:07:40+00:00,12.1.6
adac5826bd7847183ff2f876602a88e5d17d852f,Leo Lamprecht,2018-11-26 10:08:40+00:00,Leo Lamprecht,2018-11-26 10:09:44+00:00,"Do not render instance count for 2.0 deployments (#1697)

* Do not render instance count for 2.0 deployments

* Added integration test"
8e1cd54c925726895e1e7199bb9a6bea8fedf74b,Leo Lamprecht,2018-11-26 10:09:02+00:00,Leo Lamprecht,2018-11-26 10:09:02+00:00,13.0.0-canary.11
8b3dff12e8c7ac97bb17436a87f9df12f877b252,Leo Lamprecht,2018-11-26 10:08:40+00:00,GitHub,2018-11-26 10:08:40+00:00,"Do not render instance count for 2.0 deployments (#1697)

* Do not render instance count for 2.0 deployments

* Added integration test"
e2885e2a006f64450130f828aae0462ed702791b,Leo Lamprecht,2018-11-23 11:10:56+00:00,Leo Lamprecht,2018-11-23 11:11:47+00:00,Do not send `github` property to API (#1694)
c82b18f772bdd6eb9bf10a6745a083d1f9274de4,Leo Lamprecht,2018-11-23 11:11:10+00:00,Leo Lamprecht,2018-11-23 11:11:10+00:00,13.0.0-canary.10
2642e15affd46853611b5581cc043fd5ea14c271,Leo Lamprecht,2018-11-23 11:10:56+00:00,GitHub,2018-11-23 11:10:56+00:00,Do not send `github` property to API (#1694)
6879e0e819ce187c5408ceca49215d93551760dd,Leo Lamprecht,2018-11-22 15:47:31+00:00,Leo Lamprecht,2018-11-22 15:48:32+00:00,Do not send `alias` to the API (#1690)
bf4dac5c3bc8024a00bb32df35d320f1d42db9c6,Leo Lamprecht,2018-11-22 15:47:53+00:00,Leo Lamprecht,2018-11-22 15:47:53+00:00,13.0.0-canary.9
8729214f8b11d8d3be6bcf44ac7959e61f220618,Leo Lamprecht,2018-11-22 15:47:31+00:00,GitHub,2018-11-22 15:47:31+00:00,Do not send `alias` to the API (#1690)
d3fd83c2ac55ca9d00fd8756c8a6cc6b57d009b1,Leo Lamprecht,2018-11-22 12:38:46+00:00,Leo Lamprecht,2018-11-22 12:47:01+00:00,"Properly render schema validation errors (#1689)

* Properly render schema validation errors

* Added integration test

* Removed useless properties"
ff6073a932a91b8b5109e0b152b523cc116b4b38,Leo Lamprecht,2018-11-22 12:39:17+00:00,Leo Lamprecht,2018-11-22 12:39:17+00:00,13.0.0-canary.8
2cfee720a39f132112e883d588a97fd96ed3c83c,Leo Lamprecht,2018-11-22 12:38:46+00:00,GitHub,2018-11-22 12:38:46+00:00,"Properly render schema validation errors (#1689)

* Properly render schema validation errors

* Added integration test

* Removed useless properties"
da5c75c911f622190585bdf152e38f7ff1392040,Leo Lamprecht,2018-11-21 21:15:35+00:00,Leo Lamprecht,2018-11-21 21:15:35+00:00,12.1.5
e6802d89aa82e5c9dbb21d912137a46b7c127751,Leo Lamprecht,2018-11-21 17:11:33+00:00,Leo Lamprecht,2018-11-21 17:22:37+00:00,"Make `now teams add` work (#1684)

* Make `now teams add` work

* Added integration test

* Added comment"
061e3d212d4365176f11071d3fb5f27dff2d6f04,Leo Lamprecht,2018-11-21 17:11:55+00:00,Leo Lamprecht,2018-11-21 17:11:55+00:00,13.0.0-canary.7
04bb549e369d458196272edfbc9c4f013b5865b9,Leo Lamprecht,2018-11-21 17:11:33+00:00,GitHub,2018-11-21 17:11:33+00:00,"Make `now teams add` work (#1684)

* Make `now teams add` work

* Added integration test

* Added comment"
731e36a393478ba5f2d47163eef2c18a9974344a,Leo Lamprecht,2018-11-20 20:16:27+00:00,Leo Lamprecht,2018-11-20 20:16:27+00:00,12.1.4
e94b0dfa880ccc6495fe02ab087bb2b8592dfaaf,Leo Lamprecht,2018-11-19 12:16:31+00:00,Leo Lamprecht,2018-11-19 12:25:50+00:00,Do not store a backup of the binary (#1676)
5cf6016d50473563e5d0ef20a1306f8785a76d1e,Leo Lamprecht,2018-11-16 21:54:20+00:00,Leo Lamprecht,2018-11-19 12:25:45+00:00,Build for dev and not for prod when linking (#1671)
cde888ed2bfc7c93b679c1fc3b73bf74629cfca8,Leo Lamprecht,2018-11-15 23:16:02+00:00,Leo Lamprecht,2018-11-19 12:25:38+00:00,Made publishing work (#1669)
fe07405971c1e29a5af0928b0ac5850bc64d3e25,Leo Lamprecht,2018-11-15 21:19:51+00:00,Leo Lamprecht,2018-11-19 12:25:23+00:00,"Upgrade to Webpack 4.0 (#1667)

* Added support for Webpack 4

* Brought performance back

* Default output dir

* Made it take effect

* Made binary work"
68fcb587a9f17755af555c084e84bf2656eee66f,Leo Lamprecht,2018-11-19 12:23:03+00:00,Leo Lamprecht,2018-11-19 12:23:03+00:00,13.0.0-canary.6
93165ef0b2570309a328ad6877cd8f9c8f17b5cf,Leo Lamprecht,2018-11-19 12:16:31+00:00,GitHub,2018-11-19 12:16:31+00:00,Do not store a backup of the binary (#1676)
a616124cc6a0b6bfee705a17754b55f8462900ed,Leo Lamprecht,2018-11-16 21:54:20+00:00,GitHub,2018-11-16 21:54:20+00:00,Build for dev and not for prod when linking (#1671)
2ccb8f9a1774507047986af467ac1b95b0f9a18a,Leo Lamprecht,2018-11-15 23:16:29+00:00,Leo Lamprecht,2018-11-15 23:16:29+00:00,13.0.0-canary.5
4b58fac608fe9f0fbf1e0258639687a4632e82ba,Leo Lamprecht,2018-11-15 23:16:02+00:00,GitHub,2018-11-15 23:16:02+00:00,Made publishing work (#1669)
a4a3d8a6eb23e8f18afa736dcee26ca44a57127a,Leo Lamprecht,2018-11-15 21:21:45+00:00,Leo Lamprecht,2018-11-15 21:21:45+00:00,13.0.0-canary.4
dbcb18bffc22f2cfbc21b4914237621ae06d1420,Leo Lamprecht,2018-11-15 21:19:51+00:00,GitHub,2018-11-15 21:19:51+00:00,"Upgrade to Webpack 4.0 (#1667)

* Added support for Webpack 4

* Brought performance back

* Default output dir

* Made it take effect

* Made binary work"
c154d600fdcfbff17dbb01c72b3fbab5ae4e1119,Leo Lamprecht,2018-11-15 16:25:59+00:00,Leo Lamprecht,2018-11-15 16:25:59+00:00,12.1.3
25bdc3b5a818df2a89fc06371e5faf1aaf627e0f,Leo Lamprecht,2018-11-15 00:26:02+00:00,Leo Lamprecht,2018-11-15 00:33:11+00:00,Report server errors that are unhandled (#1658)
71dce2849479bfd735907b1945b4320afb9199f3,Evil Rabbit,2018-11-15 00:17:49+00:00,Leo Lamprecht,2018-11-15 00:33:06+00:00,Update repo banner (#1659)
cf39c76986208bfafa4aa36fcf2db9ef6aa92b89,Leo Lamprecht,2018-11-15 00:03:46+00:00,Leo Lamprecht,2018-11-15 00:33:00+00:00,"Send unexpected errors away for inspection (#1657)

* Send errors away for inspection

* Allow Sentry to send them away

* Fixed dependency

* Fix credit card input

* Do not test for something that requires TTY

* Track properly

* Make it extra safe

* Added back test"
e779b8342d88052878dc1753bff3e63459fe83ce,Leo Lamprecht,2018-11-14 22:53:46+00:00,Leo Lamprecht,2018-11-15 00:32:53+00:00,"Added new `now upgrade` and `now downgrade` commands (#1656)

* Handle cancelation

* Fixed imports

* Added support for old plans

* Removed test that does not apply anymore"
f229f09715500cea62e999dd4d01c25de419fc03,Leo Lamprecht,2018-11-14 13:27:14+00:00,Leo Lamprecht,2018-11-15 00:32:46+00:00,Fixed error message for minimum instance count (#1655)
a499580b4d93788f7bdec59515fb73a3ff9b7110,Leo Lamprecht,2018-11-15 00:26:16+00:00,Leo Lamprecht,2018-11-15 00:26:16+00:00,13.0.0-canary.3
4fd952b0daab07a1e95a6452803178635f25d4e3,Leo Lamprecht,2018-11-15 00:26:02+00:00,GitHub,2018-11-15 00:26:02+00:00,Report server errors that are unhandled (#1658)
234ed2718f582b830a52b10d7eceea63714f8f05,Evil Rabbit,2018-11-15 00:17:49+00:00,Leo Lamprecht,2018-11-15 00:17:49+00:00,Update repo banner (#1659)
77c1818572c228819d17327206efd0ae5562d403,Leo Lamprecht,2018-11-15 00:07:06+00:00,Leo Lamprecht,2018-11-15 00:07:06+00:00,13.0.0-canary.2
b704aca0fe2c37b89f18b06be048642cad0603b5,Leo Lamprecht,2018-11-15 00:03:46+00:00,GitHub,2018-11-15 00:03:46+00:00,"Send unexpected errors away for inspection (#1657)

* Send errors away for inspection

* Allow Sentry to send them away

* Fixed dependency

* Fix credit card input

* Do not test for something that requires TTY

* Track properly

* Make it extra safe

* Added back test"
8226f81026a5cefe9a1bb49bc9f7fe13b81c0f91,Leo Lamprecht,2018-11-14 22:53:46+00:00,GitHub,2018-11-14 22:53:46+00:00,"Added new `now upgrade` and `now downgrade` commands (#1656)

* Handle cancelation

* Fixed imports

* Added support for old plans

* Removed test that does not apply anymore"
1b062aa597a742363e8370da92a35be384e4fe46,Leo Lamprecht,2018-11-14 13:27:14+00:00,GitHub,2018-11-14 13:27:14+00:00,Fixed error message for minimum instance count (#1655)
80d166ad0d63d6e1f2e84a5777ea5513c939aaf4,Leo Lamprecht,2018-11-13 23:39:26+00:00,Leo Lamprecht,2018-11-13 23:39:26+00:00,12.1.2
2b7e21b31db7cd843a72e32b04ba90402f8f9b66,Leo Lamprecht,2018-11-13 22:48:40+00:00,Leo Lamprecht,2018-11-13 22:58:05+00:00,"Allow re-using aliases that point to deleted deployments (#1653)

* Allow re-using aliases that point to deleted deployments

* Removed"
3f863cace4542d1ed7a6772dadb3310f25a37d83,Leo Lamprecht,2018-11-13 22:52:48+00:00,Leo Lamprecht,2018-11-13 22:52:48+00:00,13.0.0-canary.1
737536297c7551d220ba7cc681861e0a85bb803c,Leo Lamprecht,2018-11-13 22:48:40+00:00,GitHub,2018-11-13 22:48:40+00:00,"Allow re-using aliases that point to deleted deployments (#1653)

* Allow re-using aliases that point to deleted deployments

* Removed"
c157e0817980176af649dd34fecf8d1a58cf5123,Leo Lamprecht,2018-11-13 18:03:21+00:00,Leo Lamprecht,2018-11-13 19:20:57+00:00,Log version when debugging (#1652)
96ff68a8a1bcf4819182a99a4d169c650c03327b,Leo Lamprecht,2018-11-13 18:00:07+00:00,Leo Lamprecht,2018-11-13 19:20:51+00:00,"Decrease amount of retries for download (#1651)

This fixes #1622."
46fc00918e027c5fa92735cc1a8b015df7986225,Leo Lamprecht,2018-11-13 17:54:18+00:00,Leo Lamprecht,2018-11-13 19:20:45+00:00,"Return code 0 if no deployments found when removing (#1650)

* Return code 0 if no deployments found when removing

This fixes #1605.

* Fixed integration test

* Fixed second example too

* Fixed all occurances"
c9017b5bf93289fafaf9250dbe0b0a759b9344f1,Leo Lamprecht,2018-11-13 19:10:39+00:00,Leo Lamprecht,2018-11-13 19:10:39+00:00,12.0.0-canary.100
89dc51fab534deca0d935a3f1440221f53b8dc44,Leo Lamprecht,2018-11-13 18:03:21+00:00,GitHub,2018-11-13 18:03:21+00:00,Log version when debugging (#1652)
78067113d7fcbdb3765fbe83bbece821bb03ca37,Leo Lamprecht,2018-11-13 18:00:07+00:00,GitHub,2018-11-13 18:00:07+00:00,"Decrease amount of retries for download (#1651)

This fixes #1622."
bef3abbe2c777fdbb0117514a16d1c844dcbdb91,Leo Lamprecht,2018-11-13 17:54:18+00:00,GitHub,2018-11-13 17:54:18+00:00,"Return code 0 if no deployments found when removing (#1650)

* Return code 0 if no deployments found when removing

This fixes #1605.

* Fixed integration test

* Fixed second example too

* Fixed all occurances"
be98a38c9a0701c7b5cb9192dac4655d7982fc8d,Leo Lamprecht,2018-11-12 21:24:47+00:00,Leo Lamprecht,2018-11-12 21:24:47+00:00,12.1.1
59717b32a5379af50a5920699665b77d45386b92,Leo Lamprecht,2018-11-12 21:12:18+00:00,Leo Lamprecht,2018-11-12 21:13:21+00:00,Made default value for `--dotenv` (v1) work again (#1649)
1255c24898fbd6e11af05ac4f479c9fdf504b1b9,Leo Lamprecht,2018-11-12 21:12:39+00:00,Leo Lamprecht,2018-11-12 21:12:39+00:00,12.0.0-canary.99
4e0b9235529fe0efc5554fd75d0834db342d0e52,Leo Lamprecht,2018-11-12 21:12:18+00:00,GitHub,2018-11-12 21:12:18+00:00,Made default value for `--dotenv` (v1) work again (#1649)
0ee868e00963d48a4b2a191e00ff929fe8982dea,Leo Lamprecht,2018-11-12 12:29:37+00:00,Leo Lamprecht,2018-11-12 12:29:37+00:00,12.1.0
ef9a6ac6aa31103412af5534a3f2c215b3891e91,Leo Lamprecht,2018-11-12 12:07:56+00:00,Leo Lamprecht,2018-11-12 12:07:56+00:00,12.0.0-canary.98
075dea2b8fb0390cae3bb25a864e646890faf03f,Leo Lamprecht,2018-11-12 11:53:12+00:00,Leo Lamprecht,2018-11-12 11:59:39+00:00,Added `-V` to the usage information (#1648)
60c0d725c9e997835a58811461a661915a549e78,Leo Lamprecht,2018-11-12 11:53:12+00:00,GitHub,2018-11-12 11:53:12+00:00,Added `-V` to the usage information (#1648)
a6ab26f93cf38ca19297f4545de9c300e39e880a,Leo Lamprecht,2018-11-12 11:48:08+00:00,Leo Lamprecht,2018-11-12 11:48:58+00:00,"Added tests for `-V` option (#1647)

* Added tests for `-V` option

* Pushed for testing

* Correctly set it

* Revert ""Correctly set it""

This reverts commit c76286082d90f091ecec4a317856e91b4558e781.

* Create a new deployment each time"
59450f470a47c10299225904541b992a906202ee,Leo Lamprecht,2018-11-12 11:48:21+00:00,Leo Lamprecht,2018-11-12 11:48:21+00:00,12.0.0-canary.97
09dfd736dbebb0d6fafef163c6f87be2b63ac2e1,Leo Lamprecht,2018-11-12 11:48:08+00:00,GitHub,2018-11-12 11:48:08+00:00,"Added tests for `-V` option (#1647)

* Added tests for `-V` option

* Pushed for testing

* Correctly set it

* Revert ""Correctly set it""

This reverts commit c76286082d90f091ecec4a317856e91b4558e781.

* Create a new deployment each time"
520d3e2a063d8598ee17e105aa820cf4361e205c,Leo Lamprecht,2018-11-10 19:55:35+00:00,Leo Lamprecht,2018-11-10 19:56:39+00:00,Added support for `-V` option (#1644)
3852c9bf3f286673adaaa98379c7ecdf4cc03b4b,Leo Lamprecht,2018-11-10 19:55:57+00:00,Leo Lamprecht,2018-11-10 19:55:57+00:00,12.0.0-canary.96
f3d9208d089f83a49bf8e6f5dab048045a9c3bb5,Leo Lamprecht,2018-11-10 19:55:35+00:00,GitHub,2018-11-10 19:55:35+00:00,Added support for `-V` option (#1644)
f3ed32e06b025c33320629ddf7f69227c3e347a9,Leo Lamprecht,2018-11-08 22:25:25+00:00,Leo Lamprecht,2018-11-08 22:25:25+00:00,12.0.1
eded40049d1bb7715e9e572a1ae250396d0c29d5,Leo Lamprecht,2018-11-08 21:20:33+00:00,Leo Lamprecht,2018-11-08 22:01:46+00:00,"Made `--build-env`, `--meta` and `--dotenv` work for v1 (#1637)

Made `--build-env`, `--meta` and `--dotenv` work for v1

* Locked multi static file test to v1

* Correct fix

* Final fix

* Config also adds to count

* Fixed single file test

* legacy => old

* Correctly set it"
56e1a37ae1f3b683898804836dd07183c0a9d150,Bart Deslagmulder,2018-11-08 17:49:15+00:00,Leo Lamprecht,2018-11-08 22:01:37+00:00,Updated error documentation about not nameservers (#1629)
c62236791a4051d9ab8080eaac97dbc612ae48e0,Leo Lamprecht,2018-11-08 21:21:24+00:00,Leo Lamprecht,2018-11-08 21:21:24+00:00,12.0.0-canary.95
bbe6ff820a8b107f8849578282a8cad8ec7e7e1a,Leo Lamprecht,2018-11-08 21:20:33+00:00,GitHub,2018-11-08 21:20:33+00:00,"Made `--build-env`, `--meta` and `--dotenv` work for v1 (#1637)

Made `--build-env`, `--meta` and `--dotenv` work for v1

* Locked multi static file test to v1

* Correct fix

* Final fix

* Config also adds to count

* Fixed single file test

* legacy => old

* Correctly set it"
47679469acc7d3ad1a126a357ac88e5482c32198,Bart Deslagmulder,2018-11-08 17:49:15+00:00,Leo Lamprecht,2018-11-08 17:49:15+00:00,Updated error documentation about not nameservers (#1629)
49d29b2a0d4b57c4fbfd6329f086efd8f557ada1,Leo Lamprecht,2018-11-08 15:44:13+00:00,Leo Lamprecht,2018-11-08 15:44:13+00:00,12.0.0
f330d2c7ed735c34132f566dda20064da315f3dd,Leo Lamprecht,2018-11-08 15:24:31+00:00,Leo Lamprecht,2018-11-08 15:29:05+00:00,"Added support for Now 2.0 (#1636)

* Removed external providers

* Renamed sh provider

* Removed serverless stuff

* Fixed paths

* Properly pass token

* Fixed paths

* Check for token correctly

* Remove useless properties

* Fixed unit tests

* Keep certain things

* Adjusted remaining parts

* Fixed login

* Remove user properties that are not needed

* Store `platformVersion` for teams

* Store `platformVersion` for users

* Delete team order when logging out

* Made team commands work with tiny config

* Load data dynamically

* Made billing command show correct context

* Fixed remaining occurences of context name

* Fixed remaining pieces

* Test CI

* Clean strings when testing

* Better error check

* Render correct information when asking for credit card

* Migrate from objects to strings

* Better migration message and keep tips

* Remove the old property

* Use note for migration message

* Don't show spinner for loading missing data

* Allow for current team or user to be deleted

* Two deploy files

* Consume context name correctly

* Removed deployment types from new deployer

* Also check for bigger than 1

* Better file names

* Added upgrade message for legacy deployer

* Make help work when logged out

* Error if sub command doesn't exist when requesting help

* Fixed wording

* Support for version property added

* Better handling

* Removed useless props from deploy help

* Don't show version warnings when rendering help

* Fixed wording in readme

* Migrate even if in the middleground

* Make `now whoami` work

* Deprecated support for deploying Git repo in latest deployer

* Added usage information

* Load config separately

* Don't need local config on root

* Correct status code for help test

* Show error only in correct case

* Properly error if path does not exist

* Fixed types

* Fixed remaining occurances of old config

* Don't show warning when rendering help

* Consider version when outputting help

* Only error if path does not exist if it's not help

* Remove testing logging

* Don't error for no-verify

* Stop logging

* Fixed last test

* Added missing semicolons

* Fix indent

* Fix indent again

* Ran prettier over everything

* Added missing types

* Brought test hashes back to normal

* Exit properly when deploying

* Show clipboard note in gray and remove Node.js version

* Completed usage information

* Ensure `now whoami` only outputs the user

* Don not save user data to config

* Removed last traces of `user` and `.api` and `--team` work

* Made `now upgrade` and `now downgrade` correctly render context

* Fixed upgrade/downgrade URL for teams

* Ability to load required data

* Better file name

* Corrected check for current scope

* Don't render version warning when showing help

* Keep polling for handlers

* Render handlers

* Removed useless file

* Much better transpilation setup

* Sweetened logging

* Shortened time it takes to render ready

* Support for error ready states

* Make sure table is not wobbling

* Show times for every handler

* Attach env and build env

* Don't pass useless stuff

* Re-structured pipeline

* Allow empty config

* Do not support package.json config for new pipeline

* Removed occurances of AWS

* Drop useless packages

* Removed useless file

* Ensure the legacy pipeline is working

* Test staging proxy with legacy pipeline

* Adjust test

* Stop testing staging proxy

* Allow for anything

* Pass `handlers` and `routes` to creation endpoint

* Fixed tests

* Revert ""Fixed tests""

This reverts commit e0d18a61b9520728089cb2f9e6877c1b91016312.

* Running tests should not be optional

* Support for `-m` and `--meta` added

* Support reading `meta` in local config

* Allow reading `name` from local config

* The `public` prop in local config should be considered

* Handlers deployments should use `.nowignore` and nothing else

* Allow handlers deployments without `handlers` and `routes` in the config

* Locked legacy tests to legacy platform version

* Support aliasing handlers deployments

* Removed useless condition

* Don't allow scaling handlers deployments

* Don't show warning message when deploying single file

* Fixed tests

* Made `now inspect` work

* No type for handlers deployments in list

* Indicate whether a deployment is legacy in `now inspect`

* Made `--force` work for handlers deployments

* Do not document `--dotenv` for handlers (not supported)

* Do not strip `hdl_` from handler IDs

* Fixed for upgrading to latest platform

* Better error for when `version` property is missing

* Render platform version while deploying

* Strip `hdl_` from handler IDs

This reverts commit 750d38ba9074bdc3e63ad2dab8538e51dbba5f03.

* Removed `https://` from handler list

* Removed demo mock

* Cleaner errors

* Make times and erroring work properly

* Print final deployment error

* Removed useless promise

* Prettified code

* Put config utils into correct location

* Moved even more config files

* Removed useless directory

* Removed last useless file

* Fixed wrong paths

* Fixed unit tests

* Update deployment according to handler state, like the server-side loop

* More robust deployment mechanism

* Poll every 1.5 seconds

* Prevent many requests

* Show spinner while waiting for deployment to be ready

* Render how long the deployment took

* Avoid unnecessary repainting

* Automatically remove useless `user` property from config when migrating

* Fixed property names in `now inspect`

* Render platform version for legacy pipeline

* Shortened error messages

* Support `regions` in the local config

* Support for `--regions` added

* Add metadata support for legacy deployments (#2)

* Share handlers table between deploying and inspecting

* Make `now inspect` work nicely

* Renamed handlers to builds

* Stop sending away description

* Bare UI support for builds

* Simper logic for rendering builds

* Render output of builds

* Indicate lambdas in a better way

* Render size for build output

* Do not show type for version 2 deployments

* Fixed time output for `now inspect`

* Don't handle BUILDS type

* Allow for 100% non-config deployments

* Add metadata support for now ls (#3)

* Add metadata support for now ls
So, we can do things like this:
  now ls -m key1=value1 -m key2=value2

* Better description

* Fix wording

* Added final newline

* Add sentry (#4)

* Revert ""Add sentry (#4)""

This reverts commit 851d1bdb0e1bbc8f329a45388865b2c41395d8c2.

* Only render build output if it was not copied

* Made `now alias` work with latest staging proxy

* Revert ""Made `now alias` work with latest staging proxy""

This reverts commit 16e8998435ef03c50d2737f3ef17fa5c0c2dd33f.

* Bumped deployments API to the latest version

* Made `now rm` work

* Do not print `version` warning for single files

* Removed useless `fs-extra` dependency

* Removed useless dependencies

* Default binaries to Node 10

* Bumped Node.js in Circle CI to latest

* Bumped Xcode to get latest Node.js for integration tests

* Enabled HTTP/2 support

* Removed useless code

* Added integration test for builds

* Bumped `fetch-h2` to the latest version

* Avoid performing network request for rendering help

* Render note when viewing latest help

* Return status code `2` when exiting with help

* Fixed test for usage information

* Removed wrong text in usage info for Now 2.0

* Removed support for `--links` from v2 pipeline

* migrated => upgraded

* Added default routing for single files

* Make `--token` work as expected

* Better message for build errors

* Prevent update notification

* Prevent update notifications from showing

* Only show migration message in debug output

* Prevent flickering of state

* Improved output

* Removed useless assignment

* Corrected padding

* Less padding before state

* Corrected links for global configuration

* Fixed integration tests

* Render region for Lambdas

* Join regions in a better way

* Ensure `now.json` and `.nowignore` (the latter worked anyways) are uploaded

* Fix `build.env` in new deployment API call (#6)

* JSON log the deployment body when debugging (#8)

Otherwise it's just `[object Object]` which is useless.

* Retry to fetch on error on follow mode (#5)

* retry fetch on error on follow mode

* improve logging

* Fixed `--env` and `--build-env` CLI args (#7)

* Fix `--env` and `--build-env` CLI args

* Fall back to `undefined`

* Ensure `now switch` lists active scope in the beginning

* Removed useless code

* Error if `env` or `build.env` have wrong types

* Made `now inspect` look great

* Fixed wrong protocol in URL

* Made `now --team` work with users

* Leave PHP out of integration test for now

* Do not select PHP build

* Fixed integration tests

* Revert ""12.0.0-canary.93""

This reverts commit 70a0a594b45f0d91236afb3d35b77cd5556036e4.

* Revert ""Revert ""Add support for top-level ""sh"" auth""""

This reverts commit 4273d6246081c273237f9bfa3594e060e0a43564.

* Revert ""12.0.0-canary.92""

This reverts commit 847c71ecf2849199ea891b8b503582af472fb6e0.

* Revert ""Add support for top-level ""sh"" auth""

This reverts commit c493d651db02d8d3885e65798ef82b2b0381513b.

* Revert ""12.0.0-canary.91""

This reverts commit 06c954f8fe7c5ef288fd393ac4158209604c50f7.

* Revert ""Added metadata support for `now inspect` (#1634)""

This reverts commit 9567656b45db146fc7fc0fd59eea12946d014bda.

* Revert ""12.0.0-canary.90""

This reverts commit 966737be23fe612e80f3a154357bd435dc667e93.

* Revert ""Added support for deployment metadata (#1604)""

This reverts commit 6c1188a787068b389a13bb90f5d8d8710abf057a."
f7e79a31a0eb5e7982b308572b6d74ff1f0b1139,Leo Lamprecht,2018-11-08 15:27:27+00:00,Leo Lamprecht,2018-11-08 15:27:27+00:00,12.0.0-canary.94
2d8c9957563f44a1029c2b7639716c2ed8bd21da,Leo Lamprecht,2018-11-08 15:24:31+00:00,GitHub,2018-11-08 15:24:31+00:00,"Added support for Now 2.0 (#1636)

* Removed external providers

* Renamed sh provider

* Removed serverless stuff

* Fixed paths

* Properly pass token

* Fixed paths

* Check for token correctly

* Remove useless properties

* Fixed unit tests

* Keep certain things

* Adjusted remaining parts

* Fixed login

* Remove user properties that are not needed

* Store `platformVersion` for teams

* Store `platformVersion` for users

* Delete team order when logging out

* Made team commands work with tiny config

* Load data dynamically

* Made billing command show correct context

* Fixed remaining occurences of context name

* Fixed remaining pieces

* Test CI

* Clean strings when testing

* Better error check

* Render correct information when asking for credit card

* Migrate from objects to strings

* Better migration message and keep tips

* Remove the old property

* Use note for migration message

* Don't show spinner for loading missing data

* Allow for current team or user to be deleted

* Two deploy files

* Consume context name correctly

* Removed deployment types from new deployer

* Also check for bigger than 1

* Better file names

* Added upgrade message for legacy deployer

* Make help work when logged out

* Error if sub command doesn't exist when requesting help

* Fixed wording

* Support for version property added

* Better handling

* Removed useless props from deploy help

* Don't show version warnings when rendering help

* Fixed wording in readme

* Migrate even if in the middleground

* Make `now whoami` work

* Deprecated support for deploying Git repo in latest deployer

* Added usage information

* Load config separately

* Don't need local config on root

* Correct status code for help test

* Show error only in correct case

* Properly error if path does not exist

* Fixed types

* Fixed remaining occurances of old config

* Don't show warning when rendering help

* Consider version when outputting help

* Only error if path does not exist if it's not help

* Remove testing logging

* Don't error for no-verify

* Stop logging

* Fixed last test

* Added missing semicolons

* Fix indent

* Fix indent again

* Ran prettier over everything

* Added missing types

* Brought test hashes back to normal

* Exit properly when deploying

* Show clipboard note in gray and remove Node.js version

* Completed usage information

* Ensure `now whoami` only outputs the user

* Don not save user data to config

* Removed last traces of `user` and `.api` and `--team` work

* Made `now upgrade` and `now downgrade` correctly render context

* Fixed upgrade/downgrade URL for teams

* Ability to load required data

* Better file name

* Corrected check for current scope

* Don't render version warning when showing help

* Keep polling for handlers

* Render handlers

* Removed useless file

* Much better transpilation setup

* Sweetened logging

* Shortened time it takes to render ready

* Support for error ready states

* Make sure table is not wobbling

* Show times for every handler

* Attach env and build env

* Don't pass useless stuff

* Re-structured pipeline

* Allow empty config

* Do not support package.json config for new pipeline

* Removed occurances of AWS

* Drop useless packages

* Removed useless file

* Ensure the legacy pipeline is working

* Test staging proxy with legacy pipeline

* Adjust test

* Stop testing staging proxy

* Allow for anything

* Pass `handlers` and `routes` to creation endpoint

* Fixed tests

* Revert ""Fixed tests""

This reverts commit e0d18a61b9520728089cb2f9e6877c1b91016312.

* Running tests should not be optional

* Support for `-m` and `--meta` added

* Support reading `meta` in local config

* Allow reading `name` from local config

* The `public` prop in local config should be considered

* Handlers deployments should use `.nowignore` and nothing else

* Allow handlers deployments without `handlers` and `routes` in the config

* Locked legacy tests to legacy platform version

* Support aliasing handlers deployments

* Removed useless condition

* Don't allow scaling handlers deployments

* Don't show warning message when deploying single file

* Fixed tests

* Made `now inspect` work

* No type for handlers deployments in list

* Indicate whether a deployment is legacy in `now inspect`

* Made `--force` work for handlers deployments

* Do not document `--dotenv` for handlers (not supported)

* Do not strip `hdl_` from handler IDs

* Fixed for upgrading to latest platform

* Better error for when `version` property is missing

* Render platform version while deploying

* Strip `hdl_` from handler IDs

This reverts commit 750d38ba9074bdc3e63ad2dab8538e51dbba5f03.

* Removed `https://` from handler list

* Removed demo mock

* Cleaner errors

* Make times and erroring work properly

* Print final deployment error

* Removed useless promise

* Prettified code

* Put config utils into correct location

* Moved even more config files

* Removed useless directory

* Removed last useless file

* Fixed wrong paths

* Fixed unit tests

* Update deployment according to handler state, like the server-side loop

* More robust deployment mechanism

* Poll every 1.5 seconds

* Prevent many requests

* Show spinner while waiting for deployment to be ready

* Render how long the deployment took

* Avoid unnecessary repainting

* Automatically remove useless `user` property from config when migrating

* Fixed property names in `now inspect`

* Render platform version for legacy pipeline

* Shortened error messages

* Support `regions` in the local config

* Support for `--regions` added

* Add metadata support for legacy deployments (#2)

* Share handlers table between deploying and inspecting

* Make `now inspect` work nicely

* Renamed handlers to builds

* Stop sending away description

* Bare UI support for builds

* Simper logic for rendering builds

* Render output of builds

* Indicate lambdas in a better way

* Render size for build output

* Do not show type for version 2 deployments

* Fixed time output for `now inspect`

* Don't handle BUILDS type

* Allow for 100% non-config deployments

* Add metadata support for now ls (#3)

* Add metadata support for now ls
So, we can do things like this:
  now ls -m key1=value1 -m key2=value2

* Better description

* Fix wording

* Added final newline

* Add sentry (#4)

* Revert ""Add sentry (#4)""

This reverts commit 851d1bdb0e1bbc8f329a45388865b2c41395d8c2.

* Only render build output if it was not copied

* Made `now alias` work with latest staging proxy

* Revert ""Made `now alias` work with latest staging proxy""

This reverts commit 16e8998435ef03c50d2737f3ef17fa5c0c2dd33f.

* Bumped deployments API to the latest version

* Made `now rm` work

* Do not print `version` warning for single files

* Removed useless `fs-extra` dependency

* Removed useless dependencies

* Default binaries to Node 10

* Bumped Node.js in Circle CI to latest

* Bumped Xcode to get latest Node.js for integration tests

* Enabled HTTP/2 support

* Removed useless code

* Added integration test for builds

* Bumped `fetch-h2` to the latest version

* Avoid performing network request for rendering help

* Render note when viewing latest help

* Return status code `2` when exiting with help

* Fixed test for usage information

* Removed wrong text in usage info for Now 2.0

* Removed support for `--links` from v2 pipeline

* migrated => upgraded

* Added default routing for single files

* Make `--token` work as expected

* Better message for build errors

* Prevent update notification

* Prevent update notifications from showing

* Only show migration message in debug output

* Prevent flickering of state

* Improved output

* Removed useless assignment

* Corrected padding

* Less padding before state

* Corrected links for global configuration

* Fixed integration tests

* Render region for Lambdas

* Join regions in a better way

* Ensure `now.json` and `.nowignore` (the latter worked anyways) are uploaded

* Fix `build.env` in new deployment API call (#6)

* JSON log the deployment body when debugging (#8)

Otherwise it's just `[object Object]` which is useless.

* Retry to fetch on error on follow mode (#5)

* retry fetch on error on follow mode

* improve logging

* Fixed `--env` and `--build-env` CLI args (#7)

* Fix `--env` and `--build-env` CLI args

* Fall back to `undefined`

* Ensure `now switch` lists active scope in the beginning

* Removed useless code

* Error if `env` or `build.env` have wrong types

* Made `now inspect` look great

* Fixed wrong protocol in URL

* Made `now --team` work with users

* Leave PHP out of integration test for now

* Do not select PHP build

* Fixed integration tests

* Revert ""12.0.0-canary.93""

This reverts commit 70a0a594b45f0d91236afb3d35b77cd5556036e4.

* Revert ""Revert ""Add support for top-level ""sh"" auth""""

This reverts commit 4273d6246081c273237f9bfa3594e060e0a43564.

* Revert ""12.0.0-canary.92""

This reverts commit 847c71ecf2849199ea891b8b503582af472fb6e0.

* Revert ""Add support for top-level ""sh"" auth""

This reverts commit c493d651db02d8d3885e65798ef82b2b0381513b.

* Revert ""12.0.0-canary.91""

This reverts commit 06c954f8fe7c5ef288fd393ac4158209604c50f7.

* Revert ""Added metadata support for `now inspect` (#1634)""

This reverts commit 9567656b45db146fc7fc0fd59eea12946d014bda.

* Revert ""12.0.0-canary.90""

This reverts commit 966737be23fe612e80f3a154357bd435dc667e93.

* Revert ""Added support for deployment metadata (#1604)""

This reverts commit 6c1188a787068b389a13bb90f5d8d8710abf057a."
dbdc0ed52ff743cb85c496f0b963a7ebb2318abb,Leo Lamprecht,2018-11-03 17:09:20+00:00,Leo Lamprecht,2018-11-03 17:09:20+00:00,11.5.2
fd59f931fa6cbe922bb299e80d2d5a683c66b131,Leo Lamprecht,2018-11-03 17:09:06+00:00,Leo Lamprecht,2018-11-03 17:09:06+00:00,"Revert ""Add support for top-level ""sh"" auth""

This reverts commit b78f61e03d9f0d8483d2acfaf1ab20c7ad81a3f6."
70a0a594b45f0d91236afb3d35b77cd5556036e4,Leo Lamprecht,2018-11-03 16:54:47+00:00,Leo Lamprecht,2018-11-03 16:54:47+00:00,12.0.0-canary.93
4273d6246081c273237f9bfa3594e060e0a43564,Leo Lamprecht,2018-11-03 16:54:36+00:00,Leo Lamprecht,2018-11-03 16:54:36+00:00,"Revert ""Add support for top-level ""sh"" auth""

This reverts commit c493d651db02d8d3885e65798ef82b2b0381513b."
5139c1fa3fcd3ac2f98647e14d2343b883ab8bbf,Leo Lamprecht,2018-11-03 13:03:59+00:00,Leo Lamprecht,2018-11-03 13:03:59+00:00,11.5.1
b78f61e03d9f0d8483d2acfaf1ab20c7ad81a3f6,Nathan Rajlich,2018-11-03 04:00:45+00:00,Leo Lamprecht,2018-11-03 13:03:40+00:00,"Add support for top-level ""sh"" auth"
847c71ecf2849199ea891b8b503582af472fb6e0,Nathan Rajlich,2018-11-03 04:01:32+00:00,Nathan Rajlich,2018-11-03 04:01:32+00:00,12.0.0-canary.92
c493d651db02d8d3885e65798ef82b2b0381513b,Nathan Rajlich,2018-11-03 04:00:45+00:00,Nathan Rajlich,2018-11-03 04:00:45+00:00,"Add support for top-level ""sh"" auth"
42253cdb537ab28499f0edf6092a9cdd3f53bfc1,Leo Lamprecht,2018-11-02 20:48:39+00:00,Leo Lamprecht,2018-11-02 20:48:39+00:00,11.5.0
e4bcb809f3d0bd8d750d8e95c578484bf94c8375,Arunoda Susiripala,2018-11-02 20:25:50+00:00,Leo Lamprecht,2018-11-02 20:26:53+00:00,Added metadata support for `now inspect` (#1634)
06c954f8fe7c5ef288fd393ac4158209604c50f7,Leo Lamprecht,2018-11-02 20:26:13+00:00,Leo Lamprecht,2018-11-02 20:26:13+00:00,12.0.0-canary.91
9567656b45db146fc7fc0fd59eea12946d014bda,Arunoda Susiripala,2018-11-02 20:25:50+00:00,Leo Lamprecht,2018-11-02 20:25:50+00:00,Added metadata support for `now inspect` (#1634)
3d2edff0d33b0580f0784ceabc6349219c882529,Arunoda Susiripala,2018-11-02 20:05:47+00:00,Leo Lamprecht,2018-11-02 20:15:06+00:00,"Added support for deployment metadata (#1604)

* Allow to add metadata in the now deploy command.
Use can add multiple items of metadata with:
  '-m key1=val1 -m key2=val2'

* Add a test case.

* Update to accept and send metadata as meta.

* Use correct fields in now.create

* Add now ls support.

* Add an integration tests for ls with metadata

* Added newline

* Removed semicolon"
966737be23fe612e80f3a154357bd435dc667e93,Leo Lamprecht,2018-11-02 20:14:24+00:00,Leo Lamprecht,2018-11-02 20:14:24+00:00,12.0.0-canary.90
6c1188a787068b389a13bb90f5d8d8710abf057a,Arunoda Susiripala,2018-11-02 20:05:47+00:00,Leo Lamprecht,2018-11-02 20:05:47+00:00,"Added support for deployment metadata (#1604)

* Allow to add metadata in the now deploy command.
Use can add multiple items of metadata with:
  '-m key1=val1 -m key2=val2'

* Add a test case.

* Update to accept and send metadata as meta.

* Use correct fields in now.create

* Add now ls support.

* Add an integration tests for ls with metadata

* Added newline

* Removed semicolon"
f93538cf1e6bbdf41cee0baf150e3679987e33dc,Leo Lamprecht,2018-09-23 15:40:59+00:00,Leo Lamprecht,2018-09-23 15:40:59+00:00,11.4.6
69d5c480a104386cef2ed69d8fb3e964f12e4d30,Evil Rabbit,2018-09-23 15:04:53+00:00,Leo Lamprecht,2018-09-23 15:32:52+00:00,Update repo banner
39fffe6874e5e2fbd5887150bb8601d060066709,Leo Lamprecht,2018-09-23 15:32:13+00:00,Leo Lamprecht,2018-09-23 15:32:13+00:00,12.0.0-canary.89
a75ae8a1b198e24743c3a79f2bd06d959fb34426,Evil Rabbit,2018-09-23 15:04:53+00:00,GitHub,2018-09-23 15:04:53+00:00,Update repo banner
550ce4ea2ae41582962118e2c96a7fc8b0ec136a,Mark,2018-09-20 13:50:07+00:00,Leo Lamprecht,2018-09-20 14:01:51+00:00,Suppress the warning of a dependency based on an expression (#1588)
c1d49fe8aa20322fe98d2d87e1c9634b60695521,Leo Lamprecht,2018-09-20 13:50:23+00:00,Leo Lamprecht,2018-09-20 13:50:23+00:00,12.0.0-canary.88
577831f77599401ca54adfce76a9d4c5392d9fcd,Mark,2018-09-20 13:50:07+00:00,Leo Lamprecht,2018-09-20 13:50:07+00:00,Suppress the warning of a dependency based on an expression (#1588)
57aa4dbce45b93faed2c1270b343a409394a78f1,Leo Lamprecht,2018-09-18 21:43:18+00:00,Leo Lamprecht,2018-09-18 21:43:18+00:00,11.4.5
16b351de2ee7c5936c106b4d469f27efc4ba50bb,Javi Velasco,2018-09-18 21:06:56+00:00,Leo Lamprecht,2018-09-18 21:08:06+00:00,Change copy for finish cert message (#1590)
098ad6e98c392e8629d2a64a268a23b329517f0a,Leo Lamprecht,2018-09-18 21:07:21+00:00,Leo Lamprecht,2018-09-18 21:07:21+00:00,12.0.0-canary.87
248fdbaddfa37f638017a4fddbc3ef6426f476d7,Javi Velasco,2018-09-18 21:06:56+00:00,Leo Lamprecht,2018-09-18 21:06:56+00:00,Change copy for finish cert message (#1590)
badd37e15001e9122b4f9f8873c079aa7baa2fff,Leo Lamprecht,2018-09-14 18:57:08+00:00,Leo Lamprecht,2018-09-14 18:57:08+00:00,11.4.4
60de863a2c2fd0ec89e077a253c49778205a9c1d,Javi Velasco,2018-09-14 18:42:57+00:00,Leo Lamprecht,2018-09-14 18:44:05+00:00,Bring back now certs add (#1583)
417a1abcf787bde31e80d8bc06e8f19f2fd9bbd6,Leo Lamprecht,2018-09-14 18:43:13+00:00,Leo Lamprecht,2018-09-14 18:43:13+00:00,12.0.0-canary.86
d36ecec9c484351acbc90eab1ae0d23e156b9432,Javi Velasco,2018-09-14 18:42:57+00:00,Leo Lamprecht,2018-09-14 18:42:57+00:00,Bring back now certs add (#1583)
6272e1fba37d6081104d4e51812f00db5a4e1f3a,Leo Lamprecht,2018-09-14 18:05:49+00:00,Leo Lamprecht,2018-09-14 18:05:49+00:00,11.4.3
d717381df4ca4938f4f417bdc6dc74bd10a46f67,Nathan Rajlich,2018-09-12 21:39:16+00:00,Leo Lamprecht,2018-09-12 21:52:16+00:00,"Render Cloud v2 info about deployments in `now inspect` (#1577)

`slot` and `limits` are now rendered when it is a Cloud v2 deployment.

Also fixes an issue with static deployments always
rendering `affinity: undefined`."
3fa28867bdbdb2db91cc640d8607c4150e9d1a55,Nathan Rajlich,2018-09-12 21:31:58+00:00,Leo Lamprecht,2018-09-12 21:52:12+00:00,"Add ""all"" pseudo-DC to the constants mapping (#1581)"
e1058f0ab3ca2fdce6c673639b8ff9c39a681733,Nathan Rajlich,2018-09-12 21:31:29+00:00,Leo Lamprecht,2018-09-12 21:52:07+00:00,Add `now inspect` to --help (#1578)
7a2895d3a33b7ed28e575ad63526e78aa0fa7c31,Leo Lamprecht,2018-09-12 21:43:53+00:00,Leo Lamprecht,2018-09-12 21:43:53+00:00,12.0.0-canary.85
58f156a491f9833f1e9892ba32b60777f28c1dad,Nathan Rajlich,2018-09-12 21:39:16+00:00,Leo Lamprecht,2018-09-12 21:39:16+00:00,"Render Cloud v2 info about deployments in `now inspect` (#1577)

`slot` and `limits` are now rendered when it is a Cloud v2 deployment.

Also fixes an issue with static deployments always
rendering `affinity: undefined`."
02ee8602cdd3ba332bdb4c0a168fd87c3a6e926e,Nathan Rajlich,2018-09-12 21:31:58+00:00,Leo Lamprecht,2018-09-12 21:31:58+00:00,"Add ""all"" pseudo-DC to the constants mapping (#1581)"
e999f5dd72956a48ad4cd22cf7f7e3c8c9a522cc,Nathan Rajlich,2018-09-12 21:31:29+00:00,Leo Lamprecht,2018-09-12 21:31:29+00:00,Add `now inspect` to --help (#1578)
aa2913ea079b29357d4cfbf37c4984cfcf36a816,Leo Lamprecht,2018-09-11 16:42:57+00:00,Leo Lamprecht,2018-09-11 16:42:57+00:00,11.4.2
2f07212e2082714ecade2043ada0a51d3c4f2eea,Matheus Fernandes,2018-09-11 16:34:08+00:00,Leo Lamprecht,2018-09-11 16:34:59+00:00,Added new `iad1` data center (#1575)
5e1b09928529d447f2c0ae5b83040bc440da74cc,Leo Lamprecht,2018-09-11 16:34:26+00:00,Leo Lamprecht,2018-09-11 16:34:26+00:00,12.0.0-canary.84
87b1f5a5fb55ef0ec3ff43569127bb79eb600e46,Matheus Fernandes,2018-09-11 16:34:08+00:00,Leo Lamprecht,2018-09-11 16:34:08+00:00,Added new `iad1` data center (#1575)
43eeaa1abf530f78c2e99e50dda4acbd512cbfdf,Nathan Rajlich,2018-09-10 17:06:19+00:00,Leo Lamprecht,2018-09-10 17:10:45+00:00,Add `now whoami` to --help (#1573)
ae8cbdce0a107b7bdddd9d3a03a63e29f2057141,Leo Lamprecht,2018-09-10 17:09:42+00:00,Leo Lamprecht,2018-09-10 17:09:42+00:00,12.0.0-canary.83
95de48c03f80cb43fd80a5c8019dee00d8886024,Cygnusfear,2018-09-10 17:08:49+00:00,Leo Lamprecht,2018-09-10 17:09:36+00:00,"Changed error to log to avoid breaking automatic deployments (#1572)

throwing an error re-opened this issue:
https://github.com/zeit/now-cli/issues/1044

breaks automation when no deployments are found or deployment name is changed"
164ae1fac15b48c46333dc7233c819fba31dcea6,Cygnusfear,2018-09-10 17:08:49+00:00,Leo Lamprecht,2018-09-10 17:08:49+00:00,"Changed error to log to avoid breaking automatic deployments (#1572)

throwing an error re-opened this issue:
https://github.com/zeit/now-cli/issues/1044

breaks automation when no deployments are found or deployment name is changed"
5ea4fd9a5ee2806a91b87a4b49ed57053309d4b0,Nathan Rajlich,2018-09-10 17:06:19+00:00,Leo Lamprecht,2018-09-10 17:06:19+00:00,Add `now whoami` to --help (#1573)
1f3d9e7e0f4635d8222b463dd13705f119e075a5,Leo Lamprecht,2018-09-06 19:00:04+00:00,Leo Lamprecht,2018-09-06 19:00:04+00:00,12.0.0-canary.82
05e4528b1ccf694248b52accc6712d229256f56c,Jaga Santagostino,2018-09-06 18:47:21+00:00,Leo Lamprecht,2018-09-06 18:59:24+00:00,"Add changelog link when new version is available (#1530)

* add changelog link if new version is available

* Linked directly"
40789776bc61e5d9851a6327f6fe8ee419b1fb99,Jarmo Isotalo,2018-09-06 18:40:30+00:00,Leo Lamprecht,2018-09-06 18:59:19+00:00,Prefer URL over deployment ID as the ID not shown in `now ls` (#1554)
6123df568cc5c61c35162756c279dc3359e9de07,Javi Velasco,2018-09-05 15:58:22+00:00,Leo Lamprecht,2018-09-06 18:58:52+00:00,"Restructure certs command (#1567)

* Restructure add command

* Remove cert start and finish

* Rename certs add to issue

* Better errors and add cant-solve-challenge

* Show err.sh for dns configuration errors generating certs

* Add err.sh to solve challenges manually

* Add deprecation message to certs add

* Improve grammar

* Minor fixes"
705cb5fed3bf8955e59e0c03f37768e6640b09aa,Javi Velasco,2018-09-02 21:24:04+00:00,Leo Lamprecht,2018-09-06 18:58:45+00:00,"Allow to generate certs solving challenges manually (#1566)

* Move getDomainNameservers function

* Don't show an error as unexpected if there is a code in the error payload

* Add start and finish cert order functions

* Integrate add wildcard cert for external domains

* Use a different endpoint to get a cert by id

* Add new command to download a certificate

* If there are no pending challenges, try to generate the cert right away

* Remove cert download

* Move DNS table options to an object

* Bugfix: cancel spinner message when finish order fails

* Restore add to work only with cert add

* Refactor obtaining cns

* Add start and finish order commands"
c5ce1837051ae5af4ce8d1996184332796335cd6,Zeke Sikelianos,2018-09-06 18:39:53+00:00,Leo Lamprecht,2018-09-06 18:58:25+00:00,Use consistent wording in usage (#1541)
2cf750b3094474f6dc263a2695fd57ca8cc44f81,Nathan Rajlich,2018-09-06 18:39:09+00:00,Leo Lamprecht,2018-09-06 18:58:21+00:00,"Update `@zeit/dockerignore` to v0.0.3 (#1560)

* Update `@zeit/dockerignore` to v0.0.2

To fix https://github.com/zeit/now-cli/issues/1441.

* Update `@zeit/dockerignore` to v0.0.3"
ac85a4f313f3c7208549de20530cf35d7be79fd3,Jaga Santagostino,2018-09-06 18:47:21+00:00,Leo Lamprecht,2018-09-06 18:47:21+00:00,"Add changelog link when new version is available (#1530)

* add changelog link if new version is available

* Linked directly"
76904d1d131db424fce12aaa3f8b838524ab6b83,Jarmo Isotalo,2018-09-06 18:40:30+00:00,Leo Lamprecht,2018-09-06 18:40:30+00:00,Prefer URL over deployment ID as the ID not shown in `now ls` (#1554)
75759edd26d5c13311e69fbee01bdaf3186262c3,Zeke Sikelianos,2018-09-06 18:39:53+00:00,Leo Lamprecht,2018-09-06 18:39:53+00:00,Use consistent wording in usage (#1541)
2a5dc1dba6341d8dc4b649eaccc55d6d694e82a6,Nathan Rajlich,2018-09-06 18:39:09+00:00,Leo Lamprecht,2018-09-06 18:39:09+00:00,"Update `@zeit/dockerignore` to v0.0.3 (#1560)

* Update `@zeit/dockerignore` to v0.0.2

To fix https://github.com/zeit/now-cli/issues/1441.

* Update `@zeit/dockerignore` to v0.0.3"
0cbf50b7fff8b2414e2a5ecdddbbe0958626e366,Javi Velasco,2018-09-05 16:00:07+00:00,Javi Velasco,2018-09-05 16:00:07+00:00,12.0.0-canary.81
a3f5b805bb10452ff28434615917876d3c77e985,Javi Velasco,2018-09-05 15:58:22+00:00,GitHub,2018-09-05 15:58:22+00:00,"Restructure certs command (#1567)

* Restructure add command

* Remove cert start and finish

* Rename certs add to issue

* Better errors and add cant-solve-challenge

* Show err.sh for dns configuration errors generating certs

* Add err.sh to solve challenges manually

* Add deprecation message to certs add

* Improve grammar

* Minor fixes"
c337877501b319d6c339f5e985efbb3160dacc50,Javi Velasco,2018-09-02 21:24:48+00:00,Javi Velasco,2018-09-02 21:24:48+00:00,12.0.0-canary.80
a6e9dd850a7e5080fc88ace26069ab5464bee36d,Javi Velasco,2018-09-02 21:24:04+00:00,GitHub,2018-09-02 21:24:04+00:00,"Allow to generate certs solving challenges manually (#1566)

* Move getDomainNameservers function

* Don't show an error as unexpected if there is a code in the error payload

* Add start and finish cert order functions

* Integrate add wildcard cert for external domains

* Use a different endpoint to get a cert by id

* Add new command to download a certificate

* If there are no pending challenges, try to generate the cert right away

* Remove cert download

* Move DNS table options to an object

* Bugfix: cancel spinner message when finish order fails

* Restore add to work only with cert add

* Refactor obtaining cns

* Add start and finish order commands"
bb110697a3745da724c0e2ef1fa1a4591268af66,Leo Lamprecht,2018-09-01 11:05:43+00:00,Leo Lamprecht,2018-09-01 11:05:43+00:00,11.4.1
2d2f67168188d46bdbe639e83bcb58f163a4e7d3,Olli Vanhoja,2018-08-29 01:51:52+00:00,Leo Lamprecht,2018-09-01 10:20:06+00:00,"Fix scaling v1 deployments to all DCs (#1556)

```
> Error! An unexpected error occurred in scale: Error: This region (gru1) only accepts Serverless Docker Deployments (400)
```

This is happening because `now-cli` is validating DC names and
expanding ""all"" locally. However not all DCs have same features but
the client can't be aware of that. Instead of making the client
aware of the differing capabilities of the available DCs we should
pass ""all"" as a special DC selector, and let the backend handle
scaling properly."
a14d4057ded4e5865f20d927b48e4c42124922e3,Leo Lamprecht,2018-09-01 10:18:06+00:00,Leo Lamprecht,2018-09-01 10:18:06+00:00,12.0.0-canary.79
210240ce661e56df5e52a5e207fd927a3081eb93,Olli Vanhoja,2018-08-29 01:51:52+00:00,GitHub,2018-08-29 01:51:52+00:00,"Fix scaling v1 deployments to all DCs (#1556)

```
> Error! An unexpected error occurred in scale: Error: This region (gru1) only accepts Serverless Docker Deployments (400)
```

This is happening because `now-cli` is validating DC names and
expanding ""all"" locally. However not all DCs have same features but
the client can't be aware of that. Instead of making the client
aware of the differing capabilities of the available DCs we should
pass ""all"" as a special DC selector, and let the backend handle
scaling properly."
ff7f6c5a19cb2d711f6eae52c3bfbd4f53baf18b,timothyis,2018-08-25 15:30:47+00:00,timothyis,2018-08-25 15:30:47+00:00,11.4.0
e03d036131cdc15a2e4003fcf8f45b40a0d831c7,Timothy,2018-08-25 14:52:16+00:00,timothyis,2018-08-25 15:29:22+00:00,"Add gru1 (#1545)

* Add gru1

* Add gru to errors

* Hard code sfo,bru scale

* Add --regions argument

* Push with console.log

* Scale to `bru`

* Scale down in bru only"
d21f7fe75ca037ac1fe257055167d4499f94e98c,timothyis,2018-08-25 14:52:37+00:00,timothyis,2018-08-25 14:52:37+00:00,12.0.0-canary.78
54805cd2a0ffc9a38e955cf7482e8fd47730a441,Timothy,2018-08-25 14:52:16+00:00,GitHub,2018-08-25 14:52:16+00:00,"Add gru1 (#1545)

* Add gru1

* Add gru to errors

* Hard code sfo,bru scale

* Add --regions argument

* Push with console.log

* Scale to `bru`

* Scale down in bru only"
5bb5f18b7e26447751fa0c1d3c08195925db8bd8,Javi Velasco,2018-08-24 00:42:31+00:00,Javi Velasco,2018-08-24 00:42:31+00:00,11.3.13
33b9c6b03ce2c87845b1cf5c1e4c584f9d673df7,Javi Velasco,2018-08-24 00:40:35+00:00,Javi Velasco,2018-08-24 00:42:00+00:00,Pass domain to verify insted of alias when verifying on alias (#1548)
c7da2e732a027a067bba510b712d61d6879ccc75,Javi Velasco,2018-08-24 00:41:01+00:00,Javi Velasco,2018-08-24 00:41:01+00:00,12.0.0-canary.77
4b4beaa892c8adfab85e8e848585d49dcbce227c,Javi Velasco,2018-08-24 00:40:35+00:00,GitHub,2018-08-24 00:40:35+00:00,Pass domain to verify insted of alias when verifying on alias (#1548)
11e03c331a076d6cf182972c6d18a71c095c5eb1,Javi Velasco,2018-08-20 18:34:44+00:00,Javi Velasco,2018-08-20 18:34:44+00:00,11.3.12
417901d048bc751e6dc691de962717c6a7648282,Javi Velasco,2018-08-20 17:52:29+00:00,Javi Velasco,2018-08-20 18:33:50+00:00,"Return scaling validation errors on alias (#1538)

* Return scaling errors on alias

* Join pattern match error in one expression"
fc7b267ccf8143a4bcde5fe772403be71ea827ec,Javi Velasco,2018-08-20 02:46:55+00:00,Javi Velasco,2018-08-20 18:33:50+00:00,Fix updating scale (#1536)
e13596acaef0f7bc63d645a1a928067b01266787,Javi Velasco,2018-08-20 18:10:08+00:00,Javi Velasco,2018-08-20 18:10:08+00:00,12.0.0-canary.76
8eb065181ffe3c538b815a9e1c9b543a17530c2f,Javi Velasco,2018-08-20 17:52:29+00:00,GitHub,2018-08-20 17:52:29+00:00,"Return scaling validation errors on alias (#1538)

* Return scaling errors on alias

* Join pattern match error in one expression"
1d97219fefb489408cdb002384d81de927fd44f6,Javi Velasco,2018-08-20 03:13:55+00:00,Javi Velasco,2018-08-20 03:13:55+00:00,12.0.0-canary.75
d312f94825853818596b0a3bf58682a755a9ffd7,Javi Velasco,2018-08-20 02:46:55+00:00,GitHub,2018-08-20 02:46:55+00:00,Fix updating scale (#1536)
5c78a80923ea926499e351605336f67c4d954d15,Javi Velasco,2018-08-19 16:27:40+00:00,Javi Velasco,2018-08-19 16:27:40+00:00,11.3.11
8f365cdd6659ae5f1e3a421bcc8f653967769c13,Javi Velasco,2018-08-19 16:21:46+00:00,Javi Velasco,2018-08-19 16:27:10+00:00,Try to verify against domain name instead of alias (#1534)
478a6f73694445ea59afbacf4f3e09ab6b7a80bd,Javi Velasco,2018-08-19 16:22:22+00:00,Javi Velasco,2018-08-19 16:22:22+00:00,12.0.0-canary.74
e309123296513076a03c3ef4e965f463ffbec46e,Javi Velasco,2018-08-19 16:21:46+00:00,GitHub,2018-08-19 16:21:46+00:00,Try to verify against domain name instead of alias (#1534)
bff8c8d549b423c5f4ce0c1471b5bfcc2f011fa4,Leo Lamprecht,2018-08-14 10:30:44+00:00,Leo Lamprecht,2018-08-14 10:30:44+00:00,11.3.10
e189ab86be7a736b96966397c3581822f3c965f6,Arunoda Susiripala,2018-08-13 16:52:58+00:00,Leo Lamprecht,2018-08-13 17:28:16+00:00,"Remove @zeit/schemas (#1507)

We no longer use it inside this repository."
777646cb0e3267056092c370007f3b3c27d19bc3,Leo Lamprecht,2018-08-13 17:23:27+00:00,Leo Lamprecht,2018-08-13 17:23:27+00:00,12.0.0-canary.73
39e23f714429339417744cd539d6d62121bd38a0,Arunoda Susiripala,2018-08-13 16:52:58+00:00,Leo Lamprecht,2018-08-13 16:52:58+00:00,"Remove @zeit/schemas (#1507)

We no longer use it inside this repository."
1563cc9b4f2725d397e4e3f721b71916839cda04,Leo Lamprecht,2018-08-09 10:33:29+00:00,Leo Lamprecht,2018-08-09 10:33:29+00:00,11.3.9
ec09c16e0a0e726417de30b8c88e3ce61987d3f3,Luciano Pellacani Franca,2018-08-07 19:26:05+00:00,Leo Lamprecht,2018-08-09 10:33:21+00:00,fixing typo (#1509)
12d3a2057bc4f4312c3388260cfb85ad8d7254cd,Leo Lamprecht,2018-08-09 10:21:35+00:00,Leo Lamprecht,2018-08-09 10:33:17+00:00,Point Spectrum badge to correct location (#1516)
b68b5c0ea337549acdac5c9f73a0cef50a364c00,Leo Lamprecht,2018-08-09 10:23:10+00:00,Leo Lamprecht,2018-08-09 10:23:10+00:00,12.0.0-canary.72
46dfeb8ca994759303b3b7646ecda8b5b924e68f,Sean,2018-08-09 10:22:23+00:00,Leo Lamprecht,2018-08-09 10:23:05+00:00,"Less cryptic invalid alias message (#1506)

* Less cryptic invalid alias message

* URL -> hostname"
fb7e0b9fb6084b4e99986f7d8a20363c4599b4dc,Sean,2018-08-09 10:22:23+00:00,Leo Lamprecht,2018-08-09 10:22:23+00:00,"Less cryptic invalid alias message (#1506)

* Less cryptic invalid alias message

* URL -> hostname"
6771ad43af7a44a6d29b703e53ade0c7ab0a925b,Leo Lamprecht,2018-08-09 10:21:35+00:00,GitHub,2018-08-09 10:21:35+00:00,Point Spectrum badge to correct location (#1516)
1881b9c6cb13eae6b78a440a938f2bd801e01d41,Luciano Pellacani Franca,2018-08-07 19:26:05+00:00,Timothy,2018-08-07 19:26:05+00:00,fixing typo (#1509)
6d32834716c91dbefb5dda5394bc878415d97020,Pranay Prakash,2018-08-04 03:24:57+00:00,Pranay Prakash,2018-08-04 03:24:57+00:00,11.3.8
5121541af30c7d1113a3c8da700443191a960186,Pranay Prakash,2018-08-04 02:31:23+00:00,Pranay Prakash,2018-08-04 03:24:45+00:00,"Bugfixes and improvements for deployment READY status detection (#1501)

* Have returnify use generators and reinstantiate them upon error

* check for status not_ready instead of 412

* poll every 5s instead of 1s for ready state notification

* poll every 2s for scale verification"
dae6b7a980182e1fa3c2830639a1a2f713c1d30c,Pranay Prakash,2018-08-04 03:08:37+00:00,Pranay Prakash,2018-08-04 03:08:37+00:00,12.0.0-canary.71
aed6209f6a0406c2ccd265f2556bcb1ec3694ed3,Pranay Prakash,2018-08-04 02:31:23+00:00,Nathan Rajlich,2018-08-04 02:31:23+00:00,"Bugfixes and improvements for deployment READY status detection (#1501)

* Have returnify use generators and reinstantiate them upon error

* check for status not_ready instead of 412

* poll every 5s instead of 1s for ready state notification

* poll every 2s for scale verification"
40514cd51cb2ec487e44faa83e2346b9badf0182,Leo Lamprecht,2018-08-03 20:39:19+00:00,Leo Lamprecht,2018-08-03 20:39:19+00:00,11.3.7
b44a590aa037a934bb0499a7df9f225cf79c6174,Leo Lamprecht,2018-08-03 06:16:35+00:00,Leo Lamprecht,2018-08-03 06:16:35+00:00,12.0.0-canary.70
24e302ac062e099fdc2aa2869e90c1939c139573,Olli Vanhoja,2018-08-03 06:12:43+00:00,Leo Lamprecht,2018-08-03 06:14:51+00:00,Show selected session affinity when inspecting a deployment (#1489)
8d3095ecf3f891b68e91ede1f5d63c6f2efef6fd,yairhaimo,2018-08-03 06:11:29+00:00,Leo Lamprecht,2018-08-03 06:14:46+00:00,Include correct help command in `now domains` (#1492)
936b5fc983bcb1a7335d87a056df600d6819c774,Olli Vanhoja,2018-08-03 06:12:43+00:00,Leo Lamprecht,2018-08-03 06:12:43+00:00,Show selected session affinity when inspecting a deployment (#1489)
473d6617f275fac7b14484f319b4d3c1646856e0,yairhaimo,2018-08-03 06:11:29+00:00,Leo Lamprecht,2018-08-03 06:11:29+00:00,Include correct help command in `now domains` (#1492)
563b16e1809996bbad071b5aa74bab1ca22942b8,Leo Lamprecht,2018-08-03 06:03:40+00:00,Leo Lamprecht,2018-08-03 06:03:40+00:00,11.3.6
47a646f5f19678e89d149c816fc2f6c1ab702c30,Pranay Prakash,2018-08-02 08:55:02+00:00,Leo Lamprecht,2018-08-02 08:59:03+00:00,"Retry 412 errors (#1494)

* retry on 412

* add comment for returnify and exit when the iterator ends"
1d2dfcd6869cc1cc53534f54781f7eb6c58fb6d2,Pranay Prakash,2018-08-02 05:56:19+00:00,Leo Lamprecht,2018-08-02 08:58:58+00:00,poll every 5s (#1496)
fcf50b5aebd684cc1dc3ce024a472484bd6f33bc,Leo Lamprecht,2018-08-02 08:55:58+00:00,Leo Lamprecht,2018-08-02 08:55:58+00:00,12.0.0-canary.69
a3835d2e8ade30efaca55b6662ca1cc1b71a260d,Pranay Prakash,2018-08-02 08:55:02+00:00,Leo Lamprecht,2018-08-02 08:55:02+00:00,"Retry 412 errors (#1494)

* retry on 412

* add comment for returnify and exit when the iterator ends"
d89481966efc1c97f15b028f0a4de4bf6c505efd,Pranay Prakash,2018-08-02 05:56:19+00:00,Guillermo Rauch,2018-08-02 05:56:19+00:00,poll every 5s (#1496)
dcb2508a0d41d87f4d9bc2190c107a94a785a6fa,Leo Lamprecht,2018-08-02 05:28:31+00:00,Leo Lamprecht,2018-08-02 05:32:12+00:00,"Better error message for rate limiting deployments (#1495)

* Better error message for rate limiting deployments

* Fixed typo

* Show time until reset

* Removed logging"
3148ce0f319955aaae0e0db414320d6c667746d4,Leo Lamprecht,2018-08-02 05:29:37+00:00,Leo Lamprecht,2018-08-02 05:29:37+00:00,12.0.0-canary.68
f65363856acca0bd282fce673425dbe0521c739b,Leo Lamprecht,2018-08-02 05:28:31+00:00,GitHub,2018-08-02 05:28:31+00:00,"Better error message for rate limiting deployments (#1495)

* Better error message for rate limiting deployments

* Fixed typo

* Show time until reset

* Removed logging"
2bb4c2e467bbe59c508addd85b5872e39d075521,Aria Malkani,2018-08-01 11:49:27+00:00,Leo Lamprecht,2018-08-01 11:57:03+00:00,"Checks if it is an npm deployment before getting the aliased name (#1490)

* checks it is a npm deployment before reading package.json

* checks if you have a config.type first

* checks if you have a config.type first

* fixed logic for config.type"
e205b57352ee2bb156c3ed3d11cff1a82793cb91,Leo Lamprecht,2018-08-01 11:49:54+00:00,Leo Lamprecht,2018-08-01 11:49:54+00:00,12.0.0-canary.67
f44a1dbf21b0994d6cdee989aacfff9d2fa3ebc2,Aria Malkani,2018-08-01 11:49:27+00:00,Leo Lamprecht,2018-08-01 11:49:27+00:00,"Checks if it is an npm deployment before getting the aliased name (#1490)

* checks it is a npm deployment before reading package.json

* checks if you have a config.type first

* checks if you have a config.type first

* fixed logic for config.type"
790a7c577e2f443cd07725d7eb7a0aae39319891,Leo Lamprecht,2018-07-31 08:39:08+00:00,Leo Lamprecht,2018-07-31 08:39:08+00:00,11.3.5
4d29f1a8482aea24103bbb9fb256d8e1af306528,Leo Lamprecht,2018-07-31 08:27:22+00:00,Leo Lamprecht,2018-07-31 08:28:05+00:00,Bumped configuration schemas to the latest version (#1488)
b7fe2f606ceb8f18d943a1e61d1a0c2ab06afd24,Leo Lamprecht,2018-07-31 08:27:36+00:00,Leo Lamprecht,2018-07-31 08:27:36+00:00,12.0.0-canary.66
6e81c1795c09b9aade94b1a99028c6732594f5d0,Leo Lamprecht,2018-07-31 08:27:22+00:00,GitHub,2018-07-31 08:27:22+00:00,Bumped configuration schemas to the latest version (#1488)
1a19e1df42c47a4ac5e8ea3ec6a793e97fc0d08f,Leo Lamprecht,2018-07-31 07:13:21+00:00,Leo Lamprecht,2018-07-31 07:13:21+00:00,11.3.4
be5ba54a3fc9611be92f91f506d5d6172f99de07,Robin Millette,2018-07-30 11:35:34+00:00,Leo Lamprecht,2018-07-30 11:37:32+00:00,"Updated link about authentication file (#1483)

* Fix link to config help

* Update get-default-auth-cfg.js"
4eaa10f10449535061ff358e9e8de00e2414fdde,Robin Millette,2018-07-30 11:34:52+00:00,Leo Lamprecht,2018-07-30 11:37:26+00:00,"Updated link about global configuration file (#1482)

* Fix link to config help

* Update get-default-cfg.js"
141d8e446764c6520f16c2dc6b3dd89b482d5796,Leo Lamprecht,2018-07-30 11:35:55+00:00,Leo Lamprecht,2018-07-30 11:35:55+00:00,12.0.0-canary.65
edbfeab75f8679eca9aea6686e6beb8f9f90f45d,Robin Millette,2018-07-30 11:35:34+00:00,Leo Lamprecht,2018-07-30 11:35:34+00:00,"Updated link about authentication file (#1483)

* Fix link to config help

* Update get-default-auth-cfg.js"
e48ea10ebb964f0e61ca11a2b7fd6fbd2c50f1d1,Robin Millette,2018-07-30 11:34:52+00:00,Leo Lamprecht,2018-07-30 11:34:52+00:00,"Updated link about global configuration file (#1482)

* Fix link to config help

* Update get-default-cfg.js"
600189974527ea5740742ae643b849ee63c9a224,Leo Lamprecht,2018-07-30 11:23:07+00:00,Leo Lamprecht,2018-07-30 11:24:53+00:00,"Added schema for static header configuration (#1486)

* Added schema for static header configuration

* Bumped yet again"
8565af552642658d3cbcf66662333354732f9059,Leo Lamprecht,2018-07-30 11:23:30+00:00,Leo Lamprecht,2018-07-30 11:23:30+00:00,12.0.0-canary.64
511d3bae8fe85dc345dcf110d4200f0d2333dfd8,Leo Lamprecht,2018-07-30 11:23:07+00:00,GitHub,2018-07-30 11:23:07+00:00,"Added schema for static header configuration (#1486)

* Added schema for static header configuration

* Bumped yet again"
87e2339b26801490345c33c1bbee47b96d4cce30,Pranay Prakash,2018-07-29 22:30:48+00:00,Pranay Prakash,2018-07-29 22:30:48+00:00,11.3.3
c1659eae067b245b7d8c0b8742d222cbd4092481,Pranay Prakash,2018-07-29 22:05:34+00:00,Pranay Prakash,2018-07-29 22:29:10+00:00,"Don't downscale previous slot deployment on alias (#1485)

* don't downscale

* use /now/v4/deployments/:id"
8df233fef1675a7f4b829d181327e709e84d8159,Pranay Prakash,2018-07-29 22:07:06+00:00,Pranay Prakash,2018-07-29 22:07:06+00:00,12.0.0-canary.63
4b97410cc01bc35137c970f80ac6c8d01dcf4343,Pranay Prakash,2018-07-29 22:05:34+00:00,GitHub,2018-07-29 22:05:34+00:00,"Don't downscale previous slot deployment on alias (#1485)

* don't downscale

* use /now/v4/deployments/:id"
edc397209c1253c9ffa1fd163bb363751393f196,Leo Lamprecht,2018-07-27 08:20:29+00:00,Leo Lamprecht,2018-07-27 08:20:29+00:00,11.3.2
975def8281d36698288971f585e7967b0bac84da,Leo Lamprecht,2018-07-24 21:48:00+00:00,Leo Lamprecht,2018-07-24 21:50:24+00:00,"Fixed `now billing` and use new API (#1477)

* Use correct source when listing

* Use correct source when buying domains

* Replaced the rest too

* Make adding work nicely

* Make listing work for all scopes

* Don't require address

* Bumped lockfile

* Removed more useless code

* Renamed file

* Fixed weird zlib error

* Fixed output

* Added some tests"
aadf8097d12547bd802a6869132be23090b453a9,Leo Lamprecht,2018-07-24 21:48:57+00:00,Leo Lamprecht,2018-07-24 21:48:57+00:00,12.0.0-canary.62
40d8b74b1b1bb831e2763edad0aa68a1084de4f5,Leo Lamprecht,2018-07-24 21:48:00+00:00,GitHub,2018-07-24 21:48:00+00:00,"Fixed `now billing` and use new API (#1477)

* Use correct source when listing

* Use correct source when buying domains

* Replaced the rest too

* Make adding work nicely

* Make listing work for all scopes

* Don't require address

* Bumped lockfile

* Removed more useless code

* Renamed file

* Fixed weird zlib error

* Fixed output

* Added some tests"
d910135e843d62d66ecbeff2e4c218c905a0f144,Leo Lamprecht,2018-07-22 00:01:19+00:00,Leo Lamprecht,2018-07-22 00:01:19+00:00,11.3.1
186d1e452ac0f79afd88a425554a0f503df574a7,Leo Lamprecht,2018-07-21 23:54:05+00:00,Leo Lamprecht,2018-07-21 23:55:32+00:00,Fixed integration tests (#1476)
8c4d42891c1f5aeb267f76a9358b79dd10730b5b,Leo Lamprecht,2018-07-21 23:54:51+00:00,Leo Lamprecht,2018-07-21 23:54:51+00:00,12.0.0-canary.61
3672374d23a105ad61b85c02762eb073b72ecd14,Leo Lamprecht,2018-07-21 23:54:05+00:00,GitHub,2018-07-21 23:54:05+00:00,Fixed integration tests (#1476)
68820cb76a34dd7762a4012188e3f741c618745a,Leo Lamprecht,2018-07-19 18:00:37+00:00,Leo Lamprecht,2018-07-19 18:00:37+00:00,11.3.0
2c725b0360ca31fbc3cf9a4739f4fd3c45465686,Pranay Prakash,2018-07-18 23:26:07+00:00,Leo Lamprecht,2018-07-19 18:00:17+00:00,"Improvements to the CLI to handle slot specific flows (#1475)

* Handle scale slots error

* generate and send a requestID when verifying instantiation

* Don't compy incompatible scale settings

* deprecate BinaryDeployment

* add err.sh link

* swap cuid for uuid"
cb525d368dbccb0d72de62a5513663fdc7fa57db,Nathan Rajlich,2018-07-19 17:53:52+00:00,Leo Lamprecht,2018-07-19 18:00:04+00:00,"Add `--build-env` to `now deploy` command (#1459)

* Add `--build-env` to `now deploy` command

Build env vars are only visible during build-time, compared to
regular env vars which are only exposed during runtime.

This also removes the client-side validation of the deployment
schema, because it makes it difficult to keep the client and server
in sync, especially as new features are added. Instead `now-cli`
should be responsible for knowing how to render the server's error
message in an informative and future-proof way so that we can
update the server and even older clients would show the validation
error properly.

* Remove `only` dependency

* Add `--build-env` CLI flag integration test"
9ff9d3f1740343e9e2ce469caae0789295481006,Leo Lamprecht,2018-07-19 17:54:19+00:00,Leo Lamprecht,2018-07-19 17:54:19+00:00,12.0.0-canary.60
86540fa7fd7acf1da2f4cee9f7d8a0346dffaf6e,Nathan Rajlich,2018-07-19 17:53:52+00:00,Leo Lamprecht,2018-07-19 17:53:52+00:00,"Add `--build-env` to `now deploy` command (#1459)

* Add `--build-env` to `now deploy` command

Build env vars are only visible during build-time, compared to
regular env vars which are only exposed during runtime.

This also removes the client-side validation of the deployment
schema, because it makes it difficult to keep the client and server
in sync, especially as new features are added. Instead `now-cli`
should be responsible for knowing how to render the server's error
message in an informative and future-proof way so that we can
update the server and even older clients would show the validation
error properly.

* Remove `only` dependency

* Add `--build-env` CLI flag integration test"
1538c80a7df1297c6844053e9be8a2db11d6d1e0,Pranay Prakash,2018-07-18 23:29:18+00:00,Pranay Prakash,2018-07-18 23:29:18+00:00,12.0.0-canary.59
0225fcfe510f32c419a294279541cbdc274d02ff,Pranay Prakash,2018-07-18 23:26:07+00:00,GitHub,2018-07-18 23:26:07+00:00,"Improvements to the CLI to handle slot specific flows (#1475)

* Handle scale slots error

* generate and send a requestID when verifying instantiation

* Don't compy incompatible scale settings

* deprecate BinaryDeployment

* add err.sh link

* swap cuid for uuid"
a62a60b5e624c709997e04201a0273cfd29c1f04,Leo Lamprecht,2018-07-17 07:57:40+00:00,Leo Lamprecht,2018-07-17 07:57:40+00:00,11.2.10
57f3861de6b8575234dddb28fc1c84fda9532849,Leo Lamprecht,2018-07-17 07:50:26+00:00,Leo Lamprecht,2018-07-17 07:50:26+00:00,12.0.0-canary.58
d4382007d6d199bfae54f6b3f6e34987384d9e74,Arunoda Susiripala,2018-07-17 07:47:21+00:00,Leo Lamprecht,2018-07-17 07:50:02+00:00,"Add more integration tests (#1466)

* Add more integration tests related to static builds and env
Here we are adding a few more integration tests for static builds and for using env vars in the build step.

* Add build-env related test case."
d27963dd326df90303ecfe25ab48486574b68f3d,Nathan Rajlich,2018-07-17 07:08:55+00:00,Leo Lamprecht,2018-07-17 07:49:47+00:00,"Remove shallow deployment verification (#1474)

Remove shallow deployment verification"
04c365a25114fadeb548ab39586d331607dc60bc,Arunoda Susiripala,2018-07-17 07:47:21+00:00,Leo Lamprecht,2018-07-17 07:47:21+00:00,"Add more integration tests (#1466)

* Add more integration tests related to static builds and env
Here we are adding a few more integration tests for static builds and for using env vars in the build step.

* Add build-env related test case."
7dfe4690ce6c3dc93317ceae6534fcbc68d0222f,Nathan Rajlich,2018-07-17 07:10:17+00:00,Nathan Rajlich,2018-07-17 07:10:17+00:00,12.0.0-canary.57
92bcf1b7c94a3ba81df9c9f503ba6ce6b72c484f,Nathan Rajlich,2018-07-17 07:08:55+00:00,Pranay Prakash,2018-07-17 07:08:55+00:00,"Remove shallow deployment verification (#1474)

Remove shallow deployment verification"
a8839d1904adf8f82666059a83a4a8920206bfc6,Igor Klopov,2018-07-13 15:26:12+00:00,Igor Klopov,2018-07-16 13:47:09+00:00,retry createDeploy if files are missing. addresses #1463 (#1465)
8a15d5c65a96ca3e8986cb03ee1aa2608b22e2c7,Igor Klopov,2018-07-13 15:26:12+00:00,GitHub,2018-07-13 15:26:12+00:00,retry createDeploy if files are missing. addresses #1463 (#1465)
a7283efe8e7a2a9b31cd5441bec9ac04296504d4,Leo Lamprecht,2018-07-11 13:46:03+00:00,Leo Lamprecht,2018-07-11 13:46:03+00:00,11.2.9
c46e70ba8cae1eaed5dca936f14813901ff4f311,Javi Velasco,2018-07-11 13:37:22+00:00,Leo Lamprecht,2018-07-11 13:38:32+00:00,Control can't solve challenge errors (#1458)
f64374225d67bfc193ad28b83f748163fb3d0941,Leo Lamprecht,2018-07-11 13:37:44+00:00,Leo Lamprecht,2018-07-11 13:37:44+00:00,12.0.0-canary.56
7537eac6a749be3cee35f19bc9e8a9ecaf7b8a48,Javi Velasco,2018-07-11 13:37:22+00:00,Leo Lamprecht,2018-07-11 13:37:22+00:00,Control can't solve challenge errors (#1458)
72e0ec6af7bf4552f7b46ab8b956345d4dd9aa41,Javi Velasco,2018-07-10 17:27:42+00:00,Leo Lamprecht,2018-07-10 17:29:49+00:00,"Check domain after adding (#1455)

* Check domain info after adding it

* Add message spiner to show while adding a domain"
e2880d2434f788077c4016d0a1e01fe377c552d8,Leo Lamprecht,2018-07-10 17:28:01+00:00,Leo Lamprecht,2018-07-10 17:28:01+00:00,12.0.0-canary.55
8296de16ef609479ddb40f77b09d520d6067d998,Javi Velasco,2018-07-10 17:27:42+00:00,Leo Lamprecht,2018-07-10 17:27:42+00:00,"Check domain after adding (#1455)

* Check domain info after adding it

* Add message spiner to show while adding a domain"
8873c3fe28e93b49cde3fa6a8934494302993e24,Leo Lamprecht,2018-07-10 10:35:37+00:00,GitHub,2018-07-10 10:35:37+00:00,Brought stable dependencies in sync with canary (#1453)
8c4d54e50b3211fc1b5cd5042aab85f5803aacbb,Javi Velasco,2018-07-10 10:13:45+00:00,Leo Lamprecht,2018-07-10 10:26:35+00:00,"Refactor DNS and update domains with CDN improvements (#1438)

* Do not allow adding domains with subdomains

* Do not ask for confirmation when the domain exists

* Improve message when the domain is under a different account

* Fix flow errors

* Revamp domains add command

* Remove setting dns records when setting up the domain

* Refactor DNS commands

* Hide fields in system dns records and show creator

* Better formatting for dns ls

* Remove exhaustive check of dns record type

* Remove domain ids from responses in domain commands

* Change all `domains` API references to use `v3`

* Update to domains API v3

* Remove NeedUpgrade error and use CDNNeedsUpgrade where it proceeds

* Update copies when adding domains

* Remove extra blank line

* Fix flow errors"
be926ae4911957a3edba697aee2001e751f3939a,Nathan Rajlich,2018-07-10 09:43:00+00:00,Leo Lamprecht,2018-07-10 10:26:30+00:00,"Remove legacy `atlas` logic (#1451)

* Remove legacy `atlas` logic

No longer used for anything.

* Remove another `atlas`"
6547bb709ed1104ea80d9bf281529fe10f455921,Javi Velasco,2018-07-10 09:42:37+00:00,Leo Lamprecht,2018-07-10 10:26:27+00:00,"Dont try to generate always wildcard certs when aliasing (#1445)

* Change params order in createAlias

* Make setupDomain return domainInfo

* Do not try to get a wildcard cert for alias when domain is external

* Update setup-domain.js"
c9e88b6ca41b6c1187754fbc77f48b23c338c77f,Javi Velasco,2018-07-10 09:41:28+00:00,Leo Lamprecht,2018-07-10 10:26:22+00:00,Add retryAfter info to rate limit errors (#1442)
a94136c3a7a02e1561d90773114fdac29afb0845,Nathan Rajlich,2018-07-10 08:11:10+00:00,Leo Lamprecht,2018-07-10 10:26:17+00:00,"Wait for static builds to be ready and show logs (#1452)

Implicitly sets the `noVerify` option since there is nothing to verify."
5cff5e9dfd8ec8df45d1e578d2f9d4eaf037d7ea,Leo Lamprecht,2018-07-10 10:16:13+00:00,Leo Lamprecht,2018-07-10 10:16:13+00:00,12.0.0-canary.54
cb07a748c29e456614689e4b7be8ef02b1dcb9a4,Javi Velasco,2018-07-10 10:13:45+00:00,Leo Lamprecht,2018-07-10 10:13:45+00:00,"Refactor DNS and update domains with CDN improvements (#1438)

* Do not allow adding domains with subdomains

* Do not ask for confirmation when the domain exists

* Improve message when the domain is under a different account

* Fix flow errors

* Revamp domains add command

* Remove setting dns records when setting up the domain

* Refactor DNS commands

* Hide fields in system dns records and show creator

* Better formatting for dns ls

* Remove exhaustive check of dns record type

* Remove domain ids from responses in domain commands

* Change all `domains` API references to use `v3`

* Update to domains API v3

* Remove NeedUpgrade error and use CDNNeedsUpgrade where it proceeds

* Update copies when adding domains

* Remove extra blank line

* Fix flow errors"
c7b985bdc67d3e8229699c4e4ffa043855f4c91c,Nathan Rajlich,2018-07-10 09:43:00+00:00,Leo Lamprecht,2018-07-10 09:43:00+00:00,"Remove legacy `atlas` logic (#1451)

* Remove legacy `atlas` logic

No longer used for anything.

* Remove another `atlas`"
bf32ca0e4a031203c076e78d5506e202707b027a,Javi Velasco,2018-07-10 09:42:37+00:00,Leo Lamprecht,2018-07-10 09:42:37+00:00,"Dont try to generate always wildcard certs when aliasing (#1445)

* Change params order in createAlias

* Make setupDomain return domainInfo

* Do not try to get a wildcard cert for alias when domain is external

* Update setup-domain.js"
a4e52de0e3ff2247db872fc9110fc1ef65a413f8,Javi Velasco,2018-07-10 09:41:28+00:00,Leo Lamprecht,2018-07-10 09:41:28+00:00,Add retryAfter info to rate limit errors (#1442)
e43e9b11a06ca652d0b208b0412d2c4a651e3e37,Nathan Rajlich,2018-07-10 08:11:10+00:00,GitHub,2018-07-10 08:11:10+00:00,"Wait for static builds to be ready and show logs (#1452)

Implicitly sets the `noVerify` option since there is nothing to verify."
3672f3e925f60fc440b901f87a8e5a917bb116c7,Javi Velasco,2018-07-09 11:11:43+00:00,Javi Velasco,2018-07-09 11:11:43+00:00,11.2.8
9ccea637ab9906f797b65d0d3fb733b4070cfaf2,Javi Velasco,2018-07-09 10:53:11+00:00,Javi Velasco,2018-07-09 11:07:09+00:00,Fix typo when checking NS during setup domain (#1450)
847b9e97c4c04949a4c5d7495e2a81eb5c033bac,Javi Velasco,2018-07-09 11:05:01+00:00,Javi Velasco,2018-07-09 11:05:01+00:00,12.0.0-canary.53
baad6892861361cb8dd6ac72bf597fe34f9969e2,Javi Velasco,2018-07-09 10:53:11+00:00,Leo Lamprecht,2018-07-09 10:53:11+00:00,Fix typo when checking NS during setup domain (#1450)
8b2efb636730781e03bec8c75b6df069b06d12e1,Arunoda Susiripala,2018-07-09 04:39:32+00:00,Arunoda Susiripala,2018-07-09 04:39:32+00:00,11.2.7
5e7afc4385c7164ef438363d86463ea2e32dc36c,Arunoda Susiripala,2018-07-09 04:10:37+00:00,Arunoda Susiripala,2018-07-09 04:10:37+00:00,12.0.0-canary.52
a5e3f0d65aa9621c5ac72d3daef87e8ddb117680,Matheus Fernandes,2018-07-09 03:48:55+00:00,Matheus Fernandes,2018-07-09 03:49:20+00:00,"Revert ""Upgrade to webpack 4 and latest Babel"" (#1448)

* Revert ""12.0.0-canary.51""

This reverts commit 5e17fe5ad66d819bfb1762382eb32c35038fe113.

* Revert ""Update `@zeit/schemas` to v1.6.0""

This reverts commit b216adadc0591808ca3ab4a5c5db62dae03300e7.

* Revert ""Upload the Dockerfile if it's a static deployment. (#1437)""

This reverts commit 5078c95667926fa416ad80273cd2fba0e60949fe.

* Revert ""Upgrade to webpack 4 and latest Babel (#1436)""

This reverts commit 7612d776477ab0e6853ef2a30ddc3cb001d12c63."
d724b7a6315428996f3bf72d7367b1875f089a38,Matheus Fernandes,2018-07-09 03:48:55+00:00,GitHub,2018-07-09 03:48:55+00:00,"Revert ""Upgrade to webpack 4 and latest Babel"" (#1448)

* Revert ""12.0.0-canary.51""

This reverts commit 5e17fe5ad66d819bfb1762382eb32c35038fe113.

* Revert ""Update `@zeit/schemas` to v1.6.0""

This reverts commit b216adadc0591808ca3ab4a5c5db62dae03300e7.

* Revert ""Upload the Dockerfile if it's a static deployment. (#1437)""

This reverts commit 5078c95667926fa416ad80273cd2fba0e60949fe.

* Revert ""Upgrade to webpack 4 and latest Babel (#1436)""

This reverts commit 7612d776477ab0e6853ef2a30ddc3cb001d12c63."
cd5ca57ca331ba28a4991db61a8cf4515e13ca92,Leo Lamprecht,2018-07-06 08:20:57+00:00,Leo Lamprecht,2018-07-06 08:20:57+00:00,11.2.6
fd59680b8ed98f26204196649c4ce3d2b32ee3b6,Nathan Rajlich,2018-07-06 00:39:38+00:00,Leo Lamprecht,2018-07-06 08:20:09+00:00,Update `@zeit/schemas` to v1.6.0
24a1561ddcb1c2cb2784ed4a0573f49cc3dc01e5,Arunoda Susiripala,2018-07-05 17:02:19+00:00,Leo Lamprecht,2018-07-06 08:20:01+00:00,"Upload the Dockerfile if it's a static deployment. (#1437)

* Upload the Dockerfile if it's a static deployment.
This allows us to build the Dockerfile and upload static assets

* Allow to upload package.json as well for static deployments."
64ae48dc93b7f02f9ae51b7e7d5c030764f216a6,Javi Velasco,2018-07-04 16:51:16+00:00,Leo Lamprecht,2018-07-06 08:19:55+00:00,"Upgrade to webpack 4 and latest Babel (#1436)

* Upgrade to webpack 4 and last latest

* Fix building commands

* Do not call yarn build when yarn link

* Use resolved paths in webpack config"
5e17fe5ad66d819bfb1762382eb32c35038fe113,Nathan Rajlich,2018-07-06 00:52:14+00:00,Nathan Rajlich,2018-07-06 00:52:14+00:00,12.0.0-canary.51
b216adadc0591808ca3ab4a5c5db62dae03300e7,Nathan Rajlich,2018-07-06 00:39:38+00:00,Nathan Rajlich,2018-07-06 00:39:38+00:00,Update `@zeit/schemas` to v1.6.0
5078c95667926fa416ad80273cd2fba0e60949fe,Arunoda Susiripala,2018-07-05 17:02:19+00:00,GitHub,2018-07-05 17:02:19+00:00,"Upload the Dockerfile if it's a static deployment. (#1437)

* Upload the Dockerfile if it's a static deployment.
This allows us to build the Dockerfile and upload static assets

* Allow to upload package.json as well for static deployments."
7612d776477ab0e6853ef2a30ddc3cb001d12c63,Javi Velasco,2018-07-04 16:51:16+00:00,GitHub,2018-07-04 16:51:16+00:00,"Upgrade to webpack 4 and latest Babel (#1436)

* Upgrade to webpack 4 and last latest

* Fix building commands

* Do not call yarn build when yarn link

* Use resolved paths in webpack config"
09b366b273dc1506741796c40a4475fe710e07a2,Javi Velasco,2018-07-03 19:18:54+00:00,Leo Lamprecht,2018-07-03 19:23:57+00:00,"Allow to deploy and alias when non essential APIs are down (#1435)

* Try to purchase a domain only when there is no other choice

* Allow eventsStream to fail during deployment

* Allow to verify instantiation without events API"
0d76041c10e3e28e097f8cb0e1a037debaa7dafa,Leo Lamprecht,2018-07-03 19:20:17+00:00,Leo Lamprecht,2018-07-03 19:20:17+00:00,12.0.0-canary.50
59be596d245e6e9debc93d2d0f12c29a63e9b50c,Javi Velasco,2018-07-03 19:18:54+00:00,Guillermo Rauch,2018-07-03 19:18:54+00:00,"Allow to deploy and alias when non essential APIs are down (#1435)

* Try to purchase a domain only when there is no other choice

* Allow eventsStream to fail during deployment

* Allow to verify instantiation without events API"
cfee3bfff494a1ece971260cb7d3bfbb35fb3f7a,Leo Lamprecht,2018-07-02 09:46:55+00:00,Leo Lamprecht,2018-07-02 09:46:55+00:00,11.2.5
fca499925c54b84cee6496591dbd594777bf4664,Leo Lamprecht,2018-07-02 09:30:44+00:00,Leo Lamprecht,2018-07-02 09:31:50+00:00,"Fixed the tests (#1430)

* Fixed the tests

* Wrapped up"
63e51a3c98f0b86c008f8b24ba44cb323dc83fb8,Leo Lamprecht,2018-07-02 09:31:15+00:00,Leo Lamprecht,2018-07-02 09:31:15+00:00,12.0.0-canary.49
7f3128b3e59f8cd49ddff61b61b574617d8a075e,Leo Lamprecht,2018-07-02 09:30:44+00:00,GitHub,2018-07-02 09:30:44+00:00,"Fixed the tests (#1430)

* Fixed the tests

* Wrapped up"
d379ce1011946b57b057ead5e723796f422f5edb,Javi Velasco,2018-06-22 06:04:40+00:00,Leo Lamprecht,2018-06-22 19:51:06+00:00,"Small fixes (#1418)

* Remove FlowFixMe in deploy command

* Show success message when creating a cert for alias based on response cns"
c235813ae79f70e9c7c8124c4c33b115a5fe9e89,Leo Lamprecht,2018-06-22 19:50:33+00:00,Leo Lamprecht,2018-06-22 19:50:33+00:00,12.0.0-canary.48
3ee18e70511d839f9f5ed2da86100ac50f272c08,Javi Velasco,2018-06-22 06:04:40+00:00,Nathan Rajlich,2018-06-22 06:04:40+00:00,"Small fixes (#1418)

* Remove FlowFixMe in deploy command

* Show success message when creating a cert for alias based on response cns"
cb87e8f21cbeaeae96a6dc9a0508ef42ee48a04d,Leo Lamprecht,2018-06-21 10:53:12+00:00,Leo Lamprecht,2018-06-21 11:00:17+00:00," Improved error message for schema validation (#1416)

* Bumped schema

* Improved error message for schema validation"
14fc5d87962e42db23cc802a4bdaa9f0c42d03a5,Leo Lamprecht,2018-06-21 10:53:44+00:00,Leo Lamprecht,2018-06-21 10:53:44+00:00,12.0.0-canary.47
9fb0077385ca58d7f3192aeb01063e18bd94cb48,Leo Lamprecht,2018-06-21 10:53:12+00:00,GitHub,2018-06-21 10:53:12+00:00," Improved error message for schema validation (#1416)

* Bumped schema

* Improved error message for schema validation"
d4c90da151f8a1af50d23c49527aeb73706d5b9a,Javi Velasco,2018-06-19 15:12:55+00:00,Leo Lamprecht,2018-06-20 20:24:46+00:00,"Allow to enable and disable CDN for domains and refactor domains (#1413)

* Move domains command to its own folder

* Refactor domains commands

* Add cdn to domain ls

* Add function to patch domains

* Support toggling cdnEnabled

* Better messages

* Add new cdn options to help command in domains"
722c0a8bc27d6988b651c75fc59c09adcadc83cd,Javi Velasco,2018-06-15 10:04:10+00:00,Leo Lamprecht,2018-06-20 20:24:41+00:00,"Deeply nested wildcard certs (#1407)

* Better error when we can't verify a domain during alias

* Remove preferDNS option from CLI and allow wildcard certs for deeply nested"
55585204b38884a9eb853cbff1ffda1de9cdafc5,Pranay Prakash,2018-06-14 03:21:39+00:00,Leo Lamprecht,2018-06-20 20:24:35+00:00,"Improve the progress bar during upload (#1406)

* use push instead of read

* don't auto-clear

* single progress bar that hangs till last chink

* print symmary beofre link

* print smmary faster

* print more discreet timestamps

* fix tests

* fix flow error"
2e9c7265b60c347def5397ec8c4fa9b34e6341cf,Javi Velasco,2018-06-19 15:13:48+00:00,Javi Velasco,2018-06-19 15:13:48+00:00,12.0.0-canary.46
d9e77b784ac3b442214e3df8d008549fe63b741d,Javi Velasco,2018-06-19 15:12:55+00:00,GitHub,2018-06-19 15:12:55+00:00,"Allow to enable and disable CDN for domains and refactor domains (#1413)

* Move domains command to its own folder

* Refactor domains commands

* Add cdn to domain ls

* Add function to patch domains

* Support toggling cdnEnabled

* Better messages

* Add new cdn options to help command in domains"
b5b296ad7ffc4c2345eb43f60cec63c6119884f3,Javi Velasco,2018-06-15 15:35:53+00:00,Javi Velasco,2018-06-15 15:35:53+00:00,12.0.0-canary.45
acdfde5aa2e2c3de4208bce92d031877bbe2f2d3,Javi Velasco,2018-06-15 10:04:10+00:00,Leo Lamprecht,2018-06-15 10:04:10+00:00,"Deeply nested wildcard certs (#1407)

* Better error when we can't verify a domain during alias

* Remove preferDNS option from CLI and allow wildcard certs for deeply nested"
0eddfbd28cdd684b6ec2790a3ba9e0d678610b1e,Pranay Prakash,2018-06-14 03:21:39+00:00,Guillermo Rauch,2018-06-14 03:21:39+00:00,"Improve the progress bar during upload (#1406)

* use push instead of read

* don't auto-clear

* single progress bar that hangs till last chink

* print symmary beofre link

* print smmary faster

* print more discreet timestamps

* fix tests

* fix flow error"
4156f465da1b9044107c05c53b1adab914f93265,Javi Velasco,2018-06-13 18:56:38+00:00,Javi Velasco,2018-06-13 18:56:38+00:00,11.2.4
90905d598b75ee75f758b5b8f93922abffd233f3,Javi Velasco,2018-06-13 13:38:47+00:00,Javi Velasco,2018-06-13 18:56:10+00:00,"Request normal cert for deeply nested alias (#1404)

* Request normal cert for deeply nested alias

* When is a deeply nested domain request a normal cert"
037f0610bca5a5684a7d68ffc6ae96eaf544dc63,Javi Velasco,2018-06-13 13:39:27+00:00,Javi Velasco,2018-06-13 13:39:27+00:00,12.0.0-canary.44
dd45f8f2abbc0d04876c69f20c48498e865aaf9b,Javi Velasco,2018-06-13 13:38:47+00:00,GitHub,2018-06-13 13:38:47+00:00,"Request normal cert for deeply nested alias (#1404)

* Request normal cert for deeply nested alias

* When is a deeply nested domain request a normal cert"
0e3f2413896ddded7a255d71660a39c9dacbcc97,Leo Lamprecht,2018-06-11 12:52:53+00:00,Leo Lamprecht,2018-06-11 12:52:53+00:00,11.2.3
83abedf81195d4f909515f2abcce74cdc2f42104,Felix Yan,2018-06-08 19:20:57+00:00,Leo Lamprecht,2018-06-11 08:41:46+00:00,Fix a typo in unique-strings.js (#1400)
94128271ed932915784e1e0ddc476b4c3f240154,Igor Klopov,2018-06-08 11:31:36+00:00,Leo Lamprecht,2018-06-11 08:41:39+00:00,test-integration: test deployment logs output (#1398)
d454c84f61eb082af94d7f4033900685c0d5ae3f,Leo Lamprecht,2018-06-11 08:40:32+00:00,Leo Lamprecht,2018-06-11 08:40:32+00:00,12.0.0-canary.43
a4c98e07a57fcf1e57f6815c87a2d61f7b830776,Felix Yan,2018-06-08 19:20:57+00:00,Pranay Prakash,2018-06-08 19:20:57+00:00,Fix a typo in unique-strings.js (#1400)
85715630bd17ea92bcd8659481b620d2903dd80f,Igor Klopov,2018-06-08 11:31:36+00:00,Pranay Prakash,2018-06-08 11:31:36+00:00,test-integration: test deployment logs output (#1398)
759442edacda8561bc5d7acebc3bfbe765530705,Nathan Rajlich,2018-06-07 21:45:27+00:00,Leo Lamprecht,2018-06-08 08:32:08+00:00,Fix shallow verify (#1397)
45d8d4a84fdb3135ec0dcc97242b7a224c23c99a,Nathan Rajlich,2018-06-07 21:48:16+00:00,Nathan Rajlich,2018-06-07 21:48:16+00:00,12.0.0-canary.42
690882c97a145cc239236edcd23f2b01993b803f,Nathan Rajlich,2018-06-07 21:45:27+00:00,GitHub,2018-06-07 21:45:27+00:00,Fix shallow verify (#1397)
38c90e29ade4e4984e9303490975b0b362803158,Javi Velasco,2018-06-07 08:52:24+00:00,Leo Lamprecht,2018-06-07 09:21:48+00:00,Ensure there is scale rules before trying to apply (#1389)
83a853054cca33ccf0bdeaf3d8a8f8663271bc4c,Javi Velasco,2018-06-07 08:50:49+00:00,Leo Lamprecht,2018-06-07 09:21:42+00:00,Fixed unexpected error while aliasing (#1387)
eb51f69c8a544e64321c5ab5e371a46ea203ee91,Nathan Rajlich,2018-06-06 20:08:19+00:00,Leo Lamprecht,2018-06-07 09:21:35+00:00,"Add shallow deployment verification (#1367)

* Add shallow deployment verification

* Add Flow type for `now.retry()`

* Add 3 fetch retries to shallow verify

* Use generics

* Collapse

* Fix

* Add `X-Now-Shallow` verification"
835679cd0cace581a16db40f0b25a057f879c7f7,Leo Lamprecht,2018-06-07 09:19:13+00:00,Leo Lamprecht,2018-06-07 09:19:13+00:00,11.2.2
76bff85b7f2a07b2b8be1c285dc72d7f42b6b9e1,Leo Lamprecht,2018-06-07 08:59:51+00:00,Leo Lamprecht,2018-06-07 09:03:20+00:00,Updated configuration schema (#1394)
e03836e4a1670413166b4b97dc05af7cff4b2dc5,Leo Lamprecht,2018-06-07 09:00:32+00:00,Leo Lamprecht,2018-06-07 09:00:32+00:00,12.0.0-canary.41
d4ec54135af4e36e2ea081026b632fea99a2df8a,Leo Lamprecht,2018-06-07 08:59:51+00:00,GitHub,2018-06-07 08:59:51+00:00,Updated configuration schema (#1394)
b29785d851c8e1531bf841ffd88e698390689700,Javi Velasco,2018-06-07 08:52:24+00:00,Leo Lamprecht,2018-06-07 08:52:24+00:00,Ensure there is scale rules before trying to apply (#1389)
148870d706be67ad24c5db4bba388b8c835e4736,Javi Velasco,2018-06-07 08:50:49+00:00,Leo Lamprecht,2018-06-07 08:50:49+00:00,Fixed unexpected error while aliasing (#1387)
ed1f7e335d1ba2e8ce6150d12e9573584f953666,Nathan Rajlich,2018-06-06 20:08:19+00:00,GitHub,2018-06-06 20:08:19+00:00,"Add shallow deployment verification (#1367)

* Add shallow deployment verification

* Add Flow type for `now.retry()`

* Add 3 fetch retries to shallow verify

* Use generics

* Collapse

* Fix

* Add `X-Now-Shallow` verification"
861a1934463a0572b3105082acbbdb4554ec61df,Matheus Fernandes,2018-06-01 23:00:51+00:00,Matheus Fernandes,2018-06-01 23:00:51+00:00,11.2.1
a4935c33b4c17b13c4af66b015a3dda9edbc6182,Igor Klopov,2018-06-01 22:27:47+00:00,Matheus Fernandes,2018-06-01 23:00:42+00:00,reuse getSafeAlias function for all callers of findAliasByAliasOrId (#1385)
eaf4695194c5f03b4e72327904eac19c1a6a4770,Matheus Fernandes,2018-06-01 22:59:43+00:00,Matheus Fernandes,2018-06-01 22:59:43+00:00,12.0.0-canary.40
c312d42302d69c3c75449195f19df45793e8139e,Igor Klopov,2018-06-01 22:27:47+00:00,GitHub,2018-06-01 22:27:47+00:00,reuse getSafeAlias function for all callers of findAliasByAliasOrId (#1385)
aa3919f8706ec3a6b38b2015c5da8207f1aae92d,Leo Lamprecht,2018-06-01 08:21:05+00:00,Leo Lamprecht,2018-06-01 08:21:05+00:00,11.2.0
0e18114d6de2450e174e5d195d5db8227c5a8006,Javi Velasco,2018-05-29 14:58:24+00:00,Leo Lamprecht,2018-05-29 18:16:11+00:00,"Support for Custom Deployment Suffix (#1378)

* Allow to fallback to passed body parsing a response error

* Extract domain purchase from setup-domain

* Move getCertRequestSettings

* Add create method to Now interface

* Extract print dns table and zeit world table functions

* Add support to generate certificates during deploy

* Point to v5 in deploy endpoint

* Add feedback messages when creating a cert during deployment

* Remove hardcoded references to now.sh

* Dont bump create endpoint version

* Support empty reponses in fetch"
0e5a300a140f87a8067026d0bb88d0e577910fee,Leo Lamprecht,2018-05-29 18:13:32+00:00,Leo Lamprecht,2018-05-29 18:13:32+00:00,11.1.16
95a68395b97724f094a204399509ccbad3c4f8ba,Leo Lamprecht,2018-05-29 18:06:57+00:00,Leo Lamprecht,2018-05-29 18:10:37+00:00,Bumped configuration schemas to the latest version (#1379)
a8a2a6c0661ec2be252fc00c2da59c4b6533a05c,Leo Lamprecht,2018-05-29 18:07:19+00:00,Leo Lamprecht,2018-05-29 18:07:19+00:00,12.0.0-canary.39
8b3512cb072330c140daf6d0c1b4d511902640e1,Leo Lamprecht,2018-05-29 18:06:57+00:00,GitHub,2018-05-29 18:06:57+00:00,Bumped configuration schemas to the latest version (#1379)
945facdd2cc1d1d5ac5cce3065e681f2972a87ba,Leo Lamprecht,2018-05-29 16:36:15+00:00,Leo Lamprecht,2018-05-29 16:36:15+00:00,12.0.0-canary.38
8676ed4cff9c28583cef4e10356eec13c144a96f,Javi Velasco,2018-05-29 14:58:24+00:00,Guillermo Rauch,2018-05-29 14:58:24+00:00,"Support for Custom Deployment Suffix (#1378)

* Allow to fallback to passed body parsing a response error

* Extract domain purchase from setup-domain

* Move getCertRequestSettings

* Add create method to Now interface

* Extract print dns table and zeit world table functions

* Add support to generate certificates during deploy

* Point to v5 in deploy endpoint

* Add feedback messages when creating a cert during deployment

* Remove hardcoded references to now.sh

* Dont bump create endpoint version

* Support empty reponses in fetch"
6d7917c879e587bdd4307561cf1645ce0c017ac6,Leo Lamprecht,2018-05-28 11:21:52+00:00,Leo Lamprecht,2018-05-28 11:21:52+00:00,11.1.15
686b9aa92f3a9a09469c7897bd85c5abccb33907,Leo Lamprecht,2018-05-28 11:15:58+00:00,Leo Lamprecht,2018-05-28 11:17:11+00:00,Bumped configuration schemas to the latest version (#1374)
381d5993e6fc8d564bfc8f1a23e4e2e25359aa4a,Pranay Prakash,2018-05-26 16:51:56+00:00,Leo Lamprecht,2018-05-28 11:16:54+00:00,add @zeit/dockerignore (#1373)
e4d4afa8408a3a056e2c1d109b8cf284d991d1bc,Leo Lamprecht,2018-05-28 11:16:13+00:00,Leo Lamprecht,2018-05-28 11:16:13+00:00,12.0.0-canary.37
81cf286ea4131ac818f390cb8a96ece304ac4de5,Leo Lamprecht,2018-05-28 11:15:58+00:00,GitHub,2018-05-28 11:15:58+00:00,Bumped configuration schemas to the latest version (#1374)
e834625728ecb346d2789a473d55918afaae4b15,Leo Lamprecht,2018-05-28 07:07:30+00:00,Leo Lamprecht,2018-05-28 07:07:30+00:00,12.0.0-canary.36
a7c22eb08c44b8e813b8f7bf939c4106c391adbd,Pranay Prakash,2018-05-26 16:51:56+00:00,Guillermo Rauch,2018-05-26 16:51:56+00:00,add @zeit/dockerignore (#1373)
8475cde41b7c9e2267ccba5d9bfdb8fd0b31905e,Leo Lamprecht,2018-05-25 18:54:27+00:00,Leo Lamprecht,2018-05-25 18:59:05+00:00,Updated configuration schemas to the latest version (#1372)
837c3583719189b9576f6fc7d0f1cdaf8f5be001,Leo Lamprecht,2018-05-25 18:58:30+00:00,Leo Lamprecht,2018-05-25 18:58:30+00:00,12.0.0-canary.35
9743db27e71a78ce6a7387699251e79095d2abfb,Leo Lamprecht,2018-05-25 18:54:27+00:00,Nathan Rajlich,2018-05-25 18:54:27+00:00,Updated configuration schemas to the latest version (#1372)
e82c550da86e5a20b83692fe07e0ebfd17b3453b,Leo Lamprecht,2018-05-25 08:37:00+00:00,Leo Lamprecht,2018-05-25 08:37:00+00:00,11.1.14
baa14047719e275adce827c1a23dc862672047a5,Pranay Prakash,2018-05-21 23:40:24+00:00,Leo Lamprecht,2018-05-24 20:17:30+00:00,"Make the progress bar for uploads consider bytes, not number of files (#1335)

* use got and propogate uploadProgress

* Accept comma separated cns (#1336)

* use got and propogate uploadProgress

* hook into stream.read

* revert `got` stuff

* remove stray whitespace"
9beb114ae5ebc0a94620ba51a0a2802164118cd2,Pranay Prakash,2018-05-21 23:39:40+00:00,Leo Lamprecht,2018-05-24 20:17:25+00:00,fix clipboard arg parsing (#1358)
1162463777c9137cc5d7674959a213ed4b53b367,Timothy,2018-05-21 23:39:22+00:00,Leo Lamprecht,2018-05-24 20:17:19+00:00,Fix error message via #1350 (#1361)
33356b3240a39dd345706677ba56b11299e561c6,Pranay Prakash,2018-05-21 23:39:06+00:00,Leo Lamprecht,2018-05-24 20:17:15+00:00,"Strip quotes from Dockerfile labels (#1351)

* Strip quotes from Dockerfile labels

* remove console.log

* add test

* issue normal cert for nested subdomain (#1344)

* Prefer HTTP challenge for regular certs

* 12.0.0-canary.31

* Update non-existing team test

* 12.0.0-canary.32

* Bumped `update-check` to the latest version (#1354)

* 12.0.0-canary.33

* Strip quotes from Dockerfile labels

* remove console.log

* add test"
3b3faa21a1b52afb6318faa6e21144401a068dee,Leo Lamprecht,2018-05-23 18:49:53+00:00,Leo Lamprecht,2018-05-23 18:49:53+00:00,11.1.13
776d89b70a0070f40a74c46ee7815804029e8edb,Tim Neutkens,2018-05-22 15:31:25+00:00,Leo Lamprecht,2018-05-23 18:49:43+00:00,"Make sure subdomain is correctly typed / checked (#1364)

Fixes an error introduced in #1344 when running `now alias` on a naked domain like `example.com`."
ce725143e6cfc0b7e6ec7931ad2c07f1c53fac14,Tim Neutkens,2018-05-22 15:32:26+00:00,Tim Neutkens,2018-05-22 15:32:26+00:00,12.0.0-canary.34
677805c33af47dcdb56b94ec8f2ae429ced5c1bd,Tim Neutkens,2018-05-22 15:31:25+00:00,GitHub,2018-05-22 15:31:25+00:00,"Make sure subdomain is correctly typed / checked (#1364)

Fixes an error introduced in #1344 when running `now alias` on a naked domain like `example.com`."
3d3f1fe39b92faef16ea8331356d4774f96d114b,Pranay Prakash,2018-05-21 23:40:24+00:00,Guillermo Rauch,2018-05-21 23:40:24+00:00,"Make the progress bar for uploads consider bytes, not number of files (#1335)

* use got and propogate uploadProgress

* Accept comma separated cns (#1336)

* use got and propogate uploadProgress

* hook into stream.read

* revert `got` stuff

* remove stray whitespace"
123c68ad2b7dab11bbeb1490045719f49ee43537,Pranay Prakash,2018-05-21 23:39:40+00:00,Guillermo Rauch,2018-05-21 23:39:40+00:00,fix clipboard arg parsing (#1358)
86861c58af553986f298bb9e5195b1c475307cbc,Timothy,2018-05-21 23:39:22+00:00,Guillermo Rauch,2018-05-21 23:39:22+00:00,Fix error message via #1350 (#1361)
d4ddb6b3f9196113c76c667fadeeba947e83e929,Pranay Prakash,2018-05-21 23:39:06+00:00,Guillermo Rauch,2018-05-21 23:39:06+00:00,"Strip quotes from Dockerfile labels (#1351)

* Strip quotes from Dockerfile labels

* remove console.log

* add test

* issue normal cert for nested subdomain (#1344)

* Prefer HTTP challenge for regular certs

* 12.0.0-canary.31

* Update non-existing team test

* 12.0.0-canary.32

* Bumped `update-check` to the latest version (#1354)

* 12.0.0-canary.33

* Strip quotes from Dockerfile labels

* remove console.log

* add test"
afc2b0380a1db8e7d194c2d64e9380d2646ec888,Leo Lamprecht,2018-05-18 12:18:34+00:00,Leo Lamprecht,2018-05-18 12:18:34+00:00,11.1.12
e4ba6040cc017a3d2ae83e1f258080f944c04038,Leo Lamprecht,2018-05-18 12:06:18+00:00,Leo Lamprecht,2018-05-18 12:08:02+00:00,Bumped `update-check` to the latest version (#1354)
0fc7de40d4300d478a295df84f495de86775c638,Leo Lamprecht,2018-05-18 12:06:57+00:00,Leo Lamprecht,2018-05-18 12:06:57+00:00,12.0.0-canary.33
3cb4a9c8dda4be39f16ebdf50c4dc84a5db4365c,Leo Lamprecht,2018-05-18 12:06:18+00:00,GitHub,2018-05-18 12:06:18+00:00,Bumped `update-check` to the latest version (#1354)
7d19db46867e9a91449641f4dcd3ed31d254303f,Javi Velasco,2018-05-18 01:24:08+00:00,Leo Lamprecht,2018-05-18 07:40:56+00:00,Update non-existing team test
0371874dbbf7975ede96b71d11f52fbd710b355c,Javi Velasco,2018-05-18 01:01:26+00:00,Leo Lamprecht,2018-05-18 07:40:50+00:00,Prefer HTTP challenge for regular certs
6cbd61554ad2af0b7678f55a02051751cd4ff3e6,Pranay Prakash,2018-05-18 00:32:12+00:00,Leo Lamprecht,2018-05-18 07:40:45+00:00,issue normal cert for nested subdomain (#1344)
d68128945786564044e8e0f332c1aa0674607dc0,Javi Velasco,2018-05-18 01:24:28+00:00,Javi Velasco,2018-05-18 01:24:28+00:00,12.0.0-canary.32
bc1c3c3f5b58f98e63f8f5e067a45d860a2a413c,Javi Velasco,2018-05-18 01:24:08+00:00,Javi Velasco,2018-05-18 01:24:08+00:00,Update non-existing team test
5ae4287c0f261e2ab719f85fd715ce77da71b663,Javi Velasco,2018-05-18 01:02:00+00:00,Javi Velasco,2018-05-18 01:02:00+00:00,12.0.0-canary.31
cde9f56886b7a02a18024eaec23619f5254c36aa,Javi Velasco,2018-05-18 01:01:26+00:00,Javi Velasco,2018-05-18 01:01:26+00:00,Prefer HTTP challenge for regular certs
2b6b006bbd422cdb2e8c090fddf47ab5492ad798,Pranay Prakash,2018-05-18 00:32:12+00:00,Javi Velasco,2018-05-18 00:32:12+00:00,issue normal cert for nested subdomain (#1344)
48a490790cd4d72def1b6fdc8eb5094cd6496617,Leo Lamprecht,2018-05-17 08:26:00+00:00,Leo Lamprecht,2018-05-17 08:26:00+00:00,11.1.11
b96b7fc3a7ffeefe12c7ac9c5708250367755f94,Leo Lamprecht,2018-05-16 19:26:41+00:00,Leo Lamprecht,2018-05-16 19:29:54+00:00,"Store config on platform & load schema from package (#1349)

* Load schema from package

* Send config to deployment endpoint

* Upgraded @zeit/schemas to the latest version

* Removed type for now

* Added config correctly"
54e1bcafc051ed23a27db5c95dce514f9dab5468,Leo Lamprecht,2018-05-16 19:28:21+00:00,Leo Lamprecht,2018-05-16 19:28:21+00:00,12.0.0-canary.30
7e98d0a22b5363f9d46274b4fcd4163ab0591275,Leo Lamprecht,2018-05-16 19:26:41+00:00,GitHub,2018-05-16 19:26:41+00:00,"Store config on platform & load schema from package (#1349)

* Load schema from package

* Send config to deployment endpoint

* Upgraded @zeit/schemas to the latest version

* Removed type for now

* Added config correctly"
dfdd002708e7134d5d459ad7ff1f6b65c87825a9,Tim Neutkens,2018-05-16 16:22:22+00:00,Tim Neutkens,2018-05-16 16:22:22+00:00,11.1.10
001c5f04b2bf9a9c2a14ba21c8a1155934301577,Javi Velasco,2018-05-16 16:07:58+00:00,Tim Neutkens,2018-05-16 16:21:53+00:00,Fix table import (#1348)
c27b4a6aaf37b17cf74257b488bcb62d4b506893,Tim Neutkens,2018-05-16 16:08:53+00:00,Tim Neutkens,2018-05-16 16:08:53+00:00,12.0.0-canary.29
8f17ffd81729fa0c9f148101f8715aa08cbc45f7,Javi Velasco,2018-05-16 16:07:58+00:00,Tim Neutkens,2018-05-16 16:07:58+00:00,Fix table import (#1348)
7ef2be299d4215bad318c4258b8b096950681efc,Leo Lamprecht,2018-05-15 20:52:46+00:00,Leo Lamprecht,2018-05-15 20:52:46+00:00,11.1.9
9feb6ebff2233d67d2731b6fd30cc3ce8af3faf6,Leo Lamprecht,2018-05-15 19:57:40+00:00,Leo Lamprecht,2018-05-15 20:09:27+00:00,"Account for npm being down (#1346)

* Corrected license file name

* Corrected readme name

* Added editorconfig

* Account for npm being down

* Print full error

* Only show full error while debugging"
0a7d688d32290a06ead92eba70ca112d3a74ab7a,Leo Lamprecht,2018-05-15 19:58:07+00:00,Leo Lamprecht,2018-05-15 19:58:07+00:00,12.0.0-canary.28
8cb2fe1284de03be8b64596ab9eed14967799eaa,Leo Lamprecht,2018-05-15 19:57:40+00:00,GitHub,2018-05-15 19:57:40+00:00,"Account for npm being down (#1346)

* Corrected license file name

* Corrected readme name

* Added editorconfig

* Account for npm being down

* Print full error

* Only show full error while debugging"
12a8aa8a400ed5acc0e0b519a2f812a77f9f1d32,Leo Lamprecht,2018-05-15 08:18:56+00:00,Leo Lamprecht,2018-05-15 08:18:56+00:00,11.1.8
ea18c2c7ce63dc0fae7af87df2e4fbfd3a047986,Javi Velasco,2018-05-08 19:36:53+00:00,Leo Lamprecht,2018-05-15 08:14:25+00:00,Accept comma separated cns (#1336)
b721acb49e0d7e08e4b977e84e2abe8659cc3e19,Igor Klopov,2018-04-28 04:45:47+00:00,Leo Lamprecht,2018-05-15 08:14:19+00:00,ignore keep-alive packets for now logs -f (#1331)
024a3d16dbf77c1fb589e5c8e464d57d1ba97d26,Javi Velasco,2018-04-26 18:07:15+00:00,Leo Lamprecht,2018-05-15 08:14:13+00:00,"Safe deployment polling and other minor fixes (#1330)

* Initialize polling function from args

* Remove rule of having a mandatory dest field in path alias rules

* Wait 5 seconds after getting the deployment ready

* Ignore errors coming from events stream"
75e493332e7e7372d5409a3c228182f99afaa5b7,Javi Velasco,2018-04-25 02:16:25+00:00,Leo Lamprecht,2018-05-15 08:14:06+00:00,"Refactor scale and remove old alias and scale (#1321)

* Migrate to arg@2.0.0

* Refactor scale command

* Move alias.js to alias/index.js

* Move alias set to its own file

* Move alias ls to its own file

* Move alias rm to its own file

* Remove old alias and scale files

* Update alias integration test

* Fix scaling to 0

* Read scale params from now.json on deploy"
ff0b772b62e4a5abaaa787d3a344b34fa0dee9e3,Igor Klopov,2018-04-23 03:16:02+00:00,Leo Lamprecht,2018-05-15 08:13:56+00:00,handle keep-alive event in inspect command (#1326)
e6e375232e14537c1a685142234130d352e935c6,Leo Lamprecht,2018-05-15 08:07:03+00:00,Leo Lamprecht,2018-05-15 08:07:03+00:00,12.0.0-canary.27
08c4ab8a0cb572f526a355150c358fc9aa6b902d,Guillermo Rauch,2018-04-25 04:34:39+00:00,Leo Lamprecht,2018-05-15 08:06:37+00:00,Updated error message about verification timeout
eb746ae0f8bbba6d95fd919e80edef6e0ba533bd,Guillermo Rauch,2018-04-25 04:34:39+00:00,Leo Lamprecht,2018-05-15 08:04:38+00:00,Updated error message about verification timeout
f86647fc265276f495ab0d8a39b8c7aa25a16e1e,Leo Lamprecht,2018-05-15 08:01:29+00:00,Leo Lamprecht,2018-05-15 08:01:29+00:00,12.0.0-canary.26
f310f6a86f5ed6c9facf5f0369b98eb9e0d21d82,Javi Velasco,2018-05-08 19:36:53+00:00,GitHub,2018-05-08 19:36:53+00:00,Accept comma separated cns (#1336)
58c6acd2650fb931ada0cb63fd0578ef27cb490c,Javi Velasco,2018-04-28 05:02:10+00:00,Javi Velasco,2018-04-28 05:02:10+00:00,12.0.0-canary.25
c7d97e38661fbe303e385e6a747a835656f61830,Igor Klopov,2018-04-28 04:45:47+00:00,GitHub,2018-04-28 04:45:47+00:00,ignore keep-alive packets for now logs -f (#1331)
0890144c615d532b9524b7cbfef5a80f9583d560,Javi Velasco,2018-04-26 18:13:14+00:00,Javi Velasco,2018-04-26 18:13:14+00:00,12.0.0-canary.24
69a7d91b57cb30403d0b7afafb11cdee2c4854ab,Javi Velasco,2018-04-26 18:07:15+00:00,Leo Lamprecht,2018-04-26 18:07:15+00:00,"Safe deployment polling and other minor fixes (#1330)

* Initialize polling function from args

* Remove rule of having a mandatory dest field in path alias rules

* Wait 5 seconds after getting the deployment ready

* Ignore errors coming from events stream"
a9016c88f6a90d17b64944d3909e3bd7cae8b631,Javi Velasco,2018-04-25 02:16:25+00:00,Leo Lamprecht,2018-04-25 02:16:25+00:00,"Refactor scale and remove old alias and scale (#1321)

* Migrate to arg@2.0.0

* Refactor scale command

* Move alias.js to alias/index.js

* Move alias set to its own file

* Move alias ls to its own file

* Move alias rm to its own file

* Remove old alias and scale files

* Update alias integration test

* Fix scaling to 0

* Read scale params from now.json on deploy"
e8990742cfad1eb540f626e6e82293b18b0257fd,Igor Klopov,2018-04-23 03:16:02+00:00,GitHub,2018-04-23 03:16:02+00:00,handle keep-alive event in inspect command (#1326)
82eefe68e210f8653925dda2e308a06d1ce0ae04,Javi Velasco,2018-04-18 18:35:50+00:00,Javi Velasco,2018-04-18 18:35:50+00:00,11.1.7
538e1e7b9c099375867735293e03f9e1b5648e73,Javi Velasco,2018-04-18 18:26:47+00:00,Javi Velasco,2018-04-18 18:35:11+00:00,"Handle ENOENT error when deploying unexistent path (#1320)

* Handle ENOENT error when deploying unexistent path

* Show success on dedupped deployments"
c12d2f42268073da87eb5d165c405b3736ad15a5,Javi Velasco,2018-04-18 02:28:45+00:00,Javi Velasco,2018-04-18 18:35:11+00:00,Migrate to arg@2.0.0 (#1316)
b4428d099bb8d1b59f2f658d1974e1abe1159a44,Javi Velasco,2018-04-18 02:20:27+00:00,Javi Velasco,2018-04-18 18:35:11+00:00,Fix double ambiguous deploy prompt (#1318)
0acf907f47ae49b4f9283438d9a6c04a133b9935,Javi Velasco,2018-04-18 01:05:04+00:00,Javi Velasco,2018-04-18 18:35:11+00:00,Fix 0 min scale (#1317)
d83775620088f3d837ea4f9c4cf43bab67517f47,Naoyuki Kanezawa,2018-04-17 17:37:17+00:00,Javi Velasco,2018-04-18 18:35:11+00:00,improve image upload (#1293)
f51400a3a183048cb07577e78bdf11df848163e0,Javi Velasco,2018-04-18 18:27:15+00:00,Javi Velasco,2018-04-18 18:27:15+00:00,12.0.0-canary.23
e763ee530153188bf9c3893b6784ad9dcf17b25b,Javi Velasco,2018-04-18 18:26:47+00:00,GitHub,2018-04-18 18:26:47+00:00,"Handle ENOENT error when deploying unexistent path (#1320)

* Handle ENOENT error when deploying unexistent path

* Show success on dedupped deployments"
fd978699e83f6b7f95bd5c2ff2ef4577af2b121c,Javi Velasco,2018-04-18 02:28:45+00:00,Guillermo Rauch,2018-04-18 02:28:45+00:00,Migrate to arg@2.0.0 (#1316)
bbd958582937d04d1dcc967fc3fd25b4d9ea220c,Javi Velasco,2018-04-18 02:20:27+00:00,GitHub,2018-04-18 02:20:27+00:00,Fix double ambiguous deploy prompt (#1318)
54cf1ebb31b6989cc8d2430112b4e9e9e2c00563,Javi Velasco,2018-04-18 01:07:07+00:00,Javi Velasco,2018-04-18 01:07:07+00:00,12.0.0-canary.22
6fc77c6cfa8ffb3a72ada977d7a96b0549848f5f,Javi Velasco,2018-04-18 01:05:04+00:00,Guillermo Rauch,2018-04-18 01:05:04+00:00,Fix 0 min scale (#1317)
f54566725eb92620343809467250ac07309a8e0b,Javi Velasco,2018-04-17 19:10:00+00:00,Javi Velasco,2018-04-17 19:10:00+00:00,11.1.6
ff34e3dfb14b779d13f403d690d2623f1a2f8cf8,Javi Velasco,2018-04-17 17:32:32+00:00,Javi Velasco,2018-04-17 19:09:45+00:00,Fix number of instances verification (#1315)
f8372e3bb95cf50e0b6d4b9ac20549329841bd89,Javi Velasco,2018-04-17 17:49:33+00:00,Javi Velasco,2018-04-17 17:49:33+00:00,12.0.0-canary.21
6728be7b1aa675a5a2ef79b983005c309373e58d,Naoyuki Kanezawa,2018-04-17 17:37:17+00:00,Guillermo Rauch,2018-04-17 17:37:17+00:00,improve image upload (#1293)
65e1a1e731b11d0627f44ea76b702b816262ea05,Javi Velasco,2018-04-17 17:32:32+00:00,Guillermo Rauch,2018-04-17 17:32:32+00:00,Fix number of instances verification (#1315)
0b7a726f08ff25e01039e3be98fae9992719db35,Leo Lamprecht,2018-04-17 02:37:45+00:00,Leo Lamprecht,2018-04-17 02:37:45+00:00,11.1.5
b53aef6254fec47856884424a5892366a9eca820,Javi Velasco,2018-04-17 00:45:19+00:00,Leo Lamprecht,2018-04-17 02:37:02+00:00,"Improve instance verification for `deploy` (#1313)

* Refactor verify instances for deploy

* Don't rely on return

* Use new verify instances in alias

* Use new verify instances in alias"
ba4612042cc668ef1f0fcfc29bc633cceedb5036,Javi Velasco,2018-04-14 04:55:06+00:00,Leo Lamprecht,2018-04-17 02:36:55+00:00,"Replace combine-async-generators (#1305)

* Replace combine-asyng-generators

* Ignore empty objects from events stream

* Update type for alias event"
0d22fef2a080dce0448804de5379f73aa06cf1b3,Javi Velasco,2018-04-14 02:49:18+00:00,Leo Lamprecht,2018-04-17 02:36:49+00:00,"Print response in docker test (#1304)

* Print response when failing in docker test file

* Add line

* Parse response text as JSON, print if it fails"
6f6ff45062d64ffe8eb1bd9b86a8c5c8b9b991b8,Leo Lamprecht,2018-04-14 02:00:17+00:00,Leo Lamprecht,2018-04-17 02:36:42+00:00,Added missing dependencies (#1303)
8ba2ae634ff9ca68ce1162aa882ef7d94d84b2a2,Javi Velasco,2018-04-14 01:33:27+00:00,Leo Lamprecht,2018-04-17 02:36:36+00:00,"Refactor deploy events printing (#1302)

* Move deploy command to its own directory

* Do not show success on downscale message

* Move getDeploymentByIdOrHost to /util/deploy

* Remove unneeded parameter in getAppName

* Better types for copyToClipboard

* Update to babel 7

* Add generator utility functions

* Add function to get deployment events

* Finish  getDeploymentEvents after getting one state-change event

* Refactor deploy events and reduce verification timeout

* Reduce verification timeout for scale and alias

* Use output.log for success message in scale

* Fix integration tests"
cd9478e8534dc2ec224d85d92de4d30170aa8624,Javi Velasco,2018-04-17 00:46:47+00:00,Javi Velasco,2018-04-17 00:46:47+00:00,12.0.0-canary.20
b9364ed4fcfa1abb15781345d5d885f91d7174e6,Javi Velasco,2018-04-17 00:45:19+00:00,Guillermo Rauch,2018-04-17 00:45:19+00:00,"Improve instance verification for `deploy` (#1313)

* Refactor verify instances for deploy

* Don't rely on return

* Use new verify instances in alias

* Use new verify instances in alias"
2715e8e9d884ad4539756378b8d2b0df7c0e1200,Leo Lamprecht,2018-04-14 06:23:44+00:00,Leo Lamprecht,2018-04-14 06:23:44+00:00,12.0.0-canary.19
f987c93cf068b7d30e66c51b47503e5f5bd4e99e,Javi Velasco,2018-04-14 04:55:06+00:00,Leo Lamprecht,2018-04-14 04:55:06+00:00,"Replace combine-async-generators (#1305)

* Replace combine-asyng-generators

* Ignore empty objects from events stream

* Update type for alias event"
5c254a7151ecc8fab7137e2ac392843f29c3ef24,Javi Velasco,2018-04-14 02:49:18+00:00,Leo Lamprecht,2018-04-14 02:49:18+00:00,"Print response in docker test (#1304)

* Print response when failing in docker test file

* Add line

* Parse response text as JSON, print if it fails"
f253e29f330aee0c1687f551e5ee2ecc339cc8a7,Leo Lamprecht,2018-04-14 02:05:49+00:00,Leo Lamprecht,2018-04-14 02:05:49+00:00,12.0.0-canary.18
f37fa13eaba0f07791d724e7140f77a91ad9e7db,Leo Lamprecht,2018-04-14 02:00:17+00:00,GitHub,2018-04-14 02:00:17+00:00,Added missing dependencies (#1303)
64765b393a4be8d1b6e081d0d29283ec7790ef6f,Javi Velasco,2018-04-14 01:33:27+00:00,Leo Lamprecht,2018-04-14 01:33:27+00:00,"Refactor deploy events printing (#1302)

* Move deploy command to its own directory

* Do not show success on downscale message

* Move getDeploymentByIdOrHost to /util/deploy

* Remove unneeded parameter in getAppName

* Better types for copyToClipboard

* Update to babel 7

* Add generator utility functions

* Add function to get deployment events

* Finish  getDeploymentEvents after getting one state-change event

* Refactor deploy events and reduce verification timeout

* Reduce verification timeout for scale and alias

* Use output.log for success message in scale

* Fix integration tests"
fc1eae21ea03527dbeefeef6d62dc7015af7fc6a,Leo Lamprecht,2018-04-11 19:32:03+00:00,Leo Lamprecht,2018-04-11 19:32:03+00:00,11.1.4
454a15cb25dd56857db6a9f4df10e8992e8f0f80,Javi Velasco,2018-04-11 19:22:49+00:00,Leo Lamprecht,2018-04-11 19:23:51+00:00,Remove old certs command (#1295)
54c84b4ce024f2df64395f66933c1a13526d86db,Leo Lamprecht,2018-04-11 19:23:06+00:00,Leo Lamprecht,2018-04-11 19:23:06+00:00,12.0.0-canary.17
146bcba79476e817420df5aad4466b92dd201685,Javi Velasco,2018-04-11 19:22:49+00:00,Leo Lamprecht,2018-04-11 19:22:49+00:00,Remove old certs command (#1295)
84b8b85f8d9b05b41a0ac560d6532306eb3f222c,Leo Lamprecht,2018-04-11 18:53:18+00:00,Leo Lamprecht,2018-04-11 18:53:18+00:00,11.1.3
2a2a7a7bd9e737ed5bb47244d6b5d3c1bee29133,Javi Velasco,2018-04-11 18:42:38+00:00,Leo Lamprecht,2018-04-11 18:44:03+00:00,Remove old alias command (#1294)
d3dd1b731dd779337192f1baf67be5f661e8d3aa,Leo Lamprecht,2018-04-11 18:43:12+00:00,Leo Lamprecht,2018-04-11 18:43:12+00:00,12.0.0-canary.16
d608ee7390f1fcf5e4d84e184fdf0f470c7c6981,Javi Velasco,2018-04-11 18:42:38+00:00,Leo Lamprecht,2018-04-11 18:42:38+00:00,Remove old alias command (#1294)
addc237f7a1c7bb8baf9fb0561b07e01cfcea312,Leo Lamprecht,2018-04-11 01:07:23+00:00,Leo Lamprecht,2018-04-11 01:07:23+00:00,11.1.2
034763218b50e25daf35314ae067a8d471ec5380,Leo Lamprecht,2018-04-11 00:53:27+00:00,Leo Lamprecht,2018-04-11 01:02:20+00:00,Fixed typo in release instructions
4e2e0950c782276e14e691ab96ea3d99f52ffeb3,Leo Lamprecht,2018-04-11 00:53:51+00:00,Leo Lamprecht,2018-04-11 00:53:51+00:00,12.0.0-canary.15
ddc7e97ab609f9c594cd5c8f89ab3f6ce5611096,Leo Lamprecht,2018-04-11 00:53:27+00:00,Leo Lamprecht,2018-04-11 00:53:27+00:00,Fixed typo in release instructions
a21759ee4233370b869830391a64036812b812b0,Leo Lamprecht,2018-04-11 00:53:02+00:00,Leo Lamprecht,2018-04-11 00:53:02+00:00,Resolved conflicts
cc4beb94cf810560d184420444af2fda535523f5,Leo Lamprecht,2018-04-11 00:47:11+00:00,GitHub,2018-04-11 00:47:11+00:00,Merge branch 'master' into canary
18c6822b67d2ecc073ec93ab0f98c75c079f36d4,Leo Lamprecht,2018-04-11 00:24:56+00:00,Leo Lamprecht,2018-04-11 00:24:56+00:00,11.1.1
9ced8b7e75aa994571253263aefa0963e32e89a8,Leo Lamprecht,2018-04-10 23:26:44+00:00,Leo Lamprecht,2018-04-10 23:53:01+00:00,Moved documentation for releasing out
67c556f2e35997f55acc989cdbbc04802b3280db,Leo Lamprecht,2018-04-10 23:08:39+00:00,Leo Lamprecht,2018-04-10 23:52:56+00:00,Make clear how a release works exactly
cea3072f1a95829696f6d86da86253fc8e00ee58,Leo Lamprecht,2018-04-10 23:07:31+00:00,Leo Lamprecht,2018-04-10 23:52:51+00:00,Improved intro and contribution section
2e09ca02866999849be4c6482213125770146914,Leo Lamprecht,2018-04-10 22:46:41+00:00,Leo Lamprecht,2018-04-10 23:52:45+00:00,Made sure the integration tests work as expected
0bfafa93118bb584e869d3a94d9b17d03d2e3fb2,Leo Lamprecht,2018-04-10 23:38:48+00:00,Leo Lamprecht,2018-04-10 23:38:48+00:00,12.0.0-canary.14
4eefc3462933f67056892acc52c64fa7297860d1,Leo Lamprecht,2018-04-10 23:26:44+00:00,GitHub,2018-04-10 23:26:44+00:00,Moved documentation for releasing out
4d3f882dc0470fd95cc326062b846c78336669c2,Leo Lamprecht,2018-04-10 23:08:39+00:00,GitHub,2018-04-10 23:08:39+00:00,Make clear how a release works exactly
3a802fbb70da01d0f6463d974a8960a367f4d52d,Leo Lamprecht,2018-04-10 23:07:31+00:00,GitHub,2018-04-10 23:07:31+00:00,Improved intro and contribution section
6f00b03d24dfefc6e582139d05f0656c314089d3,Leo Lamprecht,2018-04-10 22:46:41+00:00,Leo Lamprecht,2018-04-10 22:46:41+00:00,Made sure the integration tests work as expected
dd77a721d6ffa953441ff7dc94ccf8f96701194e,Tim Neutkens,2018-04-10 13:23:06+00:00,Tim Neutkens,2018-04-10 13:23:06+00:00,11.1.0
b44bd7c2ca4a3b7c639adcc2e4fa4d05975e7c3b,Javi Velasco,2018-04-10 13:18:47+00:00,Javi Velasco,2018-04-10 13:18:47+00:00,Merge canary and solve conflicts
26e9922016b499615bc1f6d60f318476eee7d4ec,Tim Neutkens,2018-04-10 12:55:51+00:00,Tim Neutkens,2018-04-10 12:55:51+00:00,Bring back integration tests as part of releasing
e7ffddb4eecae667121b781d95b4685f4283991f,Tim Neutkens,2018-04-10 12:39:41+00:00,Tim Neutkens,2018-04-10 12:39:41+00:00,12.0.0-canary.13
22c73ff5af5d451c194285e33edef666c8cf3b75,Tim Neutkens,2018-04-10 12:38:53+00:00,Tim Neutkens,2018-04-10 12:38:53+00:00,Temporarily disable integration tests
934f8b8cc329de0dd3a407354980ee7136687d09,Javi Velasco,2018-04-10 12:29:04+00:00,Javi Velasco,2018-04-10 12:29:04+00:00,12.0.0-canary.12
66c726f3ee53822c1a41ef8010d78ae74b738f43,Javi Velasco,2018-04-10 11:36:53+00:00,Javi Velasco,2018-04-10 11:36:53+00:00,12.0.0-canary.11
a49e6640a33c23ec6bb36c44ddbc6c95ebf6c2f0,Javi Velasco,2018-04-10 11:35:20+00:00,Javi Velasco,2018-04-10 11:35:20+00:00,Remove setup domain message
88b935ba4f766a303029f96fd03e0289efdd6c20,Javi Velasco,2018-04-10 10:20:43+00:00,Javi Velasco,2018-04-10 10:20:43+00:00,12.0.0-canary.10
98744f5bdfc507ef9f75d9de1331208316b8a452,Javi Velasco,2018-04-10 09:45:25+00:00,Javi Velasco,2018-04-10 10:18:51+00:00,"Remove certs by cn (#1288)

* Allow to remove certs by cn and id

* Use getCerts in certs ls command"
0e0855370edb75827bfa369b2bac6ae58960dfc2,Javi Velasco,2018-04-10 08:51:03+00:00,Guillermo Rauch,2018-04-10 08:51:03+00:00,"Certificates revamped (#1282)

* Certificates revamped

* Change copy of certs loading msg

* Be more specific when we generate a certificate from alias

* Better messages when creating certs

* Ensure TTY works for alias

* Check if DNS records are configured instead of checking resolved server

* Fallback to a normal cert when the DNS settings are not valid for wildcard

* Be explicit setting alias.zeit.co DNS records

* Check DNS records to request a certificate that will success for zeit.world"
26b11b8939578f57689f53bb443407806d5b351b,Leo Lamprecht,2018-04-10 00:57:27+00:00,Leo Lamprecht,2018-04-10 00:57:27+00:00,11.0.7
e1f8c752c8d1dfd90d76f2428da137b318a76cfe,Leo Lamprecht,2018-04-10 00:07:41+00:00,Leo Lamprecht,2018-04-10 00:42:31+00:00,Don't render update message on non-TTY (#1281)
b68c631a5a42acf3ccbe5a822d24385eb4e8032c,Leo Lamprecht,2018-04-10 00:08:12+00:00,Leo Lamprecht,2018-04-10 00:08:12+00:00,12.0.0-canary.9
91b691ba0a2423847b49e1dd70d2e366d3359eb3,Leo Lamprecht,2018-04-10 00:07:41+00:00,GitHub,2018-04-10 00:07:41+00:00,Don't render update message on non-TTY (#1281)
4aec88d4af5528cb3fd3c68c084d6a860bbd5c14,Leo Lamprecht,2018-04-09 23:14:00+00:00,Leo Lamprecht,2018-04-09 23:14:00+00:00,12.0.0-canary.8
9b0bdc3f13bfdd15df11b7aaf829cd04ede968eb,Javi Velasco,2018-04-09 23:03:29+00:00,Leo Lamprecht,2018-04-09 23:03:29+00:00,Find instances count when listing an alias with deployment ls (#1280)
7f2e14061daaa46412d4d0b8e3e66545f4bd2ff4,Leo Lamprecht,2018-04-09 05:04:48+00:00,Leo Lamprecht,2018-04-09 05:04:48+00:00,12.0.0-canary.7
7c96f2d08c31899731bf207a9c22017cdf929fa4,Javi Velasco,2018-04-09 05:03:45+00:00,Leo Lamprecht,2018-04-09 05:03:45+00:00,Refactored `now alias` to be more bullet-proof (#1267)
e1c5af561d9ad213b870aa3326fc2607efc708c7,Leo Lamprecht,2018-04-09 03:33:29+00:00,Leo Lamprecht,2018-04-09 04:07:58+00:00,"Replaced the update checker (#1275)

* Replaced update checker

* Moved to devDeps

* Removed prod dep entry"
594c71594385897aaa959ba2a8ed76017bd9c930,Leo Lamprecht,2018-04-09 03:35:34+00:00,Leo Lamprecht,2018-04-09 03:35:34+00:00,12.0.0-canary.6
6ca2931de85d69da938b7a0f69a26717a4866178,Leo Lamprecht,2018-04-09 03:33:29+00:00,GitHub,2018-04-09 03:33:29+00:00,"Replaced the update checker (#1275)

* Replaced update checker

* Moved to devDeps

* Removed prod dep entry"
01363a5ef9c5d27b80d72139dfb56404a30a89aa,Leo Lamprecht,2018-04-05 00:15:41+00:00,Leo Lamprecht,2018-04-06 17:47:45+00:00,Re-added dependencies required for download (#1259)
0f1471fee4fb7ec659fdccae938afd11b47e05c2,Javi Velasco,2018-04-04 22:49:53+00:00,Leo Lamprecht,2018-04-06 17:47:39+00:00,Remove unused dependencies (#1258)
0e7ce49ad42d5982ff64aa01a83461c81fc712b8,Sreeram Jayan,2018-04-04 19:29:13+00:00,Leo Lamprecht,2018-04-06 17:47:34+00:00,Validate `now.json` before parsing it (#1239)
1b9ece5137bd0f2a838f2b4747ef9e3fc57a0dbd,Leo Lamprecht,2018-04-05 20:30:54+00:00,Leo Lamprecht,2018-04-05 20:30:54+00:00,11.0.6
27a74905854a60a69c661a475188aa03965fab72,Leo Lamprecht,2018-04-05 20:23:25+00:00,Leo Lamprecht,2018-04-05 20:25:49+00:00,Made sure `now alias` accepts URLs as targets (#1266)
885f5a82254d9594c5641d2854898a03c1485017,Leo Lamprecht,2018-04-05 20:25:07+00:00,Leo Lamprecht,2018-04-05 20:25:07+00:00,12.0.0-canary.5
6ba3e8d035cfe887c3ac13e8be8a3b325193ecf9,Leo Lamprecht,2018-04-05 20:23:25+00:00,GitHub,2018-04-05 20:23:25+00:00,Made sure `now alias` accepts URLs as targets (#1266)
babe6f1a096dafc65fada31e5657e2708b2aa6ec,Leo Lamprecht,2018-04-05 07:24:44+00:00,Leo Lamprecht,2018-04-05 07:24:44+00:00,11.0.5
482754fc0075b8f07eba02fc40f051d10d2007a1,Leo Lamprecht,2018-04-05 07:15:18+00:00,Leo Lamprecht,2018-04-05 07:23:53+00:00,"Make `now ls` work as expected (#1263)

* Made domains as app names work again

* Made it work as expected"
a98539b1d3c844dce5539440d48d3a9f97ba5128,Leo Lamprecht,2018-04-05 07:16:49+00:00,Leo Lamprecht,2018-04-05 07:16:49+00:00,12.0.0-canary.4
3224ce7e58e27ebc4ac38bdbb68bf652f475bbaa,Leo Lamprecht,2018-04-05 07:15:18+00:00,GitHub,2018-04-05 07:15:18+00:00,"Make `now ls` work as expected (#1263)

* Made domains as app names work again

* Made it work as expected"
9b325e55dd2547abdcc8824286ace687ce73c0ec,Leo Lamprecht,2018-04-05 01:47:22+00:00,Leo Lamprecht,2018-04-05 01:47:22+00:00,11.0.4
105d68681aa3c4e7df0dce4ba0664326e81d7b5d,Leo Lamprecht,2018-04-05 01:32:03+00:00,Leo Lamprecht,2018-04-05 01:46:52+00:00,"Ensure listing single deployments work (#1260)

* Only try to find more deployments if app name defined

* Made note util correct

* Added support for listing single deployments

* Reverted unnecessary change"
d7a852af8b1edf0686b6a3f6c3f6e6d4bacbcb7e,Javi Velasco,2018-04-04 22:07:22+00:00,Leo Lamprecht,2018-04-05 01:46:43+00:00,"Corrected downscaling mechanism (#1256)

* Prevent downscaling the current deployment

* Only downscale a deployment after aliasing if it has no other alias"
469b1e89893f3a4257d316dcde0bee755715909a,Leo Lamprecht,2018-04-04 21:50:00+00:00,Leo Lamprecht,2018-04-05 01:46:36+00:00,"Improved integration tests (#1257)

* Assert exit code properly

* Don't strip ANSI stuff"
2c530070709e0ba5fdbcba8505238fbc2e44c9db,Javi Velasco,2018-04-04 19:22:37+00:00,Leo Lamprecht,2018-04-05 01:46:30+00:00,Enable ES6 modules (#1255)
86f9e8bb2f66cffd5d7cf3e7aff745007f330df7,Leo Lamprecht,2018-04-05 01:37:35+00:00,Leo Lamprecht,2018-04-05 01:37:35+00:00,12.0.0-canary.3
abdb261717e6525aef310bd91add7399308e0ee0,Leo Lamprecht,2018-04-05 01:32:03+00:00,GitHub,2018-04-05 01:32:03+00:00,"Ensure listing single deployments work (#1260)

* Only try to find more deployments if app name defined

* Made note util correct

* Added support for listing single deployments

* Reverted unnecessary change"
f9cca949511eface0fbfbc12ab7fc3ad09000717,Leo Lamprecht,2018-04-05 00:15:41+00:00,GitHub,2018-04-05 00:15:41+00:00,Re-added dependencies required for download (#1259)
029e5f8e0a2313406b455b556a0f389563dd3fd7,Javi Velasco,2018-04-04 22:49:53+00:00,GitHub,2018-04-04 22:49:53+00:00,Remove unused dependencies (#1258)
d278d517df36efd44c7775b709c2b5961c3628b6,Javi Velasco,2018-04-04 22:07:22+00:00,Leo Lamprecht,2018-04-04 22:07:22+00:00,"Corrected downscaling mechanism (#1256)

* Prevent downscaling the current deployment

* Only downscale a deployment after aliasing if it has no other alias"
41046531d598408bffd50af818d5dbc6cc50baeb,Leo Lamprecht,2018-04-04 21:50:00+00:00,GitHub,2018-04-04 21:50:00+00:00,"Improved integration tests (#1257)

* Assert exit code properly

* Don't strip ANSI stuff"
d039fb0bbeb15dd600b5dd9af21b3d8f7a29020a,Sreeram Jayan,2018-04-04 19:29:13+00:00,Leo Lamprecht,2018-04-04 19:29:13+00:00,Validate `now.json` before parsing it (#1239)
baff437e6921d423f6b2265194b4a915b7c089df,Javi Velasco,2018-04-04 19:22:37+00:00,Leo Lamprecht,2018-04-04 19:22:37+00:00,Enable ES6 modules (#1255)
0b895845a1dd5ec382f194ae5fa4c63d498c2126,Leo Lamprecht,2018-04-04 19:07:22+00:00,Leo Lamprecht,2018-04-04 19:07:22+00:00,11.0.3
d47fd0e10a4e0695edd4aae22e96845d6ba6a19d,Igor Klopov,2018-04-04 18:50:15+00:00,Leo Lamprecht,2018-04-04 19:07:14+00:00,Fixed static deployments on the OSS plan (#1253)
fc46bc077fd18caddbabeeaf8b77b919d7bc2ea8,Leo Lamprecht,2018-04-04 18:58:48+00:00,Leo Lamprecht,2018-04-04 18:58:48+00:00,12.0.0-canary.2
16b7ff9a259aea286a753838eb31348e99b10270,Igor Klopov,2018-04-04 18:50:15+00:00,Leo Lamprecht,2018-04-04 18:50:15+00:00,Fixed static deployments on the OSS plan (#1253)
ccb79a10960dae24bd1d302230c3a0a1d3094ff4,Leo Lamprecht,2018-04-04 18:13:50+00:00,Leo Lamprecht,2018-04-04 18:13:50+00:00,11.0.2
fd557ac9fe88efc70ab993d0ccf8770a7f70b94a,Javi Velasco,2018-04-04 17:59:27+00:00,Leo Lamprecht,2018-04-04 18:11:21+00:00,"Only write URL to stdout (#1245)

* Only write URL to stdout

* Update wait.js"
f643f6c28af9d78c03f0099769964596c37d29ee,Leo Lamprecht,2018-04-04 18:07:34+00:00,Leo Lamprecht,2018-04-04 18:07:34+00:00,12.0.0-canary.1
362fc0b3d8a4bd3599343bc966b18676522cb623,Javi Velasco,2018-04-04 17:59:27+00:00,Leo Lamprecht,2018-04-04 17:59:27+00:00,"Only write URL to stdout (#1245)

* Only write URL to stdout

* Update wait.js"
3329bbf05310b7228006c0ecaa636e4dd339b585,Matheus Fernandes,2018-04-04 02:20:08+00:00,Matheus Fernandes,2018-04-04 02:20:08+00:00,11.0.0-canary.37
3357a5de779e41dd3af2aa3d80a803d697201086,Matheus Fernandes,2018-04-04 02:17:49+00:00,Matheus Fernandes,2018-04-04 02:17:49+00:00,11.0.1
ad780bdcd8bba11cb9e35c591a36a571e0e904d9,Javi Velasco,2018-04-04 00:49:29+00:00,Matheus Fernandes,2018-04-04 02:08:41+00:00,Remove DNS extra check in alias for verified domains (#1242)
d1c3ac50152050c64ee20bef816406625b3b396d,Javi Velasco,2018-04-03 22:42:02+00:00,Matheus Fernandes,2018-04-04 02:08:36+00:00,Ensure deployment scale exists before the check on deploy (#1241)
91409f44b544fd6419e9b9f76db9cdedb6fcd727,Zander Martineau,2018-04-03 22:05:56+00:00,Matheus Fernandes,2018-04-04 02:08:31+00:00,fix spelling (#1240)
f6eb444841945dcfa8175687c883ff9e33680bf0,Javi Velasco,2018-04-03 21:38:54+00:00,Matheus Fernandes,2018-04-04 02:08:27+00:00,Bugfix: return array of targets of one item when config alias is a string (#1238)
f4cc42e25c7a0fabfa2197b18446982ed36f177a,Javi Velasco,2018-04-03 20:54:03+00:00,Matheus Fernandes,2018-04-04 02:08:11+00:00,Remove version trailin space (#1236)
570c6849ca6619abb107b187de82b54f15adfdd0,Javi Velasco,2018-04-03 20:40:00+00:00,Matheus Fernandes,2018-04-04 02:07:56+00:00,Fallback appName to package.json for alias (#1235)
cc5d396758cd6f9011bd8f5a849973d0cdc6f3a9,Javi Velasco,2018-04-03 20:39:49+00:00,Matheus Fernandes,2018-04-04 02:07:42+00:00,Don't try to scale static deployments (#1232)
281c2369456efef505e0dc58b00d0749d561b840,Javi Velasco,2018-04-04 00:49:29+00:00,Guillermo Rauch,2018-04-04 00:49:29+00:00,Remove DNS extra check in alias for verified domains (#1242)
b90cfde7c0518ba94634d0e09ea02c6d067b9b4b,Javi Velasco,2018-04-03 22:42:02+00:00,GitHub,2018-04-03 22:42:02+00:00,Ensure deployment scale exists before the check on deploy (#1241)
c46d3dbd10f3106ff680935866fc87f4cea5799c,Zander Martineau,2018-04-03 22:05:56+00:00,Tim Neutkens,2018-04-03 22:05:56+00:00,fix spelling (#1240)
d3fed8a717e0ab20983a44babe20c36d92a3cea3,Javi Velasco,2018-04-03 21:38:54+00:00,GitHub,2018-04-03 21:38:54+00:00,Bugfix: return array of targets of one item when config alias is a string (#1238)
7cc55b6cb103379a8c2ad8ba4c25374b64df78ad,Javi Velasco,2018-04-03 20:54:03+00:00,GitHub,2018-04-03 20:54:03+00:00,Remove version trailin space (#1236)
9847355983748ae207b02d90252c424d02a084b8,Javi Velasco,2018-04-03 20:41:50+00:00,Javi Velasco,2018-04-03 20:41:50+00:00,11.0.0-canary.36
267b4c904cc17c1692c0f7e168d0b36e8b3aab4d,Javi Velasco,2018-04-03 20:40:00+00:00,GitHub,2018-04-03 20:40:00+00:00,Fallback appName to package.json for alias (#1235)
859790da87c3d18e0a9152b4e8d518b53491f7c7,Javi Velasco,2018-04-03 20:39:49+00:00,GitHub,2018-04-03 20:39:49+00:00,Don't try to scale static deployments (#1232)
214da9a221d338900f633f4d879082fa628209da,Leo Lamprecht,2018-04-03 16:29:44+00:00,Leo Lamprecht,2018-04-03 16:29:44+00:00,11.0.0-canary.35
45799190776852e4ac166d53fd4ad096517bef7b,Leo Lamprecht,2018-04-03 16:09:17+00:00,Leo Lamprecht,2018-04-03 16:29:33+00:00,Properly handle event polling (#1228)
d2509e45db362fddd8432f887516fc64b2c0b2bb,Leo Lamprecht,2018-04-03 16:13:21+00:00,Leo Lamprecht,2018-04-03 16:13:21+00:00,11.0.0
793e1b11daf0b57bd406ed6a56405d8959447844,Leo Lamprecht,2018-04-03 16:09:17+00:00,GitHub,2018-04-03 16:09:17+00:00,Properly handle event polling (#1228)
0e9a21a2638a524322c1134c6aeb472677b8eb40,Guillermo Rauch,2018-04-03 12:32:53+00:00,Leo Lamprecht,2018-04-03 15:14:41+00:00,"Support for globally distributed deployments (#1205)

* Introduce v3 deployment scaling API

* Less retries on setScale()

* now scale cmd v3

* Deployment id fixes

* bump `ecmaVersion` we lint against, to consider object rest spread

* move EPIPE workaround to the main file

* uniform exiting approach

* clean up list command to avoid globals, be simpler to read

* add ability to supply a custom API version to `now.list()` helper

* upgrade babel toolchain

* introduce `arg`, which will incrementally replace `mri`

* global args accepted by all subcommands

* update lock

* fix `>` to be red when rendering errors

* use new output helpers by @tootallnate

* make object spread work

* bump flow webpack plugin

* lock

* revert to ava 0.25.x

* deprecate `now ls help` since an app could be named `help`

* validate number of arguments

* Fixed integration tests to match downgraded AVA

* Trimmed newline

* WIP

* whitespace fix

* add source map support by @timneutkens

* fix source maps paths

* remove sort-deployments util. it only considers `package.json`

* created -> age for consistency

* remove sorting what wasn't working well

* multiple improvements and simplifications

* improve rendering of urls, fix filtering by app

* only attempt to fetch instances if we have a count > 0

* better check for no deployments

* add instance lists if --all is supplied

* prevent the `.map` file from being included by pkg

* Store artifacts in Circle CI

* adapt INITIALIZING display by suggestion of @tootallnate

* Nothing to return

* now scale: Args parsing and remove ls

* various code improvements, error link for deprecation of `now scale ls`

* improve help

* make error more specific to deployment

* use new error output utilities for `now deploy`

* make some requires conditional

* default command style fix

* add reusable dc validation and normalization utilities

* start doing dc / region validation in scale

* refactor deploy to use reusable dc / region utils

* add slug support for warn util

* add success helper

* improve `scale` command

* add `responseErrorMessage` helper

* add `now.fetch()` helper

* remove console.log

* tweak output

* draft of verification step

* better errors

* implement (customizable) verification timeout

* bump now-host api to v3

* finish verification

* improve verification and sanitization

* improve copy

* fix ctrl+c during scale

* fix max scale in the absense of max

* improved rules saving

* fix listing the context you're running `now list` under

* add context name to list commands from slots

* improve --no-verify

* add 'elapsed' utility to print out the elapsed time nicely

* add per-dc timers

* improve debug helper to save date, improve time helper to log eagerly

* log every request, automatically

* tweak

* general tweaks to `now deploy`

* pass additional now config fields

* refactor `now rm`

* begin `inspect` command

* bump fetch-h2

* nearly complete new inspect command

* add `(dev)` to --version while in development

* fix 404 error if app is not matched

* improve scaling

* pass event types to the events endpoint

* fix file uploads

* fix passing a deployment hostname with trailing `/`

* fetch events only for non-static

* include uid in inspect

* finish up events

* reduce one indent by recommendation of @leo

* fix debugging for `now ls`

* Always return and exit at top-level in now.js

* improved scale message

* more elegant way of exiting, allowing for resource cleanup & faster

* flowify

* fix strange error which happens when orderly cleanup is done

* flow

* flow fix

* invoke now.close()

* improve list indentation

* refactor alias

* exit clean

* improve fallthrough entry in path alias

* make scale exit properly

* fix closing agent for inspection

* add type of deployment to ls

* better error handling of 403

* improve list style

* various algorithmic improvements

* Certificates refactor to consume the new API (#1210)

* Adapt cert command to the new api

* Use the new certs api for cert command

* Console log certs table and point to the right endpoint

* Remove unused certs client file

* Refactor certs commands

* Fix access to args

* Always close client

* Refactor alias (#1216)

* remove unnecessary file

* reads events from /deployment/:id/events endpoint (#1219)

* add polling (#1220)

* add polling

* hack to prevent partial json to be unluckily parsed in _flush

* cleanupAndResolveCalled to prevent running twice

* call onOpen only of going to 'log'. also call from cleanup

* callOnOpenOnce, don't reject on stream error, polling to finish

* fix eraseLines, make cleanup routine reject

* remove build-logger.js

* restored printEvent from deleted build-logger.js

* print locations of instance events

* bump api versions

* Switch now logs to events endpoint (#1223)

* move eraseLines to onRetry. show error in onRetry

* move printEvents to 'sh/util/events.js'

* use printEvents in `now logs` command

* pass printEvent to events.js

* make both follow and non-follow modes work

* remove socket.io

* improve logs command

* clarify team context

* Refactor alias

* Use ellapsed util in stamp

* use v3

* Refactor alias (#1224)

* Refactor alias

* Use ellapsed util in stamp

* Improvements

* Fix unit tests

* Ensure body exists when copying error attrs

* Add hook to close socket and wait message on process exit

* More retries when verifying the DNS records in alias

* Remove nowExit event listener on close

* Add remaning DCs message right away on alias

* Consistent timestamp when creating a deployment + scale dcs

* Ignore flow error

* Remove not needed now.close from alias

* Remove not needed now.close from inspect

* Bugfix: bind context to close socket handler

* Better error handling for scale command

* Now logs limit (#1226)

* restored -n LIMIT cli arg

* show date in format usabe for since and until

* pass direction and limit to endpoint

* implement follow mode after backwards slice

* add query, fix linefeeds, strip term commands

* implement head argument

* better logs default

* logs: fix -o raw mode, fix all mode

* Add verification for deploy

* Run integration tests using random email address

* Fix flow errors

* Fix wrong scale check

* Finish deploy on state READY

* Correct URL parsing

* Bumped Node.js to the latest version

* Output node version

* fix url display

* Returned URLs

* Improve messages in scale

* Clear URLs

* Strip ANSI codes

* Better logging messages for deploy

* Print ls to console instead of stderr

* Add create certificate certificate and ensure verification is done for a domain

* Write success in alias to stdout

* clearURL in stdout for alias test

* Update scale integration test

* Use stdout for scale success message

* Write alias rm response to stdout

* Refactor alias rm to use fetch from now client

* Fix tests"
c37d741cf2c5f57dcb58a1b34dad78f85506b46f,Javi Velasco,2018-03-29 17:58:57+00:00,Leo Lamprecht,2018-04-03 15:14:34+00:00,"Add expectedPrice check (#1215)

* Add expectedPrice check

* Add expectedPrice to domain buy method"
893fbd899e988a59ec9dc776b5739025d4afabe8,Leo Lamprecht,2018-04-03 12:36:58+00:00,Leo Lamprecht,2018-04-03 12:36:58+00:00,11.0.0-canary.34
6d14a1bbd43945a464e43e729db6c2a860d90343,Guillermo Rauch,2018-04-03 12:32:53+00:00,Leo Lamprecht,2018-04-03 12:32:53+00:00,"Support for globally distributed deployments (#1205)

* Introduce v3 deployment scaling API

* Less retries on setScale()

* now scale cmd v3

* Deployment id fixes

* bump `ecmaVersion` we lint against, to consider object rest spread

* move EPIPE workaround to the main file

* uniform exiting approach

* clean up list command to avoid globals, be simpler to read

* add ability to supply a custom API version to `now.list()` helper

* upgrade babel toolchain

* introduce `arg`, which will incrementally replace `mri`

* global args accepted by all subcommands

* update lock

* fix `>` to be red when rendering errors

* use new output helpers by @tootallnate

* make object spread work

* bump flow webpack plugin

* lock

* revert to ava 0.25.x

* deprecate `now ls help` since an app could be named `help`

* validate number of arguments

* Fixed integration tests to match downgraded AVA

* Trimmed newline

* WIP

* whitespace fix

* add source map support by @timneutkens

* fix source maps paths

* remove sort-deployments util. it only considers `package.json`

* created -> age for consistency

* remove sorting what wasn't working well

* multiple improvements and simplifications

* improve rendering of urls, fix filtering by app

* only attempt to fetch instances if we have a count > 0

* better check for no deployments

* add instance lists if --all is supplied

* prevent the `.map` file from being included by pkg

* Store artifacts in Circle CI

* adapt INITIALIZING display by suggestion of @tootallnate

* Nothing to return

* now scale: Args parsing and remove ls

* various code improvements, error link for deprecation of `now scale ls`

* improve help

* make error more specific to deployment

* use new error output utilities for `now deploy`

* make some requires conditional

* default command style fix

* add reusable dc validation and normalization utilities

* start doing dc / region validation in scale

* refactor deploy to use reusable dc / region utils

* add slug support for warn util

* add success helper

* improve `scale` command

* add `responseErrorMessage` helper

* add `now.fetch()` helper

* remove console.log

* tweak output

* draft of verification step

* better errors

* implement (customizable) verification timeout

* bump now-host api to v3

* finish verification

* improve verification and sanitization

* improve copy

* fix ctrl+c during scale

* fix max scale in the absense of max

* improved rules saving

* fix listing the context you're running `now list` under

* add context name to list commands from slots

* improve --no-verify

* add 'elapsed' utility to print out the elapsed time nicely

* add per-dc timers

* improve debug helper to save date, improve time helper to log eagerly

* log every request, automatically

* tweak

* general tweaks to `now deploy`

* pass additional now config fields

* refactor `now rm`

* begin `inspect` command

* bump fetch-h2

* nearly complete new inspect command

* add `(dev)` to --version while in development

* fix 404 error if app is not matched

* improve scaling

* pass event types to the events endpoint

* fix file uploads

* fix passing a deployment hostname with trailing `/`

* fetch events only for non-static

* include uid in inspect

* finish up events

* reduce one indent by recommendation of @leo

* fix debugging for `now ls`

* Always return and exit at top-level in now.js

* improved scale message

* more elegant way of exiting, allowing for resource cleanup & faster

* flowify

* fix strange error which happens when orderly cleanup is done

* flow

* flow fix

* invoke now.close()

* improve list indentation

* refactor alias

* exit clean

* improve fallthrough entry in path alias

* make scale exit properly

* fix closing agent for inspection

* add type of deployment to ls

* better error handling of 403

* improve list style

* various algorithmic improvements

* Certificates refactor to consume the new API (#1210)

* Adapt cert command to the new api

* Use the new certs api for cert command

* Console log certs table and point to the right endpoint

* Remove unused certs client file

* Refactor certs commands

* Fix access to args

* Always close client

* Refactor alias (#1216)

* remove unnecessary file

* reads events from /deployment/:id/events endpoint (#1219)

* add polling (#1220)

* add polling

* hack to prevent partial json to be unluckily parsed in _flush

* cleanupAndResolveCalled to prevent running twice

* call onOpen only of going to 'log'. also call from cleanup

* callOnOpenOnce, don't reject on stream error, polling to finish

* fix eraseLines, make cleanup routine reject

* remove build-logger.js

* restored printEvent from deleted build-logger.js

* print locations of instance events

* bump api versions

* Switch now logs to events endpoint (#1223)

* move eraseLines to onRetry. show error in onRetry

* move printEvents to 'sh/util/events.js'

* use printEvents in `now logs` command

* pass printEvent to events.js

* make both follow and non-follow modes work

* remove socket.io

* improve logs command

* clarify team context

* Refactor alias

* Use ellapsed util in stamp

* use v3

* Refactor alias (#1224)

* Refactor alias

* Use ellapsed util in stamp

* Improvements

* Fix unit tests

* Ensure body exists when copying error attrs

* Add hook to close socket and wait message on process exit

* More retries when verifying the DNS records in alias

* Remove nowExit event listener on close

* Add remaning DCs message right away on alias

* Consistent timestamp when creating a deployment + scale dcs

* Ignore flow error

* Remove not needed now.close from alias

* Remove not needed now.close from inspect

* Bugfix: bind context to close socket handler

* Better error handling for scale command

* Now logs limit (#1226)

* restored -n LIMIT cli arg

* show date in format usabe for since and until

* pass direction and limit to endpoint

* implement follow mode after backwards slice

* add query, fix linefeeds, strip term commands

* implement head argument

* better logs default

* logs: fix -o raw mode, fix all mode

* Add verification for deploy

* Run integration tests using random email address

* Fix flow errors

* Fix wrong scale check

* Finish deploy on state READY

* Correct URL parsing

* Bumped Node.js to the latest version

* Output node version

* fix url display

* Returned URLs

* Improve messages in scale

* Clear URLs

* Strip ANSI codes

* Better logging messages for deploy

* Print ls to console instead of stderr

* Add create certificate certificate and ensure verification is done for a domain

* Write success in alias to stdout

* clearURL in stdout for alias test

* Update scale integration test

* Use stdout for scale success message

* Write alias rm response to stdout

* Refactor alias rm to use fetch from now client

* Fix tests"
c70d86c738610d640615697a2e9d68a1b5d37f9b,Javi Velasco,2018-03-29 17:58:57+00:00,Guillermo Rauch,2018-03-29 17:58:57+00:00,"Add expectedPrice check (#1215)

* Add expectedPrice check

* Add expectedPrice to domain buy method"
ab8f7e21a3e4f4a406c64eae53111b6112267bce,Leo Lamprecht,2018-03-28 01:16:18+00:00,Leo Lamprecht,2018-03-28 01:18:36+00:00,Run scheduled tests on Linux and unscheduled on macOS (#1213)
b7f56a6b9def902215cd3dab9166e6c90503b393,Leo Lamprecht,2018-03-28 01:16:18+00:00,GitHub,2018-03-28 01:16:18+00:00,Run scheduled tests on Linux and unscheduled on macOS (#1213)
2212130beb927fea79537c450c28de153bc2b2ff,Leo Lamprecht,2018-03-28 00:01:36+00:00,Leo Lamprecht,2018-03-28 00:01:36+00:00,10.2.2
294171ed37cd4e408c5621fea668717a5ab457fe,Leo Lamprecht,2018-03-27 23:41:10+00:00,Leo Lamprecht,2018-03-27 23:55:16+00:00,Run integration tests on Linux (#1212)
c025aa75963a0f705bdb3ff861d501a9c3527499,Bart Deslagmulder,2018-03-22 21:03:08+00:00,Leo Lamprecht,2018-03-27 23:55:10+00:00,Fix typos (#1208)
73035bd54912a2cf1bd2d1cf5c93ed11354af7d3,Guillermo Rauch,2018-03-26 19:19:37+00:00,Leo Lamprecht,2018-03-27 23:55:04+00:00,Explain how to run it locally
3a3fdef1a82dc61cd9c94b637f85c5e10362ff25,Leo Lamprecht,2018-03-27 23:42:16+00:00,Leo Lamprecht,2018-03-27 23:42:16+00:00,11.0.0-canary.33
7602daaaefee7db3e18c50a6b54135c8a3780d30,Leo Lamprecht,2018-03-27 23:41:10+00:00,GitHub,2018-03-27 23:41:10+00:00,Run integration tests on Linux (#1212)
6d5b6c6e7303d2641fc6a5949cbcf0abeea9e5c4,Guillermo Rauch,2018-03-26 19:19:37+00:00,Leo Lamprecht,2018-03-27 23:25:35+00:00,Explain how to run it locally
f44e177e4370b23a4e0bc8bfc9d7fd677e589efa,Bart Deslagmulder,2018-03-22 21:03:08+00:00,Guillermo Rauch,2018-03-22 21:03:08+00:00,Fix typos (#1208)
137552beede2add5790b80ad07d968d79e26ea4b,Leo Lamprecht,2018-03-17 03:04:48+00:00,Leo Lamprecht,2018-03-17 03:04:48+00:00,10.2.1
8bca751e8e088b9fd38f9b516c557aaa059b3a10,Leo Lamprecht,2018-03-17 02:49:49+00:00,Leo Lamprecht,2018-03-17 02:57:00+00:00,"Added scheduled CI tests (#1199)

* Added scheduled CI tests

* Run every hour"
b26228ebdeaf6b7ba2b5423158b86bf646c699f9,Nathan Rajlich,2018-03-17 02:42:26+00:00,Leo Lamprecht,2018-03-17 02:56:56+00:00,"Gracefully handle no `scale` object being returned (#1200)

* Gracefully handle no `scale` object being returned

* Fixed tests"
0e43f85176722a23cb3da3d725b8d6a578cf57a8,Leo Lamprecht,2018-03-17 02:56:19+00:00,Leo Lamprecht,2018-03-17 02:56:19+00:00,11.0.0-canary.32
11e645f33461fcc36570bc20cfc25be75b4264b2,Leo Lamprecht,2018-03-17 02:49:49+00:00,GitHub,2018-03-17 02:49:49+00:00,"Added scheduled CI tests (#1199)

* Added scheduled CI tests

* Run every hour"
10eb83207b9d5e5da157a3624167dbf24f1c758d,Nathan Rajlich,2018-03-17 02:42:26+00:00,Leo Lamprecht,2018-03-17 02:42:26+00:00,"Gracefully handle no `scale` object being returned (#1200)

* Gracefully handle no `scale` object being returned

* Fixed tests"
3a16b092f2cdc3b346e7f5dc03cf50cd2d36e9e5,Leo Lamprecht,2018-03-17 01:44:45+00:00,Leo Lamprecht,2018-03-17 01:44:45+00:00,10.2.0
889d30322feceff31a24fe348fb76d0545d3fe69,Nathan Rajlich,2018-03-17 01:27:39+00:00,Leo Lamprecht,2018-03-17 01:37:37+00:00,"Log the DC(s) that the deployment has been scaled to (#1197)

* Log the DC(s) that the deployment has been scaled to

* Fix Flow error"
ed66a4b7f003ded863dbcc4211bf1a1ea6edef15,Leo Lamprecht,2018-03-17 01:24:19+00:00,Leo Lamprecht,2018-03-17 01:37:29+00:00,"Pinned CI images (#1195)

* Pinned CI images

* Ignored error file

* Switched to different version"
7b31ea29a18c0e47de80b2447376935f632a8006,Guillermo Rauch,2018-03-17 01:04:13+00:00,Leo Lamprecht,2018-03-17 01:37:12+00:00,Note about canary development
70ef3433a8e1aa0e99940727dd0de2f3eeb5bce8,Guillermo Rauch,2018-03-17 01:01:18+00:00,Leo Lamprecht,2018-03-17 01:37:02+00:00,Update readme.md
efd3d97305355a158f32c961b1842e6ac3471747,Leo Lamprecht,2018-03-17 01:31:34+00:00,Leo Lamprecht,2018-03-17 01:31:34+00:00,11.0.0-canary.31
05ba34f602c3d485d2c2cc49e51415cc5e2561aa,Nathan Rajlich,2018-03-17 01:27:39+00:00,Leo Lamprecht,2018-03-17 01:27:39+00:00,"Log the DC(s) that the deployment has been scaled to (#1197)

* Log the DC(s) that the deployment has been scaled to

* Fix Flow error"
cff85f78af4ca4ac870b0cb2db1d064697c31572,Leo Lamprecht,2018-03-17 01:24:19+00:00,GitHub,2018-03-17 01:24:19+00:00,"Pinned CI images (#1195)

* Pinned CI images

* Ignored error file

* Switched to different version"
cb015d821936a4e673120a324d31e1582a873961,Guillermo Rauch,2018-03-17 01:04:13+00:00,GitHub,2018-03-17 01:04:13+00:00,Note about canary development
50bd83abd8305a88657ebc1755fbc687dcac0513,Guillermo Rauch,2018-03-17 01:01:18+00:00,GitHub,2018-03-17 01:01:18+00:00,Update readme.md
ce7d48283078d6df7d90750d73c8b99c3e7efca6,Volker Rose,2018-03-15 18:02:15+00:00,Leo Lamprecht,2018-03-16 21:06:27+00:00,"Fix waiting message appearance on `now ls` (#1192)

* Added debounced waiting message to `list` command

Refs #1167, #1166

* Integrated debouncing directly into wait function

Refs #1167, #1166

* Moved debouncing in `wait` module directly to `wait` function

Refs #1167, #1166

* Added test for `wait`function

Refs #1167, #1166

* Removes oboslete logging from `wait` utitlity

* Removed semis

* Removed semis

* Make sense of it

* Bumped lockfile

* Moved stopping of spinner right before first output within `now ls`"
6e48216234c5f6b99793bb33ee5ce64950f9003a,Naoyuki Kanezawa,2018-03-15 23:31:19+00:00,Leo Lamprecht,2018-03-16 21:06:21+00:00,Added support for multiple regions (#1191)
05299eefb05a77555d561054b503374caa4fc3ee,Volker Rose,2018-03-14 20:48:21+00:00,Leo Lamprecht,2018-03-16 21:05:45+00:00,"Added debounced waiting message to `now ls` (#1178)

* Added debounced waiting message to `list` command

Refs #1167, #1166

* Integrated debouncing directly into wait function

Refs #1167, #1166

* Moved debouncing in `wait` module directly to `wait` function

Refs #1167, #1166

* Added test for `wait`function

Refs #1167, #1166

* Removes oboslete logging from `wait` utitlity

* Removed semis

* Removed semis

* Make sense of it

* Bumped lockfile"
a360a0b3f13eb7584a472fb4b6fc946142cc6ef0,Leo Lamprecht,2018-03-15 23:32:29+00:00,Leo Lamprecht,2018-03-15 23:32:29+00:00,11.0.0-canary.30
d819f5dc931fae6d6595a11b79995fa6de95c928,Naoyuki Kanezawa,2018-03-15 23:31:19+00:00,Leo Lamprecht,2018-03-15 23:31:19+00:00,Added support for multiple regions (#1191)
08508d15557931e358d98306c9a0d227dc935f91,Volker Rose,2018-03-15 18:02:15+00:00,Guillermo Rauch,2018-03-15 18:02:15+00:00,"Fix waiting message appearance on `now ls` (#1192)

* Added debounced waiting message to `list` command

Refs #1167, #1166

* Integrated debouncing directly into wait function

Refs #1167, #1166

* Moved debouncing in `wait` module directly to `wait` function

Refs #1167, #1166

* Added test for `wait`function

Refs #1167, #1166

* Removes oboslete logging from `wait` utitlity

* Removed semis

* Removed semis

* Make sense of it

* Bumped lockfile

* Moved stopping of spinner right before first output within `now ls`"
4a6290bd1a9348d3467621d6229ce72bdd71bb43,Leo Lamprecht,2018-03-14 20:53:08+00:00,Leo Lamprecht,2018-03-14 20:53:08+00:00,11.0.0-canary.29
a226f6bffaf5797d9914c489b768fea8a6982d5a,Volker Rose,2018-03-14 20:48:21+00:00,Leo Lamprecht,2018-03-14 20:48:21+00:00,"Added debounced waiting message to `now ls` (#1178)

* Added debounced waiting message to `list` command

Refs #1167, #1166

* Integrated debouncing directly into wait function

Refs #1167, #1166

* Moved debouncing in `wait` module directly to `wait` function

Refs #1167, #1166

* Added test for `wait`function

Refs #1167, #1166

* Removes oboslete logging from `wait` utitlity

* Removed semis

* Removed semis

* Make sense of it

* Bumped lockfile"
059882fdb9e366e2199aeaa4bfb010f63e121695,Leo Lamprecht,2018-03-14 03:47:35+00:00,Leo Lamprecht,2018-03-14 03:47:35+00:00,10.1.6
cf079e70d27be9f054496ce80eeaf60841c9f821,Leo Lamprecht,2018-03-11 04:51:32+00:00,Leo Lamprecht,2018-03-11 04:57:34+00:00,Added Spectrum badge (#1184)
49c470d131e8bdbf353017339335fcc7a9a85b22,Leo Lamprecht,2018-03-11 02:26:50+00:00,Leo Lamprecht,2018-03-11 04:57:26+00:00,"Show better errors messages (#1182)

* Added support for fallback error

* Better errors for uploading files

* Ensure all errors are covered

* Formatted properly

* Added a few tests

* Wrapped up tests"
3df6f62af8dcf8d48c4371782dfbb088c4fe7e61,Leo Lamprecht,2018-03-11 04:51:50+00:00,Leo Lamprecht,2018-03-11 04:51:50+00:00,11.0.0-canary.27
c9966aaf84be2bb459424b1e80e0e245bb06632b,Leo Lamprecht,2018-03-11 04:51:32+00:00,GitHub,2018-03-11 04:51:32+00:00,Added Spectrum badge (#1184)
d6c63921b86a71152acfa70b284a9b7e00d37520,Leo Lamprecht,2018-03-11 03:19:52+00:00,Leo Lamprecht,2018-03-11 03:19:52+00:00,11.0.0-canary.26
8a844f1880aa75b7f0a89d54c3212470f2d16430,Leo Lamprecht,2018-03-11 02:26:50+00:00,GitHub,2018-03-11 02:26:50+00:00,"Show better errors messages (#1182)

* Added support for fallback error

* Better errors for uploading files

* Ensure all errors are covered

* Formatted properly

* Added a few tests

* Wrapped up tests"
650efbac893b62f7c6ec517e5ef3648cd8b64b7f,Leo Lamprecht,2018-03-08 22:17:58+00:00,Leo Lamprecht,2018-03-08 22:17:58+00:00,10.1.5
7b149d0eb7072b8e568867d4489fc138b018ae6f,Leo Lamprecht,2018-03-08 21:59:01+00:00,Leo Lamprecht,2018-03-08 22:13:08+00:00,"New integration test suite added (#1173)

* Proper unit tests

* Made integration tests run in CI

* Added packing to integration tests

* Don't lint test fixtures

* Added missing files

* Added command for local testing

* Correct command for local testing

* Compare client version

* Separate file for helper

* Added micro fixture

* Check OSS confirmation message

* Even better

* Deploy a microservice

* Made it run

* Remove deployment properly

* Clean up everything

* Fixed linting

* Added missing fixtures

* Added missing files

* Fixed linking

* Remove only deployments created in session

* Create alias for deployment

* Wrapped up 10 test

* Try scaling the deployment directly

* Wrapped up the 15 tests

* Ensure files are actually equal

* Test docker deployments

* Made sense of all

* Remove right after

* Set redirect URL properly

* Run integration tests on macOS

* Clean up in the end

* Use existing method to clean up

* Revoke the token properly

* Check for team error

* Wrapped up 18 tests

* Try deploying a static directory

* Try running it in user directory

* Auto-generate integration tests

* Removed Yarn lockfile

* Fixed linting

* Run test only if the one before was successful

* Bumped lockfile

* Removed catching

* Removed useless dependency

* Removed line

* Don't kill app and restore config

* Test properly locally

* Fixed linting

* Fixed properly

* Comment added

* Fixed arguments"
627b570aa09bd42cecf8f54f07caaff8c0dccaaa,Leo Lamprecht,2018-03-08 22:12:18+00:00,Leo Lamprecht,2018-03-08 22:12:18+00:00,11.0.0-canary.25
17c5710b55d3bc34f4743b5aa1908c6ff4f2e44a,Leo Lamprecht,2018-03-08 21:59:01+00:00,GitHub,2018-03-08 21:59:01+00:00,"New integration test suite added (#1173)

* Proper unit tests

* Made integration tests run in CI

* Added packing to integration tests

* Don't lint test fixtures

* Added missing files

* Added command for local testing

* Correct command for local testing

* Compare client version

* Separate file for helper

* Added micro fixture

* Check OSS confirmation message

* Even better

* Deploy a microservice

* Made it run

* Remove deployment properly

* Clean up everything

* Fixed linting

* Added missing fixtures

* Added missing files

* Fixed linking

* Remove only deployments created in session

* Create alias for deployment

* Wrapped up 10 test

* Try scaling the deployment directly

* Wrapped up the 15 tests

* Ensure files are actually equal

* Test docker deployments

* Made sense of all

* Remove right after

* Set redirect URL properly

* Run integration tests on macOS

* Clean up in the end

* Use existing method to clean up

* Revoke the token properly

* Check for team error

* Wrapped up 18 tests

* Try deploying a static directory

* Try running it in user directory

* Auto-generate integration tests

* Removed Yarn lockfile

* Fixed linting

* Run test only if the one before was successful

* Bumped lockfile

* Removed catching

* Removed useless dependency

* Removed line

* Don't kill app and restore config

* Test properly locally

* Fixed linting

* Fixed properly

* Comment added

* Fixed arguments"
86e19e46f5fb7c8e655a088f1b0f6e80ba08ab4c,Leo Lamprecht,2018-03-02 23:35:54+00:00,Leo Lamprecht,2018-03-02 23:35:54+00:00,10.1.4
d57d90381c71fb610574f16264746838328d96d8,Sreeram Jayan,2018-03-02 23:27:43+00:00,Leo Lamprecht,2018-03-02 23:35:47+00:00,"Fixed duplicate deployment type prompt (#1168)

* 1163:Fix duplicate deployment type prompt

* Replace existing assets"
3882c64a1d8b112e802bb491b72c647a242b30da,Leo Lamprecht,2018-03-02 23:28:08+00:00,Leo Lamprecht,2018-03-02 23:28:08+00:00,11.0.0-canary.24
a5a18821ccb124af711890899bed2a1cd37bae3c,Sreeram Jayan,2018-03-02 23:27:43+00:00,Leo Lamprecht,2018-03-02 23:27:43+00:00,"Fixed duplicate deployment type prompt (#1168)

* 1163:Fix duplicate deployment type prompt

* Replace existing assets"
3fb89120f9f5cf611a89db80e9276adfd5d33032,Tim Neutkens,2018-03-02 15:44:22+00:00,Tim Neutkens,2018-03-02 15:44:22+00:00,10.1.3
93daac8be9232225d8288d3d6de3ecfe873ad6a4,Tim Neutkens,2018-03-02 15:40:22+00:00,Tim Neutkens,2018-03-02 15:44:13+00:00,"Remove .ws blocking (#1164)

Allow alias creation for `.ws` domains"
4dc9982f1d1dde3efcdde256ee3e5f335be84503,Tim Neutkens,2018-03-02 15:42:22+00:00,Tim Neutkens,2018-03-02 15:42:22+00:00,11.0.0-canary.23
781f79a87af0589c1734d7e89a946aceaee04d40,Tim Neutkens,2018-03-02 15:40:22+00:00,Matheus Fernandes,2018-03-02 15:40:22+00:00,"Remove .ws blocking (#1164)

Allow alias creation for `.ws` domains"
74b7bf6aebb24cf3b777e8c4318dc82de93da2bc,Leo Lamprecht,2018-03-02 05:45:15+00:00,Leo Lamprecht,2018-03-02 05:45:15+00:00,10.1.2
003dac4d1ea7aefe3bdd8b9da1a4010bb97865f1,Sergio Xalambr,2018-03-02 05:31:52+00:00,Leo Lamprecht,2018-03-02 05:44:57+00:00,Allow aliasing .ws domains (#1161)
7e81abb2b67f1ef38135d5ccca3994d5cb82f0a1,Leo Lamprecht,2018-03-02 05:39:52+00:00,Leo Lamprecht,2018-03-02 05:39:52+00:00,11.0.0-canary.22
2bcac63885146f23bfca49e303c50d02469cc77f,Sergio Xalambr,2018-03-02 05:31:52+00:00,Matheus Fernandes,2018-03-02 05:31:52+00:00,Allow aliasing .ws domains (#1161)
1f8343f350717f0653f59a2ef7bb52dba9bef7df,Leo Lamprecht,2018-03-01 21:07:22+00:00,Leo Lamprecht,2018-03-01 21:07:22+00:00,10.1.1
f27f5180d624b65af263c213012953dec64d0f48,Sreeram Jayan,2018-03-01 20:04:31+00:00,Leo Lamprecht,2018-03-01 21:07:17+00:00,Fixed synchronization timer when deploying (#1160)
baa5fa8019cc39399264c9cf62234b615f3a0014,Leo Lamprecht,2018-03-01 21:00:33+00:00,Leo Lamprecht,2018-03-01 21:00:33+00:00,11.0.0-canary.21
179e88b24fc89207083feb3cb1408a4ffb1ed9e8,Sreeram Jayan,2018-03-01 20:04:31+00:00,Leo Lamprecht,2018-03-01 20:31:02+00:00,Fixed synchronization timer when deploying (#1160)
a9fd348ca2022631e61454733b12d8fda81a32d7,Leo Lamprecht,2018-03-01 08:44:45+00:00,Leo Lamprecht,2018-03-01 08:44:45+00:00,10.1.0
b3ba4e232b6d22189afbb5538290ba9cfada84db,Leo Lamprecht,2018-03-01 08:43:03+00:00,Leo Lamprecht,2018-03-01 08:43:03+00:00,Brought CI configuration in sync with canary
fee759f68d99f24c1f9e4748107f202bd1863699,Leo Lamprecht,2018-03-01 08:40:53+00:00,Leo Lamprecht,2018-03-01 08:42:15+00:00,Removed configuration file for Travis CI
05a6db2956c24d7763c26c767d27bbb9e270ea88,Leo Lamprecht,2018-03-01 08:40:57+00:00,Leo Lamprecht,2018-03-01 08:40:57+00:00,11.0.0-canary.20
ae3a19c4e182b3490885819f2678f3138add0c9c,Leo Lamprecht,2018-03-01 08:40:53+00:00,Leo Lamprecht,2018-03-01 08:40:53+00:00,Removed configuration file for Travis CI
4e29f3fd5d4899d29730a63dd8f4c3bb4869bfdc,Leo Lamprecht,2018-03-01 05:25:32+00:00,Leo Lamprecht,2018-03-01 08:39:25+00:00,Ensure the CI works as intended (#1155)
a7aa1bbff7b203389822314ccb9a173454ca9464,Leo Lamprecht,2018-03-01 04:47:01+00:00,Leo Lamprecht,2018-03-01 08:39:17+00:00,"Fixed GitHub, Bitbucket and GitLab deployments (#1154)"
d741019cb53ebef7f012f3115f0bd3c8c8e0efcf,Leo Lamprecht,2018-03-01 03:20:40+00:00,Leo Lamprecht,2018-03-01 08:39:10+00:00,"Switched from Travis CI to Circle CI (#1152)

* Added Circle CI config

* Test it

* Ensure machine property

* Another missing part

* Run one after another

* Use the same image in all jobs

* Made it shorter

* Sweeter syntax

* Split into separate jobs

* Pass on data

* Pass everything around

* Renamed workflow

* Fan-out/fan-in

* Added new build badge

* Better link for badge

* Named commands

* Show help

* Properly attach node modules for deployment

* Capitalized titles

* Install correct uploader

* Use correct image

* Try the uploading

* Try it like this

* Set user and repo

* Filter binaries properly

* Compress binaries only when deploying

* Switched image for deployment step

* Removed Cache

* Install Go properly

* Removed slash

* Set env var correctly for Go

* Use separate jobs

* Cache Go dependencies

* Only upload on tagged builds

* Separate jobs for channels

* Corrected description

* Optimized for maximum performance

* Removed dependency

* Use lockfile for checksum"
48b6c7bab88a0d61711e2df23c5c0dc924520e6d,Leo Lamprecht,2018-02-28 22:11:52+00:00,Leo Lamprecht,2018-03-01 08:39:03+00:00,"Added support multiple path arguments (#1148)

* Switched commands to Yarn

* Only use what's needed

* Use correct command to link

* Show proper deploying output

* Handle everything

* Log it when doing it

* Make all others work

* Fixed syntax

* Removed semis

* Fixed rest

* Make GitHub uploads work again

* Made it work properly

* Ensure paths are relative

* Made it work

* Bumped lockfile

* Fixed code

* Corrected code

* Properly debug

* Fixed linting

* Made it work correctly

* Fixed missing parenthesis"
f536ac3f03a79ae97b1f666cbb7281e942632903,Leo Lamprecht,2018-03-01 08:23:34+00:00,Leo Lamprecht,2018-03-01 08:23:34+00:00,11.0.0-canary.19
87f289bef136fec7efeeb4e7e73fbfca7c05c51a,Leo Lamprecht,2018-03-01 08:23:30+00:00,Leo Lamprecht,2018-03-01 08:23:30+00:00,Only upload compressed binaries
82d8c26e1eb1464eb2155bd4d96fbfd947fbfdec,Leo Lamprecht,2018-03-01 08:16:44+00:00,Leo Lamprecht,2018-03-01 08:16:44+00:00,11.0.0-canary.18
ee2843bd3b4624eb06e039b403892517bd290d8f,Leo Lamprecht,2018-03-01 08:16:40+00:00,Leo Lamprecht,2018-03-01 08:16:40+00:00,Ensure commands are being run correctly
40ff0071d75eb64074fef8db235cb1df0ff89741,Leo Lamprecht,2018-03-01 08:08:10+00:00,Leo Lamprecht,2018-03-01 08:08:10+00:00,11.0.0-canary.17
b7e374cae5fe2edfb29a104077ef24913c779ad6,Leo Lamprecht,2018-03-01 08:08:08+00:00,Leo Lamprecht,2018-03-01 08:08:08+00:00,Corrected input for CI
d42d695d85b9dd6c08ebb4aea75cdcfb11e915e8,Leo Lamprecht,2018-03-01 08:04:13+00:00,Leo Lamprecht,2018-03-01 08:04:13+00:00,11.0.0-canary.16
1d0943eaa464df61655cb3e601c3f5243178e46c,Leo Lamprecht,2018-03-01 08:04:08+00:00,Leo Lamprecht,2018-03-01 08:04:08+00:00,Upload each binary separately
290e187925622bb40cd29ab23a395c4aafe774df,Leo Lamprecht,2018-03-01 07:47:48+00:00,Leo Lamprecht,2018-03-01 07:47:48+00:00,11.0.0-canary.15
0031b273cb4776c2635f93ae2ee1d3861da84d8c,Leo Lamprecht,2018-03-01 07:47:45+00:00,Leo Lamprecht,2018-03-01 07:47:45+00:00,Ensure uploaded releases are compressed
92f50411059a08dd63d61ad0800aeab64689ca6f,Leo Lamprecht,2018-03-01 07:40:39+00:00,Leo Lamprecht,2018-03-01 07:40:39+00:00,11.0.0-canary.14
614e403b431052aaa63601da4c0f3611ab00dc81,Leo Lamprecht,2018-03-01 07:40:30+00:00,Leo Lamprecht,2018-03-01 07:40:30+00:00,Resolve the full path of binaries
abbbee14faad3bcf471212bd0c00c4813c2cfbf8,Leo Lamprecht,2018-03-01 07:28:39+00:00,Leo Lamprecht,2018-03-01 07:28:39+00:00,11.0.0-canary.13
34f52809e732c7c83fb00c95785d4380a617e66a,Leo Lamprecht,2018-03-01 07:28:28+00:00,Leo Lamprecht,2018-03-01 07:28:28+00:00,Corrected path for uploading release
20aad0e7e9955c86ba7ac3cc39dd8c89625b4faf,Leo Lamprecht,2018-03-01 07:22:44+00:00,Leo Lamprecht,2018-03-01 07:22:44+00:00,11.0.0-canary.12
51171cd9e7077263189126ad85f366442d8ff89c,Leo Lamprecht,2018-03-01 07:22:39+00:00,Leo Lamprecht,2018-03-01 07:22:39+00:00,Use different library for uploading releases
9fea77787bbed18c75b86395f69b35f358c62498,Leo Lamprecht,2018-03-01 06:57:32+00:00,Leo Lamprecht,2018-03-01 06:57:32+00:00,11.0.0-canary.11
297f07e4e4195a66ee4b2c30ceab0bd66f532a5c,Leo Lamprecht,2018-03-01 06:57:20+00:00,Leo Lamprecht,2018-03-01 06:57:20+00:00,Use custom regular expressions for publishing
220cea23cd74cc6a8e00dde8e457c2208b1f54ce,Leo Lamprecht,2018-03-01 06:31:31+00:00,Leo Lamprecht,2018-03-01 06:31:31+00:00,11.0.0-canary.10
4594540c2e0481fc20a7db020dbc5312923e505d,Leo Lamprecht,2018-03-01 06:31:24+00:00,Leo Lamprecht,2018-03-01 06:31:24+00:00,Properly handle branch detection
b61d05c8f8f9e59a33481302271e18b0fc850ae6,Leo Lamprecht,2018-03-01 06:27:39+00:00,Leo Lamprecht,2018-03-01 06:27:39+00:00,11.0.0-canary.9
e7383d32ded397c10b7f59bb6a5c12a3767b59d8,Leo Lamprecht,2018-03-01 06:27:28+00:00,Leo Lamprecht,2018-03-01 06:27:28+00:00,Detect tags and branches correctly
83e1f67052c425cbcdb167e05299f8b9de7cc228,Leo Lamprecht,2018-03-01 06:11:20+00:00,Leo Lamprecht,2018-03-01 06:11:20+00:00,11.0.0-canary.8
c6f12dcb35dbe53653e5dd685b1054c7512d3222,Leo Lamprecht,2018-03-01 06:11:00+00:00,GitHub,2018-03-01 06:11:00+00:00,Handle tag checkouts properly (#1157)
d1554d07d4218caf88bc2c34b27029f1464969c7,Leo Lamprecht,2018-03-01 05:43:57+00:00,Leo Lamprecht,2018-03-01 05:43:57+00:00,11.0.0-canary.7
c4793b9a8821022297658dbba7c7866353e46634,Leo Lamprecht,2018-03-01 05:42:10+00:00,Guillermo Rauch,2018-03-01 05:42:10+00:00,Deploy and publish using Circle CI (#1156)
0a8f874096828d18e71d2cc06eacf92187b09578,Leo Lamprecht,2018-03-01 05:28:56+00:00,Leo Lamprecht,2018-03-01 05:28:56+00:00,11.0.0-canary.6
14e4cd7bfbb27e32d600846e8f05e73d7f2085fa,Leo Lamprecht,2018-03-01 05:25:32+00:00,Guillermo Rauch,2018-03-01 05:25:32+00:00,Ensure the CI works as intended (#1155)
0c97fb327f9d61743a858fd77e043d25d5d78f16,Leo Lamprecht,2018-03-01 04:49:54+00:00,Leo Lamprecht,2018-03-01 04:49:54+00:00,11.0.0-canary.5
4acb5c464b8927939daa6e78984fdb4b3d1cbe72,Leo Lamprecht,2018-03-01 04:47:01+00:00,GitHub,2018-03-01 04:47:01+00:00,"Fixed GitHub, Bitbucket and GitLab deployments (#1154)"
80e66ad010986018e9184e7dc5384b88ff0f8595,Leo Lamprecht,2018-03-01 03:20:40+00:00,GitHub,2018-03-01 03:20:40+00:00,"Switched from Travis CI to Circle CI (#1152)

* Added Circle CI config

* Test it

* Ensure machine property

* Another missing part

* Run one after another

* Use the same image in all jobs

* Made it shorter

* Sweeter syntax

* Split into separate jobs

* Pass on data

* Pass everything around

* Renamed workflow

* Fan-out/fan-in

* Added new build badge

* Better link for badge

* Named commands

* Show help

* Properly attach node modules for deployment

* Capitalized titles

* Install correct uploader

* Use correct image

* Try the uploading

* Try it like this

* Set user and repo

* Filter binaries properly

* Compress binaries only when deploying

* Switched image for deployment step

* Removed Cache

* Install Go properly

* Removed slash

* Set env var correctly for Go

* Use separate jobs

* Cache Go dependencies

* Only upload on tagged builds

* Separate jobs for channels

* Corrected description

* Optimized for maximum performance

* Removed dependency

* Use lockfile for checksum"
21cb5f2ad333348e50280391fec2a4b89b52fe9b,Leo Lamprecht,2018-02-28 22:13:05+00:00,Leo Lamprecht,2018-02-28 22:13:05+00:00,11.0.0-canary.4
f4c47fd3f4a9f1bb46a036986b965ac2feed354b,Leo Lamprecht,2018-02-28 22:11:52+00:00,GitHub,2018-02-28 22:11:52+00:00,"Added support multiple path arguments (#1148)

* Switched commands to Yarn

* Only use what's needed

* Use correct command to link

* Show proper deploying output

* Handle everything

* Log it when doing it

* Make all others work

* Fixed syntax

* Removed semis

* Fixed rest

* Make GitHub uploads work again

* Made it work properly

* Ensure paths are relative

* Made it work

* Bumped lockfile

* Fixed code

* Corrected code

* Properly debug

* Fixed linting

* Made it work correctly

* Fixed missing parenthesis"
497871672504730df5318dd1d17cabbc06a75bac,Leo Lamprecht,2018-02-28 20:37:43+00:00,Leo Lamprecht,2018-02-28 20:37:43+00:00,10.0.3
c9358c4877994462a83f7b2f9c0b2f1e80490843,Leo Lamprecht,2018-02-28 20:28:48+00:00,Leo Lamprecht,2018-02-28 20:30:46+00:00,Ensure `chalk` is being used properly (#1151)
14d198cd30db88c6acd74ca8f5aad753114448a7,Leo Lamprecht,2018-02-28 20:30:19+00:00,Leo Lamprecht,2018-02-28 20:30:19+00:00,11.0.0-canary.3
809c41d21a9b1b810302db83f6238fd3e03b3db8,Leo Lamprecht,2018-02-28 20:28:48+00:00,Nathan Rajlich,2018-02-28 20:28:48+00:00,Ensure `chalk` is being used properly (#1151)
3469220226688156b719b6e137fb17d20f5fa610,Leo Lamprecht,2018-02-28 19:51:30+00:00,Leo Lamprecht,2018-02-28 19:51:30+00:00,10.0.2
f4715dfdecdeb7f9d7d53b513e28cfd99f0b2142,Leo Lamprecht,2018-02-28 19:48:59+00:00,Leo Lamprecht,2018-02-28 19:49:35+00:00,Added missing variable references (#1150)
8f8ee5fb73df035db5127561152011ea868a03f9,Leo Lamprecht,2018-02-28 19:49:09+00:00,Leo Lamprecht,2018-02-28 19:49:09+00:00,11.0.0-canary.2
be754d861988d739fa79e6645063dd54f4b982c5,Leo Lamprecht,2018-02-28 19:48:59+00:00,GitHub,2018-02-28 19:48:59+00:00,Added missing variable references (#1150)
2ff7f2c68c3e8ad7a93f14ae5494d5edd1c1df69,Leo Lamprecht,2018-02-28 18:37:25+00:00,Leo Lamprecht,2018-02-28 18:37:25+00:00,10.0.1
2c95f2c9a9d068daf192c82a7bcea66dee0b1bb4,Leo Lamprecht,2018-02-28 18:34:19+00:00,Leo Lamprecht,2018-02-28 18:37:04+00:00,Bumped lockfile
c8d25306201956164df69a9e4d6fdc813e711388,Matheus Fernandes,2018-02-28 18:31:05+00:00,Leo Lamprecht,2018-02-28 18:36:56+00:00,Ensure new deployments are working correctly (#1149)
2eb736f97d3f3e9d66f65dbd4b865a8d187c47a7,Nathan Rajlich,2018-02-28 00:59:25+00:00,Leo Lamprecht,2018-02-28 18:36:50+00:00,"Add new `output` helper functions (#1146)

* Add ""output"" helper

* Cleanup and use `output` helper in Now class

* Fixes

* Update `chalk` to v2.3.1

* More logging

* Finish `now deploy` using new output functions

* Remove `.only()`

* Tests are silent

* Prevent double `> >` at the beginning of the user log line"
c73c0ba9f402ddd983b8354ebcb14bf8e81bb827,Leo Lamprecht,2018-02-28 18:34:42+00:00,Leo Lamprecht,2018-02-28 18:34:42+00:00,11.0.0-canary.1
04470a68c0fac53f7938c76528eb516bae28ea94,Leo Lamprecht,2018-02-28 18:34:19+00:00,Leo Lamprecht,2018-02-28 18:34:19+00:00,Bumped lockfile
f72dcefebd76d2943e8322e94240f388f95b4287,Matheus Fernandes,2018-02-28 18:31:05+00:00,Leo Lamprecht,2018-02-28 18:31:05+00:00,Ensure new deployments are working correctly (#1149)
030317ba67b7d2e2a02dd01a9e3a665761e915b5,Nathan Rajlich,2018-02-28 00:59:25+00:00,GitHub,2018-02-28 00:59:25+00:00,"Add new `output` helper functions (#1146)

* Add ""output"" helper

* Cleanup and use `output` helper in Now class

* Fixes

* Update `chalk` to v2.3.1

* More logging

* Finish `now deploy` using new output functions

* Remove `.only()`

* Tests are silent

* Prevent double `> >` at the beginning of the user log line"
d36df53043a52b0670f9d3cac86eb89896d500f7,Leo Lamprecht,2018-02-27 18:23:30+00:00,Leo Lamprecht,2018-02-27 18:23:30+00:00,10.0.0
d8faea8332cd0d665cd35e9015affb715e3b604a,Leo Lamprecht,2018-02-27 01:13:52+00:00,Leo Lamprecht,2018-02-27 01:17:23+00:00,"Don't upload meta files for static deployments (#1144)

* Don't upload meta files for static deployments

* Updated lockfile

* Ignore dockerfile as well"
42f131086fb2051daee8cd34f90a48ac6c78869f,Sam Pal,2018-02-27 00:17:53+00:00,Leo Lamprecht,2018-02-27 01:17:17+00:00,"Made `now <file>` work (#1139)

* Added functionality for single static file deployments.

* Added friendly error message to now alias command

* Deleted temp files

* Removed empty line

* Make it work

* Removed alias message

* Corrected intentation

* Brought variable back

* Removed it

* Set correct name

* Bumped lockfile"
0450be2653f3f6fee83b10817e9cc04b9981997b,Conner Petzold,2018-02-26 23:41:59+00:00,Leo Lamprecht,2018-02-27 01:17:12+00:00,"Add output mode option to logs command (#1131)

* Fix readme typo

* Add raw output mode"
ccb1900af72e40ae527aa160bd00993a0e0a1954,Leo Lamprecht,2018-02-27 01:16:04+00:00,Leo Lamprecht,2018-02-27 01:16:04+00:00,10.0.0-canary.30
dd9b75cbf1334d3a5ebe30e2ef77ee30382ee17e,Leo Lamprecht,2018-02-27 01:13:52+00:00,GitHub,2018-02-27 01:13:52+00:00,"Don't upload meta files for static deployments (#1144)

* Don't upload meta files for static deployments

* Updated lockfile

* Ignore dockerfile as well"
4401e4d3eec9efadf9ab602d81e5f8b2cfc81a54,Sam Pal,2018-02-27 00:17:53+00:00,Leo Lamprecht,2018-02-27 00:17:53+00:00,"Made `now <file>` work (#1139)

* Added functionality for single static file deployments.

* Added friendly error message to now alias command

* Deleted temp files

* Removed empty line

* Make it work

* Removed alias message

* Corrected intentation

* Brought variable back

* Removed it

* Set correct name

* Bumped lockfile"
a6fe7953e34ea9a54c064b35647a246d7fa2fefd,Conner Petzold,2018-02-26 23:41:59+00:00,Leo Lamprecht,2018-02-26 23:41:59+00:00,"Add output mode option to logs command (#1131)

* Fix readme typo

* Add raw output mode"
d72ab61e6f6748684f11fa7f7aee98a2c6eb4372,Ayushi Singh,2018-02-26 06:17:36+00:00,Leo Lamprecht,2018-02-26 06:20:38+00:00,"Added friendly error message to `now alias` (#1140)

* Added friendly error message to now alias command

* Delete .login.js.swp

* Delete .domains.js.swp"
d96473f5ed0860eedc139795bbbe57ae3e33eccb,Leo Lamprecht,2018-02-26 06:11:20+00:00,Leo Lamprecht,2018-02-26 06:20:33+00:00,Removed undefined variable reference (#1143)
f5fefa88a4d682887441b321982e607acf5863d6,Leo Lamprecht,2018-02-26 06:19:31+00:00,Leo Lamprecht,2018-02-26 06:19:31+00:00,10.0.0-canary.29
b3234d2f5e964dda7c2af5d6303549b32c9337ac,Ayushi Singh,2018-02-26 06:17:36+00:00,Leo Lamprecht,2018-02-26 06:17:36+00:00,"Added friendly error message to `now alias` (#1140)

* Added friendly error message to now alias command

* Delete .login.js.swp

* Delete .domains.js.swp"
dfe8163dafa2c2c493340a0d1c56afe23e669b17,Leo Lamprecht,2018-02-26 06:11:20+00:00,GitHub,2018-02-26 06:11:20+00:00,Removed undefined variable reference (#1143)
4391dae4b06de132538df7bbd5e5c6eedda103b1,Leo Lamprecht,2018-02-25 05:28:55+00:00,Leo Lamprecht,2018-02-25 05:29:06+00:00,Bumped lockfile
e991904d026b7ac23e8b5da28647e12951b3aec3,Guillermo Rauch,2018-02-05 02:51:15+00:00,Leo Lamprecht,2018-02-25 05:25:46+00:00,bump email-prompt to fix #1104
6d40ccb04a8402c94879388cd734ac3c6a3f66b7,Shaleen Jain,2018-01-29 15:28:00+00:00,Leo Lamprecht,2018-02-25 05:24:57+00:00,Add remaining missing 'console.log' (#1098)
e2518666ea84c1995397df93758304fe9507cccd,Olli Vanhoja,2018-01-26 14:22:44+00:00,Leo Lamprecht,2018-02-25 05:22:15+00:00,"Remove whois check when using domains add command

When a domain is added with `now domains add` command it's often
because the user needs a working Zone file before changing the NS
records at the registrar or due to issues with the whois service.
Therefore the command is almost always run with `-f` flag.

Remove the `--force` option and always add send the domain add
request without client side verification."
e83fb66513e486eb37f248ee74123e3e0f97ccfc,Nathan Rajlich,2018-02-06 20:12:21+00:00,Leo Lamprecht,2018-02-25 05:20:47+00:00,"Don't print the alias `uid` upon removal (#1109)

It's irrelevant information and now the uids are very long,
so let's not bother printing that information."
3f5d3b32383a040d397df54a779b96deb49fdb50,Robert Koch,2018-02-24 19:30:02+00:00,Leo Lamprecht,2018-02-25 05:07:54+00:00,"Corrected whitelisting mechanism for `now.json` (#1126)

* Updated how files are retrieved so whitelisted files specified in now.json or package.json are always added to the deployment, even if they are excluded in gitignore or npmignore.

* added new tests to check whitelisting of files in now.json and package.json and fixed/modified old tests to work with new behaviour.

* Ran linter, removed console statements.

* Wrote some documentation, fixed some typos, and removed some comments. Also ran prettier.

* Use spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Corrected indentation

* Corrected indentation

* Corrected indentation"
db2c31d9170ef47ff8777eb324bd3b7046f1fa97,Leo Lamprecht,2018-02-25 04:06:23+00:00,Leo Lamprecht,2018-02-25 05:03:58+00:00,Pinned missing dependencies
b8306ef3ba7e5963af7b4a8c3c713251ea967797,Sam Pal,2018-02-25 03:47:30+00:00,Leo Lamprecht,2018-02-25 05:03:53+00:00,Added missing deps to package.json (#1137)
94ac6b92722f883366535188e2bc85363b25d1a2,Leo Lamprecht,2018-02-25 04:07:45+00:00,Leo Lamprecht,2018-02-25 04:07:45+00:00,10.0.0-canary.28
86da78030884562866ecae7207bcf0d81b2c3dca,Leo Lamprecht,2018-02-25 04:06:23+00:00,Leo Lamprecht,2018-02-25 04:06:30+00:00,Pinned missing dependencies
eab8692a58791e6f3f0d6059351a41273c27f332,Sam Pal,2018-02-25 03:47:30+00:00,Matheus Fernandes,2018-02-25 03:47:30+00:00,Added missing deps to package.json (#1137)
c1d16f9965b52492a18220b0ed4b60828e6d3d88,Sreeram Jayan,2018-02-24 19:13:17+00:00,Leo Lamprecht,2018-02-25 03:34:35+00:00,Display confirmation message before adding a domain (#1130)
a63cb28723f0c7b04df2269fb4193c9dfd3ce90d,Guillermo Rauch,2018-02-24 19:11:46+00:00,Leo Lamprecht,2018-02-25 03:34:25+00:00,Improved error for environment variable type (#1135)
837dd124eab69688eccc2897a52ef11c1ca780d1,Pranay Prakash,2018-02-22 20:33:48+00:00,Leo Lamprecht,2018-02-25 03:33:06+00:00,Circumvent attempt to connect logger if reusing an old deployment (#1132)
7177cad90599b3b70101dad4bfbd0ff82e56c38b,Leo Lamprecht,2018-02-25 03:29:29+00:00,Leo Lamprecht,2018-02-25 03:29:29+00:00,10.0.0-canary.27
c2f7f118e913755e89606998913f5ff2452cb3ed,Matt Mazzola,2018-02-25 03:23:47+00:00,Leo Lamprecht,2018-02-25 03:29:23+00:00,"Remove Microsoft Azure deployment section from README.md (#1138)

Apparently azure deployment was listed in the docs before it was actually supported by now-cli.

I just went through and become confused by the same error message and found the issue:
https://github.com/zeit/now-cli/issues/787

It seems it's easy to remove this section and add it back later when the feature is added"
3be116555242f0d050aba2cd270d7dd2681c034f,Matt Mazzola,2018-02-25 03:23:47+00:00,Guillermo Rauch,2018-02-25 03:23:47+00:00,"Remove Microsoft Azure deployment section from README.md (#1138)

Apparently azure deployment was listed in the docs before it was actually supported by now-cli.

I just went through and become confused by the same error message and found the issue:
https://github.com/zeit/now-cli/issues/787

It seems it's easy to remove this section and add it back later when the feature is added"
844f94012313a1c9a90ef0d5225da11c6abac5ea,Leo Lamprecht,2018-02-24 19:32:24+00:00,Leo Lamprecht,2018-02-24 19:32:24+00:00,10.0.0-canary.26
cb7c81c66ab243ce469426dd662fa3f14964db16,Robert Koch,2018-02-24 19:30:02+00:00,Leo Lamprecht,2018-02-24 19:30:02+00:00,"Corrected whitelisting mechanism for `now.json` (#1126)

* Updated how files are retrieved so whitelisted files specified in now.json or package.json are always added to the deployment, even if they are excluded in gitignore or npmignore.

* added new tests to check whitelisting of files in now.json and package.json and fixed/modified old tests to work with new behaviour.

* Ran linter, removed console statements.

* Wrote some documentation, fixed some typos, and removed some comments. Also ran prettier.

* Use spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Use more spaces

* Corrected indentation

* Corrected indentation

* Corrected indentation"
3a009fccf0122438119023fa66c4f6a5eb18413c,Sreeram Jayan,2018-02-24 19:13:17+00:00,Leo Lamprecht,2018-02-24 19:13:17+00:00,Display confirmation message before adding a domain (#1130)
e6f2364c71617d12a8ff4f4e0b64d164a5a81113,Guillermo Rauch,2018-02-24 19:11:46+00:00,Leo Lamprecht,2018-02-24 19:11:46+00:00,Improved error for environment variable type (#1135)
aed5cdb1a8f7f2a23cace2073cc2d3bc76d19b71,Pranay Prakash,2018-02-22 20:33:48+00:00,Tim Neutkens,2018-02-22 20:33:48+00:00,Circumvent attempt to connect logger if reusing an old deployment (#1132)
44fd600abb91cbe3eaf5bf6cf5d3613ec9ff9887,Leo Lamprecht,2018-02-18 22:42:35+00:00,Leo Lamprecht,2018-02-18 22:42:35+00:00,9.3.3
17f593e004cf758f9d5cf8b4973acea0eca56147,Leo Lamprecht,2018-02-17 02:21:02+00:00,Leo Lamprecht,2018-02-17 02:25:18+00:00,Shortened message (#1125)
37636d84d9e7b656f0659c6bd2028f38102767e7,Leo Lamprecht,2018-02-17 02:21:55+00:00,Leo Lamprecht,2018-02-17 02:21:55+00:00,10.0.0-canary.25
5a87eafb87443df5f1f888677c1d6e0d0fd91245,Leo Lamprecht,2018-02-17 02:21:02+00:00,Guillermo Rauch,2018-02-17 02:21:02+00:00,Shortened message (#1125)
8cf760d9d549b422d0408e96fc9757621b010af8,Leo Lamprecht,2018-02-17 01:41:20+00:00,Leo Lamprecht,2018-02-17 01:53:26+00:00,"Perfected OSS confirmation prompt (#1124)

* Start using v3 endpoint

* Make it work

* Make it bullet proof

* Hide message the second time

* Make sense

* Show upgrade link in note

* Removed useless space

* Show upgrade notice in all cases"
31c11dc06c06463ecdae96aed837a9ee9321e8a6,Leo Lamprecht,2018-02-17 01:43:04+00:00,Leo Lamprecht,2018-02-17 01:43:04+00:00,10.0.0-canary.24
ef66da7f3f82b9123e48d08ff9dc15453afaf92e,Leo Lamprecht,2018-02-17 01:41:20+00:00,GitHub,2018-02-17 01:41:20+00:00,"Perfected OSS confirmation prompt (#1124)

* Start using v3 endpoint

* Make it work

* Make it bullet proof

* Hide message the second time

* Make sense

* Show upgrade link in note

* Removed useless space

* Show upgrade notice in all cases"
8bc1b3f715b2a05db964948282bd592448a2f9ab,Leo Lamprecht,2018-02-13 19:38:04+00:00,Leo Lamprecht,2018-02-13 19:44:44+00:00,How to do a release
cceafabcd303b32bfb6c9cdcc3ace17866e0d155,Leo Lamprecht,2018-02-13 19:38:04+00:00,GitHub,2018-02-13 19:38:04+00:00,How to do a release
7c19bda30db7b27179b416a6cd08e7936a5af268,Leo Lamprecht,2018-02-13 19:31:01+00:00,Leo Lamprecht,2018-02-13 19:31:01+00:00,9.3.2
2588253b3d19ea76f869c85958670390a1bc4922,Olli Vanhoja,2018-02-13 19:28:09+00:00,Leo Lamprecht,2018-02-13 19:29:30+00:00,"Removed WHOIS fallback (#1121)

The fallback is no longer needed."
5b56483a93e0b24373569d3ef5e964ab95dfaca0,Leo Lamprecht,2018-02-13 19:28:23+00:00,Leo Lamprecht,2018-02-13 19:28:23+00:00,10.0.0-canary.23
3d52e8aeacf51860afb2490188a76e834fd31f4e,Olli Vanhoja,2018-02-13 19:28:09+00:00,Leo Lamprecht,2018-02-13 19:28:09+00:00,"Removed WHOIS fallback (#1121)

The fallback is no longer needed."
50d59902d636d1464164b13243b9976861e79ea6,Matheus Fernandes,2018-02-13 12:47:57+00:00,Matheus Fernandes,2018-02-13 12:47:57+00:00,10.0.0-canary.22
f4c14be2f26f3832ccbe4f63156bba62863e7b65,Matheus Fernandes,2018-02-13 12:46:03+00:00,Matheus Fernandes,2018-02-13 12:46:03+00:00,Release 9.3.1
86bf608be318473d805e5962fa62bef97d288fc9,Matheus Fernandes,2018-02-12 19:57:14+00:00,Matheus Fernandes,2018-02-13 12:45:30+00:00,Add more missing `console.log`s (#1116)
cf62cdd6f2322bdcbf34b5006acf6187391b487d,Olli Vanhoja,2018-01-30 12:09:58+00:00,Matheus Fernandes,2018-02-13 12:45:04+00:00,"Fix creating a new default certificate

The commit 6e476ad45466e62a45d5ee1d34fcb0199337c646 broke
creating new certificates with `now certs create`."
5ccb953be17f54231df51ab3a74327ce9d379613,Matheus Fernandes,2018-02-12 19:57:14+00:00,Leo Lamprecht,2018-02-12 19:57:14+00:00,Add more missing `console.log`s (#1116)
0d7b3a27e942ed2dd9988c8801609a9deaac6762,Leo Lamprecht,2018-02-10 05:59:42+00:00,Leo Lamprecht,2018-02-10 05:59:42+00:00,9.3.0
587201f7234668e2cf96b5d200a884110496878a,Nathan Rajlich,2018-02-10 05:50:03+00:00,Leo Lamprecht,2018-02-10 05:59:31+00:00,Add `now alias rm -y` (#1114)
caeceb7edc72d770bc60fbb3853a26e93c5effd9,Leo Lamprecht,2018-02-10 05:56:56+00:00,Leo Lamprecht,2018-02-10 05:56:56+00:00,10.0.0-canary.21
6d9aa9134f2f4334791926906c823679faf2f6aa,Nathan Rajlich,2018-02-10 05:50:03+00:00,Leo Lamprecht,2018-02-10 05:50:03+00:00,Add `now alias rm -y` (#1114)
f392aa6d7a62306bba4115e5f9ebc92759532c9c,Leo Lamprecht,2018-02-10 05:05:14+00:00,Leo Lamprecht,2018-02-10 05:05:14+00:00,10.0.0-canary.20
f92e592533d3ba6d57547771f38570906a3c7e05,Matheus Fernandes,2018-02-10 04:59:20+00:00,Leo Lamprecht,2018-02-10 05:04:14+00:00,"Fix many issues with `now teams`  (#1113)

* Correctly extract the subcommand

* Check team name charset upon every keypress

* Add missing `console.log`s

* Add missing `process.stdout.write`

* Add more missing console.logs

* Add missing return

* Add more missing `process.stdout.write`

* We have to treat `switch` differently, unfortunately

* No need to print the team id

* Fix grammar"
9b23518273549085bb9f84646abefaeab5f7e531,Leo Lamprecht,2018-02-10 05:02:04+00:00,Leo Lamprecht,2018-02-10 05:02:04+00:00,9.2.10
527650f2102180101321b1f4f331dbeadced9d2f,Matheus Fernandes,2018-02-10 04:59:20+00:00,Leo Lamprecht,2018-02-10 04:59:20+00:00,"Fix many issues with `now teams`  (#1113)

* Correctly extract the subcommand

* Check team name charset upon every keypress

* Add missing `console.log`s

* Add missing `process.stdout.write`

* Add more missing console.logs

* Add missing return

* Add more missing `process.stdout.write`

* We have to treat `switch` differently, unfortunately

* No need to print the team id

* Fix grammar"
cc9f9eb85d8f9d15c3e38a6d26056520a58cf3e7,Leo Lamprecht,2018-02-09 23:20:23+00:00,Leo Lamprecht,2018-02-09 23:20:23+00:00,10.0.0-canary.19
8f4991ab708ee0bb57fa2296ae43ce5d551414d4,Naoyuki Kanezawa,2018-02-09 23:14:46+00:00,Leo Lamprecht,2018-02-09 23:20:19+00:00,fix help message for session-affinity (#1112)
7b983814710839780c87b7489de0e39c8b2b6008,Leo Lamprecht,2018-02-09 23:17:38+00:00,Leo Lamprecht,2018-02-09 23:17:38+00:00,9.2.9
615756552dc92bc9d5c2cbbe652bfc2d0729c3cf,Naoyuki Kanezawa,2018-02-09 23:14:46+00:00,Guillermo Rauch,2018-02-09 23:14:46+00:00,fix help message for session-affinity (#1112)
8c16f4282644bc0561105731301cf6c49fe7de14,Leo Lamprecht,2018-02-07 01:05:37+00:00,Leo Lamprecht,2018-02-07 01:05:37+00:00,10.0.0-canary.18
c4259323d38bcc28450a18c51f7f39b5f3c8ee05,Matheus Fernandes,2018-02-07 01:00:58+00:00,Leo Lamprecht,2018-02-07 01:03:00+00:00,"Fixed `now teams add` and `now cc add` (#1110)

* Add missing `stdout.write`s

* Add missing console.log

* Add missing await"
7b8c3934e2bf55ce81e2b806f62de5272b7a081c,Leo Lamprecht,2018-02-07 01:02:26+00:00,Leo Lamprecht,2018-02-07 01:02:26+00:00,9.2.8
930d085fe3f69b665e165e4bd294893e024dd365,Matheus Fernandes,2018-02-07 01:00:58+00:00,Leo Lamprecht,2018-02-07 01:00:58+00:00,"Fixed `now teams add` and `now cc add` (#1110)

* Add missing `stdout.write`s

* Add missing console.log

* Add missing await"
d9469898f23b9ea59f21ef97b846d65902a3d4a3,Leo Lamprecht,2018-02-06 20:13:08+00:00,Leo Lamprecht,2018-02-06 20:13:08+00:00,10.0.0-canary.17
e9c2d3790a047b35ef36fae54e48d52da9417321,Nathan Rajlich,2018-02-06 20:12:21+00:00,Guillermo Rauch,2018-02-06 20:12:21+00:00,"Don't print the alias `uid` upon removal (#1109)

It's irrelevant information and now the uids are very long,
so let's not bother printing that information."
635a99cb316acdff9a093091accb3c7c0ceecac6,Guillermo Rauch,2018-02-05 02:51:15+00:00,Guillermo Rauch,2018-02-05 02:51:15+00:00,bump email-prompt to fix #1104
aae2f5619f896886c1d838b3863831b42c514ef1,Leo Lamprecht,2018-01-31 22:17:16+00:00,Leo Lamprecht,2018-01-31 22:17:16+00:00,10.0.0-canary.16
d0bc560625b72d15079bd517465fe2e31f047141,Olli Vanhoja,2018-01-30 12:09:58+00:00,Olli Vanhoja,2018-01-30 15:23:19+00:00,"Fix creating a new default certificate

The commit 6e476ad45466e62a45d5ee1d34fcb0199337c646 broke
creating new certificates with `now certs create`."
1572fefe8c2765d1d9f04036cdf62b344290ac26,Shaleen Jain,2018-01-29 15:28:00+00:00,Qix,2018-01-29 15:28:00+00:00,Add remaining missing 'console.log' (#1098)
1508486dc1b6f23be051d47e340f08cbbdf90172,Olli Vanhoja,2018-01-26 14:22:44+00:00,Olli Vanhoja,2018-01-27 12:57:56+00:00,"Remove whois check when using domains add command

When a domain is added with `now domains add` command it's often
because the user needs a working Zone file before changing the NS
records at the registrar or due to issues with the whois service.
Therefore the command is almost always run with `-f` flag.

Remove the `--force` option and always add send the domain add
request without client side verification."
c43c6c2c3c4c462c06e6e4b1657fda82f414a33e,Leo Lamprecht,2018-01-20 19:32:20+00:00,Leo Lamprecht,2018-01-20 19:32:20+00:00,9.2.7
5cb792bfbfb874c921193ed18f493731ddec6b47,Igor Klopov,2018-01-20 19:28:25+00:00,Leo Lamprecht,2018-01-20 19:31:42+00:00,"Update pkg to the latest stable version (#1090)

* update pkg to 4.3.0 stable

* Bumped lockfile"
56c0385d534679019401451d0b392dd8772f6184,Leo Lamprecht,2018-01-20 19:23:45+00:00,Leo Lamprecht,2018-01-20 19:31:37+00:00,Show link for update message (#1091)
372b31461ce9aff8e9369a3973fcc6e58b00abcf,Leo Lamprecht,2018-01-20 19:29:08+00:00,Leo Lamprecht,2018-01-20 19:29:08+00:00,10.0.0-canary.15
aa63219743f00ed8d2f12a554b4376ad8978443d,Igor Klopov,2018-01-20 19:28:25+00:00,Leo Lamprecht,2018-01-20 19:28:25+00:00,"Update pkg to the latest stable version (#1090)

* update pkg to 4.3.0 stable

* Bumped lockfile"
0ffaf5afd7694910404cb254fbf1e9a91e8ee43e,Leo Lamprecht,2018-01-20 19:23:45+00:00,GitHub,2018-01-20 19:23:45+00:00,Show link for update message (#1091)
00f8d88578c69f3d0ad82112b0a226a9da8ea156,Leo Lamprecht,2018-01-20 10:32:13+00:00,Leo Lamprecht,2018-01-20 10:32:13+00:00,9.2.6
e4ffdc024e5d068e4d8726e5c83127994f51cc1d,Leo Lamprecht,2018-01-20 10:28:22+00:00,Leo Lamprecht,2018-01-20 10:30:59+00:00,Pull releases directly from GitHub (#1089)
b166bc790383bed3326b7b3e4c7127e5a5188b07,Leo Lamprecht,2018-01-20 10:28:42+00:00,Leo Lamprecht,2018-01-20 10:28:42+00:00,10.0.0-canary.14
d5369224a421713338d12bd69a2d37ff6ad48ea3,Leo Lamprecht,2018-01-20 10:28:22+00:00,GitHub,2018-01-20 10:28:22+00:00,Pull releases directly from GitHub (#1089)
a1ca1c047b83bdf03537aa12c9c0f5350cc992ce,Leo Lamprecht,2018-01-19 17:31:14+00:00,Leo Lamprecht,2018-01-19 17:31:14+00:00,9.2.5
8cc806c4d7d2dfd425cbb29dbedb9f7858c48c96,Leo Lamprecht,2018-01-19 17:18:46+00:00,Leo Lamprecht,2018-01-19 17:30:58+00:00,"Bring back progress bar (#1088)

* Bundle with compression

* Force gzip to overwrite existing compressions

* Clear directory

* Bring back progress bar

* Start using Cloudinary

* Always ungzip, since we're only shipping .gz

* Only upload .gz files

* Don't test after deployment

Exiting with 1 here doesn't crash test"
a9bd2b8818941a42ca44844f6d003974407af7de,Leo Lamprecht,2018-01-19 17:25:08+00:00,Leo Lamprecht,2018-01-19 17:25:08+00:00,10.0.0-canary.13
ee3e7f0288bdb3cccd5abacd71b134e6828f1cc9,Leo Lamprecht,2018-01-19 17:18:46+00:00,GitHub,2018-01-19 17:18:46+00:00,"Bring back progress bar (#1088)

* Bundle with compression

* Force gzip to overwrite existing compressions

* Clear directory

* Bring back progress bar

* Start using Cloudinary

* Always ungzip, since we're only shipping .gz

* Only upload .gz files

* Don't test after deployment

Exiting with 1 here doesn't crash test"
038c5c0e38597c1787cd17368f06b8dc7050b4e8,Sreeram Jayan,2018-01-19 12:00:08+00:00,Leo Lamprecht,2018-01-19 12:00:54+00:00,"Allow `--type` to overwrite config (#1086)

* Fix DNS record typo (#929)

* 1064:Check if deployment type is specified/configured."
2525cd9efbdf45fae385b3a09b67ea662bd94b6f,Sreeram Jayan,2018-01-19 12:00:08+00:00,Leo Lamprecht,2018-01-19 12:00:08+00:00,"Allow `--type` to overwrite config (#1086)

* Fix DNS record typo (#929)

* 1064:Check if deployment type is specified/configured."
cc1e2462f439da255425b38574844b0b73b4500b,Leo Lamprecht,2018-01-18 22:26:49+00:00,Leo Lamprecht,2018-01-18 22:26:49+00:00,10.0.0-canary.12
d1071e1cd22217967e583e08cf803d40c611a416,Leo Lamprecht,2018-01-18 22:23:12+00:00,Leo Lamprecht,2018-01-18 22:26:37+00:00,Ensure we're catching errors
c37f3602fb5ce0be6b289ca6269dd9af8ccd5cdd,Matheus Fernandes,2018-01-18 21:38:32+00:00,Leo Lamprecht,2018-01-18 22:26:31+00:00,Remove broken function call
ca8e26f85728eceddf0ea684cf824a592ff11551,Leo Lamprecht,2018-01-18 22:25:59+00:00,Leo Lamprecht,2018-01-18 22:25:59+00:00,"Revert ""Revert ""Show an even better message""""

This reverts commit a12fd8cbe2428ad8db5e0574ee10564c5139288a."
af468f2c8e710ed80eed19e8bc9e8f939ee2d3cb,Leo Lamprecht,2018-01-18 22:25:46+00:00,Leo Lamprecht,2018-01-18 22:25:46+00:00,"Revert ""Revert ""Temporarily disable progress bar""""

This reverts commit 0c83b0fddf5dd646b3f925cb650c5cf6f8329f8c."
96084a09c0b94956dba71582e56d2e6787d6a2b1,Leo Lamprecht,2018-01-18 22:23:24+00:00,Leo Lamprecht,2018-01-18 22:23:24+00:00,9.2.4
a0a8ac46f51f6a353f694693493811454684ec38,Leo Lamprecht,2018-01-18 22:23:12+00:00,Leo Lamprecht,2018-01-18 22:23:12+00:00,Ensure we're catching errors
5f30faabdeead32cd7bab5b0c352395bbd418f55,Leo Lamprecht,2018-01-18 21:57:38+00:00,Leo Lamprecht,2018-01-18 21:57:38+00:00,10.0.0-canary.11
0c83b0fddf5dd646b3f925cb650c5cf6f8329f8c,Leo Lamprecht,2018-01-18 21:57:20+00:00,Leo Lamprecht,2018-01-18 21:57:20+00:00,"Revert ""Temporarily disable progress bar""

This reverts commit 1edaa48351cdde4dfe89cf25f850d065bb031406."
a12fd8cbe2428ad8db5e0574ee10564c5139288a,Leo Lamprecht,2018-01-18 21:57:12+00:00,Leo Lamprecht,2018-01-18 21:57:12+00:00,"Revert ""Show an even better message""

This reverts commit a5ddfa1ba0364ad6feb9dfdb2a2b42f4d5d25e99."
ee8084c98aa2c731cb0a727f5d2983ee0bb005fa,Matheus Fernandes,2018-01-18 21:38:43+00:00,Matheus Fernandes,2018-01-18 21:38:43+00:00,9.2.3
f00f8748988a4fbcf72d80bb44c48d35634f9aef,Matheus Fernandes,2018-01-18 21:38:32+00:00,Matheus Fernandes,2018-01-18 21:38:32+00:00,Remove broken function call
8d752a9bc792844893c6b7de600f93f7bd724fca,Leo Lamprecht,2018-01-18 21:08:20+00:00,Leo Lamprecht,2018-01-18 21:08:20+00:00,9.2.2
7c891ac7d23176bcf7127f393f0ac1090b478a8e,Leo Lamprecht,2018-01-18 21:03:51+00:00,Leo Lamprecht,2018-01-18 21:07:30+00:00,Show an even better message
f95cbe080f6b93f11af6570bf19e632b4ecf850c,Leo Lamprecht,2018-01-18 21:02:47+00:00,Leo Lamprecht,2018-01-18 21:07:25+00:00,Temporarily disable progress bar
147580785fdeaf21b01cd630d4ba543b2e5425a5,Leo Lamprecht,2018-01-18 21:06:06+00:00,Leo Lamprecht,2018-01-18 21:06:06+00:00,10.0.0-canary.10
a5ddfa1ba0364ad6feb9dfdb2a2b42f4d5d25e99,Leo Lamprecht,2018-01-18 21:03:51+00:00,Leo Lamprecht,2018-01-18 21:03:51+00:00,Show an even better message
1edaa48351cdde4dfe89cf25f850d065bb031406,Leo Lamprecht,2018-01-18 21:02:47+00:00,Leo Lamprecht,2018-01-18 21:02:47+00:00,Temporarily disable progress bar
b0238d827c44b6b4262e0365b50b826f52799726,Leo Lamprecht,2018-01-18 20:28:21+00:00,Leo Lamprecht,2018-01-18 20:28:21+00:00,9.2.1
cde0620851df86adfb1c5e7576555b5350c45105,Leo Lamprecht,2018-01-18 20:23:36+00:00,Leo Lamprecht,2018-01-18 20:28:18+00:00,Check content encoding while installing (#1083)
e188d373480d5a08924d8a939163a31d7ef50674,Leo Lamprecht,2018-01-18 20:24:12+00:00,Leo Lamprecht,2018-01-18 20:24:12+00:00,10.0.0-canary.9
d08d9d91aedb5a504767b49e01bdb0e033714c93,Leo Lamprecht,2018-01-18 20:23:36+00:00,Matheus Fernandes,2018-01-18 20:23:36+00:00,Check content encoding while installing (#1083)
e87a5b8644da19d20330b4a57a1f7f0c654272bf,Leo Lamprecht,2018-01-18 17:48:13+00:00,Leo Lamprecht,2018-01-18 17:48:13+00:00,9.2.0
76bf75d3bf806e990201a1c2a2735ef401329fde,Olli Vanhoja,2018-01-18 17:42:39+00:00,Leo Lamprecht,2018-01-18 17:48:07+00:00,"Allow overwriting custom certs with auto-renewable ones (#1082)

Currently it's not possible to create a new auto-renewable
certificate if a custom certificate already exist for a domain,
as we only allow the other direction from the cli.

Add a command flag that allows overwriting a custom certificate
with an auto-renewable certificate.

`now cert create --overwrite zeit.rocks`"
de12cba1df3d76ff777c751ea7bf99abbbcfab08,Leo Lamprecht,2018-01-18 17:44:26+00:00,Leo Lamprecht,2018-01-18 17:44:26+00:00,10.0.0-canary.8
6e476ad45466e62a45d5ee1d34fcb0199337c646,Olli Vanhoja,2018-01-18 17:42:39+00:00,Leo Lamprecht,2018-01-18 17:42:39+00:00,"Allow overwriting custom certs with auto-renewable ones (#1082)

Currently it's not possible to create a new auto-renewable
certificate if a custom certificate already exist for a domain,
as we only allow the other direction from the cli.

Add a command flag that allows overwriting a custom certificate
with an auto-renewable certificate.

`now cert create --overwrite zeit.rocks`"
f8defc04999821f4e9e9930d3e24aadb07ffe290,Leo Lamprecht,2018-01-14 14:07:03+00:00,Leo Lamprecht,2018-01-14 14:07:03+00:00,9.1.0
7ad65696f6dc1957932b1da86229b8060279e853,Leo Lamprecht,2018-01-14 14:02:45+00:00,Leo Lamprecht,2018-01-14 14:02:45+00:00,Brought branch in sync with canary
df4e15ed5695df37319eb4a941a14aa2b2e6d5df,Leo Lamprecht,2018-01-14 13:47:32+00:00,Leo Lamprecht,2018-01-14 13:47:32+00:00,10.0.0-canary.7
b6a4e3d2f4bfbbe6cbb26682a30e46771aa2df55,Leo Lamprecht,2018-01-14 13:47:17+00:00,Leo Lamprecht,2018-01-14 13:47:17+00:00,Fixed package description
ac81d4657c5c569571e99a2cf3a7430f80a9b9fa,Leo Lamprecht,2018-01-14 11:08:26+00:00,Leo Lamprecht,2018-01-14 13:41:48+00:00,"Properly error on wrong token and handle team (#1073)

* Properly error on wrong token and handle team

* Better wording"
b81488ac6b8d173ca52b53b4df87ab436b1d4247,Leo Lamprecht,2018-01-13 19:19:39+00:00,Leo Lamprecht,2018-01-14 13:41:41+00:00,Ignore npm lockfile
d1bbf85f37440c38525f01176605fd17829a27a3,Gillian,2018-01-12 18:15:09+00:00,Leo Lamprecht,2018-01-14 13:41:35+00:00,Changed error message to match correct command (#1071)
7f71e693c5bbb4f5e66dbc20ae9fefe0f5b2dc9d,Leo Lamprecht,2018-01-12 11:21:34+00:00,Leo Lamprecht,2018-01-14 13:41:26+00:00,"Use package for checking for updates (#1070)

* Use package for checking for updates

* Set dep for dev"
5d16bf5976a8b2d716f8dad1c85b3517fed9eaf1,Leo Lamprecht,2018-01-12 09:27:11+00:00,Leo Lamprecht,2018-01-14 13:40:24+00:00,Removed triangle from company name
c7addf7c473cfd34c0cbad8c303896de22d61979,Leo Lamprecht,2018-01-11 22:46:19+00:00,Leo Lamprecht,2018-01-14 13:40:11+00:00,"Properly detect API property

This is a hotfix!"
68562d9f6f93c6dbf3b0c296e87cd52100e9bb7d,Leo Lamprecht,2018-01-11 22:08:39+00:00,Leo Lamprecht,2018-01-14 13:40:04+00:00,"Added `api` option to local config (#1069)

* Always load local config

* Ensure local path can be specified by flag

* Respect path properly

* Catch more

* Stop catching

* Catch better"
e2eb3180c110443a5e20aab7ed5d9b94700c4991,Igor Klopov,2018-01-08 17:01:58+00:00,Leo Lamprecht,2018-01-14 13:39:56+00:00,"Fix absent deployment for alias (#1063)

* fix absent deployment for alias

* deploymentDeletedStub and fix in row composition"
a6af5c8696fc4ba8ef006137487a58e547d8621a,Tim Neutkens,2018-01-08 17:01:36+00:00,Leo Lamprecht,2018-01-14 13:39:51+00:00,Error explanation for unauthorized domain access (#1059)
c4969b17dd86e8216d79b9c85cd04adf1bae01b0,Olli Vanhoja,2018-01-06 14:21:17+00:00,Leo Lamprecht,2018-01-14 13:39:45+00:00,Add an example of adding a CAA record (#1062)
0d8b4a8386bb45eaf4984858b37869e530301b7c,Tim Neutkens,2018-01-03 19:52:27+00:00,Leo Lamprecht,2018-01-14 13:39:39+00:00,"Catch path alias scaling (#1057)

* Catch path alias scaling

* Better wording

* Fix grammar mistake"
9bf7963f019f49c43c9578b1b0f308c7a5574d24,Leo Lamprecht,2018-01-14 11:11:01+00:00,Leo Lamprecht,2018-01-14 11:11:01+00:00,10.0.0-canary.6
28069beddca584a4e6e875aaae96e64f15150f17,Leo Lamprecht,2018-01-14 11:08:26+00:00,GitHub,2018-01-14 11:08:26+00:00,"Properly error on wrong token and handle team (#1073)

* Properly error on wrong token and handle team

* Better wording"
b25af90e9923ef87a2118d5103e84b13bc7f9c77,Leo Lamprecht,2018-01-13 19:19:39+00:00,Leo Lamprecht,2018-01-13 19:19:39+00:00,Ignore npm lockfile
7258da68a8a1c5129f5f9d5b31ff09cbf5b3113c,Leo Lamprecht,2018-01-12 19:29:48+00:00,Leo Lamprecht,2018-01-12 19:29:48+00:00,10.0.0-canary.5
17cb604161756082c6bac83e453741be062ad038,Gillian,2018-01-12 18:15:09+00:00,Leo Lamprecht,2018-01-12 18:15:09+00:00,Changed error message to match correct command (#1071)
4d31dd23fdcf05a225fa2f29334a1f511c349714,Leo Lamprecht,2018-01-12 11:22:23+00:00,Leo Lamprecht,2018-01-12 11:22:23+00:00,10.0.0-canary.4
1898fe813eaddde4c3dedba66727026d7b799b4b,Leo Lamprecht,2018-01-12 11:21:34+00:00,Guillermo Rauch,2018-01-12 11:21:34+00:00,"Use package for checking for updates (#1070)

* Use package for checking for updates

* Set dep for dev"
7d8547063425c56d873197f59bfa111d41722938,Leo Lamprecht,2018-01-12 09:27:11+00:00,GitHub,2018-01-12 09:27:11+00:00,Removed triangle from company name
37d0584a30790f0646e557903e9e59a7481182c6,Leo Lamprecht,2018-01-11 22:46:46+00:00,Leo Lamprecht,2018-01-11 22:46:46+00:00,10.0.0-canary.3
59598e529bdeef24758b5f75689cc44bdf9d17ff,Leo Lamprecht,2018-01-11 22:46:19+00:00,Leo Lamprecht,2018-01-11 22:46:28+00:00,"Properly detect API property

This is a hotfix!"
de9c1ca9a96f9f2007224a03400937443af1e59d,Leo Lamprecht,2018-01-11 22:11:27+00:00,Leo Lamprecht,2018-01-11 22:11:27+00:00,10.0.0-canary.2
1c131f2f2535be9c8770e04542cb15ea6090c873,Leo Lamprecht,2018-01-11 22:08:39+00:00,Guillermo Rauch,2018-01-11 22:08:39+00:00,"Added `api` option to local config (#1069)

* Always load local config

* Ensure local path can be specified by flag

* Respect path properly

* Catch more

* Stop catching

* Catch better"
c608435e323c594e630ab11ec291e47267255928,Leo Lamprecht,2018-01-10 11:04:28+00:00,Leo Lamprecht,2018-01-10 11:04:28+00:00,10.0.0-canary.1
78d7c5cef582bbe8b2f73f09e9f27eaa8009d623,Igor Klopov,2018-01-08 17:01:58+00:00,Leo Lamprecht,2018-01-08 17:01:58+00:00,"Fix absent deployment for alias (#1063)

* fix absent deployment for alias

* deploymentDeletedStub and fix in row composition"
f2c5230424c62e6f8feeff523779c955282b2bc3,Tim Neutkens,2018-01-08 17:01:36+00:00,Leo Lamprecht,2018-01-08 17:01:36+00:00,Error explanation for unauthorized domain access (#1059)
b4636ca7efc5192175f62dda530a283bd62bb9bd,Olli Vanhoja,2018-01-06 14:21:17+00:00,Leo Lamprecht,2018-01-06 14:21:17+00:00,Add an example of adding a CAA record (#1062)
a357e21bb693321ebf33728dac40c19b1d9142a9,Tim Neutkens,2018-01-03 19:52:27+00:00,GitHub,2018-01-03 19:52:27+00:00,"Catch path alias scaling (#1057)

* Catch path alias scaling

* Better wording

* Fix grammar mistake"
c93eed08fca8474d45fcaaae68b883d3b22dc2c2,Leo Lamprecht,2017-12-22 11:15:40+00:00,Leo Lamprecht,2017-12-22 11:15:40+00:00,9.0.1
33e7e410d2ee0ca216f040e7657e0bebf61a4457,Leo Lamprecht,2017-12-22 11:12:06+00:00,Leo Lamprecht,2017-12-22 11:15:34+00:00,Improved usage information
7811824a2c04df9daa93c1fd8e2ece7aea53811a,Leo Lamprecht,2017-12-22 11:06:44+00:00,Leo Lamprecht,2017-12-22 11:15:30+00:00,Corrected company name in license
d6bd77b903c59840991f409738adeb6e6a3600de,Leo Lamprecht,2017-12-22 11:12:41+00:00,Leo Lamprecht,2017-12-22 11:12:41+00:00,9.0.0-canary.25
b36b970006616c37fbac9543cbed0748f17f42f1,Leo Lamprecht,2017-12-22 11:12:06+00:00,Leo Lamprecht,2017-12-22 11:12:06+00:00,Improved usage information
f8969d2561c6a87b5c95d901952e770526bba778,Leo Lamprecht,2017-12-22 11:06:44+00:00,Leo Lamprecht,2017-12-22 11:06:44+00:00,Corrected company name in license
132eabf450864342b66ab15b4fa9d4dc13b41bfa,Leo Lamprecht,2017-12-21 18:21:30+00:00,Leo Lamprecht,2017-12-21 18:21:30+00:00,9.0.0
ae1db0097ec4dcfce37dbc48e4a15023062d8dfb,Guillermo Rauch,2017-11-20 10:06:02+00:00,Leo Lamprecht,2017-12-21 16:07:36+00:00,"Overhauled deployment events and logs (#993)

* add jsonlines dep

* overhauled deployment events and logs output

* suppress http2 warnings

* make wait cancelation idempotent

* improve debugging and event fetching

* include node `--no-warnings` to avoid http2 warnings

* improve instrumentation

* log with info helper

* more consistent output"
d0d8f11e1560dafde2057ddd13cf1a2eea22fce8,Leo Lamprecht,2017-12-21 15:43:06+00:00,Leo Lamprecht,2017-12-21 15:43:06+00:00,Bumped lockfile
05ea32fea1e221fbf0883a0ecdd49fe5557a6d5f,tripott,2017-12-20 20:56:15+00:00,Leo Lamprecht,2017-12-21 15:37:14+00:00,Fixed typo in project configuration docs (#1049)
8bb187f01ec1b495edfa5289e0dd1f6a8c8acb63,Leo Lamprecht,2017-12-20 20:36:37+00:00,Leo Lamprecht,2017-12-21 15:37:08+00:00,"Improved error messages (#1048)

* Improved error messages

* Removed weird messages"
9f18f60fc809989da086c48867b1ad619678db8d,Olli Vanhoja,2017-12-20 18:13:41+00:00,Leo Lamprecht,2017-12-21 15:37:01+00:00,"Optimized the deployment process (#1028)

The do..while loop causes event handlers to be registered
multiple times in case of an error occurs while creating a
deployment after uploading missing files. The loop doesn't
save nothing more than one call to `now.create()`."
c8e20a4038d2020c764b8ba8567a30d12f89408a,Nathan Rajlich,2017-12-20 17:59:38+00:00,Leo Lamprecht,2017-12-21 15:36:56+00:00,"Simplify the `env` parsing logic (#1046)

* Simplify the `env` parsing logic

This should be 100% backwards compatible with the previous
behavior, but with some new additions:

 * When using an Array in `package.json:now.env` or `now.json:env`, you
   may specify the value or secret name after an `=` sign (before, the
   entire string was attempted to be the env var key name, which was
   just wrong _(this is the main ""fix"")_.
 * Specifying `null` as the value of an env var in an Object forces the
   user prompt (before, this was only possibly by using an Array without
   an `=` sign).
 * You may specify an env var on the CLI without an `=` sign and it will
   show the user prompt (kind of silly since the user is invoking the
   command anyways, but this works due to the new normalization)
 * Less converting the env between Array and Object representations.

The code is also simpler to read now, and a few helpful comments added
as well.

* fix `now -e MY_SHELL_VAR` inheriting from user's env"
ef9c3c9c1f09c84403d32e015d3217cc4c0bbc49,Yuri Yakovlev,2017-12-19 12:23:47+00:00,Leo Lamprecht,2017-12-21 15:36:40+00:00,Exit with correct status code (#1045)
e60e8ddc6b1c933b3e6a3eb24191725b545bc367,Nathan Rajlich,2017-12-15 08:11:52+00:00,Leo Lamprecht,2017-12-21 15:36:26+00:00,Reject Errors properly in `now logs -f` (#1041)
fd4c1dea761b06dbd92110baaccde1e09ffcd8a6,Nathan Rajlich,2017-12-11 10:29:59+00:00,Leo Lamprecht,2017-12-21 15:36:01+00:00,"Remove `--base64` argument from `now secret add` (#1033)

It's been broken on the server-side for quite a while now,
and on top of that it's never been clear as to *how* you
get the binary value back out from within the deployment.

For these reasons, let's get rid of the option altogether.

Users who need to encode binary data as the secret value
should encode to base64 manually. For example:

```
$ now secret add my-secret $(echo 'foo' | base64)
```"
243ca1e06a14ad4e9ade93d57a109099846b5442,Nathan Rajlich,2017-12-08 20:31:53+00:00,Leo Lamprecht,2017-12-21 15:35:54+00:00,"Return an empty object early when nothing to prompt (#1032)

* Return an empty object early when nothing to prompt

So that the `console.log()` a few lines down does
not get invoked

* Use `Object.keys()` to iterate over the answers"
6456b004419a7dd58634bdd2cf72a74add84bb9d,Olli Vanhoja,2017-12-08 17:32:50+00:00,Leo Lamprecht,2017-12-21 15:35:48+00:00,"Sort certs by root domain (#1030)

Instead of sorting cert CNs by the full domain we should sort them
by the root domain to group all likely related certs together."
5b17f5f08b1a417e994090a92e87adad26df07ae,Nathan Rajlich,2017-12-07 19:57:21+00:00,Leo Lamprecht,2017-12-21 15:35:42+00:00,"Do not reference `newTeam` when switching to user scope (#1029)

Fixes error:

    $ now switch tootallnate
    > Error! An unexpected error occurred in switch: TypeError: Cannot read property 'slug' of undefined
        at module.exports (/snapshot/now-cli/dist/now.js:2995:81)
        at <anonymous>
        at process._tickCallback (internal/process/next_tick.js:188:7)"
dd4df0ba4c2d67c755bd0898e8c1b9c626d812aa,Leo Lamprecht,2017-12-06 22:32:13+00:00,Leo Lamprecht,2017-12-21 15:35:36+00:00,Upgrade Node.js to the latest version (#1025)
699752f6315c27f72bdb6fb05f55a4bcd59f6926,Olli Vanhoja,2017-12-06 22:03:21+00:00,Leo Lamprecht,2017-12-21 15:35:30+00:00,"Improve domain removal UX (#1022)

- Don't prefix the domain with https as it may not be even using
  https nor have any records
- Don't show domain ID after the domain is removed as it has no
  meaning for cli users"
a31f88848d7fed8e429da09b4cfe27fdc17b1cab,Nathan Rajlich,2017-12-06 22:02:41+00:00,Leo Lamprecht,2017-12-21 15:35:16+00:00,"Pluralize words automatically (#1024)

* use `pluralize` module

Instead of manually formatting these singular vs. plural cases.

Note that `util/alias.js` was previously incorrectly always printing as
plural, which is what let me down this rabbit hole in the first place.

* Bumped pkg version

* Downgrade node temporarily"
065c9363f9b26a00e6c61b0038516fd2d519e349,Leo Lamprecht,2017-12-20 21:37:37+00:00,Leo Lamprecht,2017-12-20 21:37:37+00:00,9.0.0-canary.24
c47302b2aabd2d305495e5a4711f4f0faac1a7f7,tripott,2017-12-20 20:56:15+00:00,Leo Lamprecht,2017-12-20 20:56:15+00:00,Fixed typo in project configuration docs (#1049)
7274d41b43bf8db510a4cd39a162d99ff107026f,Leo Lamprecht,2017-12-20 20:40:39+00:00,Leo Lamprecht,2017-12-20 20:40:39+00:00,9.0.0-canary.23
3f306a1bfb23a416f9ab2fae4cfab1dcb9ecba60,Leo Lamprecht,2017-12-20 20:36:37+00:00,GitHub,2017-12-20 20:36:37+00:00,"Improved error messages (#1048)

* Improved error messages

* Removed weird messages"
c9f5d4286b7b5997abdf5e3b531c20b009bbe226,Leo Lamprecht,2017-12-20 18:15:13+00:00,Leo Lamprecht,2017-12-20 18:15:13+00:00,9.0.0-canary.22
75be1ebc9ca7ea066405bc9f7c51121a12400a74,Olli Vanhoja,2017-12-20 18:13:41+00:00,Leo Lamprecht,2017-12-20 18:13:41+00:00,"Optimized the deployment process (#1028)

The do..while loop causes event handlers to be registered
multiple times in case of an error occurs while creating a
deployment after uploading missing files. The loop doesn't
save nothing more than one call to `now.create()`."
7c3b2da48cdd786319be708984efdd0ae3fb3522,Nathan Rajlich,2017-12-20 17:59:38+00:00,Leo Lamprecht,2017-12-20 17:59:38+00:00,"Simplify the `env` parsing logic (#1046)

* Simplify the `env` parsing logic

This should be 100% backwards compatible with the previous
behavior, but with some new additions:

 * When using an Array in `package.json:now.env` or `now.json:env`, you
   may specify the value or secret name after an `=` sign (before, the
   entire string was attempted to be the env var key name, which was
   just wrong _(this is the main ""fix"")_.
 * Specifying `null` as the value of an env var in an Object forces the
   user prompt (before, this was only possibly by using an Array without
   an `=` sign).
 * You may specify an env var on the CLI without an `=` sign and it will
   show the user prompt (kind of silly since the user is invoking the
   command anyways, but this works due to the new normalization)
 * Less converting the env between Array and Object representations.

The code is also simpler to read now, and a few helpful comments added
as well.

* fix `now -e MY_SHELL_VAR` inheriting from user's env"
c70a64551698469825b4c31844caa724995f1ac8,Leo Lamprecht,2017-12-19 12:24:52+00:00,Leo Lamprecht,2017-12-19 12:24:52+00:00,9.0.0-canary.21
c580d55be741042163b10e48882202dd69a40b6d,Yuri Yakovlev,2017-12-19 12:23:47+00:00,Leo Lamprecht,2017-12-19 12:23:47+00:00,Exit with correct status code (#1045)
caa7ef61ec296cdf0c1ff07f5c75faae10c8aa1d,Nathan Rajlich,2017-12-15 08:11:52+00:00,Leo Lamprecht,2017-12-15 08:11:52+00:00,Reject Errors properly in `now logs -f` (#1041)
65dbb158cecf4e0e05a63ffb2fbb48417726f680,Leo Lamprecht,2017-12-11 10:31:46+00:00,Leo Lamprecht,2017-12-11 10:31:46+00:00,9.0.0-canary.20
5463e8b5d85dca5e27d721c9ee69fca7597bba63,Nathan Rajlich,2017-12-11 10:29:59+00:00,Leo Lamprecht,2017-12-11 10:29:59+00:00,"Remove `--base64` argument from `now secret add` (#1033)

It's been broken on the server-side for quite a while now,
and on top of that it's never been clear as to *how* you
get the binary value back out from within the deployment.

For these reasons, let's get rid of the option altogether.

Users who need to encode binary data as the secret value
should encode to base64 manually. For example:

```
$ now secret add my-secret $(echo 'foo' | base64)
```"
a63123e2068bf7a9fcc91bd0dc13a6981e800688,Nathan Rajlich,2017-12-08 20:31:53+00:00,Leo Lamprecht,2017-12-08 20:31:53+00:00,"Return an empty object early when nothing to prompt (#1032)

* Return an empty object early when nothing to prompt

So that the `console.log()` a few lines down does
not get invoked

* Use `Object.keys()` to iterate over the answers"
846c02c9e4487479e15e0540ac514879bec4d443,Olli Vanhoja,2017-12-08 17:32:50+00:00,Leo Lamprecht,2017-12-08 17:32:50+00:00,"Sort certs by root domain (#1030)

Instead of sorting cert CNs by the full domain we should sort them
by the root domain to group all likely related certs together."
101b728d9b68ff0069d524967dcca7c89734c4f6,Nathan Rajlich,2017-12-07 19:57:21+00:00,Guillermo Rauch,2017-12-07 19:57:21+00:00,"Do not reference `newTeam` when switching to user scope (#1029)

Fixes error:

    $ now switch tootallnate
    > Error! An unexpected error occurred in switch: TypeError: Cannot read property 'slug' of undefined
        at module.exports (/snapshot/now-cli/dist/now.js:2995:81)
        at <anonymous>
        at process._tickCallback (internal/process/next_tick.js:188:7)"
63514669ea2eeff5708070d2aeda9e5d565692ce,Leo Lamprecht,2017-12-06 22:33:22+00:00,Leo Lamprecht,2017-12-06 22:33:22+00:00,9.0.0-canary.19
44397246bca2fb56563858886bfca644ad581138,Leo Lamprecht,2017-12-06 22:32:13+00:00,GitHub,2017-12-06 22:32:13+00:00,Upgrade Node.js to the latest version (#1025)
d9a58fc8ceca8148ce48809a27a0d0414f10c79e,Olli Vanhoja,2017-12-06 22:03:21+00:00,Leo Lamprecht,2017-12-06 22:03:21+00:00,"Improve domain removal UX (#1022)

- Don't prefix the domain with https as it may not be even using
  https nor have any records
- Don't show domain ID after the domain is removed as it has no
  meaning for cli users"
57943d0f0a9c9659990bbc3888e4e5ae193e5577,Nathan Rajlich,2017-12-06 22:02:41+00:00,Leo Lamprecht,2017-12-06 22:02:41+00:00,"Pluralize words automatically (#1024)

* use `pluralize` module

Instead of manually formatting these singular vs. plural cases.

Note that `util/alias.js` was previously incorrectly always printing as
plural, which is what let me down this rabbit hole in the first place.

* Bumped pkg version

* Downgrade node temporarily"
a6ceb44a5c7dccbd703c3f4205502f69674a7960,Leo Lamprecht,2017-11-27 23:09:08+00:00,Leo Lamprecht,2017-11-27 23:09:08+00:00,9.0.0-canary.18
bbc1b509f0334ea30e72b5bc125c50d69d6f4045,Matheus Fernandes,2017-11-23 01:27:44+00:00,Matheus Fernandes,2017-11-23 01:58:12+00:00,"If quiet, be quiet"
8936a1bf4202f641b1fcc3046e995d8c40d57398,Matheus Fernandes,2017-11-23 01:28:24+00:00,Matheus Fernandes,2017-11-23 01:28:24+00:00,8.5.4
abc70e855857e9ecc0d181879ea024ccbee01c0d,Matheus Fernandes,2017-11-23 01:27:44+00:00,Matheus Fernandes,2017-11-23 01:27:44+00:00,"If quiet, be quiet"
c9c68b561c309146fab37767e82e0d56e398f340,Leo Lamprecht,2017-11-23 00:39:56+00:00,Leo Lamprecht,2017-11-23 00:39:56+00:00,8.5.3
c6c64a1953adfc1aa9bb6b375bc8377700bf183c,Melvin,2017-11-22 10:27:08+00:00,Leo Lamprecht,2017-11-23 00:26:08+00:00,Only make global auth file readable/writable by owner (#1001)
bcce2c5ffc3dd810b2ee1162e1df51fd8a770591,Seth Holladay,2017-10-09 14:48:13+00:00,Leo Lamprecht,2017-11-23 00:25:38+00:00,"Overhaul JSON reading, parsing, and writing (#899)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Overhaul JSON loading and parsing

Reading JSON files from disk is now simpler, with clearer error messages.

Fixes #893

* More robust JSON writing

Make directories if needed and write to disk atomically.

* Remove unused import

* Escape @ in MX record example (#900)

* Pinned dependencies"
058a30aec3ab06b2c1dfef157456e84b80253be8,Matheus Fernandes,2017-11-23 00:07:52+00:00,Leo Lamprecht,2017-11-23 00:23:41+00:00,"Made `now switch` and `now logs -f` work properly (#1003)

* Add missing `console.log`s

* Bubble the exit code correctly

* Clear the ""final answer"" output from inquirer on `now switch`

* Add more missing `console.log` :(

* Add the team slug to the success message

* Adjust `now log -f` to work with the new exit logic"
7ba73f909ccdd34907a8b9881593a831da376f16,Guillermo Rauch,2017-11-21 17:03:54+00:00,Leo Lamprecht,2017-11-23 00:21:16+00:00,Fix deployments with no `now.json` file (#999)
90db214ac160fcf86372608db038c8611a8ab9a9,Leo Lamprecht,2017-11-23 00:10:44+00:00,Leo Lamprecht,2017-11-23 00:10:44+00:00,9.0.0-canary.17
887b625114d8cdba1b189928fd1579f98072b435,Matheus Fernandes,2017-11-23 00:07:52+00:00,Leo Lamprecht,2017-11-23 00:07:52+00:00,"Made `now switch` and `now logs -f` work properly (#1003)

* Add missing `console.log`s

* Bubble the exit code correctly

* Clear the ""final answer"" output from inquirer on `now switch`

* Add more missing `console.log` :(

* Add the team slug to the success message

* Adjust `now log -f` to work with the new exit logic"
260aa944d559da97bc689e63bb5fc3db63e7b8a7,Melvin,2017-11-22 10:27:08+00:00,Leo Lamprecht,2017-11-22 10:27:08+00:00,Only make global auth file readable/writable by owner (#1001)
aa25de5cf842497deb18d93c64385e40e3cdaab5,Guillermo Rauch,2017-11-22 00:52:22+00:00,Guillermo Rauch,2017-11-22 00:56:19+00:00,"Fix unexpected err message (#1000)

* fix deployments with no `now.json`

* improved global error handler"
4ee4dd364554b946f9451eb949fc6e79a35fd2be,Guillermo Rauch,2017-11-22 00:52:22+00:00,Matheus Fernandes,2017-11-22 00:52:22+00:00,"Fix unexpected err message (#1000)

* fix deployments with no `now.json`

* improved global error handler"
acf1ae9771b4d8a35cd0cc79e4223149070bbfbe,Leo Lamprecht,2017-11-21 17:04:16+00:00,Leo Lamprecht,2017-11-21 17:04:16+00:00,9.0.0-canary.16
42c6d6b52bf1ae1154141e656d1d56acaf984d43,Guillermo Rauch,2017-11-21 17:03:54+00:00,Leo Lamprecht,2017-11-21 17:03:54+00:00,Fix deployments with no `now.json` file (#999)
32384c847fe9041657219a0a66b842bcb8ae82ef,Leo Lamprecht,2017-11-20 10:17:23+00:00,Leo Lamprecht,2017-11-20 10:17:23+00:00,9.0.0-canary.15
15b8f857f02bcf4174cc005b3155462f8040dbb9,Leo Lamprecht,2017-11-20 10:14:54+00:00,Leo Lamprecht,2017-11-20 10:14:54+00:00,8.5.2
ef9862cbfb022651709c30b7f48e80e77676b164,Sebastian Richter,2017-11-20 10:04:22+00:00,Leo Lamprecht,2017-11-20 10:13:15+00:00,"Better error message for missing `gcp` property (#997)

* Better error message

Better error message when ""gcp"" property is missing in now.json

* Make sure gcpConfig is defined

* Replaced destructor"
21251548a73fc89fa6aa471c245b3fe723f16696,George Tsiolis,2017-11-17 10:37:18+00:00,Leo Lamprecht,2017-11-20 10:13:02+00:00,"Prevent trailing link character consumption by some terminals (#990)

* fix: broken link in missing `start` script error

* fix: removed trailing dot in error message"
83fe413b9609bffac140ac2e6a3bd43e11da459c,Nathan Rajlich,2017-11-19 01:02:18+00:00,Leo Lamprecht,2017-11-20 10:11:23+00:00,Fix location of credentials files on error page (#995)
9a018b41cdbc92c841c6fa71af84c997f17110e1,Nathan Rajlich,2017-11-19 00:54:17+00:00,Leo Lamprecht,2017-11-20 10:11:19+00:00,"Add ""No Open Port Found"" error page (#994)"
2804bedab6a766459056f68e20ce994f9b86ad67,Guillermo Rauch,2017-11-20 10:06:02+00:00,Leo Lamprecht,2017-11-20 10:06:02+00:00,"Overhauled deployment events and logs (#993)

* add jsonlines dep

* overhauled deployment events and logs output

* suppress http2 warnings

* make wait cancelation idempotent

* improve debugging and event fetching

* include node `--no-warnings` to avoid http2 warnings

* improve instrumentation

* log with info helper

* more consistent output"
934d159bc8f843d1089c5108afa43e421b074024,Sebastian Richter,2017-11-20 10:04:22+00:00,Leo Lamprecht,2017-11-20 10:04:22+00:00,"Better error message for missing `gcp` property (#997)

* Better error message

Better error message when ""gcp"" property is missing in now.json

* Make sure gcpConfig is defined

* Replaced destructor"
dc4327e883a2b157f419e1f262c968aaeea03cde,Nathan Rajlich,2017-11-19 01:02:18+00:00,Guillermo Rauch,2017-11-19 01:02:18+00:00,Fix location of credentials files on error page (#995)
08269582212da38e35025c0e591c7e1e0e8c623b,Nathan Rajlich,2017-11-19 00:54:17+00:00,Guillermo Rauch,2017-11-19 00:54:17+00:00,"Add ""No Open Port Found"" error page (#994)"
401f503d43188fa3b40ee270c777656d6acc1d5d,Graham Kaemmer,2017-11-17 17:18:06+00:00,Josh Junon,2017-11-17 17:18:06+00:00,"Add option to append 'https://' to deployment URL in now list (#991)

* Add option to append 'https://' to deployment URL in now list (#800)

* Rename includeProtocol -> includeScheme"
75c6bcb2916888277d1d8596b931b66babeaa3e8,George Tsiolis,2017-11-17 10:37:18+00:00,Josh Junon,2017-11-17 10:37:18+00:00,"Prevent trailing link character consumption by some terminals (#990)

* fix: broken link in missing `start` script error

* fix: removed trailing dot in error message"
92c561af9b361c4c0a5de08886373b3b94701be6,Leo Lamprecht,2017-11-13 21:34:05+00:00,Leo Lamprecht,2017-11-13 21:34:05+00:00,9.0.0-canary.14
0a2f38b42496c1f2e1cc76f5850f1da1b9aee2e8,Leo Lamprecht,2017-11-13 21:26:52+00:00,Leo Lamprecht,2017-11-13 21:33:47+00:00,Hide debugging line in `now deploy`
77d2bcc119b4048e950c2e0e87e5b6e7bb47de6e,Leo Lamprecht,2017-11-13 21:28:54+00:00,Leo Lamprecht,2017-11-13 21:28:54+00:00,8.5.1
555d0538e8dc33d1cb766c85e0cb443a11490886,Leo Lamprecht,2017-11-13 21:26:52+00:00,Leo Lamprecht,2017-11-13 21:26:52+00:00,Hide debugging line in `now deploy`
4c619ecb6c3a2bc0737a1fc7e4cc1c6eee059f6f,Leo Lamprecht,2017-11-13 20:41:38+00:00,Leo Lamprecht,2017-11-13 20:41:38+00:00,8.5.0
9c74c887c3460afce862d20f2e9cf8daf384d1fd,Leo Lamprecht,2017-11-13 20:33:49+00:00,Leo Lamprecht,2017-11-13 20:33:49+00:00,Bumped lockfile
33d7a022978b9656af1bd12ac29aeea186a53563,Leo Lamprecht,2017-11-13 20:26:07+00:00,Leo Lamprecht,2017-11-13 20:26:07+00:00,Fixed package description
3dd2752b63bb0a77da4db6e8ed8dc8d7bd2bb4de,Pranay Prakash,2017-11-13 20:18:03+00:00,Leo Lamprecht,2017-11-13 20:20:29+00:00,"Only load the `http2` module if HTTP/2 is enabled (#987)

* hide fetch-h2 import behind flag

* Removed semicolons"
81b86c07983e4fc7347b8df38ce41e1d0d79ad66,Leo Lamprecht,2017-11-13 20:18:48+00:00,Leo Lamprecht,2017-11-13 20:18:48+00:00,9.0.0-canary.13
d370205fda3d3bfe01996000f57ff38f2cc5506e,Pranay Prakash,2017-11-13 20:18:03+00:00,Leo Lamprecht,2017-11-13 20:18:03+00:00,"Only load the `http2` module if HTTP/2 is enabled (#987)

* hide fetch-h2 import behind flag

* Removed semicolons"
388e235d01c4fcf7c3a6238d90336fa39754db5e,Igor Klopov,2017-11-13 17:57:17+00:00,Leo Lamprecht,2017-11-13 19:12:07+00:00,"Made installation work on Git Bash (#986)

* look in APPDATA directory if not found in Program Files

* modifyGitBashFile to replace ""now ""with ""now.exe""

* fix npm rm -g now

* fix fetch-h2 dep version"
529fb33f3bd5e18b3c4a7a9b01a297e8ee6d3636,Josh Junon,2017-11-12 07:09:08+00:00,Leo Lamprecht,2017-11-13 19:08:07+00:00,add explicit build script
45874fe1ce61141ed0914cc3b630e8771f8b0d5e,Joe Lim,2017-11-11 07:09:03+00:00,Leo Lamprecht,2017-11-13 19:07:56+00:00,Improve nameserver error message (#984)
01334ea74ec51c88cd18f18e618e2c38c2b8035f,Josh Junon,2017-11-10 19:45:18+00:00,Leo Lamprecht,2017-11-13 19:06:36+00:00,Improve wording of GCP login message
7f86e5467566236d4a9f93dede8f769219c8f39c,Naoyuki Kanezawa,2017-11-09 07:59:59+00:00,Leo Lamprecht,2017-11-13 19:06:30+00:00,"Add error handling to login command (#974)

* add error handling on login command

* fix error message"
b86368a49ffaaf1e85b0eb031cf5fa827fa28ae2,Leo Lamprecht,2017-11-07 16:41:54+00:00,Leo Lamprecht,2017-11-13 19:06:17+00:00,Removed useless keyword
63f88b66eb812c0d01e5c0d01ccb1a6f2f557e8a,Joe Lim,2017-11-10 19:39:47+00:00,Leo Lamprecht,2017-11-13 19:05:59+00:00,Show login window message for GCP (#982)
148673057d87f1ee95270ac91a6906350f01abe1,Matheus Fernandes,2017-11-09 12:11:35+00:00,Leo Lamprecht,2017-11-13 19:04:12+00:00,Set the `host` header when using http2
2ce875df795029af68533b143df2e30f943b9ded,Matheus Fernandes,2017-11-09 12:10:14+00:00,Leo Lamprecht,2017-11-13 19:03:58+00:00,Bump `fetch-h2`
9a705f6c85af13d13df0ce589b5240ef72b190be,Josh Junon,2017-11-09 03:33:40+00:00,Leo Lamprecht,2017-11-13 19:03:49+00:00,improve api v2 support
8097f53aabebab4b75c43009f082a51c9109dffd,Leo Lamprecht,2017-11-07 20:57:04+00:00,Leo Lamprecht,2017-11-13 19:03:34+00:00,Ensure that update message shows up (#971)
e04aa38dc21bc5e22bbb0a53cbe81887010cbbc6,Leo Lamprecht,2017-11-07 16:34:12+00:00,Leo Lamprecht,2017-11-13 19:02:25+00:00,"Fixes inconsistency with flag for API URL (#968)

* Fixed inconsistency with API flag

* Accept config key

* Moved to earlier position"
ba0e5bd1310739f1d31b8fb9d135426fee01233a,Olli Vanhoja,2017-11-06 21:56:43+00:00,Leo Lamprecht,2017-11-13 19:02:12+00:00,Use the new deployment removal API (#966)
0afd40f47c42750a338935a4b56bba3d43e67814,Olli Vanhoja,2017-11-06 21:55:49+00:00,Leo Lamprecht,2017-11-13 19:02:07+00:00,Use v2 API to get a deployments list (#967)
5124f3d1bc10193503ba2bf58f710c5ae6b4ce01,Olli Vanhoja,2017-11-06 09:15:58+00:00,Leo Lamprecht,2017-11-13 19:02:00+00:00,Removed useless header from API requests (#964)
aa461b564d28f40b0a9b2e04c05817c6279ba333,Leo Lamprecht,2017-11-05 18:36:06+00:00,Leo Lamprecht,2017-11-13 19:01:34+00:00,Start using Node.js 9.0.0 with PKG
c68fed4fc5507e5bc1dc6ad602c3c000b9bf835c,Pranay Prakash,2017-10-31 10:41:16+00:00,Leo Lamprecht,2017-11-13 18:59:55+00:00,"Added support for HTTP/2 (#953)

* first working version

* implemented socket switching at socket request limit

* Use http2 only on canary

* fix typo"
6f7ffafdc76cd8854eabe36e64588af30bce49dc,Leo Lamprecht,2017-11-13 18:15:43+00:00,Leo Lamprecht,2017-11-13 18:15:43+00:00,9.0.0-canary.12
2c3808ce77d2e9fe8cc7f5f02a09c39854a6a7a5,Leo Lamprecht,2017-11-13 18:13:37+00:00,Leo Lamprecht,2017-11-13 18:13:37+00:00,Bumped lockfile
7774d7d72a667e680d00f086d3a9d32ce5bda425,Igor Klopov,2017-11-13 17:57:17+00:00,Leo Lamprecht,2017-11-13 17:57:17+00:00,"Made installation work on Git Bash (#986)

* look in APPDATA directory if not found in Program Files

* modifyGitBashFile to replace ""now ""with ""now.exe""

* fix npm rm -g now

* fix fetch-h2 dep version"
b3cd68bbb328db880352cdb3f4fcdad51756b85c,Josh Junon,2017-11-12 07:09:08+00:00,Josh Junon,2017-11-12 07:09:08+00:00,add explicit build script
d69435c93f2334e694c62290918a3786e211218e,Joe Lim,2017-11-11 07:09:03+00:00,Josh Junon,2017-11-11 07:09:03+00:00,Improve nameserver error message (#984)
b052388050a8a19e8a486ca774f22b8b215208af,Josh Junon,2017-11-10 19:45:18+00:00,Josh Junon,2017-11-10 19:56:37+00:00,Improve wording of GCP login message
39566519e47e2e16dd4978dd4df1bf0e8966a369,Leo Lamprecht,2017-11-10 19:41:18+00:00,Leo Lamprecht,2017-11-10 19:41:18+00:00,9.0.0-canary.11
2d08379f87567a49d2eaa741dc261d500102c0c1,Naoyuki Kanezawa,2017-11-09 07:59:59+00:00,Leo Lamprecht,2017-11-10 19:40:41+00:00,"Add error handling to login command (#974)

* add error handling on login command

* fix error message"
68a0332fcebccef6a8ea44eaef7452dfc9a0a353,Joe Lim,2017-11-10 19:39:47+00:00,Leo Lamprecht,2017-11-10 19:39:47+00:00,Show login window message for GCP (#982)
41f58d27db3f61ed96f2a721372b01cacb7c73e2,Matheus Fernandes,2017-11-09 12:27:46+00:00,Matheus Fernandes,2017-11-09 12:27:46+00:00,9.0.0-canary.10
1047edd9865a5b650464a534600cae900c636bfa,Matheus Fernandes,2017-11-09 12:11:35+00:00,Matheus Fernandes,2017-11-09 12:27:11+00:00,Set the `host` header when using http2
611401e2e13c33d7415233af6bc5d349f0bacd0a,Matheus Fernandes,2017-11-09 12:10:14+00:00,Matheus Fernandes,2017-11-09 12:27:11+00:00,Bump `fetch-h2`
853760b8c60d4f093d75859205c19de899255fcd,Matheus Fernandes,2017-11-09 12:03:12+00:00,Matheus Fernandes,2017-11-09 12:27:10+00:00,"Revert ""Temporarily disable HTTP2 when talking with `now-bru`'s API (#973)""

This reverts commit cfcd6005fff3a216a8784fd9aa0d735e88c23f98."
97d66046912ddfbe8a02504cffe6d235af006b6e,Josh Junon,2017-11-09 03:33:40+00:00,Josh Junon,2017-11-09 03:33:40+00:00,improve api v2 support
cfcd6005fff3a216a8784fd9aa0d735e88c23f98,Matheus Fernandes,2017-11-08 23:51:53+00:00,GitHub,2017-11-08 23:51:53+00:00,Temporarily disable HTTP2 when talking with `now-bru`'s API (#973)
b06ef97ec868aed1f4c027665f2de8b82eaa1770,Leo Lamprecht,2017-11-07 21:05:10+00:00,Leo Lamprecht,2017-11-07 21:05:10+00:00,9.0.0-canary.9
e6e92a27b4129a1e7de8479262e7e0c26a6ed70e,Leo Lamprecht,2017-11-07 20:57:04+00:00,Guillermo Rauch,2017-11-07 20:57:04+00:00,Ensure that update message shows up (#971)
aeaf03a420173403a7b33e260f06bfb1e7656d2f,Leo Lamprecht,2017-11-07 16:50:00+00:00,Leo Lamprecht,2017-11-07 16:50:00+00:00,9.0.0-canary.8
826f983fb0ebfca2ac616380b3eb61e7d7e335ab,Leo Lamprecht,2017-11-07 16:41:54+00:00,Leo Lamprecht,2017-11-07 16:48:51+00:00,Removed useless keyword
12cbf0c0b87e6d46aac91dc7a7ce6ca0d6347284,Leo Lamprecht,2017-11-07 16:34:12+00:00,GitHub,2017-11-07 16:34:12+00:00,"Fixes inconsistency with flag for API URL (#968)

* Fixed inconsistency with API flag

* Accept config key

* Moved to earlier position"
66e70c8074ccb6e9dc210ad5c86eb8122c7b5c22,Olli Vanhoja,2017-11-06 21:56:43+00:00,Leo Lamprecht,2017-11-06 21:56:43+00:00,Use the new deployment removal API (#966)
35eeeba9b4318152f7782d95cf43256e4bec654d,Olli Vanhoja,2017-11-06 21:55:49+00:00,Leo Lamprecht,2017-11-06 21:55:49+00:00,Use v2 API to get a deployments list (#967)
eef37799b7f1d9ce467b0ec2dfa2aa87b5f7858a,Olli Vanhoja,2017-11-06 09:15:58+00:00,Leo Lamprecht,2017-11-06 09:15:58+00:00,Removed useless header from API requests (#964)
0c4e00bb1b779cae2ec2d5b9fa27d827a11d5ee9,Leo Lamprecht,2017-11-05 19:47:16+00:00,Leo Lamprecht,2017-11-05 19:47:16+00:00,8.4.0
45cb08e925fa6dc3cebc667016e5506e2745977d,Leo Lamprecht,2017-11-05 19:43:08+00:00,Leo Lamprecht,2017-11-05 19:43:08+00:00,Bumped lockfile
9a78e754668b3bedc945e9fc6dd0dfc3bee02027,Pranay Prakash,2017-10-19 22:59:06+00:00,Leo Lamprecht,2017-11-05 19:41:17+00:00,"Faster array-unique implementation (#933)

* faster unique implementation

* use my own arrayUnique implementation

* forgot to remove the extra array access"
7b656d4ad472df10ee9d502641d1703d05650ccf,Leo Lamprecht,2017-11-05 19:34:17+00:00,Leo Lamprecht,2017-11-05 19:34:17+00:00,Channel-specific Travis CI config
57ad585bedb24437abbf73e899361cb79bb195a5,Leo Lamprecht,2017-11-05 18:39:51+00:00,Leo Lamprecht,2017-11-05 18:39:51+00:00,9.0.0-canary.7
b5af6276e116e58d0ab642ea57e79000911fb9f2,Leo Lamprecht,2017-11-05 18:36:06+00:00,Leo Lamprecht,2017-11-05 18:36:06+00:00,Start using Node.js 9.0.0 with PKG
fe5231a665133714e42508693aaae0dbe603484c,Leo Lamprecht,2017-11-05 18:33:26+00:00,Leo Lamprecht,2017-11-05 18:33:26+00:00,Canary-specific Travis CI config
450d2098e7d63d2fd381862a05ad420135b00cd8,Guillermo Rauch,2017-10-31 21:44:18+00:00,Leo Lamprecht,2017-10-31 21:44:18+00:00,"Fix zeit.world DNS examples list (#959)

* fix DNS examples list

* Update errors.js"
472d1ffab0c023d0e300053adcfb6622292da7ec,Pranay Prakash,2017-10-31 10:41:16+00:00,Leo Lamprecht,2017-10-31 10:41:16+00:00,"Added support for HTTP/2 (#953)

* first working version

* implemented socket switching at socket request limit

* Use http2 only on canary

* fix typo"
861b2a5f3b6f437238c635222f2b04cc68957cb9,Leo Lamprecht,2017-10-30 13:50:37+00:00,Leo Lamprecht,2017-10-30 13:50:37+00:00,9.0.0-canary.6
bdb360704bb606b1c358d7a1e727425ac4981f08,Olli Vanhoja,2017-10-30 13:33:56+00:00,Leo Lamprecht,2017-10-30 13:47:33+00:00,"Fixed `zeit.world` nameservers check (#954)

Instead of checking if the nameservers are from a known list we
can just check that every nameserver set for the domain ends with
.zeit.world."
3b9c861269ef1debad822066cf4d9e5a8d317f6b,Leo Lamprecht,2017-10-30 13:46:09+00:00,Leo Lamprecht,2017-10-30 13:46:09+00:00,8.3.12
90e2f4b6f5c04c59453d7ee6ba14450c061f56cd,Vitor Capretz,2017-10-16 08:50:18+00:00,Leo Lamprecht,2017-10-30 13:42:17+00:00,"Added validation for `.ws` domains (#935)

as in #365, ZEIT.world currently doesn't support .ws domains
and user should receive a notice when adding aliases or adding domains"
d7b0c3b3039458ef40b8eae15e2dd81e3bdaeb57,Felix Yan,2017-10-25 18:25:09+00:00,Leo Lamprecht,2017-10-30 13:41:35+00:00,Fixed a few comment typos (#947)
1dbbbbb085df75f8a17fea8d5ea2fd7b8a140973,Matt Keas,2017-10-20 22:45:09+00:00,Leo Lamprecht,2017-10-30 13:40:41+00:00,"Fixes runtime issues with a type and some missing require statements (#946)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Ensure that `now logout` revokes the token (#920)

* 8.3.10

* instead of opening url with xdg-open (which is causing #911), print the URL for the user to open or click, as diff versions of xdg-open may be needed on various linux distros and opn has some issues within pkg.

* adds check for the platform, uses opn on windows/mac and just prints out URL for linux

* fixed runtime issues"
a6a7627c905373be6b0feac6e913b4f241b14daa,Ryan Tsao,2017-10-20 12:34:59+00:00,Leo Lamprecht,2017-10-30 13:40:25+00:00,Wait until deployment is ready before exiting (#940)
20e9906d181e6b70be84f17467b5632981d5fba4,Leo Lamprecht,2017-10-30 13:39:59+00:00,Leo Lamprecht,2017-10-30 13:39:59+00:00,Corrected deployment to npm
01dadf2d8dbe624a28ade02953b8fe0a2901cbe6,Pranay Prakash,2017-10-12 21:53:16+00:00,Leo Lamprecht,2017-10-30 13:38:43+00:00,Exclude _fixtures from eslint (#928)
e524770fb79e2708f62657762e904f69514c560d,Olli Vanhoja,2017-10-30 13:33:56+00:00,Leo Lamprecht,2017-10-30 13:33:56+00:00,"Fixed `zeit.world` nameservers check (#954)

Instead of checking if the nameservers are from a known list we
can just check that every nameserver set for the domain ends with
.zeit.world."
8d7bae37927df5b3cc91a942f304921de1902a15,Leo Lamprecht,2017-10-30 13:12:09+00:00,Leo Lamprecht,2017-10-30 13:12:09+00:00,8.3.11
5713718512de6ff6e40bd8cdc38f870090fd6d6d,Olli Vanhoja,2017-10-09 14:15:37+00:00,Leo Lamprecht,2017-10-30 13:10:48+00:00,"Use second generation of API for creating deployments (#906)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Escape @ in MX record example (#900)

* Remove duplication of deployment complete print out

* Use v2 now API

v2 API requires the client to upload files before creating a
deployment."
0a8f602644de47258d795fb0d8c06caca4304ffe,Olli Vanhoja,2017-10-11 22:41:09+00:00,Leo Lamprecht,2017-10-30 13:10:18+00:00,"Ignore DNS record conflict on aliasing (#924)

Conflicting record is just the right record in most of the cases
and in other cases altering the record would break something
explicitly setup by the user."
128b2b7faabe8b1c85c26b30e4ec0c782ad7644c,Matt Keas,2017-10-20 21:58:47+00:00,Leo Lamprecht,2017-10-30 13:08:43+00:00,"Get `now gcp login` working on various linux distros again (#944)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Ensure that `now logout` revokes the token (#920)

* 8.3.10

* instead of opening url with xdg-open (which is causing #911), print the URL for the user to open or click, as diff versions of xdg-open may be needed on various linux distros and opn has some issues within pkg.

* adds check for the platform, uses opn on windows/mac and just prints out URL for linux"
871b56ee42ff99921e1ebb3b591849d305904a22,Sergio Xalambr,2017-10-12 21:52:28+00:00,Leo Lamprecht,2017-10-30 13:08:31+00:00,Fix DNS record typo (#929)
6cd53087255306cb15fb4ace63fa1263e78d2670,Leo Lamprecht,2017-10-19 22:49:09+00:00,Leo Lamprecht,2017-10-30 13:05:32+00:00,Only output error slug if it's available (#939)
8cfe55b40063357b4c3f5e2abdab7a3973601fb4,Pranay Prakash,2017-10-25 21:27:25+00:00,Leo Lamprecht,2017-10-25 21:27:25+00:00,"Add comments about new array-unique implementation (#948)

* Add comments about new array-unique implementation

* fix typo"
c49ba28bbffe74860c845f313882b49c0e85988d,Felix Yan,2017-10-25 18:25:09+00:00,Leo Lamprecht,2017-10-25 18:25:09+00:00,Fixed a few comment typos (#947)
82112c79d6dd16f2c199a84967b8ff70a3b10752,Matt Keas,2017-10-20 22:45:09+00:00,Leo Lamprecht,2017-10-20 22:45:09+00:00,"Fixes runtime issues with a type and some missing require statements (#946)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Ensure that `now logout` revokes the token (#920)

* 8.3.10

* instead of opening url with xdg-open (which is causing #911), print the URL for the user to open or click, as diff versions of xdg-open may be needed on various linux distros and opn has some issues within pkg.

* adds check for the platform, uses opn on windows/mac and just prints out URL for linux

* fixed runtime issues"
d30dcf4db719c2c11410496adbbd9d1adad573d5,Matt Keas,2017-10-20 21:58:47+00:00,Leo Lamprecht,2017-10-20 21:58:47+00:00,"Get `now gcp login` working on various linux distros again (#944)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Ensure that `now logout` revokes the token (#920)

* 8.3.10

* instead of opening url with xdg-open (which is causing #911), print the URL for the user to open or click, as diff versions of xdg-open may be needed on various linux distros and opn has some issues within pkg.

* adds check for the platform, uses opn on windows/mac and just prints out URL for linux"
9fc096d2d578b4dbc485cae67acdd9a70017e7f3,Leo Lamprecht,2017-10-20 12:41:08+00:00,Leo Lamprecht,2017-10-20 12:41:08+00:00,9.0.0-canary.5
8a6f967032b944eb2c86d307bd05fd9dd6c413a2,Leo Lamprecht,2017-10-20 12:40:55+00:00,Leo Lamprecht,2017-10-20 12:40:55+00:00,Bumped lockfile
6a35a8b84a22676555733a93df85b43a42190511,Sergio Xalambr,2017-10-12 21:52:28+00:00,Leo Lamprecht,2017-10-20 12:39:11+00:00,Fix DNS record typo (#929)
336427afda4cfae6e5fe8edee6b8470288d3e51f,Ryan Tsao,2017-10-20 12:34:59+00:00,Leo Lamprecht,2017-10-20 12:34:59+00:00,Wait until deployment is ready before exiting (#940)
4444ca712ac859eca5b28915c1f7dfc7058bafac,Leo Lamprecht,2017-10-19 23:03:36+00:00,Leo Lamprecht,2017-10-19 23:03:36+00:00,Fixed issues with code style
ba1f96a1fdd97327dc4058542d282bd0e040a497,Pranay Prakash,2017-10-19 22:59:06+00:00,Leo Lamprecht,2017-10-19 22:59:06+00:00,"Faster array-unique implementation (#933)

* faster unique implementation

* use my own arrayUnique implementation

* forgot to remove the extra array access"
697fd8b7c9e67aea9db82ae5858819838dbdf4d0,Leo Lamprecht,2017-10-19 22:49:09+00:00,GitHub,2017-10-19 22:49:09+00:00,Only output error slug if it's available (#939)
74951214e3369f63a7f9191c9db3b93bdbce5f94,Vitor Capretz,2017-10-16 16:07:01+00:00,Leo Lamprecht,2017-10-16 16:07:01+00:00,"Added domain validation to the alias being set (#936)

Added domain validation to the alias being set"
35c6e89b4a1fffbd26817accebe1cd2dd06a74cf,Vitor Capretz,2017-10-16 08:50:18+00:00,Leo Lamprecht,2017-10-16 08:50:18+00:00,"Added validation for `.ws` domains (#935)

as in #365, ZEIT.world currently doesn't support .ws domains
and user should receive a notice when adding aliases or adding domains"
3aa19d366aa758c7caabbbe907143326af0e6fb0,Pranay Prakash,2017-10-12 21:53:16+00:00,Leo Lamprecht,2017-10-12 21:53:16+00:00,Exclude _fixtures from eslint (#928)
b3697793214976961faeb8528c70c8e09e2fae22,Leo Lamprecht,2017-10-11 22:44:34+00:00,Leo Lamprecht,2017-10-11 22:44:34+00:00,9.0.0-canary.4
da923fa879ab117568e61400f78c4533c24c2384,Olli Vanhoja,2017-10-11 22:41:09+00:00,Leo Lamprecht,2017-10-11 22:41:09+00:00,"Ignore DNS record conflict on aliasing (#924)

Conflicting record is just the right record in most of the cases
and in other cases altering the record would break something
explicitly setup by the user."
94952c0bd0738efa9b68651fd9b974a4c9dce962,Leo Lamprecht,2017-10-11 20:48:20+00:00,Leo Lamprecht,2017-10-11 20:48:20+00:00,Even more bullet proof conditions
a4f012e5a632e068857d567cd767ee29ba887eaa,Leo Lamprecht,2017-10-11 20:34:06+00:00,Leo Lamprecht,2017-10-11 20:34:06+00:00,Make sure to install dependencies on CI
5abf1dfb942f1cb26ed4c2a831329d714ee1da9e,Leo Lamprecht,2017-10-11 20:31:20+00:00,Leo Lamprecht,2017-10-11 20:31:20+00:00,Use custom clone of repository on CI
0ca7d1fe44ebdf460b64fdc38ba543b8e295ac40,Leo Lamprecht,2017-10-09 16:21:18+00:00,Leo Lamprecht,2017-10-09 16:21:18+00:00,9.0.0-canary.3
8083740804a2fd3dc536f847c37de2d57185f512,Leo Lamprecht,2017-10-09 16:20:04+00:00,Leo Lamprecht,2017-10-09 16:20:04+00:00,"Ensured correct arguments order

This closes #909"
fd68ad8a79d52d1f35484d772431d9d4ac5b69dd,Leo Lamprecht,2017-10-09 16:07:09+00:00,Leo Lamprecht,2017-10-09 16:07:09+00:00,Removed accidental echo output
d4714b05eb94b3c638b2c6b2703d319f31d2187b,Leo Lamprecht,2017-10-09 15:59:53+00:00,Leo Lamprecht,2017-10-09 15:59:53+00:00,Check for tag correctly
48d76a734a62939089d7183b456df0e4246883ef,Leo Lamprecht,2017-10-09 15:51:48+00:00,Leo Lamprecht,2017-10-09 15:51:48+00:00,Properly check for current branch on CI
9ce5ae8d9525974f5d4a84106f7598f8a1131a6a,Leo Lamprecht,2017-10-09 15:35:26+00:00,Leo Lamprecht,2017-10-09 15:35:26+00:00,9.0.0-canary.2
0b9bc7352136b9592d7a3b8d4f428d3dd69eae24,Leo Lamprecht,2017-10-09 15:29:45+00:00,Leo Lamprecht,2017-10-09 15:34:18+00:00,Ensure that `now logout` revokes the token (#920)
d8b559d9528348c9ca0223a380bef4126528369f,Leo Lamprecht,2017-10-09 15:30:11+00:00,Leo Lamprecht,2017-10-09 15:30:11+00:00,8.3.10
ee4d44154342ff21a61bbdbb80ea6d7bff67d264,Leo Lamprecht,2017-10-09 15:29:45+00:00,GitHub,2017-10-09 15:29:45+00:00,Ensure that `now logout` revokes the token (#920)
e91d767186bb491bbdb9bb02cd8e66d178a45c36,Leo Lamprecht,2017-10-09 15:20:34+00:00,GitHub,2017-10-09 15:20:34+00:00,"Removed deprecated Babel preset (#919)

* Removed deprecated Babel preset

* Fixed dependencies"
3f0b06a642bafd91a96164281f67561766346ac6,Seth Holladay,2017-10-09 14:48:13+00:00,Leo Lamprecht,2017-10-09 14:48:13+00:00,"Overhaul JSON reading, parsing, and writing (#899)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Overhaul JSON loading and parsing

Reading JSON files from disk is now simpler, with clearer error messages.

Fixes #893

* More robust JSON writing

Make directories if needed and write to disk atomically.

* Remove unused import

* Escape @ in MX record example (#900)

* Pinned dependencies"
4338c6a205e13c99197bfe47396eef76051b5716,Olli Vanhoja,2017-10-09 14:15:37+00:00,Leo Lamprecht,2017-10-09 14:15:37+00:00,"Use second generation of API for creating deployments (#906)

* Fix `now alias` for domains without DNS records (#898)

* 8.3.9

* Escape @ in MX record example (#900)

* Remove duplication of deployment complete print out

* Use v2 now API

v2 API requires the client to upload files before creating a
deployment."
935fd58fd95a81786e633f55134764f1d1f1bafd,Matheus Fernandes,2017-09-28 22:31:33+00:00,Matheus Fernandes,2017-09-28 22:31:33+00:00,8.3.9
0d806f95ce9d49a65f923418a7816c44c1d0b289,Matheus Fernandes,2017-09-28 22:31:08+00:00,GitHub,2017-09-28 22:31:08+00:00,Fix `now alias` for domains without DNS records (#898)
01b7f35845ac40198e52c6efdc69b284d6cc3605,Leo Lamprecht,2017-09-28 10:06:47+00:00,GitHub,2017-09-28 10:06:47+00:00,Check for deployment conditions correctly (#897)
50194b30ae603566643b01424538ce92b71facb8,Leo Lamprecht,2017-09-28 09:37:55+00:00,Leo Lamprecht,2017-09-28 09:37:55+00:00,9.0.0-canary.1
b0a3e9241605cffdf79571a38f8850fa22c51e0b,Leo Lamprecht,2017-09-28 09:27:20+00:00,GitHub,2017-09-28 09:27:20+00:00,Tag canary releases properly on npm (#896)
03bb490673704bd31c94d97a43844aa098e6d193,Leo Lamprecht,2017-09-28 09:19:25+00:00,GitHub,2017-09-28 09:19:25+00:00,Bumped dependencies to the latest version (#895)
7e02ca947ea43bf9fcb4f5d2227467d85afb554e,Leo Lamprecht,2017-09-28 09:10:21+00:00,Leo Lamprecht,2017-09-28 09:10:21+00:00,8.3.8
592b4c71aa95107dc383c7701e72973addfc235f,Nathan Rajlich,2017-09-28 09:05:12+00:00,Leo Lamprecht,2017-09-28 09:05:12+00:00,"Do not consider deployment name in `now scale` (#874)

Consider a deployment with an app name that matches the
alias URL. Rather than matching what deployment the alias
points to, we would match the first deployment where that
name equals the alias doman name, which is not correct."
42b88df32fcf2f08de0535df838aba8987c2f325,Nathan Rajlich,2017-09-28 09:01:52+00:00,Leo Lamprecht,2017-09-28 09:01:52+00:00,Do not print the fetch error when `now alias` validation fails (#894)
ab8bd45ca2d5051b575adee6406d76ec7b036675,Nathan Rajlich,2017-09-27 21:56:54+00:00,Nathan Rajlich,2017-09-27 21:56:54+00:00,fix whitespace issue when deploying a remote repo
1a6a3f854cd740349695c7c9200708f68ea0bb7f,Leo Lamprecht,2017-09-26 13:37:20+00:00,Guillermo Rauch,2017-09-26 13:37:20+00:00,Removed `slackup` in favor of upcoming canary builds (#889)
923a6de90323474279619c8fa1d6cb9329df1adf,Leo Lamprecht,2017-09-26 11:30:32+00:00,Leo Lamprecht,2017-09-26 11:30:32+00:00,8.3.7
48611779006603712a39fcc1e19677bd4830ec4d,Jon Babsvik,2017-09-26 10:22:08+00:00,Leo Lamprecht,2017-09-26 10:22:08+00:00,Updated `now ls -h` to include the `--all` flag (#888)
ce36c4d507a93d26f3f3139c87b835fcc30239ef,Olli Vanhoja,2017-09-25 22:12:03+00:00,Leo Lamprecht,2017-09-25 22:12:03+00:00,"Simplify domain DNS record validation (#885)

Instead of trying to figure out whether a custom domain resolves
to a certain IP address we could just try to make a `HEAD` request
and check the `Server` header in the response. This change will
make the cli ready for anycast DNS that may resolve to any
location."
f0655e785e63005cb7ad0dcb437a957f1aec5cc7,Olli Vanhoja,2017-09-25 22:05:13+00:00,Leo Lamprecht,2017-09-25 22:05:13+00:00,Removed the `-F` flag (#886)
af697e57150485449b3b913a82a8e988271c9eb1,Leo Lamprecht,2017-09-22 21:41:38+00:00,Leo Lamprecht,2017-09-22 21:41:38+00:00,8.3.6
8b06b0b302bea15fb3d7ff5448d7ceb6b4adf54f,Igor Klopov,2017-09-22 21:41:09+00:00,Leo Lamprecht,2017-09-22 21:41:09+00:00,Let it show n/a instead of 17k days (#877)
72265c49c62c5b377561b021bd3276c7571ba28c,Matheus Fernandes,2017-09-22 21:35:34+00:00,Matheus Fernandes,2017-09-22 21:35:34+00:00,Add missing console.log
56a5adeb3aac3229fb69c2efd73a2b9fcf6fc24e,Leo Lamprecht,2017-09-19 21:29:35+00:00,Leo Lamprecht,2017-09-19 21:29:35+00:00,"Renamed ""now CLI"" to ""Now CLI"""
b339fcb309daddff934d84cda0818e5aedc1b8dc,Matheus Fernandes,2017-09-19 02:34:31+00:00,Matheus Fernandes,2017-09-19 02:34:31+00:00,8.3.5
b033558aebf0237ee94db3b34b6c78af43e95b23,Matheus Fernandes,2017-09-18 23:55:28+00:00,Matheus Fernandes,2017-09-18 23:55:28+00:00,Add missing `console.log`
8c83b52b1a91aa3c9473b28075d0c23ecc37ee69,Matheus Fernandes,2017-09-18 23:54:58+00:00,Matheus Fernandes,2017-09-18 23:54:58+00:00,Fix method on log
cce5bfad82e2f21306522af5eca2c94b7feb7c04,Matheus Fernandes,2017-09-18 23:37:37+00:00,Matheus Fernandes,2017-09-18 23:37:37+00:00,Add missing `console.log`
0ae01581cc21732ac3572b77ed635b8f11c367c6,Leo Lamprecht,2017-09-17 15:47:44+00:00,Leo Lamprecht,2017-09-17 15:47:44+00:00,Fixed a typo in an error
a02d7012bedc19aa79c322c4536cae199787cb23,Leo Lamprecht,2017-09-17 15:26:21+00:00,Leo Lamprecht,2017-09-17 15:26:21+00:00,8.3.4
2a0d4555dc8de815ba5812730dd187855dbe78b3,Leo Lamprecht,2017-09-17 15:24:22+00:00,GitHub,2017-09-17 15:24:22+00:00,"Added links to the errors (#869)

* Added two example error links

* More messages added

* Even more cool stuff

* Removed useless assignments

* Weird stuff removed

* Fixed exiting

* Added missing space

* Added another error message"
0b1acc13a830430787a29cac51b614a1e7e61c67,Leo Lamprecht,2017-09-16 22:52:31+00:00,Leo Lamprecht,2017-09-16 22:52:31+00:00,8.3.3
9e9f53fd64ab21d3a692df204261a82d31c39351,Joe Haddad,2017-09-16 22:50:24+00:00,Leo Lamprecht,2017-09-16 22:50:24+00:00,Ensure retrying GCP deployments (#862)
75c2b86e481e60fdd96e88e8cdc86588ab38af0d,Sergio Xalambr,2017-09-16 22:01:54+00:00,Leo Lamprecht,2017-09-16 22:01:54+00:00,"Brought Git deployments back to live (#867)

* Remove the hack

That hack removed the path user/repo from argv

* Use rawPath instead of path

With path it's going to always pass that try, we need to check the the rawPath is valid not the path

* Make GH, relative path and current path deployments work

* Remove semicolon"
fad6109cf28b090509ac969329611441eb10e1f9,Leo Lamprecht,2017-09-16 13:59:26+00:00,GitHub,2017-09-16 13:59:26+00:00,Corrected deployment type example (#864)
d888e59af22b954100a66305d26209dec09bb913,Leo Lamprecht,2017-09-15 17:58:49+00:00,Leo Lamprecht,2017-09-15 17:58:49+00:00,8.3.2
8dd0cf7e5893afad3be4cc5d635f528a816c851d,Leo Lamprecht,2017-09-15 17:58:40+00:00,Leo Lamprecht,2017-09-15 17:58:40+00:00,Removed redundant check
cef988b0786aef22f74bb217b520a5d8e312bf92,Leo Lamprecht,2017-09-15 17:56:51+00:00,GitHub,2017-09-15 17:56:51+00:00,"Made `--team` accept the username (#860)

* Made `--team` accept the username

* Only handle value when credentials exist"
0a327e3ae84b4fe28012d6da029cb5bcacff3668,Leo Lamprecht,2017-09-15 17:15:13+00:00,GitHub,2017-09-15 17:15:13+00:00,Only download team data if it's not cached (#859)
ac7ae6629a1f4152e747247d4271a2b764933726,Luke Childs,2017-09-15 14:02:19+00:00,Leo Lamprecht,2017-09-15 14:02:19+00:00,Check if the `files` config property is an array (#858)
696f8a20be3a0c05329b9009c1f8db549cc741c3,Leo Lamprecht,2017-09-15 10:16:04+00:00,Leo Lamprecht,2017-09-15 10:16:04+00:00,8.3.1
6f56046c2a2a755f4fd794706853a388bb115905,Leo Lamprecht,2017-09-15 10:12:06+00:00,Matheus Fernandes,2017-09-15 10:12:06+00:00,Allow `--token` to act without a config file (#855)
72e8c0be62aaad2a4f5d9f76f9daa1e00a77a693,Leo Lamprecht,2017-09-14 22:18:35+00:00,Leo Lamprecht,2017-09-14 22:18:35+00:00,8.3.0
f8c0288bb3e3f05b38ab6a75ba78d5dcc0e57c7a,Leo Lamprecht,2017-09-14 21:58:53+00:00,GitHub,2017-09-14 21:58:53+00:00,"Ability to set team scope using `--team` flag (#852)

* Fixed linting

* Use `mri` for setting the token

* Ability to set team scope using `--team` flag

* Added correct utils

* Handle 403 errors

* Better 403 error message

* Made it even more bullet proof

* Added to usage information"
734c78f8fc272be67f3d849499fc37d373e626e3,Leo Lamprecht,2017-09-14 10:04:30+00:00,Matheus Fernandes,2017-09-14 10:04:30+00:00,"Prevent `--token` from overwriting the user config (#851)

* Respect currently scoped team

* Allow `--token` to overwrite the config token

* Fixed syntax

* Print an error when switching team"
7a916bd3da67925872573f2b580cc9c64a008159,Leo Lamprecht,2017-09-13 20:49:30+00:00,Matheus Fernandes,2017-09-13 20:49:30+00:00,Made `--local-config` work properly (#850)
da5f1ac3aea66e65e9e7d0f9b8acf4e29ebd1323,Matheus Fernandes,2017-09-12 23:02:06+00:00,Leo Lamprecht,2017-09-12 23:02:06+00:00,Made sure to use the correct output utilities (#841)
80e1ee829fe6f9f03f0b7ef1c2c19e4fa19aa819,Matheus Fernandes,2017-09-12 21:31:42+00:00,GitHub,2017-09-12 21:31:42+00:00,"Fix edge case where `--token` was being ignored (#840)

* Fix edge case where `--token` was being ignored

* Fix logic"
3874ab76cba2f0a269cdde1b5d94851c6773ce43,Josh Junon,2017-09-12 19:00:54+00:00,Josh Junon,2017-09-12 19:00:54+00:00,8.2.5
058fb5334dc81c9f38cc9e2c2575a67048a605a9,Josh Junon,2017-09-12 18:53:00+00:00,GitHub,2017-09-12 18:53:00+00:00,fix path detection when a path is specified (#839)
da15ce73f0fdf85a5af115d25cc496a1cd429b20,Leo Lamprecht,2017-09-12 10:36:04+00:00,Leo Lamprecht,2017-09-12 10:36:04+00:00,8.2.4
6332196b27472b001f3100dbe36278dd9683aa40,Leo Lamprecht,2017-09-12 10:28:33+00:00,GitHub,2017-09-12 10:28:33+00:00,Introduced a much cleaner token name (#837)
7c5b04b39e1d752df23646f8e326dfdc1eaaf0a3,Matheus Fernandes,2017-09-11 09:31:57+00:00,Matheus Fernandes,2017-09-11 09:31:57+00:00,8.2.3
86deb0a1c6140d5a73d5ff61ddc147bdf98f08cc,Matheus Fernandes,2017-09-11 09:30:40+00:00,Matheus Fernandes,2017-09-11 09:30:40+00:00,Fix arguemnt types on `now dns add`
00f5d39114b96fb8590a77b0f0252374e1a6d5d8,Leo Lamprecht,2017-09-09 15:05:43+00:00,Leo Lamprecht,2017-09-09 15:05:43+00:00,8.2.2
1af69b9800f55b2f30fb1f7afeecf88f2cf4392a,Leo Lamprecht,2017-09-09 15:05:21+00:00,GitHub,2017-09-09 15:05:21+00:00,"Argument parsing in `now scale` is now more efficient (#835)

* Support IDs on the `now scale` sub command

* Made it even shorter

* Correct usage info

* Fixed syntax"
5670d9387700374dffba00ec484936b53ad07100,Leo Lamprecht,2017-09-09 14:47:26+00:00,Matheus Fernandes,2017-09-09 14:47:26+00:00,Made `now scale` work properly again (#834)
3bd40ae9c937972c0a7e7a59c65d4de75fa6b63d,Leo Lamprecht,2017-09-08 22:09:01+00:00,Nathan Rajlich,2017-09-08 22:09:01+00:00,Fixed guide on how to install the package (#832)
c4d9383d8697f399d1774c7c24e19ba3f3c29a42,Leo Lamprecht,2017-09-08 21:35:01+00:00,Leo Lamprecht,2017-09-08 21:35:01+00:00,8.2.1
17cc5d16304712759f5d1cd817f4ee7703c9982d,Leo Lamprecht,2017-09-08 21:25:11+00:00,GitHub,2017-09-08 21:25:11+00:00,"Replaced `minimist` with `mri` (faster and lighter) (#831)

* Cleaned up help for `now scale`

* Made it even better

* Fixed dot notation

* Perfected secrets help

* Cleaned up teams help

* Help for upgrade cmd

* Fixed even more

* Help for login command

* Made output work for command

* Cleaned up domains help

* Cleaned up all remaining commands

* Fixed indentation for alias command

* Missing flag added

* Another missing flag added

* Replaced `minimist` with `mri` (faster and lighter)"
aa4f7d1ccc95e1daf93f5143c381c91fb45396cc,Leo Lamprecht,2017-09-08 21:14:11+00:00,GitHub,2017-09-08 21:14:11+00:00,"Cleaned up the usage information (#830)

* Cleaned up help for `now scale`

* Made it even better

* Fixed dot notation

* Perfected secrets help

* Cleaned up teams help

* Help for upgrade cmd

* Fixed even more

* Help for login command

* Made output work for command

* Cleaned up domains help

* Cleaned up all remaining commands

* Fixed indentation for alias command

* Missing flag added

* Another missing flag added

* Fixed help"
1ebb39ff6785e720befc227ca2e52c8659152fd2,Leo Lamprecht,2017-09-08 16:52:28+00:00,Matheus Fernandes,2017-09-08 16:52:28+00:00,Removed not working `--login` flag from usage information (#826)
1bfaaea8cbcc33a37fe0c86cd4a585e1bb578696,Leo Lamprecht,2017-09-08 16:52:00+00:00,Matheus Fernandes,2017-09-08 16:52:00+00:00,Test installation over `npm` after deployment (#828)
b5361468dd2fe4d5f7ab583b949317691dbd94e3,Leo Lamprecht,2017-09-08 16:51:15+00:00,Matheus Fernandes,2017-09-08 16:51:15+00:00,Added missing `--token` flag to `now scale` sub command (#829)
9a4cb75151ba6af9e0b43a303b418f0000ac28e3,Leo Lamprecht,2017-09-08 11:33:27+00:00,Leo Lamprecht,2017-09-08 11:33:27+00:00,8.2.0
4d985b55219594d67d6db350a44b97f194bfbb49,Leo Lamprecht,2017-09-08 11:26:37+00:00,GitHub,2017-09-08 11:26:37+00:00,"Prevent doubled usage information output (#820)

* Prevent doubled usage information output

* Return instead of exiting without util

* Made it work"
1134f65cdaae19a62f9656c17af981a4f37e91c6,Leo Lamprecht,2017-09-08 11:18:12+00:00,GitHub,2017-09-08 11:18:12+00:00,"Added new flags for local and global config (#818)

* Added new config flag to usage info

* Different available short names for flags

* Made global config flag work

* Existance of global now dir is already handled

* Made it all work"
daad07abbf434a9b2100ab3702de448e8c9411b1,Leo Lamprecht,2017-09-08 11:14:10+00:00,GitHub,2017-09-08 11:14:10+00:00,Temporarily hide providers from usage information (#819)
f86f074a80eaba971278ed109808f77e08498b1b,Leo Lamprecht,2017-09-08 11:07:34+00:00,GitHub,2017-09-08 11:07:34+00:00,Corrected flags for `now teams` sub command (#822)
ebcc92c87973a76b7b837ab040f3b889a4d91442,Leo Lamprecht,2017-09-08 11:03:21+00:00,Matheus Fernandes,2017-09-08 11:03:21+00:00,"Revert ""Made `now whoami` return the correct team context"" (#824)

* Revert ""Deploy on Now if no provider is specified (#821)""

This reverts commit bbb33417ee1d37c81fa5ef39ef67f3ee5162fc08.

* Revert ""Made `now whoami` return the correct team context (#823)""

This reverts commit a9e6e6c2475fbe4eb33318ff75839cc0f90c2823."
bbb33417ee1d37c81fa5ef39ef67f3ee5162fc08,Leo Lamprecht,2017-09-08 10:58:44+00:00,GitHub,2017-09-08 10:58:44+00:00,Deploy on Now if no provider is specified (#821)
a9e6e6c2475fbe4eb33318ff75839cc0f90c2823,Leo Lamprecht,2017-09-08 10:34:20+00:00,GitHub,2017-09-08 10:34:20+00:00,Made `now whoami` return the correct team context (#823)
929a14cc849b5427f2b5154dedac1131e805214f,Leo Lamprecht,2017-09-06 16:42:54+00:00,Leo Lamprecht,2017-09-06 16:42:54+00:00,Don't delete dependencies before deploying
134056883cf5e85068e84db28db4f0a46921d6f3,Leo Lamprecht,2017-09-06 16:35:16+00:00,Leo Lamprecht,2017-09-06 16:35:16+00:00,8.1.0
f0bb4e3cdc804e1475c84aeb639f7693d437ea03,Leo Lamprecht,2017-09-06 16:34:53+00:00,GitHub,2017-09-06 16:34:53+00:00,Let the CI deploy releases to npm automatically (#816)
8fafe7579340d30cc2320ca4d58b4d0741facb36,Roberto,2017-09-06 08:46:40+00:00,Leo Lamprecht,2017-09-06 08:47:13+00:00,"Use config for GCP settings, allow function update (#803)

* Use same function to verify the deployed function
* Use Google CloudFunction property names
* change gcpConfig.name to gcpConfig.functionName
* availableMemoryMb => memory"
cc74eaf4c755a146639e20e9e9bc0fe417343d0d,Benoit Averty,2017-09-06 08:38:35+00:00,Leo Lamprecht,2017-09-06 08:38:35+00:00,"Only show account info caching message in TTY (#811)

* Only show account info caching message in TTY

* fix typo

* Fixed syntax"
900f2bd3066908940e1e679fa81284c0915ae18b,Nathan Rajlich,2017-09-06 03:50:37+00:00,Leo Lamprecht,2017-09-06 08:27:03+00:00,Fixed typo in usage information
f4c536cc87851a452caf1d8e1425cc42cb4be71c,Leo Lamprecht,2017-09-05 10:16:33+00:00,Leo Lamprecht,2017-09-05 10:16:33+00:00,8.0.2
f67af44f21a709148440fa4c5a4e272e5f8e23af,Leo Lamprecht,2017-09-05 10:02:57+00:00,GitHub,2017-09-05 10:02:57+00:00,"Fixed the input and output utilities (#808)

* Fixed the input and output utilities

* Stop swallowing errors"
9a9736bdd24a9805431b063e23b4621bedc86709,Leo Lamprecht,2017-09-05 07:57:57+00:00,GitHub,2017-09-05 07:57:57+00:00,Made token-based authentication work (#805)
8d919874a5e44a0a33acd380df8c296b826596ce,Leo Lamprecht,2017-09-04 10:52:46+00:00,Leo Lamprecht,2017-09-04 10:52:46+00:00,8.0.1
5ef6f7be3d6e987aee2e460c3ad4b1ad9db462e2,Leo Lamprecht,2017-09-04 10:51:50+00:00,GitHub,2017-09-04 10:51:50+00:00,"Only prompt for login in TTY, otherwise throw error (#798)

* Only prompt for login in terminal, otherwise throw error

* Removed colors for non-TTY"
77e95e28b90898296bc7978fa5144bcacb5fa81e,Michael Hsu,2017-09-04 10:26:25+00:00,Leo Lamprecht,2017-09-04 10:26:56+00:00,"Don't prompt for login if token was defined (#797)

* fix(prompt): unexpected Prompt for login when given token [#795]

* update

* update"
38f240bb64fe036b549e147c4c6864ea9f79c36e,Leo Lamprecht,2017-09-04 00:55:15+00:00,Leo Lamprecht,2017-09-04 00:55:15+00:00,Removed automatic tagging as beta
8bfcf68215fce90e65d4df62f582de56fd178be2,Leo Lamprecht,2017-09-04 00:42:50+00:00,Leo Lamprecht,2017-09-04 00:42:50+00:00,8.0.0
dd4db2427fcc513af61f12cd01d871cc1566007a,Leo Lamprecht,2017-09-04 00:38:29+00:00,GitHub,2017-09-04 00:38:29+00:00,"Prompt for login if no credentials defined (#795)

* Prompt for login if no credentials defined

* Sub commands should lead to login as well

* Show a message

* Fixed syntax

* Even more syntax fixed"
c1b6b819aef8cc4a94e500e2549a3855da4c0da9,Leo Lamprecht,2017-09-03 23:51:34+00:00,GitHub,2017-09-03 23:51:34+00:00,"Automatically migrate the old configuration file (#794)

* Automatically migrate the old configuration file

* Fixed git.io links

* credentials.json => auth.json

* Let the user know

* Removed trailing dot"
fdfdf8039b3388141257067e7804255690d5b59a,Leo Lamprecht,2017-09-03 17:34:50+00:00,Leo Lamprecht,2017-09-03 17:34:50+00:00,8.0.0-beta.11
665e36eddf8ce25ce26387a775c4a9f8e48aa855,Leo Lamprecht,2017-09-03 16:11:42+00:00,Leo Lamprecht,2017-09-03 16:11:42+00:00,Google Cloud Platform support is working again
c156dd8698faf146fe54e5658fc85c24b846b1d0,Leo Lamprecht,2017-09-03 15:00:57+00:00,Leo Lamprecht,2017-09-03 15:00:57+00:00,Uploading testing builds should work now
a5cdaae401ed9fe09f954728600981bfa78699eb,Leo Lamprecht,2017-09-03 14:56:14+00:00,Leo Lamprecht,2017-09-03 14:56:14+00:00,Handle packing differently on CI
e5cd43938308e90ed6446a632c3ac6c64c2e16bd,Leo Lamprecht,2017-09-03 14:51:37+00:00,Leo Lamprecht,2017-09-03 14:51:37+00:00,Fixed tests for packed binary
4c7536ba5191e72f7c99d530c89ed24d6b487af5,Leo Lamprecht,2017-09-03 14:38:31+00:00,Leo Lamprecht,2017-09-03 14:38:31+00:00,Usage information is now consistent across commands
9b36c27598c1cbbd204895c1b3a5ddeef5903bc3,Leo Lamprecht,2017-09-03 14:29:43+00:00,Leo Lamprecht,2017-09-03 14:29:43+00:00,Made usage information work for all commands
2fd34580f34d05d1b51407df74ab27e72ab3b48c,Leo Lamprecht,2017-09-02 15:53:51+00:00,Leo Lamprecht,2017-09-02 15:53:51+00:00,8.0.0-beta.10
cf97a066102f56c12451cc1fbca624b850ab46c8,Leo Lamprecht,2017-09-02 15:44:33+00:00,Leo Lamprecht,2017-09-02 15:44:33+00:00,Use new config for everything
9492e395ca8395f1e232e8b8c50df484cab73376,Leo Lamprecht,2017-09-02 15:35:36+00:00,Leo Lamprecht,2017-09-02 15:35:36+00:00,Fixed all remaining team features
c3f9a0ea75041a0751149a554daa016aada9dc30,Leo Lamprecht,2017-09-02 15:25:16+00:00,Leo Lamprecht,2017-09-02 15:25:16+00:00,Made team switching work again
05869874412ef3841b65bdcba934b94f7c510e56,Donnie West,2017-09-02 15:10:29+00:00,Leo Lamprecht,2017-09-02 15:10:29+00:00,Prevent cross device linking error by copying instead of linking (#789)
aa38e055e72a185daa0cbb09032ef8fec6386cdf,Leo Lamprecht,2017-09-02 15:09:39+00:00,Leo Lamprecht,2017-09-02 15:09:39+00:00,Made tests for packed binary work
96bafc0e0d235b28ea2fa2bf25618ed4cb53d7d5,Leo Lamprecht,2017-09-02 15:03:00+00:00,Leo Lamprecht,2017-09-02 15:03:00+00:00,Temporarily use Yarn
bd35c4091f8b1b67e97d09ebb43482d9c043cb3f,Leo Lamprecht,2017-09-02 14:44:52+00:00,Leo Lamprecht,2017-09-02 14:44:52+00:00,Fixed tests
7fee74a0c074fe27381fabf48d44ab7fbc40280f,Leo Lamprecht,2017-09-02 14:38:13+00:00,Leo Lamprecht,2017-09-02 14:38:13+00:00,Bumped lockfile
d0562dd3bf6117124b197a2881bec6dd41944ee1,Leo Lamprecht,2017-09-02 11:41:32+00:00,Leo Lamprecht,2017-09-02 11:41:32+00:00,Several tests added
25e59997f5202bf07499cf37a996101901e01e17,Leo Lamprecht,2017-09-02 11:32:40+00:00,Leo Lamprecht,2017-09-02 11:32:40+00:00,Corrected linting ignore configuration
b6a0e8730cfff3a6e9e2aa152f01fa412d202558,Leo Lamprecht,2017-09-02 11:30:24+00:00,Leo Lamprecht,2017-09-02 11:30:24+00:00,No need to print when initializing config
20816b5a34a6bbaae4bedf00c8b4799215ffdddc,Leo Lamprecht,2017-09-02 11:28:12+00:00,GitHub,2017-09-02 11:28:12+00:00,Smaller text for logo
62bece4a2f16e79dac2de3957ecfda746eb6d25f,Leo Lamprecht,2017-09-02 11:26:02+00:00,GitHub,2017-09-02 11:26:02+00:00,New repo banner added
9c5cb06bd03aeb0427e6529efcfc9d8318856bcf,Leo Lamprecht,2017-09-01 23:07:10+00:00,Leo Lamprecht,2017-09-01 23:07:10+00:00,8.0.0-beta.9
c32c36a98f54f42a4a39596ba745fa6362172bf3,Leo Lamprecht,2017-09-01 23:05:47+00:00,Leo Lamprecht,2017-09-01 23:05:47+00:00,New token for uploading releases
10a1d9125c37839d98527c3b0511a36e14ec2c14,Leo Lamprecht,2017-09-01 22:52:24+00:00,Leo Lamprecht,2017-09-01 22:52:24+00:00,Fixed command logo
1db1fbd9b493dc533c0a7f50a150b0868cca983d,Leo Lamprecht,2017-09-01 22:47:17+00:00,Leo Lamprecht,2017-09-01 22:47:17+00:00,Bumped dependencies to the latest version
8435180f13c589dd412dd4adf5a1883a9b2250ba,Leo Lamprecht,2017-09-01 22:08:25+00:00,Leo Lamprecht,2017-09-01 22:08:25+00:00,Replaced all name occurences
3e677e3a34e480c1ba07d780721d239b266869f9,Leo Lamprecht,2017-09-01 21:36:24+00:00,Leo Lamprecht,2017-09-01 21:36:24+00:00,Merged in the zeit/now repository
6f4f25287597619c6428ccf56831c384775eed84,Leo Lamprecht,2017-09-01 21:36:12+00:00,Leo Lamprecht,2017-09-01 21:36:12+00:00,Removed everything
2f723a3c1b6209e2c9290b1a789c0599f49100f8,Leo Lamprecht,2017-09-01 19:43:03+00:00,Leo Lamprecht,2017-09-01 19:43:03+00:00,Removed useless file
f6685729aea21d0e3382b47f11f88b89024279f7,Leo Lamprecht,2017-09-01 19:40:40+00:00,Leo Lamprecht,2017-09-01 19:40:40+00:00,Perfected code structure for .sh
b9e7eb1d0bf8df79c43243b480f8985e5b026786,Leo Lamprecht,2017-09-01 19:12:55+00:00,Leo Lamprecht,2017-09-01 19:12:55+00:00,Even better structure for code
9b297cf76fb94fa0bf7d33433d50f45f26e6335f,Leo Lamprecht,2017-09-01 18:48:06+00:00,Leo Lamprecht,2017-09-01 18:48:17+00:00,Removed useless legacy files
ce2fe449cdb1d390c19cb446a6b787af5aec858f,Leo Lamprecht,2017-09-01 18:25:54+00:00,Leo Lamprecht,2017-09-01 18:25:54+00:00,Made loggin out from .sh work
fc082a841659e773db10a2d8428353053df2d7c9,Leo Lamprecht,2017-09-01 18:07:13+00:00,Leo Lamprecht,2017-09-01 18:07:13+00:00,Corrected import comments
5b38f092d71fb46576b30f95f765aea8b461f3e7,Leo Lamprecht,2017-09-01 17:56:48+00:00,Leo Lamprecht,2017-09-01 17:56:48+00:00,Made commands take advantage of new config
48a1ad52801bb16b034555392d293872f4b8f5f5,Leo Lamprecht,2017-09-01 17:15:06+00:00,Leo Lamprecht,2017-09-01 17:15:06+00:00,Better order for .sh commands
5e36b2f2e3a2b76288c0e3d8461245f18cf192c9,Leo Lamprecht,2017-09-01 17:14:04+00:00,Leo Lamprecht,2017-09-01 17:14:04+00:00,Support for special commands
ded122806ff6b6510b9aaa6ded268b8f4b42064b,Leo Lamprecht,2017-09-01 11:35:49+00:00,Leo Lamprecht,2017-09-01 11:35:49+00:00,Implemented the last sub command
fbf58ef698bf50696e683f3d318d0ad8589b5722,Leo Lamprecht,2017-09-01 11:27:53+00:00,Leo Lamprecht,2017-09-01 11:27:53+00:00,Made logs and logout work
f8339c53d8b89ebb913088be19954ad8d0c44517,Leo Lamprecht,2017-09-01 11:12:46+00:00,Leo Lamprecht,2017-09-01 11:12:46+00:00,Support for all aliases added
1b83978ac4cfe9e3b9eb08618b74db51f34f5662,Leo Lamprecht,2017-09-01 10:49:50+00:00,Leo Lamprecht,2017-09-01 10:49:50+00:00,Added all team features and ability to upgrade
110abfce0311a19bae8ddba25917cb401805924c,Leo Lamprecht,2017-09-01 10:25:55+00:00,Leo Lamprecht,2017-09-01 10:25:55+00:00,Fixed empty user-agent on logs
71a04d28110478ab4e81ce728e8c68a06d4fc60e,Leo Lamprecht,2017-09-01 10:19:15+00:00,Leo Lamprecht,2017-09-01 10:19:15+00:00,Ability to load logs added
3bfd5347003b0477c53011c2acd2be1864da5543,Leo Lamprecht,2017-08-30 11:56:05+00:00,Leo Lamprecht,2017-08-30 11:56:05+00:00,Ability to get secrets and current team
110c959902a8692b6255175d98f861238ebe6a1d,Leo Lamprecht,2017-08-30 11:29:47+00:00,Leo Lamprecht,2017-08-30 11:29:47+00:00,Ability to remove deployments brought back
c5d0f10455e5bb4acb6eaee4e2773dd033906a29,Leo Lamprecht,2017-08-30 11:24:53+00:00,Leo Lamprecht,2017-08-30 11:24:53+00:00,Syntax improved
2a50c2bd7f6247bddb1df3bee420573d26f05560,Leo Lamprecht,2017-08-30 11:24:25+00:00,Leo Lamprecht,2017-08-30 11:24:25+00:00,"Commands for getting DNS, domains and certs added"
36a2fee6e6dd6b87cd73f261e6cc7051c3c2b69c,Leo Lamprecht,2017-08-30 11:07:43+00:00,Leo Lamprecht,2017-08-30 11:07:43+00:00,Now able to debug and set a API URL
5a49cf01020f6387f6a50644cf7573e1ba103b39,Leo Lamprecht,2017-08-30 11:03:38+00:00,Leo Lamprecht,2017-08-30 11:03:38+00:00,Added `now scale` and `now alias` sub commands
d383505b7cb583f6d261893ec1ef67fc11286ed6,Leo Lamprecht,2017-08-30 10:46:08+00:00,Leo Lamprecht,2017-08-30 10:46:08+00:00,Brought back the `now ls` sub command
9ce4085a7bda4bfa36b88fd84f75466a08ded392,Leo Lamprecht,2017-08-30 09:57:30+00:00,Leo Lamprecht,2017-08-30 09:57:30+00:00,Always save dependencies as `devDependencies`
61631dc2270864f4ea65d683da66fc4280a9b87d,Igor Klopov,2017-08-30 09:53:50+00:00,Leo Lamprecht,2017-08-30 09:53:50+00:00,"Made installation work on Windows (#56)

* use 'which' to detect the path of global cmd

* Take advantage of `which-promise`"
575c0f46ee5daef285bebac79d4e990a5ee7c5e7,Alexis Sgarbossa,2017-08-29 14:27:15+00:00,Leo Lamprecht,2017-08-29 14:27:15+00:00,Fixed broken link for getting started (#750)
2f810ef60f2a9156fdd4d79ab39c48d61ab5d1ec,Matheus Fernandes,2017-08-25 09:23:43+00:00,Matheus Fernandes,2017-08-25 09:23:43+00:00,7.4.0
ca1be7b5018ede6c4a6901923e51ff2e94e45bba,Matheus Fernandes,2017-08-25 09:16:30+00:00,GitHub,2017-08-25 09:16:30+00:00,"Add support for coupon codes (#747)

* [BREAKING] `now domains`: remove `--config` flag

Needed so we can introduce `--coupon`

* Remove test code

* Fix the amount of erased lines upon error

* Make it async

* Add option to clear the output after adding the card

* Tweak success message

* Add support for coupon codes"
7336c8cb0ece0c5559e87bd713eba4f13dff0d11,Igor Klopov,2017-08-24 19:04:46+00:00,Matheus Fernandes,2017-08-24 19:04:46+00:00,"Fix for #729 (#745)

* use 'which' to detect the path of global cmd

* fix downloading apline binaries"
d8de1bcd9126e848eb3f43fd988dfa0091bfcc27,Nathan Rajlich,2017-08-24 18:58:51+00:00,Matheus Fernandes,2017-08-24 18:58:51+00:00,"secrets: treat any 4xx error code as ""user error"" (#744)

The Secrets endpoints used to inappropriately return a 400
error code when a secret name collision occurred (i.e. when
creating a secret with a name that already exists, or when
trying to rename a secret to a name that is already in use).
Now they return 409 Conflict which is more correct for those
scenarios.

So while we're at it, just treat all 4xx error codes as user errors."
733a288677c6195a8b0edca952e4708badb84753,Matheus Fernandes,2017-08-22 22:06:52+00:00,Matheus Fernandes,2017-08-22 22:06:52+00:00,7.3.1
372f2b4e4d7a9d69dd4f23308e2feb7753b589b3,Matheus Fernandes,2017-08-22 22:05:44+00:00,Leo Lamprecht,2017-08-22 22:05:44+00:00,"When on non-TTY mode, wait for the deployment to complete before exiting (#743)

* When on non-tty mode, wait for the deployment to complete before exiting

* Fix typo"
55879b3e321688f32b86421ff94c8609c2d74538,Jarmo Isotalo,2017-08-21 08:21:37+00:00,GitHub,2017-08-21 08:21:37+00:00,Atomically is the correct word (#741)
67801791c5fb95a63431caa6d6f1a6da57b066f8,Leo Lamprecht,2017-08-19 00:39:02+00:00,Leo Lamprecht,2017-08-19 00:39:02+00:00,8.0.0-beta.8
ed90053a12b66bdabf781847e3aba67b2015df8f,Leo Lamprecht,2017-08-19 00:38:43+00:00,Leo Lamprecht,2017-08-19 00:38:43+00:00,Automatically publish as a beta release
d75c3f9348e3719a45a5fe811b3030519d5a4f74,Leo Lamprecht,2017-08-19 00:34:18+00:00,Leo Lamprecht,2017-08-19 00:34:18+00:00,Set correct paths in bundle
cba609effd4a8e9ebee55519f0f7847e2c3ecf5d,Leo Lamprecht,2017-08-18 23:23:27+00:00,Leo Lamprecht,2017-08-18 23:23:27+00:00,8.0.0-beta.7
0b82f77def2da8ab65de8d2fd2d60d2b7e040f79,Leo Lamprecht,2017-08-18 23:21:32+00:00,Leo Lamprecht,2017-08-18 23:21:32+00:00,Bumped `babel-loader` to the latest version
ee6c78edd0b76f08a13c0956dd7ebbbf0435ca98,Leo Lamprecht,2017-08-18 23:19:57+00:00,Leo Lamprecht,2017-08-18 23:19:57+00:00,Made google cloud deployments work again
913e99364b9eb5ba3a3f9647bf774f6acb5f7639,Leo Lamprecht,2017-08-18 12:58:52+00:00,Leo Lamprecht,2017-08-18 12:58:52+00:00,8.0.0-beta.6
e51e7135645682f87e6adfefb5dbd4ef419d25ad,Leo Lamprecht,2017-08-18 12:58:33+00:00,Leo Lamprecht,2017-08-18 12:58:33+00:00,Copy missing file into bundle
98ec36da6446aa33b3e389ff803f2c30dc4dbf89,Leo Lamprecht,2017-08-18 12:15:43+00:00,Leo Lamprecht,2017-08-18 12:15:43+00:00,8.0.0-beta.5
18cfb8ce75524c62359ae0c2f00ac6d15b8741a6,Leo Lamprecht,2017-08-18 12:14:23+00:00,Leo Lamprecht,2017-08-18 12:14:23+00:00,Exit process when not logged into GCP and trying to deploy
e0fa631b9929b17254e670b5f5791f199fa24354,Leo Lamprecht,2017-08-18 12:12:57+00:00,Leo Lamprecht,2017-08-18 12:12:57+00:00,Correctly inject directory names
f84e4e76a9bd02b0fc4bfa8f736c8827baedc95d,Leo Lamprecht,2017-08-18 11:58:57+00:00,Leo Lamprecht,2017-08-18 11:58:57+00:00,Removed unused dependency
a1f7dd1bea013ef27f436630b26687e68fea0844,Leo Lamprecht,2017-08-18 11:54:23+00:00,Leo Lamprecht,2017-08-18 11:54:23+00:00,Use correct npm scripts
0ee23be2891e0292da4f169735ad8a7367afb2f4,Leo Lamprecht,2017-08-18 11:43:32+00:00,Leo Lamprecht,2017-08-18 11:43:32+00:00,8.0.0-beta.4
36d7cfd4eb4d0d8ad5932128aa2246dd42c01090,Leo Lamprecht,2017-08-18 11:43:13+00:00,Leo Lamprecht,2017-08-18 11:43:13+00:00,Field for repository added to package info
b4db734ec66f47fb095509476ddacbfd45189a4c,Leo Lamprecht,2017-08-18 11:42:33+00:00,Leo Lamprecht,2017-08-18 11:42:33+00:00,Added missing `arr-flatten` dependency
a1a646e3038497c781b5931d9b44bdd0006e7163,Leo Lamprecht,2017-08-18 11:40:18+00:00,Leo Lamprecht,2017-08-18 11:40:18+00:00,Bumped dependencies to the latest version
c508751bc3a0584ebecffa9cd3d3b4af87fe55f7,Leo Lamprecht,2017-08-18 11:36:46+00:00,Leo Lamprecht,2017-08-18 11:36:46+00:00,Removed a directory description
98a654ab67279720d65d0627e10d1129366d71f7,Leo Lamprecht,2017-08-18 11:36:12+00:00,Leo Lamprecht,2017-08-18 11:36:12+00:00,Remember the configuration again
0f4a493aa97e3a2d1ca2f0bad1e6810fedfa8b34,Leo Lamprecht,2017-08-18 11:24:10+00:00,Leo Lamprecht,2017-08-18 11:24:10+00:00,Sweetened message login messages
cbe4af8eaa7c04bc128004baeee678a9418c0c13,Leo Lamprecht,2017-08-18 11:16:01+00:00,Leo Lamprecht,2017-08-18 11:16:01+00:00,Use `mri` instead of `minimist`
17796a682d5011f9e0d28e480475699a29c1f4f3,Leo Lamprecht,2017-08-15 19:06:46+00:00,Leo Lamprecht,2017-08-15 19:06:46+00:00,8.0.0-beta.3
ebf6c27aa3efc66ecb2c980e1309a57f124cc2ff,Leo Lamprecht,2017-08-15 19:05:29+00:00,Leo Lamprecht,2017-08-15 19:05:29+00:00,Build before linking
7746efff3ea3e415e8d80e0c2f84c64eaf0334bc,Leo Lamprecht,2017-08-15 18:55:39+00:00,Leo Lamprecht,2017-08-15 18:55:39+00:00,Additional information added to readme
4f0651b26b2c6bf7de4c225932d30e255573cf1c,Leo Lamprecht,2017-08-15 18:43:04+00:00,Leo Lamprecht,2017-08-15 18:43:04+00:00,Avoid useless bundle builds
870c95c870b640b8e67f5a21e2db0f3ff30e2d5c,Leo Lamprecht,2017-08-15 18:29:27+00:00,Leo Lamprecht,2017-08-15 18:29:27+00:00,Fixed deployments
f3b6f9edb04fe4afe69d150e16592ec614dd4c6a,Leo Lamprecht,2017-08-15 18:26:45+00:00,Leo Lamprecht,2017-08-15 18:26:45+00:00,Ignore `pkg` output in Git
ebd3db90b024857cb0e1fd273c3c6cc3006f3a85,Igor Klopov,2017-08-15 18:25:47+00:00,Leo Lamprecht,2017-08-15 18:25:47+00:00,"Yarn artifacts + fix alpine download (#51)

* backup of binary to be included into yarn artifacts

* fix downloading alpine binary"
9d7cac8acbf077e84d394227d4d37a04d7d8f161,Leo Lamprecht,2017-08-15 18:18:34+00:00,Leo Lamprecht,2017-08-15 18:18:34+00:00,Build again before deploying
55dec6e41972e8d8717892ee9c717445b84bd24e,Leo Lamprecht,2017-08-15 18:13:07+00:00,Leo Lamprecht,2017-08-15 18:13:07+00:00,Fixed ability to push releases to Slack
c847179be1945c0ae37f865decfabaedddb236c8,Leo Lamprecht,2017-08-15 18:05:23+00:00,Leo Lamprecht,2017-08-15 18:05:23+00:00,Missing `pkg` dependency added
ecbef2ac9dadceaefba02f9fd591f5e7aa3cf91f,Leo Lamprecht,2017-08-15 17:59:43+00:00,Leo Lamprecht,2017-08-15 17:59:43+00:00,Ensure that package bundle doesn't get lost on CI
341c22ac3199ad5c185bba480dae98b28c082e1b,Leo Lamprecht,2017-08-15 17:56:27+00:00,Leo Lamprecht,2017-08-15 17:56:27+00:00,Removed native module from dependency list
d2642f960161db0c963239b55badea455b76f0b9,Leo Lamprecht,2017-08-15 17:51:42+00:00,Leo Lamprecht,2017-08-15 17:51:42+00:00,Missing badges added
1f5a2dbd65cfe706387124b0cea0b5cccc453bd1,Leo Lamprecht,2017-08-15 17:47:11+00:00,Leo Lamprecht,2017-08-15 17:47:11+00:00,Use Travis CI instead of Circle CI
9d9fd7e0970331ab86d1b807c971ba58a49ef144,Leo Lamprecht,2017-08-15 17:07:55+00:00,Leo Lamprecht,2017-08-15 17:07:55+00:00,Tell npm to publish as beta
6efdb0fb9d0fbe341e23b350c0e48384d759cb04,Leo Lamprecht,2017-08-15 17:06:36+00:00,Leo Lamprecht,2017-08-15 17:06:36+00:00,Test on Circle CI
30ed4bcc64812bc2c00e16b81b96a08b7beb21b3,Leo Lamprecht,2017-08-15 17:03:54+00:00,Leo Lamprecht,2017-08-15 17:03:54+00:00,Added missing dependency
06f5ebf111b68bf084d7d835c7abca3a52bbdb38,Leo Lamprecht,2017-08-15 16:58:19+00:00,Leo Lamprecht,2017-08-15 16:58:19+00:00,Added support for updates
fb67971bfd8389e855a513477445ee298a5728df,Leo Lamprecht,2017-08-15 16:30:48+00:00,Leo Lamprecht,2017-08-15 16:30:48+00:00,Package description added
c7535de719dabec14ff34af65fb8deaaf6d40840,Leo Lamprecht,2017-08-15 16:30:13+00:00,Leo Lamprecht,2017-08-15 16:30:13+00:00,Added ability to link in development
d2617270bb5997a01cc092ba6e25eb8eca676d62,Leo Lamprecht,2017-08-15 16:26:49+00:00,Leo Lamprecht,2017-08-15 16:26:49+00:00,Fixed URL for `pkg` downloads
7e37d8825cd91fb8cc02afb57e7b207e0ce6a7f5,Leo Lamprecht,2017-08-15 16:25:31+00:00,Leo Lamprecht,2017-08-15 16:25:31+00:00,Create a bundle using `pkg` on the fly
35e7b994ef4079ee3bacb5276ac46001b516f066,Leo Lamprecht,2017-08-15 16:11:13+00:00,Leo Lamprecht,2017-08-15 16:11:13+00:00,Fixed Flow errors
3bb9011e2a7b1ca9667e94f3d68d02b68db984d6,Leo Lamprecht,2017-08-15 15:50:07+00:00,Leo Lamprecht,2017-08-15 15:50:07+00:00,Replaced `fs.promised` with `fs-extra-promise`
cfcfe4a72942d4ca94e48edb66c8c3dcfedcb100,Leo Lamprecht,2017-08-15 15:46:25+00:00,Leo Lamprecht,2017-08-15 15:46:25+00:00,Moved all dependencies into a single property
9be58080291c4a2013e8ec9507af4f342a13638c,Leo Lamprecht,2017-08-15 15:42:39+00:00,Leo Lamprecht,2017-08-15 15:42:39+00:00,Made pre-commit hook only lint Flow code
b612fbc02b1aae34bb76ed90aef087bee16bfdcf,Leo Lamprecht,2017-08-15 15:37:20+00:00,Leo Lamprecht,2017-08-15 15:37:20+00:00,"Removed examples, that's what the site is for"
6ba6999bb91ae17540dbe80da083bc5082be5290,Leo Lamprecht,2017-08-15 15:35:54+00:00,Leo Lamprecht,2017-08-15 15:35:54+00:00,Removed useless dependencies
e787d72a2fd50848cc713095a314dfbeb197cf08,Leo Lamprecht,2017-08-15 15:26:28+00:00,Leo Lamprecht,2017-08-15 15:26:28+00:00,Tell Webpack to build into the correct directory
8f2f359462bf462de6c47dfeba9f7b96e3f080be,Leo Lamprecht,2017-08-15 15:21:12+00:00,Leo Lamprecht,2017-08-15 15:21:12+00:00,Use Webpack for building Flow code
1ff8139f74d0b17bd0cf36e40aa5f36b3880c778,Leo Lamprecht,2017-08-15 14:56:39+00:00,Leo Lamprecht,2017-08-15 14:56:39+00:00,Automatically run flow when source changes
340b8721ac91f47fc694a74e55b6032e70f41f39,Leo Lamprecht,2017-08-15 14:37:09+00:00,Leo Lamprecht,2017-08-15 14:37:09+00:00,Made sure that shortlinks point to the right place
d8c8bb62bc265d4db806d67b6dfa737de9600e6a,Leo Lamprecht,2017-08-15 14:30:12+00:00,Leo Lamprecht,2017-08-15 14:30:12+00:00,Removed license note in `readme.md`
39bda5f6b69056cd2c755099ba1ff7df4a9e2bf0,Leo Lamprecht,2017-08-15 14:27:20+00:00,Leo Lamprecht,2017-08-15 14:27:20+00:00,Converted pre-commit hook to script
cf40198b22e9d52297a2c43e5c8d394b8ce2035a,Leo Lamprecht,2017-08-15 14:26:18+00:00,Leo Lamprecht,2017-08-15 14:26:18+00:00,Better directory name for build output
ac31ded4469311bd531fcd72fb44713df67982f2,Leo Lamprecht,2017-08-15 14:24:52+00:00,Leo Lamprecht,2017-08-15 14:24:52+00:00,Comments for ignored files
ba9567941deb5ce7396d1f6dab01c5aed2a1b83b,Leo Lamprecht,2017-08-15 14:24:23+00:00,Leo Lamprecht,2017-08-15 14:24:23+00:00,Made company name in license legally correct
100b37b475cc381d7d26694b36b6310669384311,Leo Lamprecht,2017-08-15 14:22:57+00:00,Leo Lamprecht,2017-08-15 14:22:57+00:00,Lowercased text files
2b908305d0432ca755acbd53a04fdf2157ae12a5,Leo Lamprecht,2017-08-15 14:22:42+00:00,Leo Lamprecht,2017-08-15 14:22:42+00:00,Bumped dependencies to the latest version
9d29e64038e3763e2d9072fe7f2a833643a01454,Leo Lamprecht,2017-08-15 14:20:50+00:00,Leo Lamprecht,2017-08-15 14:20:50+00:00,Improved order of package fields
b5fcb44c649a8785db21d46b4fdb716e9b36ff0d,Leo Lamprecht,2017-08-15 14:20:13+00:00,Leo Lamprecht,2017-08-15 14:20:13+00:00,Pinned dependencies
602e121742e145d4a25febc0245ca0a97a189221,Logan McAnsh,2017-08-15 13:33:50+00:00,Leo Lamprecht,2017-08-15 13:33:50+00:00,"Fixed a typo in the `now scale` usage information (#734)

Fixed a typo in the `now scale` usage information"
4bdaa3fa26986767076838517a63895adbc35e07,Leo Lamprecht,2017-08-14 10:56:01+00:00,Leo Lamprecht,2017-08-14 10:56:01+00:00,8.0.0-beta.2
8973f7c184b99d9cc9b197fc03b881d20132c6d3,Matheus Fernandes,2017-08-08 03:48:34+00:00,Matheus Fernandes,2017-08-08 03:48:34+00:00,Move legacy code to where it belongs
21cbdc20592502276577aba9cc690917a2513216,Matheus Fernandes,2017-07-29 21:50:19+00:00,Matheus Fernandes,2017-07-29 21:50:19+00:00,7.3.0
43f7262bff0992f97af93888c825cfcc0ef0d43f,Leo Lamprecht,2017-07-29 21:25:04+00:00,Leo Lamprecht,2017-07-29 21:25:04+00:00,Bumped dependencies to the latest version
4ae45b4e7e7a332ac16c434d06003d39a398c37f,Leo Lamprecht,2017-07-29 21:20:19+00:00,GitHub,2017-07-29 21:20:19+00:00,Invalided cache for slack badge
f4c6054acbca44bfce4fbbf29f7b2b86115cb274,Igor Klopov,2017-07-29 21:15:14+00:00,Leo Lamprecht,2017-07-29 21:15:14+00:00,"Don't deploy again when name or public state changes (#706)

* no need in forceNew after https://github.com/zeit/now-create/pull/83

* fix lint"
6169cc2f5bad8669e55653a27996dc2c57936050,Matheus Fernandes,2017-07-28 11:44:09+00:00,Guillermo Rauch,2017-07-28 11:44:09+00:00,"Fix the default config description (#38)

* There's no auth stuff in here

* `now` -> `Now`

* Add missing `'`

* Mention `now config help`"
817184951da2cbbcabae11c47fa29c628db39dcf,Naoyuki Kanezawa,2017-07-21 03:31:28+00:00,Matheus Fernandes,2017-07-21 03:31:28+00:00,"Add basic config command (#33)

* add basic config command

* Add a success message

* Grammar

* Remove extra spaces"
cad1fbd31d8f898c6a1f5499811ea87fa82aee89,Naoyuki Kanezawa,2017-07-21 03:31:17+00:00,Matheus Fernandes,2017-07-21 03:31:17+00:00,Generate random bucket names and save to config (#32)
648da4e85a9f06a995b8c9f6365e277a09e117d8,Naoyuki Kanezawa,2017-07-21 03:00:38+00:00,Matheus Fernandes,2017-07-21 03:00:38+00:00,Ignore out dir on lint (#35)
71c586ec7b08777af8e5acba26bb5a7a59cd8238,Naoyuki Kanezawa,2017-07-21 02:58:48+00:00,Matheus Fernandes,2017-07-21 02:58:48+00:00,Fix flow annotations to suppress errors (#36)
776c759de8a5a82c7d7ab187f60423646b72e7ee,Naoyuki Kanezawa,2017-07-20 04:09:04+00:00,Guillermo Rauch,2017-07-20 04:09:04+00:00,retry createFunction for the case role is not ready on aws deployment (#31)
1ec72f0eef5ecbdaf78e36daea94cd5db833ce0a,Naoyuki Kanezawa,2017-07-19 14:53:24+00:00,Matheus Fernandes,2017-07-19 14:53:24+00:00,Add `progress` module to dependencies (#30)
e061c9bbc4721f16c675c31d7e8b4d269a096ada,Matheus Fernandes,2017-07-19 12:47:39+00:00,Matheus Fernandes,2017-07-19 12:47:39+00:00,Tell ESLint to ignore legacy code
dc03fb4d4e8e72f782c525d9be0d776772fffff6,Matheus Fernandes,2017-07-19 12:47:23+00:00,Matheus Fernandes,2017-07-19 12:47:23+00:00,Add the license
4db2c0619d0bfc1116096f7e4fe5891d1c4223da,Elliott Beach,2017-07-19 09:04:41+00:00,Naoyuki Kanezawa,2017-07-19 09:04:41+00:00,"Text.js: Remove bad restore call. (#26)

Fixes #25.
The `restore` call is not needed, since at this point no user input has been processed.
Even if you moved the definition up, it would still cause a ReferenceError due to setRawMode not existing, so it's best to just not do it."
9fe6e928f8c7cd3e6947710a1ac64b18380971de,Guillermo Rauch,2017-07-18 07:04:30+00:00,Guillermo Rauch,2017-07-18 07:04:30+00:00,exit correctly from unhandled errors
2003bb67bf19dddfe7b50cef299731aef5322798,Guillermo Rauch,2017-07-18 07:04:09+00:00,Guillermo Rauch,2017-07-18 07:04:09+00:00,Merge branch 'master' of github.com:zeit/now
3e64c393905d66b6933d30dd45b99349d7c65f49,Guillermo Rauch,2017-07-18 07:00:42+00:00,Guillermo Rauch,2017-07-18 07:00:42+00:00,handle unexpected rejections correctly
d0dae3b01a791a1df58da4e8b081dd9a98d19098, Amio ,2017-07-16 17:13:47+00:00,Matheus Fernandes,2017-07-16 17:13:47+00:00,"Fix typos in Readme.md (#20)

* Fix more typos in Readme.md

* `\` -> `|`"
2e548e58385b8f24dd987ebfb9fcd0124518a886,Mirza Brunjadze,2017-07-14 10:42:14+00:00,Guillermo Rauch,2017-07-14 10:42:14+00:00,Fix typos in Readme.md (#19)
475e6629920eceb454153711cc1ab672796c641a,Guillermo Rauch,2017-07-13 14:26:45+00:00,GitHub,2017-07-13 14:26:45+00:00,preview tag -> beta
0b5998d4b2f07b2814e02baddd4fdb32ce7204eb,Guillermo Rauch,2017-07-13 13:51:30+00:00,GitHub,2017-07-13 13:51:30+00:00,Delete test.js
185c78a0fefe26f9b9576b651936b3fcfa2c8ed1,Guillermo Rauch,2017-07-13 13:47:13+00:00,GitHub,2017-07-13 13:47:13+00:00,Update Readme.md
4c5a0a0050d723e44e9a227a1a12b52a3fe19699,Guillermo Rauch,2017-07-13 12:49:15+00:00,Guillermo Rauch,2017-07-13 12:49:15+00:00,preview
316d711a9ca092e6c8f1fcc20842dd8570431ae0,Igor Klopov,2017-07-11 11:01:57+00:00,Leo Lamprecht,2017-07-11 11:01:57+00:00,"Support for Node.js 0.10 and Git for Windows (#713)

* add support of nodejs 0.10

* handle 'incorrect header check' error from gunzip

* fix progress bar

* use async-retry restart after 'incorrect header check'

* fix for #613"
dd43a3a57fe39d621941df47412002e814d45fe9,nkzawa,2017-07-09 02:32:15+00:00,nkzawa,2017-07-09 02:32:15+00:00,Release 7.2.4
5be95dc6f8ae4b28a9110e3f98c542bcbb5cc52a,nkzawa,2017-07-09 02:26:37+00:00,nkzawa,2017-07-09 02:26:37+00:00,use https for badge url
2bc4a1e60137bcb736cd34fc7cf041649360dd96,Naoyuki Kanezawa,2017-07-09 02:20:46+00:00,Guillermo Rauch,2017-07-09 02:20:46+00:00,use https for downloading now binary (#712)
6bddeabdb334e64e4289bc1aca0034f06b4aaf14,Leo Lamprecht,2017-07-08 22:17:28+00:00,Leo Lamprecht,2017-07-08 22:17:28+00:00,Lockfile updated
2db1e514e2ac18ef333c78ca24d97825bceea5ac,Leo Lamprecht,2017-07-08 22:11:38+00:00,Leo Lamprecht,2017-07-08 22:11:38+00:00,7.2.3
4b163c48351d102f211bfb8e4969c2b1f4a941ef,Leo Lamprecht,2017-07-08 22:10:16+00:00,Leo Lamprecht,2017-07-08 22:10:16+00:00,Now fetching CLI downloads from our CDN
f5c1261553440fa3029a723f048aa158475566ab,Leo Lamprecht,2017-07-08 09:26:46+00:00,Leo Lamprecht,2017-07-08 09:26:46+00:00,Only upload CI binaries to Slack for our branches
4a1e04fe46cbe103bb766142887f2f4a8838c757,Leo Lamprecht,2017-07-08 09:20:58+00:00,Leo Lamprecht,2017-07-08 09:20:58+00:00,"Match all tags on Circle CI, we always use SemVer"
a9c862a22838b5535f330da305413f125bf8b916,Leo Lamprecht,2017-07-07 22:18:40+00:00,Leo Lamprecht,2017-07-07 22:18:40+00:00,Allow GitHub Releases uploader to extend existing one
66a0641214bab22515d3849dd0d25b284ff81e55,Leo Lamprecht,2017-07-07 21:52:00+00:00,Leo Lamprecht,2017-07-07 21:52:00+00:00,7.2.2
3647ce7bd9671175b446975d5df41806b6403004,Leo Lamprecht,2017-07-07 21:50:45+00:00,Leo Lamprecht,2017-07-07 21:50:47+00:00,Only allow releases inside the ZEIT org
ed34ef6f748595b22270735ac6e8bd3d925987d2,Naoyuki Kanezawa,2017-07-07 21:50:31+00:00,Leo Lamprecht,2017-07-07 21:50:31+00:00,"Avoid retrieving the deployment list when aliasing (#708)

* 7.2.0

* alias: use deployment url which is included in alias data

* alias: remove remaining https prefix"
153b20cee526da15c146e6aa3ec3aca382309b34,Leo Lamprecht,2017-07-07 21:41:05+00:00,Leo Lamprecht,2017-07-07 21:41:05+00:00,Automatically publish to npm
1cb7b3c8e49ff0c5b357051ccf824ad041b2ca20,Leo Lamprecht,2017-07-07 21:34:42+00:00,Leo Lamprecht,2017-07-07 21:34:42+00:00,Install custom dependencies after the normal ones
21b0c13b6b94935cd6185323772aa89ce5dc92a5,Leo Lamprecht,2017-07-07 21:34:31+00:00,Leo Lamprecht,2017-07-07 21:34:31+00:00,Let Circle CI determine the git tag
d4bcf750557037811e0e5cf15b6e51c96ead2ffe,Leo Lamprecht,2017-07-07 21:28:52+00:00,Leo Lamprecht,2017-07-07 21:28:52+00:00,7.2.1
4a7cefa92228862e04fb342b6cd33e09cf03e7bf,Leo Lamprecht,2017-07-07 21:25:14+00:00,Leo Lamprecht,2017-07-07 21:25:14+00:00,Perfected structure for testing config
9b138191d92e27b99212e8db9e3ca42b2d49f39c,Leo Lamprecht,2017-07-07 21:20:07+00:00,Leo Lamprecht,2017-07-07 21:20:07+00:00,Better grouping for Circle CI commands
c74a88c2b6318690224199ba2a9b518408b0c557,Leo Lamprecht,2017-07-07 21:05:00+00:00,Leo Lamprecht,2017-07-07 21:05:00+00:00,Ensure that directory with packed binary exists
f035cd74156338f25077b224f4cc03821539e3b0,Leo Lamprecht,2017-07-07 20:57:18+00:00,Leo Lamprecht,2017-07-07 20:57:18+00:00,Load binaries for release from ./packed
816b23177df491ad8c95463d9ff9d6aa7f2cb77b,Leo Lamprecht,2017-07-07 20:48:47+00:00,Leo Lamprecht,2017-07-07 20:48:47+00:00,Add binaries to the correct tag when releasing
1d2b6bc3e1da15751447102532a6093a4871ff96,Leo Lamprecht,2017-07-07 20:05:36+00:00,Leo Lamprecht,2017-07-07 20:05:36+00:00,Don't check node version when uploading binary to Slack
8869a985979610e5fadcf7741e2eb73f0a7c437c,Leo Lamprecht,2017-07-07 16:45:25+00:00,Leo Lamprecht,2017-07-07 16:45:25+00:00,Upload binaries to Slack for testing
4db07394a38c5150e688c7f6b6ec48d3f93f3593,Leo Lamprecht,2017-07-07 16:44:18+00:00,Leo Lamprecht,2017-07-07 16:44:18+00:00,Adjusted uploading script for Slack
8f79c9d6f10d6cc8548f6c633546c562e276ee51,Leo Lamprecht,2017-07-07 16:29:21+00:00,Leo Lamprecht,2017-07-07 16:29:21+00:00,Make artifacts available on Circle CI
dd956e6cf71ebec8c03035bfb0f741e2957378ef,Leo Lamprecht,2017-07-07 16:24:21+00:00,Leo Lamprecht,2017-07-07 16:24:21+00:00,Circle CI is using NVM to install Node.js
e11dde4c97812eab5843bd7001274ef7cf4226c0,Leo Lamprecht,2017-07-07 16:21:50+00:00,Leo Lamprecht,2017-07-07 16:21:50+00:00,Use the latest Node.js version in Circle CI
517a811e08450e7aefc75fcba25f9e909dcb4b67,Leo Lamprecht,2017-07-07 16:18:30+00:00,Leo Lamprecht,2017-07-07 16:18:39+00:00,Added ability to build on Circle CI
84ecbcb772b028afa5b40429b26dc449417c172a,Naoyuki Kanezawa,2017-07-07 15:49:52+00:00,Leo Lamprecht,2017-07-07 15:49:52+00:00,"Removed HTTPS prefix from alias list (#709)

* 7.2.0

* alias: remove https prefix"
8dacdf8241405cacb94b8a100056142c41d0074b,Leo Lamprecht,2017-07-07 11:18:52+00:00,Leo Lamprecht,2017-07-07 11:18:52+00:00,7.2.0
9fcf9c004eb6dc001c2a36ba961a1aaa02ec7592,Olli Vanhoja,2017-07-07 04:04:58+00:00,Matheus Fernandes,2017-07-07 04:04:58+00:00,"Remove associated aliases and certificates before removing a domain (#703)

* Remove associated aliases and certificates before removing a domain

Previously this has been partially done on the server side but
it's better to do it client side to avoid accidentally removing
something that shouldn't be removed in team environments.

* Don't print the domain id

* Grammar

* Remove indentation"
4dcab272df662060f1dca791a881d1cd9b3d55be,Matheus Fernandes,2017-07-07 04:02:34+00:00,GitHub,2017-07-07 04:02:34+00:00,"Don't throw `Domain not found` when trying to `now alias` to a new domain (#702)

* Don't throw `Domain not found` when trying to alias to a new domain

* Remove `console.log`

* Prettier stuff"
55d25a19d5679a8c881b21cf2a222f9acaf86834,Leo Lamprecht,2017-07-04 10:20:48+00:00,Leo Lamprecht,2017-07-04 10:20:48+00:00,Avoid `npm run link` warnings
6eae5d1ab237725cf2be6c5224442ed8521e7ff7,Leo Lamprecht,2017-07-04 10:19:19+00:00,Leo Lamprecht,2017-07-04 10:19:19+00:00,Lockfile added
7fcda07cc7900e1c3821cc404702423c961bbbb3,Leo Lamprecht,2017-06-28 18:19:13+00:00,Leo Lamprecht,2017-06-28 18:19:13+00:00,7.1.1
b2a4c7e7f567c3edd687904ffe4e1e3295929b7d,Leo Lamprecht,2017-06-28 18:17:19+00:00,Leo Lamprecht,2017-06-28 18:17:19+00:00,Prettified everything
7e21d71a04dbb10a5b5f0c6eec38c3029b791d1d,Leo Lamprecht,2017-06-28 18:13:46+00:00,Leo Lamprecht,2017-06-28 18:13:46+00:00,Bumped dependencies to the latest version
1daaf3037b0a8e22a5125cc2548912e59bd5cd0e,Jarmo Isotalo,2017-06-28 18:08:51+00:00,Leo Lamprecht,2017-06-28 18:08:51+00:00,"Keep trying to scale if deployment is not yet ready (#701)

* Keep on polling now-scale when deployment is not ready

* Use `ms`"
50b7f878544a87119544e4d72857d5072a27c470,Igor Klopov,2017-06-28 17:44:18+00:00,Leo Lamprecht,2017-06-28 17:44:18+00:00,"Fixed property `username` not being defined (#700)

https://github.com/zeit/now-cli/blob/7.1.0/bin/now-deploy.js#L298
fixes https://github.com/zeit/now-cli/issues/633"
0392b5e3188d31d76bcbb7a884142f8d3cf20950,Leo Lamprecht,2017-06-25 17:02:56+00:00,Leo Lamprecht,2017-06-25 17:02:56+00:00,7.1.0
d793695dcc4f98b6d2c2ee93503bcd8ffbb96584,Leo Lamprecht,2017-06-25 16:35:49+00:00,Leo Lamprecht,2017-06-25 16:35:49+00:00,Downgraded `socket.io-client` to avoid several problems
a604c1f5589f5ef67a18dfcfa46296c0b549d205,Leo Lamprecht,2017-06-25 16:33:58+00:00,Leo Lamprecht,2017-06-25 16:33:58+00:00,Bumped dependencies to the latest version
ebcda315a5a2d09f20fc377889f63035ae32bd38,Igor Klopov,2017-06-25 16:32:56+00:00,Leo Lamprecht,2017-06-25 16:32:56+00:00,"Ensured correct output for error messages (#694)

* add await to responseError calls

* add await to login(apiUrl) calls"
17b7a5464de05554b2c28ebafa1f96965add5a85,Josh Junon,2017-06-24 15:49:29+00:00,Leo Lamprecht,2017-06-24 15:49:29+00:00,"Now respecting the `files` property inside `now.json` (#692)

* whitelist now.json files over .gitignores (fixes #596)

* Prettified"
301166831afceff07f5bb1f2f164651d0fda59b0,Guillermo Rauch,2017-06-20 10:07:21+00:00,Leo Lamprecht,2017-06-20 10:07:21+00:00,"Fixed missing token handling (#690)

* handle API errors when fetching user

* handle API errors in some of the core Now methods

* add ability for `handleError` to report full stack trace in debug mode

* make `responseError` utility reusable

* handle top-level promise errors in entry functions of all commands

* allow for logging in when user has a bad token

* fix CI

* Fix reference error

* Improve message

* Fix typo

* Prettify"
89e08bc2e7217a832a5bec09013d2397d7d59d9d,Leo Lamprecht,2017-06-17 12:47:54+00:00,Leo Lamprecht,2017-06-17 12:47:54+00:00,7.0.2
95042e1a77658c5ee122d6538dca348e527909bc,Igor Klopov,2017-06-17 10:44:18+00:00,Leo Lamprecht,2017-06-17 10:44:18+00:00,"Ask to re-install with `--unsafe-perm` on `EACCES` (#683)

* ask user to reinstall with --unsafe-perm on EACCES

* webpack overrides process.env totally. removed DefinePlugin

* Cleaned up the code a little

* Missing import comments added"
d60251703c9f20285f2343ec6ac4ba978c5f4d2e,Matheus Fernandes,2017-06-16 02:40:34+00:00,Matheus Fernandes,2017-06-16 02:40:34+00:00,7.0.1
8d971d7b2bbd0fa0f8d2362b8c6f5fa3cff7e766,Matheus Fernandes,2017-06-16 02:39:40+00:00,Matheus Fernandes,2017-06-16 02:39:40+00:00,Bump `email-prompt`  fixes #679
a88ecb993624938d0f2980ca7509cc072b14ed4c,Matheus Fernandes,2017-06-16 01:38:27+00:00,Guillermo Rauch,2017-06-16 01:38:27+00:00,Revert ea9af7d and fix the existing message (#680)
b6a714f6c7d06a32c2f70ff8654538b3840f529f,Leo Lamprecht,2017-06-15 14:19:27+00:00,Leo Lamprecht,2017-06-15 14:19:27+00:00,Be more definite about what is being installed
9d30b4fcd3d89dde559fd6a18575870e7170b094,Leo Lamprecht,2017-06-15 14:05:07+00:00,Leo Lamprecht,2017-06-15 14:05:07+00:00,7.0.0
9fbeb61ff7af0872cd5e11c97dc257974e77d486,Leo Lamprecht,2017-06-15 13:37:18+00:00,Leo Lamprecht,2017-06-15 13:37:18+00:00,Prettified arrow function
ea9af7d746369e8ce686ddea650539f73b0fb01b,Leo Lamprecht,2017-06-15 13:35:45+00:00,Leo Lamprecht,2017-06-15 13:35:45+00:00,"Display proper error message if path doesn't exist

This closes #675"
8a603c04d8705f8927c2840c840f1adb7ab14c1b,Leo Lamprecht,2017-06-15 13:29:36+00:00,Leo Lamprecht,2017-06-15 13:29:36+00:00,"Made `now cc add` case-unsensitive

This closes #631"
12edb30d20228ecbc5601bf5a58b6511385e0d16,Leo Lamprecht,2017-06-15 12:28:24+00:00,Leo Lamprecht,2017-06-15 12:28:24+00:00,Use arrow functions and import comments where possible
9089fb8a41a1cef6df2bf2839e1981630acc58cc,Mike Engel,2017-06-15 12:26:05+00:00,Leo Lamprecht,2017-06-15 12:26:05+00:00,"Allow credit card numbers to be pasted with `now cc add` (#656)

This fixes a bug where, when pasting a credit card, it would print the
number correctly, but also append too much placeholder. When hitting
enter, backspace, or another number, it would begin printing (and
formatting) `undefined`. This adds a special case where the CC will be
formatted to account for spaces when comparing against the length of the
existing value or placeholder."
e2cc19e8d5a4b83b94a8bd16dd30b566a79b5e60,Leo Lamprecht,2017-06-15 12:16:00+00:00,Leo Lamprecht,2017-06-15 12:16:00+00:00,Added `npm run prettify` for running `prettier` manually
27319e34b48afea5837dbc04e6f2c14f924a2a00,David Corwin,2017-06-15 12:06:25+00:00,Leo Lamprecht,2017-06-15 12:06:25+00:00,"Improved usage information for `now switch` (#668)

* updated help message for `now switch` to reference the argument for the team as the slug instead of the id

* Improved message

* Prettified"
1fc76f1b608d90e333d4626c894772ceb206d2b3,Naoyuki Kanezawa,2017-06-14 08:30:56+00:00,Leo Lamprecht,2017-06-14 08:30:56+00:00,"Removed IDs from secrets list (#665)

* remove secret ids

* prettier"
020365fd55e8e2e30535e32321bb8c39ff4a220d,Albert Martin,2017-06-14 07:28:39+00:00,Leo Lamprecht,2017-06-14 07:28:39+00:00,Fixed aliased results appearing in list with `--safe` flag (#672)
348b19e54db0a131d035a3166e7881649d03bc9b,David Corwin,2017-06-14 07:21:48+00:00,Leo Lamprecht,2017-06-14 07:21:48+00:00,"Try to clone git repositories over SSH on failure (#671)

* updated help message for `now switch` to reference the argument for the team as the slug instead of the id

* try ssh if https does not work

* add editor settings to .gitignore, update yarn.lock

* reverting change to teams in separate pr

* Removed unused ignored prop"
588ba5acf1713aeeda3bcb292ce7c4a5db7b91a3,Igor Klopov,2017-06-13 09:59:41+00:00,Leo Lamprecht,2017-06-13 09:59:41+00:00,Stop showing the full build path in stack traces (#669)
1fba7da41993944a70cb6a3b1ad8f8f3de9c0b18,Leo Lamprecht,2017-06-12 20:24:35+00:00,Leo Lamprecht,2017-06-12 20:24:35+00:00,6.4.1
3711d093528cab9f19670b1adec01b308fe68ccb,Leo Lamprecht,2017-06-12 20:23:45+00:00,Leo Lamprecht,2017-06-12 20:23:45+00:00,Made using an array for the env variable list work
0fe740f847a839ebd7c1be74f667dd545a6a5836,Leo Lamprecht,2017-06-12 15:22:29+00:00,Leo Lamprecht,2017-06-12 15:22:29+00:00,6.4.0
925eb968828352adccd944b6d777d52eb64dc54c,Leo Lamprecht,2017-06-12 15:18:10+00:00,Leo Lamprecht,2017-06-12 15:18:10+00:00,Added `npm run clean` for cleaning up the development environment
508052061640a982680d3c79c442d3fff066fcb5,Olli Vanhoja,2017-06-12 15:14:46+00:00,Leo Lamprecht,2017-06-12 15:14:46+00:00,"Reduce the number of retries on cert creation (#664)

Retrying multiple times on cert creation doesn't usually help but
makes the user wait for a longer time for nothing. Usually there
is either a configuration error that must be solved or the DNS
change hasn't propagated yet, which will usually take longer than
the retry window."
ac2a75fe41fc6d945f0f17727c1096d697d21183,Leo Lamprecht,2017-06-12 14:24:49+00:00,GitHub,2017-06-12 14:24:49+00:00,"Now asking for value of missing environment variables (#645)

* Ask for missing environment variables

* Prettified

* Use `info` helper

* Only apply fields if `now` is available

* Don't log

* Isolate our Inquirer patch

* Patch Inquirer before asking for the env fields

* Don't ask for env vars that are already defined"
627ded2ee7f0a1126d70dea976f936f3bcb02499,Igor Klopov,2017-06-12 14:10:09+00:00,Leo Lamprecht,2017-06-12 14:10:09+00:00,Removed useless code from installation mechanism (#663)
10862abef2af77f5e90f213f92b6d951b5c23406,Leo Lamprecht,2017-06-12 08:15:44+00:00,GitHub,2017-06-12 08:15:44+00:00,Linked to document about how to install the CLI
566f8bc17a20b01d5dddc042aa93c277d635264e,Olli Vanhoja,2017-06-12 07:54:52+00:00,Leo Lamprecht,2017-06-12 07:54:52+00:00,"Ask if the user really wants to add a subdomain as a domain (#662)

Closes #481"
d108fe9d6756f917b7912163d02e6387642aa31a,greenkeeper[bot],2017-06-11 09:35:21+00:00,Leo Lamprecht,2017-06-11 09:35:21+00:00,chore(package): update psl to version 1.1.19 (#660)
212e8a9d67b34f3ef5657b4bac7fbfbfeabd3c68,greenkeeper[bot],2017-06-10 11:18:28+00:00,Leo Lamprecht,2017-06-10 11:18:28+00:00,chore(package): update lint-staged to version 3.6.1 (#657)
0d2d056d3761ed94a4ecd6d12db616c462c60a1c,Leo Lamprecht,2017-06-09 22:04:53+00:00,Leo Lamprecht,2017-06-09 22:04:53+00:00,6.3.2
390eaef7b59e2725cd1e2f0713e9c10fea4d8e86,Leo Lamprecht,2017-06-09 20:26:55+00:00,Leo Lamprecht,2017-06-09 20:26:55+00:00,Allowed using `process.exit()` in installation script
15b9b258ed093a313c4516236954e36007097c8d,Leo Lamprecht,2017-06-09 20:23:18+00:00,Leo Lamprecht,2017-06-09 20:23:18+00:00,Don't trigger installation when in development mode
c36b2c0fbfda1316d3ebf49def6ee0f44e13205d,greenkeeper[bot],2017-06-09 14:47:16+00:00,Leo Lamprecht,2017-06-09 14:47:16+00:00,chore(package): update @google/maps to version 0.4.0 (#653)
8ed05757967375e8343b8a93f3ceba0ea6406c2d,greenkeeper[bot],2017-06-09 14:46:55+00:00,Leo Lamprecht,2017-06-09 14:46:55+00:00,chore(package): update babel-core to version 6.25.0 (#652)
b74b349230b8528553ad495d40d5e75165ed6240,greenkeeper[bot],2017-06-08 19:18:26+00:00,Matheus Fernandes,2017-06-08 19:18:26+00:00,"Update prettier to the latest version  (#648)

* chore(package): update prettier to version 1.4.3

* Bump prettier"
499bba0324148469e192a38eb3b0a934ec7b4dac,Jarmo Isotalo,2017-06-08 18:37:37+00:00,Matheus Fernandes,2017-06-08 18:37:37+00:00,"Don't return an empty object that would then be stored as the user, but (#650)

instead return null which is then easier to catch (as the code already
expects to receive)"
fc4e07611ab85e4732812edd72a9b0e890fcc994,greenkeeper[bot],2017-06-07 12:47:58+00:00,Leo Lamprecht,2017-06-07 12:47:58+00:00,chore(package): update inquirer to version 3.1.0 (#644)
96389a28989e154d8318f6e92c3760d35876d970,greenkeeper[bot],2017-06-07 12:47:41+00:00,Leo Lamprecht,2017-06-07 12:47:41+00:00,chore(package): update webpack to version 3.0.0-rc.1 (#643)
bcfe6881e0b5cc74e6fc50b0f33ad13585953b64,greenkeeper[bot],2017-06-06 20:12:05+00:00,Leo Lamprecht,2017-06-06 20:12:05+00:00,chore(package): update update-notifier to version 2.2.0 (#640)
2d0b0ef2e7abec2a6874f4c755a335be91cec370,greenkeeper[bot],2017-06-05 09:40:03+00:00,Igor Klopov,2017-06-05 09:40:03+00:00,chore(package): update pkg to version 4.0.0 (#634)
931745ff811d915d589b24db0a0f309c81f5ccc3,Leo Lamprecht,2017-06-03 19:14:04+00:00,Leo Lamprecht,2017-06-03 19:14:04+00:00,6.3.1
d6e9640d028d319b8ed42af87cc2d82e727a1987,Leo Lamprecht,2017-06-03 19:12:51+00:00,Leo Lamprecht,2017-06-03 19:12:51+00:00,Don't upgrade certain packages automatically
b6da4e85014f4d40b13c9c3676063812386d3528,Leo Lamprecht,2017-06-03 19:10:25+00:00,Leo Lamprecht,2017-06-03 19:10:25+00:00,Downgraded `socket.io-client`
1660e425e76febd76e9908532d2b2db292c9735f,greenkeeper[bot],2017-06-03 16:11:49+00:00,Leo Lamprecht,2017-06-03 16:11:49+00:00,chore(package): update async-retry to version 1.1.1 (#629)
4f47b0527abd840e49ca4e13603f7fa0305cd252,greenkeeper[bot],2017-06-03 16:11:32+00:00,Leo Lamprecht,2017-06-03 16:11:32+00:00,chore(package): update prettier to version 1.4.2 (#628)
5e81689ede7bfba58131307149182cb07669d0e7,Leo Lamprecht,2017-06-03 15:22:17+00:00,Leo Lamprecht,2017-06-03 15:22:17+00:00,6.3.0
18410e9b3869e7d19dd1cb6c98a67b2d4a492568,Leo Lamprecht,2017-06-03 15:15:44+00:00,Leo Lamprecht,2017-06-03 15:15:44+00:00,Bumped `socket.io-client` to the latest version
f1a42eb6ab28995044b7a10c86eeb1fdb6a23509,greenkeeper[bot],2017-06-03 15:02:29+00:00,Leo Lamprecht,2017-06-03 15:02:29+00:00,"Update prettier to the latest version  (#626)

* chore(package): update prettier to version 1.4.1

* Prettified everything

* Fixed linting"
ba1543e3e82dfa595e7317bc636458cf18864f0c,Albert Martin,2017-06-03 14:48:07+00:00,Leo Lamprecht,2017-06-03 14:48:07+00:00,Persist current team when using token auth (#616)
493d9123fd0baa0cfe6041dcee27a838dc8be973,Jarmo Isotalo,2017-06-03 14:44:14+00:00,Leo Lamprecht,2017-06-03 14:44:14+00:00,Option `--session-affinity` was added for setting session affinity (#600)
3b11fd1d7ea3882bb480f370e06f97a59261cc2e,Albert Martin,2017-06-03 14:40:18+00:00,Leo Lamprecht,2017-06-03 14:40:18+00:00,Added `--safe` flag for skipping aliased deployments (#617)
01c49c9b1ea80d1df691ce9f1c7edc1d9d99dc31,Naoyuki Kanezawa,2017-06-03 14:38:32+00:00,Leo Lamprecht,2017-06-03 14:38:32+00:00,Made `now logs <instance-url>` work (#614)
c69de6b3ec85a53ef0dc60a24c763397e32823fb,greenkeeper[bot],2017-06-03 14:36:52+00:00,Leo Lamprecht,2017-06-03 14:36:52+00:00,chore(package): update node-fetch to version 1.7.1 (#627)
3bef4d1b4e69f38a34cb56b3f807a07f603fc992,Leo Lamprecht,2017-06-02 20:45:46+00:00,Leo Lamprecht,2017-06-02 20:45:46+00:00,6.2.6
2873dcc4e4c28d84cee26ca3a5485c70453ca9ad,Igor Klopov,2017-06-02 20:41:15+00:00,Leo Lamprecht,2017-06-02 20:41:15+00:00,"Download from GitHub directly (#625)

* directly downloads the version specified in package.json.version

* catch 'error' event from resp.body"
8c5130fd020572225f01552a56f80c31001e45db,Leo Lamprecht,2017-06-02 17:38:21+00:00,Leo Lamprecht,2017-06-02 17:38:21+00:00,Removed useless dependency
f19672a398189737e8b6994f1bfde8ec13679e66,greenkeeper[bot],2017-06-02 14:05:27+00:00,Leo Lamprecht,2017-06-02 14:05:27+00:00,chore(package): update lint-staged to version 3.6.0 (#620)
d186767b58be335b0e5b70bd257496e817d9e108,Igor Klopov,2017-06-01 18:50:46+00:00,Guillermo Rauch,2017-06-01 18:50:46+00:00,"Make update notifications work again (#610)

* Revert ""Disable update-notifier (#609)""

This reverts commit b7a8f2347522e0f27645370fcd135394de4c2cd9.

* pkg@3.0.6

* output 'please update' for both npm and non-npm install"
6a9cb8d0957bcda993c394e78abc1ca4f651c2d5,nkzawa,2017-06-01 12:53:47+00:00,nkzawa,2017-06-01 12:53:47+00:00,6.2.5
f29cb1c69eeba8331360f4060dfd87a08913f39e,Naoyuki Kanezawa,2017-06-01 11:00:36+00:00,Guillermo Rauch,2017-06-01 11:00:36+00:00,"Fix repeated logs and corrupted characters (#611)

* revert socket.io-client version for now

* don't print duplicated build logs"
f2b1de2e5c63ca3a427c5632eb424e9255daa99e,Matheus Fernandes,2017-06-01 00:23:51+00:00,Matheus Fernandes,2017-06-01 00:23:51+00:00,6.2.4
b7a8f2347522e0f27645370fcd135394de4c2cd9,Matheus Fernandes,2017-06-01 00:14:17+00:00,Guillermo Rauch,2017-06-01 00:14:17+00:00,"Disable update-notifier (#609)

* Revert ""Only show update notifications when loaded from npm (#606)""

This reverts commit 3ef666ba8d6a1030f769f822b424be01c6ec7e23.

* Revert ""Brought the update notification back""

This reverts commit 5d3d9d4f377a41e6957feb65fd24f102fd9a204d."
a48c099ffac40f197e0529a8fd65207456fd127d,Leo Lamprecht,2017-05-31 19:09:33+00:00,Leo Lamprecht,2017-05-31 19:09:33+00:00,Slight improvements to reasons for shipping a `pkg`-ed binary
a68004ad8b116966029cb59e639e93fed6315c37,Leo Lamprecht,2017-05-31 06:21:27+00:00,Leo Lamprecht,2017-05-31 06:21:27+00:00,Another reason for shipping a pkg binary
1fd521ab271505d2016c2f61448555e59937d00a,Leo Lamprecht,2017-05-31 06:20:11+00:00,Leo Lamprecht,2017-05-31 06:20:11+00:00,Improved the link to the Dockerfile docs
9c44a813eae549f3ada5dc18e72c4000d66f4b1a,Leo Lamprecht,2017-05-31 06:14:39+00:00,Leo Lamprecht,2017-05-31 06:14:39+00:00,6.2.3
3ef666ba8d6a1030f769f822b424be01c6ec7e23,Igor Klopov,2017-05-31 06:09:11+00:00,Leo Lamprecht,2017-05-31 06:09:11+00:00,"Only show update notifications when loaded from npm (#606)

* Revert ""Brought the update notification back""

This reverts commit 5d3d9d4f377a41e6957feb65fd24f102fd9a204d.

* add _npmPkg to pkg when now is installed via npm

* Prettified it

* Set _npmPkg to null"
29a81e1dd677cb5e1a92032d12b012d803d2a372,Jarmo Isotalo,2017-05-30 23:32:56+00:00,Jarmo Isotalo,2017-05-30 23:32:56+00:00,Show the diff
5d3d9d4f377a41e6957feb65fd24f102fd9a204d,Leo Lamprecht,2017-05-30 19:04:11+00:00,Leo Lamprecht,2017-05-30 19:04:11+00:00,Brought the update notification back
1e86a4fb1387dc07653c734720ca56bead9e0f00,Leo Lamprecht,2017-05-30 18:53:58+00:00,Leo Lamprecht,2017-05-30 18:53:58+00:00,"Support `now.name` inside `package.json`

This closes #604"
a93317624102c76cbdfa816a52c2ea89b7a20398,Leo Lamprecht,2017-05-30 15:32:14+00:00,Leo Lamprecht,2017-05-30 15:32:14+00:00,6.2.2
3fc4dc3725ebce929084b47dc31d067996f36fa5,Leo Lamprecht,2017-05-30 15:31:44+00:00,Leo Lamprecht,2017-05-30 15:31:44+00:00,Removed unused dependency
207dd6f46b061ff41815580c5fe6b23d6d17f650,Leo Lamprecht,2017-05-30 15:01:16+00:00,Leo Lamprecht,2017-05-30 15:01:16+00:00,"Only log success messages when in TTY

This closes #579"
3411f7f066c5e6d88c9c405e8ba01982e49b05e5,Leo Lamprecht,2017-05-30 13:23:36+00:00,Leo Lamprecht,2017-05-30 13:23:36+00:00,"Throw an error if current path doesn't exist

This closes #598"
cfa03a66226acd27e5bdf8085af6d2fa46983ccb,Leo Lamprecht,2017-05-30 12:41:24+00:00,Leo Lamprecht,2017-05-30 12:41:24+00:00,6.2.1
a1aae0da5266bc59c6cf1d07665af7e8eefc2f49,Leo Lamprecht,2017-05-30 12:39:39+00:00,Leo Lamprecht,2017-05-30 12:39:45+00:00,"Allow `type` fields in metafiles to hide type prompt

This closes #603"
9e363316218cb6d369eb08ff2684e1d6ceaab6aa,Leo Lamprecht,2017-05-30 12:34:19+00:00,Leo Lamprecht,2017-05-30 12:34:19+00:00,Bumped dependencies to the latest version
4c9034ad10e6829d9559b9f477fd6024e53f7dfe,greenkeeper[bot],2017-05-29 22:04:16+00:00,Guillermo Rauch,2017-05-29 22:04:16+00:00,chore(package): update download to version 6.2.2 (#601)
55184e917f01e1c02822d806fdd81c53388e18df,Albin Ekblom,2017-05-29 20:28:57+00:00,Guillermo Rauch,2017-05-29 20:28:57+00:00,Fix file count with 1 file (#599)
6bc6089d2f344b1a09ce4be7031f8c507e37c505,greenkeeper[bot],2017-05-29 16:14:18+00:00,Leo Lamprecht,2017-05-29 16:14:18+00:00,chore(package): update lint-staged to version 3.5.1 (#595)
5000b2a90c2acf95d2e3ee6f1b0ab8d4046fa501,Leo Lamprecht,2017-05-29 14:59:56+00:00,Leo Lamprecht,2017-05-29 14:59:56+00:00,6.2.0
7845b34b2b375faff11bddde11358cc4a52f6659,Leo Lamprecht,2017-05-28 19:08:16+00:00,GitHub,2017-05-28 19:08:16+00:00,"Determine deployment type like Now Desktop (#589)

* Automatically decide deployment type

* Should be a devDep

* Not throwing anymore if both Dockerfile and package.json exist

* Ask to choose type again

* Revert ""Not throwing anymore if both Dockerfile and package.json exist""

This reverts commit 2d7136f2dc870406e60289e33de3b2beaea3a917.

* Prettified"
cea8aea3c00f9332deffb88de32362a5b19c0d25,Igor Klopov,2017-05-28 11:43:30+00:00,Leo Lamprecht,2017-05-28 11:43:30+00:00,the 'now' installation (#590)
6b6297e0617706fb4e6d0e7dd09ea520ed04b235,Matheus Fernandes,2017-05-28 08:22:15+00:00,Matheus Fernandes,2017-05-28 08:22:15+00:00,Fix `now domains add -f`  it shouldn't throw
24ce1c2b983e0372a3d0b2f7ab5d2acdb716c5d8,Nathan Rajlich,2017-05-26 21:40:31+00:00,Nathan Rajlich,2017-05-26 21:40:31+00:00,"Add `now whoami` command

This version simply prints out the logged in username,
for consistency.

It no longer prints out the current team name.

Squashed commit of the following:

commit 1d4ef6af9507a1180fd9e84b7cc64c7fe3e815fa
Author: Nathan Rajlich <nathan@tootallnate.net>
Date:   Fri May 26 14:40:00 2017 -0700

    add ""whoami"" to valid command names

commit 6ea37e49eb1ea2d9b5b12befe26a6a15972e1f6c
Author: Nathan Rajlich <nathan@tootallnate.net>
Date:   Fri May 26 14:37:56 2017 -0700

    don't log current team name in `now whoami`

    Instead, consistently return the logged in username."
f791b6bd627e314867c84b19ba6a1ad49e5bfd05,Guillermo Rauch,2017-05-26 21:26:13+00:00,GitHub,2017-05-26 21:26:13+00:00,"Revert ""add `now whoami` subcommand (#587)"" (#588)

This reverts commit 44f5b9f0a38466e49b054c1535ba187abe9e9b12."
44f5b9f0a38466e49b054c1535ba187abe9e9b12,Nathan Rajlich,2017-05-26 21:22:20+00:00,Guillermo Rauch,2017-05-26 21:22:20+00:00,"add `now whoami` subcommand (#587)

Not logged in:

```
$ now whoami
> Not currently logged in! Please run `now --login`.
```

Logged in, stdout is a TTY:

```
$ now whoami
> tootallnate
$ now switch zeit
$ now whoami
> zeit
```

Stdout is NOT a TTY:

```
$ echo ""Logged in to Now as $(now whoami)""
Logged in to Now as tootallnate
```

Closes #585."
20d93f317dbc7c65b2ad32b9812f63ce32d359b8,Matheus Fernandes,2017-05-26 08:32:27+00:00,Matheus Fernandes,2017-05-26 08:32:27+00:00,"Fix `useCurrentTeam` logic

NOTE: This option is not used anywhere as of right now"
5367cecd5fe15a769b315996ec565812528441f2,Albin Ekblom,2017-05-26 01:28:41+00:00,Guillermo Rauch,2017-05-26 01:28:41+00:00,Use correct file count (#586)
841d4529284730872f31cbb4f96c4495f8c92546,greenkeeper[bot],2017-05-25 18:59:10+00:00,Leo Lamprecht,2017-05-25 18:59:10+00:00,chore(package): update lint-staged to version 3.5.0 (#584)
033393fc200e1398daa8e722a074157179a60349,Cody Brunner,2017-05-25 12:33:14+00:00,Leo Lamprecht,2017-05-25 12:33:14+00:00,Fixed help message for `now alias` (#578)
804267ae4b60863f2c33287d1ce3f2973bb3dc81,greenkeeper[bot],2017-05-25 12:32:18+00:00,Leo Lamprecht,2017-05-25 12:32:18+00:00,chore(package): update webpack to version 2.6.1 (#580)
a503ec33ba3e587ef804cfa8cdf097351adaff9b,greenkeeper[bot],2017-05-24 10:49:06+00:00,Leo Lamprecht,2017-05-24 10:49:06+00:00,chore(package): update pkg to version 3.0.5 (#577)
882ea23372ce6b3758d3b83d61060f4fb1b87c75,greenkeeper[bot],2017-05-23 22:16:26+00:00,Leo Lamprecht,2017-05-23 22:16:26+00:00,chore(package): update download to version 6.2.0 (#574)
491de33f3d2274d8e3f43c54158505cfd7b4c533,Leo Lamprecht,2017-05-23 19:08:34+00:00,Leo Lamprecht,2017-05-23 19:08:34+00:00,6.1.1
81a2b874b9bf11c441077e9aea24b8a0709588a6,Leo Lamprecht,2017-05-23 19:05:24+00:00,Leo Lamprecht,2017-05-23 19:05:24+00:00,Indicate how to link the package properly
28a3e0f7ced70543b53f8c1639c31da39239b708,Igor Klopov,2017-05-23 19:04:14+00:00,Leo Lamprecht,2017-05-23 19:04:14+00:00,"Make `now link` great again (#573)

* `link` directory to run `npm link` inside

* since `lib` is default source dir name for js (`src` is mostly c++)

* fix linting

* Revert ""since `lib` is default source dir name for js (`src` is mostly c++)""

This reverts commit 799edd4e717e66f763593636e7fbbe4b5df239a6.

* Added script for linking"
23bc156a077b5e33f9380c000cc83891a3518279,Leo Lamprecht,2017-05-23 11:57:59+00:00,Leo Lamprecht,2017-05-23 11:57:59+00:00,Improved filename of postinstall script
fdc161c6d42104fe8dd6e27ffd3e2826129b6df5,Leo Lamprecht,2017-05-23 10:56:19+00:00,Leo Lamprecht,2017-05-23 10:56:19+00:00,6.1.0
f5b87517c6cf0c3f20952c3d82a7ff59b674417a,Leo Lamprecht,2017-05-23 10:56:05+00:00,Leo Lamprecht,2017-05-23 10:56:05+00:00,License field added back
1224aa6d8771fc858b5732db95a1a665c4ce9dec,Albin Ekblom,2017-05-23 10:50:57+00:00,Leo Lamprecht,2017-05-23 10:50:57+00:00,"Added file count, fix #370 (#558)

* Add file count, fix #370

* Remove progress-bar when complete"
567210270abf35b5c58182bb3fa7c43ee5a84089,CHaBou,2017-05-23 10:50:07+00:00,Leo Lamprecht,2017-05-23 10:50:07+00:00,"Add `teams ls` command (#563)

* Add `teams ls` command

* Fix Prettier

* Add `teams list` command alias

* Add table output primitive

* Use table output primitive to list team

* Fix name/email for user

* Change indicator for current team"
ff5d38644c70af020aa8108d22ae2cf595407fd0,Igor Klopov,2017-05-23 10:48:49+00:00,Leo Lamprecht,2017-05-23 10:48:49+00:00,"Added 'downloading' and 'interrupted' state (#570)

* move placeholder population to index.js

* detect ctrl+c and put 'please reinstall' to placeholder"
06e95223be95161eb321061deb468eede6c20613,greenkeeper[bot],2017-05-23 10:48:25+00:00,Leo Lamprecht,2017-05-23 10:48:25+00:00,chore(package): update node-fetch to version 1.7.0 (#572)
501dbdb13c611b6eed4c98d2119a698d8991cb6e,greenkeeper[bot],2017-05-23 10:48:10+00:00,Leo Lamprecht,2017-05-23 10:48:10+00:00,chore(package): update webpack to version 2.6.0 (#571)
23abd2a826c14923efd847b18aad618241907566,Nathan Rajlich,2017-05-22 21:41:55+00:00,Matheus Fernandes,2017-05-22 21:41:55+00:00,"make `promptBool()` return false upon Ctrl+C (#557)

* move `prompt-options.js` to utils/input dir

* make `promptBool()` return false upon Ctrl+C

Also make the `info('Aborted')` output more consistent
across the CLI.

* Revert ""handle user abort in `now domains buy` (#554)""

This reverts commit 34151c81939b80bb6caa52cba48c004781431e2d."
dd4d374552bd2e45b1802e1f17a928fb20886d81,Leo Lamprecht,2017-05-22 19:10:58+00:00,Leo Lamprecht,2017-05-22 19:10:58+00:00,6.0.5
8d427de1e3f8ad67a6b4bf2096473c32af7b942a,Leo Lamprecht,2017-05-22 19:10:47+00:00,Leo Lamprecht,2017-05-22 19:10:47+00:00,Retrieve the correct URL for downloading the CLI
3c8f8a00ae611714871efc27d0691323bc19c62e,Leo Lamprecht,2017-05-22 19:00:58+00:00,Leo Lamprecht,2017-05-22 19:00:58+00:00,Upload binaries to slack after deploying
15bed6b4e523482a26f86617c0535d1b1dd03b9a,Leo Lamprecht,2017-05-22 18:55:37+00:00,Leo Lamprecht,2017-05-22 18:55:37+00:00,6.0.4
fe0c4a35cf4560e5aa240c98d3e4561cc5f8aa4c,Leo Lamprecht,2017-05-22 18:55:29+00:00,Leo Lamprecht,2017-05-22 18:55:29+00:00,Read `package.json` on runtime when downloading
5536960871fbf534786297baf1994110d78bf573,Leo Lamprecht,2017-05-22 18:45:39+00:00,Leo Lamprecht,2017-05-22 18:45:39+00:00,Only include the files that are needed
1b882989def280f52af1261f2cfa3e4f2cc2c8ef,Leo Lamprecht,2017-05-22 18:35:20+00:00,Leo Lamprecht,2017-05-22 18:35:20+00:00,6.0.3
bfb83d7f1a71a39268be37f7120ede8718f4fc05,Leo Lamprecht,2017-05-22 18:35:12+00:00,Leo Lamprecht,2017-05-22 18:35:12+00:00,Prepared for the npm release
672a16168cbb5ad3fbcec33e6f156a56cd8f169c,Leo Lamprecht,2017-05-22 18:32:50+00:00,Leo Lamprecht,2017-05-22 18:32:50+00:00,Always download the specified version
9654b36f77d32fa3ef9a3a082e1df7b49bb53b8a,Leo Lamprecht,2017-05-22 18:23:13+00:00,Leo Lamprecht,2017-05-22 18:23:13+00:00,Sweetened a title in the readme
f92e556b7cd9eec48e67a5be38fe1aedf5eff48b,Leo Lamprecht,2017-05-22 18:21:27+00:00,Leo Lamprecht,2017-05-22 18:21:27+00:00,Build inside a single directory
c9dabd9a536a32a60807258eba57f78f3588820c,Leo Lamprecht,2017-05-22 18:05:47+00:00,GitHub,2017-05-22 18:05:47+00:00,Explain why we're shipping the bundled CLI
bbee653c2980d56d3ae78e5d31e7104fce130fa8,Leo Lamprecht,2017-05-22 18:03:27+00:00,GitHub,2017-05-22 18:03:27+00:00,"Add now cli proxy (#569)

* unite now-cli and now-cli-proxy into single repo

* fix xo

* package.json.name is `now`"
8eee576d7c09410de80997ed4bf714aa85168f90,Matheus Fernandes,2017-05-22 08:56:27+00:00,Matheus Fernandes,2017-05-22 08:56:27+00:00,6.0.0
4f29b6fb8c243872a4c7aba58c03f2e2d713f204,Matheus Fernandes,2017-05-22 08:54:50+00:00,Matheus Fernandes,2017-05-22 08:54:50+00:00,Make `--public` skip the OSS prompt
9802391cc89bb29f56a47960994f45839f8d37c7,Matheus Fernandes,2017-05-22 08:42:28+00:00,Matheus Fernandes,2017-05-22 08:42:28+00:00,Remove `now open`
d737b56470687fec56aeffd8f13f7c57afed800a,Matheus Fernandes,2017-05-22 08:37:39+00:00,GitHub,2017-05-22 08:37:39+00:00,"Improve `now scale` and `now alias` (#565)

* Improve now alias and scale ux

* Print scaling rules even when there is nothing to change, and fix scale-info

* Allow scale to take alias as parameter

* Remove debug print

* Fix list prefix color

* Fix output styling"
b035f500dddc7f84c61f1075d6d6ff8048f616ac,Matheus Fernandes,2017-05-22 07:28:28+00:00,Matheus Fernandes,2017-05-22 07:28:28+00:00,Fix Slack script
adda12a2ef777d69d55319c9e2e53a38fe7f3704,Matheus Fernandes,2017-05-22 07:13:05+00:00,Matheus Fernandes,2017-05-22 07:21:52+00:00,Show a proper message for non-supported TLDs
769f8c298a4d1fb64fb8293088ac44b615876113,Matheus Fernandes,2017-05-22 06:30:23+00:00,Matheus Fernandes,2017-05-22 06:30:23+00:00,Make the messaging more clear and consistent when buying a domain
dd1071366de0950a922014c6233e43c6524a68ee,Matheus Fernandes,2017-05-22 06:16:00+00:00,Matheus Fernandes,2017-05-22 06:16:00+00:00,Show the period when prompting for a domain purchase
bc8fd3346a62ce0c8b16031df0bdb62b819017b7,Leo Lamprecht,2017-05-20 20:48:31+00:00,Leo Lamprecht,2017-05-20 20:48:31+00:00,5.3.3
91ddc55d5b5b4addccb00622793786abbb7797a2,Leo Lamprecht,2017-05-20 20:31:07+00:00,Leo Lamprecht,2017-05-20 20:31:07+00:00,Set correct name for bundled binaries
2b21208b07f8d4a4e567220c9b9d1efefc798e92,Nathan Rajlich,2017-05-20 20:26:56+00:00,Leo Lamprecht,2017-05-20 20:26:56+00:00,note that logs are public with OSS deployments (#562)
aa4d874b9eac4992272e05260f08b96063011b4c,Leo Lamprecht,2017-05-20 15:37:05+00:00,Leo Lamprecht,2017-05-20 15:38:10+00:00,More suitable name
53ca25ef797aeb3708d34f5be00654f8a3d5f9b2,Leo Lamprecht,2017-05-20 13:11:29+00:00,Leo Lamprecht,2017-05-20 13:11:29+00:00,5.3.2
529f6d4248f326d4597687d94c48c55992a05c6c,Leo Lamprecht,2017-05-20 13:08:40+00:00,GitHub,2017-05-20 13:08:40+00:00,Made readme explanation even more descriptive
a7414e69a757323c10d1d96cbba1960abeef231c,Leo Lamprecht,2017-05-20 13:08:03+00:00,GitHub,2017-05-20 13:08:03+00:00,Better description
82116771c77d448adfef00bc091c9cc0766bbdd0,Leo Lamprecht,2017-05-20 13:04:40+00:00,GitHub,2017-05-20 13:04:40+00:00,Indicate where to find the proxy
a4c22f0c069b349f079b72cca36a9090ecb96aa5,Leo Lamprecht,2017-05-20 11:06:00+00:00,Leo Lamprecht,2017-05-20 11:06:00+00:00,Removed `husky` because it is not needed
b189d4ce97f147a0598afb72e2baf6b4e5c5cdc1,Leo Lamprecht,2017-05-20 11:02:24+00:00,Leo Lamprecht,2017-05-20 11:02:24+00:00,Don't build slack script
41bebe8e1235c8ed4713f2b674067197d4b573c8,Leo Lamprecht,2017-05-20 10:56:23+00:00,Leo Lamprecht,2017-05-20 10:56:23+00:00,Don't show warnings when linting
7352306deb16600228bd7432862b0ea1df3803e5,Leo Lamprecht,2017-05-20 10:52:09+00:00,Leo Lamprecht,2017-05-20 10:52:09+00:00,Removed build step
7c1b09c823770340e2f87366347bf289e1f25c43,Leo Lamprecht,2017-05-20 10:48:09+00:00,Leo Lamprecht,2017-05-20 10:48:09+00:00,We'll never put this on npm directly
5657943b73039071d32a19baad0e1cc190b1467b,Leo Lamprecht,2017-05-20 10:47:54+00:00,Leo Lamprecht,2017-05-20 10:47:54+00:00,Unncessary package fields removed
3253586096bac48dabfd09b1acb0b81006e473ff,greenkeeper[bot],2017-05-19 21:13:15+00:00,Leo Lamprecht,2017-05-19 21:13:15+00:00,fix(package): update ignore to version 3.3.1 (#560)
6602b8ac3671d8ed51cd0e6204db742bb24d51ee,Albin Ekblom,2017-05-19 10:59:42+00:00,Leo Lamprecht,2017-05-19 10:59:42+00:00,Replace fs-promise with fs-extra (#559)
cde26475877d4124ddd3876fbef5c11f3fd5e0f9,Nathan Rajlich,2017-05-18 19:02:28+00:00,Guillermo Rauch,2017-05-18 19:02:28+00:00,"show usage message upon login (#556)

Rather than eagerly deploying upon first usage.

Fixes #533."
34151c81939b80bb6caa52cba48c004781431e2d,Nathan Rajlich,2017-05-18 16:53:28+00:00,Guillermo Rauch,2017-05-18 16:53:28+00:00,"handle user abort in `now domains buy` (#554)

Fixes #547."
84204d7b59d4c830521961fd341e5de9f6247bf3,Jarmo Isotalo,2017-05-17 23:37:26+00:00,Jarmo Isotalo,2017-05-17 23:37:26+00:00,Improve scaling for static deployments
3973798a998fd5b863faf3ca9250e8ed791353eb,greenkeeper[bot],2017-05-17 21:57:10+00:00,Leo Lamprecht,2017-05-17 21:57:10+00:00,chore(package): update lint-staged to version 3.4.2 (#553)
bc26a57d7cc3645d44bd3381648f9334fb4f6301,Nathan Rajlich,2017-05-17 20:25:04+00:00,Matheus Fernandes,2017-05-17 20:25:04+00:00,"Don't print out stack traces upon user abort (#544)

* remove `instanceof` check

Use duck-type checking instead.

* handle USER_ABORT errors in `handleError()`

* don't print out stack traces upon user abort

Also eliminates the usage of `async-retry` since it was
pretty much overkill for this use case. Instead just extract
the logic out into its own function and call it recursively
when we have to do the user prompt.

* Print `Aborted` upon user about"
6c86472f5757ab9bdf01137c70a589b8fd5241db,Jarmo Isotalo,2017-05-17 19:30:40+00:00,Matheus Fernandes,2017-05-17 19:30:40+00:00,"Try to make sure prettier doesn't make us waste time again (#551)

* Try running prettier, if it modifies the code fail

* Prettify"
e6601b549cb34587410f3e60278fa79fcff9d672,Leo Lamprecht,2017-05-17 16:39:44+00:00,Leo Lamprecht,2017-05-17 16:39:44+00:00,5.3.1
5040b71173ab145db7fc0de40408663d2186fd94,Olli Vanhoja,2017-05-17 16:29:39+00:00,Leo Lamprecht,2017-05-17 16:29:39+00:00,Fix ls listing for 0 priorities (#550)
1076bdc348a4d0e17d023495e609e9ddd5e9c990,Jarmo Isotalo,2017-05-17 00:07:34+00:00,GitHub,2017-05-17 00:07:34+00:00,Remove unnecessary step from caught a bug list.
559cfcb427140aae08cd35e2b637b4a5e6e66eef,greenkeeper[bot],2017-05-16 12:31:25+00:00,Leo Lamprecht,2017-05-16 12:31:25+00:00,fix(package): update ms to version 2.0.0 (#546)
f66032b1b68696c87c6750e146847afc35048222,Jarmo Isotalo,2017-05-15 22:57:55+00:00,Matheus Fernandes,2017-05-15 22:57:55+00:00,"Don't try scaling static deployments (#543)

* Don't try scaling static deployments

* Use `error` instead of `console.log`"
2ebd4be0d87acaaf2c3f47e7be68919e4d9fe793,Nathan Rajlich,2017-05-15 21:57:34+00:00,Guillermo Rauch,2017-05-15 21:57:34+00:00,"remove `id` from `now domains ls` (#541)

Also moves the URL to the first column of the table,
swapping the `domain` and `dns` fields."
4f64762ffc02a346f58bd8f3df458cf436f9d55f,Nathan Rajlich,2017-05-15 20:17:49+00:00,Guillermo Rauch,2017-05-15 20:17:49+00:00,"exit the process immediately upon Ctrl+C (#540)

During the deployment selection prompt, don't print out a stack
trace of the ""Aborted"" error to the user, just exit the process
directly."
8cdc0ac9c0dd9afd90305a5f573b3093dcb3b1bc,Leo Lamprecht,2017-05-15 15:07:53+00:00,Leo Lamprecht,2017-05-15 15:07:53+00:00,5.3.0
42c1e16d3a3303872550dcadcf58523a41f36907,Leo Lamprecht,2017-05-15 15:07:19+00:00,Leo Lamprecht,2017-05-15 15:07:19+00:00,Bumped dependencies to the latest version
14dbbcec4147154affec1400d15710177304efc4,Jarmo Isotalo,2017-05-15 09:23:27+00:00,Jarmo Isotalo,2017-05-15 09:33:58+00:00,Make now scale ls to work with static deployments
9483e8a73683b3115ed2c3bcf8f358b8809f3b6f,Tony Kovanen,2017-05-15 06:42:18+00:00,Tony Kovanen,2017-05-15 06:42:18+00:00,Instantly complete static deployments after sync
4763e4cbff73874472756e24655985287e164420,Tony Kovanen,2017-05-15 06:16:21+00:00,Tony Kovanen,2017-05-15 06:16:21+00:00,Hide scale settings for static deploys
095569969bdd8e0e41283b6bd088f4fdedacf076,Tony Kovanen,2017-05-15 06:06:40+00:00,Tony Kovanen,2017-05-15 06:06:40+00:00,Proper getting of files for static deployments
ea7dadeb67e6baa8da3260a8556292a6764adfb4,Tony Kovanen,2017-05-15 05:50:29+00:00,Tony Kovanen,2017-05-15 05:50:29+00:00,Fix getting files for static deployments
45e55d58e28bdc207028b1c39396b41b420c2bb6,Tony Kovanen,2017-05-15 03:39:43+00:00,Tony Kovanen,2017-05-15 03:39:43+00:00,Support static types when deploying
91de162fd59a665766508d96d7cf57a6b4d9cf49,Tony Kovanen,2017-05-15 03:36:28+00:00,Tony Kovanen,2017-05-15 03:36:28+00:00,New static deployment support
73b5464d1a0e43f9378bdf95846f49574450f40a,greenkeeper[bot],2017-05-14 09:50:50+00:00,Leo Lamprecht,2017-05-14 09:50:50+00:00,chore(package): update pkg to version 3.0.4 (#538)
ba713d2fdb3db3b22e1cdc51f51f36fcd0f42bc0,greenkeeper[bot],2017-05-13 16:32:48+00:00,Leo Lamprecht,2017-05-13 16:32:48+00:00,fix(package): update clipboardy to version 1.1.2 (#537)
cce19f01b3cd7e9480c55afcf2e7302fd33aa62b,greenkeeper[bot],2017-05-12 16:05:48+00:00,Leo Lamprecht,2017-05-12 16:05:48+00:00,fix(package): update download to version 6.1.0 (#535)
db31624fd718265f5566cf54a9230d4e38cf478e,greenkeeper[bot],2017-05-09 06:04:52+00:00,Leo Lamprecht,2017-05-09 06:04:52+00:00,fix(package): update socket.io-client to version 2.0.0 (#524)
d3a37e052b4a01fa9c622c64145ec68a20fa6edf,Matheus Fernandes,2017-05-08 13:25:02+00:00,Matheus Fernandes,2017-05-08 13:25:02+00:00,5.2.3
60837a0368de4ef28563bc2d64ffe918399b09e2,Matheus Fernandes,2017-05-08 13:24:13+00:00,Matheus Fernandes,2017-05-08 13:24:35+00:00,Show a nicer error if trying to buy a domain without a credit card
37107ddc9ac4d19598ae5919fbc970876a12cf6d,greenkeeper[bot],2017-05-08 13:14:59+00:00,Leo Lamprecht,2017-05-08 13:14:59+00:00,fix(package): update email-prompt to version 0.3.0 (#520)
809ce879c0dab37ff479b5796efc87f05c354132,Leo Lamprecht,2017-05-08 08:23:38+00:00,Leo Lamprecht,2017-05-08 08:23:38+00:00,5.2.2
0981262132c41422408ffb594ecc6ee91e96708b,Leo Lamprecht,2017-05-08 08:22:27+00:00,Leo Lamprecht,2017-05-08 08:22:27+00:00,Pinned `progress` dependency
d6c29ace51acc05f40ac32eb9fd687939b9cebb6,Leo Lamprecht,2017-05-08 08:21:56+00:00,Leo Lamprecht,2017-05-08 08:21:56+00:00,Updated `serve` to the latest version
97e6db13f2a24645f6c6d2eee532c19d2aa40e3b,Leo Lamprecht,2017-05-08 08:12:25+00:00,Leo Lamprecht,2017-05-08 08:12:25+00:00,Bumped dependencies to the latest version
9213e8acdad5887d7de91648503cdcc77f225e3e,Matheus Fernandes,2017-05-08 04:35:49+00:00,Matheus Fernandes,2017-05-08 04:35:49+00:00,Fix domain/subdomain usage on `now alias`'s `buy` logic
51e2951dee378bdbf20968132d1b79e0dd62560f,Matheus Fernandes,2017-05-06 02:24:59+00:00,Matheus Fernandes,2017-05-06 02:24:59+00:00,`userId` => `uid`
14a3a0205df50328fc9c25f91696a6ec46519b2c,Matheus Fernandes,2017-05-06 02:23:04+00:00,Matheus Fernandes,2017-05-06 02:23:04+00:00,Tweak docs
7e0f5f1a569b516ad8a3ed8f972671be843181b7,Nathan Rajlich,2017-05-06 02:03:23+00:00,GitHub,2017-05-06 02:03:23+00:00,"dynamically update the ""serve"" version for static deployments (#513)

Since we use Greenkeeper to update dependencies for `now-cli`,
we can depend on it to keep the version of `serve` that we use
for static deployments up-to-date at all times."
68a3f51dff6dff62ca9ab5db7d530c4f854be808,Nathan Rajlich,2017-05-05 23:06:46+00:00,Nathan Rajlich,2017-05-05 23:06:46+00:00,"implement `public` property for now.json and pkg.now

Closes #463."
3902a7da62a78e5a8c547d32e095604eeccd0415,Nathan Rajlich,2017-05-05 23:03:21+00:00,Nathan Rajlich,2017-05-05 23:03:21+00:00,"update ""serve"" for static deployments to v5.1.4"
08049e2e05e0cc8dafefa7af65baa35f4a0ae5da,Matheus Fernandes,2017-05-05 22:26:32+00:00,Matheus Fernandes,2017-05-05 22:26:32+00:00,5.2.1
26b9d64b613d5e2faa0ab66e52e1d0fe4516a99f,Matheus Fernandes,2017-05-05 22:23:53+00:00,Matheus Fernandes,2017-05-05 22:23:53+00:00,Add missing `break`
cd470813dacbf31de52c11536ae39b084137abde,greenkeeper[bot],2017-05-05 21:34:33+00:00,Guillermo Rauch,2017-05-05 21:34:33+00:00,chore(package): update pkg to version 3.0.3 (#512)
49a2a645c8ae7d433e74129859f456cdbcc2dfc0,Nathan Rajlich,2017-05-05 21:10:22+00:00,GitHub,2017-05-05 21:10:22+00:00,"refactor the `readMetaData()` function (#508)

* refactor the `readMetaData()` function

* add a couple new test cases

* test: restore ""build"" prefix

Fixes Node.js <= v6

* add default values for `npm`/`docker` get files functions

Makes the logic simpler, since we don't have to check for existence.

* throw an error when missing start/now-start or server.js

* pass in entire `readMetaData()` result to Now.create()

This avoids us reading these files from the filesystem again"
b35e7e7411f894933a904ae2791ccfaf4b8aa1d3,Matheus Fernandes,2017-05-05 20:09:21+00:00,Matheus Fernandes,2017-05-05 20:09:21+00:00,5.2.0
8ebd5b91ecedf74684606332ec5864358dd6fc6e,Matheus Fernandes,2017-05-05 20:04:13+00:00,Matheus Fernandes,2017-05-05 20:04:13+00:00,Prettier stuff
1478009c225230bc0d5c19a514484c19a998328a,Matheus Fernandes,2017-05-05 19:58:18+00:00,Matheus Fernandes,2017-05-05 19:58:18+00:00,Remove lockfile
b6dadac9f5fc76553d537aab3c22289b144659a2,Matheus Fernandes,2017-05-05 19:57:48+00:00,Matheus Fernandes,2017-05-05 19:57:48+00:00,Add `now login` and document `now logout`
a1e5ba0b26b2c4f59bbca9e59656f302bceba9e8,Jarmo Isotalo,2017-05-05 19:49:48+00:00,Matheus Fernandes,2017-05-05 19:49:48+00:00,"Remove id's from now-alias (#500)

* Remove id's from now-alias

* Colors

* Less hacky formatting"
8b306e657b30e5983eb08c1caa03eb8ec19fc65d,Matheus Fernandes,2017-05-05 19:04:09+00:00,Matheus Fernandes,2017-05-05 19:04:09+00:00,"Fix `--token` support

Closes #499
Closes #474
Closes #484"
b0593c1f3362a8735d060d6672d5c96f14479fde,Matheus Fernandes,2017-05-05 19:02:06+00:00,Matheus Fernandes,2017-05-05 19:02:06+00:00,Remove useless HTTP header
9e22ad34d2e4e98cf3c8a76345493f8d56754666,Jarmo Isotalo,2017-05-04 23:17:05+00:00,Matheus Fernandes,2017-05-04 23:17:05+00:00,"Fix path alias updates (#493)

* Catch path alias changes correctly
Fixes #492

* And the automatic petteier changes for alias"
bc0b06721afed517c92a7bfbcf52af8710908475,Jarmo Isotalo,2017-05-04 23:16:13+00:00,Matheus Fernandes,2017-05-04 23:16:13+00:00,"Sort `now scale ls` output similarly to `now ls` (#494)

* Sort `now scale ls` similarly how `now ls` is sorted

* Remove unused dependency"
bde309850ea6f39406d6959737215a5d961d5d0a,greenkeeper[bot],2017-05-04 23:10:18+00:00,Matheus Fernandes,2017-05-04 23:10:18+00:00,fix(package): update docker-file-parser to version 1.0.2 (#496)
b67e683f38aeef5681d3a71e5195c0db242fbb96,Jarmo Isotalo,2017-05-04 23:08:08+00:00,Matheus Fernandes,2017-05-04 23:08:08+00:00,"Fixes an error of missing context after logging in while deploying. (#498)

```
> Error! Unknown error: TypeError: Cannot read property 'username' of undefined
TypeError: Cannot read property 'username' of undefined
    at /usr/local/lib/node_modules/now/build/bin/now-deploy.js:316:115
    at Generator.next (<anonymous>)
    at c (/usr/local/lib/node_modules/now/build/bin/now-deploy.js:760:99)
```"
a09abbcad45ab3647c9b4089828d407aff9698da,Jarmo Isotalo,2017-05-04 22:54:31+00:00,Matheus Fernandes,2017-05-04 22:54:31+00:00,Always scale up but never down when matching scale on alias (#504)
c05405e193b86247d3610b43b1c22fb9a29a7c7b,Jarmo Isotalo,2017-05-04 22:53:22+00:00,Matheus Fernandes,2017-05-04 22:53:22+00:00,"Read docker label correctly, fixes #368 (#501)"
c97edc61b5f946c312acf26cde7594577e566b95,Igor Klopov,2017-05-04 22:51:12+00:00,Matheus Fernandes,2017-05-04 22:51:12+00:00,Move list of `pkg` targets to `package.json.pkg.targets` (#503)
04f457550ed92777fdb2e116bfb89d77a7a8498d,Matheus Fernandes,2017-05-04 02:49:07+00:00,Matheus Fernandes,2017-05-04 02:49:07+00:00,Log the body of the request when the first step of a login fails
0cf8c736027bfd8c11f11ea02eddd459928b4350,greenkeeper[bot],2017-05-02 22:52:01+00:00,Leo Lamprecht,2017-05-02 22:52:01+00:00,chore(package): update prettier to version 1.3.0 (#487)
013061a6a30d9d347fe25e2033bb6b3a973d028a,Matheus Fernandes,2017-05-02 21:39:00+00:00,Matheus Fernandes,2017-05-02 21:39:00+00:00,5.1.2
c51743153dc5e1df15418285f6d13907b6ed45bf,Matheus Fernandes,2017-05-02 21:38:35+00:00,Matheus Fernandes,2017-05-02 21:38:35+00:00,Pass missing variable
0f10a7bcda688636cb8314e041da3f4801e46af7,Matheus Fernandes,2017-05-02 21:12:10+00:00,Matheus Fernandes,2017-05-02 21:12:10+00:00,Fix undefined var usages + prettify
f421eee6642adabd7f174b8a7ac5b393b4a46274,Matheus Fernandes,2017-05-02 21:07:17+00:00,Matheus Fernandes,2017-05-02 21:07:17+00:00,5.1.1
1773cfc817b9974c34afa5c66fe37b954ee81d13,Matheus Fernandes,2017-05-02 21:04:08+00:00,Matheus Fernandes,2017-05-02 21:04:08+00:00,Log more info when `--login` fails
0d926834203aaecad954b3bdd220629c333e1050,Matheus Fernandes,2017-05-02 21:03:50+00:00,Matheus Fernandes,2017-05-02 21:03:50+00:00,Merge branch 'master' of github.com:zeit/now-cli
9964d0e4fdfd3f532b0af9a30933ddcc98194c71,Tim Neutkens,2017-05-02 20:30:49+00:00,Leo Lamprecht,2017-05-02 20:30:49+00:00,now scale <id> auto (#485)
5f48a289d5e7902f9da69d34d1c359d7ece3d8a3,Matheus Fernandes,2017-05-02 19:16:04+00:00,Matheus Fernandes,2017-05-02 19:16:04+00:00,Fix calls to `undefined.price` while aliasing
554170e3b4206e2091efa86d2600aff421002416,Nathan Rajlich,2017-05-02 18:29:28+00:00,Guillermo Rauch,2017-05-02 18:29:28+00:00,"check for Dockerfile when now.json is present (#486)

Consider a tree like:

```
.
 Dockerfile
 now.json

0 directories, 2 files
```

Before this patch, this deployment would be considered a ""static""
deployment, which is incorrect. Now it is properly detected
as a ""docker"" deployment type."
66557d79bb1399f976bbc0da288e99b012a05d13,Leo Lamprecht,2017-05-02 10:22:20+00:00,Leo Lamprecht,2017-05-02 10:22:20+00:00,5.1.0
f165778e559fb72ad6323045e3c3b81cff723ff7,Leo Lamprecht,2017-05-02 10:12:10+00:00,Leo Lamprecht,2017-05-02 10:12:10+00:00,Removed useless file
b0a88b377c28691d4361192c0487fc97ddba8f87,Leo Lamprecht,2017-05-02 10:10:22+00:00,Leo Lamprecht,2017-05-02 10:10:22+00:00,Prettified everything
c90ca1b859dd93707b782a40a693b25534b53c2e,Leo Lamprecht,2017-05-02 10:08:18+00:00,Leo Lamprecht,2017-05-02 10:08:18+00:00,Tell `prettier` not to use semicolons
0c4f9dcd622037ce600187d65485c46b318f41cf,Steve Faulkner,2017-05-02 10:05:52+00:00,Leo Lamprecht,2017-05-02 10:06:18+00:00,Add support for `now alias domain.tld` (#467)
09c3de40ccb286c35ea1b2184806e32bdd88673d,Leo Lamprecht,2017-05-02 09:50:21+00:00,Leo Lamprecht,2017-05-02 09:51:53+00:00,Added `now logout`
03def6c05294f57b813beba7e4bb8485cca0598b,greenkeeper[bot],2017-05-02 09:20:30+00:00,Leo Lamprecht,2017-05-02 09:20:30+00:00,"fix(package): update ignore to version 3.3.0 (#482)

https://greenkeeper.io/"
cc8e0b8e4aaf69e43c40adaf2c78da2c770aaa03,Nathan Rajlich,2017-04-29 01:31:32+00:00,Leo Lamprecht,2017-05-02 09:10:44+00:00,"Use implicit ""start"" script when `server.js` exists

Moves the verification step to the `create()` function,
instead of in `readMetaData()`.

Closes https://github.com/zeit/now-cli/issues/181."
e0e5d03949adc106a5988a45376b13ed9bf04707,Nathan Rajlich,2017-05-01 19:15:33+00:00,Leo Lamprecht,2017-05-02 09:06:40+00:00,"Do not truncate lines from build logs

Is is disrupting to remove logs that are potentially
useful for diagnosing when something is going wrong
when starting up / building a deployment.

Just log stdout in its entirety to the `now` build output
with no lines being removed in the process.

As discussed with @rauchg."
9889a3b3d0e92adc4ceb46e621bf7110bda797f7,nkzawa,2017-04-28 06:42:59+00:00,Leo Lamprecht,2017-05-02 09:04:11+00:00,always strip trailing /
eb48779827078caa26da5af66b9e74cb59cdce1c,nkzawa,2017-04-28 06:24:05+00:00,Leo Lamprecht,2017-05-02 09:03:58+00:00,logs: check if deployment url includes path
2a25bfcee4f2f18823714ffb8999ac50b28539af,Leo Lamprecht,2017-05-02 08:34:10+00:00,Leo Lamprecht,2017-05-02 08:34:10+00:00,"Indicate how to buy a new domain

This closes #473"
1248c46295c9f3505695d3b3753253950aa23655,Jarmo Isotalo,2017-05-02 08:17:06+00:00,Jarmo Isotalo,2017-05-02 08:23:29+00:00,Improve command line args validation. Fixes #478.
c1ba650ec44576ba3fc1c27fda713d594d8e3867,Leo Lamprecht,2017-05-02 08:19:26+00:00,Leo Lamprecht,2017-05-02 08:19:26+00:00,"Replace `copy-paste` with `clipboardy`

This closes #457"
b2fe4539938597563fc3cd483d00f1a1baa8019e,Leo Lamprecht,2017-05-02 08:13:40+00:00,Leo Lamprecht,2017-05-02 08:13:40+00:00,Bumped dependencies to latest version
594534250d8c874751e6f595abe5f2240bde327e,greenkeeper[bot],2017-05-02 02:23:07+00:00,Matheus Fernandes,2017-05-02 02:23:07+00:00,"chore(package): update pkg to version 3.0.1 (#476)

https://greenkeeper.io/"
d24bb92deaebb649fbded2e15aad09e32a63af3a,Jarmo Isotalo,2017-05-01 19:49:28+00:00,Jarmo Isotalo,2017-05-01 19:49:28+00:00,Don't fail when no deployments are found Fixes #471
5a295017ec4fe818dcf36d67fd63b85b95a2fcdc,Nathan Rajlich,2017-05-01 18:39:25+00:00,Matheus Fernandes,2017-05-01 18:39:25+00:00,"Fix failing tests on `master` branch (#469)

* remove ""always-include-main"" test case

It was testing for incorrect behavior that has now been fixed.

See: https://github.com/zeit/now-cli/pull/464

* remove ""files"" array from `main` related test cases

Makes these three tests pass once again.

* always run a test for ""pack-now"" even when not in CI

Otherwise `ava` fails because the test did not
run any assertions."
e59e7616c719b0194d729d489f57e1176bacef35,Matheus Fernandes,2017-05-01 18:26:08+00:00,GitHub,2017-05-01 18:26:08+00:00,"Add `logs`, `teams`, `switch`, `scale`, new `ls` and much more (#468)

* Feature/teams (#25)

* Add the skeleton of `now teams`

* Add support for ""complex"" command aliases

This adds the ability to set, for example, `now switch` as an alias for `now teams switch`.
Subsequent commands and arguments are taken into account: `now switch zeit --debug` will be parsed to `now teams switch zeit --debug`.

* `now switch` => `now teams switch`

* Extract `rightPad`

* Extract `eraseLines`

* Extract ``

* Text input: add `valid` option

* Text input: add `forceLowerCase` option

* Add preliminary `now teams add`

* Make the linter happy

* Extract `> NOTE: ...`

* Add missing labels

* Fix typos

* Add missing parameters

* Change the section label after inviting all specified team mates

* Call the API after each email submission

* Show the elapsed time after each `inviteUser` api call

* Handle user aborts

* We don't need `args` for `now teams add`

* Add missing `await`

* Extract regex

* `process.exit()` => `exit(1)`

* `prompt-bool` is an `input` util, not an `output` one

* Add the ability to delete a key from the config file

* Add `fatal-error`

* Add `now teams invite`

* This shouldn't be black

* Save the username in `~/.now.json` upon login

* Save the token and userId instead of token and email

* Fix typo

* Save more info about the user to `~/.now.json` upon login

* `~/.now.json`: Persist the current time when login in

* Add `user` helper

* `user.userId` => `user.id`

* Tweak code organization

* Add caching system to `.now.json`

* Automatically switch to a team after its creation

* Introduce the concept of `inactive` teams

* Use bold for `payment method`

* Remove duplicated code

* Add line breaks

* Auto complete with the first match

* Remove placeholder stuff

* Add the user's email to the list of suggestions

* FIx bad merge

* Add `now switch`

* Make `now teams invite` more reliable and faster

* Shut up XO

* Improve autocompletion

* Fix TypeError

* Make stuff pretty

* Not sure how this got overwritten

* Feature/domains (#26)

* Add the skeleton of `now teams`

* Add support for ""complex"" command aliases

This adds the ability to set, for example, `now switch` as an alias for `now teams switch`.
Subsequent commands and arguments are taken into account: `now switch zeit --debug` will be parsed to `now teams switch zeit --debug`.

* `now switch` => `now teams switch`

* Extract `rightPad`

* Extract `eraseLines`

* Extract ``

* Text input: add `valid` option

* Text input: add `forceLowerCase` option

* Add preliminary `now teams add`

* Make the linter happy

* Extract `> NOTE: ...`

* Add missing labels

* Fix typos

* Add missing parameters

* Change the section label after inviting all specified team mates

* Call the API after each email submission

* Show the elapsed time after each `inviteUser` api call

* Handle user aborts

* We don't need `args` for `now teams add`

* Add missing `await`

* Extract regex

* `process.exit()` => `exit(1)`

* `prompt-bool` is an `input` util, not an `output` one

* Add the ability to delete a key from the config file

* Add `fatal-error`

* Add `now teams invite`

* This shouldn't be black

* Save the username in `~/.now.json` upon login

* Save the token and userId instead of token and email

* Fix typo

* Save more info about the user to `~/.now.json` upon login

* `~/.now.json`: Persist the current time when login in

* Add `user` helper

* `user.userId` => `user.id`

* Tweak code organization

* Add caching system to `.now.json`

* Automatically switch to a team after its creation

* Introduce the concept of `inactive` teams

* Use bold for `payment method`

* Remove duplicated code

* Add line breaks

* Auto complete with the first match

* Remove placeholder stuff

* Add the user's email to the list of suggestions

* FIx bad merge

* Add `now switch`

* Make `now teams invite` more reliable and faster

* Shut up XO

* Improve autocompletion

* Fix TypeError

* Make stuff pretty

* Not sure how this got overwritten

* `prompt-bool` is an `input` util, not an `output` one

* Make stuff pretty

* Not sure how this got overwritten

* Add domains.status, price and buy

* Add `now domains buy`

* Add the ability to buy a domain when running `now alias`

* Logs (#27)

* Added `logs` sub command

* add missing dependencies

* use utils/output/logo

* logs: fix wrong reference

* logs: fix buffer time

* sort build logs (#19)

* logs: use lib/logs

* lib/logs: fix

* logs: resolve url to id

* logs: default to follow

* logs: don't resolve URL to id

* logs: revert to default unfollow

* logs: add since option and until option

* logs: fix default number of logs

* fix logs auth

* logs: listen ready event

* logs: new endpoint

* log: remove v query param

* logs: default to not include access logs

* fix styles of now-logs

* logs: remove relative time

* Fix bad merge conflict

* Add `now scale` (#28)

* Inital drafts fro `now-scale`

* More final draft

* sketch new `now ls` format

* Add sketch for `now ls --all`

* Placeholder for `now scale ls`

* ""Prettify"" and improve scale command

Signed-off-by: Jarmo Isotalo <jamo@isotalo.fi>

* Adopt to now-list api changes

* Improve now-list --all colors

Signed-off-by: Jarmo Isotalo <jamo@isotalo.fi>

* Add now scale ls

Signed-off-by: Jarmo Isotalo <jamo@isotalo.fi>

* Prettify

* Show auto correctly

* Add partial match scale for now alias

* Make alias to match scale before uptading alias and presumably a bunch of unrelated style changes

* Replace spinners with help text

* Make the list :nice:

* Make now-list great again

* Final touches

* Allow --all only when app is defined

* Add progress tracking to scale

* Correctly use --all for > 0 deployments found [1s] and improve scale info ux

* Show --all info if we are hiding stuff

* Fixes

* Refactor scale info and unfreeze

* Fixes

* Proper progress bar

* Fix bad merge

* Fix auth for now-scale

* logs: fix reading config

* Fix reference

* Small ux tweaks

* Improve now alias ux

* Fix a ton of lint errors

* Fix scaling up and alias ux

* Fix lint errors + prettify

* Make `bin/now-scale.js` available via `now scale`

* Fix errornous syntax for domains list

* And use correct header for domains list

* Update now-scale help to match new spec

* `await` for `cfg.read()` on `cfg.remove()`

* Update scale command

* Cleanu
p

* Fetch the teams from the api on teams.ls()

Plus prettier shit

* Run prettier hooks manually

* Make `now switch` perfect

* Rm unused variables

* Lint

* Ruin ux but lint

* Consume `POST /teams`

* Consume `PATCH /teams/:id`

* Fix/teams support (#29)

* Add teams support for lib/index.js

* Consume `POST /teams/:id/members`

* Make `now teams create` and `now teams invite` perfect

* Add a way to not send `?teamId` if necessary

* Add `?teamId=${currentTeam.id}` support to all comamnds and subcommands

* Display the username only if it's available

* Consume the preoduction endpoits for domain purchase

* Fix typo

* Fix grammar

* Fix grammar

* Remove useless require

* Display the user name/team slug on creation/list commands

* Remove use of old, now undefined variable

* Show domains in bold on `now domains ls`

* `user.userId` => `user.uid`

* Remove console.log

* Show a better messsage upon unexpected `domains.buy()` error

* typo

* Consume new `/plan` API and fix plan check

* Update `now upgrade`  consume new APIs and expose new plans

* Fix `now ugprade` info message

* `now cc`: consume new APIs and fix error messages

* Add team/user context to `now alias` when buying a domain

* Fix wording on `now domains buy`

* Add stamp to domain purchase

* Improve scale ux

* Remove ToS prompt upon login

* Fix `prompt-bool` trailing issues

* Remove useless `require`

* Allow `now switch <username>`

* Make `now help` better

* This shouldn't be here

* Make `now switch` incredible

* Remove old stuff from ~/.now.json

* Add comments

* `now team` => `now teams`

* 5.0.0

* Fix linter

* Fix DNS

* Parse subdomain

* FIx lint

* drop IDs for certs

* Make now ls look nice also when noTTY

* Make now list look nice when colors are not supported

* Mane certs ls look nice when we have no colers

* Now ls --all can also take uniq url as a parameter

* Improve now ls --all

* Now ls -all takes alias as an argument"
60b18593170b7f0e4a6683d2b03bd8cd28700978,Nathan Rajlich,2017-04-28 23:21:00+00:00,Guillermo Rauch,2017-04-28 23:21:00+00:00,"don't include the ""main"" file by default (#464)

It's not correct to forcefully include the file specified in ""main""
at upload-time. Consider an `npm run build` script that ends up
creating the file that ""main"" specifies. It would not exist until
inside the deployment, after the build script is ran for that
deployment.

Fixes https://github.com/zeit/now-cli/issues/281."
befcceefd0007244ccaa8949875b6af0dbf7b35f,greenkeeper[bot],2017-04-24 08:07:48+00:00,Leo Lamprecht,2017-04-24 08:07:48+00:00,"fix(package): update ansi-escapes to version 2.0.0 (#454)

https://greenkeeper.io/"
930c2eb90ab5e40bdc37bb58b46fb156d4543ab4,Tim Neutkens,2017-04-20 17:56:47+00:00,Guillermo Rauch,2017-04-20 17:56:47+00:00,Check if name is empty (#451)
22150f5fd6f1ab6936b705f1bb3fdb81b2703cfc,Matheus Fernandes,2017-04-19 20:19:02+00:00,Matheus Fernandes,2017-04-19 20:19:02+00:00,Remove useless `require`
6d92cfd0b8226299ded106109c41ed41cb45564b,Matheus Fernandes,2017-04-19 04:04:24+00:00,Matheus Fernandes,2017-04-19 04:04:24+00:00,Await for the removal
5682d00bf32456af5ea1c1a82248f952ce645dc1,Matheus Fernandes,2017-04-19 04:02:27+00:00,Matheus Fernandes,2017-04-19 04:02:27+00:00,Do not hang forever if not on a TTY
425b54e6f3e2e486264364aba3a7fade039c9190,Tim Neutkens,2017-04-17 17:24:57+00:00,Leo Lamprecht,2017-04-17 17:24:57+00:00,Fix method typo (#446)
3714ed7fa604d952b58d06a54cb28b61059120f5,greenkeeper[bot],2017-04-17 15:10:48+00:00,Leo Lamprecht,2017-04-17 15:10:48+00:00,"fix(package): update arr-flatten to version 1.0.3 (#445)

https://greenkeeper.io/"
f1dbdc58f6540f1bf30906a06b4a7564b3018f6a,Matheus Fernandes,2017-04-17 08:41:28+00:00,Matheus Fernandes,2017-04-17 08:41:28+00:00,"Do not print a new line after the prompt ""message"""
676ac019abacd140648c848d31434ca3f3af379c,Leo Lamprecht,2017-04-15 13:25:15+00:00,Leo Lamprecht,2017-04-15 13:25:15+00:00,"Remove error message for older node versions

As discussed with @timneutkens"
20552717321a5f5cf848e1268583159d53b5b74f,Leo Lamprecht,2017-04-15 13:10:44+00:00,Leo Lamprecht,2017-04-15 13:10:44+00:00,4.11.2
99f677652b2f34da3dd395f43a9b6e25fac6158c,Leo Lamprecht,2017-04-15 13:10:27+00:00,Leo Lamprecht,2017-04-15 13:10:27+00:00,Show proper error if `start` and `now-start` scripts are missing
4af632dfa5f1140e221d064c2f4f90c8699ed2f5,Leo Lamprecht,2017-04-15 13:06:15+00:00,Leo Lamprecht,2017-04-15 13:06:15+00:00,Make error message appear below node 6
270532221cf25fb5b5cb8eecad63d5b48e5ad90f,greenkeeper[bot],2017-04-14 19:11:41+00:00,Leo Lamprecht,2017-04-14 19:11:41+00:00,"chore(package): update slackup to version 2.0.1 (#442)

https://greenkeeper.io/"
a5ba36ad65dbcb1b64d73d09f32065a3929dbe3c,greenkeeper[bot],2017-04-14 18:54:21+00:00,Leo Lamprecht,2017-04-14 18:54:21+00:00,"chore(package): update slackup to version 2.0.0 (#441)

https://greenkeeper.io/"
9b3c14862b56490c1700c84298b5914c6aed19ed,greenkeeper[bot],2017-04-14 11:29:41+00:00,Leo Lamprecht,2017-04-14 11:29:41+00:00,"fix(package): update arr-flatten to version 1.0.2 (#440)

https://greenkeeper.io/"
08279a03e3209c36c316533abd37f1c4ca9c8f53,greenkeeper[bot],2017-04-14 03:09:06+00:00,Guillermo Rauch,2017-04-14 03:09:06+00:00,"chore(package): update prettier to version 1.1.0 (#439)

https://greenkeeper.io/"
a5e26ac2abc031b2cf511d0b0cd1dcf5bdc7b9d7,greenkeeper[bot],2017-04-13 18:36:38+00:00,Leo Lamprecht,2017-04-13 18:36:38+00:00,"chore(package): update prettier to version 1.0.0 (#437)

https://greenkeeper.io/"
f3736dc6b985a267d76b9cac014ee099d5d645ea,Matheus Fernandes,2017-04-13 00:43:19+00:00,Matheus Fernandes,2017-04-13 00:43:19+00:00,"Increase the timeout for ""unwanted"" builds"
c8d8daa334731df2162aae4fcd95cacd36016890,Leo Lamprecht,2017-04-11 11:12:38+00:00,Leo Lamprecht,2017-04-11 11:12:38+00:00,4.11.1
7e16fd0eda52d977844e5f43541f6a2ed1b16ef5,Leo Lamprecht,2017-04-11 10:40:12+00:00,Leo Lamprecht,2017-04-11 10:40:12+00:00,"Show general help when running `now help help`

This closes #419"
fb9f3962b862b1a87d214429ac8150dd1dbe5990,Leo Lamprecht,2017-04-11 10:32:13+00:00,Leo Lamprecht,2017-04-11 10:32:13+00:00,Bumped dependencies to the latest version
c2b39a096506eb0ccf7e226d6da8fd33e013ae4c,Leo Lamprecht,2017-04-11 10:24:55+00:00,Leo Lamprecht,2017-04-11 10:24:55+00:00,Invalidate cache for Slack badge
8064465322d4011cba08c7b91e9e48edaa8b9114,Matheus Fernandes,2017-04-09 22:35:59+00:00,Matheus Fernandes,2017-04-09 22:35:59+00:00,4.11.0
05ed90e2a24b32f699663bb158906a469bd07b7b,Naoyuki Kanezawa,2017-04-09 22:29:07+00:00,Matheus Fernandes,2017-04-09 22:29:07+00:00,"Auth build logger (#425)

* sort build logs (#19)

* authenticate build logger"
9717d06a555fe9ffd82575688e19b59e025dc16a,Matheus Fernandes,2017-04-09 22:23:35+00:00,GitHub,2017-04-09 22:23:35+00:00,"Prompt the user before uploading OSS code (#435)

* Make `promptBool` print nothing as trailing by default

* Prompt OSS users before uploading the code

* Fetch the plan as soon as possible

* Use `info` on `prompt-bool`

* Fix trailing print on `prompt-bool`

* Better wording for the message

* Erease the prompt after receivng an answer"
f8d345dc17208f9a718adf8ab1cbf39b60e4a922,Matheus Fernandes,2017-04-08 04:52:19+00:00,Matheus Fernandes,2017-04-08 04:52:19+00:00,Delay the message when ignoring the node version
cba4f154c6e8bf4a2aac7098f9ca8e797b96d0dc,Matheus Fernandes,2017-04-08 04:49:37+00:00,Matheus Fernandes,2017-04-08 04:49:37+00:00,prettify stuff
0962246f03ed95012cb40659c598069da8ba12da,Naoyuki Kanezawa,2017-04-08 04:47:34+00:00,Matheus Fernandes,2017-04-08 04:47:34+00:00,add prettier (#416)
0915a19f48d236e556be4852e1ca6886b7f2dfbe,Matheus Fernandes,2017-04-08 04:42:08+00:00,GitHub,2017-04-08 04:42:08+00:00,"Feature/slack builds (#432)

* Upload builds to Slack after every commit

* Make XO happy

* chmod +x

* Do not skip pull requests

* Add `slackup` dependency

* Use the new `slackup` API

* `node` === latest

* `msg2` => `msg`

* Build the slack script before using it on CI

* Shut up XO

* chmod +x

* Move the built scripts to the `build` directory

* Bump `slackup`

* Fix spacing

* fml

* Let the Slack know when the node version is being skipped"
719b3a263055df6dcdefaa2f196751e7accb4d12,greenkeeper[bot],2017-04-07 04:39:20+00:00,Guillermo Rauch,2017-04-07 04:39:20+00:00,"fix(package): update ignore to version 3.2.7 (#428)

https://greenkeeper.io/"
6e266cfbcd2f5eee007b76c2e040fee7e75c61e3,greenkeeper[bot],2017-04-04 17:12:43+00:00,Leo Lamprecht,2017-04-04 17:12:43+00:00,"fix(package): update progress to version 2.0.0 (#415)

https://greenkeeper.io/"
b954d26d6d7d4c6431a9705dfd516fad3591219d,greenkeeper[bot],2017-04-02 07:42:01+00:00,Leo Lamprecht,2017-04-02 07:42:01+00:00,"fix(package): update psl to version 1.1.18 (#412)

https://greenkeeper.io/"
83c003cba987e67c3b26c0a8fe7e1560dd2bb797,greenkeeper[bot],2017-03-31 21:36:21+00:00,Leo Lamprecht,2017-03-31 21:36:21+00:00,"fix(package): update stripe to version 4.17.0 (#409)

https://greenkeeper.io/"
264d6fa3c4f7dc162700766a154cfa5abcbdbd9e,Leo Lamprecht,2017-03-30 19:54:57+00:00,Leo Lamprecht,2017-03-30 19:54:57+00:00,4.10.3
9837b7ff28574ac1b50b9a5c6944d2b80d203829,Leo Lamprecht,2017-03-30 19:54:46+00:00,Leo Lamprecht,2017-03-30 19:54:46+00:00,Allow subdomain param in `now dns` to be a number
0ac9896e7c3c8d7d19db21ec4b97b505f0cf1d79,greenkeeper[bot],2017-03-30 18:15:03+00:00,Leo Lamprecht,2017-03-30 18:15:03+00:00,"fix(package): update stripe to version 4.16.1 (#408)

https://greenkeeper.io/"
2d38d38c95ef92de9e97426e559ad787aceaa4c8,greenkeeper[bot],2017-03-26 14:25:54+00:00,Leo Lamprecht,2017-03-26 14:25:54+00:00,"fix(package): update fs-promise to version 2.0.2 (#405)

https://greenkeeper.io/"
b6b736baa28b1af4fe611889872b11a06e1bcdf8,greenkeeper[bot],2017-03-25 20:20:04+00:00,Leo Lamprecht,2017-03-25 20:20:04+00:00,"chore(package): update xo to version 0.19.0 (#404)

https://greenkeeper.io/"
6f76fc46124eef1612db59d46ffe10be700203cd,Leo Lamprecht,2017-03-25 14:22:05+00:00,Leo Lamprecht,2017-03-25 14:22:05+00:00,We're only extending a single ESLint config
1f30e8ccaccc769b33406158ff43528f6b70d22c,greenkeeper[bot],2017-03-25 07:07:56+00:00,Leo Lamprecht,2017-03-25 07:07:56+00:00,"fix(package): update bytes to version 2.5.0 (#402)

https://greenkeeper.io/"
002e254f186562f3fc4f1f13471c82e474ac064f,greenkeeper[bot],2017-03-24 15:36:06+00:00,Leo Lamprecht,2017-03-24 15:36:06+00:00,"chore(package): update husky to version 0.13.3 (#399)

https://greenkeeper.io/"
676d2858f5f57f4fd98ff1a1d9bcfd3c7538dd91,greenkeeper[bot],2017-03-24 15:35:52+00:00,Leo Lamprecht,2017-03-24 15:35:52+00:00,"fix(package): update ora to version 1.2.0 (#400)

https://greenkeeper.io/"
a5321ae6239cdc33f1aed8d9a65a8cc0ff5379e3,greenkeeper[bot],2017-03-24 09:40:29+00:00,Leo Lamprecht,2017-03-24 09:40:29+00:00,"fix(package): update fs-promise to version 2.0.1 (#397)

https://greenkeeper.io/"
c6b4823574bc8f1c96fda611e1f48b4ef8253283,greenkeeper[bot],2017-03-22 20:20:55+00:00,Leo Lamprecht,2017-03-22 20:20:55+00:00,"fix(package): update stripe to version 4.16.0 (#395)

https://greenkeeper.io/"
35ccd93cb0dce1ac09bc4ce0bd3dcb274df104fb,Leo Lamprecht,2017-03-22 19:27:09+00:00,Leo Lamprecht,2017-03-22 19:27:09+00:00,Create binaries before deploying
a75cb9cd62db1010a9b2b2fabf8d97db55cf08b9,Leo Lamprecht,2017-03-21 13:25:46+00:00,Leo Lamprecht,2017-03-21 13:25:46+00:00,4.10.2
7d757038258f370c372769bbf0ad991b1d39838c,Leo Lamprecht,2017-03-21 13:23:51+00:00,Leo Lamprecht,2017-03-21 13:23:51+00:00,Make `now dns rm` work again
97437870ca3c6aa1b2b31096d3ab465b9c91de18,Leo Lamprecht,2017-03-21 10:14:31+00:00,Leo Lamprecht,2017-03-21 10:14:31+00:00,4.10.1
b1663954fe935beb0244002625e05402f59bd20e,Leo Lamprecht,2017-03-21 10:06:31+00:00,Leo Lamprecht,2017-03-21 10:06:31+00:00,Removed useless `async` decleration
9c280f896f5c1517a1b7d9b384d62b83323ac795,Leo Lamprecht,2017-03-21 09:59:38+00:00,Leo Lamprecht,2017-03-21 09:59:38+00:00,Made code faster by removing moot `await`
b190c0fff525d4980df3a110a96e0fb845faf21b,Leo Lamprecht,2017-03-21 09:49:28+00:00,Leo Lamprecht,2017-03-21 09:49:28+00:00,"Removed duplicated ""Error"" prefix from error messages"
1f85f6d5db908141f15ed91fc639070c38ce8b55,Leo Lamprecht,2017-03-21 09:31:17+00:00,Leo Lamprecht,2017-03-21 09:31:26+00:00,"Moved back to XO for linting

cc @sindresorhus"
7d19ad2e83dc47903d788f29c8c84be6d7d474f3,Leo Lamprecht,2017-03-21 08:42:53+00:00,Leo Lamprecht,2017-03-21 08:42:53+00:00,Prettified everything
d0e256f0eb3d3490b523238e5dd8ea3b55a977a5,greenkeeper[bot],2017-03-19 21:48:06+00:00,Leo Lamprecht,2017-03-19 21:48:06+00:00,"fix(package): update ms to version 1.0.0 (#394)

https://greenkeeper.io/"
d3f33b144abd794115c03eb9097b4b0a36433f9a,Leo Lamprecht,2017-03-19 21:18:25+00:00,Leo Lamprecht,2017-03-19 21:18:25+00:00,4.10.0
a49a0334084fadf539bb5b5fa2b492998f92dbbb,Leo Lamprecht,2017-03-19 21:17:54+00:00,Leo Lamprecht,2017-03-19 21:17:54+00:00,Upgraded instance of `serve`
417fc705720064f23c4b9719eeed97fad77fefcc,Leo Lamprecht,2017-03-19 21:16:52+00:00,Leo Lamprecht,2017-03-19 21:16:52+00:00,Linked to documentation
468b690f9ff425cfbcb333452e40eca688698ab5,Leo Lamprecht,2017-03-19 21:13:54+00:00,Leo Lamprecht,2017-03-19 21:13:54+00:00,Use ESLint for checking for code style
68278539153ac757f332b65f350c41b3e47b1c60,Leo Lamprecht,2017-03-19 20:53:52+00:00,Leo Lamprecht,2017-03-19 20:53:52+00:00,Flag for XO removed
4dd2f5c96c62315879a430a3fec8c59080741882,Leo Lamprecht,2017-03-19 20:52:46+00:00,Leo Lamprecht,2017-03-19 20:52:54+00:00,Use single quotes when prettifying the code
4119c17abe803a1c3c2487a673f61a117a0a3668,Leo Lamprecht,2017-03-19 20:51:57+00:00,Leo Lamprecht,2017-03-19 20:51:57+00:00,Prettified everything
20d5c5bfd66b8f949034291d6b714b4257b541b0,Leo Lamprecht,2017-03-19 20:49:02+00:00,Leo Lamprecht,2017-03-19 20:49:02+00:00,Replaced XO with Prettier
c7c47a935daec93d9336d607c6051b3fcc0e763b,greenkeeper[bot],2017-03-18 22:58:01+00:00,Guillermo Rauch,2017-03-18 22:58:01+00:00,"chore(package): update xo to version 0.18.0 (#392)

https://greenkeeper.io/"
9d1d47a59101ef8ea0844a02a6e68057bcf39aae,greenkeeper[bot],2017-03-17 08:18:11+00:00,Leo Lamprecht,2017-03-17 08:18:11+00:00,"chore(package): update pkg to version 3.0.0-beta.29 (#385)

https://greenkeeper.io/"
6ba3544fa73603729cd229cbc41db31eb1d1c73d,greenkeeper[bot],2017-03-17 08:17:54+00:00,Leo Lamprecht,2017-03-17 08:17:54+00:00,"fix(package): update ignore to version 3.2.6 (#383)

https://greenkeeper.io/"
82e9193180169fab5ab37cc65de624405dbd4c7a,greenkeeper[bot],2017-03-15 13:11:50+00:00,Leo Lamprecht,2017-03-15 13:11:50+00:00,"fix(package): update ignore to version 3.2.5 (#382)

https://greenkeeper.io/"
74f78127783cddbb2ba95abfab8705807385cffc,Leo Lamprecht,2017-03-15 08:58:32+00:00,Leo Lamprecht,2017-03-15 08:58:32+00:00,4.9.0
ea35eb19ee0ee2d6a177f91473abca811acfaaf3,Naoyuki Kanezawa,2017-03-02 16:47:24+00:00,Leo Lamprecht,2017-03-15 08:57:14+00:00,sort build logs (#19)
d6edca4d01640138051e501790b391ad4cb84044,Matheus Fernandes,2017-03-13 20:08:15+00:00,Matheus Fernandes,2017-03-13 20:08:55+00:00,Ask the user to agree with our ToS and Privacy Polic upon login
694258813a4d29311d979076be8fc0624d95c12d,Leo Lamprecht,2017-03-13 18:11:40+00:00,Leo Lamprecht,2017-03-13 18:11:48+00:00,Upload binaries to GitHub Releases automatically
9c873db26c101643730bfe3284b2806c28c616b5,greenkeeper[bot],2017-03-13 18:02:46+00:00,Leo Lamprecht,2017-03-13 18:02:46+00:00,"fix(package): update psl to version 1.1.17 (#381)

https://greenkeeper.io/"
3cdaece9cd072f058acc30c52c1b572892328a2f,Leo Lamprecht,2017-03-13 17:49:48+00:00,Leo Lamprecht,2017-03-13 17:49:48+00:00,4.8.1
4d68d8d842e0eebd0655dadff1038293bc7b7540,greenkeeper[bot],2017-03-13 07:17:34+00:00,Leo Lamprecht,2017-03-13 07:17:34+00:00,"chore(package): update husky to version 0.13.3-0 (#379)

https://greenkeeper.io/"
14cd7e02ee7012f2403cc986fb32b3f69101882c,Matheus Fernandes,2017-03-13 03:28:18+00:00,Leo Lamprecht,2017-03-13 07:08:15+00:00,"Brought `[cmd]` value for `now billing` back

This reverts commit 55633bbd33bf1bc85352573bd2688f1089ee601f."
b276eff149d9797afddb8da69e7647920fe0d7a5,Matheus Fernandes,2017-03-13 03:11:58+00:00,Matheus Fernandes,2017-03-13 03:11:58+00:00,4.8.0
a3bb086e5a897f8caacc4a6f24d40121b0aac51d,Jarmo Isotalo,2017-03-13 03:10:52+00:00,Matheus Fernandes,2017-03-13 03:10:52+00:00,"Improve path alias ux (#376)

* Improved UX for showing errors on path based aliases

*   Refactor our read confirmation

* Cleanup now-alias to use read-confirmation

* `read-bool` is an input util, not an output one

* Use `prompt-bool` instead of `read-confimation`

* Make `prompt-bool` print a new line before resolving/rejecting"
55633bbd33bf1bc85352573bd2688f1089ee601f,Leo Lamprecht,2017-03-12 18:28:50+00:00,Leo Lamprecht,2017-03-12 18:28:50+00:00,The `billing` and `cc` commands do not accept a value
edde07a21fb01d5fab8be22b4bebbb37b0103588,Matheus Fernandes,2017-03-11 22:42:40+00:00,Matheus Fernandes,2017-03-11 22:42:40+00:00,Ask the user to `--force` if the build step fails
c2c2285136deb30214a54f2c33a023ad812368f0,Olli Vanhoja,2017-03-10 20:35:26+00:00,Matheus Fernandes,2017-03-10 20:35:26+00:00,Add support for SRV DNS records (#371)
38db3333531e2b5362b8c766accf08e653522757,greenkeeper[bot],2017-03-09 09:38:40+00:00,Leo Lamprecht,2017-03-09 09:38:40+00:00,"fix(package): update stripe to version 4.15.1 (#375)

https://greenkeeper.io/"
a604ac647a4ba8b7e2af145b55a870645c8579f2,greenkeeper[bot],2017-03-08 22:14:41+00:00,Leo Lamprecht,2017-03-08 22:14:41+00:00,"fix(package): update ms to version 0.7.3 (#374)

https://greenkeeper.io/"
ea6f43658aa3fea2521579c53864e4775dabbeff,Matheus Fernandes,2017-03-08 12:12:29+00:00,Matheus Fernandes,2017-03-08 12:12:29+00:00,4.7.1
d3ed44132dfa9f7e09849dcf40c2ed6f12536212,Jarmo Isotalo,2017-03-07 20:36:48+00:00,Matheus Fernandes,2017-03-07 20:36:48+00:00,Fix happy side effectss on domain setup (#372)
33cc1160cd920dd1ba7a0d0ae8afd998b776611a,Leo Lamprecht,2017-03-07 08:59:42+00:00,Leo Lamprecht,2017-03-07 08:59:42+00:00,4.7.0
61962e841f87b2b35cbc0142f694e0123d8216cb,Jarmo Isotalo,2017-03-03 12:15:42+00:00,Jarmo Isotalo,2017-03-07 08:48:15+00:00,Add support for path based routes
e7386ebce53ac7015c34e45c58bf5d5f41841441,Leo Lamprecht,2017-03-06 11:32:01+00:00,Leo Lamprecht,2017-03-06 11:32:01+00:00,Test on LTS version of Node as well
349c0c92449811d22ca5196a89eb6774754eaba5,Leo Lamprecht,2017-02-23 10:59:03+00:00,Leo Lamprecht,2017-03-06 11:31:39+00:00,Added `now open` to usage information
0d11148da4f0da0e962d721272a59223b1091210,greenkeeper[bot],2017-03-03 20:56:52+00:00,Leo Lamprecht,2017-03-03 20:56:52+00:00,"fix(package): update inquirer to version 3.0.6 (#369)

https://greenkeeper.io/"
d09b641db3046e1c3ebb2400f64ed71c1f75ac87,greenkeeper[bot],2017-03-02 21:04:22+00:00,Leo Lamprecht,2017-03-02 21:04:22+00:00,"chore(package): update husky to version 0.13.2 (#364)

https://greenkeeper.io/"
e5babe0c7c4d056c228856706fbcf647fa302b3e,Leo Lamprecht,2017-02-28 22:05:18+00:00,Leo Lamprecht,2017-02-28 22:05:18+00:00,Run `serve` in production mode and update it
150e79a814c2a44f24342fcde3cafd21cb8138de,Leo Lamprecht,2017-02-27 21:09:43+00:00,Leo Lamprecht,2017-02-27 21:09:43+00:00,4.6.1
133d0d93da158f066a13d02754039faf13ff28f4,Igor Klopov,2017-02-27 20:26:12+00:00,Leo Lamprecht,2017-02-27 20:26:12+00:00,"Pkg with node async/await support (#360)

* pkg 3.0.0-beta.28

* use non-transpiled code for packing"
5a3f30ca0e9873e08e17c3e68e521284ceecd030,greenkeeper[bot],2017-02-27 20:25:00+00:00,Leo Lamprecht,2017-02-27 20:25:00+00:00,"fix(package): update inquirer to version 3.0.5 (#358)

https://greenkeeper.io/"
82ccf3da3747fa39017c4168624683913af62186,Matheus Fernandes,2017-02-27 17:06:55+00:00,Matheus Fernandes,2017-02-27 17:06:55+00:00,`Name` => `Full Name`
1ae05ffddfbe2338637ba736487da62f0396225d,greenkeeper[bot],2017-02-27 05:19:48+00:00,Leo Lamprecht,2017-02-27 05:19:48+00:00,"fix(package): update cross-spawn to version 5.1.0 (#357)

https://greenkeeper.io/"
b257d1e92b9db87061615f143bdf2858d7262f0c,Igor Klopov,2017-02-25 20:49:53+00:00,Leo Lamprecht,2017-02-25 20:49:53+00:00,"Use lib/pkg.js instead of pkg.json (#356)

* seems the file is outdated and not needed

* new pkg.js instead of pkg.json - reads .. and ../.."
1fcae7b1824bbd6fb26f543a59dc0d9015c34c0b,greenkeeper[bot],2017-02-23 15:48:44+00:00,Leo Lamprecht,2017-02-23 15:48:44+00:00,"fix(package): update inquirer to version 3.0.4 (#352)

https://greenkeeper.io/"
10b543fd0f1a0b19d82afe3515541d9a74b39b23,greenkeeper[bot],2017-02-23 14:45:46+00:00,Leo Lamprecht,2017-02-23 14:45:46+00:00,"fix(package): update inquirer to version 3.0.3 (#351)

https://greenkeeper.io/"
719add7e137a5948a86fe3c7bc65f642f85d8430,Leo Lamprecht,2017-02-23 08:56:00+00:00,Leo Lamprecht,2017-02-23 08:56:00+00:00,4.6.0
d1375496948c3357c62720d7fe63771906de2b8f,Leo Lamprecht,2017-02-23 08:55:36+00:00,Leo Lamprecht,2017-02-23 08:55:36+00:00,Proper name for command used for opening last deployment
b60f412d6f6136f09608fae374381a9423a23cd5,Leo Lamprecht,2017-02-23 08:53:45+00:00,Leo Lamprecht,2017-02-23 08:53:45+00:00,Dynamically load logo for `now open`
681b2aef2820b32a364a3a7969192ef4d86cb039,Leo Lamprecht,2017-02-23 08:52:15+00:00,Leo Lamprecht,2017-02-23 08:52:15+00:00,Better message for opening latest deployment
1c746c53a707cc3611aa6062e6d49d09fbbebea0,Leo Lamprecht,2017-02-23 08:45:33+00:00,Leo Lamprecht,2017-02-23 08:45:33+00:00,Missing colon added to usage information
0d78192acb846515e296d2109668486d183b7756,Leo Lamprecht,2017-02-23 08:43:36+00:00,Leo Lamprecht,2017-02-23 08:43:36+00:00,Pinned `credit-card` dependency
103c6abbdc99d63af6d2c77908c35f47acf242f4,Jaga Santagostino,2017-02-23 08:42:17+00:00,Leo Lamprecht,2017-02-23 08:42:17+00:00,Implemented `now-browse` (#339)
797cdd83084f5bb05f94e9a9dd25a31d92464469,Leo Lamprecht,2017-02-23 08:38:19+00:00,Leo Lamprecht,2017-02-23 08:38:19+00:00,Bumped `serve` to latest version
3bf077fe2d9350ca4e572a6a065b8732b2e4e732,Matheus Fernandes,2017-02-23 08:37:21+00:00,Leo Lamprecht,2017-02-23 08:37:21+00:00,Use a triangle that's actually printable on Windows (#348)
b0ca5dc63805d9546e57931f5789cc3fe6b529c4,greenkeeper[bot],2017-02-23 07:34:05+00:00,Leo Lamprecht,2017-02-23 07:34:05+00:00,"fix(package): update inquirer to version 3.0.2 (#346)

https://greenkeeper.io/"
0be4c893e2d0acb33774075e486d5a803df88a76,Leo Lamprecht,2017-02-21 21:14:18+00:00,Leo Lamprecht,2017-02-21 21:14:18+00:00,4.5.8
712af5ddb28839a89b3f209c9fbb941e105e1a44,Matheus Fernandes,2017-02-21 20:49:15+00:00,Leo Lamprecht,2017-02-21 20:49:15+00:00,Auto generate a `pkg.json` based on `package.json` (#341)
21fe6589686d83c3972ca53f1ced0485b36a33f1,Leo Lamprecht,2017-02-21 18:02:48+00:00,Leo Lamprecht,2017-02-21 18:02:48+00:00,4.5.7
8a1cfb3a46ab02da26cd0fd0d83e1f355e099bb3,Leo Lamprecht,2017-02-21 18:02:24+00:00,Leo Lamprecht,2017-02-21 18:02:24+00:00,Added newline before build steps
b47a93bed6bc6ed616969f8d4e86c4e103f98428,Leo Lamprecht,2017-02-21 17:36:32+00:00,Leo Lamprecht,2017-02-21 17:36:32+00:00,Lowercased text files
4d0efbc1c4f2b892a6810beea4238b386be70c9b,Leo Lamprecht,2017-02-21 17:36:11+00:00,Leo Lamprecht,2017-02-21 17:36:11+00:00,Missing import comments added
abaa83eee764a93ff44855dc70b3d937901c7cf4,Leo Lamprecht,2017-02-21 17:25:54+00:00,Leo Lamprecht,2017-02-21 17:25:54+00:00,Removed TODO comments
657059aae4de8183911067d3aab5b25a7ab5067e,Leo Lamprecht,2017-02-21 17:20:33+00:00,Leo Lamprecht,2017-02-21 17:20:33+00:00,Updated `ignore` dependency
0257687b2d194b6b1d3763a60c9d10776e6c0117,greenkeeper[bot],2017-02-21 17:06:42+00:00,Leo Lamprecht,2017-02-21 17:06:42+00:00,"chore(package): update ava to version 0.18.2 (#334)

https://greenkeeper.io/"
41ccd6bbc96f5742154feff021cb6605c2a54fb3,greenkeeper[bot],2017-02-21 17:06:31+00:00,Leo Lamprecht,2017-02-21 17:06:31+00:00,"fix(package): update update-notifier to version 2.1.0 (#329)

https://greenkeeper.io/"
06d51b2bd40d722c0c0e5634e81b9c31effc090d,greenkeeper[bot],2017-02-21 17:06:20+00:00,Leo Lamprecht,2017-02-21 17:06:20+00:00,"fix(package): update docker-file-parser to version 1.0.1 (#327)

https://greenkeeper.io/"
d422f772aa221bdb90b80c6295404dbc0535448c,greenkeeper[bot],2017-02-21 17:06:08+00:00,Leo Lamprecht,2017-02-21 17:06:08+00:00,"chore(package): update pkg to version 3.0.0-beta.27 (#324)

https://greenkeeper.io/"
80964bc4f3bf633edce140d8689b7920d8412d9b,greenkeeper[bot],2017-02-20 04:45:57+00:00,Guillermo Rauch,2017-02-20 04:45:57+00:00,"fix(package): update ignore to version 3.2.3 (#335)

https://greenkeeper.io/"
bd2efa8e7f4682e589c6db55bb7df61a28ef4dab,greenkeeper[bot],2017-02-17 08:19:07+00:00,Leo Lamprecht,2017-02-17 08:19:07+00:00,"fix(package): update socket.io-client to version 1.7.3 (#323)

https://greenkeeper.io/"
7c14fd7cb1e40414076d69cb782245b95d54d0cc,Hugo,2017-02-16 21:44:22+00:00,Leo Lamprecht,2017-02-16 21:44:22+00:00,Fix now alias failing when now.json doesnt define deployment type (#321)
c495fdcf992ae0d1b689b1ae5f5c721319d8f184,greenkeeper[bot],2017-02-16 19:54:36+00:00,Guillermo Rauch,2017-02-16 19:54:36+00:00,"chore(package): update pkg to version 3.0.0-beta.26 (#322)

https://greenkeeper.io/"
9d8ab516570887c838dc6c02a8aebda6044f6e9b,Leo Lamprecht,2017-02-15 22:58:54+00:00,Leo Lamprecht,2017-02-15 22:58:54+00:00,4.5.6
52c63854d5f2ab192a496785a19350eb0bbc704a,Leo Lamprecht,2017-02-15 22:58:26+00:00,Leo Lamprecht,2017-02-15 22:58:26+00:00,Correctly load `async-retry`
5e68fa683ccf9bd9f611e1b1cff7a42fd4653047,Leo Lamprecht,2017-02-15 22:13:10+00:00,Leo Lamprecht,2017-02-15 22:13:10+00:00,4.5.5
737086b30b4bce12af7a5aa990f87953e1e462f2,Leo Lamprecht,2017-02-15 22:12:26+00:00,Leo Lamprecht,2017-02-15 22:12:26+00:00,How to see usage information
4df3eabaf984e7a72577d75eae54aa44bdda70c0,Leo Lamprecht,2017-02-15 22:11:06+00:00,Leo Lamprecht,2017-02-15 22:11:06+00:00,Linked to website from usage section
3b231f2841e89dd856368bde4feb28feaac75228,Leo Lamprecht,2017-02-15 22:09:07+00:00,Leo Lamprecht,2017-02-15 22:09:07+00:00,AVA comes with async/await built-in
3ec770b56ce1ca7db027b99658d6932afc3acd46,Leo Lamprecht,2017-02-15 22:07:17+00:00,Leo Lamprecht,2017-02-15 22:07:17+00:00,Updated dependencies to latest version
ae9dd8f4415db30bafab17243fe589f91dfb1c37,Leo Lamprecht,2017-02-15 22:00:43+00:00,Leo Lamprecht,2017-02-15 22:00:43+00:00,"Make static deployments definable

This closes #318"
0f52271757075e264d34525364168379a72c7d9f,Leo Lamprecht,2017-02-15 21:38:30+00:00,Leo Lamprecht,2017-02-15 21:38:30+00:00,Use static deployment type if defined in config
2f85a6a966ecc3525035b1aae47cf0f93c745383,Leo Lamprecht,2017-02-15 20:58:24+00:00,Leo Lamprecht,2017-02-15 20:58:24+00:00,Split error into multiple lines
2b4f6dd4cbf331c05caf934ee4c90bae2aa43ea2,greenkeeper[bot],2017-02-15 20:24:57+00:00,Leo Lamprecht,2017-02-15 20:24:57+00:00,"fix(package): update async-retry to version 0.3.0 (#314)

https://greenkeeper.io/"
525d802ee350b32fd05c6c31ec97ef52c87844d9,Matheus Fernandes,2017-02-15 13:57:15+00:00,Matheus Fernandes,2017-02-15 14:03:58+00:00,4.5.4
fb7bfdbc4ef6ebec1a87666e5e6e561be5e3cb59,Matheus Fernandes,2017-02-15 13:56:18+00:00,Matheus Fernandes,2017-02-15 13:56:18+00:00,Mention `now upgrade` instead of `https://zeit.co/account`
a3d66c3ccdd0e9dbb75483817e0da167d27ea6cb,Matheus Fernandes,2017-02-14 18:12:28+00:00,Matheus Fernandes,2017-02-14 18:12:28+00:00,Hide the credit card number once it's submitted
bc7759786b7ec9f12c5079498fd28a4d007f3ec0,Igor Klopov,2017-02-14 17:49:48+00:00,Leo Lamprecht,2017-02-14 17:49:48+00:00,test packed `now` binary (#311)
c0d1a4fc9e1211a0f8887be1b137e01e6a495d7f,Jeroen Engels,2017-02-14 17:27:49+00:00,Guillermo Rauch,2017-02-14 17:27:49+00:00,Fix typo in billing (#312)
e019a2ab77d6790cbf828de17d261bc1635d696d,Leo Lamprecht,2017-02-14 15:22:49+00:00,Leo Lamprecht,2017-02-14 15:22:49+00:00,4.5.3
b239630f7badafc98d07e908ee953c03e49eaba4,Leo Lamprecht,2017-02-14 15:22:06+00:00,Leo Lamprecht,2017-02-14 15:22:06+00:00,Inlined version
2ed971a458853fddf76876831ae874e192919395,Leo Lamprecht,2017-02-14 14:50:50+00:00,Leo Lamprecht,2017-02-14 14:50:50+00:00,4.5.2
ddfc2217fd232b1229abcb0b90dc2091c2cf8770,Leo Lamprecht,2017-02-14 14:47:09+00:00,Leo Lamprecht,2017-02-14 14:47:09+00:00,Do not copy `package.json` to `build` directory
183f2486e2aa6d466e6ca0f25b185d4320d63f19,Leo Lamprecht,2017-02-14 14:46:20+00:00,Leo Lamprecht,2017-02-14 14:46:20+00:00,Find the closest `package.json` automatically
01e9ee8c2e8b63ddc7997bbf147bb84bdab2e286,Leo Lamprecht,2017-02-14 14:11:04+00:00,Leo Lamprecht,2017-02-14 14:11:04+00:00,4.5.1
a0c63e70e4e6c0cb260bbd9072e1858508e3fc76,Leo Lamprecht,2017-02-14 14:08:15+00:00,Leo Lamprecht,2017-02-14 14:08:15+00:00,Only upload `build` directory to npm
afee7770df0639c287fcf5567ba1c2224c32eda6,Matheus Fernandes,2017-02-14 13:36:53+00:00,Matheus Fernandes,2017-02-14 13:36:53+00:00,4.5.0
47a5c69c26b6670c10bc0787f5a42804fc9268bb,Matheus Fernandes,2017-02-14 13:35:28+00:00,GitHub,2017-02-14 13:35:28+00:00,"Add `now billing` and `now upgrade` (#309)

* Add the skeleton of `now cc`

* Add the `ls` command

* Add `inquirer` dependency

* Add the `set-default` command

* Fix typo

* Show the real number of cards when selecting the default one

* Add the `ls` command

* Fix: Do not throw if there's no cards in the account

* Add `blessed` dependency

* Add the first sketch of `now cc add`

* Add instructions

* Add labels

* Save every element in the `elements` array instead of variables

* Tweaks

* Fix: update the element attribute if it's not a special case

* Add the `name` input; Add moving between inputs; Make the state more reliable

* Auto ""detect"" if the input is losing focus

* Remove useless stuff

* Add the ability to move between the fields with tab/shift+tab

* Add CCV field

* Make the cycling between the fields ""infinite""

* Add expiration date field and allow only numbers in the CCV field

* The form shouldn't have a fixed height

* Add the address box and label

* Add the address fields

* Remove blessed stuff

* Add preliminary input field

* output utils

* add prompt for booleans

* fix @matheuss linting problems

* remove example

* lint

* error and info helpers

* helper for embedded commands

* Remove useless stuff

* Add `trailing` option

* Add `resolveChars` option

* Add `validate` option

* Add `strip-ansi` dependency

* Add `credit-card` dependency

* Add credit card masking

* Add support for expiration date mask

* Make things simpler

* Add auto completion support

* Always show the `card_` id prefix

* Add `@google/maps` dependency

* Always print the initial value if it's available

* Add `stripe` dependency

* Add `add()` method

* Add billing related utils

* Add `now cc add`

* Rename `cc` to `billing`

* Fix: log only one blank line

* Refactor

* Add list input component

* This shouldn't be here

* Add `code` output util

* Add `now upgrade | downgrade`

* add build step

* make it more future-proof

* more reliable build

* remove lock for now

* Hide the CCV

* Print the new line before `Saving card`

* Use the new `success` component

* Add confirmation steps for `cc rm` and `cc set-default`

* Temporarily monket patch Inquirer

* Build before testing

* Run the tests using the built files

* Fix the `prepublish` script and run the `build` one before packaging

* Improve `now help`"
5a97704d28d8e4325bcaaa233ed65c2f763e626a,Leo Lamprecht,2017-02-13 22:42:22+00:00,Leo Lamprecht,2017-02-13 22:42:22+00:00,4.4.2
dd8cc832cdd181ca3a9b476f044c223b0f859347,Tim Neutkens,2017-02-13 20:19:22+00:00,Leo Lamprecht,2017-02-13 20:19:22+00:00,Fix dotenv now.json option behaviour (#304)
f2383093191407673b1cc41d611758ccb9131641,greenkeeper[bot],2017-02-13 20:18:58+00:00,Leo Lamprecht,2017-02-13 20:18:58+00:00,"fix(package): update update-notifier to version 2.0.0 (#305)

https://greenkeeper.io/"
26c135cdcef13ccc1834dbcf53129991d250fcfd,Leo Lamprecht,2017-02-13 13:36:52+00:00,Leo Lamprecht,2017-02-13 13:36:52+00:00,4.4.1
5f0de768c32753b70d341fb743f21fb9923dd0fa,Leo Lamprecht,2017-02-13 13:36:35+00:00,Leo Lamprecht,2017-02-13 13:36:35+00:00,No need to specify `--dotenv`
94738e65dd2845901537701e44c844fc23712d76,Leo Lamprecht,2017-02-13 13:11:38+00:00,Leo Lamprecht,2017-02-13 13:11:38+00:00,4.4.0
75c30279cc4e5cbe5888f3f74e55ea3cef86769c,Leo Lamprecht,2017-02-13 13:11:18+00:00,Leo Lamprecht,2017-02-13 13:11:18+00:00,Log version without weird prefix
5e5ac5dab964fa699cd90725532cb2996793b307,Leo Lamprecht,2017-02-13 10:09:11+00:00,Leo Lamprecht,2017-02-13 10:09:11+00:00,Corrected position of exit import
8c8db8ecf85d977d08db1413d86d85d25e930592,tim neutkens,2017-02-12 12:11:22+00:00,Leo Lamprecht,2017-02-12 16:06:25+00:00,Allow dotenv option in now.json
de8470fe029579c3f166da01dbea7cdbd2d22057,tim neutkens,2017-02-12 15:29:38+00:00,Leo Lamprecht,2017-02-12 16:05:26+00:00,Move duplicated code into utils module
f7ea829fb8e6501189cb495e0421c26aff148c39,greenkeeper[bot],2017-02-12 16:04:57+00:00,Leo Lamprecht,2017-02-12 16:04:57+00:00,"fix(package): update fs-promise to version 2.0.0 (#302)

https://greenkeeper.io/"
23b3e79299757c9702b0974d2e6d42705a511cd9,Leo Lamprecht,2017-02-10 22:39:03+00:00,Leo Lamprecht,2017-02-10 22:39:03+00:00,4.3.0
036205fa442523ce69a3a66fb13d3ae6be2e62c3,Leo Lamprecht,2017-02-10 22:36:31+00:00,Leo Lamprecht,2017-02-10 22:36:31+00:00,Removed `--alias` from option list (deprecated)
8cde1663c525e054d457f4afe2034d79d1a6bbc7,Leo Lamprecht,2017-02-10 22:35:39+00:00,Leo Lamprecht,2017-02-10 22:35:39+00:00,Re-alias when running `now alias`
3786f53dc817bfa616a420304645d9e5e898b38d,Leo Lamprecht,2017-02-10 22:21:32+00:00,Leo Lamprecht,2017-02-10 22:21:32+00:00,Read aliases from `alias` property in `now.json`
c545968ff6d37659f6c0b937f0bf0a504b9adf21,Leo Lamprecht,2017-02-10 21:59:26+00:00,Leo Lamprecht,2017-02-10 21:59:26+00:00,Don't throw an error if alias doesn't exist
b90aaf43752c7ab7c4d4a5c01c401345341685d2,Leo Lamprecht,2017-02-10 21:54:41+00:00,Leo Lamprecht,2017-02-10 21:54:41+00:00,Split out mechanism for aliasing into separate file
8b86db4777c3927b74f19d69725587a273d8fc87,Leo Lamprecht,2017-02-10 21:32:13+00:00,Leo Lamprecht,2017-02-10 21:32:13+00:00,Deprecated `--alias`
dab9978ba6e9e52942d70c442bf3d5cabec3dbab,Leo Lamprecht,2017-02-10 20:26:59+00:00,Leo Lamprecht,2017-02-10 20:26:59+00:00,No need to exit here
d1ce432c65a93832e6a816f1a4d3a6b9523644d6,Leo Lamprecht,2017-02-10 20:19:24+00:00,Leo Lamprecht,2017-02-10 20:19:24+00:00,"Normalize deployment URLs before removing

This closes #299"
10d029dcbdd3dd44b86996e62591efaf8348e0f7,Leo Lamprecht,2017-02-06 14:10:44+00:00,Leo Lamprecht,2017-02-06 14:10:44+00:00,4.2.2
3464f34579ccdeef3fe616ae8e81acd2de0dfa8d,Leo Lamprecht,2017-02-06 14:10:34+00:00,Leo Lamprecht,2017-02-06 14:10:34+00:00,Make static deployments work again
dea9bac0ac84d8b898ccb9556d498c51430a8e5a,Leo Lamprecht,2017-02-06 13:51:47+00:00,Leo Lamprecht,2017-02-06 13:51:47+00:00,Updated dependencies to latest version
eb3c42ec2ad854197dda89d6efa84410802ecffc,Leo Lamprecht,2017-02-06 13:31:12+00:00,Leo Lamprecht,2017-02-06 13:31:12+00:00,4.2.1
07544a04aa46aee030dd7b9278ebdbe01be5f4e7,Leo Lamprecht,2017-02-06 13:22:47+00:00,Leo Lamprecht,2017-02-06 13:22:47+00:00,Pinned dependencies
c3011837ebcfbfe16c963ddc816a6cb75db91025,Leo Lamprecht,2017-02-06 13:22:30+00:00,Leo Lamprecht,2017-02-06 13:22:30+00:00,Save exact version of dependencies
f0b85bc2bfff391d8f80851e1b0560f2fd9d7130,Leo Lamprecht,2017-02-06 13:21:49+00:00,Leo Lamprecht,2017-02-06 13:21:49+00:00,Install latest version of `serve` (make static deployments work)
cda2a33e348fd0c1c88f4a4340e5251d438443f9,Leo Lamprecht,2017-02-06 10:18:16+00:00,Leo Lamprecht,2017-02-06 10:18:16+00:00,4.2.0
a5a3b01af9e9aff1c2a0558889cd76ab502bddd7,Leo Lamprecht,2017-02-06 10:16:51+00:00,Leo Lamprecht,2017-02-06 10:16:51+00:00,Upgraded `serve` yet again
4badb34a719e9c11f3447f1bbddfc13163f6c7f7,Tim Neutkens,2017-02-05 21:24:44+00:00,Leo Lamprecht,2017-02-05 21:24:44+00:00,"Add --dotenv flag to load .env file (#284)

* Add --dotenv flag to load .env file

* Alias -E to --dotenv

* Allow custom .env config file name

* Change 'Will default' to 'Defaults'"
dae5027c942c2ce882a53b385059b72f47e8c33d,Leo Lamprecht,2017-02-04 19:51:33+00:00,Leo Lamprecht,2017-02-04 19:51:33+00:00,4.1.2
a6cad020f9995bcdf904e8d24d683cafead603c4,Jarmo Isotalo,2017-02-04 19:50:44+00:00,Leo Lamprecht,2017-02-04 19:50:44+00:00,Show build errors (#286)
2289a230541c961d5a7eed9064b384ce690915c6,Tim Neutkens,2017-02-04 11:38:07+00:00,Leo Lamprecht,2017-02-04 11:38:07+00:00,Improve dns example (#283)
373e17a51d5ae1bcb548a49f756da0aaf9ed3c90,Leo Lamprecht,2017-02-04 11:10:10+00:00,Leo Lamprecht,2017-02-04 11:10:10+00:00,Bumped `serve`
2fd04c5021a021440e8ce8bc405025aa7a05f6e4,Leo Lamprecht,2017-02-04 10:24:29+00:00,Leo Lamprecht,2017-02-04 10:24:29+00:00,4.1.1
cc338d40390e304bda63750cbcd94d42a8c1e9ef,Leo Lamprecht,2017-02-04 10:24:21+00:00,Leo Lamprecht,2017-02-04 10:24:21+00:00,Only show update notification if one is available
78a8f2627bba5fc119509e01fda0ead7be84ba73,Leo Lamprecht,2017-02-04 08:40:37+00:00,Leo Lamprecht,2017-02-04 08:40:37+00:00,4.1.0
e71cdb844044bcae3fcde9bf06074c83031514e6,Jarmo Isotalo,2017-02-04 08:37:55+00:00,Leo Lamprecht,2017-02-04 08:37:55+00:00,Log erros and stacktraces (#276)
2a00eb632ab46c49582b977075816d0c37aeaa89,Igor Klopov,2017-02-04 08:37:40+00:00,Leo Lamprecht,2017-02-04 08:37:40+00:00,"now-alpine + suppress a pkg warning (#277)

* explicitly list pkg targets (alpine is not in default list)

* suppress pkg warnings by adding 'may-exclude'"
e16fa03b909f674c626f6034e6f73514c894fd42,greenkeeper[bot],2017-02-04 08:37:03+00:00,Leo Lamprecht,2017-02-04 08:37:03+00:00,"chore(package): update ava to version 0.18.1 (#280)

https://greenkeeper.io/"
f3b2324039ab5a739740b60843924986ca2ddbc2,Leo Lamprecht,2017-02-04 07:13:47+00:00,Leo Lamprecht,2017-02-04 07:13:56+00:00,Link changelog for new update
1304f9b91629a2c5e95a7001f09006c3ef5799bb,Leo Lamprecht,2017-02-03 21:57:51+00:00,Leo Lamprecht,2017-02-03 21:57:51+00:00,Custom message for update
213d9080b96bc5a7fa86c8db92b58ad14450b5a1,Olli Vanhoja,2017-02-01 17:28:31+00:00,Guillermo Rauch,2017-02-01 17:28:31+00:00,"Improved domain verification (#270)

New domains are no longer allowed as unverified, that allows us to
simplify `now alias` command a bit."
d8f532cabf41952a6b6ec3c536acdf12e066984d,Tim Neutkens,2017-01-31 16:51:35+00:00,Matheus Fernandes,2017-01-31 16:51:35+00:00,"Added husky (#251)

* Added husky

* Lint on precommit"
cb7fb54805dcbdb2e876ff73d5cb76786e8b7334,Leo Lamprecht,2017-01-30 21:27:22+00:00,Leo Lamprecht,2017-01-30 21:27:22+00:00,4.0.1
be1a799f1861398f313b787a1424bb18a824ce62,Leo Lamprecht,2017-01-30 21:27:08+00:00,Leo Lamprecht,2017-01-30 21:27:08+00:00,Bumped `serve`
61b7f21e09bc78c984ccb92ae460fb72350d2a8e,Leo Lamprecht,2017-01-29 22:08:13+00:00,Leo Lamprecht,2017-01-29 22:08:13+00:00,No need to tell greenkeeper about the emails
6e59af191f0d5394328f96edbd99b88f233ac0db,Leo Lamprecht,2017-01-28 12:19:56+00:00,Leo Lamprecht,2017-01-28 12:19:56+00:00,4.0.0
516ad204c06e0749fce6ed429889088703994a3a,Leo Lamprecht,2017-01-28 12:19:41+00:00,Leo Lamprecht,2017-01-28 12:19:41+00:00,Only show update message in production
548088111ba951456e489cabaf33a05c4207cd52,Olli Vanhoja,2017-01-26 18:57:39+00:00,Leo Lamprecht,2017-01-28 11:38:25+00:00,Improve now alias UX in case of an external DNS and a CNAME entry
add7bcfbea587af68e88e6096f93f572beebdfcd,Leo Lamprecht,2017-01-28 11:34:17+00:00,Leo Lamprecht,2017-01-28 11:34:17+00:00,Require `--alias` for all existing kinds of automatic aliasing
7ccb4de336ffd7bbe2aebba0beabc01977cf6546,Leo Lamprecht,2017-01-28 10:12:50+00:00,Leo Lamprecht,2017-01-28 10:12:50+00:00,New name for `alias` property
fb03bd6c21434f0ccc59eb8add68ee5ab82cc747,Leo Lamprecht,2017-01-28 10:09:44+00:00,Leo Lamprecht,2017-01-28 10:09:44+00:00,Allow the `alias` field to be an array
bde79dbab88324af89e2a13c226c08805e598961,Leo Lamprecht,2017-01-28 09:19:10+00:00,Leo Lamprecht,2017-01-28 09:19:10+00:00,NPM => npm
90f2781c9a322903109336da20a99859ba422469,Leo Lamprecht,2017-01-27 20:10:52+00:00,Leo Lamprecht,2017-01-27 20:10:52+00:00,3.1.2
8027751e4b2ab32620342ef09df54f7a1490a487,Leo Lamprecht,2017-01-27 20:10:43+00:00,Leo Lamprecht,2017-01-27 20:10:43+00:00,Bumped `serve` yet again
6c5c8cb93d98a8154951c4808a29ecb9f4d375f4,Leo Lamprecht,2017-01-27 20:09:39+00:00,Leo Lamprecht,2017-01-27 20:09:39+00:00,Don't generate sourcemaps when transpiling
1770486ff6694a13b9f2e8872e6950a1c4168c29,Leo Lamprecht,2017-01-27 19:52:52+00:00,Leo Lamprecht,2017-01-27 19:58:12+00:00,Bumped `serve` to latest version
b16a747d5456e1e67e3e4b1198bc9888a9fd7d31,Matheus Fernandes,2017-01-27 13:28:44+00:00,Matheus Fernandes,2017-01-27 13:28:44+00:00,3.1.1
c31c926aac676d104c58e0ee86d020dcac9ffa34,Matheus Fernandes,2017-01-27 13:24:47+00:00,Matheus Fernandes,2017-01-27 13:24:47+00:00,Pass a Windows-aware Regex to `async-to-gen/register`
6799c0eefe821abb7a765fd5e90a14f8751dadeb,Jos Padilla,2017-01-27 08:33:43+00:00,Leo Lamprecht,2017-01-27 08:33:43+00:00,Update async-to-gen (#258)
76fd0838edbc7d27a46a537d24599fe1bfa38123,Leo Lamprecht,2017-01-26 22:00:39+00:00,Leo Lamprecht,2017-01-26 22:00:39+00:00,3.1.0
3269d4203b8959b2b0a24fcd71717cd4321b1281,Matheus Fernandes,2017-01-26 21:47:28+00:00,Leo Lamprecht,2017-01-26 21:47:28+00:00,Only transform our code with `async-to-gen/register` (#254)
83326fd8c4de4062c8296a75db458db2f6df63b9,Guillermo Rauch,2017-01-26 01:07:12+00:00,Guillermo Rauch,2017-01-26 01:08:34+00:00,add now.json support
f6e67cb8f8f5de3da81b16c7b62b411d125eb49d,Guillermo Rauch,2017-01-26 01:06:21+00:00,GitHub,2017-01-26 01:06:21+00:00,"Merge pull request #2 from zeit/now.json

Support for `now.json`"
9540863c0e8cc90a846a3f1f086373c6ea4f123f,Nathan Rajlich,2017-01-26 00:04:39+00:00,Nathan Rajlich,2017-01-26 00:04:39+00:00,fix typo
957744e3a581eb7a5cc47ddf53a74e6fd7490ab3,Nathan Rajlich,2017-01-26 00:00:49+00:00,Nathan Rajlich,2017-01-26 00:00:49+00:00,add `now.json:name` field support
7f92455b2e2a3f097defd93394b5a055de13c9f4,Nathan Rajlich,2017-01-25 21:03:28+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,lint *again*
73f22bb68e91cfbf44749f80b29c52f7d5714492,Nathan Rajlich,2017-01-25 21:00:01+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,use G's wording for error message
540caa4db7de68b389f8cf5b4b2930ac14e556d8,Nathan Rajlich,2017-01-25 20:15:02+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,fixes for when `nowConfig` is null
0b2b39222c132c4e46090bf603877390ed2c15c6,Nathan Rajlich,2017-01-25 20:12:58+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,lint
1151830af6604e651676a518e7be2e1c157f819b,Nathan Rajlich,2017-01-25 20:09:28+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,a couple more test cases and fixes for them
7daf1e4c492d3cd29de45106f19a3f190a05852b,Nathan Rajlich,2017-01-25 18:42:45+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"Only throw when both `pkg.now` and `now.json` are present

Fixes failing test case."
38fe08ad97160bdfca7ec9753eb6aa301f5f27f9,Nathan Rajlich,2017-01-25 18:38:13+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"rename getMetadata() to readMetaData()

Matches what it's called elsewhere in the codebase"
4ad921e958d3fbf63b3f699056b1aad4fce7dfe8,Nathan Rajlich,2017-01-25 18:34:37+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"add first `now.json` test case

Passing."
d9b5c4d4faa1aababc9c8dacd8fbd69c717b4713,Nathan Rajlich,2017-01-24 22:32:19+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,fix lint
f6c0e65b7f06a8793e2ee8a585aeec814c74c4f1,Nathan Rajlich,2017-01-24 22:31:53+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"fail hard when both a `now.json` and `package.json` file with ""now"" are present

As discussed in the GH issue."
c44284b0b31f0479c7881bc167f566d0259a874f,Nathan Rajlich,2017-01-24 22:31:39+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,remove unused require call
c11131310c5f23ec05714e3f11561d0cf0f101d9,Nathan Rajlich,2016-12-01 18:40:44+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,fix lint
76e4ab503707e43ea7a715fda91d2aa2f10b0b52,Nathan Rajlich,2016-12-01 18:23:59+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"support `now.files` in now.json

Needs a test case still..."
cee788d3e11c6c17475c4987c100d9ea289d71fb,Nathan Rajlich,2016-12-01 18:22:17+00:00,Nathan Rajlich,2017-01-25 23:37:32+00:00,"add a `strict` mode to readMetadata()

Test cases will set this to `false`, because they're
missing `scripts.start` and other required properties in this function"
4c9caa420b3b1bc69432fd276370e03347052600,Nathan Rajlich,2016-12-01 04:14:20+00:00,Nathan Rajlich,2017-01-25 23:37:10+00:00,initial `now.json` support
168f553025c07fa72a66aa1f40952a130c2f6d92,Tim Neutkens,2017-01-25 21:59:02+00:00,Matheus Fernandes,2017-01-25 21:59:02+00:00,Remove unused dependencies (#250)
73a1f84080795cab22ea9510b050cce7b918cf54,Jess Lobos,2017-01-25 12:43:19+00:00,Leo Lamprecht,2017-01-25 12:43:19+00:00,Fix `Native` and `Packages` comment structure (#244)
b7f756aedaa963944e2954e2c8e5cdd6416b08f3,Leo Lamprecht,2017-01-24 13:19:55+00:00,Leo Lamprecht,2017-01-24 13:19:55+00:00,3.0.1
6e62d874bcfe57302bfc989d6f96623738ec0e3d,Eli Perelman,2017-01-13 23:11:35+00:00,Leo Lamprecht,2017-01-24 13:10:15+00:00,Normalize package.json main file for extensionless or directory entries
5fd580288009a6599616ec6b8a42503efaf0fe81,Guillermo Rauch,2017-01-24 13:07:30+00:00,Leo Lamprecht,2017-01-24 13:07:30+00:00,"Improved agent (#240)

* improves agent

- reverts spdy for now (causing issues with alias)
- sets up an agent pool of 4 max sockets with a 10s keep alive timeout
- better error handling and re-initialization

* improves agent

- reverts spdy for now (causing issues with alias)
- sets up an agent pool of 4 max sockets with a 10s keep alive timeout
- better error handling and re-initialization"
3732bfb16ccc36794ec1cd0a646dfefbe4ff7624,Jarmo Isotalo,2017-01-24 13:06:04+00:00,Leo Lamprecht,2017-01-24 13:06:04+00:00,"Don't require for CMD and EXPOSE to be defined in Dockerfile used for (#237)

deploying but allow those to be defined in upstream Dockerfiles"
6622ddcfb96b3dd04f289fcdf8303f2d64f8dd4c,Guillermo Rauch,2017-01-21 23:02:45+00:00,Guillermo Rauch,2017-01-21 23:02:45+00:00,Release 3.0.0
2c245a5cab403032c5b02c7b7c5643d1c3c864f1,Guillermo Rauch,2017-01-21 23:01:10+00:00,Guillermo Rauch,2017-01-21 23:01:10+00:00,fix merge
0265530f251cdcdfa26d24610821e258cf14bc33,Guillermo Rauch,2017-01-21 22:59:21+00:00,Guillermo Rauch,2017-01-21 22:59:21+00:00,Merge branch 'master' of github.com:zeit/now
244137ae90e19e25987703cf1bdb6188694761ab,Guillermo Rauch,2017-01-21 22:58:31+00:00,GitHub,2017-01-21 22:58:31+00:00,"Ignore improvements (#234)

* fix non-determinism in tests

* if `.dockerignore` doesn't exist, use `.gitignore`

* add back duplicate dei

* Move comment to appropriate line

* also check for exactly two duplicates"
347d06242ed41d28ce0d404b3d959a052e3d12d4,Guillermo Rauch,2017-01-21 21:59:49+00:00,Guillermo Rauch,2017-01-21 21:59:49+00:00,add back duplicate dei
cb3da35156d59f887d4303aeea090b3696a2ddf3,Guillermo Rauch,2017-01-21 21:59:28+00:00,Guillermo Rauch,2017-01-21 21:59:28+00:00,Merge branch 'master' of github.com:zeit/now
485915b30049d15885d3d77c18f243b4616450f3,Guillermo Rauch,2017-01-21 21:55:40+00:00,Guillermo Rauch,2017-01-21 21:55:40+00:00,"if `.dockerignore` doesn't exist, use `.gitignore`"
06b34a07307e2ba8f34784ba3230371b8673e895,Guillermo Rauch,2017-01-21 21:55:28+00:00,Guillermo Rauch,2017-01-21 21:55:28+00:00,fix non-determinism in tests
a3a74ab2536b83cf5d41afc8097b923c2a8e4057,Leo Lamprecht,2017-01-21 14:12:29+00:00,Leo Lamprecht,2017-01-21 14:12:29+00:00,2.0.5
49de0d3331563537c2326ab3f170af801ff979a5,Matheus Fernandes,2017-01-17 15:45:31+00:00,Leo Lamprecht,2017-01-17 15:45:31+00:00,Print the error message for a aborted login in a new line (#229)
85a68b9fe7bd6abf716caf358c64ab3b4c6768e0,Greenkeeper,2017-01-17 10:11:36+00:00,Leo Lamprecht,2017-01-17 10:11:36+00:00,chore(package): update ora to version 1.0.0 (#227)
0c02113e2ae13e608cc700ea5845111421a9a23c,Leo Lamprecht,2017-01-16 18:08:51+00:00,Leo Lamprecht,2017-01-16 18:08:51+00:00,2.0.4
c45eeed38f56e01816295513511eb285705cbefd,Leo Lamprecht,2017-01-16 18:00:54+00:00,Leo Lamprecht,2017-01-16 18:00:54+00:00,No `version` property required
d8e4e41b8dc653e4b509f91d0797dc7df1e712b3,Leo Lamprecht,2017-01-16 17:57:16+00:00,Leo Lamprecht,2017-01-16 17:57:16+00:00,Pinned `serve` but allowing patches
cb8403174b2807ff5884ac6b64630c6e7d44f393,Matheus Fernandes,2017-01-14 21:48:53+00:00,Leo Lamprecht,2017-01-14 21:48:53+00:00,Make clear that the alias must exist when using `--alias` (#222)
311abf3d2f04f03e0a44aa53d3e282fc7662a7e6,Olli Vanhoja,2017-01-14 21:48:43+00:00,Leo Lamprecht,2017-01-14 21:48:43+00:00,"now-rm: Don't show URL for incomplete deployments (#221)

Fixes this:

> The following deployment will be removed permanently:
XXXXXXXXXXXXXXXXXXXXXXXX      https://null      21d ago"
0c2ef197adc3d5b2f9cddd6f359b326a3b132ce3,Leo Lamprecht,2017-01-11 14:17:59+00:00,Leo Lamprecht,2017-01-11 14:17:59+00:00,2.0.3
5c1b239ca65cfef611518d252183d79e3fbdb838,Leo Lamprecht,2017-01-11 14:17:48+00:00,Leo Lamprecht,2017-01-11 14:17:48+00:00,Prevent pkg from throwing a warning
59734bf31bf650e08867a7da4b2ee9b0090797bd,Leo Lamprecht,2017-01-11 14:15:12+00:00,Leo Lamprecht,2017-01-11 14:15:12+00:00,MOAR comments
b997c71dd4c30703b7ebd49cb2f365e59816e59d,Leo Lamprecht,2017-01-11 14:01:42+00:00,Leo Lamprecht,2017-01-11 14:01:42+00:00,Contextual newlines added
0b4660158a94afde1b6d3c86093bcaa0bab68843,Olli Vanhoja,2017-01-11 13:52:40+00:00,Leo Lamprecht,2017-01-11 13:52:40+00:00,"Fix file mode passing for regular deployments (#214)

Commit bbf1b30c4decce34a115e64201702f270eb003c3 broke file modes
for regular deployments as file mode isn't retrieved anymore."
a76397f0fb0f03f4dbd5b6b69cd1735045ccc19c,Leo Lamprecht,2017-01-10 21:53:33+00:00,Leo Lamprecht,2017-01-10 21:53:33+00:00,Testing token needs to be inside its property
058c3f63abeee7b42b9d8dd76d567857f834b990,Leo Lamprecht,2017-01-10 20:16:16+00:00,Leo Lamprecht,2017-01-10 20:16:16+00:00,Make tests use the correct binary
c46f5e66dd1b26e919568f01579880767737e72e,Leo Lamprecht,2017-01-10 18:59:44+00:00,Leo Lamprecht,2017-01-10 18:59:44+00:00,2.0.2
2fa62da2d8b7ffe10db2b3e9887732eb08657b4f,Leo Lamprecht,2017-01-10 18:59:31+00:00,Leo Lamprecht,2017-01-10 18:59:31+00:00,Don't ignore modules directory when transpiling
dabcc64660fc1cdbccc9983c94191c197a603e77,Leo Lamprecht,2017-01-10 18:42:27+00:00,Leo Lamprecht,2017-01-10 18:42:27+00:00,2.0.1
03708278df90c9036be8ae36401a47ec08db2b57,Leo Lamprecht,2017-01-10 18:42:10+00:00,Leo Lamprecht,2017-01-10 18:42:10+00:00,Load sub commands using extensions
f82cbe9bc50eca0cc0c6f84a4b7d6aa9be780e0f,Leo Lamprecht,2017-01-10 18:30:26+00:00,Leo Lamprecht,2017-01-10 18:30:26+00:00,Tell pkg not to use the harmony flag
513ecfb7de45e7254376eb05f2b6ae9d5903767e,Leo Lamprecht,2017-01-10 18:30:12+00:00,Leo Lamprecht,2017-01-10 18:30:12+00:00,Added extensions to binaries
7628017eb6f2917f47af3fde777b4843a0967aa6,Leo Lamprecht,2017-01-10 17:58:51+00:00,Leo Lamprecht,2017-01-10 17:58:51+00:00,2.0.0
158bf64ea2dc5d463c8198059d59bac77648c3b1,Leo Lamprecht,2017-01-10 17:54:33+00:00,Leo Lamprecht,2017-01-10 17:54:33+00:00,No need to set language type anymore
56f4c2818a2880dcdbe40ae52abfff1121aa6bfe,Leo Lamprecht,2017-01-10 17:51:50+00:00,Leo Lamprecht,2017-01-10 17:51:50+00:00,Hide weird XO error in Atom
9f073ad25cedda407220fd143912a601e0223805,Leo Lamprecht,2017-01-10 17:48:56+00:00,Leo Lamprecht,2017-01-10 17:48:56+00:00,Use async-to-gen for all Node versions
50300086316d4635c798b19ecc605684c7ebb659,Leo Lamprecht,2017-01-10 11:20:47+00:00,Leo Lamprecht,2017-01-10 11:20:47+00:00,Tell XO to ignore enclosed version
df111b9eba08837b42dc16d410a31513104f03f3,Leo Lamprecht,2017-01-10 11:04:58+00:00,Leo Lamprecht,2017-01-10 11:04:58+00:00,Only allow process.exit in certain places
fc8708923e09e6e9a2762b5e9bd59b798e6e914c,Leo Lamprecht,2017-01-10 11:03:26+00:00,Leo Lamprecht,2017-01-10 11:03:26+00:00,Re-enable rule for unresolved imports
d01bf29690fe2cf42d952ebcd2824618f1c2072f,Leo Lamprecht,2017-01-10 11:03:02+00:00,Leo Lamprecht,2017-01-10 11:03:02+00:00,Check for update using a package
06fad401bf4e5f7e22f65e355ac6c99a8235b3cb,Leo Lamprecht,2017-01-10 10:59:56+00:00,Leo Lamprecht,2017-01-10 10:59:56+00:00,Removed unused code
6186c8b06b9f50e179e10f02c6721fae4d181305,Leo Lamprecht,2017-01-10 10:56:43+00:00,Leo Lamprecht,2017-01-10 10:56:43+00:00,Start JS syntax right on top
e981e0a218e70c0a46b0a25c32f0e90ece316b27,Leo Lamprecht,2017-01-10 10:39:52+00:00,Leo Lamprecht,2017-01-10 10:39:52+00:00,Make description match the repo's
18d0963ad433f6b7cfb7dd582b56c2d37a6b1f30,Leo Lamprecht,2017-01-10 10:36:47+00:00,Leo Lamprecht,2017-01-10 10:36:47+00:00,Added a missing newline before checking support of async/await
7e30961ae1076b6abd633469e770cc122dde5398,Leo Lamprecht,2017-01-10 10:34:34+00:00,Leo Lamprecht,2017-01-10 10:34:38+00:00,No need to ignore build directory anymore
18d9de41215ebc937dc27ab620f81faae00a9e00,Leo Lamprecht,2017-01-10 10:33:33+00:00,Leo Lamprecht,2017-01-10 10:33:33+00:00,Removed main property (not needed)
2a26f01a95947f9296e05d7bb7cc015d9d670f2a,Leo Lamprecht,2017-01-10 10:31:28+00:00,Leo Lamprecht,2017-01-10 10:31:28+00:00,Stop pinning dependencies
b1090fe97e31b808e1833c99ceac5175067b9ac9,Leo Lamprecht,2017-01-10 10:29:25+00:00,Leo Lamprecht,2017-01-10 10:29:25+00:00,Let Travis CI decide whether or not to use sudo
38b56b118c0829b23fa2e027b10b78f47170930d,Leo Lamprecht,2017-01-10 10:28:27+00:00,Leo Lamprecht,2017-01-10 10:28:27+00:00,There's no build directory anymore
21c235bb4cc2bc7e3e7b57309981ed54738e0d88,Leo Lamprecht,2017-01-10 10:27:54+00:00,Leo Lamprecht,2017-01-10 10:27:54+00:00,No dev script needed
30432153503e128d9cd5f01e93ab5dc4d66fc307,Leo Lamprecht,2017-01-10 10:27:13+00:00,Leo Lamprecht,2017-01-10 10:27:13+00:00,Upload folders to npm
bf2af9d8d5bc8317bbb2dc5dbaaf46b7f187f83a,Leo Lamprecht,2017-01-10 10:26:29+00:00,Leo Lamprecht,2017-01-10 10:26:29+00:00,Properly indented pkg property
059918e7ee9ac55b6d074866a21a351c766a47e8,Jarmo Isotalo,2017-01-10 10:21:53+00:00,Leo Lamprecht,2017-01-10 10:21:53+00:00,"Remove babel as dependecy (#209)

* Remove babel as a dependency
* Migrate from import foo from foo to const foo = require('foo')
* Update module.exports
* Update commander syntax

* Update pkg config and fix stuff

* Make XO happy

* Fix path in tests

* Fix typo

* Fix cleanup

* Debug pkg

* Fix pkg

* Fix process.argv for subcommands

* Run with --harmony-async-await when supported thx igor for help with this trick :D

* Use bash

* Set engines.node in package.json"
75de2865d694f495359f018bf5e0a76457f49dea,Greenkeeper,2017-01-10 08:28:08+00:00,Leo Lamprecht,2017-01-10 08:28:08+00:00,chore(package): update ora to version 0.4.1 (#210)
29066338d8166e6c968b180ed29ecc247dccaa45,Olli Vanhoja,2017-01-09 08:07:43+00:00,Leo Lamprecht,2017-01-09 08:07:43+00:00,"Fix now alias on new domains (#207)

Bail if no records are found for a domain to allow adding the records.

now alias derp domain.com -d
> [debug] Checking for updates.
> [debug] Up to date (1.0.0).
> [debug] /list: 583.880ms
> [debug] matched deployment derp by url derp.now.sh
> domain.com is a custom domain.
> Verifying the DNS settings for domain.com (see https://zeit.world for help)
> [debug] #1 GET /domains/domain.com: 271.741ms
> [debug] Found domain domain.com with verified:true
> [debug] No records found for ""domain.com""
> Verification OK!"
8c3a40b6f8f5de4827fd4a650b2a812fc99c9137,Leo Lamprecht,2017-01-08 21:46:17+00:00,Leo Lamprecht,2017-01-08 21:46:17+00:00,Options is a sub section of usage
10fd578a51bd18d7d903e77d3a4152d0bc5849de,Leo Lamprecht,2017-01-08 21:45:43+00:00,Leo Lamprecht,2017-01-08 21:45:43+00:00,Command for usage information
81940de06e78199a4e74f6671520792fdd25e6b3,Leo Lamprecht,2017-01-08 13:41:33+00:00,Leo Lamprecht,2017-01-08 13:41:39+00:00,How to get a testing token
efb8da72e73d0bf142d213042ae0bece572106fb,Luke Childs,2017-01-08 11:29:05+00:00,Leo Lamprecht,2017-01-08 11:29:05+00:00,Allow shorthand aliases with `now --alias` (#206)
49c7ae052da36738d9964a53b2c357eb6ca127a5,Leo Lamprecht,2017-01-07 21:31:12+00:00,Leo Lamprecht,2017-01-07 21:31:12+00:00,1.0.0
9a37e9deb2a2d7efea84e4097aafbb45a8097de3,Luke Edwards,2017-01-07 19:33:56+00:00,Leo Lamprecht,2017-01-07 19:33:56+00:00,insert newline into alias-success msg (#203)
c584f4279189aa76912e1fbf9b924f95d3e01709,Luke Edwards,2017-01-07 06:59:59+00:00,Leo Lamprecht,2017-01-07 06:59:59+00:00,"copy alias to clipboard & show message (#201)

* copy alias to clipboard & show message

* ensure status output if not ttys or cant copy"
afc329a61c0bade5e3b98b4f51b4de67bc5e6a22,Luke Morton,2017-01-07 06:57:41+00:00,Leo Lamprecht,2017-01-07 06:57:41+00:00,"Multiple aliases during deploy (#202)

A small superficial change to bin/now-deploy.js so that we can specify one or more aliases whilst deploying.

**Examples**

```
now --alias a.com
now --alias a.com --alias b.com
```

We handle the alias assignment serially so that the CLI output makes sense.

**Some thoughts**

 - Im hoping this PR can close out #172
 - Aware this PR likely affects #68
 - This is a superficial change, really we should update the lib/alias.js to handle multiple domains"
e7de9abb9ae96155b03916c5eb387fa58c9e4579,Leo Lamprecht,2017-01-06 21:26:09+00:00,Leo Lamprecht,2017-01-06 21:26:09+00:00,Removed terminal indicators
f7830c1ff81fcffe578ffe45283388473184332d,Leo Lamprecht,2017-01-06 09:20:35+00:00,Leo Lamprecht,2017-01-06 09:20:35+00:00,0.39.1
8b7d1e60ec43eb2e5d473c59cdd16bb27c069af2,Guillermo Rauch,2017-01-06 09:15:46+00:00,Leo Lamprecht,2017-01-06 09:15:46+00:00,"Improve ignore semantics. (#200)

* improve ignore semantics

* add files accidentally ignored previously"
f2a4ee0adc1beacf49f8303599c905543cf1bba3,Luke Edwards,2017-01-03 09:22:11+00:00,Leo Lamprecht,2017-01-03 09:22:11+00:00,"XO Happiness (#197)

* Comply to rule 'no-useless-escape'

* Comply to rule 'no-case-declarations'

* Comply to rule 'ava/no-ignored-test-files'"
c92fd09dc50e56396b5cedfc2e8f7056e5543987,Leo Lamprecht,2017-01-02 20:22:20+00:00,Leo Lamprecht,2017-01-02 20:22:20+00:00,0.39.0
bbf1b30c4decce34a115e64201702f270eb003c3,Leo Lamprecht,2017-01-02 20:18:16+00:00,Leo Lamprecht,2017-01-02 20:18:16+00:00,Set a default file mode for package.json
960c80ae3f443a569ba56dbab34696d09c6696a6,Greenkeeper,2017-01-02 16:29:08+00:00,Leo Lamprecht,2017-01-02 16:29:08+00:00,chore(package): update tmp-promise to version 1.0.3 (#196)
0cc0544ec389a2e48f3637378e71da5bac972ccb,Leo Lamprecht,2017-01-02 13:52:06+00:00,Leo Lamprecht,2017-01-02 13:52:06+00:00,Authors added
1652fd01a1bc10d01bfa72891199aa9589767d20,Olli Vanhoja,2017-01-02 08:18:52+00:00,Leo Lamprecht,2017-01-02 08:18:52+00:00,Add auto-renew column to `now certs ls` (#195)
ac07fc3ee2b826f3541e62bdec4ddb8cf05f638d,Leo Lamprecht,2016-12-30 22:00:15+00:00,Leo Lamprecht,2016-12-30 22:00:15+00:00,0.38.0
1c7a13fe68c5ac66331e478e24f658269fd69fdc,Olli Vanhoja,2016-12-30 17:44:18+00:00,Leo Lamprecht,2016-12-30 17:44:18+00:00,Add an option to copy symlinks (#191)
02b0a9e2d3066c70b5e8831c91e97c1bd11feca7,Olli Vanhoja,2016-12-29 19:01:59+00:00,Guillermo Rauch,2016-12-29 19:01:59+00:00,"Add TXT record type to `now dns --help` (#190)

TXT record support was recently added to now."
c509dfd5d7ba03cccfed2598c13e4191018f93e7,Olli Vanhoja,2016-12-28 21:15:55+00:00,Leo Lamprecht,2016-12-28 21:15:55+00:00,"Support basic file modes (#187)

now-cli should pass file mode bits when creating a deployment."
8698bd694f3396e0f55b887f7e58ed023dca2219,Leo Lamprecht,2016-12-24 08:30:43+00:00,Leo Lamprecht,2016-12-24 08:30:43+00:00,Removed unnecessary semicolon
14d861e6d1d41b029b191a595cc9ab8f5eda5c00,Olli Vanhoja,2016-12-24 08:24:52+00:00,Leo Lamprecht,2016-12-24 08:24:52+00:00,"Show an appropriate message for incomplete deployments (#185)

If syncing files fails or the user just happens to run `now ls`
before the deployment is ready `https://null` is shown as an URL
to the deployment. Instead of showing `null` we could show
something nice."
8ab8ca53d2bb16ef49f9f963733098848bc42ce3,Leo Lamprecht,2016-12-23 21:11:59+00:00,Leo Lamprecht,2016-12-23 21:11:59+00:00,0.37.1
1ce72df4fdba131a64914e94ff804173545fba5e,Igor Klopov,2016-12-23 17:24:22+00:00,Leo Lamprecht,2016-12-23 17:24:22+00:00,show `Using Node.js` only for npm deployment type (#183)
e803dc80f9f043d71c8647ca107efc2096cb5f12,Leo Lamprecht,2016-12-21 17:55:03+00:00,Leo Lamprecht,2016-12-21 17:55:03+00:00,Make FAQs link to homepage
028e9092dfb52ddaf7655d41acaacc5ee92e298d,Leo Lamprecht,2016-12-20 21:17:53+00:00,Leo Lamprecht,2016-12-20 21:18:00+00:00,Both now-cli and now-desktop need the same here
1aa4fd88f3ba41a38fcbb1de0dc4a941361b8856,Leo Lamprecht,2016-12-20 21:16:01+00:00,Leo Lamprecht,2016-12-20 21:16:01+00:00,Adjusted cmd name for development
9a249649dad3d23a409a594e19e57c958057faa3,Leo Lamprecht,2016-12-20 12:21:33+00:00,Leo Lamprecht,2016-12-20 12:21:33+00:00,New script for building added
2ddfeb9ca9f2a0bfdca2f91280345951328d15d9,Leo Lamprecht,2016-12-20 12:20:53+00:00,Leo Lamprecht,2016-12-20 12:20:53+00:00,Proper script name for development
45193ee497dc415df4fa4f8c6915f5178b506d02,Leo Lamprecht,2016-12-20 11:32:33+00:00,Leo Lamprecht,2016-12-20 11:32:33+00:00,Make FAQ plural
0754cffa1199709eafe5fab3fe538251aa4a0dc1,Leo Lamprecht,2016-12-20 11:19:45+00:00,Leo Lamprecht,2016-12-20 11:19:45+00:00,Tell gulp to cache
06f1584e0d385ca017d654371cb8e32ce5d640cf,Greenkeeper,2016-12-17 21:38:28+00:00,Leo Lamprecht,2016-12-17 21:38:28+00:00,chore(package): update ora to version 0.4.0 (#176)
ffd92902fc9c354cb96861dd70e644b08c9f55fe,Greenkeeper,2016-12-17 11:07:37+00:00,Leo Lamprecht,2016-12-17 11:07:37+00:00,chore(package): update alpha-sort to version 2.0.0 (#174)
0bc7d0fb50231d8d5679ae01f8d25429b9f8389d,Leo Lamprecht,2016-12-15 09:41:12+00:00,Leo Lamprecht,2016-12-15 09:41:12+00:00,0.37.0
84342092cdac3b10c0f1800db63e70b714e779a8,Leo Lamprecht,2016-12-15 09:39:41+00:00,Leo Lamprecht,2016-12-15 09:39:41+00:00,Better error message if alias is missing
09b91e8fbba5e0150a4f06c3d53f7b12725919a7,Leo Lamprecht,2016-12-15 09:37:23+00:00,Leo Lamprecht,2016-12-15 09:37:23+00:00,Support IDs for auto aliasing
68a53c67f2ec188cf7a232bef475df9f0791f05d,Leo Lamprecht,2016-12-15 09:25:26+00:00,Leo Lamprecht,2016-12-15 09:25:26+00:00,Ability to automatically assign an alias
2276dfb5d5890e10f5b3906474a119eaee7d6005,Leo Lamprecht,2016-12-15 09:21:17+00:00,Leo Lamprecht,2016-12-15 09:21:17+00:00,Basics for automatically assigning alias
0830aabe084e3f209dfd7542ba40a73e2b0daba4,Leo Lamprecht,2016-12-15 07:15:13+00:00,Leo Lamprecht,2016-12-15 07:15:13+00:00,"Only show update message in npm version

This closes #62"
aeb7f4a5db9ea60c7100e4b278ce6da0c35d61cb,Leo Lamprecht,2016-12-12 18:11:59+00:00,Leo Lamprecht,2016-12-12 18:11:59+00:00,0.36.2
af76505c9e02ad79f739e5c729c89c8b1973bcc4,Leo Lamprecht,2016-12-12 18:00:42+00:00,Leo Lamprecht,2016-12-12 18:00:42+00:00,Improved flow for confirming address
6879ee1d4dcb8916d580d88f33481a1e723a32ba,Leo Lamprecht,2016-12-12 17:40:14+00:00,Leo Lamprecht,2016-12-12 17:40:14+00:00,Updated dependencies
cf5b9ad12527a65df8f6fe523ad767474cad98ec,Leo Lamprecht,2016-12-12 17:31:29+00:00,Leo Lamprecht,2016-12-12 17:31:29+00:00,Replace publicsuffixlist with psl
f997a8fa61f8b4180c8fd36d276cb845386a7437,Leo Lamprecht,2016-12-12 17:01:37+00:00,Leo Lamprecht,2016-12-12 17:01:37+00:00,List got renamed
cd9891dbc9bcb804bc409ec7d927053c3322f203,Leo Lamprecht,2016-12-12 09:03:17+00:00,Leo Lamprecht,2016-12-12 09:03:17+00:00,0.36.1
3a8f11b1ba486edc337cfa77f50c4a25454d73c0,Olli Vanhoja,2016-12-09 14:44:05+00:00,Leo Lamprecht,2016-12-09 14:44:05+00:00,alias set --debug: Only print nameservers if we fetched them (#166)
692bd34ced7c99e1f718994223069cd105c30ac8,Matheus Fernandes,2016-12-09 14:32:36+00:00,Olli Vanhoja,2016-12-09 14:32:36+00:00,Add `dns` entry to the global help (#164)
03b33945d851d6e8e7c1334d35a347586971ac8a,Igor Klopov,2016-12-09 14:22:45+00:00,Leo Lamprecht,2016-12-09 14:22:45+00:00,pkg@3.0.0-beta.22 fixes publicsuffixlist issue (#165)
3c28d01fc7df0981aee7dfcfadc99028f873304c,Leo Lamprecht,2016-12-08 19:54:29+00:00,Leo Lamprecht,2016-12-08 19:54:29+00:00,0.36.0
26afd83c1af236b9b067549a56c85e8185235b0b,Leo Lamprecht,2016-12-08 17:09:19+00:00,Leo Lamprecht,2016-12-08 17:09:19+00:00,Ability to skip confirmation when deleting deployments
2fdfbbdc221e720bf0ce7bfa116f5b20d311b06b,Olli Vanhoja,2016-12-08 13:07:22+00:00,Leo Lamprecht,2016-12-08 13:07:22+00:00,"Improve client side domain verification (#161)

No need to check nameservers if the domain is already known and
verified by now."
0e486282a0a963c5ce102f07c5622af100316757,Jarmo Isotalo,2016-12-08 12:59:31+00:00,GitHub,2016-12-08 12:59:31+00:00,Fix unhandled promise rejection (#162)
ec7cacad34afae49078b568de21c44f008b1b9c1,Leo Lamprecht,2016-12-07 17:29:52+00:00,Leo Lamprecht,2016-12-07 17:29:52+00:00,0.35.0
e12c4212c950a3fec6a0569b8c733cdc756365ad,Leo Lamprecht,2016-12-07 17:28:45+00:00,Leo Lamprecht,2016-12-07 17:28:45+00:00,Sprinkled a few newlines on there
1fee62c596ff34d7a385b02c0aa83d4cd43a7a9f,Olli Vanhoja,2016-12-01 15:51:47+00:00,Olli Vanhoja,2016-12-07 07:15:35+00:00,Support domain name verification
999936059f4ba56daf23c72b715657ff671d15b0,Leo Lamprecht,2016-12-05 11:46:24+00:00,Leo Lamprecht,2016-12-05 11:46:24+00:00,0.34.1
f86d576b6c4de52444f55f778cecaf7127f730f2,Leo Lamprecht,2016-12-05 11:45:51+00:00,Leo Lamprecht,2016-12-05 11:45:51+00:00,More explicit heading
3a4e070c2db448e530cc16e6b7761fb0b1ba5d27,Leo Lamprecht,2016-12-05 11:45:30+00:00,Leo Lamprecht,2016-12-05 11:45:30+00:00,Repo slug changed
802e59f68082e5d51774aba0b08497587ca349b9,Jarmo Isotalo,2016-12-03 20:15:08+00:00,Jarmo Isotalo,2016-12-03 20:17:50+00:00,"Improve error handling for alias creation, fixes #156"
c9808b7a6ed33753fea912471f515554fa38f642,Leo Lamprecht,2016-12-03 13:24:50+00:00,Leo Lamprecht,2016-12-03 13:24:50+00:00,Missing import types added
23aab1f0db8537904a6973a80564a010801e59bb,Leo Lamprecht,2016-12-03 13:16:42+00:00,Leo Lamprecht,2016-12-03 13:16:42+00:00,0.34.0
79d07274ce8ecc7444c293fec24fd87bffbf2a37,Leo Lamprecht,2016-12-03 13:13:46+00:00,Leo Lamprecht,2016-12-03 13:13:46+00:00,Regular dirs can be deployed as usual
673b0dcd96c7f964267c100ca3eb65ecffa019c4,Leo Lamprecht,2016-12-03 13:11:16+00:00,Leo Lamprecht,2016-12-03 13:11:16+00:00,"Don't deploy homedir, downloads or desktop

This closes #99"
d8da820fe7cde7348445e95dd0b4416394b8db61,Leo Lamprecht,2016-12-03 12:36:07+00:00,Leo Lamprecht,2016-12-03 12:36:07+00:00,y OR N
1ee41f3c2a1448d6b3a9b237e35c844ca6aa385b,Leo Lamprecht,2016-12-03 12:11:18+00:00,Leo Lamprecht,2016-12-03 12:11:18+00:00,Don't just break for older nodes
3f4d419f7858e5426aaa81cecea41557cf0f3471,Leo Lamprecht,2016-12-03 11:54:06+00:00,Leo Lamprecht,2016-12-03 11:54:06+00:00,"Force new deployment if -n or -p defined

This closes #136"
0db509d0b5413d80658a088f87da82da8c46389c,Leo Lamprecht,2016-12-03 11:48:44+00:00,Leo Lamprecht,2016-12-03 11:48:50+00:00,Missing greather-than-sign added
25fef39f1a2051c66b2c444cea23cd57f53eb3e5,Leo Lamprecht,2016-12-03 11:41:08+00:00,Leo Lamprecht,2016-12-03 11:41:08+00:00,"Ability to set name

This closes #150"
9ca1a486bd3a1b2d1dc5c3914bfc19ac6b24690e,Jarmo Isotalo,2016-12-02 23:32:38+00:00,GitHub,2016-12-02 23:32:38+00:00,Fix typo
96fc0c94970d039fd301ef43860bf88bb304320f,Jarmo Isotalo,2016-12-02 14:07:11+00:00,Jarmo Isotalo,2016-12-02 14:07:11+00:00,0.33.2
4de1c69b6a8e428b493306f129b4c9d1d5e9550b,Jarmo Isotalo,2016-12-02 13:27:13+00:00,Olli Vanhoja,2016-12-02 13:27:13+00:00,"Improve error handling when issuing cert fails (#154)

Fix `now certs ls` error when showing expiration date
Improve logging for when alias creation fails"
6b35479a2431dbcf9699e819e4f24885e907462c,Leo Lamprecht,2016-12-01 00:22:01+00:00,Leo Lamprecht,2016-12-01 00:22:01+00:00,0.33.1
115487382278a487907427fadeef5b474d248781,Leo Lamprecht,2016-12-01 00:21:57+00:00,Leo Lamprecht,2016-12-01 00:21:57+00:00,Show proper deploying message
578a02d9ad22c66729da7d16ac25ff16f4a763c6,Leo Lamprecht,2016-11-29 18:11:57+00:00,Leo Lamprecht,2016-11-29 18:11:57+00:00,0.33.0
cf414438b0c2a0c1a29b320ce7800158ef5f5186,Leo Lamprecht,2016-11-29 18:10:39+00:00,Leo Lamprecht,2016-11-29 18:11:34+00:00,Better title for contribution section
ccefece100204998ac3c3b806396d72fdb654f11,Leo Lamprecht,2016-11-29 18:09:27+00:00,Leo Lamprecht,2016-11-29 18:09:27+00:00,Removed duplicated fixture
6e943590523eb36f090c7c90f89ceb8c616a7ccd,Leo Lamprecht,2016-11-29 18:03:51+00:00,Leo Lamprecht,2016-11-29 18:03:51+00:00,Support for private Git repos
2b8fafa66f1bdb43c32d3e1fc49db213cef08225,Leo Lamprecht,2016-11-28 22:13:15+00:00,Leo Lamprecht,2016-11-28 22:13:15+00:00,0.32.0
8028b87531cdbef85dc588cf32ea90adc5e907b5,Leo Lamprecht,2016-11-28 22:13:11+00:00,Leo Lamprecht,2016-11-28 22:13:11+00:00,Tell users that Bitbucket is available
7ae4532ea7561eda48d7534ae473f23a8ad8bf46,Leo Lamprecht,2016-11-28 22:11:31+00:00,Leo Lamprecht,2016-11-28 22:11:31+00:00,Bitbucket's master branches are default
de0635e8b1eb4619461c1db478b64d51cb0e1844,Leo Lamprecht,2016-11-28 22:09:56+00:00,Leo Lamprecht,2016-11-28 22:09:56+00:00,Use a clean prefix when deploying
9bfa06f1632f02cdbbb675cb0eb1b53a9ea82947,Leo Lamprecht,2016-11-28 22:01:04+00:00,Leo Lamprecht,2016-11-28 22:01:04+00:00,Support for Bitbucket
fd0ff2fbf65a29d9198c32c38e9b0edc625f5518,Leo Lamprecht,2016-11-28 21:51:22+00:00,Leo Lamprecht,2016-11-28 21:51:28+00:00,Make code naming for multiple platforms
b04ab0470b9ac4b21cb6e9fbbdef58c5652d6d1a,Leo Lamprecht,2016-11-28 21:47:08+00:00,Leo Lamprecht,2016-11-28 21:47:08+00:00,Show cooler messages when deploying from other platforms
77412000ca6c5ab8ef69a72b065f5278a254150e,Leo Lamprecht,2016-11-28 21:39:27+00:00,Leo Lamprecht,2016-11-28 21:39:27+00:00,Accept GitLab URLs
a63924ff850ca18b2e58a333ae2d2892e8b62379,Leo Lamprecht,2016-11-28 16:27:07+00:00,Leo Lamprecht,2016-11-28 16:27:07+00:00,0.31.0
124d3088638abe9ef913379f0b5147a878769cf3,Leo Lamprecht,2016-11-28 16:21:36+00:00,Leo Lamprecht,2016-11-28 16:21:36+00:00,Merged GitHub support
b73ff097030e6c7b66b599e50c3a8c287a1bc20d,Greenkeeper,2016-11-28 10:44:48+00:00,Leo Lamprecht,2016-11-28 10:44:48+00:00,chore(package): update socket.io-client to version 1.7.1 (#145)
4a5de7321a04902b39de443faefcbf6295c492c4,Leo Lamprecht,2016-11-28 10:36:03+00:00,Leo Lamprecht,2016-11-28 10:36:03+00:00,Much stricter repo URL checking
27b860d6fe729aa1eae3a2e61c0fb488a6bbd4c9,Leo Lamprecht,2016-11-28 10:12:25+00:00,Leo Lamprecht,2016-11-28 10:13:07+00:00,Only show examples related to `now deploy`
5d5a59d1b1700a7b736fa6527a7ba2d60055ff9f,Leo Lamprecht,2016-11-28 10:04:41+00:00,Leo Lamprecht,2016-11-28 10:04:41+00:00,Make important info bold when error occurs
c9c32664bb8fc351ca637c23b47694f367829f84,Leo Lamprecht,2016-11-28 09:59:30+00:00,Leo Lamprecht,2016-11-28 09:59:30+00:00,Don't indicate git ref if master branch
0ea689c27aecf322664e0a0a852c382c64b3bd8d,Leo Lamprecht,2016-11-28 09:56:54+00:00,Leo Lamprecht,2016-11-28 09:56:54+00:00,Shorten git reference if commit
5fb53762eb15b3936467b12055efb70ead606bdc,Leo Lamprecht,2016-11-28 09:52:31+00:00,Leo Lamprecht,2016-11-28 09:52:31+00:00,Show the git reference when deploying
04d58f25587e074cd9e3a148902edd459d9e2d71,Leo Lamprecht,2016-11-28 09:43:54+00:00,Leo Lamprecht,2016-11-28 09:43:54+00:00,Throw error if URL is not valid
8075ffae4e2cc40a584ec8afe7dcc113f4188160,Leo Lamprecht,2016-11-27 21:26:26+00:00,Leo Lamprecht,2016-11-27 21:26:26+00:00,Show good looking messages when deploying Git URL
be9e61dfebede015b50d5652b2fabdb3dfec47a5,Leo Lamprecht,2016-11-27 21:17:22+00:00,Leo Lamprecht,2016-11-27 21:17:22+00:00,Support GitLab as well
9d7746f9ed51d5a1407c3fc133bd876553b1849d,Leo Lamprecht,2016-11-27 21:14:56+00:00,Leo Lamprecht,2016-11-27 21:14:56+00:00,Support for deploying GitHub URLs
3e43225204f369ecd51ac5c825194fe5a5ed0efa,Greenkeeper,2016-11-27 08:36:02+00:00,Leo Lamprecht,2016-11-27 08:36:02+00:00,chore(package): update socket.io-client to version 1.7.0 (#144)
5d1cce8c1c070909d0ad30e3c08c4a4807f1a71a,Leo Lamprecht,2016-11-26 16:53:43+00:00,Leo Lamprecht,2016-11-26 16:53:43+00:00,Respect git ref in error message
09670c986ec05ca54c4b14f212f0736367231846,Leo Lamprecht,2016-11-26 16:44:59+00:00,Leo Lamprecht,2016-11-26 16:44:59+00:00,Support for git references
3e7634159ed444f2813f926b785fff24f66dc948,Leo Lamprecht,2016-11-26 16:24:59+00:00,Leo Lamprecht,2016-11-26 16:24:59+00:00,Only show message if GH search takes long
fd0e39da0ecb3598658aea27fdb09a295373b93d,Leo Lamprecht,2016-11-26 16:18:48+00:00,Leo Lamprecht,2016-11-26 16:18:48+00:00,Only do one network roundtrip to GitHub
d51a6024c74ead46f093d7450dbe647c995fd529,Leo Lamprecht,2016-11-26 16:05:50+00:00,Leo Lamprecht,2016-11-26 16:05:50+00:00,"Swallow errors, just check if falsy"
bb74c71896f20ab3d2cb0900a105a7d2b11d28f7,Leo Lamprecht,2016-11-26 11:38:17+00:00,Leo Lamprecht,2016-11-26 11:38:17+00:00,Check if path is a repo path via regex
c92d4dfb37ba49791b17cd64645abec68d1b58f5,Leo Lamprecht,2016-11-26 11:28:32+00:00,Leo Lamprecht,2016-11-26 11:28:32+00:00,Clean up tmp dir for repo in a better way
5e5545789fbfd2520fa682318d081f387f67fdda,Leo Lamprecht,2016-11-26 11:19:49+00:00,Leo Lamprecht,2016-11-26 11:19:49+00:00,Handle potential error when converting res to JSON
50db54fd83129726f47c0e6362936f00b9ee5bb1,Cody Zuschlag,2016-11-26 11:12:26+00:00,Leo Lamprecht,2016-11-26 11:12:26+00:00,"pass flags to subcommands (#98)

* rework args parsing

* test args parsing"
fd24ea0c6a426b5b65eaf2c23f2ef3b1e6f97b4f,Leo Lamprecht,2016-11-25 16:50:32+00:00,Leo Lamprecht,2016-11-25 16:50:32+00:00,Fixed tests
81a1b8946b9e22ce77a865cd4adca9b20f8ef140,Leo Lamprecht,2016-11-25 15:25:38+00:00,Leo Lamprecht,2016-11-25 15:25:38+00:00,Install it globally
b9f9e71b9fc76120d2a95e3d4f4783e850a67fc8,Leo Lamprecht,2016-11-25 15:15:40+00:00,Leo Lamprecht,2016-11-25 15:15:40+00:00,Neat loading animation for looking on GitHub
fe6bd9b1f267cf80c44a01fad42b4b0abcf2cb3b,Leo Lamprecht,2016-11-25 15:10:10+00:00,Leo Lamprecht,2016-11-25 15:10:10+00:00,Forgot to load fs-promise
43d0b5693af778731bf2b00a82b5bf01e9e645dd,Leo Lamprecht,2016-11-25 14:50:15+00:00,Leo Lamprecht,2016-11-25 14:50:15+00:00,Remove tmp dir for repo after deployment went ok
e16a6eaa30e5cb72327e6343586b0629e5f15396,Leo Lamprecht,2016-11-25 14:31:18+00:00,Leo Lamprecht,2016-11-25 14:31:18+00:00,Tell user that we're looking on GitHub
6a1837c4af7b9d266043e4d0f513ec52004f73fe,Leo Lamprecht,2016-11-25 14:28:08+00:00,Leo Lamprecht,2016-11-25 14:28:08+00:00,Make users able to deploy GitHub repos
04e50b24e49a9d573ad7ff431268ac735a31d9b4,Leo Lamprecht,2016-11-25 14:13:17+00:00,Leo Lamprecht,2016-11-25 14:13:17+00:00,Basic implementation for GitHub deployments
2aa9da584a49e3e100c0dcf05a2f0450b0f7c114,Leo Lamprecht,2016-11-24 18:53:00+00:00,Leo Lamprecht,2016-11-24 18:53:00+00:00,Shorter sentence for FAQ link
357c3f2e4304eacd8a64a2f7dc0c9c7458cd6e4f,Leo Lamprecht,2016-11-24 18:52:06+00:00,Leo Lamprecht,2016-11-24 18:52:06+00:00,No need for package.json or Dockerfile
c9e53761d32e98f034083681a8434b568c840cb1,Leo Lamprecht,2016-11-24 17:54:01+00:00,Leo Lamprecht,2016-11-24 17:54:01+00:00,0.30.0
5a6d8481d648d4848e70405837128654ff22cb3d,Leo Lamprecht,2016-11-24 17:20:42+00:00,Leo Lamprecht,2016-11-24 17:20:42+00:00,Domain should not be part of sentence
2109f12954ab2d232f9420b8321343edf477f9b9,Leo Lamprecht,2016-11-24 17:16:00+00:00,Leo Lamprecht,2016-11-24 17:16:00+00:00,More accurate help for DNS cmd
ca09ec1baa4b92db74ebcee7275060d02863f056,Olli Vanhoja,2016-11-24 17:12:22+00:00,Leo Lamprecht,2016-11-24 17:12:22+00:00,DNS Management added
a8f93a167401fdd9799ded21ffa7d52436eb0cd1,Jarmo Isotalo,2016-11-23 21:33:50+00:00,Jarmo Isotalo,2016-11-23 21:33:50+00:00,Release 0.29.1
1fb629da632e46d9fb172a4488732a25fae23659,Jarmo Isotalo,2016-11-23 21:23:38+00:00,Guillermo Rauch,2016-11-23 21:23:38+00:00,Fix regression where setting a single env variable with `-e` failed (#141)
628f41db88e8b9ade58cddf8359a37137a3b673a,Leo Lamprecht,2016-11-23 20:27:48+00:00,Leo Lamprecht,2016-11-23 20:27:48+00:00,0.29.0
96d93820c6d1fd4cb95a4561943f0c2963e1fdef,Leo Lamprecht,2016-11-23 16:17:31+00:00,Leo Lamprecht,2016-11-23 16:17:31+00:00,Added correct path for fixtures
026e2cdf7b87869d5107ec75cbf1e91c379cf42f,Leo Lamprecht,2016-11-23 11:51:39+00:00,Leo Lamprecht,2016-11-23 11:51:39+00:00,Bumped dependencies
da3278f0f956942f17a5c70309a510de94b312c0,Greenkeeper,2016-11-22 20:09:24+00:00,Leo Lamprecht,2016-11-22 20:09:24+00:00,chore(package): update graceful-fs to version 4.1.11 (#140)
ec76f6b7068574f9d6c5ebae24b38b74853472a4,Eric Ferraiuolo,2016-11-21 07:54:34+00:00,Leo Lamprecht,2016-11-21 07:54:34+00:00,"Add `now.env` in package.json as env source (#119)

This adds package.json as new source for environment variables, which
are merged with `-e` CLI arguments (CLI args take precedence).

With the ability to specify environment variables in package.json,
developers don't need to remember which `-e` arguments to add, and
can simply run `now`.

```json
""now"": {
  ""env"": {
    ""foo"": ""bar""
  }
}
```

The above is the same as running:
```
now -e foo=bar
```

Fixes #116"
dec416255f920759bf592e639d571874bec00c63,Benjamn Eidelman,2016-11-18 11:36:31+00:00,Leo Lamprecht,2016-11-18 11:36:31+00:00,fixes #66 - removing minimatch dependency (#108)
89940c1362547e38294571b4de07919b76e65652,Olli Vanhoja,2016-11-18 11:35:58+00:00,Leo Lamprecht,2016-11-18 11:35:58+00:00,"Parse glob patterns and ignore special files (#130)

* Revert ""Ignore special files on deploy (#115)""

This reverts commit 1de3b40fc438011ccfd4e92e56e6bdc51c9b4c7a.
Fixes #127

* Parse glob patterns and ignore special files

Currently glob patterns are not parsed when selecting files to be
uploaded.

Fixes #127
Fixes #112

* Include dot files in matches

* Fix resolving of the glob promise array"
48fea47e11283313433e98cbed6f3e5e5e7366dc,Igor Klopov,2016-11-18 11:35:11+00:00,Leo Lamprecht,2016-11-18 11:35:11+00:00,pkg 3.0.0-beta.21 (#135)
f7bd36ec79de73294de7b21a735144b1878032cb,Leo Lamprecht,2016-11-18 11:00:30+00:00,GitHub,2016-11-18 11:00:30+00:00,Removed logo until delta works everywhere
e151ea3c637deff543b7c6193e5f08dbdf7d7629,Leo Lamprecht,2016-11-18 10:58:38+00:00,GitHub,2016-11-18 10:58:38+00:00,Delta added
5ce0fa9d996a139d3d7359db6c5e57ee238b93bd,Olli Vanhoja,2016-11-15 11:31:52+00:00,Jarmo Isotalo,2016-11-15 11:31:52+00:00,Fix linter errors (#131)
2f25c2c589c6b243f51c41227180a4a3d4e26aa7,Tony Kovanen,2016-11-09 18:49:04+00:00,Tony Kovanen,2016-11-09 18:49:04+00:00,Release 0.28.1
107d5b58588105a2d8a00c724ca82c0a70d84c31,Tony Kovanen,2016-11-09 18:43:01+00:00,Tony Kovanen,2016-11-09 18:43:01+00:00,Add verification code if provided upon login
1de3b40fc438011ccfd4e92e56e6bdc51c9b4c7a,Olli Vanhoja,2016-11-01 18:07:12+00:00,Tony Kovanen,2016-11-01 18:07:12+00:00,"Ignore special files on deploy (#115)

Fixes #112"
129372d1618d0b14cdb77c2f279e480f3920559d,Olli Vanhoja,2016-10-31 22:07:09+00:00,Tony Kovanen,2016-10-31 22:07:09+00:00,"Certs improvements (#114)

* Exit cleanly if a cert entry is not found with getCertIdCn()

* Support creating a new cert entry with user-provide certificate files"
a935dd5beda3f0f2edc19c9e586a38258d2dae72,Guillermo Rauch,2016-10-29 11:11:25+00:00,Guillermo Rauch,2016-10-29 11:11:25+00:00,Release 0.28.0
53f1ffab404855c6f9e697042a2cf4fbc5513b8d,Matheus Fernandes,2016-10-29 11:01:00+00:00,Guillermo Rauch,2016-10-29 11:01:00+00:00,Fix code style :nail_care: (#107)
8c622695679ed427a2b18683ff3e24c57ce5e97d,Olli Vanhoja,2016-10-29 10:59:20+00:00,Guillermo Rauch,2016-10-29 10:59:20+00:00,Fix DNS verification on 'now alias' (#106)
6d83be5f25507701fec8f345af9051d194284e69,Olli Vanhoja,2016-10-28 21:50:52+00:00,Guillermo Rauch,2016-10-28 21:50:52+00:00,"Now deploy env fixes (#105)

* Fix key and value checks

- key can't be empty string nor undefined or null
- value is always undefined if it's not set

* Fix crash if env key and value are missing when using -e"
b1e4e43e81773a10eea9e314da595d2637854355,Safia Abdalla,2016-10-28 21:50:18+00:00,Guillermo Rauch,2016-10-28 21:50:18+00:00,Use chalk.gray styling for errors (#104)
f31d1f0804f5583a5cc3b4597adbb1e200447860,Olli Vanhoja,2016-10-28 21:32:36+00:00,Tony Kovanen,2016-10-28 21:32:36+00:00,"Fixes to Dockerfile metadata parsing (#103)

- No need to check if pkg.name is null
- Properly default to basename if labels.name isn't set"
d0912401157fce54544cf3f9b8620659f1ac0335,Jarmo Isotalo,2016-10-28 21:31:56+00:00,Tony Kovanen,2016-10-28 21:31:56+00:00,"If `package.json` or `Dockerfile` is present, assume it's static (#100)

deployment"
b4fc6a9c2339dfa4d8b1d316ababc4bd50917a78,Jarmo Isotalo,2016-10-28 21:30:03+00:00,Tony Kovanen,2016-10-28 21:30:03+00:00,"Downgrade socket.io client (#101)

Untill these
https://github.com/socketio/engine.io-client/pull/514
https://github.com/socketio/engine.io-client/pull/513
make it to latest socket.io-client"
6841d2d1362c354be71cb24b92c741252a4dc9f0,Leo Lamprecht,2016-10-28 12:31:32+00:00,Olli Vanhoja,2016-10-28 13:53:12+00:00,0.27.0
ed7fdd980791f2e0ec918bc9dde5feb4e9f4eca5,Olli Vanhoja,2016-10-28 13:52:04+00:00,Olli Vanhoja,2016-10-28 13:52:04+00:00,"Revert ""chore(package): update ms to version 0.7.2 (#97)""

This reverts commit 12984463a38c8fa9854899242415e8f781fc3238.

0.7.2 breaks 'now cert ls'"
b563900702ff19d3cbb54a345cf04bda1a7c53e8,Leo Lamprecht,2016-10-28 11:39:56+00:00,Leo Lamprecht,2016-10-28 11:39:56+00:00,Adapt deployment name from package
6159263d8f7229c032fc49de4086557ac4de99d3,Leo Lamprecht,2016-10-28 11:34:40+00:00,Leo Lamprecht,2016-10-28 11:34:40+00:00,Set package.json on the fly
c5626178ed4bbafc9af72b9a762b7a868f30ecfe,Leo Lamprecht,2016-10-28 11:21:21+00:00,Leo Lamprecht,2016-10-28 11:21:21+00:00,Move files into content dir if static
243d068491826d1e6374e5375882b1f91578f4c6,Leo Lamprecht,2016-10-28 09:44:47+00:00,Leo Lamprecht,2016-10-28 09:44:47+00:00,Detect static projects
fb89e1e2bb567fd30bcf984ec1306e0d90f00050,Leo Lamprecht,2016-10-26 10:40:50+00:00,Leo Lamprecht,2016-10-26 10:40:50+00:00,Added enforcable deployment types
589d2fc72cd8b2646b1396d433f16f93455d22e1,Leo Lamprecht,2016-10-26 10:30:24+00:00,Leo Lamprecht,2016-10-26 10:30:24+00:00,Removed static command
8096a045a044db0d68d27fa1ec8bc596b5ec4b39,Greenkeeper,2016-10-25 09:47:01+00:00,Leo Lamprecht,2016-10-25 09:47:01+00:00,chore(package): update babel-register to version 6.18.0 (#96)
05ade18e8a3a36e13893babc97dd7c5ead639757,Greenkeeper,2016-10-25 09:34:16+00:00,Leo Lamprecht,2016-10-25 09:34:16+00:00,chore(package): update babel-preset-es2015 to version 6.18.0 (#95)
ce32dce2aa01f10da8573c3a8432b175e076d06b,Remy Sharp,2016-10-25 08:39:59+00:00,Leo Lamprecht,2016-10-25 08:39:59+00:00,"Support `now alias` reading `config.alias` (#93)

* feat: support `now alias` reading config.alias

Reads the last deployment and will automatically alias to the package.json's config.alias property

* chore: corrected typo on `console.time`

* fix: use `root/now.alias` over `root/config.alias`"
12984463a38c8fa9854899242415e8f781fc3238,Greenkeeper,2016-10-25 08:29:25+00:00,Leo Lamprecht,2016-10-25 08:29:25+00:00,chore(package): update ms to version 0.7.2 (#97)
530a9fb3576b87e1d9c2818a679d495b995e3d1f,Olli Vanhoja,2016-10-24 17:26:29+00:00,Tony Kovanen,2016-10-24 17:26:29+00:00,"Add a flag for skipping DNS verification (#94)

Some registrars requires that the DNS records are already setup
before delegating the domain to a nameserver."
e9a95e7253d1893cbbc3298cc9071dd5f259d1cb,Leo Lamprecht,2016-10-24 16:54:24+00:00,Leo Lamprecht,2016-10-24 16:54:24+00:00,Only check if opts.body exists and doesn't have a falsy value
881f382a43fdd07b49d302963cb17be2bdacbb89,Leo Lamprecht,2016-10-24 14:54:54+00:00,Leo Lamprecht,2016-10-24 14:54:54+00:00,Remove unnecessary statement
8b56a13221134ad03a0aa7d1abd54f536bad1228,Leo Lamprecht,2016-10-24 14:53:50+00:00,Leo Lamprecht,2016-10-24 14:53:50+00:00,Deploy cwd if no path defined
850cbf2e3a8ccf744191859533c10719da639c6f,Greenkeeper,2016-10-24 09:11:20+00:00,Leo Lamprecht,2016-10-24 09:11:20+00:00,chore(package): update socket.io-client to version 1.5.1 (#91)
e32bd818e4368b3bd93bd8ffcf53055fc3374951,Leo Lamprecht,2016-10-22 14:17:21+00:00,Leo Lamprecht,2016-10-22 14:17:21+00:00,Make binaries comply to linting rules
c67c0516996984f7eb0e4ce7dfdf48e03f7d1b65,Leo Lamprecht,2016-10-22 13:43:45+00:00,Leo Lamprecht,2016-10-22 13:43:45+00:00,The binaries are made of JavaScript
f0b0e23ce756c89f8c17ea011092bb5f82aaea64,Leo Lamprecht,2016-10-22 12:22:00+00:00,Leo Lamprecht,2016-10-22 12:22:00+00:00,Badge for XO
82d65a7577d0c74c9779d4340b2dbc62ae731a48,Leo Lamprecht,2016-10-22 12:21:17+00:00,Leo Lamprecht,2016-10-22 12:21:17+00:00,Finished XO setup
3979d8472a1088fb7285504a4d26fc15e8c19ad8,Leo Lamprecht,2016-10-22 12:16:22+00:00,Leo Lamprecht,2016-10-22 12:16:22+00:00,Fixed even more XO issues
0fec0f6602142a2aad93046e2f143dea13497418,Leo Lamprecht,2016-10-22 10:55:04+00:00,Leo Lamprecht,2016-10-22 10:55:04+00:00,Move config properties to top
561dabf837a5799ac6f896740312a2e34a83560a,Leo Lamprecht,2016-10-22 10:54:38+00:00,Leo Lamprecht,2016-10-22 10:54:38+00:00,Switch to XO
076817309cdba203da75b1ee99121b28bc258a72,Leo Lamprecht,2016-10-22 10:32:53+00:00,Leo Lamprecht,2016-10-22 10:32:53+00:00,Group imports by kind
fb28ec4ba55ed80519bd5c6d5bbdbb274bba1e9b,Leo Lamprecht,2016-10-22 10:25:19+00:00,Leo Lamprecht,2016-10-22 10:25:19+00:00,Empty line after binary indicator
3c7898b760bc0b1b0e165d45b9bd1122be21b1f4,Leo Lamprecht,2016-10-22 10:23:05+00:00,Leo Lamprecht,2016-10-22 10:23:05+00:00,New line for each flag
f677786035009a9f49f0d5ae1da510afb478f542,Leo Lamprecht,2016-10-22 10:16:37+00:00,Leo Lamprecht,2016-10-22 10:16:37+00:00,Added static sub-command to usage information
eba64c615e0218c2974d99d73386b73b6ed2d21e,Leo Lamprecht,2016-10-22 10:13:14+00:00,Leo Lamprecht,2016-10-22 10:13:14+00:00,"It's now called 'static', not 'serve'"
cf39f7f032c4e7b7743c431ee0924167b0560783,Leo Lamprecht,2016-10-22 10:09:50+00:00,Leo Lamprecht,2016-10-22 10:09:50+00:00,Added core of static sub-command
79389c1a60b8781d73e78af3d9495bf09f54f02d,Leo Lamprecht,2016-10-22 09:56:28+00:00,Leo Lamprecht,2016-10-22 09:56:28+00:00,Put each command into its own line
66711afaebd94a44a51042183cbee8d67d4d2d66,Leo Lamprecht,2016-10-22 09:49:21+00:00,Leo Lamprecht,2016-10-22 09:49:21+00:00,Capitalize command descriptions
f0517369953b264213ed96f20d1c10719b2e5008,Leo Lamprecht,2016-10-20 11:48:07+00:00,Leo Lamprecht,2016-10-20 11:48:07+00:00,0.26.0
76e3afe88ea8221572dc5ace987bb84ac2405310,Nathan Rajlich,2016-10-18 00:17:47+00:00,Olli Vanhoja,2016-10-20 10:57:35+00:00,"remove: delete deployment by URL (#172)

So this now works:

```
now rm https://ffitest-hcznbannyc.now.sh
```

Fixes #87."
c2fa7e85657e6d0f6f691e5f1257c7693361884f,Nathan Rajlich,2016-10-17 23:51:39+00:00,Olli Vanhoja,2016-10-20 10:56:35+00:00,"document `secrets` and `certs` commands (#168)

* document `secrets` command in --help

* document `certs` command in --help"
3f7817242896b6c1b9d97e2358716bfa4707e47b,Nathan Rajlich,2016-10-17 23:49:31+00:00,Olli Vanhoja,2016-10-20 10:56:04+00:00,"only consider 1 result for the ""single"" verbage (#170)

English is hard 0 uses the ""multiple"" verbage. We want:

  0 domains
  1 domain
  2 domains
  3 domains
  etc."
139a44918e4125d9f5c97a9aed01310a56e749bd,Nathan Rajlich,2016-10-17 23:42:19+00:00,Olli Vanhoja,2016-10-20 10:55:35+00:00,"alias: better ""invalid arguments"" error messages (#169)"
aa66f07cd59d4242385b49c7452e84f020c8af5e,Nathan Rajlich,2016-10-17 22:08:14+00:00,Olli Vanhoja,2016-10-20 10:55:13+00:00,deploy: document --npm and --docker
65a7ee7158680b01b9f67fa43cf953c1515c8f1a,Jarmo Isotalo,2016-10-14 13:27:17+00:00,Olli Vanhoja,2016-10-20 10:53:33+00:00,Allow env value to contain '='
40000d7f3ca5ea0ea691f12600a4763bc5493263,Olli Vanhoja,2016-10-11 13:09:25+00:00,Olli Vanhoja,2016-10-20 10:52:44+00:00,now-certs: Fix typo on formatExpirationDate()
b98bc74f0b07c61b19610c7987d66f4711a1ccc1,Olli Vanhoja,2016-10-08 11:07:28+00:00,Olli Vanhoja,2016-10-20 10:51:18+00:00,Don't print the list if there is no entries
87c4b1fc165f0a1c6d848ac01f530012e69730b3,Olli Vanhoja,2016-10-08 10:55:22+00:00,Olli Vanhoja,2016-10-20 10:51:10+00:00,Add header to alias and secrets command
b6f135419df020916c3b56c877a4e331ea8a0637,Olli Vanhoja,2016-10-06 13:27:06+00:00,Olli Vanhoja,2016-10-20 10:50:56+00:00,Proper strlen function for strings containing ANSI escape codes
c75b9adcc0282b022f68e2f05d506672df77ca34,Olli Vanhoja,2016-10-05 19:31:02+00:00,Olli Vanhoja,2016-10-20 10:50:48+00:00,Formatting for cert expiration time
298591af81f170f775148bf0254e3757fc1e66de,Olli Vanhoja,2016-10-05 17:15:49+00:00,Olli Vanhoja,2016-10-20 10:50:38+00:00,now-alias: Renew expired cert automatically
4338e776e3cfc2ef26872b0752a5e695fa1e90c6,Olli Vanhoja,2016-10-05 00:35:47+00:00,Olli Vanhoja,2016-10-20 10:50:29+00:00,now-certs: Show expiration date for certs
0355c57e6d2a24117b4ce91e9dacba271ae68158,Olli Vanhoja,2016-10-04 19:27:32+00:00,Olli Vanhoja,2016-10-20 10:50:20+00:00,domains: chalk.dim() for the headers
d743f483cdec0fdcd13081462f8fdaadab554065,Olli Vanhoja,2016-09-23 08:19:01+00:00,Olli Vanhoja,2016-10-20 10:50:11+00:00,Show domain entry type in `now domain ls`
4db4353d5d43674856f1ca739b825757d7ba3158,Olli Vanhoja,2016-09-26 16:48:52+00:00,Olli Vanhoja,2016-10-20 10:49:54+00:00,"now certs management

* Move cert handling to index.js
* Add 'now certs' commands for certificate management"
db10a26c84f929e90afeb8e2d7a8399264c87109,Olli Vanhoja,2016-09-23 08:45:42+00:00,Olli Vanhoja,2016-10-20 10:49:45+00:00,Fix table alignments in listings
030687ec8558eeb9cb06b7ae196852ac63892909,Greenkeeper,2016-10-18 17:43:33+00:00,Leo Lamprecht,2016-10-18 17:43:33+00:00,chore(package): update eslint-plugin-promise to version 3.2.1 (#77)
20f88fbf326eabebf13beef9d7ce9a1214f54a79,Greenkeeper,2016-10-14 22:31:20+00:00,Leo Lamprecht,2016-10-14 22:31:20+00:00,chore(package): update eslint to version 3.8.0 (#73)
2479935b8f71330ec226363dd8b2f9b193535941,Greenkeeper,2016-10-12 20:46:19+00:00,Leo Lamprecht,2016-10-12 20:46:19+00:00,chore(package): update spdy to version 3.4.4 (#71)
d33e0bc4eb0e73ef90a04ffc8f0ff2b465288832,Greenkeeper,2016-10-11 14:49:41+00:00,Leo Lamprecht,2016-10-11 14:49:41+00:00,chore(package): update ignore to version 3.2.0 (#70)
f37710e5cfafa08e44a80e804d61e5291933fd56,Leo Lamprecht,2016-10-10 15:18:28+00:00,Leo Lamprecht,2016-10-10 15:18:28+00:00,Save exact version of each dependency
c78eb926692796d956d738628fe5a8d1b667764b,Leo Lamprecht,2016-10-10 15:15:15+00:00,Leo Lamprecht,2016-10-10 15:15:15+00:00,Pin dependencies
306a696eab2b3e1b0db37ce3372f6104b1602860,Greenkeeper,2016-10-08 10:19:21+00:00,Leo Lamprecht,2016-10-08 10:19:21+00:00,chore(package): update eslint-plugin-promise to version 3.0.0 (#67)
4dd2cfe51f333c59467f244dd188138bb27fa003,Igor Klopov,2016-10-06 11:17:40+00:00,Leo Lamprecht,2016-10-06 11:17:40+00:00,package.json pkgConfig -> pkg (#64)
607dd03fd81fc113272d99faa7f56b785612bfcb,Leo Lamprecht,2016-10-04 20:56:11+00:00,Leo Lamprecht,2016-10-04 20:56:11+00:00,0.25.2
2c762b4e231e147dd908f1a445c409693d2670f3,Leo Lamprecht,2016-10-04 20:52:12+00:00,Leo Lamprecht,2016-10-04 20:52:12+00:00,Upgrade pkg
df165aaa63de41582d47e46088d9cbc294280660,Leo Lamprecht,2016-10-04 09:26:50+00:00,Leo Lamprecht,2016-10-04 09:26:50+00:00,License field added
cd03fea493ba1df14bc58f0b2d881440e97d3932,Leo Lamprecht,2016-10-04 09:26:37+00:00,Leo Lamprecht,2016-10-04 09:26:37+00:00,Upgrade dependencies
81172f43443c1dcdd439b3ad02b7367ba66eee8e,Leo Lamprecht,2016-10-03 00:28:14+00:00,GitHub,2016-10-03 00:28:14+00:00,License added
a709864864ec945149cda8860bd827773b7462d3,Matheus Fernandes,2016-10-02 23:29:53+00:00,Leo Lamprecht,2016-10-02 23:29:53+00:00,Fix: encode accented chars in filenames (#61)
4debd4b3e77932e33f11fb19d8782314532bdb83,Matheus Fernandes,2016-10-01 05:56:48+00:00,Leo Lamprecht,2016-10-01 05:56:48+00:00,Show lowercased secret name after `now secret add` (#57)
569ac6bb1ace21da020ef5159e4a349d7c7168e1,Olli Vanhoja,2016-09-27 20:14:49+00:00,GitHub,2016-09-27 20:14:49+00:00,"Merge pull request #48 from dotcypress/patch-1

Fix `now alias ls` inconsistency"
cc157180a8e2ec3121f6e9cedadea3ff9960b18c,Vitaly Domnikov,2016-09-27 20:04:47+00:00,GitHub,2016-09-27 20:04:47+00:00,"Fix `now alias ls` inconsistency

Fix `now alias ls` inconsistency."
4c885942b7b2ece52e07232431363c4a2b6f74ec,Leo Lamprecht,2016-09-26 21:45:51+00:00,GitHub,2016-09-26 21:45:51+00:00,"Merge pull request #44 from zeit/greenkeeper-graceful-fs-4.1.7

Update graceful-fs to version 4.1.7 "
6ea8ce3a1648dab302d5eacc5b3386975c38eaf6,Leo Lamprecht,2016-09-26 21:45:33+00:00,GitHub,2016-09-26 21:45:33+00:00,Merge branch 'master' into greenkeeper-graceful-fs-4.1.7
9222b7ec25d8a30dbfdc8f3a4ef000414d0385d1,Leo Lamprecht,2016-09-26 21:45:24+00:00,GitHub,2016-09-26 21:45:24+00:00,"Merge pull request #43 from zeit/greenkeeper-eslint-config-standard-6.1.0

Update eslint-config-standard to version 6.1.0 "
5fdda1257034abe8c1acfe5a3c8858bdab99eb8a,greenkeeperio-bot,2016-09-26 21:42:49+00:00,greenkeeperio-bot,2016-09-26 21:42:49+00:00,chore(package): update graceful-fs to version 4.1.7
eb05d305b5420aaa6c249b6acd6053259cdf1efe,greenkeeperio-bot,2016-09-26 21:41:36+00:00,greenkeeperio-bot,2016-09-26 21:41:36+00:00,chore(package): update eslint-config-standard to version 6.1.0
18e4d447729c077196130e18e721133c6d57593b,Leo Lamprecht,2016-09-26 07:56:14+00:00,GitHub,2016-09-26 07:56:14+00:00,"Merge pull request #42 from zeit/greenkeeper-node-fetch-1.6.3

Update node-fetch to version 1.6.3 "
eeae89e4b90b4322879cff0a0d0a764281700c2e,greenkeeperio-bot,2016-09-26 06:25:00+00:00,greenkeeperio-bot,2016-09-26 06:25:00+00:00,chore(package): update node-fetch to version 1.6.3
4a7854c535630beacb9d7dbda16ab6a02faaecf9,Leo Lamprecht,2016-09-25 13:27:53+00:00,GitHub,2016-09-25 13:27:53+00:00,"Merge pull request #41 from zeit/greenkeeper-cross-spawn-4.0.2

Update cross-spawn to version 4.0.2 "
432c5662306e4d41baefb5e5e10480af50dac423,greenkeeperio-bot,2016-09-25 11:47:28+00:00,greenkeeperio-bot,2016-09-25 11:47:28+00:00,chore(package): update cross-spawn to version 4.0.2
83e814448f37ee358bf47c870884d1740e0edb09,Leo Lamprecht,2016-09-25 09:49:05+00:00,GitHub,2016-09-25 09:49:05+00:00,"Merge pull request #39 from zeit/greenkeeper-eslint-3.6.0

Update eslint to version 3.6.0 "
1bdf2cfbd85f7a6677dad4c9076449c3384b8819,Leo Lamprecht,2016-09-24 10:18:59+00:00,GitHub,2016-09-24 10:18:59+00:00,Merge branch 'master' into greenkeeper-eslint-3.6.0
c64350bf72d942a421077c4fa0c4f623ddafb088,Leo Lamprecht,2016-09-24 10:18:50+00:00,GitHub,2016-09-24 10:18:50+00:00,"Merge pull request #40 from zeit/greenkeeper-node-fetch-1.6.2

Update node-fetch to version 1.6.2 "
09347bfd36a08aa7c5fcd919a2bac1ac4f4cb6eb,greenkeeperio-bot,2016-09-24 09:58:27+00:00,greenkeeperio-bot,2016-09-24 09:58:27+00:00,chore(package): update node-fetch to version 1.6.2
57a4b79731a87c0e6f04359c879d8dda307d33af,greenkeeperio-bot,2016-09-23 22:06:52+00:00,greenkeeperio-bot,2016-09-23 22:06:52+00:00,chore(package): update eslint to version 3.6.0
454b5f049f3eb8b6e804733c9149efd4bb71c23f,Leo Lamprecht,2016-09-23 21:57:08+00:00,GitHub,2016-09-23 21:57:08+00:00,"Merge pull request #38 from kevmannn/master

Fix `now ls` output in case of 0 deployments"
deea02a1bfe114c9bce2a6ea94337ff99c27e753,Kevin Donahue,2016-09-23 21:38:19+00:00,Kevin Donahue,2016-09-23 21:38:19+00:00,Fix `now ls` output in case of 0 deployments
db769605be5936025913f2d8a18baea144098ada,Leo Lamprecht,2016-09-22 14:54:28+00:00,Leo Lamprecht,2016-09-22 14:54:36+00:00,Use JSON for travis config
9802ec5bb3a27dc0968a719e4deb5d7bbb98bb99,Leo Lamprecht,2016-09-22 11:55:41+00:00,GitHub,2016-09-22 11:55:41+00:00,"Merge pull request #37 from zeit/greenkeeper-spdy-3.4.2

Update spdy to version 3.4.2 "
87efb7683b7642316e885600b8878b1322e02ab4,greenkeeperio-bot,2016-09-22 11:54:17+00:00,greenkeeperio-bot,2016-09-22 11:54:17+00:00,chore(package): update spdy to version 3.4.2
8167517961962c07338490f71e45c09b4996eb2a,Leo Lamprecht,2016-09-22 11:14:15+00:00,GitHub,2016-09-22 11:14:15+00:00,"Merge pull request #36 from zeit/greenkeeper-update-all

Update all dependencies "
ea7d37840448e84c1fe5b4ed31f4188026edb47c,greenkeeperio-bot,2016-09-22 11:10:57+00:00,greenkeeperio-bot,2016-09-22 11:10:57+00:00,chore(package): update dependencies
1d92df0e1d3011f30073537b109bb489007d2a39,Tony Kovanen,2016-09-20 16:50:10+00:00,GitHub,2016-09-20 16:50:10+00:00,"Merge pull request #35 from makeusabrew/master

Import login method to now-secrets"
9c9682354c8be27b70fc914df157a7e388410f1c,Nick Payne,2016-09-20 16:40:26+00:00,Nick Payne,2016-09-20 16:40:26+00:00,Import login method to now-secrets
528b6fdc0f8008162fa2b8eeb15a88113f82e6f0,Leo Lamprecht,2016-09-17 22:14:35+00:00,GitHub,2016-09-17 22:14:35+00:00,FAQ added
6f1e84636b93f36530e6b15779de1c5413fc01b9,Leo Lamprecht,2016-09-14 10:24:06+00:00,GitHub,2016-09-14 10:24:06+00:00,Badges for build and slack
5e2d50fdd152e2d4f486b0cb9f8e5c28439ce83c,Leo Lamprecht,2016-09-14 09:39:18+00:00,Leo Lamprecht,2016-09-14 09:39:18+00:00,0.25.1
13642efae57dab8d4db451e6c50dfb9d39848f85,Leo Lamprecht,2016-09-14 09:39:14+00:00,Leo Lamprecht,2016-09-14 09:39:14+00:00,Make description match the one on the site
cbf4678973c688bddd3ea64a2044aacb7b3a8072,Leo Lamprecht,2016-09-13 06:31:57+00:00,GitHub,2016-09-13 06:31:57+00:00,"Merge pull request #28 from timneutkens/hotfix/repository-field

Added repository to package.json"
338a50489b190d3b5666c16ff97c36ae32b9c7e6,tim neutkens,2016-09-13 06:11:05+00:00,tim neutkens,2016-09-13 06:11:05+00:00,Added repository to package.json
d78059d81de56d2cfbe93d99ffd554c05478ec46,Leo Lamprecht,2016-09-11 09:11:28+00:00,GitHub,2016-09-11 09:11:28+00:00,How to test
60258387286075f9ddc034de3315a88b4e3d0a4a,Leo Lamprecht,2016-09-11 09:10:00+00:00,GitHub,2016-09-11 09:10:00+00:00,Consistant style for usage
b057e7f3f2a2a9fb333f4f7f7632745c512e243f,Leo Lamprecht,2016-09-11 09:08:50+00:00,GitHub,2016-09-11 09:08:50+00:00,How to contribute
c616652bd8b7cb503c72cdc13cfd6e66d93a7da6,Leo Lamprecht,2016-09-11 08:44:28+00:00,GitHub,2016-09-11 08:44:28+00:00,"Merge pull request #26 from Rowno/secrets-numeric-value

secrets: make sure the value is a string"
1f97633b0f477410a41e47f41e690b0f045273d5,Roland Warmerdam,2016-09-10 21:58:48+00:00,Roland Warmerdam,2016-09-10 21:58:48+00:00,"secrets: make sure the value is a string

Fixes #21"
d4cfb7c30b3553a01d13993cf0d22e718ef24d0b,Leo Lamprecht,2016-09-10 18:12:55+00:00,Leo Lamprecht,2016-09-10 18:12:55+00:00,Only clone latest commit and don't use sudo
68d46e4b07f8868ec52c38b0d36ec9dc63b5906a,Leo Lamprecht,2016-09-10 18:12:16+00:00,Leo Lamprecht,2016-09-10 18:12:16+00:00,Indicate CLI
d7694d3a986ae0a03198967e3d1793e763e70f30,Leo Lamprecht,2016-09-10 18:12:05+00:00,Leo Lamprecht,2016-09-10 18:12:05+00:00,Ignore more things
44eced3b8c1547614eb57421d7ef62ad1448c2eb,Leo Lamprecht,2016-09-10 18:10:12+00:00,GitHub,2016-09-10 18:10:12+00:00,Delete HISTORY.md
545f644a4c9dbc519757e153469be5c317542523,Guillermo Rauch,2016-09-09 21:36:50+00:00,Guillermo Rauch,2016-09-09 21:36:50+00:00,Release 0.25.0
dc5a7966776545ef984c2b1fbcfb620d4e9db6de,Guillermo Rauch,2016-09-09 21:35:19+00:00,Guillermo Rauch,2016-09-09 21:36:43+00:00,improve error message for not finding a manifest file
d3c04a577443a8ec9c399cb12e0ffe208ccb2078,Guillermo Rauch,2016-09-09 21:29:12+00:00,Guillermo Rauch,2016-09-09 21:29:12+00:00,package: bump version
a399d6d0bf84142287e4c756149f3af2a4db10ff,Guillermo Rauch,2016-09-09 21:27:07+00:00,Guillermo Rauch,2016-09-09 21:27:07+00:00,Release 0.24.1
57d61974725f65f4e3d905b0d7ec0662c4a15749,Guillermo Rauch,2016-09-09 21:26:54+00:00,Guillermo Rauch,2016-09-09 21:26:54+00:00,add `ignore` dep
d994bdb225e2f1e5f2a1555b024290b74c66bea0,Guillermo Rauch,2016-09-09 20:57:48+00:00,Guillermo Rauch,2016-09-09 20:57:48+00:00,Release 0.24.0
641eab5ed3953b103a3af54878746ac434f13adc,Guillermo Rauch,2016-09-09 01:51:05+00:00,Guillermo Rauch,2016-09-09 01:51:05+00:00,simpler readme
eec0e8ebd92ff5b28e2db10b2886778a7678bd8b,Nathan Rajlich,2016-09-08 20:39:19+00:00,Guillermo Rauch,2016-09-08 20:39:19+00:00,"now rm: remove by app name (#150)

* remove: implement remove by app name

Now you can do `now rm app-name` and remove all
deployments under that app name.

Syntax parallels `now ls app-name`.

* remove: only confirm deletion once

Also now supports arbitrary number of IDs/names to remove,
so that i.e. `xargs` could be used:

```
$ echo TYA4oUPKMloPXpWe3EDw5Dhs LtbfMjHFm92GnoSOVFHSps1E | xargs now rm
```"
5bf0cfe89720bf7f94c98fb502f1c4349d3e7e25,Guillermo Rauch,2016-09-08 19:38:19+00:00,GitHub,2016-09-08 19:38:19+00:00,"Fix ignore (#151)

* switch to better ignore module, improve debugging

* add regression test for prefix bug (#142)

* remove old lib"
00a29d2f3a4445ad8071f975c61b2ada7544e6ba,Leo Lamprecht,2016-09-07 08:45:20+00:00,GitHub,2016-09-07 08:45:20+00:00,"Merge pull request #148 from igorklopov/master

Bump to latest pkg with `--out-dir` and stable cli"
eb75cf45eb34dc3be0cf749071ab862b766d3962,Leo Lamprecht,2016-09-07 08:44:08+00:00,GitHub,2016-09-07 08:44:08+00:00,Improved description
612098e6b7f52ff75777d25a06e7188b4d0cc9a9,igorklopov,2016-09-06 19:23:57+00:00,igorklopov,2016-09-06 19:23:57+00:00,directory `out` dedicated to pkg output
91ce470af5126167fbe57db2a7326d1717564c5b,igorklopov,2016-09-06 19:18:00+00:00,igorklopov,2016-09-06 19:18:00+00:00,bump pkg to 3.0.0-beta.6
9414d8b0782357a5610201370ee87d800e62b29a,Igor Klopov,2016-09-06 17:34:17+00:00,Guillermo Rauch,2016-09-06 17:34:17+00:00,"Switch from `enclose` to `pkg` (#127)

* removed `enclose`, added `pkg`

* pinned `pkg`version

* bump pkg to beta.4"
2501399ca9be866318798abc9723da22e09bf3ff,Naoyuki Kanezawa,2016-09-06 03:11:21+00:00,GitHub,2016-09-06 03:11:21+00:00,"Merge pull request #147 from zeit/fix/spacing

Make indendation consistent"
fc8e4f8e2095d4dde897be0d223c524796d6261d,Guillermo Rauch,2016-09-06 03:09:52+00:00,Guillermo Rauch,2016-09-06 03:09:52+00:00,make indendation consistent
d99235ce920521a0bcb843da6da5e97ad6f6606d,Naoyuki Kanezawa,2016-09-06 03:08:34+00:00,GitHub,2016-09-06 03:08:34+00:00,"Merge pull request #146 from zeit/add/list-counts

Add totals to listings and fix plurals"
c4248cebaa12406f184c6d4779f14871c051e98c,Guillermo Rauch,2016-09-06 03:01:44+00:00,Guillermo Rauch,2016-09-06 03:01:44+00:00,add totals to listings and fix plurals
ab84fc4bd0c8e74b60223d81758306126dee3a10,Guillermo Rauch,2016-09-05 23:35:32+00:00,Guillermo Rauch,2016-09-05 23:35:32+00:00,Release 0.23.1
ecc112a6dd2ae5661097a766371bc36470db1ef9,Guillermo Rauch,2016-09-05 23:01:15+00:00,Guillermo Rauch,2016-09-05 23:01:15+00:00,workaround for node-spdy bug
603841f0b67f72009789ec7ae7872ed023eccf53,Guillermo Rauch,2016-09-05 19:51:00+00:00,Guillermo Rauch,2016-09-05 19:51:00+00:00,index: filter empty entries
114da38c2592ccef9ad221b48080acd3a8d30463,Guillermo Rauch,2016-09-05 19:45:56+00:00,Guillermo Rauch,2016-09-05 19:45:56+00:00,alias: improve error
2bc5d26fa7ce6b94ebfbc4037c71831cf191789c,Olli Vanhoja,2016-09-05 02:13:20+00:00,Guillermo Rauch,2016-09-05 02:13:20+00:00,"Fix whois-ns-fallback request once again (#143)

try-catch in getNameservers() doesn't work as expected because
a promise is returned succesfully before it's evaluation and
try-catch in the function won't catch if it fails later on."
a09cd39165a540e1732e0cd88ea586fca2130207,Guillermo Rauch,2016-09-02 16:41:08+00:00,Guillermo Rauch,2016-09-02 16:41:08+00:00,Release 0.23.0
ed8daff427a2b7cd4a5661a468ec28795ea997d8,Naoyuki Kanezawa,2016-09-02 16:26:23+00:00,GitHub,2016-09-02 16:26:23+00:00,"Merge pull request #134 from zeit/revert-132-fix/now-io-v2

Revert ""Use now-io API v2"""
152363bf2b430551604631da970b004f9a1b4478,Naoyuki Kanezawa,2016-09-02 16:23:24+00:00,GitHub,2016-09-02 16:23:24+00:00,"Revert ""Use now-io API v2"""
463ea607ffcf049c878783fc8ae6933956eb8ed3,Naoyuki Kanezawa,2016-09-02 15:58:21+00:00,Guillermo Rauch,2016-09-02 15:58:21+00:00,use now-io api v2 (#132)
69e23163f4f3b26b009e2f175a0659071e397e08,Guillermo Rauch,2016-09-02 00:15:47+00:00,Guillermo Rauch,2016-09-02 00:15:47+00:00,fix help
c1831689b98fc559e25deefef850afaefbf5c4ad,Leo Lamprecht,2016-09-01 15:21:01+00:00,GitHub,2016-09-01 15:21:01+00:00,"Merge pull request #133 from zeit/greenkeeper-babel-plugin-transform-runtime-6.15.0

Update babel-plugin-transform-runtime to version 6.15.0 "
6597b7321f43488844736df28c71a40bf4a94058,greenkeeperio-bot,2016-09-01 15:08:34+00:00,greenkeeperio-bot,2016-09-01 15:08:34+00:00,chore(package): update babel-plugin-transform-runtime to version 6.15.0
85fc7fc336a4f58c408f29a615d335b77ceb7af4,Naoyuki Kanezawa,2016-09-01 04:53:44+00:00,Guillermo Rauch,2016-09-01 04:53:44+00:00,fix the initial value of the env option (#131)
b02849fba848dfa01333dff476a82cf602637f08,Tony Kovanen,2016-08-31 12:53:13+00:00,GitHub,2016-08-31 12:53:13+00:00,"Merge pull request #129 from zeit/alias-fix

Add a missing await"
ea6f682ea40237b82dcd8977db047070238befb7,Olli Vanhoja,2016-08-31 12:49:02+00:00,Olli Vanhoja,2016-08-31 12:49:20+00:00,Add a missing await
fc4a936ce286e1f6265b5b858c269a7dae7302dc,Naoyuki Kanezawa,2016-08-31 07:06:38+00:00,GitHub,2016-08-31 07:06:38+00:00,"Merge pull request #128 from zeit/add/env-option

Better create error messages"
edf0834d7c96c403300aa601e615e10fd9bd27ba,Guillermo Rauch,2016-08-31 07:00:17+00:00,Guillermo Rauch,2016-08-31 07:00:17+00:00,Merge branch 'master' into add/env-option
d450d4584292aa4787703bba7ae0b781109f2acd,Guillermo Rauch,2016-08-31 06:59:17+00:00,Guillermo Rauch,2016-08-31 06:59:17+00:00,merge with master
bf685a0dde87cea43328682312cc34694a840f72,Guillermo Rauch,2016-08-31 06:57:34+00:00,Guillermo Rauch,2016-08-31 06:57:34+00:00,now-deploy: do not attempt to unescape non-string env values
b83dbfb6ae1df30c90953eba2341dcaaaabaa46e,Guillermo Rauch,2016-08-31 06:57:13+00:00,Guillermo Rauch,2016-08-31 06:57:13+00:00,index: drastically improve error handling / messages for `create`
a3fe6eda84ee6d244931f6f73d2c5a1543f36f84,Guillermo Rauch,2016-08-30 18:48:20+00:00,GitHub,2016-08-30 18:48:20+00:00,"Add -e (#126)

* implement `-e`

* index: pass along `env` to `/create`

* index: add `listSecrets` method

* secrets: fix api calls

* support for escaping"
cedf4a40bf2670c8bc6ad08fd2293e7ea86d0872,Guillermo Rauch,2016-08-30 07:10:20+00:00,Guillermo Rauch,2016-08-30 07:10:20+00:00,support for escaping
954be0b9394552c8163f094401caeb05eaf14dcc,Guillermo Rauch,2016-08-30 07:00:38+00:00,Guillermo Rauch,2016-08-30 07:00:38+00:00,secrets: fix api calls
08801432c69b432d14db5a1ca9ad62ef152eb335,Guillermo Rauch,2016-08-30 07:00:25+00:00,Guillermo Rauch,2016-08-30 07:00:25+00:00,index: add `listSecrets` method
efdd6b8d29f3c209e4c472939c3bdc23ab455f8b,Guillermo Rauch,2016-08-30 07:00:15+00:00,Guillermo Rauch,2016-08-30 07:00:15+00:00,index: pass along `env` to `/create`
72d2aba201453d5b0c339d521d79b83d43d7ef03,Guillermo Rauch,2016-08-30 07:00:02+00:00,Guillermo Rauch,2016-08-30 07:00:02+00:00,implement `-e`
b55c3138b0b15d8211b9c6f2e42d0e8561a61ccd,Nathan Rajlich,2016-08-28 21:20:19+00:00,Guillermo Rauch,2016-08-28 21:20:19+00:00,fix Docker CMD docs link (#124)
da8310ef3347e101a33417e2f6007a05064997d6,Nathan Rajlich,2016-08-28 21:20:08+00:00,Guillermo Rauch,2016-08-28 21:20:08+00:00,"Use ""cross-spawn"" instead of ""cross-spawn-async"" (#125)

Fixes the warning upon `npm install`.
""cross-spawn-async"" is now deprecated: https://git.io/v6hdS"
b1d61b914cbcb56c8c08cc2f95cb36e237d7a26b,Guillermo Rauch,2016-08-27 00:11:52+00:00,Guillermo Rauch,2016-08-27 00:11:52+00:00,Release 0.22.0
c93d93c9a617465b7ac54ad5d83bda412d0edd8f,Guillermo Rauch,2016-08-27 00:10:36+00:00,Guillermo Rauch,2016-08-27 00:11:11+00:00,hide secrets for now
4131b0eb166d29622ece92cd98cf39ebd2d9aec5,Leo Lamprecht,2016-08-26 19:28:07+00:00,GitHub,2016-08-26 19:28:07+00:00,"Merge pull request #123 from zeit/greenkeeper-eslint-3.4.0

Update eslint to version 3.4.0 "
638b5700b4ee42f464e85e0a9e318dc6dab60e03,Tony Kovanen,2016-08-26 18:17:59+00:00,GitHub,2016-08-26 18:17:59+00:00,"Merge pull request #103 from zeit/nowenv

Add an environment variable to change .now.json location"
027ca1cdd38c0adec7e115d1e44ff1b81a424549,greenkeeperio-bot,2016-08-26 18:04:39+00:00,greenkeeperio-bot,2016-08-26 18:04:39+00:00,chore(package): update eslint to version 3.4.0
c6f42c36e367e589b43ccf82d2bec964700f0cb3,Olli Vanhoja,2016-08-26 13:14:49+00:00,Olli Vanhoja,2016-08-26 13:46:51+00:00,"Add --token and --config options

--token=MYTOKEN
--config=/path/to/.now.json"
72e67224ae242bea18bba1b049727538734c7b93,Olli Vanhoja,2016-08-06 12:15:58+00:00,Olli Vanhoja,2016-08-26 13:46:51+00:00,"Add an environment variable to change .now.json location

For issue #99"
c4c97868215ea9fdc35685a59f9f3967fd21a2b8,Tony Kovanen,2016-08-26 11:31:21+00:00,GitHub,2016-08-26 11:31:21+00:00,"Merge pull request #122 from zeit/domain-api-rework

Always register the domain for the user before trying to use it"
75f1cef880924f755e7bd11e7ff2dd0ae6dfa772,Olli Vanhoja,2016-08-25 11:08:15+00:00,Olli Vanhoja,2016-08-26 11:28:43+00:00,Always register the domain for the user before trying to use it
f137ef04bd005e8a75576def1b86fc752a7d1f19,Tony Kovanen,2016-08-26 10:29:43+00:00,GitHub,2016-08-26 10:29:43+00:00,"Merge pull request #117 from zeit/dom-alias-rmwarm

Warn about removing bound aliases when removing a domain"
429cb48a70985c1e2bf30cfadaffb5df0dba0990,Leo Lamprecht,2016-08-25 12:19:34+00:00,GitHub,2016-08-25 12:19:34+00:00,"Merge pull request #120 from zeit/greenkeeper-babel-register-6.14.0

Update babel-register to version 6.14.0 "
0e37b949d6a50d6a898f1e1ff239d0a9334d8e9e,greenkeeperio-bot,2016-08-25 12:19:20+00:00,greenkeeperio-bot,2016-08-25 12:19:20+00:00,chore(package): update babel-register to version 6.14.0
d5e76b33ea1dc2ab18873cbc2ce204b480ef7cee,Leo Lamprecht,2016-08-25 12:19:05+00:00,GitHub,2016-08-25 12:19:05+00:00,"Merge pull request #121 from zeit/greenkeeper-babel-preset-es2015-6.14.0

Update babel-preset-es2015 to version 6.14.0 "
2f10d8c0d8db725ffdf20b5b33cc2ad52316e995,greenkeeperio-bot,2016-08-25 07:48:52+00:00,greenkeeperio-bot,2016-08-25 07:48:52+00:00,chore(package): update babel-preset-es2015 to version 6.14.0
60576f83fcd5273c4f0e15ddeabccac148c40e30,Leo Lamprecht,2016-08-24 20:16:43+00:00,GitHub,2016-08-24 20:16:43+00:00,"Merge pull request #119 from zeit/greenkeeper-email-validator-1.0.5

Update email-validator to version 1.0.5 "
ecf341d045789b5b66bfe0686bfe67ef651c3fe8,Leo Lamprecht,2016-08-24 20:16:39+00:00,GitHub,2016-08-24 20:16:39+00:00,"Merge pull request #118 from zeit/greenkeeper-eslint-config-standard-6.0.0

Update eslint-config-standard to version 6.0.0 "
d3e8f8566c3b193671162273abe6666cf858b968,greenkeeperio-bot,2016-08-24 17:59:29+00:00,greenkeeperio-bot,2016-08-24 17:59:29+00:00,chore(package): update email-validator to version 1.0.5
841e437820937d31c73a02fa20cc88d1c543f536,greenkeeperio-bot,2016-08-24 14:03:17+00:00,greenkeeperio-bot,2016-08-24 14:03:17+00:00,chore(package): update eslint-config-standard to version 6.0.0
74adb7b6134e8aead318ba9210fc73599d569ee2,Olli Vanhoja,2016-08-24 04:19:19+00:00,Olli Vanhoja,2016-08-24 04:21:07+00:00,"Don't use domain-regex

It's broken, it doesn't match what you think it will match."
a0127daef15e896367b6714288ad42991beae869,Olli Vanhoja,2016-08-23 19:52:47+00:00,Olli Vanhoja,2016-08-23 19:54:45+00:00,Warn about removing bound aliases when removing a domain
d441c120a666362aefdba2f55de5b79765b030a5,Leo Lamprecht,2016-08-22 15:12:29+00:00,Leo Lamprecht,2016-08-22 15:12:29+00:00,"Stop minifying the code

This makes it really really hard to track down errors"
039e16a569fb15d91efab38d0e12eaace27c814f,Leo Lamprecht,2016-08-19 14:31:28+00:00,GitHub,2016-08-19 14:31:28+00:00,"Merge pull request #116 from zeit/greenkeeper-graceful-fs-4.1.6

Update graceful-fs to version 4.1.6 "
b705e7e8ddbfc81a112618143ecf94b2e2791d28,greenkeeperio-bot,2016-08-19 14:22:44+00:00,greenkeeperio-bot,2016-08-19 14:22:44+00:00,chore(package): update graceful-fs to version 4.1.6
1b9f905289f0712d206de1bbb96949a6db07a955,Naoyuki Kanezawa,2016-08-19 03:49:46+00:00,GitHub,2016-08-19 03:49:46+00:00,"Merge pull request #115 from zeit/add/env-flags

Add secrets support"
2c28348ed99213f14d5c62a27b94576c4fc0f9b0,Guillermo Rauch,2016-08-19 03:39:13+00:00,Guillermo Rauch,2016-08-19 03:39:13+00:00,help: add `rename`
cf0b8d260a3e81d42f7c8aabe1864607b58bb8f5,Guillermo Rauch,2016-08-19 03:38:49+00:00,Guillermo Rauch,2016-08-19 03:38:49+00:00,fix help
20e0cd77789b7d3c52d5067e48da321dbcd5787e,Guillermo Rauch,2016-08-19 03:26:41+00:00,Guillermo Rauch,2016-08-19 03:26:41+00:00,secrets: fix rename
8354ee8cea813b0158d00f3a62d117eaaedf8e22,Guillermo Rauch,2016-08-19 03:20:07+00:00,Guillermo Rauch,2016-08-19 03:20:07+00:00,fix rename
8bf096b41ce453dab6fad454e564494ca707e26a,Guillermo Rauch,2016-08-19 01:58:56+00:00,Guillermo Rauch,2016-08-19 01:58:56+00:00,Merge branch 'master' into add/env-flags
fbfb7ac5e52932a3a8be565d1fae12a9310b6858,Guillermo Rauch,2016-08-17 23:40:34+00:00,Guillermo Rauch,2016-08-17 23:40:34+00:00,Release 0.21.1
24a9e32a9d1c96611edaaeab79a67f725371d8b1,Guillermo Rauch,2016-08-17 23:36:18+00:00,Guillermo Rauch,2016-08-17 23:36:18+00:00,fix for windows
187686d9818b0af0e058bfc6a6b7a8faaff2dbd3,Guillermo Rauch,2016-08-17 02:59:52+00:00,Guillermo Rauch,2016-08-17 02:59:52+00:00,fixes for rm
4aba5cc709ecb3c9dc2df3eb1d80ecc526b735d6,Guillermo Rauch,2016-08-17 01:40:41+00:00,Guillermo Rauch,2016-08-17 01:40:41+00:00,Merge branch 'master' into add/env-flags
244d90167af01c8c16a37925c9e037a7b6e9ccbd,Guillermo Rauch,2016-08-16 17:50:12+00:00,Guillermo Rauch,2016-08-16 17:50:12+00:00,Release 0.21.0
a42a2a56bc34314e0214b728e18872fb14e15d65,Olli Vanhoja,2016-08-16 11:16:05+00:00,GitHub,2016-08-16 11:16:05+00:00,"Merge pull request #102 from zeit/cnameprot-error

Show a proper error message for protected domain names"
f63de5f86e4ba89305635c09040f0b4ea3908adc,Leo Lamprecht,2016-08-16 10:39:52+00:00,GitHub,2016-08-16 10:39:52+00:00,"Merge pull request #112 from zeit/greenkeeper-eslint-3.3.1

Update eslint to version 3.3.1 "
349c5242b61634e9e9f81b381b414da13ad3ff6c,Leo Lamprecht,2016-08-16 10:38:59+00:00,Leo Lamprecht,2016-08-16 10:38:59+00:00,"Don't update babel-runtime for now

@rase-"
ab692f4fda36bef566d845e14b1bcdb3fda2329b,Tony Kovanen,2016-08-16 10:02:15+00:00,GitHub,2016-08-16 10:02:15+00:00,"Merge pull request #113 from zeit/downgrade-babel

Fix exceptions"
cbb5ae30c9e0ee3c2052977b15490e5ebdff016d,Olli Vanhoja,2016-08-16 09:54:53+00:00,Olli Vanhoja,2016-08-16 10:00:20+00:00,"Fix exceptions

Currently babel-runtime versions newer than 6.5.0 swallows
exceptions and causes async-retry blocks to return 'undefined' as
a return value."
97deb721fefcb48d19e613c280d0ac5034cec1b1,greenkeeperio-bot,2016-08-15 21:32:50+00:00,greenkeeperio-bot,2016-08-15 21:32:50+00:00,chore(package): update eslint to version 3.3.1
749cd8ac1f09e71f603ae92682185cbeabaa125b,Olli Vanhoja,2016-08-15 21:28:32+00:00,Guillermo Rauch,2016-08-15 21:28:32+00:00,domain add: Try fallback if the list of name servers is empty (#111)
14774c5e9df76bad791993952c9bed6a12ecf8e1,Guillermo Rauch,2016-08-15 18:16:44+00:00,Guillermo Rauch,2016-08-15 18:16:44+00:00,Release 0.20.0
3025a091a5c65094916bca42d66cdd2fab15154a,Guillermo Rauch,2016-08-15 16:00:21+00:00,Guillermo Rauch,2016-08-15 16:00:21+00:00,fix try/catch in async with older babel-runtime :\
ff4a54a4b241dc669cdc8b9b6a7a96090557635b,Guillermo Rauch,2016-08-15 06:12:02+00:00,Guillermo Rauch,2016-08-15 06:12:02+00:00,Merge branch 'master' into add/env-flags
ba7956341646bb602799a36b858d943a41428cb6,Guillermo Rauch,2016-08-15 06:11:46+00:00,Guillermo Rauch,2016-08-15 06:11:46+00:00,now-deploy: remove build logger erorr handler
14be7dd8181cc9b1a4d43be695b144599034a9fb,Guillermo Rauch,2016-08-15 06:11:12+00:00,Guillermo Rauch,2016-08-15 06:11:12+00:00,build-logger: handle socket errors better
0523226252aa4fd6b6ddadd5742f804709d2909b,Guillermo Rauch,2016-08-15 00:41:58+00:00,Guillermo Rauch,2016-08-15 00:41:58+00:00,now-deploy: fix `if`
4abbc8546dd2f90a2be69067e9caf2a0f41d9c1b,Guillermo Rauch,2016-08-15 00:12:41+00:00,Guillermo Rauch,2016-08-15 00:12:41+00:00,Merge branch 'master' into add/env-flags
9c8211caaa029066baa2116d42b7640bcc194740,Guillermo Rauch,2016-08-14 22:02:10+00:00,Guillermo Rauch,2016-08-14 22:02:10+00:00,improve performance of file retrieval
597d51563381025fee87d4727072cb44f8a981c5,Tony Kovanen,2016-08-14 19:53:31+00:00,Tony Kovanen,2016-08-14 19:53:31+00:00,Include comment parsing from the Dockerfile
c38fc3a56cf3c53db4e07c81144d789704cd4b7e,Leo Lamprecht,2016-08-13 13:12:26+00:00,GitHub,2016-08-13 13:12:26+00:00,"Merge pull request #109 from zeit/greenkeeper-del-2.2.2

Update del to version 2.2.2 "
72b71b08ceac74cd0fc416e2da469d29088ee4ac,greenkeeperio-bot,2016-08-13 00:09:46+00:00,greenkeeperio-bot,2016-08-13 00:09:46+00:00,chore(package): update del to version 2.2.2
e767f4b1043e6493bf4c207a7cc90a740c26dbb1,Leo Lamprecht,2016-08-12 22:24:17+00:00,GitHub,2016-08-12 22:24:17+00:00,"Merge pull request #108 from zeit/greenkeeper-eslint-3.3.0

Update eslint to version 3.3.0 "
d63a44df307dd52ec0b9f683b1f2ef1a23e54f8a,Leo Lamprecht,2016-08-12 18:48:18+00:00,Leo Lamprecht,2016-08-12 18:48:18+00:00,Disable greenkeeper emails
9cbaa9b68adc6fd1d5b408bb0e24764ec5da8d5e,greenkeeperio-bot,2016-08-12 18:46:16+00:00,greenkeeperio-bot,2016-08-12 18:46:16+00:00,chore(package): update eslint to version 3.3.0
092d994ec541b5dbeea2ee87958de6f477afbdaf,Guillermo Rauch,2016-08-12 00:04:09+00:00,Guillermo Rauch,2016-08-12 00:04:09+00:00,initial sketch
04003b207bb79b409d0810b9b27cf5d7c586e4f8,Olli Vanhoja,2016-08-06 10:15:35+00:00,Olli Vanhoja,2016-08-11 23:59:42+00:00,Show a proper error message for protected domain names
a55ce9450d329c5c03e831fcf6d34e607566a9c4,Igor Klopov,2016-08-11 21:19:48+00:00,Guillermo Rauch,2016-08-11 21:19:48+00:00,"Fixes eslinting (do you have problems?) (#104)

https://github.com/eslint/eslint/issues/6274
https://github.com/babel/babel-eslint/issues/350"
18733b30ee6fa18592852b9cb708a2c03f5046c5,Olli Vanhoja,2016-08-11 21:19:35+00:00,Guillermo Rauch,2016-08-11 21:19:35+00:00,Fix rm warnings (#107)
6cf81fd084d2da8a01f56a64cd289245aeaf4f02,Tony Kovanen,2016-08-10 11:15:20+00:00,GitHub,2016-08-10 11:15:20+00:00,"Merge pull request #105 from zeit/add/deploy-public-option

[WIP] deploy: add `--public` option"
3e5eee71c9f14d468ca0a1d4d49c752022e2923a,Leo Lamprecht,2016-08-10 09:21:51+00:00,Leo Lamprecht,2016-08-10 09:21:51+00:00,Looks like this isn't working within Travis
800702932cac1f9af2e2c2d8b9a9b3a465452efe,Leo Lamprecht,2016-08-10 09:16:09+00:00,Leo Lamprecht,2016-08-10 09:16:09+00:00,Use the latest stable version
6d80f2c685fd19ccb83a1bd4abca6fd10348c32b,Leo Lamprecht,2016-08-10 09:11:27+00:00,Leo Lamprecht,2016-08-10 09:11:27+00:00,Create package.json for negation
7d2e7e7a64cd2254eb4f26959a90bb374c6bded1,Leo Lamprecht,2016-08-10 09:00:18+00:00,GitHub,2016-08-10 09:00:18+00:00,"Merge pull request #106 from zeit/greenkeeper-update-all

Update all dependencies "
73e9780210742ba3cc81f929828a82994176d5e3,greenkeeperio-bot,2016-08-10 08:58:49+00:00,greenkeeperio-bot,2016-08-10 08:58:49+00:00,"chore(package): update dependencies

https://greenkeeper.io/"
89f50abf4f571bd848a4114871321442d61b8d76,Nathan Rajlich,2016-08-10 01:19:29+00:00,Nathan Rajlich,2016-08-10 01:19:29+00:00,"add ""public"" logic to the Now lib client"
98c7b3f84aef26c7ee3ba1933f8cee27dfb93dce,Nathan Rajlich,2016-08-10 01:06:42+00:00,Nathan Rajlich,2016-08-10 01:06:42+00:00,"deploy: add `--public` option

To create a deployment as ""public"" (`/_src` route works)
when the user has a ""premium"" plan."
fbd425579667a71cfe4f375a81583824aacd0091,Tony Kovanen,2016-08-04 07:26:52+00:00,GitHub,2016-08-04 07:26:52+00:00,"Merge pull request #100 from zeit/improve/npmignore

Improve file retrieval and ignores, fix bugs, add .dockerignore support"
39a4435e4beb9fd8c9e2b38210a917d675fd7add,Guillermo Rauch,2016-08-04 01:59:52+00:00,Guillermo Rauch,2016-08-04 01:59:52+00:00,wow
615bc9685955f85369bf0714f5a089b3976751f1,Guillermo Rauch,2016-08-03 22:21:02+00:00,Guillermo Rauch,2016-08-03 22:21:02+00:00,bump ava
7d9be2458d213884ee57156203be9f5b76cd188b,Guillermo Rauch,2016-08-03 20:22:34+00:00,Guillermo Rauch,2016-08-03 20:22:34+00:00,revamping and improving ignored files
3cc3f45471780f118c489251b451e09cecb5f2bd,Guillermo Rauch,2016-08-03 17:48:04+00:00,Guillermo Rauch,2016-08-03 17:48:04+00:00,more reasonable ignored
eb0aeda7bf4569672785a374cb24b9099d0262cb,Guillermo Rauch,2016-08-02 04:30:42+00:00,Guillermo Rauch,2016-08-02 04:30:42+00:00,improve docker validation
a23f147b48ad739b0c0761341ca623ce12f71b77,Guillermo Rauch,2016-08-01 17:47:37+00:00,GitHub,2016-08-01 17:47:37+00:00,"Add support for `Dockerfile` (#98)

* add support for `Dockerfile`

* add dockerfile `EXPOSE` validation"
f7ff9d2d440336d96c7a9b19a4003faa54fe79c7,Tony Kovanen,2016-07-31 19:38:47+00:00,GitHub,2016-07-31 19:38:47+00:00,"Merge pull request #95 from zeit/add/shorter-deploy-message

Add shorter deploy message"
5cd530551e123f9c3d644c478885befde960c80d,Guillermo Rauch,2016-07-31 19:36:46+00:00,Guillermo Rauch,2016-07-31 19:36:46+00:00,Merge branch 'master' into add/shorter-deploy-message
29d569771a7794e6b1cf102c74ce1208838b98a8,Tony Kovanen,2016-07-31 18:27:27+00:00,GitHub,2016-07-31 18:27:27+00:00,"Merge pull request #80 from zeit/add/piping

Add piping support"
3cee6daa9d603304b28a588551180dc3fc6bc110,Tony Kovanen,2016-07-31 18:26:21+00:00,GitHub,2016-07-31 18:26:21+00:00,"Merge pull request #96 from zeit/fix/colors-in-stderr-non-tty

Fix colors in stderr non tty"
cf2755206c7bedf99dc418351c3a7112db5505c5,Guillermo Rauch,2016-07-31 02:19:16+00:00,Guillermo Rauch,2016-07-31 02:19:16+00:00,Merge branch 'master' into add/piping
3004cde653b255d278a0fed5897e5e2cc771ee92,Guillermo Rauch,2016-07-31 02:18:49+00:00,Guillermo Rauch,2016-07-31 02:18:49+00:00,Merge branch 'master' into add/shorter-deploy-message
4d7e4b16919231ac77c6d76a55ab4c9b8394a635,Guillermo Rauch,2016-07-31 02:18:21+00:00,Guillermo Rauch,2016-07-31 02:18:21+00:00,Merge branch 'master' into fix/colors-in-stderr-non-tty
9794a2574db3bbe1ccf630c8b8d9be548a5da5a4,Guillermo Rauch,2016-07-31 02:11:31+00:00,Guillermo Rauch,2016-07-31 02:11:39+00:00,add .travis.yml with node
4bd702bf4547fe01c5effa4491a6f8ead06857d7,Guillermo Rauch,2016-07-31 02:10:21+00:00,Guillermo Rauch,2016-07-31 02:10:21+00:00,use chalk for stderr colors
a3746ba8f4841d061e10d9be20d3357c0bc7f510,Guillermo Rauch,2016-07-31 02:07:51+00:00,Guillermo Rauch,2016-07-31 02:07:51+00:00,Merge branch 'add/piping' into add/shorter-deploy-message
7d005c3a335a8668ceaaa3e0ebc810ef0bd9a026,Guillermo Rauch,2016-07-31 02:07:16+00:00,Guillermo Rauch,2016-07-31 02:07:16+00:00,Merge branch 'master' into add/piping
5791b496538d726807490a738e4c397f8080e62c,Guillermo Rauch,2016-07-31 01:57:01+00:00,Guillermo Rauch,2016-07-31 01:57:01+00:00,error: prevent ansi escapes for colors in stdout
eafc25eefa4b23b97d4cb5da50dcbd9884f99946,Guillermo Rauch,2016-07-31 01:10:16+00:00,Guillermo Rauch,2016-07-31 01:10:16+00:00,shorten path for better UX
264a18732b06afd4bba8dbcc6c4f3ba5c8e4bd2c,Tony Kovanen,2016-07-31 00:31:46+00:00,Guillermo Rauch,2016-07-31 00:31:46+00:00,Rename to `forwardNpm` and check .now.json for it (#90)
de8e3e03cd445a1e50687660030a97e841ca23eb,Guillermo Rauch,2016-07-31 00:30:48+00:00,Guillermo Rauch,2016-07-31 00:30:48+00:00,check-update: only warn about truly new versions
396bd8713f62ba70194e00c7e3fba658f17e21c8,Guillermo Rauch,2016-07-31 00:30:36+00:00,Guillermo Rauch,2016-07-31 00:30:36+00:00,activate quiet mode when piping
3eabe0e183bfa1b571284f82d3f9673db62393df,Guillermo Rauch,2016-07-31 00:30:09+00:00,Guillermo Rauch,2016-07-31 00:30:09+00:00,fix updates warning about older versions
2678b3ae3ec8dba7484c21afd2da10ccd5869398,Guillermo Rauch,2016-07-28 01:00:26+00:00,Guillermo Rauch,2016-07-28 01:00:26+00:00,Merge branch 'master' into add/piping
9284265f1431daaf27483b1b546d7003d1586d8a,Guillermo Rauch,2016-07-23 00:41:22+00:00,Guillermo Rauch,2016-07-23 00:41:22+00:00,Release 0.19.0
38d1e4d32f824a0c851486c4f5434b8a87edafeb,Guillermo Rauch,2016-07-23 00:40:12+00:00,Guillermo Rauch,2016-07-23 00:40:12+00:00,alias: handle `ESERVFAIL`
a6be53e5e40c428f2d49ebad839d38bc869a8d81,Tony Kovanen,2016-07-17 21:21:24+00:00,GitHub,2016-07-17 21:21:24+00:00,"Merge pull request #83 from zeit/add/send-npmrc-public-regisry-auth-token

Send npmrc public regisry auth token"
7ab8e0d344cef463048bc3444a6cf2aecc961514,Tony Kovanen,2016-07-17 09:54:43+00:00,Tony Kovanen,2016-07-17 09:54:43+00:00,Add cmd line flag to forward NPM auth token
753968648368d2e3133d95c6929c08774c38e7cf,Tony Kovanen,2016-07-16 22:52:25+00:00,Tony Kovanen,2016-07-16 22:52:25+00:00,Keep reading lower .npmrc if no auth in project
9feed0c767da33ab4d98f806c1e3aea4f14341af,Tony Kovanen,2016-07-16 22:49:26+00:00,Tony Kovanen,2016-07-16 22:49:26+00:00,Look up `forward-npm` from now nowProperties
f4c55e2864aebd79ad345d62eddb5b3d51beb1cc,Tony Kovanen,2016-07-15 17:24:40+00:00,Tony Kovanen,2016-07-15 17:24:40+00:00,Forward registry auth token only if asked
cb86654e218407bb43887c1d66695694fad0332b,Tony Kovanen,2016-07-15 17:21:38+00:00,Tony Kovanen,2016-07-15 17:21:38+00:00,Send registry auth token from .npmrc if accessible
67b55610b73af28f1676b20913b084a51404b63c,Igor Klopov,2016-07-07 16:30:49+00:00,Guillermo Rauch,2016-07-07 16:30:49+00:00,"make a binary of `now` using enclosejs (#81)

* make a binary of `now` using enclosejs

* pin enclosejs version"
0af1f69ed20d20a7ba5f6307a71f065abf3a5684,Guillermo Rauch,2016-07-05 23:17:21+00:00,Guillermo Rauch,2016-07-05 23:17:21+00:00,index: add quiet mode
7eab45a017741ef75eaab4ae86d5447d74ea3088,Guillermo Rauch,2016-07-05 23:16:24+00:00,Guillermo Rauch,2016-07-05 23:16:24+00:00,build-logger: log only errors in quiet mode
de932b8643fe7ae85530352e4d33ff1ba579d651,Guillermo Rauch,2016-07-05 23:16:01+00:00,Guillermo Rauch,2016-07-05 23:16:01+00:00,now-deploy: stay quiet on non-tty
91648d269b5f51b5917411b96517859c1846bb6d,Leo Lamprecht,2016-06-24 12:33:19+00:00,Leo Lamprecht,2016-06-24 12:33:49+00:00,Start script
19484a40e5730595316867c2caa1a1be8c09217d,Leo Lamprecht,2016-06-24 12:32:33+00:00,Leo Lamprecht,2016-06-24 12:33:49+00:00,These binaries don't have any exts
902872a0a0a2cdbfee6664935fedf96b1af45d70,Leo Lamprecht,2016-06-24 11:49:27+00:00,GitHub,2016-06-24 11:49:27+00:00,Add logo to heading
43c224c43678aa869a9716e82924ece765a39ce8,Leo Lamprecht,2016-06-24 11:40:47+00:00,Leo Lamprecht,2016-06-24 11:40:47+00:00,Clean up gulpfile
7a7f54bb8cca062ecaaa4e5c83c4af2704e1f142,Leo Lamprecht,2016-06-24 11:33:59+00:00,Leo Lamprecht,2016-06-24 11:33:59+00:00,Uppercase names for markdown files
b235adf2a03aa9d37e0a0c71d40933559a8f9b2d,Leo Lamprecht,2016-06-24 11:33:27+00:00,Leo Lamprecht,2016-06-24 11:33:27+00:00,Put ESLint config into package.json
9e2c485e28a6f4c21f646748a13c8d7fda45e4d4,Guillermo Rauch,2016-06-23 18:21:17+00:00,Guillermo Rauch,2016-06-23 18:21:17+00:00,bump version
4551f19b13926cc3599be4627f9fd2db13bc75bb,Guillermo Rauch,2016-06-23 18:20:58+00:00,Guillermo Rauch,2016-06-23 18:20:58+00:00,Release 0.18.1
07339ffa0b599e54aa5e3f06c296a9da10c7896f,Guillermo Rauch,2016-06-23 18:19:36+00:00,Guillermo Rauch,2016-06-23 18:19:36+00:00,Release 0.18.0
e9bc5ac1c19a7729d62f5df6a6b56d3fa16632e9,Guillermo Rauch,2016-06-23 18:06:38+00:00,Guillermo Rauch,2016-06-23 18:06:38+00:00,alias: setup * and none records automatically
1be3a4685b085cdb944ad3c5669c702618cb96c7,Guillermo Rauch,2016-06-23 17:35:08+00:00,Guillermo Rauch,2016-06-23 17:35:08+00:00,fix remove
eb04657b2fd477574a28d0fd6e6ed106423c61b3,Guillermo Rauch,2016-06-23 17:14:23+00:00,GitHub,2016-06-23 17:14:23+00:00,"Add zeit world (wip) (#67)

* alias: clean up the alias (trailing and leading dots)

* alias: improve domain validation and implement zeit.world

* is-zeit-world: detect valid zeit.world nameservers

* package: add domain-regex dep

* now-alias: fix edge case with older aliases or removed deployments

* alias: move listing aliases and retrying to `index`

* index: generalize retrying and alias listing

* alias: remove `retry` dep

* now-remove: print out alias warning

* typo

* now-alias: prevent double lookup

* now: add domain / domains command

* now-deploy: document `domain`

* agent: allow for tls-less, agent-less requests while testing

* is-zeit-world: fix nameserver typo

* dns: as-promised

* now-alias: fix `rm` table

* now-alias: no longer admit argument after `alias ls`

@rase- please verify this, but I think it was overkill?

* admit ""aliases"" as an alternative to alias

* make domain name resolution, creation and verification reusable

* index: add nameserver discover, domain setup functions (reused between alias and domains)

* now-domains: add command

* domains: commands

* package: bump eslint

* now-alias: simplify sort

* now-domains: sort list

* now-domains: improve deletion and output of empty elements

* errors: improve output

* domains: add more debug output

* domains: extra logging

* errors: improve logging

* now-remove: improve `now rm` error handling

* index: more reasonable retrying

* alias: support empty dns configurations

* dns: remove ns fn

* alias: improve post-dns-editing verification

* index: remove unneeded dns lookup

* index: implement new `getNameservers`

* index: customizable retries

* alias: improve error

* improve error handling and cert retrying

* customizable retries

* alias: better error handling

* alias: display both error messages

* better error handling

* improve error handling for certificate verification errors

* alias: set up a `*` CNAME to simplify further aliases

* alias: fewer retries for certs, more spaced out (prevent rate limiting issues)

* alias: ultimate error handling

* add whois fallback

* adjust timer labels for whois fallback

* index: whois fallback also upon 500 errors

* alias: fix error message

* fix duplicate aliases declaration"
15d6a9d621376263622beb266f1ef8c564ef9599,Naoyuki Kanezawa,2016-06-22 16:29:09+00:00,Guillermo Rauch,2016-06-22 16:29:09+00:00,don't use http2 agent when url is http (#76)
7cab91211e28e250e27f2948e94bb65f4a9c23e9,Naoyuki Kanezawa,2016-06-21 15:39:03+00:00,Guillermo Rauch,2016-06-21 15:39:03+00:00,send user-agent on login (#75)
e7b0362c7f8d52776ab1f499760956f48a783e5d,Guillermo Rauch,2016-06-16 00:11:44+00:00,GitHub,2016-06-16 00:11:44+00:00,"Merge pull request #70 from zeit/add/alias-removal-warning

Add alias removal warning"
0892e032db328ca9f7b187de080fd4c07f47907a,Guillermo Rauch,2016-06-10 23:33:35+00:00,Guillermo Rauch,2016-06-10 23:33:58+00:00,now-remove: print out alias warning
290d1ffb935a140e2fa6328cd84d10d18585c3c9,Guillermo Rauch,2016-06-10 23:19:44+00:00,Guillermo Rauch,2016-06-10 23:21:28+00:00,alias: remove `retry` dep
c19cafd3ea8af45380b279c2a832ddda2fbb702a,Guillermo Rauch,2016-06-10 23:17:36+00:00,Guillermo Rauch,2016-06-10 23:21:26+00:00,index: generalize retrying and alias listing
02ea07cf1af4e4f1a5b8d8569543461fa667919c,Guillermo Rauch,2016-06-10 23:16:45+00:00,Guillermo Rauch,2016-06-10 23:21:22+00:00,alias: move listing aliases and retrying to `index`
6dcd7b68dda5e4bd8cc06f87a5c40f3ca30b1b72,Guillermo Rauch,2016-06-10 22:04:26+00:00,Guillermo Rauch,2016-06-10 22:04:52+00:00,now-alias: fix edge case with older aliases or removed deployments
455d1fb8c9d37a807bd5a6aec8d214e0e1ce8552,Guillermo Rauch,2016-06-07 16:45:26+00:00,Guillermo Rauch,2016-06-07 16:45:26+00:00,Release 0.17.1
d638b9e731bd87795922767ef53ea54999a9db93,Guillermo Rauch,2016-06-07 16:44:54+00:00,Guillermo Rauch,2016-06-07 16:44:54+00:00,package: bump `email-prompt` for windows fix
dc9a20e42f350db5d05f6a116176ad6eaf35c7f5,Guillermo Rauch,2016-06-06 23:03:37+00:00,Guillermo Rauch,2016-06-06 23:03:37+00:00,Release 0.17.0
902cfdf979f654befb8b8e35ac9a56c2605051bd,Guillermo Rauch,2016-06-06 19:51:14+00:00,Guillermo Rauch,2016-06-06 19:51:14+00:00,index: engines can be `null`
75d9723d76a091ea1c4cab61adf09f5c28ae7ca8,Tony Kovanen,2016-06-06 19:12:32+00:00,Tony Kovanen,2016-06-06 19:12:32+00:00,"Merge pull request #66 from zeit/add/version-reporting

index: add version reporting, support for `engines`"
16424697617d5dff6ba16c7ef2af2949cd832265,Guillermo Rauch,2016-06-06 19:11:26+00:00,Guillermo Rauch,2016-06-06 19:11:26+00:00,"index: add version reporting, support for `engines`"
816f2c3af1bc237d9bf61cfbe8cc95d5a1e86dff,Guillermo Rauch,2016-06-06 14:27:33+00:00,Guillermo Rauch,2016-06-06 14:27:33+00:00,"Merge pull request #65 from zeit/add/token-name

Send token name"
08c860af418e192247938301e43c8680cebd1c43,nkzawa,2016-06-06 02:58:36+00:00,nkzawa,2016-06-06 02:58:36+00:00,fix tokenName
d68223775a3bfb2498845441098e01b3311936e0,Guillermo Rauch,2016-06-03 23:35:57+00:00,Guillermo Rauch,2016-06-03 23:35:57+00:00,Release 0.16.0
5a17da1e04e9cf87b62357c991af29da1e7e0673,Guillermo Rauch,2016-06-03 23:20:03+00:00,Guillermo Rauch,2016-06-03 23:20:03+00:00,"now-deploy: add ""initializing"" message"
de521f37b758e9c108ae3a3c4af2bb9e9f294d6a,Guillermo Rauch,2016-06-03 15:56:33+00:00,Guillermo Rauch,2016-06-03 15:56:33+00:00,"Merge pull request #63 from zeit/move-from-now-engines-to-now.engines

Use `""now""` nampespace for `""engines""`"
9d49f5f955557a06a28511165b46ccc37b66d558,Tony Kovanen,2016-06-03 10:14:48+00:00,Tony Kovanen,2016-06-03 10:14:48+00:00,"Use `""now""` nampespace for `""engines""`"
2eb172171f7efd2ea35d08ab4846cd46be031bb5,nkzawa,2016-06-02 16:15:49+00:00,nkzawa,2016-06-02 16:15:49+00:00,login: post tokenName
591788f247ec418eacb7b3a0b56aacb1e6177e56,Guillermo Rauch,2016-05-31 01:46:03+00:00,Guillermo Rauch,2016-05-31 01:46:03+00:00,compile
64a126e6a0a5304d2bd64f36e355754ad1cfc5c2,Guillermo Rauch,2016-05-31 01:38:43+00:00,Guillermo Rauch,2016-05-31 01:38:43+00:00,Release 0.15.0
eb0522bf52562c5e3db2b4a57099fce178eb52a7,Guillermo Rauch,2016-05-30 21:41:26+00:00,Guillermo Rauch,2016-05-30 21:41:26+00:00,"Merge pull request #59 from zeit/alias

Alias"
57909cba116d23721cba0c83579247859d420a89,Guillermo Rauch,2016-05-30 20:27:09+00:00,Guillermo Rauch,2016-05-30 20:27:09+00:00,alias: certificate provisioning
ae320f56dbe3ac9fefbb132e9201895f0a56b0f8,Guillermo Rauch,2016-05-30 20:18:30+00:00,Guillermo Rauch,2016-05-30 20:18:30+00:00,/certs > /now/certs
b5820c4a47ddc8c6c3648e716632f73dc94d760a,Guillermo Rauch,2016-05-30 20:14:38+00:00,Guillermo Rauch,2016-05-30 20:14:38+00:00,bump async-retry and remove old retry
547a93127ac720384099fd693d1766f616fc81aa,Guillermo Rauch,2016-05-30 20:02:20+00:00,Guillermo Rauch,2016-05-30 20:02:48+00:00,alias: handle 304
6172678a90ae25473b4801a6680a155c0f6a8c19,Guillermo Rauch,2016-05-30 18:28:32+00:00,Guillermo Rauch,2016-05-30 20:02:48+00:00,alias: improve out
7f4e498b576762bda384a6c4f9abc7962078ba6e,Tony Kovanen,2016-05-30 18:44:46+00:00,Tony Kovanen,2016-05-30 18:44:46+00:00,Underline urls in `alias rm` and show target
7c6df1dd7d1dfc8b0856bbbb0da7eab6675ce808,Tony Kovanen,2016-05-30 18:22:57+00:00,Tony Kovanen,2016-05-30 18:22:57+00:00,Merge branch 'alias' of github.com:zeithq/now into alias
196692a5c5d40e372a22a4468e09eaf65330b428,Tony Kovanen,2016-05-30 18:15:20+00:00,Tony Kovanen,2016-05-30 18:15:20+00:00,Add confirmation to `alias rm`
7bcea8e19defe26863b9f53209caef3f0f00b5d5,Guillermo Rauch,2016-05-30 17:57:36+00:00,Guillermo Rauch,2016-05-30 17:57:36+00:00,alias: handle 409
77d10deddb4dce548d44731b34f9a0d1f15b3366,Guillermo Rauch,2016-05-30 16:37:23+00:00,Guillermo Rauch,2016-05-30 16:37:23+00:00,add confirmation for removal
62bacc5968ffa7bbdedd9a2847b132f0d0719245,Guillermo Rauch,2016-05-30 16:13:09+00:00,Guillermo Rauch,2016-05-30 16:13:09+00:00,now-alias: close socket gracefully
b788d7118b553edb3ad5828c581bd4bdf57c035b,Guillermo Rauch,2016-05-30 16:12:02+00:00,Guillermo Rauch,2016-05-30 16:12:02+00:00,alias: tweak error
7d9ffcb45b4af93460049abb24dcd7da485ef1de,Guillermo Rauch,2016-05-30 16:11:12+00:00,Guillermo Rauch,2016-05-30 16:11:12+00:00,tweak error messages
23d7d66bb778b3990e3c0374712130d7eca7a0d3,Guillermo Rauch,2016-05-30 16:07:06+00:00,Guillermo Rauch,2016-05-30 16:07:06+00:00,package: roll back `babel-runtime` to make retry work again
1b5c88eedb8070e3476699238595527eb8f80c08,Guillermo Rauch,2016-05-30 16:06:36+00:00,Guillermo Rauch,2016-05-30 16:06:36+00:00,alias: verify ownership first for custom domains
b1f754b4370f9908753d12797f538e1740e4393f,Guillermo Rauch,2016-05-30 14:54:30+00:00,Guillermo Rauch,2016-05-30 14:54:30+00:00,alias: improve success output
a649bd7597aa7f563747d2f6ea262bd8b1271f49,Guillermo Rauch,2016-05-30 14:54:19+00:00,Guillermo Rauch,2016-05-30 14:54:19+00:00,now-alias: improve ls output
4935563d45d03051a54003e05cc0e15bd3e8c65e,Tony Kovanen,2016-05-30 13:27:13+00:00,Tony Kovanen,2016-05-30 13:27:13+00:00,Fix `alias rm` bail
f10c533a6135fc18c2e8b4f1b83881b15b595bbf,Tony Kovanen,2016-05-30 12:27:56+00:00,Tony Kovanen,2016-05-30 12:27:56+00:00,Move exit
c93fbc64896acc6e2d804a55c9c660600b38c4de,Tony Kovanen,2016-05-30 11:04:36+00:00,Tony Kovanen,2016-05-30 11:04:36+00:00,Fix default usage of `alias set`
794e89439fd3d65dda29c40c523ff81b2015aeac,Tony Kovanen,2016-05-30 10:02:45+00:00,Tony Kovanen,2016-05-30 10:02:45+00:00,Thow error if specified `ls` selector not found
b29fce99dbfd3f795768cc24615d4009854d7e32,Tony Kovanen,2016-05-30 09:00:10+00:00,Tony Kovanen,2016-05-30 09:00:10+00:00,Fix timestamp usage
cf4b176ec90da42e8419833a19dd6b92b6f3947f,Tony Kovanen,2016-05-30 08:32:12+00:00,Tony Kovanen,2016-05-30 08:32:12+00:00,"Accept alias name in `now alias rm`, add retries"
32ad62d57c0810b5069a6555e0359257c7602954,Tony Kovanen,2016-05-30 08:03:42+00:00,Tony Kovanen,2016-05-30 08:03:42+00:00,`now alias ls`: accept deployment url
21bb73b3c8662827a04fb0038df451d9ae4e0b6e,Tony Kovanen,2016-05-29 23:48:45+00:00,Tony Kovanen,2016-05-29 23:48:45+00:00,Basic `alias rm`
4aab8c6c8e2a64997eda11ef6c64c16fac1264a0,Tony Kovanen,2016-05-29 21:52:00+00:00,Tony Kovanen,2016-05-29 21:52:00+00:00,`alias ls` logic
9418d983f268bd8b7a4bacb33f20057c9864afc7,Tony Kovanen,2016-05-29 20:13:03+00:00,Tony Kovanen,2016-05-29 20:13:03+00:00,`exit(0)` when successful
47f797bd4a1b723b966db2cc3bad2b9316ecec22,Tony Kovanen,2016-05-29 20:11:35+00:00,Tony Kovanen,2016-05-29 20:11:35+00:00,Exit early for `304`
2c030e288833c1ef85a594bc7d1e14130d23959f,Tony Kovanen,2016-05-29 19:25:19+00:00,Tony Kovanen,2016-05-29 19:25:19+00:00,Fix lint
ad6c9d53731cc371c358e3d02acd117dd20c2464,Tony Kovanen,2016-05-29 19:22:35+00:00,Tony Kovanen,2016-05-29 19:22:35+00:00,Fix success output
887f3e39b9e12498c23624498aaf566981d0d3e0,Tony Kovanen,2016-05-29 18:56:27+00:00,Tony Kovanen,2016-05-29 18:56:27+00:00,Await all fetches
80237aef32582550d45667919d1950517c941cec,Tony Kovanen,2016-05-29 18:47:26+00:00,Tony Kovanen,2016-05-29 18:47:26+00:00,Fix alias argv usage
f5c5309bc82d11ad99de2195927a795f8053bd8c,Guillermo Rauch,2016-05-29 17:44:21+00:00,Guillermo Rauch,2016-05-29 17:44:21+00:00,alias: complete `set`
dbf56429bf3da4ee7043e2e52bb7b68984cc2ff9,Guillermo Rauch,2016-05-28 18:40:43+00:00,Guillermo Rauch,2016-05-28 18:40:43+00:00,alias: match hostname prefix without `.now.sh`
9d95c2bf2b5ed5487a3c96defe5af5f6b6120a50,Guillermo Rauch,2016-05-28 18:39:04+00:00,Guillermo Rauch,2016-05-28 18:39:04+00:00,gulpfile: also compile by default
7bb90816a2936200a875e1d0ff556c94e729daa8,Guillermo Rauch,2016-05-28 18:23:28+00:00,Guillermo Rauch,2016-05-28 18:23:28+00:00,gulpfile: temporarily disable lint and enable watch
92ffaf1b1e3e34ea284373fb62b7ce8d723ca848,Guillermo Rauch,2016-05-28 18:22:45+00:00,Guillermo Rauch,2016-05-28 18:22:45+00:00,ua: fix `package` location
212b9f2e67b203d428cda70940112bdb6c290d86,Guillermo Rauch,2016-05-28 18:22:33+00:00,Guillermo Rauch,2016-05-28 18:22:33+00:00,alias: implement uid / host search
b65f57e4d5987ba1ac2dd2fe43fe681cbb8a6d99,Guillermo Rauch,2016-05-28 18:22:14+00:00,Guillermo Rauch,2016-05-28 18:22:14+00:00,now-alias: pass only strings (minimist converts to `Number`)
7feb738b33b4a5ab0601962a355ed7337889c050,Guillermo Rauch,2016-05-28 18:21:55+00:00,Guillermo Rauch,2016-05-28 18:21:55+00:00,now-alias: support `userError` errors
aff31099367e8924fc9d9fe9a2dcc95e154a04d3,Guillermo Rauch,2016-05-28 18:20:56+00:00,Guillermo Rauch,2016-05-28 18:20:56+00:00,add to-host tests
dc03bb9ec740e4e03a620562e3e66e70f31410b0,Guillermo Rauch,2016-05-28 18:11:50+00:00,Guillermo Rauch,2016-05-28 18:11:50+00:00,add function to convert host parameters to hostname
6459ff0cec5785af4e113c18f0c8c0e4b28ee1b8,Guillermo Rauch,2016-05-28 18:11:38+00:00,Guillermo Rauch,2016-05-28 18:11:38+00:00,added duplicate hash test
68a2ceb48281edc163b676bf272abc7b8cd7aaca,Guillermo Rauch,2016-05-28 18:11:18+00:00,Guillermo Rauch,2016-05-28 18:11:18+00:00,"test: upgrade to latest ava, remove old tests, add `names` test"
d738f8d84af09338693e11be167748ab7d1050bb,Guillermo Rauch,2016-05-28 01:17:10+00:00,Guillermo Rauch,2016-05-28 01:17:10+00:00,add user-agent to all outgoing requests
c65a8ad7cefe6039aa9febbfafae38e8955c20f8,Guillermo Rauch,2016-05-28 01:08:24+00:00,Guillermo Rauch,2016-05-28 01:08:24+00:00,properly specify minimist options
83b948f8d624d3000be6eb619f1215bc22a70dbf,Guillermo Rauch,2016-05-28 00:55:55+00:00,Guillermo Rauch,2016-05-28 00:56:24+00:00,"prevent minimist from parsing an argument as an option value

otherwise:
`now -d /path`

would fail

protip cc @rase- @nkzawa"
54bb5eeb39c20899661ddc14f2471bf357168ef1,Guillermo Rauch,2016-05-28 00:48:12+00:00,Guillermo Rauch,2016-05-28 00:48:12+00:00,now-alias: remove redundant msg
7ab23603931bf9cb04beac8d068a12face7658d6,Guillermo Rauch,2016-05-28 00:38:22+00:00,Guillermo Rauch,2016-05-28 00:38:22+00:00,now-deploy: consistency in help
2b1851abd50add880be9e28c0ca4ddd5101d1eee,Guillermo Rauch,2016-05-28 00:37:40+00:00,Guillermo Rauch,2016-05-28 00:37:40+00:00,now-alias: improve copy
751fa7d990f82adf76d97590dceebaf2e74df343,Guillermo Rauch,2016-05-28 00:28:54+00:00,Guillermo Rauch,2016-05-28 00:28:54+00:00,now: add `ln` as basic command
4ec6e8ec9d96e97cfce89ee5305ccda3c99a73ee,Guillermo Rauch,2016-05-28 00:27:34+00:00,Guillermo Rauch,2016-05-28 00:27:34+00:00,now-alias: refer to `_` to get custom args
75aad74a6f889d96b96975b71e940ed68b346acf,Guillermo Rauch,2016-05-28 00:26:33+00:00,Guillermo Rauch,2016-05-28 00:26:33+00:00,lint
4e4671d6f30fec74e46bdd77c2ddc1a1ec69d5d3,Guillermo Rauch,2016-05-28 00:26:08+00:00,Guillermo Rauch,2016-05-28 00:26:08+00:00,now-deploy: improve help
90c602d9c1f1882fd908c9483484f082ab73ecd9,Guillermo Rauch,2016-05-28 00:13:18+00:00,Guillermo Rauch,2016-05-28 00:13:18+00:00,now-alias: add `add` as synonym to `set`
3643bac7b9cc2373d21d09ad1df6d73c78bd0f68,Guillermo Rauch,2016-05-27 23:57:06+00:00,Guillermo Rauch,2016-05-27 23:57:06+00:00,now-alias: add support for implicit `set`
ecc7d10ac483b1c695d8d865201526d30afa9992,Guillermo Rauch,2016-05-27 23:32:48+00:00,Guillermo Rauch,2016-05-27 23:32:48+00:00,index: restore `_fetch`
69fda5cf985dbd8d6b5f210cdf15cf9caab44286,Guillermo Rauch,2016-05-27 23:21:31+00:00,Guillermo Rauch,2016-05-27 23:21:31+00:00,index: de-privatize `fetch`
953b32a9391fba5084ff062023f47217e6e8265c,Guillermo Rauch,2016-05-27 23:11:43+00:00,Guillermo Rauch,2016-05-27 23:11:43+00:00,improve stdout
6d1cc81e3c0ab19ca11d046624a89049c416339f,Guillermo Rauch,2016-05-27 22:53:04+00:00,Guillermo Rauch,2016-05-27 22:53:08+00:00,help columns consistently
c5e966c1c1d3c47f33d09fb2aafd9291c467dafd,Guillermo Rauch,2016-05-27 22:46:08+00:00,Guillermo Rauch,2016-05-27 22:46:08+00:00,now-remove: make consistent with `now-alias`
e0a7229b12f11cb22a81988a2c369aa4c9b73fcf,Guillermo Rauch,2016-05-27 22:33:14+00:00,Guillermo Rauch,2016-05-27 22:33:14+00:00,now-alias: improve docs
0c0c6854f25f6b3f925deb6254799a90f8d18f9e,Guillermo Rauch,2016-05-27 21:21:03+00:00,Guillermo Rauch,2016-05-27 21:21:03+00:00,alias: use global retry
439866a2d5638cbb755298c439ae6bfe8609ffc1,Guillermo Rauch,2016-05-27 21:20:47+00:00,Guillermo Rauch,2016-05-27 21:20:47+00:00,now-remove: consistent alias position
c8d320c71cc9d3323efb223e20e673ea2ace0863,Guillermo Rauch,2016-05-27 21:20:38+00:00,Guillermo Rauch,2016-05-27 21:20:38+00:00,now-list: consistent alias position
a2855c178ea9304a13821cb3dea5b7c69e790c80,Guillermo Rauch,2016-05-27 21:20:24+00:00,Guillermo Rauch,2016-05-27 21:20:24+00:00,now-alias: clean up docs and fix node bug with early exit
d56f6adc750a43cbd8461f1b7d85fbca561628c5,Guillermo Rauch,2016-05-27 20:04:56+00:00,Guillermo Rauch,2016-05-27 20:04:56+00:00,improve display of now list
60833ebdd11c514323d5aa40b868b98d04858706,Guillermo Rauch,2016-05-27 19:32:52+00:00,Guillermo Rauch,2016-05-27 19:32:52+00:00,package: bump projects
8d51393a16fe577cc114d24d543ecef9fe2c0e7f,Guillermo Rauch,2016-05-27 19:19:01+00:00,Guillermo Rauch,2016-05-27 19:19:01+00:00,bump `email-prompt` (bad publish with npm on node 6)
525242ce54d5347b4262af165a3a7b36f724beab,Guillermo Rauch,2016-05-27 16:14:30+00:00,Guillermo Rauch,2016-05-27 16:14:30+00:00,Merge branch 'add/now-alias'
53537461c78d7039614e51d26db2c972a59b2315,Guillermo Rauch,2016-05-27 15:49:40+00:00,Guillermo Rauch,2016-05-27 15:49:52+00:00,bump `email-prompt` to support spacebar-triggered email autocompletion
fe4912f8c0fed389dcaaa96beabb3cf6819ad673,Guillermo Rauch,2016-05-27 15:36:51+00:00,Guillermo Rauch,2016-05-27 15:36:51+00:00,"Revert ""Revert ""add http2 support back""""

This reverts commit 1bd1b56ce3f350fe117a78eab520198f26b2842b."
551e3fbed80dbabc507602e90b4bdb054b27fe35,Guillermo Rauch,2016-05-23 21:31:33+00:00,Guillermo Rauch,2016-05-23 21:31:33+00:00,Release 0.14.4
55249aa19362b9c6875db9397c212ecb3b071eca,Tony Kovanen,2016-05-23 21:29:35+00:00,Tony Kovanen,2016-05-23 21:29:35+00:00,"Merge pull request #53 from zeit/implement/async-retry

Implement `async-retry`"
5a198a9680d0974690dd3c0a1faf7c40bb00e40e,Guillermo Rauch,2016-05-23 21:20:54+00:00,Guillermo Rauch,2016-05-23 21:20:54+00:00,implement `async-retry`
a01ce1076bcd656d0cb8efa0d7bb67e935483eda,Guillermo Rauch,2016-05-23 18:16:50+00:00,Guillermo Rauch,2016-05-23 18:16:50+00:00,fix debug
90bae4d6047b12fb07aaaf355b5eed544b659220,Guillermo Rauch,2016-05-23 18:11:21+00:00,Guillermo Rauch,2016-05-23 18:11:21+00:00,Release 0.14.3
1bd1b56ce3f350fe117a78eab520198f26b2842b,Guillermo Rauch,2016-05-23 18:11:02+00:00,Guillermo Rauch,2016-05-23 18:11:02+00:00,"Revert ""add http2 support back""

This reverts commit b1a979d698d3184b0ed5bb494a6a5ac838c3450d."
87b907e27238360b1a4caa492f5313024f4c27d9,Guillermo Rauch,2016-05-23 17:58:36+00:00,Guillermo Rauch,2016-05-23 17:58:36+00:00,Release 0.14.2
b1dd15879cbb0fdb688edc36d447c0a066de7821,Guillermo Rauch,2016-05-23 17:11:52+00:00,Guillermo Rauch,2016-05-23 17:11:52+00:00,Release 0.14.1
d481c5e966433034925a39cd5495f721fc0a743f,Guillermo Rauch,2016-05-23 15:57:18+00:00,Guillermo Rauch,2016-05-23 15:57:18+00:00,remove .next from ignored
d26a6242acdedf7f605142aea3bcdde7734a3518,Guillermo Rauch,2016-05-23 15:11:55+00:00,Guillermo Rauch,2016-05-23 15:11:55+00:00,add support for `email-prompt`
8526739dfa7f5ec5c0ca65e5f374cace017e9970,Guillermo Rauch,2016-05-22 21:55:45+00:00,Guillermo Rauch,2016-05-22 21:55:45+00:00,Release 0.14.0
ba586793ecb3bcd7b1418b3613f662398647aabf,Guillermo Rauch,2016-05-22 20:18:50+00:00,Guillermo Rauch,2016-05-22 20:18:50+00:00,Merge branch 'master' of github.com:zeithq/now
d400c9de6cb0f4d9ddad4ef7b06724b1f623ccf6,Naoyuki Kanezawa,2016-05-22 04:21:11+00:00,Naoyuki Kanezawa,2016-05-22 04:21:11+00:00,"Merge pull request #52 from zeit/add/email-validation

Add email validation and input retrying"
d29be302f3e0dc6a87bdcdf669c45d9bd3d5aa31,Guillermo Rauch,2016-05-22 03:55:11+00:00,Guillermo Rauch,2016-05-22 03:55:11+00:00,less strict email validation (ditch support for hostnames)
4b1a90d1f8bedc3e933a716c0e34f0e7ab58b86d,Guillermo Rauch,2016-05-22 03:46:38+00:00,Guillermo Rauch,2016-05-22 03:46:38+00:00,add email validation and input retrying
f0748bd61b2176c3cc813d626194b10c3809179d,Guillermo Rauch,2016-05-18 21:58:23+00:00,Guillermo Rauch,2016-05-18 21:58:23+00:00,Merge branch 'add/http-2'
21ea9859a2b4c27fd4d9d2b815e7da531d96966d,Guillermo Rauch,2016-05-18 18:58:34+00:00,Guillermo Rauch,2016-05-18 18:58:34+00:00,index: simplify `_fetch`
f1f4930072fcfc265cafee170aae2af548f706a5,Guillermo Rauch,2016-05-18 18:58:26+00:00,Guillermo Rauch,2016-05-18 18:58:26+00:00,package: bump spdy
8cedc5539432b92d133bc9588ee4dc01cfd8d408,Guillermo Rauch,2016-05-18 16:01:52+00:00,Guillermo Rauch,2016-05-18 16:01:52+00:00,now-remove: exit process after saying `n` to remove
86dc31ec5c29b9051939ea2cfed1933fff8dd00d,Guillermo Rauch,2016-05-17 21:41:05+00:00,Guillermo Rauch,2016-05-17 21:41:05+00:00,Release 0.13.3
f4c9ad240d61022c41e3eb4fc701834f82721495,Guillermo Rauch,2016-05-17 17:42:29+00:00,Guillermo Rauch,2016-05-17 17:42:29+00:00,Merge branch 'master' into add/http-2
be5cd55a81cf2d5d8ba3acc35d9c8e3315bf6625,Guillermo Rauch,2016-05-17 17:07:38+00:00,Guillermo Rauch,2016-05-17 17:07:38+00:00,Release 0.13.2
0ce5e8dc769d49a33a6050e164dd369c64a52a38,Guillermo Rauch,2016-05-17 15:42:54+00:00,Guillermo Rauch,2016-05-17 15:42:54+00:00,Merge branch 'master' of github.com:zeithq/now
6d189db9d8476f239b60a2298dfc10cac6115900,Tony Kovanen,2016-05-16 13:02:33+00:00,Tony Kovanen,2016-05-16 13:02:33+00:00,"Sketch requests

(Mostly we need to decide what the route for DELETE is gonna look like)"
cdcded8b951a778a4f992b16545dd3b232991f15,Tony Kovanen,2016-05-16 12:17:29+00:00,Tony Kovanen,2016-05-16 12:17:29+00:00,Add very basic `now-alias` structure
1c0321dae1d3815e38d9df0985cb95dedec42033,Guillermo Rauch,2016-05-15 21:03:51+00:00,Guillermo Rauch,2016-05-15 21:03:51+00:00,"Merge pull request #50 from zeit/add/now-engines

Add now-engines"
18ce4229629e69a8efe375bd3cd4d7c2c463000c,Tony Kovanen,2016-05-15 21:00:53+00:00,Tony Kovanen,2016-05-15 21:00:53+00:00,Add warnings for unfound node version match
194330216aba4977811ce0476a08a2d199ebd7bc,Tony Kovanen,2016-05-15 15:32:44+00:00,Tony Kovanen,2016-05-15 15:32:44+00:00,Read and send `now-engines`
dd5516e1ed909896c47050d6e40c6083cd1db3a6,Guillermo Rauch,2016-05-14 16:39:46+00:00,Guillermo Rauch,2016-05-14 16:39:46+00:00,remove `test` and `tests` from ignored files
93151601118a5262fb767bd3a28b4019b6fcf2ee,Guillermo Rauch,2016-05-12 23:47:35+00:00,Guillermo Rauch,2016-05-12 23:47:35+00:00,Release 0.13.1
b44140e262c1f368bfde2696032076e627aa0417,Guillermo Rauch,2016-05-12 23:46:36+00:00,Guillermo Rauch,2016-05-12 23:46:36+00:00,fix zeit endpoints
e712759b5014ef00c3b049345d8bfb453a7438ca,Guillermo Rauch,2016-05-12 23:25:37+00:00,Guillermo Rauch,2016-05-12 23:25:37+00:00,Release 0.13.0
f41397651f2a63182a9e0dd008d9c1601e61e00e,Guillermo Rauch,2016-05-12 23:25:15+00:00,Guillermo Rauch,2016-05-12 23:25:15+00:00,login: adapt code for api.zeit.co
e860c1d3c084fc6fe8c1a7fe59f587e96549d93b,Guillermo Rauch,2016-05-12 20:23:48+00:00,Guillermo Rauch,2016-05-12 20:23:48+00:00,"Merge pull request #47 from zeit/add/api-zeit-warnings

migrate to api.zeit.co and add warnings support"
7608bf6fd6ff159a9d7935c4cfe624d13bd5cfce,Tony Kovanen,2016-05-12 20:09:25+00:00,Tony Kovanen,2016-05-12 20:09:25+00:00,Fix file size warning reporting
5caa1dc8f45d07eac7bced04ed951e13356b3422,Tony Kovanen,2016-05-12 20:00:24+00:00,Tony Kovanen,2016-05-12 20:00:24+00:00,Fix `.reason` match for file size warnings
19a2e55a9087f30c202e72925752a8c088f0990d,Guillermo Rauch,2016-05-12 19:41:18+00:00,Guillermo Rauch,2016-05-12 19:41:18+00:00,migrate to api.zeit.co and add warnings support
b1a979d698d3184b0ed5bb494a6a5ac838c3450d,Guillermo Rauch,2016-05-06 17:09:39+00:00,Guillermo Rauch,2016-05-06 17:09:39+00:00,add http2 support back
e3e2950a93a7fc4d3e0a513b0a25acd0945fbefc,Guillermo Rauch,2016-04-29 20:25:59+00:00,Guillermo Rauch,2016-04-29 20:25:59+00:00,Release 0.12.0
01d8b9e9a9af7970c2c4d43c21b739c127a402c5,Guillermo Rauch,2016-04-25 17:26:21+00:00,Guillermo Rauch,2016-04-25 17:26:21+00:00,"Merge pull request #44 from zeit/fix/properly-send-duplicate-files-with-same-sha

Send duplicate file SHAs with different paths"
336c688d4555fc64482d3ee34cad5d6f94763637,Tony Kovanen,2016-04-25 17:21:00+00:00,Tony Kovanen,2016-04-25 17:21:27+00:00,Use prototype to apply `concat` and comment intent
bb22a4c5420e892990f9d0de6f766e6521a78697,Tony Kovanen,2016-04-24 21:04:13+00:00,Tony Kovanen,2016-04-24 21:04:13+00:00,Send duplicate file SHAs with different paths
66ba99fdbfc568d7880518f398e75ac9d14efeb8,Guillermo Rauch,2016-04-24 19:38:30+00:00,Guillermo Rauch,2016-04-24 19:38:30+00:00,Release 0.11.0
4a91aed504a6518ed2a83f7c602e9700defcb09d,Guillermo Rauch,2016-04-23 23:27:56+00:00,Guillermo Rauch,2016-04-23 23:27:56+00:00,index: improve error for wrong directory
81214d9fcf8aef08fd6ab54f1e2847964d988bc0,Guillermo Rauch,2016-04-23 23:26:12+00:00,Guillermo Rauch,2016-04-23 23:26:12+00:00,now-remove: improve success message output
f5975b3d3bd6103fa45ee3a45cec438555bd6bbb,Guillermo Rauch,2016-04-23 23:23:32+00:00,Guillermo Rauch,2016-04-23 23:23:32+00:00,"Merge pull request #43 from zeit/add/url-to-confirm

Show url instead of deployment id in confirmation"
95a0263295759f940b4f9fe9a338205f761c427e,Tony Kovanen,2016-04-23 23:15:42+00:00,Tony Kovanen,2016-04-23 23:15:42+00:00,Parity of output with `now ls`
f3591dedf60b51c6c8f22a50a2eab1979e755e30,Tony Kovanen,2016-04-23 22:59:06+00:00,Tony Kovanen,2016-04-23 22:59:06+00:00,Remove double space
e8ff848e3b51bdddea0fc975f0cc11519ca09f8b,Tony Kovanen,2016-04-23 22:56:09+00:00,Tony Kovanen,2016-04-23 22:56:09+00:00,Add `https://` to displayed url for cmd + click
231ad689346aa89a5535caeb85d8cddfd91fbd69,Tony Kovanen,2016-04-23 22:51:16+00:00,Tony Kovanen,2016-04-23 22:51:16+00:00,Show url instead of deployment id in confirmation
ceb7812ec87e8ccc81c6323a036c21a86067c803,Guillermo Rauch,2016-04-23 22:29:50+00:00,Guillermo Rauch,2016-04-23 22:29:50+00:00,"now-remove: improve ux a bit, make colors more consistent"
d498b1056e042362a19b015f3d94e6cedbdda10c,Guillermo Rauch,2016-04-23 22:23:46+00:00,Guillermo Rauch,2016-04-23 22:23:46+00:00,now-remove: show help upon missing id
9522653e3409e71f871947570ba3be57d59f991d,Guillermo Rauch,2016-04-23 18:15:20+00:00,Guillermo Rauch,2016-04-23 18:15:20+00:00,now-deploy: simplify help
8213f16cb83b9c076e02557e1f6ac6086d4a44f3,Guillermo Rauch,2016-04-23 17:42:15+00:00,Guillermo Rauch,2016-04-23 17:42:15+00:00,"Merge pull request #40 from zeit/add/now-rm

Add now rm"
402f3abb340ad0ec4ff4e95a95f3c6d7f639914e,Guillermo Rauch,2016-04-23 17:32:13+00:00,Guillermo Rauch,2016-04-23 17:32:13+00:00,Release 0.10.2
531fed6b76788c99e8e59a2add9963b374f4fe23,Guillermo Rauch,2016-04-23 17:31:25+00:00,Guillermo Rauch,2016-04-23 17:31:25+00:00,"Merge pull request #42 from zeit/fix/path-handling-on-windows

Fix path handling for windows"
aaa036f3e7dad6063af873b13b93dfbff0385d79,Tony Kovanen,2016-04-23 12:52:46+00:00,Tony Kovanen,2016-04-23 12:52:46+00:00,Fix path handling for windows
f862c33ba684f4d43d1cf3bfc30c01c294706d67,Guillermo Rauch,2016-04-23 01:13:40+00:00,Guillermo Rauch,2016-04-23 01:13:40+00:00,Release 0.10.1
a56efa9911ed12314c88df3338682dc502607e20,Naoyuki Kanezawa,2016-04-21 09:36:09+00:00,Naoyuki Kanezawa,2016-04-21 09:36:09+00:00,"Merge pull request #41 from zeit/fix/subcommands-on-windows

Fix subcommands (including deploying) on windows"
49f45a8456e83f954e1f4d6c20b79fa11a70f0eb,Tony Kovanen,2016-04-21 09:31:35+00:00,Tony Kovanen,2016-04-21 09:31:35+00:00,Fix subcommands (including deploying) on windows
d7ed912502cbd80ed5749685964dc676c9f88eae,Tony Kovanen,2016-04-20 15:28:22+00:00,Tony Kovanen,2016-04-20 15:28:22+00:00,Add back help for `now-rm`
f30fa9a848f4242f2d183f577f5c75ec25e4bb73,Tony Kovanen,2016-04-20 13:28:25+00:00,Tony Kovanen,2016-04-20 13:28:25+00:00,Merge branch 'master' of github.com:zeithq/now into add/now-rm
63ed5b31cc47a2df3b4d76c47eb989088ff0434f,Tony Kovanen,2016-04-20 13:24:16+00:00,Tony Kovanen,2016-04-20 13:24:16+00:00,Add `--hard` option to `now-rm`
190179806fe4e3a836200279bd3f3624c36adcfd,Guillermo Rauch,2016-04-20 01:42:51+00:00,Guillermo Rauch,2016-04-20 01:42:51+00:00,Release 0.10.0
5cf2ebe45bb5cee2880b2269ffa023fe3e64e5f6,Guillermo Rauch,2016-04-20 00:36:04+00:00,Guillermo Rauch,2016-04-20 00:36:04+00:00,now-list: style
56fc395c5842037e8e5b58d306f870c648eb5152,Tony Kovanen,2016-04-19 22:45:08+00:00,Tony Kovanen,2016-04-19 22:45:08+00:00,Remove docs for `now rm` temporarily
8da4db0fae0606dbc431ff60f6c4f372518074db,Tony Kovanen,2016-04-19 22:29:07+00:00,Tony Kovanen,2016-04-19 22:29:07+00:00,Fix debug print
d2d81ff1885fc8d726633591b81336790768e08e,Tony Kovanen,2016-04-19 22:27:56+00:00,Tony Kovanen,2016-04-19 22:27:56+00:00,Show error properly on missing `did`
18e516bfab084e4baf1c56c56f0bef01c3d08625,Tony Kovanen,2016-04-19 22:27:50+00:00,Tony Kovanen,2016-04-19 22:27:50+00:00,Add help
fc1026d2b8f7eb832a764473f297bed6ab241fc4,Guillermo Rauch,2016-04-19 22:15:57+00:00,Guillermo Rauch,2016-04-19 22:15:57+00:00,"Merge pull request #38 from zeit/fix/now-list-style

Improve the style of now-list"
0e2041d638a4f153ef4fa4aea733e5d8b2122b81,Tony Kovanen,2016-04-19 20:53:31+00:00,Tony Kovanen,2016-04-19 20:53:31+00:00,Fix body
18825653b336a462d2cd2195e5526bb8686049cd,Tony Kovanen,2016-04-19 12:31:29+00:00,Tony Kovanen,2016-04-19 12:31:29+00:00,Merge branch 'master' of github.com:zeithq/now into add/now-rm
d1fd53b3de556b7ea20898fe7966d5097dc5ee73,Tony Kovanen,2016-04-19 12:29:42+00:00,Tony Kovanen,2016-04-19 12:29:42+00:00,"Merge pull request #39 from zeit/add/help

Add help subcommand"
dc92b119cef05c4fe609496d46c69ad4108efca7,nkzawa,2016-04-19 11:28:43+00:00,nkzawa,2016-04-19 11:28:43+00:00,add help for now-list
0c652d73c8414fa1397b0d3a9cdf9a693cbf9433,nkzawa,2016-04-19 11:28:28+00:00,nkzawa,2016-04-19 11:28:28+00:00,display default help if wrong command was specified
66f4cc2de613877a41969fa8a58dcea9e6299b59,nkzawa,2016-04-19 11:12:44+00:00,nkzawa,2016-04-19 11:12:44+00:00,fix help text
400a67bef9edb2d979f3833aa543ff34e1a516d3,nkzawa,2016-04-19 11:00:17+00:00,nkzawa,2016-04-19 11:00:17+00:00,add the help command
f2282a17918a478e538d75139f62c432290f59f8,nkzawa,2016-04-19 04:48:27+00:00,nkzawa,2016-04-19 04:48:27+00:00,improve the style of now-list
9b55ca862cf6a060580cf3f8a3bd0a7afbd84487,Tony Kovanen,2016-04-17 18:37:04+00:00,Tony Kovanen,2016-04-17 18:37:04+00:00,Merge branch 'master' of github.com:zeithq/now into add/now-rm
39585776cc415b00cea02ab37bb33ab9939145ef,Tony Kovanen,2016-04-16 22:21:41+00:00,Tony Kovanen,2016-04-16 22:21:41+00:00,"Merge pull request #35 from zeit/fix/now-list-sort

Sort now-list result"
13be7ae16a032672a85e47a042098272b0aeb647,nkzawa,2016-04-16 22:01:13+00:00,nkzawa,2016-04-16 22:01:13+00:00,sort now-list result
9ade9b0921ca62d61abc1656ec8be316978cad51,Tony Kovanen,2016-04-16 21:15:21+00:00,Tony Kovanen,2016-04-16 21:15:21+00:00,Add sketch of `now-rm`
c389f56d7e70da9df990be39b04773299c9ba579,Tony Kovanen,2016-04-16 13:11:17+00:00,Tony Kovanen,2016-04-16 13:11:17+00:00,"Merge pull request #34 from zeit/add/now-list

Add now list"
063110008b5348074cd79bebf2a5ef16c03bd493,nkzawa,2016-04-16 08:44:10+00:00,nkzawa,2016-04-16 08:44:10+00:00,resume stdin only when reading email
5df1bc613213a5c34f2e0d4996819f2a440b571a,nkzawa,2016-04-16 08:32:42+00:00,nkzawa,2016-04-16 08:32:42+00:00,now-list: format output
7903aa69a6f22e8c6077a650543d399479f91230,nkzawa,2016-04-15 16:23:37+00:00,nkzawa,2016-04-15 16:23:37+00:00,add url option for development
0bd3127687c667ec85604816f29db8692e759f0f,nkzawa,2016-04-14 05:24:30+00:00,nkzawa,2016-04-15 16:20:54+00:00,now-deploy: don't check update
1577f471deefef59887e8a43daec392aa733d982,nkzawa,2016-04-14 05:22:31+00:00,nkzawa,2016-04-15 16:20:41+00:00,add base command
ac8256fcb8d8f93acf235e0cf01ada01c3e6178f,nkzawa,2016-04-14 05:20:01+00:00,nkzawa,2016-04-15 16:20:26+00:00,bin/now -> bin/now-deploy
0870dc3a6bebd0ffd04c54f4efb3b32558912b21,Guillermo Rauch,2016-04-06 21:35:08+00:00,Guillermo Rauch,2016-04-06 21:35:08+00:00,Release 0.9.19
27882ab109a1def9276649192b287741b18a689b,Guillermo Rauch,2016-04-06 21:34:12+00:00,Guillermo Rauch,2016-04-06 21:34:12+00:00,"Merge pull request #15 from zeit/fix/windows-path-to-relative

X-platform `toRelative`"
8798bd52701f2ba28f8f81f65f4cc7d845fb2767,Tony Kovanen,2016-04-06 21:22:59+00:00,Tony Kovanen,2016-04-06 21:22:59+00:00,X-platform `toRelative`
80772edd4bae0e73751427ca40d0e51d0be43820,Guillermo Rauch,2016-04-06 20:19:05+00:00,Guillermo Rauch,2016-04-06 20:19:05+00:00,Release 0.9.18
cc8bcfadb1ef16504d5add955554271937f81f60,Guillermo Rauch,2016-04-06 20:16:36+00:00,Guillermo Rauch,2016-04-06 20:16:36+00:00,"Merge pull request #14 from zeit/fix/list-main-or-files-entry-if-not-found-at-all

If file not found at all, don't attempt to list it"
44de0cc8d74b25a08aa6a12d59e700ad0cfa7e17,Tony Kovanen,2016-04-06 20:13:20+00:00,Tony Kovanen,2016-04-06 20:13:20+00:00,"If file not found at all, don't attempt to list it

Like the automatically generated `index.js` main from `npm init` if it's
actually not there."
a4679cfb1b94c7800d89793b243ba1764aa7e2de,Guillermo Rauch,2016-04-06 16:12:45+00:00,Guillermo Rauch,2016-04-06 16:12:45+00:00,Release 0.9.17
b4e1acdb85043a4eaada8b8124578228af2a4ca4,Guillermo Rauch,2016-04-01 21:07:14+00:00,Guillermo Rauch,2016-04-01 21:07:14+00:00,Release 0.9.16
8f473e90b4f95f99a5bc9f0c0a494101961a6c39,Guillermo Rauch,2016-04-01 21:02:40+00:00,Guillermo Rauch,2016-04-01 21:02:40+00:00,always print deployment status
cbc93e8c6c79596a1774ab91ace0312c46c69d96,Guillermo Rauch,2016-04-01 19:24:55+00:00,Guillermo Rauch,2016-04-01 19:24:55+00:00,Release 0.9.15
2b9b1606a01eb247a047b3c95a68e1ff337e753a,Guillermo Rauch,2016-04-01 18:49:36+00:00,Guillermo Rauch,2016-04-01 18:49:36+00:00,fix closing of process
d46433433f680f9962691b6af8950b3ace49ce56,Tony Kovanen,2016-03-31 15:17:27+00:00,Tony Kovanen,2016-03-31 15:17:27+00:00,"Merge pull request #13 from zeithq/add/build-output

Add build output"
8663d3f07236cda44a1beccb704956b8e5caee2d,Guillermo Rauch,2016-03-31 03:30:40+00:00,Guillermo Rauch,2016-03-31 03:30:40+00:00,build-logger: connect to `io.now.sh` and render logs
c89f0603eadde3977cb97feed7b61fdb0c69136e,Guillermo Rauch,2016-03-31 03:30:18+00:00,Guillermo Rauch,2016-03-31 03:30:18+00:00,print logs from build
54d98c6a4eacc3b4c8785ead1df734adabc3fd36,Guillermo Rauch,2016-03-31 03:30:01+00:00,Guillermo Rauch,2016-03-31 03:30:01+00:00,index: prevent shadowing
a2b90e5376789cb3d4a16530ac3d5e80c0652fc1,Guillermo Rauch,2016-03-31 03:29:44+00:00,Guillermo Rauch,2016-03-31 03:29:44+00:00,package: use more accurate terminology (`url` vs `host`)
0656e1b1eb5a86a0c01d35d8b46243b31a215999,Guillermo Rauch,2016-03-31 03:28:46+00:00,Guillermo Rauch,2016-03-31 03:28:46+00:00,package: add `ansi-escapes` and `socket.io-client`
9701e71450013225f0815b5d3e227f369deffaa7,Guillermo Rauch,2016-03-30 15:32:30+00:00,Guillermo Rauch,2016-03-30 15:32:30+00:00,"Merge pull request #12 from zeithq/fix/unwanted-bail

Fix unwanted bails"
5d37847b089b51bcfded9bef5dfd9ae9fcff1dbc,Tony Kovanen,2016-03-30 14:27:15+00:00,Tony Kovanen,2016-03-30 14:27:15+00:00,Fix unwanted bails
1aa4fbf216887ebe293ae70b028b0c10b7bcb3b0,Guillermo Rauch,2016-03-30 05:21:49+00:00,Guillermo Rauch,2016-03-30 05:21:49+00:00,now: fix indent
44b34a39569f21d9978b48b042bd19719c3bade5,Tony Kovanen,2016-03-29 21:23:53+00:00,Tony Kovanen,2016-03-29 21:23:53+00:00,"Merge pull request #11 from zeithq/fix/skip-updates-on-no-tty

ignore update checking if no tty"
b7dc0a2c906875ce017697cb9958e5df3cb7ab8d,Guillermo Rauch,2016-03-29 21:13:25+00:00,Guillermo Rauch,2016-03-29 21:13:25+00:00,ignore update checking if no tty
df4fd9320a9bbe6eaa1aae821b7efe576e44da6f,Tony Kovanen,2016-03-29 20:08:04+00:00,Tony Kovanen,2016-03-29 20:08:04+00:00,"Merge pull request #10 from zeithq/ditch/commander-js

now: move from commander to minimist"
a759be220323c0a800a93e9d44cfefc8973fdfd4,Guillermo Rauch,2016-03-29 19:54:09+00:00,Guillermo Rauch,2016-03-29 19:54:09+00:00,now: move from commander to minimist
85dc7afc017d2ea3c61447899a7e09879982d148,Guillermo Rauch,2016-03-19 18:33:40+00:00,Guillermo Rauch,2016-03-19 18:33:40+00:00,"Merge pull request #9 from zeithq/fix/429-error-handling

Fix rate limit error handling"
d0ef4ef7fc659d8e938404614d9278ceeab82658,nkzawa,2016-03-19 17:03:06+00:00,nkzawa,2016-03-19 17:04:14+00:00,add messages for rate limit exceeded error
51286add0f343f49c183f7cfa2ab0b8b6f70dc34,nkzawa,2016-03-19 17:01:46+00:00,nkzawa,2016-03-19 17:04:03+00:00,no retry if client error
36f79d17e398c9492814eac088eeaa5bf76ababb,Guillermo Rauch,2016-03-18 02:36:10+00:00,Guillermo Rauch,2016-03-18 02:36:10+00:00,Release 0.9.14
ed56084f2c918c6bb1daa6e1b541bd302f83875b,Guillermo Rauch,2016-03-18 02:35:40+00:00,Guillermo Rauch,2016-03-18 02:35:40+00:00,index: support `now-start`
ae93e2bcf75ae92024c5e3e123893a67ccb81285,Guillermo Rauch,2016-03-13 07:15:50+00:00,Guillermo Rauch,2016-03-13 07:15:50+00:00,Release 0.9.13
e9240344256058fb0ffc2b2f67bc0724e968ad80,Guillermo Rauch,2016-03-13 07:15:01+00:00,Guillermo Rauch,2016-03-13 07:15:01+00:00,index: validate `name` in package.json
830a43d2ddc438ec5742260312efa5161bf99c73,Guillermo Rauch,2016-03-13 06:14:53+00:00,Guillermo Rauch,2016-03-13 06:14:53+00:00,Release 0.9.12
d669b4db7d9d24e0865e0bb0349f0692c8e9c8c1,Guillermo Rauch,2016-03-13 06:14:21+00:00,Guillermo Rauch,2016-03-13 06:14:21+00:00,login: use https for api.now.sh
a589367ab8fbe1c49286851cf46888dbb1239ae9,Guillermo Rauch,2016-03-13 06:11:19+00:00,Guillermo Rauch,2016-03-13 06:11:19+00:00,Release 0.9.11
239a5cd40ebc71233ae81ac207a9cddb08e998a0,Guillermo Rauch,2016-03-13 06:10:50+00:00,Guillermo Rauch,2016-03-13 06:10:50+00:00,fix registration url
590e0939ab31f14e8e4ad2584e0c1719c896175c,Guillermo Rauch,2016-03-13 05:18:31+00:00,Guillermo Rauch,2016-03-13 05:18:31+00:00,Release 0.9.10
988a92a97b145e97baed104a49d426efe36cf2d9,Guillermo Rauch,2016-03-13 05:17:50+00:00,Guillermo Rauch,2016-03-13 05:17:50+00:00,delete post-install
041574a5449010f27c2d41eddd6b194dd0e1b6b7,Guillermo Rauch,2016-03-13 04:11:34+00:00,Guillermo Rauch,2016-03-13 04:11:34+00:00,Release 0.9.9
4909c75edc34f81be6cfaa0c76caaf63e0da5aca,Guillermo Rauch,2016-03-13 04:10:58+00:00,Guillermo Rauch,2016-03-13 04:10:58+00:00,now: expose version
bf3bf195c7031af62c0c667e0bc3a167fcc0417e,Guillermo Rauch,2016-03-13 03:56:49+00:00,Guillermo Rauch,2016-03-13 03:56:49+00:00,Release 0.9.8
9a8aa019c3fe90ab686f4d7979a03e7079005e16,Guillermo Rauch,2016-03-13 03:26:34+00:00,Guillermo Rauch,2016-03-13 03:26:34+00:00,cap maximum uploads due to nginx 128 streams limit
8b523c08a57356dd8ee239dc5e11d96b47623567,Tony Kovanen,2016-03-10 23:08:31+00:00,Tony Kovanen,2016-03-10 23:08:31+00:00,Merge branch 'master' of github.com:zeithq/now
6de7a6f23c33529ac707b163a80883126e3a64b2,Tony Kovanen,2016-03-10 23:08:15+00:00,Tony Kovanen,2016-03-10 23:08:15+00:00,Make login resolve token
59b4936c9971d99b3029a3eab77e39e6ac46e2f7,Guillermo Rauch,2016-03-10 20:01:15+00:00,Guillermo Rauch,2016-03-10 20:01:15+00:00,Release 0.9.7
eb793b4b080a74e2dd77f8c9cb8e899e1c227cf8,Tony Kovanen,2016-03-10 19:47:20+00:00,Tony Kovanen,2016-03-10 19:47:20+00:00,Merge branch 'master' of github.com:zeithq/now
c5b07204bf37365885dbf693cca8b56180c8affa,Tony Kovanen,2016-03-10 19:46:26+00:00,Tony Kovanen,2016-03-10 19:46:26+00:00,"Add `-F, --forceSync` flag"
654edcddf1a50688a6799587ff20d256adbc2771,Guillermo Rauch,2016-03-09 20:01:07+00:00,Guillermo Rauch,2016-03-09 20:01:07+00:00,fix build
d719ebcd0c6bd968f6b0302f6080478c78f9c6e0,Guillermo Rauch,2016-03-05 00:59:29+00:00,Guillermo Rauch,2016-03-05 00:59:29+00:00,Release 0.9.6
efa80ef649eac1010f762664f2c6b09c899e3ff6,Guillermo Rauch,2016-03-05 00:55:12+00:00,Guillermo Rauch,2016-03-05 00:55:12+00:00,"Merge pull request #5 from zeithq/add/new-sync-format

Add/new sync format"
24f55c047d733e89d4c45bf107fc1f2ebfe77552,Tony Kovanen,2016-03-05 00:39:14+00:00,Tony Kovanen,2016-03-05 00:39:44+00:00,Don't stringify body of streams
0e8ead93d2a0732ffa4bf874f8244e41ed4044b7,Tony Kovanen,2016-03-05 00:22:42+00:00,Tony Kovanen,2016-03-05 00:22:42+00:00,Draft
79be0e22671349547721094739e863dc2b32e912,Guillermo Rauch,2016-03-05 00:18:44+00:00,Guillermo Rauch,2016-03-05 00:18:44+00:00,fix writing cfg
c5ee6200639d0a5abf862b2b595b3a3d66ec635f,Guillermo Rauch,2016-03-05 00:08:34+00:00,Guillermo Rauch,2016-03-05 00:08:34+00:00,"Merge pull request #4 from zeithq/add/auto-updates

Add auto updates"
9a5cab353a2a1ba135a741c68836c86ed3a09666,Guillermo Rauch,2016-03-04 21:32:14+00:00,Guillermo Rauch,2016-03-04 21:32:14+00:00,"suggest ""npm install"""
515c946ccde7e49d0d2e0394f1da9ae616084099,Guillermo Rauch,2016-03-04 20:53:25+00:00,Guillermo Rauch,2016-03-04 20:53:25+00:00,tfw you dramatically simplify something
d946b3be81debdb22bb228cfc61f2e12c9ae7bbf,Guillermo Rauch,2016-03-04 20:31:15+00:00,Guillermo Rauch,2016-03-04 20:31:15+00:00,update 10 minutes
96477b9cb24cf37b92df18fd3d97faa9d09d4cab,Guillermo Rauch,2016-03-04 20:29:29+00:00,Guillermo Rauch,2016-03-04 20:29:29+00:00,cfg: handy configuration helper
392638ff5a857678461bf88d4df566dbbbdb3a7e,Guillermo Rauch,2016-03-04 20:29:18+00:00,Guillermo Rauch,2016-03-04 20:29:18+00:00,simplify cfg reading / merging
8259fcafef42ee8366592863ec33bf480ca21d0d,Guillermo Rauch,2016-03-04 20:29:04+00:00,Guillermo Rauch,2016-03-04 20:29:04+00:00,ignored: ignore `.dockerignore`
d4c5ebc3cd3a0c62bd1f335ffea1f4808a7682dd,Guillermo Rauch,2016-03-04 20:28:46+00:00,Guillermo Rauch,2016-03-04 20:28:46+00:00,"add auto updater with support for timeout, exit handler"
ee9341b8d99b42c3d763205dca10230b18fe17d6,Guillermo Rauch,2016-03-04 15:09:34+00:00,Guillermo Rauch,2016-03-04 15:09:34+00:00,package: bump `gulp-eslint` to work with latest eslint
2847f5d29dc867d9321131c3b6c02ef96bf90a84,Guillermo Rauch,2016-03-04 15:09:24+00:00,Guillermo Rauch,2016-03-04 15:09:24+00:00,disable rule that's broken with `async` atm
6d9e9609e1ab55ec30fd253f34ed5240b39bac2c,Guillermo Rauch,2016-03-04 15:09:00+00:00,Guillermo Rauch,2016-03-04 15:09:00+00:00,lint
948b4bf11796d8a1aade4c0fe1a0b9a699634a2f,Guillermo Rauch,2016-03-04 14:55:51+00:00,Guillermo Rauch,2016-03-04 14:55:51+00:00,fix eslint
e033b31e6d9465076110db05656ea80529a3b251,Guillermo Rauch,2016-03-04 13:49:26+00:00,Guillermo Rauch,2016-03-04 13:49:26+00:00,Release 0.9.5
c9ff3ab3b84f63f582c5213b4af638e77115b41a,Guillermo Rauch,2016-03-04 13:44:33+00:00,Guillermo Rauch,2016-03-04 13:44:33+00:00,login: fix usage of `Object.assign`
59dcbe5a322a454efb909cdb53edaf8f02abae6a,Guillermo Rauch,2016-03-04 13:40:47+00:00,Guillermo Rauch,2016-03-04 13:40:47+00:00,post-install: improve error handling
2691cd67bf733fd4525da8eede85f68fd2e496bd,Guillermo Rauch,2016-03-04 13:39:26+00:00,Guillermo Rauch,2016-03-04 13:39:26+00:00,error-handling
d7e7c1c0e0859375d86c7c06131540675b97360e,Guillermo Rauch,2016-03-04 13:28:30+00:00,Guillermo Rauch,2016-03-04 13:28:30+00:00,post-install: turn into a shell script
12f165ef4a542c44af10f3c6186b8cc7de6eac3d,Guillermo Rauch,2016-03-04 13:23:52+00:00,Guillermo Rauch,2016-03-04 13:24:03+00:00,package: fix `post-install
4039b658a77e6f4a27581ef5767167f66f6e6f69,Guillermo Rauch,2016-03-04 13:23:10+00:00,Guillermo Rauch,2016-03-04 13:23:10+00:00,pacakge: use `build` for postinstall
68afd5e89a6bfc27ba2088f563330222928aada5,Tony Kovanen,2016-03-04 13:14:04+00:00,Tony Kovanen,2016-03-04 13:14:04+00:00,"Merge pull request #3 from zeithq/add/pkg-metadata

index: send pkg metadata"
294e034d7eab8075fc17ad1100a50dc5c8353d3c,Guillermo Rauch,2016-03-04 13:12:53+00:00,Guillermo Rauch,2016-03-04 13:12:53+00:00,index: fallback to directory name
c4fd5372ad6cc6b0b497b7a679f6662db26f8925,Guillermo Rauch,2016-03-04 13:09:20+00:00,Guillermo Rauch,2016-03-04 13:09:20+00:00,index: send pkg metadata
1a837d96aab9000e24f9c6e526818e078eddc0a8,Guillermo Rauch,2016-03-04 02:15:16+00:00,Guillermo Rauch,2016-03-04 02:15:16+00:00,Release 0.9.4
cbe6d9a34fde8316edd5de81acb72d67ca41ac3f,Guillermo Rauch,2016-03-04 02:10:20+00:00,Guillermo Rauch,2016-03-04 02:10:20+00:00,login: extend configuration instead of overwriting it
915c747ab42929d27fa49519c3e7bf4a71d21a30,Guillermo Rauch,2016-03-04 01:39:08+00:00,Guillermo Rauch,2016-03-04 01:39:08+00:00,Release 0.9.3
d7f76226c5d3e8d6c5319373ef35b5db272d0471,Guillermo Rauch,2016-03-04 01:37:56+00:00,Guillermo Rauch,2016-03-04 01:37:56+00:00,index: timers
dc92e443f25fddc2abe05e22b491fd002a96ebfd,Guillermo Rauch,2016-03-04 01:18:39+00:00,Guillermo Rauch,2016-03-04 01:18:39+00:00,Release 0.9.2
5cb103d96c92d82608a5dc9e63cc07fdf50cf8b8,Guillermo Rauch,2016-03-04 01:18:20+00:00,Guillermo Rauch,2016-03-04 01:18:20+00:00,update ignores list
3adcc0d0d0500630cc3be82edfed5095ae871cd9,Guillermo Rauch,2016-03-04 00:55:55+00:00,Guillermo Rauch,2016-03-04 00:55:55+00:00,Release 0.9.1
6bfe5566887ef47e0a2c457fbe7c009f37679912,Guillermo Rauch,2016-03-04 00:50:16+00:00,Guillermo Rauch,2016-03-04 00:50:16+00:00,index: throw error if `start` is not defined.
f4c3712623fa5661b6b5b06fc2415b2f95dc3f19,Guillermo Rauch,2016-03-04 00:50:03+00:00,Guillermo Rauch,2016-03-04 00:50:03+00:00,now: revert usage of `now`
c4138a4cda450c2fe04f7f4102d5e9fc91dd2a5b,Guillermo Rauch,2016-03-04 00:36:21+00:00,Guillermo Rauch,2016-03-04 00:36:21+00:00,package: simplify `files`
db67bd4a3d7ab84065dfcb11304655ac8648b293,Guillermo Rauch,2016-03-04 00:25:23+00:00,Guillermo Rauch,2016-03-04 00:25:23+00:00,Release 0.9.0
09e034cbb2782d634f5a1c4c5333c93ca004109e,Guillermo Rauch,2016-03-04 00:17:31+00:00,Guillermo Rauch,2016-03-04 00:17:31+00:00,now: require a path (eg: `now .`)
1ba1b23d4b323f311b687a724cd12aaa2530ca01,Guillermo Rauch,2016-03-04 00:17:15+00:00,Guillermo Rauch,2016-03-04 00:17:15+00:00,uglify build
5853038811024cbba871f0cbb0d0aaab281b0cbb,Guillermo Rauch,2016-03-03 23:00:50+00:00,Guillermo Rauch,2016-03-03 23:00:50+00:00,index: fix comma-dangle
d32c522144d911e0b28c15b406c2f5754992d336,Guillermo Rauch,2016-03-03 23:00:10+00:00,Guillermo Rauch,2016-03-03 23:00:10+00:00,index: also send `file` upon `/create` to fix re-syncs
4ffae480a407776d5e2f4f5ee3d126a3817fa8a7,Guillermo Rauch,2016-03-02 19:00:32+00:00,Guillermo Rauch,2016-03-02 19:00:32+00:00,utf8
1da771970af2255b1825923ad8a42ac5c7471eb2,Guillermo Rauch,2016-03-02 18:56:06+00:00,Guillermo Rauch,2016-03-02 18:56:06+00:00,performance improvement
82d954fb2e8f2756cfa4e1985592ebb1da00db7c,Guillermo Rauch,2016-03-02 18:49:37+00:00,Guillermo Rauch,2016-03-02 18:49:42+00:00,add test for ignoring big files
5f6b0142c029a354521ce1482c14a6abc467caf4,Guillermo Rauch,2016-03-02 18:49:21+00:00,Guillermo Rauch,2016-03-02 18:49:21+00:00,index: add tests for limits and get-files debug
2ac6d62c0c3ffb455afe4e0f126b1826995e0921,Guillermo Rauch,2016-03-02 18:49:10+00:00,Guillermo Rauch,2016-03-02 18:49:10+00:00,index: pass 1mb limit
daaaa7161b4da69f9d67b4bc9064c7e64924c7ea,Guillermo Rauch,2016-03-02 18:48:46+00:00,Guillermo Rauch,2016-03-02 18:48:46+00:00,support for custom limits
56ac6bb77322f7449c5d98c5869f400190ee7589,Guillermo Rauch,2016-03-02 17:54:37+00:00,Guillermo Rauch,2016-03-02 17:54:37+00:00,ignore list
adea900d6f29dabf1cc4fdbb7b7095b8027482a5,Guillermo Rauch,2016-03-02 17:54:19+00:00,Guillermo Rauch,2016-03-02 17:54:19+00:00,node_modules fixture
5f4a05f183c78f28f1b733801f435c37bf008ab1,Guillermo Rauch,2016-03-02 17:54:04+00:00,Guillermo Rauch,2016-03-02 17:54:04+00:00,get-files: fix ignored directories
008688eb2d1089ab40c8b2618611aefed9e97d87,Guillermo Rauch,2016-03-02 17:53:50+00:00,Guillermo Rauch,2016-03-02 17:53:50+00:00,test: added node_modules fixture
2adb3ce31361b3e6f159dbcf41553ee412a8703f,Guillermo Rauch,2016-03-02 16:40:52+00:00,Guillermo Rauch,2016-03-02 16:40:52+00:00,now: tune `complete` callback
9ada816fbc65444dfac28ae6f0a8be854742fcc4,Guillermo Rauch,2016-03-02 16:30:34+00:00,Guillermo Rauch,2016-03-02 16:30:34+00:00,now: wrap path in quotes
4f08f41dcc51a4360dc3e0d9a5d37eb3b4377783,Guillermo Rauch,2016-03-02 16:29:49+00:00,Guillermo Rauch,2016-03-02 16:29:49+00:00,"now: colors, colors everywhere"
66bbcbd8a086460896bd8aff357ba91341c7f5dd,Guillermo Rauch,2016-03-02 15:59:25+00:00,Guillermo Rauch,2016-03-02 15:59:25+00:00,fix program.login
89abddc536b70451f6c1cc5ec9dde63529f96f20,Tony Kovanen,2016-03-02 13:39:09+00:00,Tony Kovanen,2016-03-02 13:39:09+00:00,Add scripts to files
b8f52bef62695fd620533f2d0028ce4855f274e7,Tony Kovanen,2016-03-02 13:38:55+00:00,Tony Kovanen,2016-03-02 13:38:55+00:00,Fix `toRelative`
d65e29c67dcba2634528ccdfeb4ff6615b1b9cb8,Tony Kovanen,2016-03-02 13:17:14+00:00,Tony Kovanen,2016-03-02 13:17:14+00:00,Ensure no beginning slash in synced file paths
4acb0fbfb5d09b0772be5446ede4942bc48dec6b,Tony Kovanen,2016-03-02 13:08:39+00:00,Tony Kovanen,2016-03-02 13:08:39+00:00,Exit when cached sync complete
e056e4ea9a8284dc2e26c7687df855fc4dfa1db3,Tony Kovanen,2016-03-02 12:55:49+00:00,Tony Kovanen,2016-03-02 12:55:49+00:00,Exit when sync complete
b7396a3bfc674d3e25ba4e3b835904c3d735be96,Tony Kovanen,2016-03-02 12:40:06+00:00,Tony Kovanen,2016-03-02 12:40:06+00:00,Send data as string
a473c6ebc63e9a0ca5ac4a17122b02b0f3a07e5d,Tony Kovanen,2016-03-02 12:36:10+00:00,Tony Kovanen,2016-03-02 12:36:10+00:00,Fix login
3035f8de11d0eb9a78494d73c012be155392e16b,Tony Kovanen,2016-03-02 11:48:43+00:00,Tony Kovanen,2016-03-02 11:48:43+00:00,Fix condition
a72817af8f7f0d2cafcb00ea5e0577d4a35f7a94,Tony Kovanen,2016-03-02 11:41:36+00:00,Tony Kovanen,2016-03-02 11:41:36+00:00,Chmod scripts
f59e790c885e462a2c8322f69d10d819551fede0,Guillermo Rauch,2016-03-02 07:23:43+00:00,Guillermo Rauch,2016-03-02 07:23:43+00:00,package: bump `spdy`
d15a6007e5896795adb766b17de2a4946a8d9c2f,Guillermo Rauch,2016-03-01 17:25:13+00:00,Guillermo Rauch,2016-03-01 17:25:13+00:00,package: bump spdy
5299bf6e600818be8dd78487406870efae331c8b,Guillermo Rauch,2016-03-01 17:24:39+00:00,Guillermo Rauch,2016-03-01 17:24:39+00:00,Merge branch 'master' of github.com:zeithq/now
19f8d4c4d943d9f81713408d1c17925e4d795301,Guillermo Rauch,2016-03-01 17:24:29+00:00,Guillermo Rauch,2016-03-01 17:24:29+00:00,login: tweak requests
71b4d651d20fc6479554183795afa3dfd2c6c190,Guillermo Rauch,2016-03-01 17:23:05+00:00,Guillermo Rauch,2016-03-01 17:23:05+00:00,agent: fix content-length calc
a97b5075a2ee46da8431434b3d2d2a3da526ab95,Guillermo Rauch,2016-03-01 16:47:56+00:00,Guillermo Rauch,2016-03-01 16:47:56+00:00,fix agent init
e3a9d660afd2a27363bfe4129548354b82917220,Tony Kovanen,2016-03-01 14:44:29+00:00,Tony Kovanen,2016-03-01 14:44:29+00:00,Change /sync attr: file => name
965130a1206f1b1a91ef57262b586e4f6b117040,Tony Kovanen,2016-03-01 14:39:50+00:00,Tony Kovanen,2016-03-01 14:39:50+00:00,Add minimatch
0a2e88351b2266b689f97bc446c5aebd8d12478e,Guillermo Rauch,2016-02-28 01:36:04+00:00,Guillermo Rauch,2016-02-28 01:36:04+00:00,get-files: skip file over 1mb
b11c06f16b7d827696cf8b68927f230a68a0f574,Guillermo Rauch,2016-02-28 01:21:36+00:00,Guillermo Rauch,2016-02-28 01:21:36+00:00,index: use new api endpoint
f538c3939e159bbb2c8d5171d5d1e45b87496c84,Guillermo Rauch,2016-02-28 00:48:26+00:00,Guillermo Rauch,2016-02-28 00:48:26+00:00,move babel transform plugin dev dep
a8397b55e7cce06ab284c26e36729b31ff21b074,Guillermo Rauch,2016-02-28 00:40:33+00:00,Guillermo Rauch,2016-02-28 00:40:33+00:00,now: implement event listeners for upload progress
d5ae92242b153037e37d8ada3872a24a95fb929c,Guillermo Rauch,2016-02-28 00:40:14+00:00,Guillermo Rauch,2016-02-28 00:40:14+00:00,"package: add `progress` bar, `retry` and `bytes`"
8f95d05613c64ddd7137f62e264e22db82f3db41,Guillermo Rauch,2016-02-28 00:38:51+00:00,Guillermo Rauch,2016-02-28 00:38:51+00:00,adapt tests
f9566f5dfa7fc4c339a5e16fd90e3881204d8e1c,Guillermo Rauch,2016-02-28 00:38:02+00:00,Guillermo Rauch,2016-02-28 00:38:02+00:00,hash: return file contents to avoid multiple syscalls and allocations
d78fa92d744a12f9d0b879131d2f7df6d1b5c87d,Guillermo Rauch,2016-02-28 00:37:54+00:00,Guillermo Rauch,2016-02-28 00:37:54+00:00,agent: implement debugging support
afc4e1abde71bd629315a0cd9025d4a8e9cb0973,Guillermo Rauch,2016-02-28 00:37:08+00:00,Guillermo Rauch,2016-02-28 00:37:08+00:00,index: implement file syncing and retrying
d18df462019301f4753e483bc515d5e29adafc4b,Guillermo Rauch,2016-02-28 00:36:52+00:00,Guillermo Rauch,2016-02-28 00:36:52+00:00,copy: wrap `copy-paste` and make it `await`-friendly
2b4f5b858479fc2f433499424207955a48c6bf75,Guillermo Rauch,2016-02-28 00:36:41+00:00,Guillermo Rauch,2016-02-28 00:36:41+00:00,retry: wrap node-retry and make it `await`-friendly
2b3fe36b73102f69bfe95e88ea912e9b1a829c51,Guillermo Rauch,2016-02-27 00:35:36+00:00,Guillermo Rauch,2016-02-27 00:35:36+00:00,pakage: remove `es6-promisify`
5c3fd34160e5e0f3a81d24f1f86fa5119a80f36b,Guillermo Rauch,2016-02-27 00:30:59+00:00,Guillermo Rauch,2016-02-27 00:30:59+00:00,`fs-promise` already leverages `graceful-fs` (thanks @rase- for pointer)
704727a863f2638bddc959c5d2067ac6b94b8459,Guillermo Rauch,2016-02-26 22:41:42+00:00,Guillermo Rauch,2016-02-26 22:41:42+00:00,agent: refactor to re-start connections
30adee935c66d310abd1c8b082de298320fa664a,Guillermo Rauch,2016-02-26 22:40:04+00:00,Guillermo Rauch,2016-02-26 22:40:04+00:00,use graceful-fs to avoid EMFILE for large projects
9185d8925077a4dddf03dc89cd5e5f26e6a3693f,Guillermo Rauch,2016-02-26 21:04:26+00:00,Guillermo Rauch,2016-02-26 21:04:26+00:00,index: update agent url
d604c48188c7a7abb1463d9cdc28f86a97adc514,Guillermo Rauch,2016-02-26 21:03:45+00:00,Guillermo Rauch,2016-02-26 21:03:45+00:00,README tweaks
1c0ef4582c9cf4289865e9eae6f7e6451b4e7be3,Guillermo Rauch,2016-02-26 18:03:57+00:00,Guillermo Rauch,2016-02-26 18:03:57+00:00,support force
53c894e1f14b209645639eb6b9e2f6e3593c1a39,Guillermo Rauch,2016-02-25 00:04:39+00:00,Guillermo Rauch,2016-02-25 00:04:39+00:00,now: handle generic errors
6da435febe97663a4139b023a2ccb84dbd1d52fa,Guillermo Rauch,2016-02-25 00:04:15+00:00,Guillermo Rauch,2016-02-25 00:04:15+00:00,"index: handle authentication errors, send bearer token, send shas"
aa6814874af741f9cf4ed8a9d99f911b7cdfc877,Guillermo Rauch,2016-02-25 00:04:05+00:00,Guillermo Rauch,2016-02-25 00:04:05+00:00,package: added chalk
f8040d654668de5a5273ac5b4329c29ab46ac8b6,Guillermo Rauch,2016-02-25 00:03:58+00:00,Guillermo Rauch,2016-02-25 00:03:58+00:00,improved login output
adad40680630ba40b70758e0918c924ff5bd9f8b,Guillermo Rauch,2016-02-24 23:27:50+00:00,Guillermo Rauch,2016-02-24 23:27:50+00:00,login: a little more explicit
9b39f6e7231f96f17a035263b058e702e6c1bca6,Guillermo Rauch,2016-02-24 23:27:34+00:00,Guillermo Rauch,2016-02-24 23:27:34+00:00,lib: read package.json
43734fe951c14265b070fd08d1c276894775e699,Guillermo Rauch,2016-02-24 23:27:13+00:00,Guillermo Rauch,2016-02-24 23:27:13+00:00,get-files: side-loading of `pkg` to avoid double fs lookups
2b9551e7322cf1ba8715b6bf802cc5a9de4e5b95,Guillermo Rauch,2016-02-24 23:27:01+00:00,Guillermo Rauch,2016-02-24 23:27:01+00:00,now: pass token
8d2c22c0cbcad895d33966b4d18d74cc189f8e68,Guillermo Rauch,2016-02-24 23:10:41+00:00,Guillermo Rauch,2016-02-24 23:10:41+00:00,now: get token from config or `login`
a0ff54997335decffd02f65034fa1e485c34d248,Guillermo Rauch,2016-02-24 23:08:15+00:00,Guillermo Rauch,2016-02-24 23:08:15+00:00,index: fix hashes test
9d886bb6fc70c340dbb99f53e3946855a8a2d36b,Guillermo Rauch,2016-02-24 23:04:05+00:00,Guillermo Rauch,2016-02-24 23:04:05+00:00,login: don't attempt json parsing if non-200
d58021f099c737312f39d30551e8a4dec4dcdcfc,Guillermo Rauch,2016-02-24 22:52:27+00:00,Guillermo Rauch,2016-02-24 22:52:27+00:00,hash: return SHA -> file
594bf69ba7eaed2b70b502aab72b7bfab754571a,Guillermo Rauch,2016-02-24 22:52:17+00:00,Guillermo Rauch,2016-02-24 22:52:17+00:00,now: exit 1 upon login error
65ff8f91f558e8001c2eac150ce7162b993abde3,Guillermo Rauch,2016-02-24 22:52:00+00:00,Guillermo Rauch,2016-02-24 22:52:00+00:00,login: close stdin
fb572236d45ea4e14c005c4ac75de05ac893ee85,Tony Kovanen,2016-02-24 22:40:22+00:00,Tony Kovanen,2016-02-24 22:40:22+00:00,Lint fixes
e13f778a5caa4c0e70a75b609955fc2e2e59e9cd,Tony Kovanen,2016-02-24 22:37:17+00:00,Tony Kovanen,2016-02-24 22:37:17+00:00,Make `login()` return a promise
154dc7f402dc2b93f2ebfb769a0119c060900784,Guillermo Rauch,2016-02-24 22:19:53+00:00,Guillermo Rauch,2016-02-24 22:19:53+00:00,"Merge pull request #1 from zeithq/add/registration

Add registration"
d1e997ef65e8f16c86d7e04dff6d3793bdf8eeeb,Tony Kovanen,2016-02-24 22:19:30+00:00,Tony Kovanen,2016-02-24 22:19:30+00:00,Remove inquirer
9f5aacded56e516a16b6eaa2125514291a6a1f2c,Tony Kovanen,2016-02-24 22:18:27+00:00,Tony Kovanen,2016-02-24 22:18:27+00:00,"Merge branch 'master' of github.com:zeithq/now into add/registration

Conflicts:
	lib/login.js"
75db9cec7ccf3afc6659559e1db04f8686a8f6f6,Tony Kovanen,2016-02-24 22:16:27+00:00,Tony Kovanen,2016-02-24 22:16:27+00:00,Adjust headers
68b68f924c09c64d8d7e7134331e2d3affaebd9c,Tony Kovanen,2016-02-24 22:05:48+00:00,Tony Kovanen,2016-02-24 22:05:48+00:00,Use node-fetch
72b085b62806ccd1d9f2e86a5a651dc5376659e4,Tony Kovanen,2016-02-24 22:03:36+00:00,Tony Kovanen,2016-02-24 22:03:36+00:00,"Merge branch 'master' of github.com:zeithq/now into add/registration

Conflicts:
	package.json"
bccfce021cd29d43f6482d89955243de23f3da4d,Guillermo Rauch,2016-02-24 22:02:26+00:00,Guillermo Rauch,2016-02-24 22:02:26+00:00,inquirer
25d22e91117577d835fdfff5e080e49aa2876d01,Guillermo Rauch,2016-02-24 22:01:59+00:00,Guillermo Rauch,2016-02-24 22:01:59+00:00,incorporate login
4d880264b20edf621efcb372e9cdb79a668b5b34,Tony Kovanen,2016-02-24 22:00:15+00:00,Tony Kovanen,2016-02-24 22:00:15+00:00,Extact login logic to separate function
e7a1fcf8c4fdb45a054c502ab47d1942939198d6,Tony Kovanen,2016-02-24 21:56:21+00:00,Tony Kovanen,2016-02-24 21:56:21+00:00,Fix registration
c4237b09cf8b7f92d235452e73c6641c240e9f9d,Guillermo Rauch,2016-02-24 21:33:25+00:00,Guillermo Rauch,2016-02-24 21:33:25+00:00,index: agent example
5aeca7d7bcb1e66c249c41a27d0737eff6a343b4,Guillermo Rauch,2016-02-24 21:33:13+00:00,Guillermo Rauch,2016-02-24 21:33:13+00:00,agent: http2 agent helper
0a06fde7dfb70f4084080ad44833aa56b53a1a54,Guillermo Rauch,2016-02-24 21:33:04+00:00,Guillermo Rauch,2016-02-24 21:33:04+00:00,package: added `fetch` and `spdy`
3c817b40fcb6daaf2055687e389affea28ba93f1,Guillermo Rauch,2016-02-24 21:21:01+00:00,Guillermo Rauch,2016-02-24 21:21:01+00:00,.gitignore: ignore build
763c0f5548a6ee01943b39595f49156c7f3a74bc,Guillermo Rauch,2016-02-24 21:20:53+00:00,Guillermo Rauch,2016-02-24 21:20:53+00:00,removed build
ab2ef874f298fc1b4cef2d3d8392e02649812ab1,Tony Kovanen,2016-02-24 13:13:30+00:00,Tony Kovanen,2016-02-24 13:13:30+00:00,Add registration script skeleton
f2693e19d7715d612310bdb3f473237d612a3053,Guillermo Rauch,2016-02-24 01:20:22+00:00,Guillermo Rauch,2016-02-24 01:20:22+00:00,initial commit
